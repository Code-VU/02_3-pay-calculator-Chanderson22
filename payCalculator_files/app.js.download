!function(){function e(e,o,t,n,r,a){t.$on("httpError",function(e,t){var n=LuAnywhere.services.toast.getInstance();r.getWebcomponentsFlag()?n.showToast({title:a.showMessage("data_service.toastr.error.error"),message:t.error.title,variant:"error"}):o.onError(t)}),t.$on("httpSuccess",function(e,t){var n=LuAnywhere.services.toast.getInstance();r.getWebcomponentsFlag()?n.showToast({title:a.showMessage("data_service.toastr.success.success"),message:t.success.title,variant:"success"}):o.onSuccess(t)}),t.$on("$locationChangeSuccess",function(e,t){t=new URL(t).pathname.split("/")[1];n.localStorage.getItem("luStickyFilters")&&i(n.localStorage,t),n.sessionStorage.getItem("luStickyFilters")&&i(n.sessionStorage,t)})}function i(t,n){var e=t.getItem("luStickyFilters"),e=e?JSON.parse(decodeURIComponent(atob(e))):{};Object.keys(e).forEach(function(e){e!==n&&t.removeItem("luStickyFilters")})}function t(e,t,n,o,r,a){n.debugEnabled(!1),a.aHrefSanitizationWhitelist(/^\s*(https?|mailto|callto):/),e.interceptors.push("HttpInterceptor"),r.setAllowedMethods(["POST","PUT","PATCH","DELETE"]),t.resourceUrlWhitelist(["self",CONFIG.cdnWL]),o.setWorkerSrc(CONFIG.cdnPath+"pdf.js-viewer/pdf.worker.js")}e.$inject=["StorageFactory","notifyFactory","$rootScope","$window","LuaFactory","LupHelper"],angular.module("lu",["lu.templates","ui.bootstrap","ngSanitize","ngAnimate","toastr","dialogs.main","lu.dialogs","lu.spinners","ngFileUpload","uiCropper","as.sortable","monospaced.elastic","socialLinks","lu.ludash","lu.ludash.widget.quick-action-list","lu.ludash.widget.high-chart","lu.ludash.widget.leaderboard","lu.ludash.layouts","lu.typeahead","lu.tags","lu.form","lu.pdfjs","lu.interceptors"]).config(t).run(e),t.$inject=["$httpProvider","$sceDelegateProvider","$logProvider","pdfjsViewerConfigProvider","csrfTokenizerProvider","$compileProvider"]}(),function(s){s.fn.packer=function(e){return this.each(function(e,o){var r=s(o),a=s(o).find('[data-packer="more-element"]'),i=200;function t(){var e=r.find("li:not([data-packer])");a.find(".dropdown-menu > li").each(function(e,t){s(t).appendTo(r),a.hide()});var n=0;e.each(function(e,t){(n+=t.offsetWidth)+40>o.offsetWidth-i&&!s(t).hasClass("active")&&!s(t).hasClass("default")&&(s(t).appendTo(a.find(".dropdown-menu")),a.show(),a.appendTo(a.parent()),n-=t.offsetWidth)})}a[0]&&(i=a[0].offsetWidth),a.hide(),s(window).resize(function(){t(),992<window.innerWidth&&s(".search-container").show()}),t()})}}(jQuery),$(function(){$("#actions-packed").packer(),$("#tabs-packed").packer(),$("#toggle-filter").click(function(){$("#filter-box").show("fast")}),$(window).resize(function(){window.innerWidth<=992?$("#filter-box").hide():$("#filter-box").show()}),$("#filter-close").click(function(){$("#filter-box").hide("fast")}),$("#filter-clear").click(function(){$("#filter-message").hide(),window.innerWidth<992&&$("#filter-box").hide("fast")}),$("#filter-apply").click(function(){$("#filter-message").show(),window.innerWidth<992&&$("#filter-box").hide("fast")}),$("#drawer-link").click(function(){$(document.body).addClass("drawer-open"),$(".overlay").show()}),$("#drawer-close").click(function(){$(document.body).hasClass("drawer-open")?($(document.body).removeClass("drawer-open"),$(".overlay").hide()):($(document.body).addClass("drawer-open"),$(".overlay").show())}),$(".more-action-row").click(function(){$(this).closest(".box").addClass("actions-open")}),$(".more-action-cancel").click(function(){$(this).closest(".box").removeClass("actions-open")})}),function(){"use strict";function e(e){e=e.get();this.segment=e.segment.attributes}window.angular.module("lu").controller("PdfDocumentViewer",e),e.$inject=["StorageFactory"]}(),function(){function e(){}for(var t,n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],o=n.length,r=window.console=window.console||{};o--;)r[t=n[o]]||(r[t]=e)}(),CDN_PATH=void 0!==window.CONFIG?CONFIG.cdnPath:"/",IMAGE_RESOURCES_PATH=CDN_PATH+"images/pdf.js-viewer/",WORKER_SRC=CDN_PATH+"pdf.js-viewer/pdf.worker.js",CMAPS_URL="../web/cmaps/",function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";var o,r;o=n(1),r=n(6),n(38),n(43),window.webViewerLoad=function(){var e={appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),eventBus:null,toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelectContainer:document.getElementById("scaleSelectContainer"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),toolbarButtonContainer:document.getElementById("secondaryToolbarButtonContainer"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},fullscreen:{contextFirstPage:document.getElementById("contextFirstPage"),contextLastPage:document.getElementById("contextLastPage"),contextPageRotateCw:document.getElementById("contextPageRotateCw"),contextPageRotateCcw:document.getElementById("contextPageRotateCcw")},sidebar:{outerContainer:document.getElementById("outerContainer"),viewerContainer:document.getElementById("viewerContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{overlayName:"passwordOverlay",container:document.getElementById("passwordOverlay"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{overlayName:"documentPropertiesOverlay",container:document.getElementById("documentPropertiesOverlay"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},errorWrapper:{container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")},printContainer:document.getElementById("printContainer"),openFileInputName:"fileInput",debuggerScriptPath:"./debugger.js"};window.PDFViewerApplication=o.PDFViewerApplication,window.PDFViewerApplicationOptions=r.AppOptions,window.PDFViewerApplicationOptions.set("isEvalSupported",!1);var t=document.createEvent("CustomEvent");t.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.dispatchEvent(t)}catch(e){document.dispatchEvent(t)}o.PDFViewerApplication.run(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPrintServiceFactory=t.DefaultExternalServices=t.PDFViewerApplication=void 0;var o,h=(o=n(2))&&o.__esModule?o:{default:o},b=n(5),v=n(6),_=n(8),u=n(9),d=n(11),w=n(12),p=n(13),m=n(14),f=n(15),g=n(17),y=n(18),M=n(19),S=n(21),C=n(22),A=n(23),L=n(24),$=n(25),T=n(26),z=n(27),x=n(29),P=n(34),k=n(36),i=(n(7),n(37));function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function O(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){l(o,t,n,r,a,"next",e)}function a(e){l(o,t,n,r,a,"throw",e)}r(void 0)})}}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=1e3,I="enablePermissions",D=-1,N=1,F=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],q=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"],j=function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Error("Cannot initialize DefaultExternalServices.")}var t,n,o;return t=e,o=[{key:"updateFindControlState",value:function(){}},{key:"updateFindMatchesCount",value:function(){}},{key:"initPassiveLoading",value:function(){}},{key:"fallback",value:function(){}},{key:"reportTelemetry",value:function(){}},{key:"createDownloadManager",value:function(){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function(){throw new Error("Not implemented: createL10n")}},{key:"supportsIntegratedFind",get:function(){return(0,_.shadow)(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function(){return(0,_.shadow)(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function(){return(0,_.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function(){return(0,_.shadow)(this,"isInAutomation",!1)}}],(n=null)&&a(t.prototype,n),o&&a(t,o),e}();t.DefaultExternalServices=j;var B={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,_.createPromiseCapability)(),fellback:!1,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",externalServices:j,_boundEvents:{},contentDispositionFilename:null,triggerDelayedFallback:null,_saveInProgress:!1,_wheelUnusedTicks:0,initialize:function(n){var o=this;return O(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.preferences=o.externalServices.createPreferences(),o.appConfig=n,e.next=4,o._readPreferences();case 4:return e.next=6,o._parseHashParameters();case 6:return e.next=8,o._initializeL10n();case 8:return o.isViewerEmbedded&&v.AppOptions.get("externalLinkTarget")===_.LinkTarget.NONE&&v.AppOptions.set("externalLinkTarget",_.LinkTarget.TOP),e.next=11,o._initializeViewerComponents();case 11:o.bindEvents(),o.bindWindowEvents(),t=n.appContainer||document.documentElement,o.l10n.translate(t).then(function(){o.eventBus.dispatch("localized",{source:o})}),o._initializedCapability.resolve();case 16:case"end":return e.stop()}},e)}))()},_readPreferences:function(){var o=this;return O(h.default.mark(function e(){var t,n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.AppOptions.get("disablePreferences"))return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,e.next=5,o.preferences.getAll();case 5:for(n in t=e.sent)v.AppOptions.set(n,t[n]);e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},_parseHashParameters:function(){var a=this;return O(h.default.mark(function e(){var t,n,o,r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.AppOptions.get("pdfBugEnabled")){e.next=2;break}return e.abrupt("return",void 0);case 2:if(t=document.location.hash.substring(1)){e.next=5;break}return e.abrupt("return",void 0);case 5:if(n=(0,b.parseQueryString)(t),o=[],"disableworker"in n&&"true"===n.disableworker&&o.push(function(){return V.apply(this,arguments)}()),"disablerange"in n&&v.AppOptions.set("disableRange","true"===n.disablerange),"disablestream"in n&&v.AppOptions.set("disableStream","true"===n.disablestream),"disableautofetch"in n&&v.AppOptions.set("disableAutoFetch","true"===n.disableautofetch),"disablefontface"in n&&v.AppOptions.set("disableFontFace","true"===n.disablefontface),"disablehistory"in n&&v.AppOptions.set("disableHistory","true"===n.disablehistory),"webgl"in n&&v.AppOptions.set("enableWebGL","true"===n.webgl),"verbosity"in n&&v.AppOptions.set("verbosity",0|n.verbosity),!("textlayer"in n)){e.next=23;break}e.t0=n.textlayer,e.next="off"===e.t0?18:"visible"===e.t0||"shadow"===e.t0||"hover"===e.t0?20:23;break;case 18:return v.AppOptions.set("textLayerMode",b.TextLayerMode.DISABLE),e.abrupt("break",23);case 20:return a.appConfig.viewerContainer.classList.add("textLayer-"+n.textlayer),e.abrupt("break",23);case 23:return"pdfbug"in n&&(v.AppOptions.set("pdfBug",!0),v.AppOptions.set("fontExtraProperties",!0),r=n.pdfbug.split(","),o.push(function(e){var t=B.appConfig;return(0,_.loadScript)(t.debuggerScriptPath).then(function(){PDFBug.enable(e),PDFBug.init({OPS:_.OPS},t.mainContainer)})}(r))),"locale"in n&&v.AppOptions.set("locale",n.locale),e.abrupt("return",Promise.all(o).catch(function(e){}));case 26:case"end":return e.stop()}},e)}))()},_initializeL10n:function(){var n=this;return O(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.l10n=n.externalServices.createL10n({locale:v.AppOptions.get("locale")}),e.next=3,"ltr";case 3:t=e.sent,document.getElementsByTagName("html")[0].dir=t;case 5:case"end":return e.stop()}},e)}))()},_initializeViewerComponents:function(){var c=this;return O(h.default.mark(function e(){var t,n,o,r,a,i,s,l;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c.appConfig,n=t.eventBus||new b.EventBus({isInAutomation:c.externalServices.isInAutomation}),c.eventBus=n,c.overlayManager=new p.OverlayManager,(o=new d.PDFRenderingQueue).onIdle=c.cleanup.bind(c),c.pdfRenderingQueue=o,r=new A.PDFLinkService({eventBus:n,externalLinkTarget:v.AppOptions.get("externalLinkTarget"),externalLinkRel:v.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:v.AppOptions.get("ignoreDestinationZoom")}),c.pdfLinkService=r,a=c.externalServices.createDownloadManager(),c.downloadManager=a,i=new M.PDFFindController({linkService:r,eventBus:n}),c.findController=i,s=t.mainContainer,l=t.viewerContainer,c.pdfViewer=new x.PDFViewer({container:s,viewer:l,eventBus:n,renderingQueue:o,linkService:r,downloadManager:a,findController:i,renderer:v.AppOptions.get("renderer"),enableWebGL:v.AppOptions.get("enableWebGL"),l10n:c.l10n,textLayerMode:v.AppOptions.get("textLayerMode"),imageResourcesPath:v.AppOptions.get("imageResourcesPath"),renderInteractiveForms:v.AppOptions.get("renderInteractiveForms"),enablePrintAutoRotate:v.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:v.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:v.AppOptions.get("maxCanvasPixels")}),o.setViewer(c.pdfViewer),r.setViewer(c.pdfViewer),c.pdfThumbnailViewer=new z.PDFThumbnailViewer({container:t.sidebar.thumbnailView,eventBus:n,renderingQueue:o,linkService:r,l10n:c.l10n}),o.setThumbnailViewer(c.pdfThumbnailViewer),c.pdfHistory=new S.PDFHistory({linkService:r,eventBus:n}),r.setHistory(c.pdfHistory),c.supportsIntegratedFind||(c.findBar=new y.PDFFindBar(t.findBar,n,c.l10n)),c.pdfDocumentProperties=new g.PDFDocumentProperties(t.documentProperties,c.overlayManager,n,c.l10n),c.pdfCursorTools=new u.PDFCursorTools({container:s,eventBus:n,cursorToolOnLoad:v.AppOptions.get("cursorToolOnLoad")}),c.toolbar=new k.Toolbar(t.toolbar,n,c.l10n),c.secondaryToolbar=new P.SecondaryToolbar(t.secondaryToolbar,s,n),c.supportsFullscreen&&(c.pdfPresentationMode=new $.PDFPresentationMode({container:s,pdfViewer:c.pdfViewer,eventBus:n,contextMenuItems:t.fullscreen})),c.passwordPrompt=new m.PasswordPrompt(t.passwordOverlay,c.overlayManager,c.l10n),c.pdfOutlineViewer=new L.PDFOutlineViewer({container:t.sidebar.outlineView,eventBus:n,linkService:r}),c.pdfAttachmentViewer=new f.PDFAttachmentViewer({container:t.sidebar.attachmentsView,eventBus:n,downloadManager:a}),c.pdfLayerViewer=new C.PDFLayerViewer({container:t.sidebar.layersView,eventBus:n,l10n:c.l10n}),c.pdfSidebar=new w.PDFSidebar({elements:t.sidebar,pdfViewer:c.pdfViewer,pdfThumbnailViewer:c.pdfThumbnailViewer,eventBus:n,l10n:c.l10n}),c.pdfSidebar.onToggled=c.forceRendering.bind(c),c.pdfSidebarResizer=new T.PDFSidebarResizer(t.sidebarResizer,n,c.l10n);case 35:case"end":return e.stop()}},e)}))()},run:function(e){this.initialize(e).then(X)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn:function(e){if(!this.pdfViewer.isInPresentationMode){for(var t=this.pdfViewer.currentScale;t=(1.1*t).toFixed(2),t=Math.ceil(10*t)/10,t=Math.min(b.MAX_SCALE,t),0<--e&&t<b.MAX_SCALE;);this.pdfViewer.currentScaleValue=t}},zoomOut:function(e){if(!this.pdfViewer.isInPresentationMode){for(var t=this.pdfViewer.currentScale;t=(t/1.1).toFixed(2),t=Math.floor(10*t)/10,t=Math.max(b.MIN_SCALE,t),0<--e&&t>b.MIN_SCALE;);this.pdfViewer.currentScaleValue=t}},zoomReset:function(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=b.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},get printing(){return!!this.printService},get supportsPrinting(){return je.instance.supportsPrinting},get supportsFullscreen(){var e=document.documentElement,e=!!(e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen);return!1!==document.fullscreenEnabled&&!1!==document.mozFullScreenEnabled&&!1!==document.webkitFullscreenEnabled&&!1!==document.msFullscreenEnabled||(e=!1),(0,_.shadow)(this,"supportsFullscreen",e)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){var e=new b.ProgressBar("#loadingBar");return(0,_.shadow)(this,"loadingBar",e)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading:function(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl:function(e){var t=0<arguments.length&&void 0!==e?e:"";this.url=t,this.baseUrl=t.split("#")[0];var n=(0,b.getPDFFileNameFromURL)(t,"");if(!n)try{n=decodeURIComponent((0,_.getFilenameFromUrl)(t))||t}catch(e){n=t}this.setTitle(n)},setTitle:function(e){this.isViewerEmbedded||(document.title=e)},close:function(){var n=this;return O(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.appConfig.errorWrapper.container.setAttribute("hidden","true"),n.pdfLoadingTask){e.next=4;break}return e.abrupt("return",void 0);case 4:return t=n.pdfLoadingTask.destroy(),n.pdfLoadingTask=null,n.pdfDocument&&(n.pdfDocument=null,n.pdfThumbnailViewer.setDocument(null),n.pdfViewer.setDocument(null),n.pdfLinkService.setDocument(null),n.pdfDocumentProperties.setDocument(null)),function(){var e=B.appConfig;if(!e)return;e.viewerContainer.classList.remove(I)}(),n.store=null,n.isInitialViewSet=!1,n.downloadComplete=!1,n.url="",n.baseUrl="",n.contentDispositionFilename=null,n.triggerDelayedFallback=null,n._saveInProgress=!1,n.pdfSidebar.reset(),n.pdfOutlineViewer.reset(),n.pdfAttachmentViewer.reset(),n.pdfLayerViewer.reset(),n.pdfHistory&&n.pdfHistory.reset(),n.findBar&&n.findBar.reset(),n.toolbar.reset(),n.secondaryToolbar.reset(),"undefined"!=typeof PDFBug&&PDFBug.cleanup(),e.abrupt("return",t);case 26:case"end":return e.stop()}},e)}))()},open:function(u,d){var p=this;return O(h.default.mark(function e(){var t,n,o,r,a,i,s,l,c;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.pdfLoadingTask)return e.next=3,p.close();e.next=3;break;case 3:for(n in t=v.AppOptions.getAll(v.OptionKind.WORKER))_.GlobalWorkerOptions[n]=t[n];for(a in o=Object.create(null),"string"==typeof u?(p.setTitleUsingUrl(u),o.url=u):u&&"byteLength"in u?o.data=u:u.url&&u.originalUrl&&(p.setTitleUsingUrl(u.originalUrl),o.url=u.url),r=v.AppOptions.getAll(v.OptionKind.API))i=r[a],o[a]=i;if(d)for(s in d)l=d[s],"length"===s&&p.pdfDocumentProperties.setFileSize(l),o[s]=l;return c=(0,_.getDocument)(o),(p.pdfLoadingTask=c).onPassword=function(e,t){p.pdfLinkService.externalLinkEnabled=!1,p.passwordPrompt.setUpdateCallback(e,t),p.passwordPrompt.open()},c.onProgress=function(e){var t=e.loaded,e=e.total;p.progress(t/e)},c.onUnsupportedFeature=p.fallback.bind(p),e.abrupt("return",c.promise.then(function(e){p.load(e)},function(t){if(c===p.pdfLoadingTask){var n=t&&t.message,e=t instanceof _.InvalidPDFException?p.l10n.get("invalid_file_error",null,"Invalid or corrupted PDF file."):t instanceof _.MissingPDFException?p.l10n.get("missing_file_error",null,"Missing PDF file."):t instanceof _.UnexpectedResponseException?p.l10n.get("unexpected_response_error",null,"Unexpected server response."):p.l10n.get("loading_error",null,"An error occurred while loading the PDF.");return e.then(function(e){throw p.error(e,{message:n}),t})}}));case 16:case"end":return e.stop()}},e)}))()},download:function(e){var t=this,e=(0<arguments.length&&void 0!==e?e:{}).sourceEventType,n=void 0===e?"download":e;function o(){i.downloadUrl(r,a)}var r=this.baseUrl,a=this.contentDispositionFilename||(0,b.getPDFFileNameFromURL)(this.url),i=this.downloadManager;i.onerror=function(e){t.error("PDF failed to download: ".concat(e))},this.pdfDocument&&this.downloadComplete?this.pdfDocument.getData().then(function(e){e=new Blob([e],{type:"application/pdf"});i.download(e,r,a,n)}).catch(o):o()},save:function(e){var t,n,o,r=this,e=(0<arguments.length&&void 0!==e?e:{}).sourceEventType,a=void 0===e?"download":e;this._saveInProgress||(t=this.baseUrl,n=this.contentDispositionFilename||(0,b.getPDFFileNameFromURL)(this.url),(o=this.downloadManager).onerror=function(e){r.error("PDF failed to be saved: ".concat(e))},this.pdfDocument&&this.downloadComplete?(this._saveInProgress=!0,this.pdfDocument.saveDocument(this.pdfDocument.annotationStorage).then(function(e){e=new Blob([e],{type:"application/pdf"});o.download(e,t,n,a)}).catch(function(){r.download({sourceEventType:a})}).finally(function(){r._saveInProgress=!1})):this.download({sourceEventType:a}))},_delayedFallback:function(e){var t=this;this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e}),this.triggerDelayedFallback||(this.triggerDelayedFallback=function(){t.fallback(e),t.triggerDelayedFallback=null})},fallback:function(e){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e}),this.fellback||(this.fellback=!0,this.externalServices.fallback({featureId:e,url:this.baseUrl},function(e){e&&B.download({sourceEventType:"download"})}))},error:function(e,t){var n=[this.l10n.get("error_version_info",{version:_.version||"?",build:_.build||"?"},"PDF.js v{{version}} (build: {{build}})")];t&&(n.push(this.l10n.get("error_message",{message:t.message},"Message: {{message}}")),t.stack?n.push(this.l10n.get("error_stack",{stack:t.stack},"Stack: {{stack}}")):(t.filename&&n.push(this.l10n.get("error_file",{file:t.filename},"File: {{file}}")),t.lineNumber&&n.push(this.l10n.get("error_line",{line:t.lineNumber},"Line: {{line}}"))));var t=this.appConfig.errorWrapper,o=t.container;o.removeAttribute("hidden"),t.errorMessage.textContent=e;e=t.closeButton;e.onclick=function(){o.setAttribute("hidden","true")};var r=t.errorMoreInfo,a=t.moreInfoButton,i=t.lessInfoButton;a.onclick=function(){r.removeAttribute("hidden"),a.setAttribute("hidden","true"),i.removeAttribute("hidden"),r.style.height=r.scrollHeight+"px"},i.onclick=function(){r.setAttribute("hidden","true"),a.removeAttribute("hidden"),i.setAttribute("hidden","true")},a.oncontextmenu=b.noContextMenuHandler,i.oncontextmenu=b.noContextMenuHandler,e.oncontextmenu=b.noContextMenuHandler,a.removeAttribute("hidden"),i.setAttribute("hidden","true"),Promise.all(n).then(function(e){r.value=e.join("\n")})},progress:function(e){var t=this;this.downloadComplete||((e=Math.round(100*e))>this.loadingBar.percent||isNaN(e))&&(this.loadingBar.percent=e,(this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:v.AppOptions.get("disableAutoFetch"))&&e&&(this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),this.loadingBar.show(),this.disableAutoFetchLoadingBarTimeout=setTimeout(function(){t.loadingBar.hide(),t.disableAutoFetchLoadingBarTimeout=null},5e3)))},load:function(_){var m=this;(this.pdfDocument=_).getDownloadInfo().then(function(){m.downloadComplete=!0,m.loadingBar.hide(),r.then(function(){m.eventBus.dispatch("documentloaded",{source:m})})});var t=_.getPageLayout().catch(function(){}),n=_.getPageMode().catch(function(){}),o=_.getOpenAction().catch(function(){});this.toolbar.setPagesCount(_.numPages,!1),this.secondaryToolbar.setPagesCount(_.numPages),e=null,this.pdfLinkService.setDocument(_,e),this.pdfDocumentProperties.setDocument(_,this.url);var e=_.annotationStorage;e&&(e.onSetModified=function(){window.addEventListener("beforeunload",qe)},e.onResetModified=function(){window.removeEventListener("beforeunload",qe)});var f=this.pdfViewer;f.setDocument(_);var r=f.firstPagePromise,e=f.onePageRendered,g=f.pagesPromise;this.pdfThumbnailViewer.setDocument(_);var a=(this.store=new i.ViewHistory(_.fingerprint)).getMultiple({page:null,zoom:b.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:w.SidebarView.UNKNOWN,scrollMode:b.ScrollMode.UNKNOWN,spreadMode:b.SpreadMode.UNKNOWN}).catch(function(){return Object.create(null)});r.then(function(e){m.loadingBar.setWidth(m.appConfig.viewerContainer),Promise.all([b.animationStarted,a,t,n,o]).then(function(){var t=O(h.default.mark(function e(t){var n,o,r,a,i,s,l,c,u,d,p;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=E(t,5),d[0],n=d[1],o=d[2],r=d[3],p=d[4],a=v.AppOptions.get("viewOnLoad"),m._initializePdfHistory({fingerprint:_.fingerprint,viewOnLoad:a,initialDest:p&&p.dest}),i=m.initialBookmark,s=v.AppOptions.get("defaultZoomValue"),l=s?"zoom=".concat(s):null,c=null,u=v.AppOptions.get("sidebarViewOnLoad"),d=v.AppOptions.get("scrollModeOnLoad"),p=v.AppOptions.get("spreadModeOnLoad"),n.page&&a!==N&&(l="page=".concat(n.page,"&zoom=").concat(s||n.zoom,",")+"".concat(n.scrollLeft,",").concat(n.scrollTop),c=parseInt(n.rotation,10),u===w.SidebarView.UNKNOWN&&(u=0|n.sidebarView),d===b.ScrollMode.UNKNOWN&&(d=0|n.scrollMode),p===b.SpreadMode.UNKNOWN&&(p=0|n.spreadMode)),r&&u===w.SidebarView.UNKNOWN&&(u=function(e){switch(e){case"UseNone":return w.SidebarView.NONE;case"UseThumbs":return w.SidebarView.THUMBS;case"UseOutlines":return w.SidebarView.OUTLINE;case"UseAttachments":return w.SidebarView.ATTACHMENTS;case"UseOC":return w.SidebarView.LAYERS}return w.SidebarView.NONE}(r)),o&&p===b.SpreadMode.UNKNOWN&&(p=function(e){switch(e){case"SinglePage":case"OneColumn":return b.SpreadMode.NONE;case"TwoColumnLeft":case"TwoPageLeft":return b.SpreadMode.ODD;case"TwoColumnRight":case"TwoPageRight":return b.SpreadMode.EVEN}return b.SpreadMode.NONE}(o)),m.setInitialView(l,{rotation:c,sidebarView:u,scrollMode:d,spreadMode:p}),m.eventBus.dispatch("documentinit",{source:m}),m.isViewerEmbedded||f.focus(),m._initializePermissions(_),e.next=19,Promise.race([g,new Promise(function(e){setTimeout(e,1e4)})]);case 19:if(i||l){e.next=21;break}return e.abrupt("return");case 21:if(f.hasEqualPageSizes)return e.abrupt("return");e.next=23;break;case 23:m.initialBookmark=i,f.currentScaleValue=f.currentScaleValue,m.setInitialView(l);case 26:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){m.setInitialView()}).then(function(){f.update()})}),g.then(function(){m._initializeAutoPrint(_,o)}),e.then(function(){_.getOutline().then(function(e){m.pdfOutlineViewer.render({outline:e})}),_.getAttachments().then(function(e){m.pdfAttachmentViewer.render({attachments:e})})}),this._initializePageLabels(_),this._initializeMetadata(_)},_initializeAutoPrint:function(i,s){var l=this;return O(h.default.mark(function e(){var t,n,o,r,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([s,i.getJavaScript()]);case 2:if(n=e.sent,a=E(n,2),t=a[0],n=a[1],i!==l.pdfDocument)return e.abrupt("return");e.next=8;break;case 8:if(o=!1,t&&"Print"===t.action&&(o=!0),!n){e.next=31;break}if(n.some(function(e){return!!e&&(l._delayedFallback(_.UNSUPPORTED_FEATURES.javaScript),!0)}),o){e.next=31;break}r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}(n),e.prev=14,r.s();case 16:if((a=r.n()).done){e.next=23;break}if((a=a.value)&&b.AutoPrintRegExp.test(a))return o=!0,e.abrupt("break",23);e.next=21;break;case 21:e.next=16;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),r.e(e.t0);case 28:return e.prev=28,r.f(),e.finish(28);case 31:if(l.supportsPrinting){e.next=33;break}return e.abrupt("return");case 33:o&&setTimeout(function(){window.print()});case 34:case"end":return e.stop()}},e,null,[[14,25,28,31]])}))()},_initializeMetadata:function(c){var u=this;return O(h.default.mark(function e(){var t,n,o,r,a,i,s,l;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getMetadata();case 2:if(l=e.sent,t=l.info,n=l.metadata,o=l.contentDispositionFilename,c!==u.pdfDocument)return e.abrupt("return");e.next=8;break;case 8:u.documentInfo=t,u.metadata=n,u.contentDispositionFilename=o,(a=t&&t.Title)&&(r=a),(l=n&&n.get("dc:title"))&&("Untitled"===l||/[\uFFF0-\uFFFF]/g.test(l)||(r=l)),r?u.setTitle("".concat(r," - ").concat(o||document.title)):o&&u.setTitle(o),(t.IsXFAPresent&&!t.IsAcroFormPresent||(t.IsAcroFormPresent||t.IsXFAPresent)&&!u.pdfViewer.renderInteractiveForms)&&u._delayedFallback(_.UNSUPPORTED_FEATURES.forms),a="other",F.includes(t.PDFFormatVersion)&&(a="v".concat(t.PDFFormatVersion.replace(".","_"))),i="other",t.Producer&&(s=t.Producer.toLowerCase(),q.some(function(e){return!!s.includes(e)&&(i=e.replace(/[ .\-]/g,"_"),!0)})),l=null,t.IsXFAPresent?l="xfa":t.IsAcroFormPresent&&(l="acroform"),u.externalServices.reportTelemetry({type:"documentInfo",version:a,generator:i,formType:l});case 25:case"end":return e.stop()}},e)}))()},_initializePageLabels:function(s){var l=this;return O(h.default.mark(function e(){var t,n,o,r,a,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getPageLabels();case 2:if(t=e.sent,s!==l.pdfDocument)return e.abrupt("return");e.next=5;break;case 5:if(!t||v.AppOptions.get("disablePageLabels"))return e.abrupt("return");e.next=7;break;case 7:if((n=t.length)!==l.pagesCount)return e.abrupt("return");e.next=11;break;case 11:for(o=0;o<n&&t[o]===(o+1).toString();)o++;if(o===n)return e.abrupt("return");e.next=15;break;case 15:r=l.pdfViewer,a=l.pdfThumbnailViewer,i=l.toolbar,r.setPageLabels(t),a.setPageLabels(t),i.setPagesCount(n,!0),i.setPageNumber(r.currentPageNumber,r.currentPageLabel);case 20:case"end":return e.stop()}},e)}))()},_initializePdfHistory:function(e){var t=e.fingerprint,n=e.viewOnLoad,e=e.initialDest,e=void 0===e?null:e;this.isViewerEmbedded||v.AppOptions.get("disableHistory")||(this.pdfHistory.initialize({fingerprint:t,resetHistory:n===N,updateUrl:v.AppOptions.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),e&&!this.initialBookmark&&n===D&&(this.initialBookmark=JSON.stringify(e),this.pdfHistory.push({explicitDest:e,pageNumber:null})))},_initializePermissions:function(n){var o=this;return O(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPermissions();case 2:if(t=e.sent,n!==o.pdfDocument)return e.abrupt("return");e.next=5;break;case 5:if(t&&v.AppOptions.get("enablePermissions")){e.next=7;break}return e.abrupt("return");case 7:t.includes(_.PermissionFlag.COPY)||o.appConfig.viewerContainer.classList.add(I);case 8:case"end":return e.stop()}},e)}))()},setInitialView:function(e,t){var n,o,r=this,a=1<arguments.length&&void 0!==t?t:{},i=a.rotation,s=a.sidebarView,l=a.scrollMode,t=a.spreadMode,a=function(e){(0,b.isValidRotation)(e)&&(r.pdfViewer.pagesRotation=e)};this.isInitialViewSet=!0,this.pdfSidebar.setInitialView(s),n=l,o=t,(0,b.isValidScrollMode)(n)&&(r.pdfViewer.scrollMode=n),(0,b.isValidSpreadMode)(o)&&(r.pdfViewer.spreadMode=o),this.initialBookmark?(a(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):e&&(a(i),this.pdfLinkService.setHash(e)),this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=b.DEFAULT_SCALE_VALUE)},cleanup:function(){this.pdfDocument&&(this.pdfViewer.cleanup(),this.pdfThumbnailViewer.cleanup(),this.pdfViewer.renderer!==b.RendererType.SVG&&this.pdfDocument.cleanup())},forceRendering:function(){this.pdfRenderingQueue.printing=this.printing,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible,this.pdfRenderingQueue.renderHighestPriority()},beforePrint:function(){var e,t,n,o,r=this;this.printService||(this.supportsPrinting?this.pdfViewer.pageViewsReady?(e=this.pdfViewer.getPagesOverview(),t=this.appConfig.printContainer,n=v.AppOptions.get("printResolution"),o=this.pdfViewer.optionalContentConfigPromise,o=je.instance.createPrintService(this.pdfDocument,e,t,n,o,this.l10n),this.printService=o,this.forceRendering(),o.layout(),this.externalServices.reportTelemetry({type:"print"})):this.l10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.").then(function(e){}):this.l10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.").then(function(e){r.error(e)}))},afterPrint:function(){this.printService&&(this.printService.destroy(),this.printService=null,this.pdfDocument&&this.pdfDocument.annotationStorage.resetModified()),this.forceRendering()},rotatePages:function(e){this.pdfDocument&&(e=(this.pdfViewer.pagesRotation+360+e)%360,this.pdfViewer.pagesRotation=e)},requestPresentationMode:function(){this.pdfPresentationMode&&this.pdfPresentationMode.request()},bindEvents:function(){var e=this.eventBus,t=this._boundEvents;t.beforePrint=this.beforePrint.bind(this),t.afterPrint=this.afterPrint.bind(this),e._on("resize",ne),e._on("hashchange",oe),e._on("beforeprint",t.beforePrint),e._on("afterprint",t.afterPrint),e._on("pagerendered",K),e._on("updateviewarea",Z),e._on("pagechanging",xe),e._on("scalechanging",Te),e._on("rotationchanging",ze),e._on("sidebarviewchanged",Q),e._on("pagemode",G),e._on("namedaction",Y),e._on("presentationmodechanged",J),e._on("presentationmode",re),e._on("print",ae),e._on("download",se),e._on("save",le),e._on("firstpage",ce),e._on("lastpage",ue),e._on("nextpage",de),e._on("previouspage",pe),e._on("zoomin",_e),e._on("zoomout",me),e._on("zoomreset",fe),e._on("pagenumberchanged",ge),e._on("scalechanged",he),e._on("rotatecw",be),e._on("rotateccw",ve),e._on("optionalcontentconfig",we),e._on("switchscrollmode",ye),e._on("scrollmodechanged",ee),e._on("switchspreadmode",Me),e._on("spreadmodechanged",te),e._on("documentproperties",Se),e._on("find",Ce),e._on("findfromurlhash",Ae),e._on("updatefindmatchescount",Le),e._on("updatefindcontrolstate",$e),e._on("openfile",H)},bindWindowEvents:function(){var e=this.eventBus,t=this._boundEvents;t.windowResize=function(){e.dispatch("resize",{source:window})},t.windowHashChange=function(){e.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},t.windowBeforePrint=function(){e.dispatch("beforeprint",{source:window})},t.windowAfterPrint=function(){e.dispatch("afterprint",{source:window})},window.addEventListener("visibilitychange",Pe),window.addEventListener("wheel",Oe,{passive:!1}),window.addEventListener("touchstart",Ie,{passive:!1}),window.addEventListener("click",De),window.addEventListener("keydown",Fe),window.addEventListener("keyup",Ne),window.addEventListener("resize",t.windowResize),window.addEventListener("hashchange",t.windowHashChange),window.addEventListener("beforeprint",t.windowBeforePrint),window.addEventListener("afterprint",t.windowAfterPrint)},unbindEvents:function(){var e=this.eventBus,t=this._boundEvents;e._off("resize",ne),e._off("hashchange",oe),e._off("beforeprint",t.beforePrint),e._off("afterprint",t.afterPrint),e._off("pagerendered",K),e._off("updateviewarea",Z),e._off("pagechanging",xe),e._off("scalechanging",Te),e._off("rotationchanging",ze),e._off("sidebarviewchanged",Q),e._off("pagemode",G),e._off("namedaction",Y),e._off("presentationmodechanged",J),e._off("presentationmode",re),e._off("print",ae),e._off("download",se),e._off("save",le),e._off("firstpage",ce),e._off("lastpage",ue),e._off("nextpage",de),e._off("previouspage",pe),e._off("zoomin",_e),e._off("zoomout",me),e._off("zoomreset",fe),e._off("pagenumberchanged",ge),e._off("scalechanged",he),e._off("rotatecw",be),e._off("rotateccw",ve),e._off("optionalcontentconfig",we),e._off("switchscrollmode",ye),e._off("scrollmodechanged",ee),e._off("switchspreadmode",Me),e._off("spreadmodechanged",te),e._off("documentproperties",Se),e._off("find",Ce),e._off("findfromurlhash",Ae),e._off("updatefindmatchescount",Le),e._off("updatefindcontrolstate",$e),e._off("openfile",H),t.beforePrint=null,t.afterPrint=null},unbindWindowEvents:function(){var e=this._boundEvents;window.removeEventListener("visibilitychange",Pe),window.removeEventListener("wheel",Oe,{passive:!1}),window.removeEventListener("touchstart",Ie,{passive:!1}),window.removeEventListener("click",De),window.removeEventListener("keydown",Fe),window.removeEventListener("keyup",Ne),window.removeEventListener("resize",e.windowResize),window.removeEventListener("hashchange",e.windowHashChange),window.removeEventListener("beforeprint",e.windowBeforePrint),window.removeEventListener("afterprint",e.windowAfterPrint),e.windowResize=null,e.windowHashChange=null,e.windowBeforePrint=null,e.windowAfterPrint=null},accumulateWheelTicks:function(e){(0<this._wheelUnusedTicks&&e<0||this._wheelUnusedTicks<0&&0<e)&&(this._wheelUnusedTicks=0),this._wheelUnusedTicks+=e;e=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));return this._wheelUnusedTicks-=e,e}};t.PDFViewerApplication=B;var R,H,U=["null","http://mozilla.github.io","https://mozilla.github.io"],W=function(e){if(void 0!==e)try{var t=new URL(window.location.href).origin||"null";if(U.includes(t))return;var n=new URL(e,window.location.href),o=n.origin,n=n.protocol;if(o!==t&&"blob:"!==n)throw new Error("file origin does not match viewer's")}catch(e){var r=e&&e.message;throw B.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(function(e){B.error(e,{message:r})}),e}};function V(){return(V=O(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.GlobalWorkerOptions.workerSrc||(_.GlobalWorkerOptions.workerSrc=v.AppOptions.get("workerSrc")),e.abrupt("return",(0,_.loadScript)(_.PDFWorker.getWorkerSrc()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(){var e=B.appConfig,t=document.location.search.substring(1),t=(0,b.parseQueryString)(t),n="file"in t?t.file:v.AppOptions.get("defaultUrl");W(n),window.File&&window.FileReader&&window.FileList&&window.Blob||(e.toolbar.openFile.setAttribute("hidden","true"),e.secondaryToolbar.openFileButton.setAttribute("hidden","true")),e.mainContainer.addEventListener("dragover",function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}),e.mainContainer.addEventListener("drop",function(e){e.preventDefault();e=e.dataTransfer.files;e&&e.length}),B.supportsDocumentFonts||(v.AppOptions.set("disableFontFace",!0),B.l10n.get("web_fonts_disabled",null,"Web fonts are disabled: unable to use embedded PDF fonts.").then(function(e){})),B.supportsPrinting||(e.toolbar.print.classList.add("hidden"),e.secondaryToolbar.printButton.classList.add("hidden")),B.supportsFullscreen||(e.toolbar.presentationModeButton.classList.add("hidden"),e.secondaryToolbar.presentationModeButton.classList.add("hidden")),B.supportsIntegratedFind&&e.toolbar.viewFind.classList.add("hidden"),e.mainContainer.addEventListener("transitionend",function(e){e.target===this&&B.eventBus.dispatch("resize",{source:this})},!0);try{R(n)}catch(t){B.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(function(e){B.error(e,t)})}}function K(e){var t=e.pageNumber,n=t-1,o=B.pdfViewer.getPageView(n);t===B.page&&B.toolbar.updateLoadingIndicatorState(!1),o&&(B.pdfSidebar.isThumbnailViewVisible&&B.pdfThumbnailViewer.getThumbnail(n).setImage(o),"undefined"!=typeof Stats&&Stats.enabled&&o.stats&&Stats.add(t,o.stats),o.error&&B.l10n.get("rendering_error",null,"An error occurred while rendering the page.").then(function(e){B.error(e,o.error)}),B.externalServices.reportTelemetry({type:"pageInfo",timestamp:e.timestamp}),B.pdfDocument.getStats().then(function(e){B.externalServices.reportTelemetry({type:"documentStats",stats:e})}))}function G(e){var t;switch(e.mode){case"thumbs":t=w.SidebarView.THUMBS;break;case"bookmarks":case"outline":t=w.SidebarView.OUTLINE;break;case"attachments":t=w.SidebarView.ATTACHMENTS;break;case"layers":t=w.SidebarView.LAYERS;break;case"none":t=w.SidebarView.NONE;break;default:return}B.pdfSidebar.switchView(t,!0)}function Y(e){switch(e.action){case"GoToPage":B.appConfig.toolbar.pageNumber.select();break;case"Find":B.supportsIntegratedFind||B.findBar.toggle();break;case"Print":B.supportsPrinting&&ae();break;case"SaveAs":le()}}function J(e){var t=e.active,n=e.switchInProgress,e=b.PresentationModeState.NORMAL;n?e=b.PresentationModeState.CHANGING:t&&(e=b.PresentationModeState.FULLSCREEN),B.pdfViewer.presentationModeState=e}function Q(e){B.pdfRenderingQueue.isThumbnailViewEnabled=B.pdfSidebar.isThumbnailViewVisible;var t=B.store;t&&B.isInitialViewSet&&t.set("sidebarView",e.view).catch(function(){})}function Z(e){var t=e.location,e=B.store;e&&B.isInitialViewSet&&e.setMultiple({page:t.pageNumber,zoom:t.scale,scrollLeft:t.left,scrollTop:t.top,rotation:t.rotation}).catch(function(){});t=B.pdfLinkService.getAnchorUrl(t.pdfOpenParams);B.appConfig.toolbar.viewBookmark.href=t,B.appConfig.secondaryToolbar.viewBookmarkButton.href=t;t=B.pdfViewer.getPageView(B.page-1).renderingState!==d.RenderingStates.FINISHED;B.toolbar.updateLoadingIndicatorState(t)}function ee(e){var t=B.store;t&&B.isInitialViewSet&&t.set("scrollMode",e.mode).catch(function(){})}function te(e){var t=B.store;t&&B.isInitialViewSet&&t.set("spreadMode",e.mode).catch(function(){})}function ne(){var e=B.pdfDocument,t=B.pdfViewer;e&&("auto"!==(e=t.currentScaleValue)&&"page-fit"!==e&&"page-width"!==e||(t.currentScaleValue=e),t.update())}function oe(e){e=e.hash;e&&(B.isInitialViewSet?B.pdfHistory.popStateInProgress||B.pdfLinkService.setHash(e):B.initialBookmark=e)}function re(){B.requestPresentationMode()}function ae(){window.print()}function ie(e){B.pdfDocument&&0<B.pdfDocument.annotationStorage.size?B.save({sourceEventType:e}):B.download({sourceEventType:e})}function se(){ie("download")}function le(){ie("save")}function ce(){B.pdfDocument&&(B.page=1)}function ue(){B.pdfDocument&&(B.page=B.pagesCount)}function de(){B.page++}function pe(){B.page--}function _e(){B.zoomIn()}function me(){B.zoomOut()}function fe(){B.zoomReset()}function ge(e){var t=B.pdfViewer;""!==e.value&&(t.currentPageLabel=e.value),e.value!==t.currentPageNumber.toString()&&e.value!==t.currentPageLabel&&B.toolbar.setPageNumber(t.currentPageNumber,t.currentPageLabel)}function he(e){B.pdfViewer.currentScaleValue=e.value}function be(){B.rotatePages(90)}function ve(){B.rotatePages(-90)}function we(e){B.pdfViewer.optionalContentConfigPromise=e.promise}function ye(e){B.pdfViewer.scrollMode=e.mode}function Me(e){B.pdfViewer.spreadMode=e.mode}function Se(){B.pdfDocumentProperties.open()}function Ce(e){B.findController.executeCommand("find"+e.type,{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:e.caseSensitive,entireWord:e.entireWord,highlightAll:e.highlightAll,findPrevious:e.findPrevious})}function Ae(e){B.findController.executeCommand("find",{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1})}function Le(e){e=e.matchesCount;B.supportsIntegratedFind?B.externalServices.updateFindMatchesCount(e):B.findBar.updateResultsCount(e)}function $e(e){var t=e.state,n=e.previous,o=e.matchesCount,e=e.rawQuery;B.supportsIntegratedFind?B.externalServices.updateFindControlState({result:t,findPrevious:n,matchesCount:o,rawQuery:e}):B.findBar.updateUIState(t,n,o)}function Te(e){B.toolbar.setPageScale(e.presetValue,e.scale),B.pdfViewer.update()}function ze(e){B.pdfThumbnailViewer.pagesRotation=e.pagesRotation,B.forceRendering(),B.pdfViewer.currentPageNumber=e.pageNumber}function xe(e){var t=e.pageNumber;B.toolbar.setPageNumber(t,e.pageLabel||null),B.secondaryToolbar.setPageNumber(t),B.pdfSidebar.isThumbnailViewVisible&&B.pdfThumbnailViewer.scrollThumbnailIntoView(t),"undefined"==typeof Stats||!Stats.enabled||(e=B.pdfViewer.getPageView(t-1))&&e.stats&&Stats.add(t,e.stats)}function Pe(e){"visible"===document.visibilityState&&Ee()}R=function(e){if(e&&0===e.lastIndexOf("file:",0)){B.setTitleUsingUrl(e);var t=new XMLHttpRequest;return t.onload=function(){B.open(new Uint8Array(t.response))},t.open("GET",e),t.responseType="arraybuffer",void t.send()}e&&B.open(e)};var ke=null;function Ee(){ke&&clearTimeout(ke),ke=setTimeout(function(){ke=null},s)}function Oe(e){var t,n,o=B.pdfViewer,r=B.supportedMouseWheelZoomModifierKeys;o.isInPresentationMode||(e.ctrlKey&&r.ctrlKey||e.metaKey&&r.metaKey?(e.preventDefault(),ke||"hidden"===document.visibilityState||(t=o.currentScale,n=(0,b.normalizeWheelEventDirection)(e),r=0,(r=e.deltaMode===WheelEvent.DOM_DELTA_LINE||e.deltaMode===WheelEvent.DOM_DELTA_PAGE?1<=Math.abs(n)?Math.sign(n):B.accumulateWheelTicks(n):B.accumulateWheelTicks(n/30))<0?B.zoomOut(-r):0<r&&B.zoomIn(r),t!==(n=o.currentScale)&&(r=n/t-1,n=o.container.getBoundingClientRect(),t=e.clientX-n.left,n=e.clientY-n.top,o.container.scrollLeft+=t*r,o.container.scrollTop+=n*r))):Ee())}function Ie(e){1<e.touches.length&&e.preventDefault()}function De(e){var t;B.triggerDelayedFallback&&B.pdfViewer.containsElement(e.target)&&B.triggerDelayedFallback(),B.secondaryToolbar.isOpen&&(t=B.appConfig,(B.pdfViewer.containsElement(e.target)||t.toolbar.container.contains(e.target)&&e.target!==t.secondaryToolbar.toggleButton)&&B.secondaryToolbar.close())}function Ne(e){9===e.keyCode&&B.triggerDelayedFallback&&B.triggerDelayedFallback()}function Fe(e){if(!B.overlayManager.active){var t=!1,n=!1,o=(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0),r=B.pdfViewer,a=r&&r.isInPresentationMode;if(1==o||8==o||5==o||12==o)switch(e.keyCode){case 70:B.supportsIntegratedFind||(B.findBar.open(),t=!0);break;case 71:B.supportsIntegratedFind||((c=B.findController.state)&&B.findController.executeCommand("findagain",{query:c.query,phraseSearch:c.phraseSearch,caseSensitive:c.caseSensitive,entireWord:c.entireWord,highlightAll:c.highlightAll,findPrevious:5==o||12==o}),t=!0);break;case 61:case 107:case 187:case 171:a||B.zoomIn(),t=!0;break;case 173:case 109:case 189:a||B.zoomOut(),t=!0;break;case 48:case 96:a||(setTimeout(function(){B.zoomReset()}),t=!1);break;case 38:(a||1<B.page)&&(B.page=1,n=t=!0);break;case 40:(a||B.page<B.pagesCount)&&(B.page=B.pagesCount,n=t=!0)}var i=B.eventBus;if(1==o||8==o)switch(e.keyCode){case 83:i.dispatch("download",{source:window}),t=!0;break;case 79:i.dispatch("openfile",{source:window}),t=!0}if(3==o||10==o)switch(e.keyCode){case 80:B.requestPresentationMode(),t=!0;break;case 71:B.appConfig.toolbar.pageNumber.select(),t=!0}if(t)return n&&!a&&r.focus(),void e.preventDefault();var s=document.activeElement||document.querySelector(":focus"),l=s&&s.tagName.toUpperCase();if(!("INPUT"===l||"TEXTAREA"===l||"SELECT"===l||s&&s.isContentEditable)||27===e.keyCode){if(0==o){var c=0,i=!1;switch(e.keyCode){case 38:case 33:r.isVerticalScrollbarEnabled&&(i=!0),c=-1;break;case 8:a||(i=!0),c=-1;break;case 37:r.isHorizontalScrollbarEnabled&&(i=!0);case 75:case 80:c=-1;break;case 27:B.secondaryToolbar.isOpen&&(B.secondaryToolbar.close(),t=!0),!B.supportsIntegratedFind&&B.findBar.opened&&(B.findBar.close(),t=!0);break;case 40:case 34:r.isVerticalScrollbarEnabled&&(i=!0),c=1;break;case 13:case 32:a||(i=!0),c=1;break;case 39:r.isHorizontalScrollbarEnabled&&(i=!0);case 74:case 78:c=1;break;case 36:(a||1<B.page)&&(B.page=1,n=t=!0);break;case 35:(a||B.page<B.pagesCount)&&(B.page=B.pagesCount,n=t=!0);break;case 83:B.pdfCursorTools.switchTool(u.CursorTool.SELECT);break;case 72:B.pdfCursorTools.switchTool(u.CursorTool.HAND);break;case 82:B.rotatePages(90);break;case 115:B.pdfSidebar.toggle()}0===c||i&&"page-fit"!==r.currentScaleValue||(0<c?B.page<B.pagesCount&&B.page++:1<B.page&&B.page--,t=!0)}if(4==o)switch(e.keyCode){case 13:case 32:if(!a&&"page-fit"!==r.currentScaleValue)break;1<B.page&&B.page--,t=!0;break;case 82:B.rotatePages(-90)}t||a||(33<=e.keyCode&&e.keyCode<=40||32===e.keyCode&&"BUTTON"!==l)&&(n=!0),n&&!r.containsElement(s)&&r.focus(),t&&e.preventDefault()}}}function qe(e){return e.preventDefault(),e.returnValue="",!1}var je={instance:{supportsPrinting:!(H=function(){var e=B.appConfig.openFileInputName;document.getElementById(e).click()}),createPrintService:function(){throw new Error("Not implemented: createPrintService")}}};t.PDFPrintServiceFactory=je},function(e,t,n){"use strict";e.exports=n(3)},function(e,t,n){"use strict";(function(e){function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var t=function(i){var l,e=Object.prototype,c=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var r,a,i,s,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),o=new A(o||[]);return t._invoke=(r=e,a=n,i=o,s=d,function(e,t){if(s===_)throw new Error("Generator is already running");if(s===m){if("throw"===e)throw t;return $()}for(i.method=e,i.arg=t;;){var n=i.delegate;if(n){var o=function e(t,n){var o=t.iterator[n.method];if(o===l){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=l,e(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}o=u(o,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var o=o.arg;if(!o)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f;{if(!o.done)return o;n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=l)}n.delegate=null;return f}(n,i);if(o){if(o===f)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===d)throw s=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=_;o=u(r,a,i);if("normal"===o.type){if(s=i.done?m:p,o.arg!==f)return{value:o.arg,done:i.done}}else"throw"===o.type&&(s=m,i.method="throw",i.arg=o.arg)}}),t}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=s;var d="suspendedStart",p="suspendedYield",_="executing",m="completed",f={};function g(){}function h(){}function b(){}var v={};v[o]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(L([])));t&&t!==e&&c.call(t,o)&&(v=t);var w=b.prototype=g.prototype=Object.create(v);function y(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function M(i,s){var t;this._invoke=function(n,o){function e(){return new s(function(e,t){!function t(e,n,o,r){e=u(i[e],i,n);if("throw"!==e.type){var a=e.arg,n=a.value;return n&&"object"===T(n)&&c.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,o,r)},function(e){t("throw",e,o,r)}):s.resolve(n).then(function(e){a.value=e,o(a)},function(e){return t("throw",e,o,r)})}r(e.arg)}(n,o,e,t)})}return t=t?t.then(e,e):e()}}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,e=function e(){for(;++n<t.length;)if(c.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=l,e.done=!0,e};return e.next=e}}return{next:$}}function $(){return{value:l,done:!0}}return((h.prototype=w.constructor=b).constructor=h).displayName=a(b,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,a(e,r,"GeneratorFunction")),e.prototype=Object.create(w),e},i.awrap=function(e){return{__await:e}},y(M.prototype),M.prototype[n]=function(){return this},i.AsyncIterator=M,i.async=function(e,t,n,o,r){void 0===r&&(r=Promise);var a=new M(s(e,t,n,o),r);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},y(w),a(w,r,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},i.keys=function(n){var e,o=[];for(e in n)o.push(e);return o.reverse(),function e(){for(;o.length;){var t=o.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var o=this;function e(e,t){return a.type="throw",a.arg=n,o.next=e,t&&(o.method="next",o.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var i=c.call(r,"catchLoc"),s=c.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&c.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o,r=n.completion;return"throw"===r.type&&(o=r.arg,C(n)),o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=l),f}},i}("object"===T(e)?e.exports:{});try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}).call(this,n(4)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidRotation=function(e){return Number.isInteger(e)&&e%90==0},t.isValidScrollMode=function(e){return Number.isInteger(e)&&Object.values(p).includes(e)&&e!==p.UNKNOWN},t.isValidSpreadMode=function(e){return Number.isInteger(e)&&Object.values(_).includes(e)&&e!==_.UNKNOWN},t.isPortraitOrientation=function(e){return e.width<=e.height},t.clamp=b,t.getPDFFileNameFromURL=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof e)return t;if(function(e){var t=0,n=e.length;for(;t<n&&""===e[t].trim();)t++;return"data:"===e.substring(t,t+5).toLowerCase()}(e))return t;var n=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,e=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e),o=n.exec(e[1])||n.exec(e[2])||n.exec(e[3]);if(o&&(o=o[0]).includes("%"))try{o=n.exec(decodeURIComponent(o))[0]}catch(e){}return o||t},t.noContextMenuHandler=function(e){e.preventDefault()},t.parseQueryString=function(e){for(var t=e.split("&"),n=Object.create(null),o=0,r=t.length;o<r;++o){var a=t[o].split("="),i=a[0].toLowerCase(),a=1<a.length?a[1]:null;n[decodeURIComponent(i)]=decodeURIComponent(a)}return n},t.backtrackBeforeAllVisibleElements=y,t.getVisibleElements=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=e.scrollTop,a=r+e.clientHeight,i=e.scrollLeft,s=i+e.clientWidth;var l=[],c=t.length,u=0===c?0:w(t,o?function(e){return e=(e=e.div).offsetLeft+e.clientLeft+e.clientWidth,i<e}:function(e){return e=(e=e.div).offsetTop+e.clientTop+e.clientHeight,r<e});0<u&&u<c&&!o&&(u=y(u,t,r));for(var d=o?s:-1,p=u;p<c;p++){var _=t[p],m=_.div,f=m.offsetLeft+m.clientLeft,g=m.offsetTop+m.clientTop,h=m.clientWidth,b=m.clientHeight,v=f+h,m=g+b;if(-1===d)a<=m&&(d=m);else if(d<(o?f:g))break;m<=r||a<=g||v<=i||s<=f||(m=Math.max(0,r-g)+Math.max(0,m-a),v=Math.max(0,i-f)+Math.max(0,v-s),h=(b-m)*(h-v)*100/b/h|0,l.push({id:_.id,x:f,y:g,view:_,percent:h}))}e=l[0],u=l[l.length-1];n&&l.sort(function(e,t){var n=e.percent-t.percent;return.001<Math.abs(n)?-n:e.id-t.id});return{first:e,last:u,views:l}},t.roundToDivide=function(e,t){var n=e%t;return 0==n?e:Math.round(e-n+t)},t.getPageSizeInches=function(e){var t=e.view,n=e.userUnit,o=e.rotate,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,4),a=r[0],e=r[1],t=r[2],r=r[3],o=o%180!=0,a=(t-a)/72*n,n=(r-e)/72*n;return{width:o?n:a,height:o?a:n}},t.approximateFraction=function(e){if(Math.floor(e)===e)return[e,1];var t=1/e;{if(8<t)return[1,8];if(Math.floor(t)===t)return[1,t]}var n=1<e?t:e,o=0,r=1,a=1,i=1;for(;;){var s=o+a,l=r+i;if(8<l)break;n<=s/l?(a=s,i=l):(o=s,r=l)}e=n-o/r<a/i-n?n===e?[o,r]:[r,o]:n===e?[a,i]:[i,a];return e},t.getOutputScale=function(e){var t=window.devicePixelRatio||1,e=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,e=t/e;return{sx:e,sy:e,scaled:1!=e}},t.scrollIntoView=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=e.offsetParent;if(!o)return;var r=e.offsetTop+e.clientTop,a=e.offsetLeft+e.clientLeft;for(;o.clientHeight===o.scrollHeight&&o.clientWidth===o.scrollWidth||n&&"hidden"===getComputedStyle(o).overflow;)if(o.dataset._scaleY&&(r/=o.dataset._scaleY,a/=o.dataset._scaleX),r+=o.offsetTop,a+=o.offsetLeft,!(o=o.offsetParent))return;t&&(void 0!==t.top&&(r+=t.top),void 0!==t.left&&(a+=t.left,o.scrollLeft=a));o.scrollTop=r},t.watchScroll=function(n,o){function e(){a=a||window.requestAnimationFrame(function(){a=null;var e=n.scrollLeft,t=r.lastX;e!==t&&(r.right=t<e),r.lastX=e;t=n.scrollTop,e=r.lastY;t!==e&&(r.down=e<t),r.lastY=t,o(r)})}var r={right:!0,down:!0,lastX:n.scrollLeft,lastY:n.scrollTop,_eventHandler:e},a=null;return n.addEventListener("scroll",e,!0),r},t.binarySearchFirstItem=w,t.normalizeWheelEventDirection=f,t.normalizeWheelEventDelta=function(e){var t=f(e);0===e.deltaMode?t/=900:1===e.deltaMode&&(t/=30);return t},t.waitOnEventOrTimeout=function(e){var i=e.target,s=e.name,e=e.delay,l=void 0===e?0:e;return new Promise(function(t,e){if("object"!==c(i)||!s||"string"!=typeof s||!(Number.isInteger(l)&&0<=l))throw new Error("waitOnEventOrTimeout - invalid parameters.");function n(e){i instanceof h?i._off(s,o):i.removeEventListener(s,o),a&&clearTimeout(a),t(e)}var o=n.bind(null,g.EVENT);i instanceof h?i._on(s,o):i.addEventListener(s,o);var r=n.bind(null,g.TIMEOUT),a=setTimeout(r,l)})},t.moveToEndOfArray=function(e,t){for(var n=[],o=e.length,r=0,a=0;a<o;++a)t(e[a])?n.push(e[a]):(e[r]=e[a],++r);for(var i=0;r<o;++i,++r)e[r]=n[i]},t.WaitOnType=t.animationStarted=t.ProgressBar=t.EventBus=t.NullL10n=t.SpreadMode=t.ScrollMode=t.TextLayerMode=t.RendererType=t.PresentationModeState=t.VERTICAL_PADDING=t.SCROLLBAR_PADDING=t.MAX_AUTO_SCALE=t.UNKNOWN_SCALE=t.MAX_SCALE=t.MIN_SCALE=t.DEFAULT_SCALE=t.DEFAULT_SCALE_VALUE=t.CSS_UNITS=t.AutoPrintRegExp=void 0;var o,r=(o=n(2))&&o.__esModule?o:{default:o};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function d(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){u(o,t,n,r,a,"next",e)}function a(e){u(o,t,n,r,a,"throw",e)}r(void 0)})}}t.CSS_UNITS=96/72;t.DEFAULT_SCALE_VALUE="auto";t.DEFAULT_SCALE=1;t.MIN_SCALE=.1;t.MAX_SCALE=10;t.UNKNOWN_SCALE=0;t.MAX_AUTO_SCALE=1.25;t.SCROLLBAR_PADDING=40;t.VERTICAL_PADDING=5;t.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};t.RendererType={CANVAS:"canvas",SVG:"svg"};t.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};var p={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};t.ScrollMode=p;var _={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=_;t.AutoPrintRegExp=/\bprint\s*\(/;var m={getLanguage:function(){return d(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","en-us");case 1:case"end":return e.stop()}},e)}))()},getDirection:function(){return d(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","ltr");case 1:case"end":return e.stop()}},e)}))()},get:function(e,t,n){return d(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(e,n){return n?e.replace(/\{\{\s*(\w+)\s*\}\}/g,function(e,t){return t in n?n[t]:"{{"+t+"}}"}):e}(n,t));case 1:case"end":return e.stop()}},e)}))()},translate:function(){return d(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}};function w(e,t){var n=0,o=e.length-1;if(o<0||!t(e[o]))return e.length;if(t(e[n]))return n;for(;n<o;){var r=n+o>>1;t(e[r])?o=r:n=1+r}return n}function y(e,t,n){if(e<2)return e;var o=t[e].div,r=o.offsetTop+o.clientTop;n<=r&&(r=(o=t[e-1].div).offsetTop+o.clientTop);for(var a=e-2;0<=a&&!((o=t[a].div).offsetTop+o.clientTop+o.clientHeight<=r);--a)e=a;return e}function f(e){var t=Math.sqrt(e.deltaX*e.deltaX+e.deltaY*e.deltaY),e=Math.atan2(e.deltaY,e.deltaX);return-.25*Math.PI<e&&e<.75*Math.PI&&(t=-t),t}t.NullL10n=m;var g={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=g;m=new Promise(function(e){window.requestAnimationFrame(e)});t.animationStarted=m;var h=function(){function t(e){a(this,t),this._listeners=Object.create(null)}return s(t,[{key:"on",value:function(e,t){this._on(e,t,{external:!0})}},{key:"off",value:function(e,t){this._off(e,t,{external:!0})}},{key:"dispatch",value:function(e){var n,o,e=this._listeners[e];e&&0!==e.length&&(n=Array.prototype.slice.call(arguments,1),e.slice(0).forEach(function(e){var t=e.listener;e.external?(o=o||[]).push(t):t.apply(null,n)}),o&&(o.forEach(function(e){e.apply(null,n)}),o=null))}},{key:"_on",value:function(e,t,n){var o=2<arguments.length&&void 0!==n?n:null,n=this._listeners[e];n||(this._listeners[e]=n=[]),n.push({listener:t,external:!0===(o&&o.external)})}},{key:"_off",value:function(e,t){var n=this._listeners[e];if(n)for(var o=0,r=n.length;o<r;o++)if(n[o].listener===t)return void n.splice(o,1)}}]),t}();function b(e,t,n){return Math.min(Math.max(e,t),n)}t.EventBus=h;m=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.height,o=t.width,t=t.units;a(this,r),this.visible=!0,this.div=document.querySelector(e+" .progress"),this.bar=this.div.parentNode,this.height=n||100,this.width=o||100,this.units=t||"%",this.div.style.height=this.height+this.units,this.percent=0}return s(r,[{key:"_updateBar",value:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var e=this.width*this._percent/100;this.div.style.width=e+this.units}},{key:"setWidth",value:function(e){!e||0<(e=e.parentNode.offsetWidth-e.offsetWidth)&&(this.bar.style.width="calc(100% - ".concat(e,"px)"))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}},{key:"show",value:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},{key:"percent",get:function(){return this._percent},set:function(e){this._indeterminate=isNaN(e),this._percent=b(e,0,100),this._updateBar()}}]),r}();t.ProgressBar=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionKind=t.AppOptions=void 0;n=n(7);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var l={VIEWER:2,API:4,WORKER:8,PREFERENCE:128},c={cursorToolOnLoad:{value:0,kind:(t.OptionKind=l).VIEWER+l.PREFERENCE},defaultUrl:{value:"",kind:l.VIEWER},defaultZoomValue:{value:"",kind:l.VIEWER+l.PREFERENCE},disableHistory:{value:!1,kind:l.VIEWER},disablePageLabels:{value:!1,kind:l.VIEWER+l.PREFERENCE},enablePermissions:{value:!1,kind:l.VIEWER+l.PREFERENCE},enablePrintAutoRotate:{value:!1,kind:l.VIEWER+l.PREFERENCE},enableWebGL:{value:!1,kind:l.VIEWER+l.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:l.VIEWER},externalLinkTarget:{value:0,kind:l.VIEWER+l.PREFERENCE},historyUpdateUrl:{value:!1,kind:l.VIEWER+l.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:l.VIEWER+l.PREFERENCE},imageResourcesPath:{value:"./images/",kind:l.VIEWER},maxCanvasPixels:{value:16777216,compatibility:n.viewerCompatibilityParams.maxCanvasPixels,kind:l.VIEWER},pdfBugEnabled:{value:!1,kind:l.VIEWER+l.PREFERENCE},printResolution:{value:150,kind:l.VIEWER},renderer:{value:"canvas",kind:l.VIEWER+l.PREFERENCE},renderInteractiveForms:{value:!0,kind:l.VIEWER+l.PREFERENCE},sidebarViewOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},scrollModeOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},spreadModeOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},textLayerMode:{value:1,kind:l.VIEWER+l.PREFERENCE},useOnlyCssZoom:{value:!1,kind:l.VIEWER+l.PREFERENCE},viewOnLoad:{value:0,kind:l.VIEWER+l.PREFERENCE},cMapPacked:{value:!0,kind:l.API},cMapUrl:{value:CMAPS_URL,kind:l.API},disableAutoFetch:{value:!1,kind:l.API+l.PREFERENCE},disableFontFace:{value:!1,kind:l.API+l.PREFERENCE},disableRange:{value:!1,kind:l.API+l.PREFERENCE},disableStream:{value:!1,kind:l.API+l.PREFERENCE},docBaseUrl:{value:"",kind:l.API},fontExtraProperties:{value:!1,kind:l.API},isEvalSupported:{value:!0,kind:l.API},maxImageSize:{value:-1,kind:l.API},pdfBug:{value:!1,kind:l.API},verbosity:{value:1,kind:l.API},workerPort:{value:null,kind:l.WORKER},workerSrc:{value:WORKER_SRC,kind:l.WORKER}};c.disablePreferences={value:!1,kind:l.VIEWER},c.locale={value:"undefined"!=typeof navigator?navigator.language:"en-US",kind:l.VIEWER};var u=Object.create(null),n=function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Error("Cannot initialize AppOptions.")}var t,n,o;return t=e,o=[{key:"get",value:function(e){var t=u[e];if(void 0!==t)return t;e=c[e];return void 0!==e?e.compatibility||e.value:void 0}},{key:"getAll",value:function(e){var t,n=0<arguments.length&&void 0!==e?e:null,o=Object.create(null);for(t in c){var r=c[t];if(n){if(0==(n&r.kind))continue;if(n===l.PREFERENCE){var a=r.value,i=s(a);if("boolean"===i||"string"===i||"number"===i&&Number.isInteger(a)){o[t]=a;continue}throw new Error("Invalid type for preference: ".concat(t))}}a=u[t];o[t]=void 0!==a?a:r.compatibility||r.value}return o}},{key:"set",value:function(e,t){u[e]=t}},{key:"remove",value:function(e){delete u[e]}}],(n=null)&&r(t.prototype,n),o&&r(t,o),e}();t.AppOptions=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewerCompatibilityParams=void 0;var o=Object.create(null),r="undefined"!=typeof navigator&&navigator.userAgent||"",a="undefined"!=typeof navigator&&navigator.platform||"",i="undefined"!=typeof navigator&&navigator.maxTouchPoints||1,s=/Android/.test(r),l=/Trident/.test(r),i=/\b(iPad|iPhone|iPod)(?=;)/.test(r)||"MacIntel"===a&&1<i,r=/CriOS/.test(r);(l||r)&&(o.disableCreateObjectURL=!0),(i||s)&&(o.maxCanvasPixels=5242880);o=Object.freeze(o);t.viewerCompatibilityParams=o},function(e,t,n){"use strict";var o="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:require("../build/pdf.js");e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFCursorTools=t.CursorTool=void 0;var i=n(10);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s={SELECT:0,HAND:1,ZOOM:2};t.CursorTool=s;n=function(){function a(e){var t=this,n=e.container,o=e.eventBus,e=e.cursorToolOnLoad,r=void 0===e?s.SELECT:e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.container=n,this.eventBus=o,this.active=s.SELECT,this.activeBeforePresentationMode=null,this.handTool=new i.GrabToPan({element:this.container}),this._addEventListeners(),Promise.resolve().then(function(){t.switchTool(r)})}var e,t,n;return e=a,(t=[{key:"switchTool",value:function(e){var t=this;if(null===this.activeBeforePresentationMode&&e!==this.active){var n=function(){switch(t.active){case s.SELECT:break;case s.HAND:t.handTool.deactivate();break;case s.ZOOM:}};switch(e){case s.SELECT:n();break;case s.HAND:n(),this.handTool.activate();break;case s.ZOOM:default:return}this.active=e,this._dispatchEvent()}}},{key:"_dispatchEvent",value:function(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}},{key:"_addEventListeners",value:function(){var n=this;this.eventBus._on("switchcursortool",function(e){n.switchTool(e.tool)}),this.eventBus._on("presentationmodechanged",function(e){var t;e.switchInProgress||(e.active?(t=n.active,n.switchTool(s.SELECT),n.activeBeforePresentationMode=t):(t=n.activeBeforePresentationMode,n.activeBeforePresentationMode=null,n.switchTool(t)))})}},{key:"activeTool",get:function(){return this.active}}])&&o(e.prototype,t),n&&o(e,n),a}();t.PDFCursorTools=n},function(e,t,n){"use strict";function o(e){this.element=e.element,this.document=e.element.ownerDocument,"function"==typeof e.ignoreTarget&&(this.ignoreTarget=e.ignoreTarget),this.onActiveChanged=e.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onmousedown=this._onmousedown.bind(this),this._onmousemove=this._onmousemove.bind(this),this._endPan=this._endPan.bind(this),(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}var r;Object.defineProperty(t,"__esModule",{value:!0}),(t.GrabToPan=o).prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onmousedown,!0),this.element.classList.add(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!0))},deactivate:function(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onmousedown,!0),this._endPan(),this.element.classList.remove(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!1))},toggle:function(){this.active?this.deactivate():this.activate()},ignoreTarget:function(e){return e[r]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function(e){if(0===e.button&&!this.ignoreTarget(e.target)){if(e.originalTarget)try{e.originalTarget.tagName}catch(e){return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=e.clientX,this.clientYStart=e.clientY,this.document.addEventListener("mousemove",this._onmousemove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),e.preventDefault(),e.stopPropagation();var t=document.activeElement;t&&!t.contains(e.target)&&t.blur()}},_onmousemove:function(e){var t;this.element.removeEventListener("scroll",this._endPan,!0),function(e){if("buttons"in e&&a)return!(1&e.buttons);if(i||s)return 0===e.which;return!1}(e)?this._endPan():(t=e.clientX-this.clientXStart,e=e.clientY-this.clientYStart,e=this.scrollTopStart-e,t=this.scrollLeftStart-t,this.element.scrollTo?this.element.scrollTo({top:e,left:t,behavior:"instant"}):(this.element.scrollTop=e,this.element.scrollLeft=t),this.overlay.parentNode||document.body.appendChild(this.overlay))},_endPan:function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onmousemove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}},["webkitM","mozM","msM","oM","m"].some(function(e){e+="atches";return e in document.documentElement&&(r=e),(e+="Selector")in document.documentElement&&(r=e),r});var a=!document.documentMode||9<document.documentMode,t=window.chrome,i=t&&(t.webstore||t.app),s=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFRenderingQueue=t.RenderingStates=void 0;var a={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};t.RenderingStates=a;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}var t,n,o;return t=e,(n=[{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setThumbnailViewer",value:function(e){this.pdfThumbnailViewer=e}},{key:"isHighestPriority",value:function(e){return this.highestPriorityPage===e.renderingId}},{key:"renderHighestPriority",value:function(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(e)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function(e,t,n){var o=e.views,r=o.length;if(0===r)return null;for(var a=0;a<r;++a){var i=o[a].view;if(!this.isViewFinished(i))return i}if(n){n=e.last.id;if(t[n]&&!this.isViewFinished(t[n]))return t[n]}else{e=e.first.id-2;if(t[e]&&!this.isViewFinished(t[e]))return t[e]}return null}},{key:"isViewFinished",value:function(e){return e.renderingState===a.FINISHED}},{key:"renderView",value:function(e){var t=this;switch(e.renderingState){case a.FINISHED:return!1;case a.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case a.RUNNING:this.highestPriorityPage=e.renderingId;break;case a.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(function(){t.renderHighestPriority()}).catch(function(e){})}return!0}}])&&r(t.prototype,n),o&&r(t,o),e}();t.PDFRenderingQueue=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSidebar=t.SidebarView=void 0;var s=n(5),a=n(11);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r="pdfSidebarNotification",l={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=l;n=function(){function i(e){var t=e.elements,n=e.pdfViewer,o=e.pdfThumbnailViewer,r=e.eventBus,a=e.l10n,a=void 0===a?s.NullL10n:a,e=e.disableNotification,e=void 0!==e&&e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.isOpen=!1,this.active=l.THUMBS,this.isInitialViewSet=!1,this.onToggled=null,this.pdfViewer=n,this.pdfThumbnailViewer=o,this.outerContainer=t.outerContainer,this.viewerContainer=t.viewerContainer,this.toggleButton=t.toggleButton,this.thumbnailButton=t.thumbnailButton,this.outlineButton=t.outlineButton,this.attachmentsButton=t.attachmentsButton,this.layersButton=t.layersButton,this.thumbnailView=t.thumbnailView,this.outlineView=t.outlineView,this.attachmentsView=t.attachmentsView,this.layersView=t.layersView,this.eventBus=r,this.l10n=a,this._disableNotification=e,this._addEventListeners()}var e,t,n;return e=i,(t=[{key:"reset",value:function(){this.isInitialViewSet=!1,this._hideUINotification(null),this.switchView(l.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton&&(this.layersButton.disabled=!1)}},{key:"setInitialView",value:function(e){e=0<arguments.length&&void 0!==e?e:l.NONE;this.isInitialViewSet||(this.isInitialViewSet=!0,e!==l.NONE&&e!==l.UNKNOWN&&this._switchView(e,!0)||this._dispatchEvent())}},{key:"switchView",value:function(e,t){t=1<arguments.length&&void 0!==t&&t;this._switchView(e,t)}},{key:"_switchView",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,o=e!==this.active,t=!1;switch(e){case l.NONE:return this.isOpen?(this.close(),!0):!1;case l.THUMBS:this.isOpen&&o&&(t=!0);break;case l.OUTLINE:if(this.outlineButton.disabled)return!1;break;case l.ATTACHMENTS:if(this.attachmentsButton.disabled)return!1;break;case l.LAYERS:if(this.layersButton.disabled)return!1;break;default:return!1}return this.active=e,this.thumbnailButton.classList.toggle("toggled",e===l.THUMBS),this.outlineButton.classList.toggle("toggled",e===l.OUTLINE),this.attachmentsButton.classList.toggle("toggled",e===l.ATTACHMENTS),this.layersButton&&this.layersButton.classList.toggle("toggled",e===l.LAYERS),this.thumbnailView.classList.toggle("hidden",e!==l.THUMBS),this.outlineView.classList.toggle("hidden",e!==l.OUTLINE),this.attachmentsView.classList.toggle("hidden",e!==l.ATTACHMENTS),this.layersView&&this.layersView.classList.toggle("hidden",e!==l.LAYERS),n&&!this.isOpen?(this.open(),!0):(t&&(this._updateThumbnailViewer(),this._forceRendering()),o&&this._dispatchEvent(),this._hideUINotification(this.active),o)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this.toggleButton.classList.add("toggled"),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===l.THUMBS&&this._updateThumbnailViewer(),this._forceRendering(),this._dispatchEvent(),this._hideUINotification(this.active))}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.toggleButton.classList.remove("toggled"),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this._forceRendering(),this._dispatchEvent())}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"_dispatchEvent",value:function(){this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}},{key:"_forceRendering",value:function(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}},{key:"_updateThumbnailViewer",value:function(){for(var e=this.pdfViewer,t=this.pdfThumbnailViewer,n=e.pagesCount,o=0;o<n;o++){var r=e.getPageView(o);r&&r.renderingState===a.RenderingStates.FINISHED&&t.getThumbnail(o).setImage(r)}t.scrollThumbnailIntoView(e.currentPageNumber)}},{key:"_showUINotification",value:function(e){var t=this;if(!this._disableNotification){if(this.l10n.get("toggle_sidebar_notification2.title",null,"Toggle Sidebar (document contains outline/attachments/layers)").then(function(e){t.toggleButton.title=e}),this.isOpen){if(e===this.active)return}else this.toggleButton.classList.add(r);switch(e){case l.OUTLINE:this.outlineButton.classList.add(r);break;case l.ATTACHMENTS:this.attachmentsButton.classList.add(r);break;case l.LAYERS:this.layersButton&&this.layersButton.classList.add(r)}}}},{key:"_hideUINotification",value:function(e){var t=this;if(!this._disableNotification){var n=function(e){switch(e){case l.OUTLINE:t.outlineButton.classList.remove(r);break;case l.ATTACHMENTS:t.attachmentsButton.classList.remove(r);break;case l.LAYERS:t.layersButton&&t.layersButton.classList.remove(r)}};if(this.isOpen||null===e)if(this.toggleButton.classList.remove(r),null===e){for(e in l)n(l[e]);this.l10n.get("toggle_sidebar.title",null,"Toggle Sidebar").then(function(e){t.toggleButton.title=e})}else n(e)}}},{key:"_addEventListeners",value:function(){var o=this;this.viewerContainer.addEventListener("transitionend",function(e){e.target===o.viewerContainer&&o.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",function(){o.toggle()}),this.thumbnailButton.addEventListener("click",function(){o.switchView(l.THUMBS)}),this.outlineButton.addEventListener("click",function(){o.switchView(l.OUTLINE)}),this.outlineButton.addEventListener("dblclick",function(){o.eventBus.dispatch("toggleoutlinetree",{source:o})}),this.attachmentsButton.addEventListener("click",function(){o.switchView(l.ATTACHMENTS)});function t(e,t,n){t.disabled=!e,e?o._showUINotification(n):o.active===n&&o.switchView(l.THUMBS)}this.eventBus._on("outlineloaded",function(e){t(e.outlineCount,o.outlineButton,l.OUTLINE)}),this.eventBus._on("attachmentsloaded",function(e){t(e.attachmentsCount,o.attachmentsButton,l.ATTACHMENTS)}),this.eventBus._on("layersloaded",function(e){t(e.layersCount,o.layersButton,l.LAYERS)}),this.eventBus._on("presentationmodechanged",function(e){e.active||e.switchInProgress||!o.isThumbnailViewVisible||o._updateThumbnailViewer()})}},{key:"visibleView",get:function(){return this.isOpen?this.active:l.NONE}},{key:"isThumbnailViewVisible",get:function(){return this.isOpen&&this.active===l.THUMBS}},{key:"isOutlineViewVisible",get:function(){return this.isOpen&&this.active===l.OUTLINE}},{key:"isAttachmentsViewVisible",get:function(){return this.isOpen&&this.active===l.ATTACHMENTS}},{key:"isLayersViewVisible",get:function(){return this.isOpen&&this.active===l.LAYERS}}])&&o(e.prototype,t),n&&o(e,n),i}();t.PDFSidebar=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayManager=void 0;var o,l=(o=n(2))&&o.__esModule?o:{default:o};function c(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function u(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){c(o,t,n,r,a,"next",e)}function a(e){c(o,t,n,r,a,"throw",e)}r(void 0)})}}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._overlays={},this._active=null,this._keyDownBound=this._keyDown.bind(this)}var t,n,o,r,a,i,s;return t=e,(n=[{key:"register",value:(s=u(l.default.mark(function e(t,n){var o,r,a,i=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=2<i.length&&void 0!==i[2]?i[2]:null,r=3<i.length&&void 0!==i[3]&&i[3],t&&n&&(a=n.parentNode)){e.next=6;break}throw new Error("Not enough parameters.");case 6:if(this._overlays[t])throw new Error("The overlay is already registered.");e.next=8;break;case 8:this._overlays[t]={element:n,container:a,callerCloseMethod:o,canForceClose:r};case 9:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"unregister",value:(i=u(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._overlays[t]){e.next=4;break}throw new Error("The overlay does not exist.");case 4:if(this._active===t)throw new Error("The overlay cannot be removed while it is active.");e.next=6;break;case 6:delete this._overlays[t];case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"open",value:(a=u(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._overlays[t]){e.next=4;break}throw new Error("The overlay does not exist.");case 4:if(!this._active){e.next=14;break}if(!this._overlays[t].canForceClose){e.next=9;break}this._closeThroughCaller(),e.next=14;break;case 9:if(this._active===t)throw new Error("The overlay is already active.");e.next=13;break;case 13:throw new Error("Another overlay is currently active.");case 14:this._active=t,this._overlays[this._active].element.classList.remove("hidden"),this._overlays[this._active].container.classList.remove("hidden"),window.addEventListener("keydown",this._keyDownBound);case 18:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"close",value:(r=u(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._overlays[t]){e.next=4;break}throw new Error("The overlay does not exist.");case 4:if(this._active){e.next=8;break}throw new Error("The overlay is currently not active.");case 8:if(this._active!==t)throw new Error("Another overlay is currently active.");e.next=10;break;case 10:this._overlays[this._active].container.classList.add("hidden"),this._overlays[this._active].element.classList.add("hidden"),this._active=null,window.removeEventListener("keydown",this._keyDownBound);case 14:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_keyDown",value:function(e){this._active&&27===e.keyCode&&(this._closeThroughCaller(),e.preventDefault())}},{key:"_closeThroughCaller",value:function(){this._overlays[this._active].callerCloseMethod&&this._overlays[this._active].callerCloseMethod(),this._active&&this.close(this._active)}},{key:"active",get:function(){return this._active}}])&&d(t.prototype,n),o&&d(t,o),e}();t.OverlayManager=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordPrompt=void 0;var a=n(5),o=n(8);function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n=function(){function r(e,t){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.NullL10n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.overlayName=e.overlayName,this.container=e.container,this.label=e.label,this.input=e.input,this.submitButton=e.submitButton,this.cancelButton=e.cancelButton,this.overlayManager=t,this.l10n=o,this.updateCallback=null,this.reason=null,this.submitButton.addEventListener("click",this.verify.bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",function(e){13===e.keyCode&&n.verify()}),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}var e,t,n;return e=r,(t=[{key:"open",value:function(){var t=this;this.overlayManager.open(this.overlayName).then(function(){t.input.focus(),(t.reason===o.PasswordResponses.INCORRECT_PASSWORD?t.l10n.get("password_invalid",null,"Invalid password. Please try again."):t.l10n.get("password_label",null,"Enter the password to open this PDF file.")).then(function(e){t.label.textContent=e})})}},{key:"close",value:function(){var e=this;this.overlayManager.close(this.overlayName).then(function(){e.input.value=""})}},{key:"verify",value:function(){var e=this.input.value;e&&0<e.length&&(this.close(),this.updateCallback(e))}},{key:"setUpdateCallback",value:function(e,t){this.updateCallback=e,this.reason=t}}])&&i(e.prototype,t),n&&i(e,n),r}();t.PasswordPrompt=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFAttachmentViewer=void 0;var c=n(8),a=n(16),u=n(7);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return e=o?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?m(t):e}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=/\.pdf$/i,n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,a.BaseTreeViewer);var e,t,n,o=_(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,e)).downloadManager=e.downloadManager,t.eventBus._on("fileattachmentannotation",t._appendAttachment.bind(m(t))),t}return e=r,(t=[{key:"reset",value:function(e){e=0<arguments.length&&void 0!==e&&e;l(f(r.prototype),"reset",this).call(this),this._attachments=null,e||(this._renderedCapability=(0,c.createPromiseCapability)()),this._pendingDispatchEvent&&clearTimeout(this._pendingDispatchEvent),this._pendingDispatchEvent=null}},{key:"_dispatchEvent",value:function(e){var t=this;this._renderedCapability.resolve(),this._pendingDispatchEvent&&(clearTimeout(this._pendingDispatchEvent),this._pendingDispatchEvent=null),0!==e?this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:e}):this._pendingDispatchEvent=setTimeout(function(){t.eventBus.dispatch("attachmentsloaded",{source:t,attachmentsCount:0}),t._pendingDispatchEvent=null})}},{key:"_bindPdfLink",value:function(e,t){var n,o=this,r=t.content,a=t.filename;e.onclick=function(){var e;n=n||URL.createObjectURL(new Blob([r],{type:"application/pdf"})),e="?file="+encodeURIComponent(n+"#"+a);try{window.open(e)}catch(e){URL.revokeObjectURL(n),n=null,o.downloadManager.downloadData(r,a,"application/pdf")}return!1}}},{key:"_bindLink",value:function(e,t){var n=this,o=t.content,r=t.filename;e.onclick=function(){var e=g.test(r)?"application/pdf":"";return n.downloadManager.downloadData(o,r,e),!1}}},{key:"render",value:function(e){var t=e.attachments,e=e.keepRenderedCapability,e=void 0!==e&&e;if(this._attachments&&this.reset(e),this._attachments=t||null,t){var e=Object.keys(t).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),n=document.createDocumentFragment(),o=0,r=d(e);try{for(r.s();!(l=r.n()).done;){var a=t[l.value],i=(0,c.getFilenameFromUrl)(a.filename),s=document.createElement("div");s.className="treeItem";var l=document.createElement("a");g.test(i)&&!u.viewerCompatibilityParams.disableCreateObjectURL?this._bindPdfLink(l,{content:a.content,filename:i}):this._bindLink(l,{content:a.content,filename:i}),l.textContent=this._normalizeTextContent(i),s.appendChild(l),n.appendChild(s),o++}}catch(e){r.e(e)}finally{r.f()}this.container.appendChild(n),this._dispatchEvent(o)}else this._dispatchEvent(0)}},{key:"_appendAttachment",value:function(e){var n=this,o=e.id,r=e.filename,a=e.content,i=this._renderedCapability.promise;i.then(function(){if(i===n._renderedCapability.promise){var e=n._attachments;if(e){for(var t in e)if(o===t)return}else e=Object.create(null);e[o]={filename:r,content:a},n.render({attachments:e,keepRenderedCapability:!0})}})}}])&&i(e.prototype,t),n&&i(e,n),r}();t.PDFAttachmentViewer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTreeViewer=void 0;var r=n(8);function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n=function(){function t(e){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.constructor===t)throw new Error("Cannot initialize BaseTreeViewer.");this.container=e.container,this.eventBus=e.eventBus,this.reset()}var e,n,o;return e=t,(n=[{key:"reset",value:function(){this._lastToggleIsShow=!0,this.container&&(this.container.textContent="",this.container.classList.remove("treeWithDeepNesting"))}},{key:"_dispatchEvent",value:function(){throw new Error("Not implemented: _dispatchEvent")}},{key:"_bindLink",value:function(){throw new Error("Not implemented: _bindLink")}},{key:"_normalizeTextContent",value:function(e){return(0,r.removeNullCharacters)(e)||"–"}},{key:"_addToggleButton",value:function(t,e){var n=this,e=1<arguments.length&&void 0!==e&&e,o=document.createElement("div");o.className="treeItemToggler",e&&o.classList.add("treeItemsHidden"),o.onclick=function(e){e.stopPropagation(),o.classList.toggle("treeItemsHidden"),e.shiftKey&&(e=!o.classList.contains("treeItemsHidden"),n._toggleTreeItem(t,e))},t.insertBefore(o,t.firstChild)}},{key:"_toggleTreeItem",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;this._lastToggleIsShow=n;var o,r=a(e.querySelectorAll(".treeItemToggler"));try{for(r.s();!(o=r.n()).done;){o.value.classList.toggle("treeItemsHidden",!n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"_toggleAllTreeItems",value:function(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}},{key:"render",value:function(){throw new Error("Not implemented: render")}}])&&i(e.prototype,n),o&&i(e,o),t}();t.BaseTreeViewer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDocumentProperties=void 0;var o,d=(o=n(2))&&o.__esModule?o:{default:o},i=n(8),p=n(5);function l(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function s(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){l(o,t,n,r,a,"next",e)}function a(e){l(o,t,n,r,a,"throw",e)}r(void 0)})}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=["en-us","en-lr","my"],m={"8.5x11":"Letter","8.5x14":"Legal"},f={"297x420":"A3","210x297":"A4"};function g(e,t,n){var o=t?e.width:e.height,e=t?e.height:e.width;return n["".concat(o,"x").concat(e)]}var a=function(){function l(e,t,n){var o=this,r=e.overlayName,a=e.fields,i=e.container,s=e.closeButton,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:p.NullL10n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.overlayName=r,this.fields=a,this.container=i,this.overlayManager=t,this.l10n=e,this._reset(),s.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this)),n._on("pagechanging",function(e){o._currentPageNumber=e.pageNumber}),n._on("rotationchanging",function(e){o._pagesRotation=e.pagesRotation}),this._isNonMetricLocale=!0,e.getLanguage().then(function(e){o._isNonMetricLocale=u.includes(e)})}var e,t,n,o,r,a;return e=l,(t=[{key:"open",value:function(){function c(e){Object.defineProperty(u,"fieldData",{value:Object.freeze(e),writable:!1,enumerable:!0,configurable:!0})}var u=this;Promise.all([this.overlayManager.open(this.overlayName),this._dataAvailableCapability.promise]).then(function(){var s=u._currentPageNumber,l=u._pagesRotation;u.fieldData&&s===u.fieldData._currentPageNumber&&l===u.fieldData._pagesRotation?u._updateUI():u.pdfDocument.getMetadata().then(function(e){var t=e.info,n=e.metadata,e=e.contentDispositionFilename;return Promise.all([t,n,e||(0,p.getPDFFileNameFromURL)(u.url),u._parseFileSize(u.maybeFileSize),u._parseDate(t.CreationDate),u._parseDate(t.ModDate),u.pdfDocument.getPage(s).then(function(e){return u._parsePageSize((0,p.getPageSizeInches)(e),l)}),u._parseLinearization(t.IsLinearized)])}).then(function(e){var t=_(e,8),n=t[0],o=(t[1],t[2]),r=t[3],a=t[4],i=t[5],e=t[6],t=t[7];return c({fileName:o,fileSize:r,title:n.Title,author:n.Author,subject:n.Subject,keywords:n.Keywords,creationDate:a,modificationDate:i,creator:n.Creator,producer:n.Producer,version:n.PDFFormatVersion,pageCount:u.pdfDocument.numPages,pageSize:e,linearized:t,_currentPageNumber:s,_pagesRotation:l}),u._updateUI(),u.pdfDocument.getDownloadInfo()}).then(function(e){e=e.length;return u.maybeFileSize=e,u._parseFileSize(e)}).then(function(e){var t;e!==u.fieldData.fileSize&&((t=Object.assign(Object.create(null),u.fieldData)).fileSize=e,c(t),u._updateUI())})})}},{key:"close",value:function(){this.overlayManager.close(this.overlayName)}},{key:"setDocument",value:function(e,t){t=1<arguments.length&&void 0!==t?t:null;this.pdfDocument&&(this._reset(),this._updateUI(!0)),e&&(this.pdfDocument=e,this.url=t,this._dataAvailableCapability.resolve())}},{key:"setFileSize",value:function(e){Number.isInteger(e)&&0<e&&(this.maybeFileSize=e)}},{key:"_reset",value:function(){this.pdfDocument=null,this.url=null,this.maybeFileSize=0,delete this.fieldData,this._dataAvailableCapability=(0,i.createPromiseCapability)(),this._currentPageNumber=1,this._pagesRotation=0}},{key:"_updateUI",value:function(e){if(!(0<arguments.length&&void 0!==e&&e)&&this.fieldData){if(this.overlayManager.active===this.overlayName)for(var t in this.fields){var n=this.fieldData[t];this.fields[t].textContent=n||0===n?n:"-"}}else for(var o in this.fields)this.fields[o].textContent="-"}},{key:"_parseFileSize",value:(a=s(d.default.mark(function e(){var t,n,o=arguments;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=0<o.length&&void 0!==o[0]?o[0]:0)/1024){e.next=6;break}return e.abrupt("return",void 0);case 6:if(n<1024)return e.abrupt("return",this.l10n.get("document_properties_kb",{size_kb:(+n.toPrecision(3)).toLocaleString(),size_b:t.toLocaleString()},"{{size_kb}} KB ({{size_b}} bytes)"));e.next=8;break;case 8:return e.abrupt("return",this.l10n.get("document_properties_mb",{size_mb:(+(n/1024).toPrecision(3)).toLocaleString(),size_b:t.toLocaleString()},"{{size_mb}} MB ({{size_b}} bytes)"));case 9:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_parsePageSize",value:(r=s(d.default.mark(function e(t,n){var o,r,a,i,s,l,c,u=this;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:return n%180!=0&&(t={width:t.height,height:t.width}),o=(0,p.isPortraitOrientation)(t),r={width:Math.round(100*t.width)/100,height:Math.round(100*t.height)/100},a={width:Math.round(25.4*t.width*10)/10,height:Math.round(25.4*t.height*10)/10},i=null,(s=g(r,o,m)||g(a,o,f))||Number.isInteger(a.width)&&Number.isInteger(a.height)||(l={width:25.4*t.width,height:25.4*t.height},c={width:Math.round(a.width),height:Math.round(a.height)},Math.abs(l.width-c.width)<.1&&Math.abs(l.height-c.height)<.1&&(s=g(c,o,f))&&(r={width:Math.round(c.width/25.4*100)/100,height:Math.round(c.height/25.4*100)/100},a=c)),s&&(i=this.l10n.get("document_properties_page_size_name_"+s.toLowerCase(),null,s)),e.abrupt("return",Promise.all([this._isNonMetricLocale?r:a,this.l10n.get("document_properties_page_size_unit_"+(this._isNonMetricLocale?"inches":"millimeters"),null,this._isNonMetricLocale?"in":"mm"),i,this.l10n.get("document_properties_page_size_orientation_"+(o?"portrait":"landscape"),null,o?"portrait":"landscape")]).then(function(e){var t=_(e,4),n=t[0],o=n.width,r=n.height,e=t[1],n=t[2],t=t[3];return u.l10n.get("document_properties_page_size_dimension_"+(n?"name_":"")+"string",{width:o.toLocaleString(),height:r.toLocaleString(),unit:e,name:n,orientation:t},"{{width}} × {{height}} {{unit}} ("+(n?"{{name}}, ":"")+"{{orientation}})")}));case 11:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"_parseDate",value:(o=s(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.PDFDateString.toDateObject(t)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.abrupt("return",this.l10n.get("document_properties_date_string",{date:n.toLocaleDateString(),time:n.toLocaleTimeString()},"{{date}}, {{time}}"));case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"_parseLinearization",value:function(e){return this.l10n.get("document_properties_linearized_"+(e?"yes":"no"),null,e?"Yes":"No")}}])&&c(e.prototype,t),n&&c(e,n),l}();t.PDFDocumentProperties=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFindBar=void 0;var s=n(19),a=n(5);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n=function(){function r(e,t){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.NullL10n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.opened=!1,this.bar=e.bar||null,this.toggleButton=e.toggleButton||null,this.findField=e.findField||null,this.highlightAll=e.highlightAllCheckbox||null,this.caseSensitive=e.caseSensitiveCheckbox||null,this.entireWord=e.entireWordCheckbox||null,this.findMsg=e.findMsg||null,this.findResultsCount=e.findResultsCount||null,this.findPreviousButton=e.findPreviousButton||null,this.findNextButton=e.findNextButton||null,this.eventBus=t,this.l10n=o,this.toggleButton.addEventListener("click",function(){n.toggle()}),this.findField.addEventListener("input",function(){n.dispatchEvent("")}),this.bar.addEventListener("keydown",function(e){switch(e.keyCode){case 13:e.target===n.findField&&n.dispatchEvent("again",e.shiftKey);break;case 27:n.close()}}),this.findPreviousButton.addEventListener("click",function(){n.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",function(){n.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",function(){n.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",function(){n.dispatchEvent("casesensitivitychange")}),this.eventBus._on("resize",this._adjustWidth.bind(this))}var e,t,n;return e=r,(t=[{key:"reset",value:function(){this.updateUIState()}},{key:"dispatchEvent",value:function(e,t){this.eventBus.dispatch("find",{source:this,type:e,query:this.findField.value,phraseSearch:!0,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:t})}},{key:"updateUIState",value:function(e,t,n){var o=this,r=!1,a="",i="";switch(e){case s.FindState.FOUND:break;case s.FindState.PENDING:i="pending";break;case s.FindState.NOT_FOUND:a=this.l10n.get("find_not_found",null,"Phrase not found"),r=!0;break;case s.FindState.WRAPPED:a=t?this.l10n.get("find_reached_top",null,"Reached top of document, continued from bottom"):this.l10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}this.findField.classList.toggle("notFound",r),this.findField.setAttribute("data-status",i),Promise.resolve(a).then(function(e){o.findMsg.textContent=e,o._adjustWidth()}),this.updateResultsCount(n)}},{key:"updateResultsCount",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:{},e=n.current,e=void 0===e?0:e,n=n.total,o=void 0===n?0:n;this.findResultsCount&&(n="",0<o&&(n=1e3<o?this.l10n.get("find_match_count_limit",{limit:1e3},"More than {{limit}} matches"):this.l10n.get("find_match_count",{current:e,total:o},"{{current}} of {{total}} match"+(1!==o?"es":""))),Promise.resolve(n).then(function(e){t.findResultsCount.textContent=e,t.findResultsCount.classList.toggle("hidden",!o),t._adjustWidth()}))}},{key:"open",value:function(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.bar.classList.remove("hidden")),this.findField.select(),this.findField.focus(),this._adjustWidth()}},{key:"close",value:function(){this.opened&&(this.opened=!1,this.toggleButton.classList.remove("toggled"),this.bar.classList.add("hidden"),this.eventBus.dispatch("findbarclose",{source:this}))}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"_adjustWidth",value:function(){var e;this.opened&&(this.bar.classList.remove("wrapContainers"),e=this.bar.clientHeight,this.bar.firstElementChild.clientHeight<e&&this.bar.classList.add("wrapContainers"))}}])&&o(e.prototype,t),n&&o(e,n),r}();t.PDFFindBar=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFindController=t.FindState=void 0;var r=n(8),a=n(20),i=n(5);function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var l={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=l;var o={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},c=null;function u(e){var t;return c||(t=Object.keys(o).join(""),c=new RegExp("[".concat(t,"]"),"g")),e.replace(c,function(e){return o[e]})}n=function(){function n(e){var t=e.linkService,e=e.eventBus;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._linkService=t,this._eventBus=e,this._reset(),e._on("findbarclose",this._onFindBarClose.bind(this))}var e,t,o;return e=n,(t=[{key:"setDocument",value:function(e){this._pdfDocument&&this._reset(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}},{key:"executeCommand",value:function(n,e){var o,r=this;e&&(o=this._pdfDocument,null!==this._state&&!this._shouldDirtyMatch(n,e)||(this._dirtyMatch=!0),this._state=e,"findhighlightallchange"!==n&&this._updateUIState(l.PENDING),this._firstPageCapability.promise.then(function(){var e,t;!r._pdfDocument||o&&r._pdfDocument!==o||(r._extractText(),e=!r._highlightMatches,t=!!r._findTimeout,r._findTimeout&&(clearTimeout(r._findTimeout),r._findTimeout=null),"find"===n?r._findTimeout=setTimeout(function(){r._nextMatch(),r._findTimeout=null},250):r._dirtyMatch?r._nextMatch():"findagain"===n?(r._nextMatch(),e&&r._state.highlightAll&&r._updateAllPages()):"findhighlightallchange"===n?(t?r._nextMatch():r._highlightMatches=!0,r._updateAllPages()):r._nextMatch())}))}},{key:"scrollMatchIntoView",value:function(e){var t=e.element,n=void 0===t?null:t,t=e.pageIndex,t=void 0===t?-1:t,e=e.matchIndex,e=void 0===e?-1:e;this._scrollMatches&&n&&-1!==e&&e===this._selected.matchIdx&&-1!==t&&t===this._selected.pageIdx&&(t={top:-50,left:-400},(this._scrollMatches=!1,i.scrollIntoView)(n,t,!0))}},{key:"_reset",value:function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=Object.create(null),this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,r.createPromiseCapability)()}},{key:"_shouldDirtyMatch",value:function(e,t){if(t.query!==this._state.query)return!0;switch(e){case"findagain":t=this._selected.pageIdx+1,e=this._linkService;return 1<=t&&t<=e.pagesCount&&t!==e.page&&!e.isPageVisible(t)?!0:!1;case"findhighlightallchange":return!1}return!0}},{key:"_prepareMatches",value:function(a,e,t){a.sort(function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match});for(var n=0,o=a.length;n<o;n++)!function(e){var t=a[e],n=a[e+1];if(e<a.length-1&&t.match===n.match)return t.skipped=!0;for(var o=e-1;0<=o;o--){var r=a[o];if(!r.skipped){if(r.match+r.matchLength<t.match)break;if(r.match+r.matchLength>=t.match+t.matchLength)return t.skipped=!0}}}(n)&&(e.push(a[n].match),t.push(a[n].matchLength))}},{key:"_isEntireWord",value:function(e,t,n){if(0<t){var o=e.charCodeAt(t),r=e.charCodeAt(t-1);if((0,a.getCharacterType)(o)===(0,a.getCharacterType)(r))return!1}t=t+n-1;if(t<e.length-1){n=e.charCodeAt(t),t=e.charCodeAt(1+t);if((0,a.getCharacterType)(n)===(0,a.getCharacterType)(t))return!1}return!0}},{key:"_calculatePhraseMatch",value:function(e,t,n,o){for(var r=[],a=e.length,i=-a;-1!==(i=n.indexOf(e,i+a));)o&&!this._isEntireWord(n,i,a)||r.push(i);this._pageMatches[t]=r}},{key:"_calculateWordMatch",value:function(e,t,n,o){for(var r=[],a=e.match(/\S+/g),i=0,s=a.length;i<s;i++)for(var l=a[i],c=l.length,u=-c;-1!==(u=n.indexOf(l,u+c));)o&&!this._isEntireWord(n,u,c)||r.push({match:u,matchLength:c,skipped:!1});this._pageMatchesLength[t]=[],this._pageMatches[t]=[],this._prepareMatches(r,this._pageMatches[t],this._pageMatchesLength[t])}},{key:"_calculateMatch",value:function(e){var t=this._pageContents[e],n=this._query,o=this._state,r=o.caseSensitive,a=o.entireWord,o=o.phraseSearch;0!==n.length&&(r||(t=t.toLowerCase(),n=n.toLowerCase()),o?this._calculatePhraseMatch(n,e,t,a):this._calculateWordMatch(n,e,t,a),this._state.highlightAll&&this._updatePage(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this._nextPageMatch()),0<(e=this._pageMatches[e].length)&&(this._matchesCountTotal+=e,this._updateUIResultsCount()))}},{key:"_extractText",value:function(){var s=this;if(!(0<this._extractTextPromises.length))for(var e=Promise.resolve(),t=0,n=this._linkService.pagesCount;t<n;t++)!function(a){var i=(0,r.createPromiseCapability)();s._extractTextPromises[a]=i.promise,e=e.then(function(){return s._pdfDocument.getPage(a+1).then(function(e){return e.getTextContent({normalizeWhitespace:!0})}).then(function(e){for(var t=e.items,n=[],o=0,r=t.length;o<r;o++)n.push(t[o].str);s._pageContents[a]=u(n.join("")),i.resolve(a)},function(e){s._pageContents[a]="",i.resolve(a)})})}(t)}},{key:"_updatePage",value:function(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}},{key:"_updateAllPages",value:function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}},{key:"_nextMatch",value:function(){var t=this,e=this._state.findPrevious,n=this._linkService.page-1,o=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=n,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(var r=0;r<o;r++)!0!==this._pendingFindMatches[r]&&(this._pendingFindMatches[r]=!0,this._extractTextPromises[r].then(function(e){delete t._pendingFindMatches[e],t._calculateMatch(e)}))}if(""!==this._query){if(!this._resumePageIdx){var a=this._offset;if(this._pagesToSearch=o,null!==a.matchIdx){n=this._pageMatches[a.pageIdx].length;if(!e&&a.matchIdx+1<n||e&&0<a.matchIdx)return a.matchIdx=e?a.matchIdx-1:a.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(e)}this._nextPageMatch()}}else this._updateUIState(l.FOUND)}},{key:"_matchesReady",value:function(e){var t=this._offset,n=e.length,e=this._state.findPrevious;return n?(t.matchIdx=e?n-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(e),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}},{key:"_nextPageMatch",value:function(){this._resumePageIdx;var e=null;do{var t=this._offset.pageIdx;if(!(e=this._pageMatches[t])){this._resumePageIdx=t;break}}while(!this._matchesReady(e))}},{key:"_advanceOffsetPage",value:function(e){var t=this._offset,n=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=n||t.pageIdx<0)&&(t.pageIdx=e?n-1:0,t.wrapped=!0)}},{key:"_updateMatch",value:function(e){var t=0<arguments.length&&void 0!==e&&e,n=l.NOT_FOUND,e=this._offset.wrapped;this._offset.wrapped=!1,t&&(t=this._selected.pageIdx,this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,n=e?l.WRAPPED:l.FOUND,-1!==t&&t!==this._selected.pageIdx&&this._updatePage(t)),this._updateUIState(n,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}},{key:"_onFindBarClose",value:function(){var e=this,t=this._pdfDocument;this._firstPageCapability.promise.then(function(){!e._pdfDocument||t&&e._pdfDocument!==t||(e._findTimeout&&(clearTimeout(e._findTimeout),e._findTimeout=null),e._resumePageIdx&&(e._resumePageIdx=null,e._dirtyMatch=!0),e._updateUIState(l.FOUND),e._highlightMatches=!1,e._updateAllPages())})}},{key:"_requestMatchesCount",value:function(){var e=this._selected,t=e.pageIdx,n=e.matchIdx,o=0,e=this._matchesCountTotal;if(-1!==n){for(var r=0;r<t;r++)o+=this._pageMatches[r]&&this._pageMatches[r].length||0;o+=n+1}return(o<1||e<o)&&(o=e=0),{current:o,total:e}}},{key:"_updateUIResultsCount",value:function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}},{key:"_updateUIState",value:function(e,t){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,matchesCount:this._requestMatchesCount(),rawQuery:this._state?this._state.query:null})}},{key:"highlightMatches",get:function(){return this._highlightMatches}},{key:"pageMatches",get:function(){return this._pageMatches}},{key:"pageMatchesLength",get:function(){return this._pageMatchesLength}},{key:"selected",get:function(){return this._selected}},{key:"state",get:function(){return this._state}},{key:"_query",get:function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,this._normalizedQuery=u(this._state.query)),this._normalizedQuery}}])&&s(e.prototype,t),o&&s(e,o),n}();t.PDFFindController=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCharacterType=function(e){if(e<11904)return 0==(65408&e)?function(e){return 32===e||9===e||13===e||10===e}(e)?o.SPACE:function(e){return 97<=e&&e<=122||65<=e&&e<=90}(e)||function(e){return 48<=e&&e<=57}(e)||95===e?o.ALPHA_LETTER:o.PUNCT:3584==(65408&e)?o.THAI_LETTER:160===e?o.SPACE:o.ALPHA_LETTER;{if(function(e){return 13312<=e&&e<=40959||63744<=e&&e<=64255}(e))return o.HAN_LETTER;if(function(e){return 12448<=e&&e<=12543}(e))return o.KATAKANA_LETTER;if(function(e){return 12352<=e&&e<=12447}(e))return o.HIRAGANA_LETTER;if(function(e){return 65376<=e&&e<=65439}(e))return o.HALFWIDTH_KATAKANA_LETTER}return o.ALPHA_LETTER},t.CharacterType=void 0;var o={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};t.CharacterType=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDestHashesEqual=c,t.isDestArraysEqual=u,t.PDFHistory=void 0;var a=n(5);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(){return document.location.hash}n=function(){function o(e){var n=this,t=e.linkService,e=e.eventBus;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.linkService=t,this.eventBus=e,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",function(e){n._isViewerInPresentationMode=e.active||e.switchInProgress}),this.eventBus._on("pagesinit",function(){n._isPagesLoaded=!1;function t(e){n.eventBus._off("pagesloaded",t),n._isPagesLoaded=!!e.pagesCount}n.eventBus._on("pagesloaded",t)})}var e,t,n;return e=o,(t=[{key:"initialize",value:function(e){var t=e.fingerprint,n=e.resetHistory,o=void 0!==n&&n,r=e.updateUrl,n=void 0!==r&&r;if(t&&"string"==typeof t){this._initialized&&this.reset();e=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===n,this._initialized=!0,this._bindEvents();r=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=l(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(r,!0)||o){var a=this._parseCurrentHash(!0),t=a.hash,n=a.page,a=a.rotation;return!t||e||o?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:t,page:n,rotation:a},!0)}a=r.destination;this._updateInternalState(a,r.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),void 0!==a.rotation&&(this._initialRotation=a.rotation),a.dest?(this._initialBookmark=JSON.stringify(a.dest),this._destination.page=null):a.hash?this._initialBookmark=a.hash:a.page&&(this._initialBookmark="page=".concat(a.page))}}},{key:"reset",value:function(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}},{key:"push",value:function(e){var t=this,n=e.namedDest,o=void 0===n?null:n,r=e.explicitDest,n=e.pageNumber;if(this._initialized&&(!o||"string"==typeof o)&&Array.isArray(r)&&(Number.isInteger(n)&&0<n&&n<=this.linkService.pagesCount||null===n&&!this._destination)){e=o||JSON.stringify(r);if(e){o=!1;if(this._destination&&(c(this._destination.hash,e)||u(this._destination.dest,r))){if(this._destination.page)return;o=!0}this._popStateInProgress&&!o||(this._pushOrReplaceState({dest:r,hash:e,page:n,rotation:this.linkService.rotation},o),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(function(){t._popStateInProgress=!1})))}}}},{key:"pushCurrentPosition",value:function(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function(){var e;this._initialized&&!this._popStateInProgress&&(e=window.history.state,this._isValidState(e)&&0<e.uid&&window.history.back())}},{key:"forward",value:function(){var e;this._initialized&&!this._popStateInProgress&&(e=window.history.state,this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward())}},{key:"_pushOrReplaceState",value:function(e,t){var n,o=1<arguments.length&&void 0!==t&&t||!this._destination,r={fingerprint:this._fingerprint,uid:o?this._uid:this._uid+1,destination:e};this._updateInternalState(e,r.uid),this._updateUrl&&e&&e.hash&&((t=document.location.href.split("#")[0]).startsWith("file://")||(n="".concat(t,"#").concat(e.hash))),o?window.history.replaceState(r,"",n):(this._maxUid=this._uid,window.history.pushState(r,"",n))}},{key:"_tryPushCurrentPosition",value:function(e){var t=0<arguments.length&&void 0!==e&&e;if(this._position){e=this._position;if(t&&((e=Object.assign(Object.create(null),this._position)).temporary=!0),this._destination){if(this._destination.temporary)this._pushOrReplaceState(e,!0);else if(this._destination.hash!==e.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){t=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(this._destination.dest||!this._destination.first)return;t=!0}this._pushOrReplaceState(e,t)}}else this._pushOrReplaceState(e)}}},{key:"_isValidState",value:function(e,t){t=1<arguments.length&&void 0!==t&&t;if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;t=i(performance.getEntriesByType("navigation"),1)[0];if(!t||"reload"!==t.type)return!1}return!(!Number.isInteger(e.uid)||e.uid<0)&&(null!==e.destination&&"object"===r(e.destination))}},{key:"_updateInternalState",value:function(e,t,n){n=2<arguments.length&&void 0!==n&&n;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&e&&e.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function(e){var t=0<arguments.length&&void 0!==e&&e,n=unescape(l()).substring(1),o=(0,a.parseQueryString)(n),e=o.nameddest||"",o=0|o.page;return Number.isInteger(o)&&0<o&&o<=this.linkService.pagesCount&&!(t&&0<e.length)||(o=null),{hash:n,page:o,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function(e){var t=this,e=e.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page=".concat(e.pageNumber):e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(function(){t._popStateInProgress||t._tryPushCurrentPosition(!0),t._updateViewareaTimeout=null},1e3))}},{key:"_popState",value:function(e){var t,n=this,o=e.state,r=l(),e=this._currentHash!==r;this._currentHash=r,o?this._isValidState(o)&&(this._popStateInProgress=!0,e&&(this._blockHashChange++,(0,a.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(function(){n._blockHashChange--})),t=o.destination,this._updateInternalState(t,o.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),(0,a.isValidRotation)(t.rotation)&&(this.linkService.rotation=t.rotation),t.dest?this.linkService.navigateTo(t.dest):t.hash?this.linkService.setHash(t.hash):t.page&&(this.linkService.page=t.page),Promise.resolve().then(function(){n._popStateInProgress=!1})):(this._uid++,o=(e=this._parseCurrentHash()).hash,t=e.page,e=e.rotation,this._pushOrReplaceState({hash:o,page:t,rotation:e},!0))}},{key:"_pageHide",value:function(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}},{key:"_unbindEvents",value:function(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}},{key:"popStateInProgress",get:function(){return this._initialized&&(this._popStateInProgress||0<this._blockHashChange)}},{key:"initialBookmark",get:function(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function(){return this._initialized?this._initialRotation:null}}])&&s(e.prototype,t),n&&s(e,n),o}();function c(e,t){return"string"==typeof e&&"string"==typeof t&&(e===t||(0,a.parseQueryString)(e).nameddest===t)}function u(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(!function e(t,n){if(r(t)===r(n)&&!Array.isArray(t)&&!Array.isArray(n)){if(null===t||"object"!==r(t)||null===n)return t===n||Number.isNaN(t)&&Number.isNaN(n);if(Object.keys(t).length===Object.keys(n).length){for(var o in t)if(!e(t[o],n[o]))return;return 1}}}(e[n],t[n]))return!1;return!0}t.PDFHistory=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFLayerViewer=void 0;var o,s=(o=n(2))&&o.__esModule?o:{default:o},l=n(16);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function d(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){u(o,t,n,r,a,"next",e)}function a(e){u(o,t,n,r,a,"throw",e)}r(void 0)})}}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=v(n);return e=o?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==m(e)&&"function"!=typeof e?b(t):e}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,l.BaseTreeViewer);var e,t,n,o,r,a=h(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).l10n=e.l10n,t.eventBus._on("resetlayers",t._resetLayers.bind(b(t))),t.eventBus._on("togglelayerstree",t._toggleAllTreeItems.bind(b(t))),t}return e=i,(t=[{key:"reset",value:function(){_(v(i.prototype),"reset",this).call(this),this._optionalContentConfig=null,this._pdfDocument=null}},{key:"_dispatchEvent",value:function(e){this.eventBus.dispatch("layersloaded",{source:this,layersCount:e})}},{key:"_bindLink",value:function(t,e){function n(){o._optionalContentConfig.setVisibility(r,a.checked),o.eventBus.dispatch("optionalcontentconfig",{source:o,promise:Promise.resolve(o._optionalContentConfig)})}var o=this,r=e.groupId,a=e.input;t.onclick=function(e){return e.target===a?(n(),!0):e.target!==t||(a.checked=!a.checked,n(),!1)}}},{key:"_setNestedName",value:(r=d(s.default.mark(function e(t,n){var o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.name,"string"==typeof(o=void 0===o?null:o))return t.textContent=this._normalizeTextContent(o),e.abrupt("return");e.next=4;break;case 4:return e.next=6,this.l10n.get("additional_layers",null,"Additional Layers");case 6:t.textContent=e.sent,t.style.fontStyle="italic";case 8:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"_addToggleButton",value:function(e,t){t=t.name,t=void 0===t?null:t;_(v(i.prototype),"_addToggleButton",this).call(this,e,null===t)}},{key:"_toggleAllTreeItems",value:function(){this._optionalContentConfig&&_(v(i.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function(e){var t=e.optionalContentConfig,n=e.pdfDocument;this._optionalContentConfig&&this.reset(),this._optionalContentConfig=t||null,this._pdfDocument=n||null;e=t&&t.getOrder();if(e){for(var n=document.createDocumentFragment(),o=[{parent:n,groups:e}],r=0,a=!1;0<o.length;){var i=o.shift(),s=f(i.groups);try{for(s.s();!(d=s.n()).done;){var l=d.value,c=document.createElement("div");c.className="treeItem";var u,d,p,_=document.createElement("a");c.appendChild(_),"object"===m(l)?(a=!0,this._addToggleButton(c,l),this._setNestedName(_,l),(p=document.createElement("div")).className="treeItems",c.appendChild(p),o.push({parent:p,groups:l.order})):(u=t.getGroup(l),d=document.createElement("input"),this._bindLink(_,{groupId:l,input:d}),d.type="checkbox",d.id=l,d.checked=u.visible,(p=document.createElement("label")).setAttribute("for",l),p.textContent=this._normalizeTextContent(u.name),_.appendChild(d),_.appendChild(p),r++),i.parent.appendChild(c)}}catch(e){s.e(e)}finally{s.f()}}a&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=0===n.querySelectorAll(".treeItemsHidden").length),this.container.appendChild(n),this._dispatchEvent(r)}else this._dispatchEvent(0)}},{key:"_resetLayers",value:(o=d(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._optionalContentConfig){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._pdfDocument.getOptionalContentConfig();case 4:t=e.sent,this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(t)}),this.render({optionalContentConfig:t,pdfDocument:this._pdfDocument});case 7:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})}])&&p(e.prototype,t),n&&p(e,n),i}();t.PDFLayerViewer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleLinkService=t.PDFLinkService=void 0;var s=n(5);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.eventBus,n=e.externalLinkTarget,o=void 0===n?null:n,r=e.externalLinkRel,n=void 0===r?null:r,r=e.externalLinkEnabled,r=void 0===r||r,e=e.ignoreDestinationZoom,e=void 0!==e&&e;i(this,a),this.eventBus=t,this.externalLinkTarget=o,this.externalLinkRel=n,this.externalLinkEnabled=r,this._ignoreDestinationZoom=e,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return r(a,[{key:"setDocument",value:function(e,t){t=1<arguments.length&&void 0!==t?t:null;this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setHistory",value:function(e){this.pdfHistory=e}},{key:"navigateTo",value:function(n){function a(e){var t,n=e.namedDest,o=e.explicitDest,r=o[0];if(r instanceof Object){if(null===(t=i._cachedPageNumber(r)))return void i.pdfDocument.getPageIndex(r).then(function(e){i.cachePageRef(e+1,r),a({namedDest:n,explicitDest:o})}).catch(function(){})}else{if(!Number.isInteger(r))return;t=r+1}!t||t<1||t>i.pagesCount||(i.pdfHistory&&(i.pdfHistory.pushCurrentPosition(),i.pdfHistory.push({namedDest:n,explicitDest:o,pageNumber:t})),i.pdfViewer.scrollPageIntoView({pageNumber:t,destArray:o,ignoreDestinationZoom:i._ignoreDestinationZoom}))}var i=this;new Promise(function(t,e){"string"!=typeof n?t({namedDest:"",explicitDest:n}):i.pdfDocument.getDestination(n).then(function(e){t({namedDest:n,explicitDest:e})})}).then(function(e){Array.isArray(e.explicitDest)&&a(e)})}},{key:"getDestinationHash",value:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(Array.isArray(e)){e=JSON.stringify(e);return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(e){return(this.baseUrl||"")+e}},{key:"setHash",value:function(e){var t,n;if(e.includes("=")){var o,r,a,i=(0,s.parseQueryString)(e);"search"in i&&this.eventBus.dispatch("findfromurlhash",{source:this,query:i.search.replace(/"/g,""),phraseSearch:"true"===i.phrase}),"page"in i&&(t=0|i.page||1),"zoom"in i&&(r=(o=i.zoom.split(","))[0],a=parseFloat(r),r.includes("Fit")?"Fit"===r||"FitB"===r?n=[null,{name:r}]:"FitH"===r||"FitBH"===r||"FitV"===r||"FitBV"===r?n=[null,{name:r},1<o.length?0|o[1]:null]:"FitR"===r&&(5!==o.length||(n=[null,{name:r},0|o[1],0|o[2],0|o[3],0|o[4]])):n=[null,{name:"XYZ"},1<o.length?0|o[1]:null,2<o.length?0|o[2]:null,a?a/100:r]),n?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:n,allowNegativeOffset:!0}):t&&(this.page=t),"pagemode"in i&&this.eventBus.dispatch("pagemode",{source:this,mode:i.pagemode}),"nameddest"in i&&this.navigateTo(i.nameddest)}else{n=unescape(e);try{n=JSON.parse(n),Array.isArray(n)||(n=n.toString())}catch(e){}"string"!=typeof n&&!function(e){if(!Array.isArray(e))return!1;var t=e.length;if(t<2)return!1;var n=e[0];if(!("object"===l(n)&&Number.isInteger(n.num)&&Number.isInteger(n.gen)||Number.isInteger(n)&&0<=n))return!1;n=e[1];if("object"!==l(n)||"string"!=typeof n.name)return!1;var o=!0;switch(n.name){case"XYZ":if(5!==t)return!1;break;case"Fit":case"FitB":return 2===t;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==t)return!1;break;case"FitR":if(6!==t)return!1;o=!1;break;default:return!1}for(var r=2;r<t;r++){var a=e[r];if(!("number"==typeof a||o&&null===a))return!1}return!0}(n)||this.navigateTo(n)}}},{key:"executeNamedAction",value:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":1<this.page&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}},{key:"cachePageRef",value:function(e,t){t&&(t=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen),this._pagesRefCache[t]=e)}},{key:"_cachedPageNumber",value:function(e){e=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return this._pagesRefCache&&this._pagesRefCache[e]||null}},{key:"isPageVisible",value:function(e){return this.pdfViewer.isPageVisible(e)}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(e){this.pdfViewer.pagesRotation=e}}]),a}();t.PDFLinkService=n;n=function(){function e(){i(this,e),this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=!1}return r(e,[{key:"navigateTo",value:function(){}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"pagesCount",get:function(){return 0}},{key:"page",get:function(){return 0},set:function(){}},{key:"rotation",get:function(){return 0},set:function(){}}]),e}();t.SimpleLinkService=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFOutlineViewer=void 0;var i=n(8),a=n(16);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=m(n);return e=o?(e=m(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?_(t):e}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,a.BaseTreeViewer);var e,t,n,o=p(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,e)).linkService=e.linkService,t.eventBus._on("toggleoutlinetree",t._toggleAllTreeItems.bind(_(t))),t}return e=r,(t=[{key:"reset",value:function(){c(m(r.prototype),"reset",this).call(this),this._outline=null}},{key:"_dispatchEvent",value:function(e){this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e})}},{key:"_bindLink",value:function(e,t){var n=t.url,o=t.newWindow,r=t.dest,a=this.linkService;n?(0,i.addLinkAttributes)(e,{url:n,target:o?i.LinkTarget.BLANK:a.externalLinkTarget,rel:a.externalLinkRel,enabled:a.externalLinkEnabled}):(e.href=a.getDestinationHash(r),e.onclick=function(){return r&&a.navigateTo(r),!1})}},{key:"_setStyles",value:function(e,t){var n=t.bold,t=t.italic;n&&(e.style.fontWeight="bold"),t&&(e.style.fontStyle="italic")}},{key:"_addToggleButton",value:function(e,t){var n=t.count,t=t.items,t=n<0&&Math.abs(n)===t.length;c(m(r.prototype),"_addToggleButton",this).call(this,e,t)}},{key:"_toggleAllTreeItems",value:function(){this._outline&&c(m(r.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function(e){var t=e.outline;if(this._outline&&this.reset(),this._outline=t||null,t){for(var e=document.createDocumentFragment(),n=[{parent:e,items:t}],o=0,r=!1;0<n.length;){var a=n.shift(),i=u(a.items);try{for(i.s();!(c=i.n()).done;){var s=c.value,l=document.createElement("div");l.className="treeItem";var c=document.createElement("a");this._bindLink(c,s),this._setStyles(c,s),c.textContent=this._normalizeTextContent(s.title),l.appendChild(c),0<s.items.length&&(r=!0,this._addToggleButton(l,s),(c=document.createElement("div")).className="treeItems",l.appendChild(c),n.push({parent:c,items:s.items})),a.parent.appendChild(l),o++}}catch(e){i.e(e)}finally{i.f()}}r&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=0===e.querySelectorAll(".treeItemsHidden").length),this.container.appendChild(e),this._dispatchEvent(o)}else this._dispatchEvent(0)}}])&&l(e.prototype,t),n&&l(e,n),r}();t.PDFOutlineViewer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPresentationMode=void 0;var o=n(5);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i="pdfPresentationMode",s="pdfPresentationModeControls",l=Math.PI/6,n=function(){function a(e){var t=this,n=e.container,o=e.pdfViewer,r=e.eventBus,e=e.contextMenuItems,e=void 0===e?null:e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.container=n,this.pdfViewer=o,this.eventBus=r,this.active=!1,this.args=null,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null,e&&(e.contextFirstPage.addEventListener("click",function(){t.contextMenuOpen=!1,t.eventBus.dispatch("firstpage",{source:t})}),e.contextLastPage.addEventListener("click",function(){t.contextMenuOpen=!1,t.eventBus.dispatch("lastpage",{source:t})}),e.contextPageRotateCw.addEventListener("click",function(){t.contextMenuOpen=!1,t.eventBus.dispatch("rotatecw",{source:t})}),e.contextPageRotateCcw.addEventListener("click",function(){t.contextMenuOpen=!1,t.eventBus.dispatch("rotateccw",{source:t})}))}var e,t,n;return e=a,(t=[{key:"request",value:function(){if(this.switchInProgress||this.active||!this.pdfViewer.pagesCount)return!1;if(this._addFullscreenChangeListeners(),this._setSwitchInProgress(),this._notifyStateChange(),this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else if(this.container.webkitRequestFullscreen)this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else{if(!this.container.msRequestFullscreen)return!1;this.container.msRequestFullscreen()}return this.args={page:this.pdfViewer.currentPageNumber,previousScale:this.pdfViewer.currentScaleValue},!0}},{key:"_mouseWheel",value:function(e){var t,n;this.active&&(e.preventDefault(),n=(0,o.normalizeWheelEventDelta)(e),t=(new Date).getTime(),(e=this.mouseScrollTimeStamp)<t&&t-e<50||((0<this.mouseScrollDelta&&n<0||this.mouseScrollDelta<0&&0<n)&&this._resetMouseScrollState(),this.mouseScrollDelta+=n,.1<=Math.abs(this.mouseScrollDelta)&&(n=this.mouseScrollDelta,this._resetMouseScrollState(),(0<n?this._goToPreviousPage():this._goToNextPage())&&(this.mouseScrollTimeStamp=t))))}},{key:"_goToPreviousPage",value:function(){var e=this.pdfViewer.currentPageNumber;return!(e<=1)&&(this.pdfViewer.currentPageNumber=e-1,!0)}},{key:"_goToNextPage",value:function(){var e=this.pdfViewer.currentPageNumber;return!(e>=this.pdfViewer.pagesCount)&&(this.pdfViewer.currentPageNumber=e+1,!0)}},{key:"_notifyStateChange",value:function(){this.eventBus.dispatch("presentationmodechanged",{source:this,active:this.active,switchInProgress:!!this.switchInProgress})}},{key:"_setSwitchInProgress",value:function(){var e=this;this.switchInProgress&&clearTimeout(this.switchInProgress),this.switchInProgress=setTimeout(function(){e._removeFullscreenChangeListeners(),delete e.switchInProgress,e._notifyStateChange()},1500)}},{key:"_resetSwitchInProgress",value:function(){this.switchInProgress&&(clearTimeout(this.switchInProgress),delete this.switchInProgress)}},{key:"_enter",value:function(){var e=this;this.active=!0,this._resetSwitchInProgress(),this._notifyStateChange(),this.container.classList.add(i),setTimeout(function(){e.pdfViewer.currentPageNumber=e.args.page,e.pdfViewer.currentScaleValue="page-fit"},0),this._addWindowListeners(),this._showControls(),this.contextMenuOpen=!1,this.container.setAttribute("contextmenu","viewerContextMenu"),window.getSelection().removeAllRanges()}},{key:"_exit",value:function(){var e=this,t=this.pdfViewer.currentPageNumber;this.container.classList.remove(i),setTimeout(function(){e.active=!1,e._removeFullscreenChangeListeners(),e._notifyStateChange(),e.pdfViewer.currentScaleValue=e.args.previousScale,e.pdfViewer.currentPageNumber=t,e.args=null},0),this._removeWindowListeners(),this._hideControls(),this._resetMouseScrollState(),this.container.removeAttribute("contextmenu"),this.contextMenuOpen=!1}},{key:"_mouseDown",value:function(e){if(this.contextMenuOpen)return this.contextMenuOpen=!1,void e.preventDefault();0===e.button&&(e.target.href&&e.target.classList.contains("internalLink")||(e.preventDefault(),e.shiftKey?this._goToPreviousPage():this._goToNextPage()))}},{key:"_contextMenu",value:function(){this.contextMenuOpen=!0}},{key:"_showControls",value:function(){var e=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(s),this.controlsTimeout=setTimeout(function(){e.container.classList.remove(s),delete e.controlsTimeout},3e3)}},{key:"_hideControls",value:function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(s),delete this.controlsTimeout)}},{key:"_resetMouseScrollState",value:function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}},{key:"_touchSwipe",value:function(e){if(this.active)if(1<e.touches.length)this.touchSwipeState=null;else switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=e.touches[0].pageX,this.touchSwipeState.endY=e.touches[0].pageY,e.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;var t=0,n=this.touchSwipeState.endX-this.touchSwipeState.startX,o=this.touchSwipeState.endY-this.touchSwipeState.startY,e=Math.abs(Math.atan2(o,n));50<Math.abs(n)&&(e<=l||e>=Math.PI-l)?t=n:50<Math.abs(o)&&Math.abs(e-Math.PI/2)<=l&&(t=o),0<t?this._goToPreviousPage():t<0&&this._goToNextPage()}}},{key:"_addWindowListeners",value:function(){this.showControlsBind=this._showControls.bind(this),this.mouseDownBind=this._mouseDown.bind(this),this.mouseWheelBind=this._mouseWheel.bind(this),this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this),this.contextMenuBind=this._contextMenu.bind(this),this.touchSwipeBind=this._touchSwipe.bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)}},{key:"_removeWindowListeners",value:function(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind}},{key:"_fullscreenChange",value:function(){this.isFullscreen?this._enter():this._exit()}},{key:"_addFullscreenChangeListeners",value:function(){this.fullscreenChangeBind=this._fullscreenChange.bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind),window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.addEventListener("MSFullscreenChange",this.fullscreenChangeBind)}},{key:"_removeFullscreenChangeListeners",value:function(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("MSFullscreenChange",this.fullscreenChangeBind),delete this.fullscreenChangeBind}},{key:"isFullscreen",get:function(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement)}}])&&r(e.prototype,t),n&&r(e,n),a}();t.PDFPresentationMode=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSidebarResizer=void 0;var r=n(5);function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i="--sidebar-width",s=200,l="sidebarResizing",n=function(){function o(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:r.NullL10n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.enabled=!1,this.isRTL=!1,this.sidebarOpen=!1,this.doc=document.documentElement,this._width=null,this._outerContainerWidth=null,this._boundEvents=Object.create(null),this.outerContainer=e.outerContainer,this.resizer=e.resizer,this.eventBus=t,this.l10n=n,"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports(i,"calc(-1 * ".concat(s,"px)"))&&(this.enabled=!0,this.resizer.classList.remove("hidden"),this._addEventListeners())}var e,t,n;return e=o,(t=[{key:"_updateWidth",value:function(e){e=0<arguments.length&&void 0!==e?e:0;if(!this.enabled)return!1;e=(0,r.clamp)(e,s,Math.floor(this.outerContainerWidth/2));return e!==this._width&&(this._width=e,this.doc.style.setProperty(i,"".concat(e,"px")),!0)}},{key:"_mouseMove",value:function(e){e=e.clientX;this.isRTL&&(e=this.outerContainerWidth-e),this._updateWidth(e)}},{key:"_mouseUp",value:function(){this.outerContainer.classList.remove(l),this.eventBus.dispatch("resize",{source:this});var e=this._boundEvents;window.removeEventListener("mousemove",e.mouseMove),window.removeEventListener("mouseup",e.mouseUp)}},{key:"_addEventListeners",value:function(){var t,n=this;this.enabled&&((t=this._boundEvents).mouseMove=this._mouseMove.bind(this),t.mouseUp=this._mouseUp.bind(this),this.resizer.addEventListener("mousedown",function(e){0===e.button&&(n.outerContainer.classList.add(l),window.addEventListener("mousemove",t.mouseMove),window.addEventListener("mouseup",t.mouseUp))}),this.eventBus._on("sidebarviewchanged",function(e){n.sidebarOpen=!(!e||!e.view)}),this.eventBus._on("resize",function(e){var t;e&&e.source===window&&(n._outerContainerWidth=null,n._width&&(n.sidebarOpen?(n.outerContainer.classList.add(l),t=n._updateWidth(n._width),Promise.resolve().then(function(){n.outerContainer.classList.remove(l),t&&n.eventBus.dispatch("resize",{source:n})})):n._updateWidth(n._width)))}))}},{key:"outerContainerWidth",get:function(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth),this._outerContainerWidth}}])&&a(e.prototype,t),n&&a(e,n),o}();t.PDFSidebarResizer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFThumbnailViewer=void 0;var s=n(5),u=n(28);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d="selected",n=function(){function i(e){var t=this,n=e.container,o=e.eventBus,r=e.linkService,a=e.renderingQueue,e=e.l10n,e=void 0===e?s.NullL10n:e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.container=n,this.linkService=r,this.renderingQueue=a,this.l10n=e,this.scroll=(0,s.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView(),o._on("optionalcontentconfigchanged",function(){t._setImageDisabled=!0})}var e,t,n;return e=i,(t=[{key:"_scrollUpdated",value:function(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function(e){return this._thumbnails[e]}},{key:"_getVisibleThumbs",value:function(){return(0,s.getVisibleElements)(this.container,this._thumbnails)}},{key:"scrollThumbnailIntoView",value:function(t){var e,n,o,r,a;!this.pdfDocument||(e=this._thumbnails[t-1])&&(t!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(d),e.div.classList.add(d)),0<(r=(n=this._getVisibleThumbs()).views.length)&&(o=n.first.id,r=1<r?n.last.id:o,a=!1,t<=o||r<=t?a=!0:n.views.some(function(e){return e.id===t&&(a=e.percent<100,!0)}),a&&(0,s.scrollIntoView)(e.div,{top:-19})),this._currentPageNumber=t)}},{key:"cleanup",value:function(){u.PDFThumbnailView.cleanup()}},{key:"_resetView",value:function(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._setImageDisabled=!1,this.container.textContent=""}},{key:"setDocument",value:function(s){var e,l,c=this;this.pdfDocument&&(this._cancelRendering(),this._resetView()),(this.pdfDocument=s)&&(e=s.getPage(1),l=s.getOptionalContentConfig?s.getOptionalContentConfig():{},e.then(function(e){c._optionalContentConfigPromise=l;for(var t=s.numPages,n=e.getViewport({scale:1}),o=function(){return c._setImageDisabled},r=1;r<=t;++r){var a=new u.PDFThumbnailView({container:c.container,id:r,defaultViewport:n.clone(),optionalContentConfigPromise:l,linkService:c.linkService,renderingQueue:c.renderingQueue,checkSetImageDisabled:o,disableCanvasToImageConversion:!1,l10n:c.l10n});c._thumbnails.push(a)}var i=c._thumbnails[0];i&&i.setPdfPage(e),c._thumbnails[c._currentPageNumber-1].div.classList.add(d)}).catch(function(e){}))}},{key:"_cancelRendering",value:function(){for(var e=0,t=this._thumbnails.length;e<t;e++)this._thumbnails[e]&&this._thumbnails[e].cancelRendering()}},{key:"setPageLabels",value:function(e){if(this.pdfDocument){e&&Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:this._pageLabels=null;for(var t=0,n=this._thumbnails.length;t<n;t++){var o=this._pageLabels&&this._pageLabels[t];this._thumbnails[t].setPageLabel(o)}}}},{key:"_ensurePdfPageLoaded",value:function(t){var n=this;if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);var e=this.pdfDocument.getPage(t.id).then(function(e){return t.pdfPage||t.setPdfPage(e),n._pagesRequests.delete(t),e}).catch(function(e){n._pagesRequests.delete(t)});return this._pagesRequests.set(t,e),e}},{key:"forceRendering",value:function(){var e=this,t=this._getVisibleThumbs(),n=this.renderingQueue.getHighestPriority(t,this._thumbnails,this.scroll.down);return!!n&&(this._ensurePdfPageLoaded(n).then(function(){e.renderingQueue.renderView(n)}),!0)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(e){if(!(0,s.isValidRotation)(e))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==e){this._pagesRotation=e;for(var t=0,n=this._thumbnails.length;t<n;t++)this._thumbnails[t].update(e)}}}])&&o(e.prototype,t),n&&o(e,n),i}();t.PDFThumbnailViewer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFThumbnailView=void 0;var i=n(8),d=n(5),p=n(11);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,_=1,m=98,s=(r=null,{getCanvas:function(e,t){var n=r;n||(n=document.createElement("canvas"),r=n),n.width=e,n.height=t,n.mozOpaque=!0;var o=n.getContext("2d",{alpha:!1});return o.save(),o.fillStyle="rgb(255, 255, 255)",o.fillRect(0,0,e,t),o.restore(),n},destroyCanvas:function(){var e=r;e&&(e.width=0,e.height=0),r=null}}),n=function(){function u(e){var t=e.container,n=e.id,o=e.defaultViewport,r=e.optionalContentConfigPromise,a=e.linkService,i=e.renderingQueue,s=e.checkSetImageDisabled,l=e.disableCanvasToImageConversion,l=void 0!==l&&l,e=e.l10n,e=void 0===e?d.NullL10n:e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.id=n,this.renderingId="thumbnail"+n,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=o,this.pdfPageRotate=o.rotation,this._optionalContentConfigPromise=r||null,this.linkService=a,this.renderingQueue=i,this.renderTask=null,this.renderingState=p.RenderingStates.INITIAL,this.resume=null,this._checkSetImageDisabled=s||function(){return!1},this.disableCanvasToImageConversion=l,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasWidth=m,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth,this.l10n=e;var c=document.createElement("a");c.href=a.getAnchorUrl("#page="+n),this._thumbPageTitle.then(function(e){c.title=e}),c.onclick=function(){return a.page=n,!1},this.anchor=c;s=document.createElement("div");s.className="thumbnail",s.setAttribute("data-page-number",this.id),this.div=s;l=document.createElement("div");l.className="thumbnailSelectionRing";e=2*_;l.style.width=this.canvasWidth+e+"px",l.style.height=this.canvasHeight+e+"px",this.ring=l,s.appendChild(l),c.appendChild(s),t.appendChild(c)}var e,t,n;return e=u,n=[{key:"cleanup",value:function(){s.destroyCanvas()}}],(t=[{key:"setPdfPage",value:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:t}),this.reset()}},{key:"reset",value:function(){this.cancelRendering(),this.renderingState=p.RenderingStates.INITIAL,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth,this.div.removeAttribute("data-loaded");for(var e=this.ring,t=e.childNodes,n=t.length-1;0<=n;n--)e.removeChild(t[n]);var o=2*_;e.style.width=this.canvasWidth+o+"px",e.style.height=this.canvasHeight+o+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)}},{key:"update",value:function(e){void 0!==e&&(this.rotation=e);e=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:e}),this.reset()}},{key:"cancelRendering",value:function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}},{key:"_getPageDrawContext",value:function(e){var t=0<arguments.length&&void 0!==e&&e,n=document.createElement("canvas");(this.canvas=n).mozOpaque=!0;var o=n.getContext("2d",{alpha:!1}),e=(0,d.getOutputScale)(o);return n.width=this.canvasWidth*e.sx|0,n.height=this.canvasHeight*e.sy|0,n.style.width=this.canvasWidth+"px",n.style.height=this.canvasHeight+"px",!t&&e.scaled&&o.scale(e.sx,e.sy),o}},{key:"_convertCanvasToImage",value:function(){var t=this;if(this.canvas&&this.renderingState===p.RenderingStates.FINISHED){var e="thumbnailImage";if(this.disableCanvasToImageConversion)return this.canvas.className=e,this._thumbPageCanvas.then(function(e){t.canvas.setAttribute("aria-label",e)}),this.div.setAttribute("data-loaded",!0),void this.ring.appendChild(this.canvas);var n=document.createElement("img");n.className=e,this._thumbPageCanvas.then(function(e){n.setAttribute("aria-label",e)}),n.style.width=this.canvasWidth+"px",n.style.height=this.canvasHeight+"px",n.src=this.canvas.toDataURL(),this.image=n,this.div.setAttribute("data-loaded",!0),this.ring.appendChild(n),this.canvas.width=0,this.canvas.height=0,delete this.canvas}}},{key:"draw",value:function(){var t=this;if(this.renderingState!==p.RenderingStates.INITIAL)return Promise.resolve(void 0);var e=this.pdfPage;if(!e)return this.renderingState=p.RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=p.RenderingStates.RUNNING;function n(e){a===t.renderTask&&(t.renderTask=null),e instanceof i.RenderingCancelledException?o.resolve(void 0):(t.renderingState=p.RenderingStates.FINISHED,t._convertCanvasToImage(),e?o.reject(e):o.resolve(void 0))}var o=(0,i.createPromiseCapability)(),r={canvasContext:this._getPageDrawContext(),viewport:this.viewport.clone({scale:this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise},a=this.renderTask=e.render(r);return a.onContinue=function(e){if(!t.renderingQueue.isHighestPriority(t))return t.renderingState=p.RenderingStates.PAUSED,void(t.resume=function(){t.renderingState=p.RenderingStates.RUNNING,e()});e()},a.promise.then(function(){n(null)},function(e){n(e)}),o.promise}},{key:"setImage",value:function(e){if(!this._checkSetImageDisabled()&&this.renderingState===p.RenderingStates.INITIAL){var t=e.canvas;if(t){this.pdfPage||this.setPdfPage(e.pdfPage),this.renderingState=p.RenderingStates.FINISHED;var e=this._getPageDrawContext(!0),n=e.canvas;if(t.width<=2*n.width)return e.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),void this._convertCanvasToImage();for(var o=n.width<<3,r=n.height<<3,a=s.getCanvas(o,r),i=a.getContext("2d");o>t.width||r>t.height;)o>>=1,r>>=1;for(i.drawImage(t,0,0,t.width,t.height,0,0,o,r);o>2*n.width;)i.drawImage(a,0,0,o,r,0,0,o>>1,r>>1),o>>=1,r>>=1;e.drawImage(a,0,0,o,r,0,0,n.width,n.height),this._convertCanvasToImage()}}}},{key:"setPageLabel",value:function(e){var t=this;this.pageLabel="string"==typeof e?e:null,this._thumbPageTitle.then(function(e){t.anchor.title=e}),this.renderingState===p.RenderingStates.FINISHED&&this._thumbPageCanvas.then(function(e){t.image?t.image.setAttribute("aria-label",e):t.disableCanvasToImageConversion&&t.canvas&&t.canvas.setAttribute("aria-label",e)})}},{key:"_thumbPageTitle",get:function(){var e;return this.l10n.get("thumb_page_title",{page:null!=(e=this.pageLabel)?e:this.id},"Page {{page}}")}},{key:"_thumbPageCanvas",get:function(){var e;return this.l10n.get("thumb_page_canvas",{page:null!=(e=this.pageLabel)?e:this.id},"Thumbnail of Page {{page}}")}}])&&o(e.prototype,t),n&&o(e,n),u}();t.PDFThumbnailView=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFViewer=void 0;var r=n(30),a=n(8);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_(n);return e=o?(e=_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,r.BaseViewer);var e,t,n,o=p(s);function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.apply(this,arguments)}return e=s,(t=[{key:"_scrollIntoView",value:function(e){var t,n=e.pageDiv,o=e.pageSpot,r=void 0===o?null:o,a=e.pageNumber,i=void 0===a?null:a;r||this.isInPresentationMode||(o=(t=n.offsetLeft+n.clientLeft)+n.clientWidth,a=(e=this.container).scrollLeft,e=e.clientWidth,(this._isScrollModeHorizontal||t<a||a+e<o)&&(r={left:0,top:0})),u(_(s.prototype),"_scrollIntoView",this).call(this,{pageDiv:n,pageSpot:r,pageNumber:i})}},{key:"_getVisiblePages",value:function(){return this.isInPresentationMode?this._getCurrentVisiblePage():u(_(s.prototype),"_getVisiblePages",this).call(this)}},{key:"_updateHelper",value:function(e){if(!this.isInPresentationMode){var t=this._currentPageNumber,n=!1,o=l(e);try{for(o.s();!(r=o.n()).done;){var r=r.value;if(r.percent<100)break;if(r.id===t){n=!0;break}}}catch(e){o.e(e)}finally{o.f()}n||(t=e[0].id),this._setCurrentPageNumber(t)}}},{key:"_viewerElement",get:function(){return(0,a.shadow)(this,"_viewerElement",this.viewer)}}])&&c(e.prototype,t),n&&c(e,n),s}();t.PDFViewer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseViewer=void 0;var p=n(5),r=n(11),i=n(31),a=n(8),_=n(32),s=n(23),l=n(33);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(a){var i=[];this.push=function(e){var t=i.indexOf(e);0<=t&&i.splice(t,1),i.push(e),i.length>a&&i.shift().destroy()},this.resize=function(e,t){if(a=e,t){for(var n=new Set,o=0,r=t.length;o<r;++o)n.add(t[o].id);(0,p.moveToEndOfArray)(i,function(e){return n.has(e.id)})}for(;i.length>a;)i.shift().destroy()}}n=function(){function n(e){var t=this;if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.constructor===n)throw new Error("Cannot initialize BaseViewer.");if(this._name=this.constructor.name,this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,!(this.container instanceof HTMLDivElement&&this.viewer instanceof HTMLDivElement))throw new Error("Invalid `container` and/or `viewer` option.");this.eventBus=e.eventBus,this.linkService=e.linkService||new s.SimpleLinkService,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.removePageBorders=e.removePageBorders||!1,this.textLayerMode=Number.isInteger(e.textLayerMode)?e.textLayerMode:p.TextLayerMode.ENABLE,this.imageResourcesPath=IMAGE_RESOURCES_PATH,this.renderInteractiveForms="boolean"!=typeof e.renderInteractiveForms||e.renderInteractiveForms,this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.renderer=e.renderer||p.RendererType.CANVAS,this.enableWebGL=e.enableWebGL||!1,this.useOnlyCssZoom=e.useOnlyCssZoom||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n||p.NullL10n,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new r.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue,this.scroll=(0,p.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=p.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then(function(){t.eventBus.dispatch("baseviewerinit",{source:t})})}var e,t,o;return e=n,(t=[{key:"getPageView",value:function(e){return this._pages[e]}},{key:"_setCurrentPageNumber",value:function(e,t){t=1<arguments.length&&void 0!==t&&t;return this._currentPageNumber===e?(t&&this._resetCurrentPageView(),!0):0<e&&e<=this.pagesCount&&(this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels&&this._pageLabels[e-1]}),t&&this._resetCurrentPageView(),!0)}},{key:"_onePageRenderedOrForceFetch",value:function(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}},{key:"setDocument",value:function(s){var l,e,c,u,d=this;this.pdfDocument&&(this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null)),(this.pdfDocument=s)&&(l=s.numPages,e=s.getPage(1),c=s.annotationStorage,u=s.getOptionalContentConfig?s.getOptionalContentConfig():{},this._pagesCapability.promise.then(function(){d.eventBus.dispatch("pagesloaded",{source:d,pagesCount:l})}),this._onBeforeDraw=function(e){e=d._pages[e.pageNumber-1];e&&d._buffer.push(e)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=function(e){e.cssTransform||d._onePageRenderedCapability.settled||(d._onePageRenderedCapability.resolve(),d.eventBus._off("pagerendered",d._onAfterDraw),d._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),e.then(function(e){d._firstPageCapability.resolve(e),d._optionalContentConfigPromise=u;for(var t=d.currentScale,n=e.getViewport({scale:t*p.CSS_UNITS}),o=d.textLayerMode!==p.TextLayerMode.DISABLE?d:null,r=1;r<=l;++r){var a=new _.PDFPageView({container:d._viewerElement,eventBus:d.eventBus,id:r,scale:t,defaultViewport:n.clone(),annotationStorage:c,optionalContentConfigPromise:u,renderingQueue:d.renderingQueue,textLayerFactory:o,textLayerMode:d.textLayerMode,annotationLayerFactory:d,imageResourcesPath:d.imageResourcesPath,renderInteractiveForms:d.renderInteractiveForms,renderer:d.renderer,enableWebGL:d.enableWebGL,useOnlyCssZoom:d.useOnlyCssZoom,maxCanvasPixels:d.maxCanvasPixels,l10n:d.l10n});d._pages.push(a)}var i=d._pages[0];i&&(i.setPdfPage(e),d.linkService.cachePageRef(1,e.ref)),d._spreadMode!==p.SpreadMode.NONE&&d._updateSpreadMode(),d._onePageRenderedOrForceFetch().then(function(){if(d.findController&&d.findController.setDocument(s),s.loadingParams.disableAutoFetch||7500<l)d._pagesCapability.resolve();else{var o=l-1;if(o<=0)d._pagesCapability.resolve();else for(var e=2;e<=l;++e)!function(n){s.getPage(n).then(function(e){var t=d._pages[n-1];t.pdfPage||t.setPdfPage(e),d.linkService.cachePageRef(n,e.ref),0==--o&&d._pagesCapability.resolve()},function(e){0==--o&&d._pagesCapability.resolve()})}(e)}}),d.eventBus.dispatch("pagesinit",{source:d}),d.defaultRenderingQueue&&d.update()}).catch(function(e){}))}},{key:"setPageLabels",value:function(e){if(this.pdfDocument){e&&Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:this._pageLabels=null;for(var t=0,n=this._pages.length;t<n;t++){var o=this._pages[t],r=this._pageLabels&&this._pageLabels[t];o.setPageLabel(r)}}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=p.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new m(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,a.createPromiseCapability)(),this._onePageRenderedCapability=(0,a.createPromiseCapability)(),this._pagesCapability=(0,a.createPromiseCapability)(),this._scrollMode=p.ScrollMode.VERTICAL,this._spreadMode=p.SpreadMode.NONE,this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.viewer.textContent="",this._updateScrollMode()}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"_scrollIntoView",value:function(e){var t=e.pageDiv,n=e.pageSpot,n=void 0===n?null:n,e=e.pageNumber;(0,p.scrollIntoView)(t,n)}},{key:"_setScaleUpdatePages",value:function(e,t,n,o){var r=2<arguments.length&&void 0!==n&&n,a=3<arguments.length&&void 0!==o&&o;if(this._currentScaleValue=t.toString(),n=this._currentScale,(o=e)===n||Math.abs(o-n)<1e-15)a&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});else{for(var i,s=0,l=this._pages.length;s<l;s++)this._pages[s].update(e);this._currentScale=e,r||(r=this._currentPageNumber,!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(r=this._location.pageNumber,i=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:r,destArray:i,allowNegativeOffset:!0})),this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:a?t:void 0}),this.defaultRenderingQueue&&this.update()}}},{key:"_setScale",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(0<(i=parseFloat(e)))this._setScaleUpdatePages(i,e,n,!1);else{var o=this._pages[this._currentPageNumber-1];if(o){var r=this.isInPresentationMode||this.removePageBorders,a=r?0:p.SCROLLBAR_PADDING,t=r?0:p.VERTICAL_PADDING;!r&&this._isScrollModeHorizontal&&(a=(r=[t,a])[0],t=r[1]);a=(this.container.clientWidth-a)/o.width*o.scale,t=(this.container.clientHeight-t)/o.height*o.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=a;break;case"page-height":i=t;break;case"page-fit":i=Math.min(a,t);break;case"auto":var a=(0,p.isPortraitOrientation)(o)?a:Math.min(t,a),i=Math.min(p.MAX_AUTO_SCALE,a);break;default:return}this._setScaleUpdatePages(i,e,n,!0)}}}},{key:"_resetCurrentPageView",value:function(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var e=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:e.div})}},{key:"scrollPageIntoView",value:function(e){var t=e.pageNumber,n=e.destArray,o=void 0===n?null:n,r=e.allowNegativeOffset,a=void 0!==r&&r,i=e.ignoreDestinationZoom,s=void 0!==i&&i;if(this.pdfDocument){var l=Number.isInteger(t)&&this._pages[t-1];if(l)if(!this.isInPresentationMode&&o){var c=0,u=0,d=0,n=0,r=l.rotation%180!=0,e=(r?l.height:l.width)/l.scale/p.CSS_UNITS,i=(r?l.width:l.height)/l.scale/p.CSS_UNITS,r=0;switch(o[1].name){case"XYZ":c=o[2],u=o[3],r=o[4],c=null!==c?c:0,u=null!==u?u:i;break;case"Fit":case"FitB":r="page-fit";break;case"FitH":case"FitBH":r="page-width",null===(u=o[2])&&this._location&&(c=this._location.left,u=this._location.top);break;case"FitV":case"FitBV":c=o[2],d=e,n=i,r="page-height";break;case"FitR":c=o[2],u=o[3],d=o[4]-c,n=o[5]-u;e=this.removePageBorders?0:p.SCROLLBAR_PADDING,i=this.removePageBorders?0:p.VERTICAL_PADDING,e=(this.container.clientWidth-e)/d/p.CSS_UNITS,i=(this.container.clientHeight-i)/n/p.CSS_UNITS,r=Math.min(Math.abs(e),Math.abs(i));break;default:return}s||(r&&r!==this._currentScale?this.currentScaleValue=r:this._currentScale===p.UNKNOWN_SCALE&&(this.currentScaleValue=p.DEFAULT_SCALE_VALUE)),"page-fit"!==r||o[4]?(u=[l.viewport.convertToViewportPoint(c,u),l.viewport.convertToViewportPoint(c+d,u+n)],n=Math.min(u[0][0],u[1][0]),u=Math.min(u[0][1],u[1][1]),a||(n=Math.max(n,0),u=Math.max(u,0)),this._scrollIntoView({pageDiv:l.div,pageSpot:{left:n,top:u},pageNumber:t})):this._scrollIntoView({pageDiv:l.div,pageNumber:t})}else this._setCurrentPageNumber(t,!0)}}},{key:"_updateLocation",value:function(e){var t=this._currentScale,n=this._currentScaleValue,o=parseFloat(n)===t?Math.round(1e4*t)/100:n,r=e.id,a="#page="+r;a+="&zoom="+o;t=this._pages[r-1],n=this.container,n=t.getPagePoint(n.scrollLeft-e.x,n.scrollTop-e.y),e=Math.round(n[0]),n=Math.round(n[1]);a+=","+e+","+n,this._location={pageNumber:r,scale:o,top:n,left:e,rotation:this._pagesRotation,pdfOpenParams:a}}},{key:"_updateHelper",value:function(){throw new Error("Not implemented: _updateHelper")}},{key:"update",value:function(){var e=this._getVisiblePages(),t=e.views,n=t.length;0!==n&&(n=Math.max(10,2*n+1),this._buffer.resize(n,t),this.renderingQueue.renderHighestPriority(e),this._updateHelper(t),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location}))}},{key:"containsElement",value:function(e){return this.container.contains(e)}},{key:"focus",value:function(){this.container.focus()}},{key:"_getCurrentVisiblePage",value:function(){if(!this.pagesCount)return{views:[]};var e=this._pages[this._currentPageNumber-1],t=e.div,e={id:e.id,x:t.offsetLeft+t.clientLeft,y:t.offsetTop+t.clientTop,view:e};return{first:e,last:e,views:[e]}}},{key:"_getVisiblePages",value:function(){return(0,p.getVisibleElements)(this.container,this._pages,!0,this._isScrollModeHorizontal)}},{key:"isPageVisible",value:function(t){return!!this.pdfDocument&&(!(t<1||t>this.pagesCount)&&this._getVisiblePages().views.some(function(e){return e.id===t}))}},{key:"cleanup",value:function(){for(var e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].renderingState!==r.RenderingStates.FINISHED&&this._pages[e].reset()}},{key:"_cancelRendering",value:function(){for(var e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function(t){var n=this;if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);var e=this.pdfDocument.getPage(t.id).then(function(e){return t.pdfPage||t.setPdfPage(e),n._pagesRequests.delete(t),e}).catch(function(e){n._pagesRequests.delete(t)});return this._pagesRequests.set(t,e),e}},{key:"forceRendering",value:function(e){var t=this,n=e||this._getVisiblePages(),e=this._isScrollModeHorizontal?this.scroll.right:this.scroll.down,o=this.renderingQueue.getHighestPriority(n,this._pages,e);return!!o&&(this._ensurePdfPageLoaded(o).then(function(){t.renderingQueue.renderView(o)}),!0)}},{key:"createTextLayerBuilder",value:function(e,t,n,o,r){o=3<arguments.length&&void 0!==o&&o,r=4<arguments.length?r:void 0;return new l.TextLayerBuilder({textLayerDiv:e,eventBus:r,pageIndex:t,viewport:n,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&o})}},{key:"createAnnotationLayerBuilder",value:function(e,t,n,o,r,a){n=2<arguments.length&&void 0!==n?n:null,o=3<arguments.length&&void 0!==o?o:"",r=4<arguments.length&&void 0!==r&&r,a=5<arguments.length&&void 0!==a?a:p.NullL10n;return new i.AnnotationLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:n,imageResourcesPath:o,renderInteractiveForms:r,linkService:this.linkService,downloadManager:this.downloadManager,l10n:a})}},{key:"getPagesOverview",value:function(){var e=this._pages.map(function(e){e=e.pdfPage.getViewport({scale:1});return{width:e.width,height:e.height,rotation:e.rotation}});return this.enablePrintAutoRotate?e.map(function(e){return(0,p.isPortraitOrientation)(e)?e:{width:e.height,height:e.width,rotation:(e.rotation+90)%360}}):e}},{key:"_updateScrollMode",value:function(e){var t=0<arguments.length&&void 0!==e?e:null,n=this._scrollMode,e=this.viewer;e.classList.toggle("scrollHorizontal",n===p.ScrollMode.HORIZONTAL),e.classList.toggle("scrollWrapped",n===p.ScrollMode.WRAPPED),this.pdfDocument&&t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}},{key:"_updateSpreadMode",value:function(e){e=0<arguments.length&&void 0!==e?e:null;if(this.pdfDocument){var t=this.viewer,n=this._pages;if(t.textContent="",this._spreadMode===p.SpreadMode.NONE)for(var o=0,r=n.length;o<r;++o)t.appendChild(n[o].div);else for(var a=this._spreadMode-1,i=null,s=0,l=n.length;s<l;++s)null===i?((i=document.createElement("div")).className="spread",t.appendChild(i)):s%2==a&&(i=i.cloneNode(!1),t.appendChild(i)),i.appendChild(n[s].div);e&&(this._setCurrentPageNumber(e,!0),this.update())}}},{key:"pagesCount",get:function(){return this._pages.length}},{key:"pageViewsReady",get:function(){return!!this._pagesCapability.settled&&this._pages.every(function(e){return e&&e.pdfPage})}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&this._setCurrentPageNumber(e,!0)}},{key:"currentPageLabel",get:function(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]},set:function(e){var t;this.pdfDocument&&(t=0|e,!this._pageLabels||0<=(e=this._pageLabels.indexOf(e))&&(t=e+1),this._setCurrentPageNumber(t,!0))}},{key:"currentScale",get:function(){return this._currentScale!==p.UNKNOWN_SCALE?this._currentScale:p.DEFAULT_SCALE},set:function(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(e,!1)}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(e){this.pdfDocument&&this._setScale(e,!1)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(e){if(!(0,p.isValidRotation)(e))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&this._pagesRotation!==e){this._pagesRotation=e;for(var t=this._currentPageNumber,n=0,o=this._pages.length;n<o;n++){var r=this._pages[n];r.update(r.scale,e)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"_viewerElement",get:function(){throw new Error("Not implemented: _viewerElement")}},{key:"_isScrollModeHorizontal",get:function(){return!this.isInPresentationMode&&this._scrollMode===p.ScrollMode.HORIZONTAL}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===p.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===p.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"hasEqualPageSizes",get:function(){for(var e=this._pages[0],t=1,n=this._pages.length;t<n;++t){var o=this._pages[t];if(o.width!==e.width||o.height!==e.height)return!1}return!0}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)},set:function(e){if(!(e instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(e));if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=e;var t=c(this._pages);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.update(n.scale,n.rotation,e)}}catch(e){t.e(e)}finally{t.f()}this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e})}}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(e){if(this._scrollMode!==e){if(!(0,p.isValidScrollMode)(e))throw new Error("Invalid scroll mode: ".concat(e));this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber)}}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(e){if(this._spreadMode!==e){if(!(0,p.isValidSpreadMode)(e))throw new Error("Invalid spread mode: ".concat(e));this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}}])&&d(e.prototype,t),o&&d(e,o),n}();t.BaseViewer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAnnotationLayerFactory=t.AnnotationLayerBuilder=void 0;var o=n(8),c=n(5),i=n(23);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=function(){function l(e){var t=e.pageDiv,n=e.pdfPage,o=e.linkService,r=e.downloadManager,a=e.annotationStorage,i=void 0===a?null:a,s=e.imageResourcesPath,a=void 0===s?"":s,s=e.renderInteractiveForms,s=void 0===s||s,e=e.l10n,e=void 0===e?c.NullL10n:e;u(this,l),this.pageDiv=t,this.pdfPage=n,this.linkService=o,this.downloadManager=r,this.imageResourcesPath=a,this.renderInteractiveForms=s,this.l10n=e,this.annotationStorage=i,this.div=null,this._cancelled=!1}return a(l,[{key:"render",value:function(t,e){var n=this,e=1<arguments.length&&void 0!==e?e:"display";return this.pdfPage.getAnnotations({intent:e}).then(function(e){n._cancelled||0!==e.length&&(e={viewport:t.clone({dontFlip:!0}),div:n.div,annotations:e,page:n.pdfPage,imageResourcesPath:n.imageResourcesPath,renderInteractiveForms:n.renderInteractiveForms,linkService:n.linkService,downloadManager:n.downloadManager,annotationStorage:n.annotationStorage},n.div?o.AnnotationLayer.update(e):(n.div=document.createElement("div"),n.div.className="annotationLayer",n.pageDiv.appendChild(n.div),e.div=n.div,o.AnnotationLayer.render(e),n.l10n.translate(n.div)))})}},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&this.div.setAttribute("hidden","true")}}]),l}();t.AnnotationLayerBuilder=s;n=function(){function e(){u(this,e)}return a(e,[{key:"createAnnotationLayerBuilder",value:function(e,t,n,o,r,a){n=2<arguments.length&&void 0!==n?n:null,o=3<arguments.length&&void 0!==o?o:"",r=!(4<arguments.length&&void 0!==r)||r,a=5<arguments.length&&void 0!==a?a:c.NullL10n;return new s({pageDiv:e,pdfPage:t,imageResourcesPath:o,renderInteractiveForms:r,linkService:new i.SimpleLinkService,l10n:a,annotationStorage:n})}}]),e}();t.DefaultAnnotationLayerFactory=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPageView=void 0;var o,l=(o=n(2))&&o.__esModule?o:{default:o},p=n(5),_=n(8),c=n(11);function u(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function d(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){u(o,t,n,r,a,"next",e)}function a(e){u(o,t,n,r,a,"throw",e)}r(void 0)})}}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=n(7).viewerCompatibilityParams.maxCanvasPixels||16777216,r=function(){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=e.container,n=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||p.DEFAULT_SCALE,this.viewport=n,this.pdfPageRotate=n.rotation,this._annotationStorage=e.annotationStorage||null,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=Number.isInteger(e.textLayerMode)?e.textLayerMode:p.TextLayerMode.ENABLE,this.imageResourcesPath=e.imageResourcesPath||"",this.renderInteractiveForms="boolean"!=typeof e.renderInteractiveForms||e.renderInteractiveForms,this.useOnlyCssZoom=e.useOnlyCssZoom||!1,this.maxCanvasPixels=e.maxCanvasPixels||i,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.textLayerFactory=e.textLayerFactory,this.annotationLayerFactory=e.annotationLayerFactory,this.renderer=e.renderer||p.RendererType.CANVAS,this.enableWebGL=e.enableWebGL||!1,this.l10n=e.l10n||p.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=c.RenderingStates.INITIAL,this.resume=null,this.error=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;e=document.createElement("div");e.className="page",e.style.width=Math.floor(this.viewport.width)+"px",e.style.height=Math.floor(this.viewport.height)+"px",e.setAttribute("data-page-number",this.id),this.div=e,t.appendChild(e)}var e,t,n,r;return e=o,(t=[{key:"setPdfPage",value:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*p.CSS_UNITS,rotation:t}),this.stats=e.stats,this.reset()}},{key:"destroy",value:function(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}},{key:"_renderAnnotationLayer",value:(r=d(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,this.annotationLayer.render(this.viewport,"display");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t=e.t0;case 9:return e.prev=9,this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t}),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[1,6,9,12]])})),function(){return r.apply(this,arguments)})},{key:"_resetZoomLayer",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this.zoomLayer&&(e=this.zoomLayer.firstChild,this.paintedViewportMap.delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null)}},{key:"reset",value:function(e,t){e=0<arguments.length&&void 0!==e&&e,t=1<arguments.length&&void 0!==t&&t;this.cancelRendering(t),this.renderingState=c.RenderingStates.INITIAL;var n=this.div;n.style.width=Math.floor(this.viewport.width)+"px",n.style.height=Math.floor(this.viewport.height)+"px";for(var o=n.childNodes,r=e&&this.zoomLayer||null,a=t&&this.annotationLayer&&this.annotationLayer.div||null,i=o.length-1;0<=i;i--){var s=o[i];r!==s&&a!==s&&n.removeChild(s)}n.removeAttribute("data-loaded"),a?this.annotationLayer.hide():this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null),r||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",n.appendChild(this.loadingIconDiv)}},{key:"update",value:function(e,t,n){n=2<arguments.length&&void 0!==n?n:null;this.scale=e||this.scale,void 0!==t&&(this.rotation=t),n instanceof Promise&&(this._optionalContentConfigPromise=n);t=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*p.CSS_UNITS,rotation:t}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});n=!1;if(this.canvas&&0<this.maxCanvasPixels&&(t=this.outputScale,(Math.floor(this.viewport.width)*t.sx|0)*(Math.floor(this.viewport.height)*t.sy|0)>this.maxCanvasPixels&&(n=!0)),this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&n)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}},{key:"cancelRendering",value:function(e){e=0<arguments.length&&void 0!==e&&e;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!e&&this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null)}},{key:"cssTransform",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.viewport.width,o=this.viewport.height,r=this.div;e.style.width=e.parentNode.style.width=r.style.width=Math.floor(n)+"px",e.style.height=e.parentNode.style.height=r.style.height=Math.floor(o)+"px";var a=this.viewport.rotation-this.paintedViewportMap.get(e).rotation,i=Math.abs(a),s=1,r=1;90!==i&&270!==i||(s=o/n,r=n/o);var l="rotate("+a+"deg) scale("+s+","+r+")";if(e.style.transform=l,this.textLayer){s=this.textLayer.viewport,r=this.viewport.rotation-s.rotation,e=Math.abs(r),r=n/s.width;90!==e&&270!==e||(r=n/s.height);var c,u,s=this.textLayer.textLayerDiv;switch(e){case 0:c=u=0;break;case 90:c=0,u="-"+s.style.height;break;case 180:c="-"+s.style.width,u="-"+s.style.height;break;case 270:c="-"+s.style.width,u=0}s.style.transform="rotate("+e+"deg) scale("+r+", "+r+") translate("+c+", "+u+")",s.style.transformOrigin="0% 0%"}t&&this.annotationLayer&&this._renderAnnotationLayer()}},{key:"getPagePoint",value:function(e,t){return this.viewport.convertToPdfPoint(e,t)}},{key:"draw",value:function(){var n=this;this.renderingState!==c.RenderingStates.INITIAL&&this.reset();var o=this.div,r=this.pdfPage;if(!r)return this.renderingState=c.RenderingStates.FINISHED,this.loadingIconDiv&&(o.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=c.RenderingStates.RUNNING;var e=document.createElement("div");e.style.width=o.style.width,e.style.height=o.style.height,e.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?o.insertBefore(e,this.annotationLayer.div):o.appendChild(e);var t=null;this.textLayerMode!==p.TextLayerMode.DISABLE&&this.textLayerFactory&&((a=document.createElement("div")).className="textLayer",a.style.width=e.style.width,a.style.height=e.style.height,this.annotationLayer&&this.annotationLayer.div?o.insertBefore(a,this.annotationLayer.div):o.appendChild(a),t=this.textLayerFactory.createTextLayerBuilder(a,this.id-1,this.viewport,this.textLayerMode===p.TextLayerMode.ENABLE_ENHANCE,this.eventBus)),this.textLayer=t;var a=null;this.renderingQueue&&(a=function(e){if(!n.renderingQueue.isHighestPriority(n))return n.renderingState=c.RenderingStates.PAUSED,void(n.resume=function(){n.renderingState=c.RenderingStates.RUNNING,e()});e()});var i=function(){var e=d(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s===n.paintTask&&(n.paintTask=null),t instanceof _.RenderingCancelledException)return n.error=null,e.abrupt("return");e.next=4;break;case 4:if(n.renderingState=c.RenderingStates.FINISHED,n.loadingIconDiv&&(o.removeChild(n.loadingIconDiv),delete n.loadingIconDiv),n._resetZoomLayer(!0),n.error=t,n.stats=r.stats,n.eventBus.dispatch("pagerendered",{source:n,pageNumber:n.id,cssTransform:!1,timestamp:performance.now()}),t)throw t;e.next=12;break;case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s=this.renderer===p.RendererType.SVG?this.paintOnSvg(e):this.paintOnCanvas(e);s.onRenderContinue=a;a=(this.paintTask=s).promise.then(function(){return i(null).then(function(){var e;t&&(e=r.streamTextContent({normalizeWhitespace:!0}),t.setTextContentStream(e),t.render())})},function(e){return i(e)});return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(o,r,this._annotationStorage,this.imageResourcesPath,this.renderInteractiveForms,this.l10n)),this._renderAnnotationLayer()),o.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),a}},{key:"paintOnCanvas",value:function(e){var t=(0,_.createPromiseCapability)(),n={promise:t.promise,onRenderContinue:function(e){e()},cancel:function(){d.cancel()}},o=this.viewport,r=document.createElement("canvas");this.l10n.get("page_canvas",{page:this.id},"Page {{page}}").then(function(e){r.setAttribute("aria-label",e)}),r.setAttribute("hidden","hidden");function a(){i&&(r.removeAttribute("hidden"),i=!1)}var i=!0;e.appendChild(r),(this.canvas=r).mozOpaque=!0;var s=r.getContext("2d",{alpha:!1}),l=(0,p.getOutputScale)(s);this.outputScale=l,this.useOnlyCssZoom&&(e=o.clone({scale:p.CSS_UNITS}),l.sx*=e.width/o.width,l.sy*=e.height/o.height,l.scaled=!0),0<this.maxCanvasPixels&&(c=o.width*o.height,u=Math.sqrt(this.maxCanvasPixels/c),l.sx>u||l.sy>u?(l.sx=u,l.sy=u,l.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1);var c=(0,p.approximateFraction)(l.sx),u=(0,p.approximateFraction)(l.sy);r.width=(0,p.roundToDivide)(o.width*l.sx,c[0]),r.height=(0,p.roundToDivide)(o.height*l.sy,u[0]),r.style.width=(0,p.roundToDivide)(o.width,c[1])+"px",r.style.height=(0,p.roundToDivide)(o.height,u[1])+"px",this.paintedViewportMap.set(r,o);var l={canvasContext:s,transform:l.scaled?[l.sx,0,0,l.sy,0,0]:null,viewport:this.viewport,enableWebGL:this.enableWebGL,renderInteractiveForms:this.renderInteractiveForms,optionalContentConfigPromise:this._optionalContentConfigPromise},d=this.pdfPage.render(l);return d.onContinue=function(e){a(),n.onRenderContinue?n.onRenderContinue(e):e()},d.promise.then(function(){a(),t.resolve(void 0)},function(e){a(),t.reject(e)}),n}},{key:"paintOnSvg",value:function(t){function n(){if(e)throw new _.RenderingCancelledException("Rendering cancelled, page ".concat(o.id),"svg")}var o=this,e=!1,r=this.pdfPage,a=this.viewport.clone({scale:p.CSS_UNITS});return{promise:r.getOperatorList().then(function(e){return n(),new _.SVGGraphics(r.commonObjs,r.objs).getSVG(e,a).then(function(e){n(),o.svg=e,o.paintedViewportMap.set(e,a),e.style.width=t.style.width,e.style.height=t.style.height,o.renderingState=c.RenderingStates.FINISHED,t.appendChild(e)})}),onRenderContinue:function(e){e()},cancel:function(){e=!0}}}},{key:"setPageLabel",value:function(e){this.pageLabel="string"==typeof e?e:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}}])&&a(e.prototype,t),n&&a(e,n),o}();t.PDFPageView=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTextLayerFactory=t.TextLayerBuilder=void 0;var o=n(8);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var i=function(){function i(e){var t=e.textLayerDiv,n=e.eventBus,o=e.pageIndex,r=e.viewport,a=e.findController,a=void 0===a?null:a,e=e.enhanceTextSelection,e=void 0!==e&&e;s(this,i),this.textLayerDiv=t,this.eventBus=n,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=o,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=r,this.textDivs=[],this.findController=a,this.textLayerRenderTask=null,this.enhanceTextSelection=e,this._onUpdateTextLayerMatches=null,this._bindMouse()}return a(i,[{key:"_finishRendering",value:function(){var e;this.renderingDone=!0,this.enhanceTextSelection||((e=document.createElement("div")).className="endOfContent",this.textLayerDiv.appendChild(e)),this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function(e){var t,n=this,e=0<arguments.length&&void 0!==e?e:0;!this.textContent&&!this.textContentStream||this.renderingDone||(this.cancel(),this.textDivs=[],t=document.createDocumentFragment(),this.textLayerRenderTask=(0,o.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:t,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:e,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){n.textLayerDiv.appendChild(t),n._finishRendering(),n._updateMatches()},function(e){}),this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=function(e){e.pageIndex!==n.pageIdx&&-1!==e.pageIndex||n._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)))}},{key:"cancel",value:function(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null)}},{key:"setTextContentStream",value:function(e){this.cancel(),this.textContentStream=e}},{key:"setTextContent",value:function(e){this.cancel(),this.textContent=e}},{key:"_convertMatches",value:function(e,t){if(!e)return[];for(var n=this.findController,o=this.textContentItemsStr,r=0,a=0,i=o.length-1,s=n.state.query.length,l=[],c=0,u=e.length;c<u;c++){for(var d=e[c];r!==i&&d>=a+o[r].length;)a+=o[r].length,r++;o.length;var p={begin:{divIdx:r,offset:d-a}};for(d+=t?t[c]:s;r!==i&&d>a+o[r].length;)a+=o[r].length,r++;p.end={divIdx:r,offset:d-a},l.push(p)}return l}},{key:"_renderMatches",value:function(e){if(0!==e.length){var t=this.findController,n=this.pageIdx,a=this.textContentItemsStr,i=this.textDivs,o=n===t.selected.pageIdx,r=t.selected.matchIdx,s=null,l={divIdx:-1,offset:void 0},c=r,u=c+1;if(t.state.highlightAll)c=0,u=e.length;else if(!o)return;for(var d=c;d<u;d++){var p=e[d],_=p.begin,m=p.end,p=o&&d===r,f=p?" selected":"";if(p&&t.scrollMatchIntoView({element:i[_.divIdx],pageIndex:n,matchIndex:r}),s&&_.divIdx===s.divIdx?v(s.divIdx,s.offset,_.offset):(null!==s&&v(s.divIdx,s.offset,l.offset),b(_)),_.divIdx===m.divIdx)v(_.divIdx,_.offset,m.offset,"highlight"+f);else{v(_.divIdx,_.offset,l.offset,"highlight begin"+f);for(var g=_.divIdx+1,h=m.divIdx;g<h;g++)i[g].className="highlight middle"+f;b(m,"highlight end"+f)}s=m}s&&v(s.divIdx,s.offset,l.offset)}function b(e,t){var n=e.divIdx;i[n].textContent="",v(n,0,e.offset,t)}function v(e,t,n,o){var r=i[e],t=a[e].substring(t,n),n=document.createTextNode(t);if(o){t=document.createElement("span");return t.className=o,t.appendChild(n),void r.appendChild(t)}r.appendChild(n)}}},{key:"_updateMatches",value:function(){if(this.renderingDone){for(var e,t=this.findController,n=this.matches,o=this.pageIdx,r=this.textContentItemsStr,a=this.textDivs,i=-1,s=0,l=n.length;s<l;s++){for(var c=n[s],u=Math.max(i,c.begin.divIdx),d=c.end.divIdx;u<=d;u++){var p=a[u];p.textContent=r[u],p.className=""}i=c.end.divIdx+1}t&&t.highlightMatches&&(e=t.pageMatches[o]||null,o=t.pageMatchesLength[o]||null,this.matches=this._convertMatches(e,o),this._renderMatches(this.matches))}}},{key:"_bindMouse",value:function(){var o=this,r=this.textLayerDiv,a=null;r.addEventListener("mousedown",function(e){if(o.enhanceTextSelection&&o.textLayerRenderTask)return o.textLayerRenderTask.expandTextDivs(!0),void(a&&(clearTimeout(a),a=null));var t,n=r.querySelector(".endOfContent");n&&(e.target!==r&&"none"!==window.getComputedStyle(n).getPropertyValue("-moz-user-select")&&(t=r.getBoundingClientRect(),t=Math.max(0,(e.pageY-t.top)/t.height),n.style.top=(100*t).toFixed(2)+"%"),n.classList.add("active"))}),r.addEventListener("mouseup",function(){var e;o.enhanceTextSelection&&o.textLayerRenderTask?a=setTimeout(function(){o.textLayerRenderTask&&o.textLayerRenderTask.expandTextDivs(!1),a=null},300):(e=r.querySelector(".endOfContent"))&&(e.style.top="",e.classList.remove("active"))})}}]),i}();t.TextLayerBuilder=i;n=function(){function e(){s(this,e)}return a(e,[{key:"createTextLayerBuilder",value:function(e,t,n,o,r){return new i({textLayerDiv:e,pageIndex:t,viewport:n,enhanceTextSelection:3<arguments.length&&void 0!==o&&o,eventBus:4<arguments.length?r:void 0})}}]),e}();t.DefaultTextLayerFactory=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecondaryToolbar=void 0;var a=n(5),i=n(9),s=n(35);function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n=function(){function r(e,t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.toolbar=e.toolbar,this.toggleButton=e.toggleButton,this.toolbarButtonContainer=e.toolbarButtonContainer,this.buttons=[{element:e.presentationModeButton,eventName:"presentationmode",close:!0},{element:e.openFileButton,eventName:"openfile",close:!0},{element:e.printButton,eventName:"print",close:!0},{element:e.downloadButton,eventName:"download",close:!0},{element:e.viewBookmarkButton,eventName:null,close:!0},{element:e.firstPageButton,eventName:"firstpage",close:!0},{element:e.lastPageButton,eventName:"lastpage",close:!0},{element:e.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:e.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:e.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:i.CursorTool.SELECT},close:!0},{element:e.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:i.CursorTool.HAND},close:!0},{element:e.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.VERTICAL},close:!0},{element:e.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.HORIZONTAL},close:!0},{element:e.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.WRAPPED},close:!0},{element:e.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.NONE},close:!0},{element:e.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.ODD},close:!0},{element:e.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.EVEN},close:!0},{element:e.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.items={firstPage:e.firstPageButton,lastPage:e.lastPageButton,pageRotateCw:e.pageRotateCwButton,pageRotateCcw:e.pageRotateCcwButton},this.mainContainer=t,this.eventBus=n,this.opened=!1,this.containerHeight=null,this.previousContainerHeight=null,this.reset(),this._bindClickListeners(),this._bindCursorToolsListener(e),this._bindScrollModeListener(e),this._bindSpreadModeListener(e),this.eventBus._on("resize",this._setMaxHeight.bind(this)),this.eventBus._on("baseviewerinit",function(e){e.source instanceof s.PDFSinglePageViewer?o.toolbarButtonContainer.classList.add("hiddenScrollModeButtons","hiddenSpreadModeButtons"):o.toolbarButtonContainer.classList.remove("hiddenScrollModeButtons","hiddenSpreadModeButtons")})}var e,t,n;return e=r,(t=[{key:"setPageNumber",value:function(e){this.pageNumber=e,this._updateUIState()}},{key:"setPagesCount",value:function(e){this.pagesCount=e,this._updateUIState()}},{key:"reset",value:function(){this.pageNumber=0,this.pagesCount=0,this._updateUIState(),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}},{key:"_updateUIState",value:function(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=0===this.pagesCount,this.items.pageRotateCcw.disabled=0===this.pagesCount}},{key:"_bindClickListeners",value:function(){var i=this;this.toggleButton.addEventListener("click",this.toggle.bind(this));var n,t=o(this.buttons);try{for(t.s();!(n=t.n()).done;)!function(){var e=n.value,t=e.element,o=e.eventName,r=e.close,a=e.eventDetails;t.addEventListener("click",function(e){if(null!==o){var t,n={source:i};for(t in a)n[t]=a[t];i.eventBus.dispatch(o,n)}r&&i.close()})}()}catch(e){t.e(e)}finally{t.f()}}},{key:"_bindCursorToolsListener",value:function(t){this.eventBus._on("cursortoolchanged",function(e){e=e.tool;t.cursorSelectToolButton.classList.toggle("toggled",e===i.CursorTool.SELECT),t.cursorHandToolButton.classList.toggle("toggled",e===i.CursorTool.HAND)})}},{key:"_bindScrollModeListener",value:function(t){var n=this;function o(e){e=e.mode;t.scrollVerticalButton.classList.toggle("toggled",e===a.ScrollMode.VERTICAL),t.scrollHorizontalButton.classList.toggle("toggled",e===a.ScrollMode.HORIZONTAL),t.scrollWrappedButton.classList.toggle("toggled",e===a.ScrollMode.WRAPPED);e=e===a.ScrollMode.HORIZONTAL;t.spreadNoneButton.disabled=e,t.spreadOddButton.disabled=e,t.spreadEvenButton.disabled=e}this.eventBus._on("scrollmodechanged",o),this.eventBus._on("secondarytoolbarreset",function(e){e.source===n&&o({mode:a.ScrollMode.VERTICAL})})}},{key:"_bindSpreadModeListener",value:function(t){var n=this;function o(e){e=e.mode;t.spreadNoneButton.classList.toggle("toggled",e===a.SpreadMode.NONE),t.spreadOddButton.classList.toggle("toggled",e===a.SpreadMode.ODD),t.spreadEvenButton.classList.toggle("toggled",e===a.SpreadMode.EVEN)}this.eventBus._on("spreadmodechanged",o),this.eventBus._on("secondarytoolbarreset",function(e){e.source===n&&o({mode:a.SpreadMode.NONE})})}},{key:"open",value:function(){this.opened||(this.opened=!0,this._setMaxHeight(),this.toggleButton.classList.add("toggled"),this.toolbar.classList.remove("hidden"))}},{key:"close",value:function(){this.opened&&(this.opened=!1,this.toolbar.classList.add("hidden"),this.toggleButton.classList.remove("toggled"))}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"_setMaxHeight",value:function(){this.opened&&(this.containerHeight=this.mainContainer.clientHeight,this.containerHeight!==this.previousContainerHeight&&(this.toolbarButtonContainer.style.maxHeight="".concat(this.containerHeight-a.SCROLLBAR_PADDING,"px"),this.previousContainerHeight=this.containerHeight))}},{key:"isOpen",get:function(){return this.opened}}])&&c(e.prototype,t),n&&c(e,n),r}();t.SecondaryToolbar=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSinglePageViewer=void 0;var r=n(30),i=n(8);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n);return e=o?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==a(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.BaseViewer);var e,t,n,o=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).eventBus._on("pagesinit",function(e){t._ensurePageViewVisible()}),t}return e=a,(t=[{key:"_resetView",value:function(){l(d(a.prototype),"_resetView",this).call(this),this._previousPageNumber=1,this._shadowViewer=document.createDocumentFragment(),this._updateScrollDown=null}},{key:"_ensurePageViewVisible",value:function(){var e=this._pages[this._currentPageNumber-1],t=this._pages[this._previousPageNumber-1],n=this.viewer.childNodes;switch(n.length){case 0:this.viewer.appendChild(e.div);break;case 1:if(n[0]!==t.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(e===t)break;this._shadowViewer.appendChild(t.div),this.viewer.appendChild(e.div),this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}},{key:"_scrollUpdate",value:function(){this._updateScrollDown&&this._updateScrollDown(),l(d(a.prototype),"_scrollUpdate",this).call(this)}},{key:"_scrollIntoView",value:function(e){var t=this,n=e.pageDiv,o=e.pageSpot,o=void 0===o?null:o,e=e.pageNumber,e=void 0===e?null:e;e&&this._setCurrentPageNumber(e);var r=this._currentPageNumber>=this._previousPageNumber;this._ensurePageViewVisible(),this.update(),l(d(a.prototype),"_scrollIntoView",this).call(this,{pageDiv:n,pageSpot:o,pageNumber:e}),this._updateScrollDown=function(){t.scroll.down=r,t._updateScrollDown=null}}},{key:"_getVisiblePages",value:function(){return this._getCurrentVisiblePage()}},{key:"_updateHelper",value:function(){}},{key:"_updateScrollMode",value:function(){}},{key:"_updateSpreadMode",value:function(){}},{key:"_viewerElement",get:function(){return(0,i.shadow)(this,"_viewerElement",this._shadowViewer)}},{key:"_isScrollModeHorizontal",get:function(){return(0,i.shadow)(this,"_isScrollModeHorizontal",!1)}}])&&s(e.prototype,t),n&&s(e,n),a}();t.PDFSinglePageViewer=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var o,u=(o=n(2))&&o.__esModule?o:{default:o},d=n(5);function l(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function p(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function o(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:d.NullL10n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.toolbar=e.container,this.eventBus=t,this.l10n=n,this.buttons=[{element:e.previous,eventName:"previouspage"},{element:e.next,eventName:"nextpage"},{element:e.zoomIn,eventName:"zoomin"},{element:e.zoomOut,eventName:"zoomout"},{element:e.openFile,eventName:"openfile"},{element:e.print,eventName:"print"},{element:e.presentationModeButton,eventName:"presentationmode"},{element:e.download,eventName:"download"},{element:e.viewBookmark,eventName:null}],this.items={numPages:e.numPages,pageNumber:e.pageNumber,scaleSelectContainer:e.scaleSelectContainer,scaleSelect:e.scaleSelect,customScaleOption:e.customScaleOption,previous:e.previous,next:e.next,zoomIn:e.zoomIn,zoomOut:e.zoomOut},this._wasLocalized=!1,this.reset(),this._bindListeners()}var e,t,n,s,r;return e=o,(t=[{key:"setPageNumber",value:function(e,t){this.pageNumber=e,this.pageLabel=t,this._updateUIState(!1)}},{key:"setPagesCount",value:function(e,t){this.pagesCount=e,this.hasPageLabels=t,this._updateUIState(!0)}},{key:"setPageScale",value:function(e,t){this.pageScaleValue=(e||t).toString(),this.pageScale=t,this._updateUIState(!1)}},{key:"reset",value:function(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=d.DEFAULT_SCALE_VALUE,this.pageScale=d.DEFAULT_SCALE,this._updateUIState(!0),this.updateLoadingIndicatorState()}},{key:"_bindListeners",value:function(){var o,r=this,e=this.items,t=e.pageNumber,e=e.scaleSelect,n=this,a=p(this.buttons);try{for(a.s();!(o=a.n()).done;)!function(){var e=o.value,t=e.element,n=e.eventName;t.addEventListener("click",function(e){null!==n&&r.eventBus.dispatch(n,{source:r})})}()}catch(e){a.e(e)}finally{a.f()}t.addEventListener("click",function(){this.select()}),t.addEventListener("change",function(){n.eventBus.dispatch("pagenumberchanged",{source:n,value:this.value})}),e.addEventListener("change",function(){"custom"!==this.value&&n.eventBus.dispatch("scalechanged",{source:n,value:this.value})}),e.oncontextmenu=d.noContextMenuHandler,this.eventBus._on("localized",function(){r._wasLocalized=!0,r._adjustScaleWidth(),r._updateUIState(!0)})}},{key:"_updateUIState",value:function(e){var t=0<arguments.length&&void 0!==e&&e,n=this.pageNumber,o=this.pagesCount,r=this.pageScaleValue,e=this.pageScale,a=this.items;t&&(this.hasPageLabels?a.pageNumber.type="text":(a.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:o},"of {{pagesCount}}").then(function(e){a.numPages.textContent=e})),a.pageNumber.max=o),this.hasPageLabels?(a.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:n,pagesCount:o},"({{pageNumber}} of {{pagesCount}})").then(function(e){a.numPages.textContent=e})):a.pageNumber.value=n,a.previous.disabled=n<=1,a.next.disabled=o<=n,a.zoomOut.disabled=e<=d.MIN_SCALE,a.zoomIn.disabled=e>=d.MAX_SCALE;var e=Math.round(1e4*e)/100,i=!1,s=p(a.scaleSelect.options);try{for(s.s();!(l=s.n()).done;){var l=l.value;l.value===r?i=l.selected=!0:l.selected=!1}}catch(e){s.e(e)}finally{s.f()}i||(a.customScaleOption.textContent=e+"%",a.customScaleOption.selected=!0)}},{key:"updateLoadingIndicatorState",value:function(e){e=0<arguments.length&&void 0!==e&&e;this.items.pageNumber.classList.toggle("visiblePageIsLoading",e)}},{key:"_adjustScaleWidth",value:(s=u.default.mark(function e(){var t,n,o,r,a,i,s,l,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.items,a=this.l10n,n=Promise.all([a.get("page_scale_auto",null,"Automatic Zoom"),a.get("page_scale_actual",null,"Actual Size"),a.get("page_scale_fit",null,"Page Fit"),a.get("page_scale_width",null,"Page Width")]),(o=document.createElement("canvas")).mozOpaque=!0,r=o.getContext("2d",{alpha:!1}),e.next=7,d.animationStarted;case 7:return i=getComputedStyle(t.scaleSelect),a=i.fontSize,i=i.fontFamily,r.font="".concat(a," ").concat(i),s=0,e.t0=p,e.next=13,n;case 13:e.t1=e.sent,l=(0,e.t0)(e.t1);try{for(l.s();!(c=l.n()).done;)c=c.value,c=r.measureText(c),c=c.width,s<c&&(s=c)}catch(e){l.e(e)}finally{l.f()}140<(s+=44)&&(t.scaleSelect.style.width="".concat(s+22,"px"),t.scaleSelectContainer.style.width="".concat(s,"px")),o.width=0,o.height=0,o=r=null;case 22:case"end":return e.stop()}},e,this)}),r=function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){l(o,t,n,r,a,"next",e)}function a(e){l(o,t,n,r,a,"throw",e)}r(void 0)})},function(){return r.apply(this,arguments)})}])&&a(e.prototype,t),n&&a(e,n),o}();t.Toolbar=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewHistory=void 0;var o,u=(o=n(2))&&o.__esModule?o:{default:o};function l(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function d(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){l(o,t,n,r,a,"next",e)}function a(e){l(o,t,n,r,a,"throw",e)}r(void 0)})}}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var _=20,r=function(){function n(e){var a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:_;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.fingerprint=e,this.cacheSize=t,this._initializedPromise=this._readFromStorage().then(function(e){var t=JSON.parse(e||"{}"),n=-1;if(Array.isArray(t.files)){for(;t.files.length>=a.cacheSize;)t.files.shift();for(var o=0,r=t.files.length;o<r;o++){if(t.files[o].fingerprint===a.fingerprint){n=o;break}}}else t.files=[];-1===n&&(n=t.files.push({fingerprint:a.fingerprint})-1),a.file=t.files[n],a.database=t})}var e,t,o,r,a,i,s,l,c;return e=n,(t=[{key:"_writeToStorage",value:(c=d(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify(this.database),localStorage.setItem("pdfjs.history",t);case 2:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"_readFromStorage",value:(l=d(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem("pdfjs.history"));case 1:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)})},{key:"set",value:(s=d(u.default.mark(function e(t,n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return this.file[t]=n,e.abrupt("return",this._writeToStorage());case 4:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"setMultiple",value:(i=d(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:for(n in t)this.file[n]=t[n];return e.abrupt("return",this._writeToStorage());case 4:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"get",value:(a=d(u.default.mark(function e(t,n){var o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return o=this.file[t],e.abrupt("return",void 0!==o?o:n);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"getMultiple",value:(r=d(u.default.mark(function e(t){var n,o,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:for(o in n=Object.create(null),t)r=this.file[o],n[o]=void 0!==r?r:t[o];return e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}])&&p(e.prototype,t),o&&p(e,o),n}();t.ViewHistory=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericCom=void 0;var o,r=(o=n(2))&&o.__esModule?o:{default:o},a=n(1),i=n(39),s=n(40),l=n(41);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function d(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){u(o,t,n,r,a,"next",e)}function a(e){u(o,t,n,r,a,"throw",e)}r(void 0)})}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=b(n);return e=o?(e=b(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==c(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.GenericCom={};var v=function(){f(o,i.BasePreferences);var t,n,e=h(o);function o(){return p(this,o),e.apply(this,arguments)}return m(o,[{key:"_writeToStorage",value:(n=d(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("pdfjs.preferences",JSON.stringify(t));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"_readFromStorage",value:(t=d(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(localStorage.getItem("pdfjs.preferences")));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),o}(),t=function(){f(t,a.DefaultExternalServices);var e=h(t);function t(){return p(this,t),e.apply(this,arguments)}return m(t,null,[{key:"createDownloadManager",value:function(e){return new s.DownloadManager(e)}},{key:"createPreferences",value:function(){return new v}},{key:"createL10n",value:function(e){e=e.locale,e=void 0===e?"en-US":e;return new l.GenericL10n(e)}}]),t}();a.PDFViewerApplication.externalServices=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePreferences=void 0;var o,u=(o=n(2))&&o.__esModule?o:{default:o};n(6);function l(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function d(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){l(o,t,n,r,a,"next",e)}function a(e){l(o,t,n,r,a,"throw",e)}r(void 0)})}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m=null;var r=function(){function e(){var r=this;if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constructor===e)throw new Error("Cannot initialize BasePreferences.");this.prefs=null,this._initializedPromise=(m=m||Promise.resolve({cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!1,enableWebGL:!1,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,pdfBugEnabled:!1,renderer:"canvas",renderInteractiveForms:!0,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1})).then(function(e){return Object.defineProperty(r,"defaults",{value:Object.freeze(e),writable:!1,enumerable:!0,configurable:!1}),r.prefs=Object.assign(Object.create(null),e),r._readFromStorage(e)}).then(function(e){if(e)for(var t in e){var n=r.defaults[t],o=e[t];void 0!==n&&p(o)===p(n)&&(r.prefs[t]=o)}})}var t,n,o,r,a,i,s,l,c;return t=e,(n=[{key:"_writeToStorage",value:(c=d(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented: _writeToStorage");case 1:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"_readFromStorage",value:(l=d(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented: _readFromStorage");case 1:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)})},{key:"reset",value:(s=d(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return this.prefs=Object.assign(Object.create(null),this.defaults),e.abrupt("return",this._writeToStorage(this.defaults));case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"set",value:(i=d(u.default.mark(function e(t,n){var o,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:if(void 0===(o=this.defaults[t]))throw new Error('Set preference: "'.concat(t,'" is undefined.'));e.next=7;break;case 7:if(void 0===n)throw new Error("Set preference: no value is specified.");e.next=9;break;case 9:if(r=p(n),a=p(o),r===a){e.next=19;break}if("number"!==r||"string"!==a){e.next=16;break}n=n.toString(),e.next=17;break;case 16:throw new Error('Set preference: "'.concat(n,'" is a ').concat(r,", ")+"expected a ".concat(a,"."));case 17:e.next=21;break;case 19:if("number"!==r||Number.isInteger(n)){e.next=21;break}throw new Error('Set preference: "'.concat(n,'" must be an integer.'));case 21:return this.prefs[t]=n,e.abrupt("return",this._writeToStorage(this.prefs));case 23:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"get",value:(a=d(u.default.mark(function e(t){var n,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:if(void 0===(n=this.defaults[t]))throw new Error('Get preference: "'.concat(t,'" is undefined.'));e.next=7;break;case 7:if(void 0!==(o=this.prefs[t]))return e.abrupt("return",o);e.next=10;break;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getAll",value:(r=d(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return e.abrupt("return",Object.assign(Object.create(null),this.defaults,this.prefs));case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}])&&_(t.prototype,n),o&&_(t,o),e}();t.BasePreferences=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadManager=void 0;var r=n(8),a=n(7);function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){var n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=e,n.target="_parent","download"in n&&(n.download=t),(document.body||document.documentElement).appendChild(n),n.click(),n.remove()}n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"downloadUrl",value:function(e,t){(0,r.createValidAbsoluteUrl)(e,"http://example.com")&&s(e+"#pdfjs.action=download",t)}},{key:"downloadData",value:function(e,t,n){navigator.msSaveBlob?navigator.msSaveBlob(new Blob([e],{type:n}),t):s((0,r.createObjectURL)(e,n,a.viewerCompatibilityParams.disableCreateObjectURL),t)}},{key:"download",value:function(e,t,n){navigator.msSaveBlob?navigator.msSaveBlob(e,n)||this.downloadUrl(t,n):a.viewerCompatibilityParams.disableCreateObjectURL?this.downloadUrl(t,n):s(URL.createObjectURL(e),n)}}])&&i(t.prototype,n),o&&i(t,o),e}();t.DownloadManager=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericL10n=void 0;var o,l=(o=n(2))&&o.__esModule?o:{default:o};function c(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function u(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){c(o,t,n,r,a,"next",e)}function a(e){c(o,t,n,r,a,"throw",e)}r(void 0)})}}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(42);var p=document.webL10n,r=function(){function e(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=n,this._ready=new Promise(function(e,t){p.setLanguage(n,function(){e(p)})})}var t,n,o,r,a,i,s;return t=e,(n=[{key:"getLanguage",value:(s=u(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return t=e.sent,e.abrupt("return",t.getLanguage());case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"getDirection",value:(i=u(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return t=e.sent,e.abrupt("return",t.getDirection());case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"get",value:(a=u(l.default.mark(function e(t,n,o){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return r=e.sent,e.abrupt("return",r.get(t,n,o));case 4:case"end":return e.stop()}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"translate",value:(r=u(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return n=e.sent,e.abrupt("return",n.translate(t));case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}])&&d(t.prototype,n),o&&d(t,o),e}();t.GenericL10n=r},function(e,t,n){"use strict";function b(e,t,n){t=t||function(){},n=n||function(){};var o=new XMLHttpRequest;o.open("GET",e,i),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=utf-8"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0===o.status?t(o.responseText):n())},o.onerror=n,o.ontimeout=n;try{o.send(null)}catch(e){n()}}function p(e,g,r,t){var h=e.replace(/[^\/]*$/,"")||"./";function n(e,t){var c={},u=/^\s*|\s*$/,d=/^\s*#|^\s*$/,p=/^\s*\[(.*)\]\s*$/,_=/^\s*@import\s+url\((.*)\)\s*$/i,m=/^([^=\s]*)\s*=\s*(.+)$/;function f(e,n,o){var r=e.replace(u,"").split(/[\r\n]+/),a="*",i=g.split("-",1)[0],s=!1,l="";!function e(){for(;;){if(!r.length)return void o();var t=r.shift();if(!d.test(t)){if(n){if(l=p.exec(t)){a=l[1].toLowerCase(),s="*"!==a&&a!==g&&a!==i;continue}if(s)continue;if(l=_.exec(t))return void function(e,t){b(e,function(e){f(e,!1,t)},function(){t()})}(h+l[1],e)}(t=t.match(m))&&3==t.length&&(c[t[1]]=(t=t[2]).lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'"))}}}()}f(e,!0,function(){t(c)})}b(e,function(e){f+=e,n(e,function(e){for(var t in e){var n,o=t.lastIndexOf("."),o=0<o?(n=t.substring(0,o),t.substring(o+1)):(n=t,c);m[n]||(m[n]={}),m[n][o]=e[t]}r&&r()})},t)}function o(e,t){e=e&&e.toLowerCase(),t=t||function(){},m={},g=f="",g=e;var n=_.querySelectorAll('link[type="application/l10n"]'),o=n.length;if(0!==o)for(var r,a=0,i=function(){o<=++a&&(t(),h="complete")},s=0;s<o;s++){new d(n[s]).load(e,i)}else{var l=(r=_.querySelector('script[type="application/l10n"]'))?JSON.parse(r.innerHTML):null;if(l&&l.locales&&l.default_locale){if(!(m=l.locales[e])){var c,u=l.default_locale.toLowerCase();for(c in l.locales){if((c=c.toLowerCase())===e){m=l.locales[e];break}c===u&&(m=l.locales[u])}}t()}h="complete"}function d(e){var n=e.href;this.load=function(e,t){p(n,e,t,function(){g="",t()})}}}function l(e,t,n){var o=m[e];if(!o){if(!n)return null;o=n}var r,a={};for(r in o){var i=o[r];i=function(e,n){return e.replace(/\{\{\s*(.+?)\s*\}\}/g,function(e,t){return n&&t in n?n[t]:t in m?m[t]:e})}(i=function(e,t,n,o){var r=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(e);if(!r||!r.length)return e;var a,i=r[1],r=r[2];t&&r in t?a=t[r]:r in m&&(a=m[r]);{i in u&&(i=u[i],e=i(e,a,n,o))}return e}(i,t,e,r),t),a[r]=i}return a}function a(e){var t=function(e){if(!e)return{};var t=e.getAttribute("data-l10n-id"),n=e.getAttribute("data-l10n-args"),o={};if(n)try{o=JSON.parse(n)}catch(e){}return{id:t,args:o}}(e);if(t.id){var n=l(t.id,t.args);if(n){if(n[c]){if(0===function(e){if(e.children)return e.children.length;if(void 0!==e.childElementCount)return e.childElementCount;for(var t=0,n=0;n<e.childNodes.length;n++)t+=1===e.nodeType?1:0;return t}(e))e[c]=n[c];else{for(var o=e.childNodes,r=!1,a=0,i=o.length;a<i;a++)3===o[a].nodeType&&/\S/.test(o[a].nodeValue)&&(r?o[a].nodeValue="":(o[a].nodeValue=n[c],r=!0));r||(t=_.createTextNode(n[c]),e.insertBefore(t,e.firstChild))}delete n[c]}for(var s in n)e[s]=n[s]}}}var r,_,m,f,c,g,u,h,i;document.webL10n=(r=window,_=document,m={},c="textContent",h="loading",i=!(g=f=""),(u={}).plural=function(e,t,n,o){var r=parseFloat(t);if(isNaN(r))return e;if(o!=c)return e;function a(e,t){return-1!==t.indexOf(e)}function i(e,t,n){return t<=e&&e<=n}u._pluralRules||(u._pluralRules=(t={0:function(){return"other"},1:function(e){return i(e%100,3,10)?"few":0===e?"zero":i(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function(e){return 0!==e&&e%10==0?"many":2==e?"two":1==e?"one":"other"},3:function(e){return 1==e?"one":"other"},4:function(e){return i(e,0,1)?"one":"other"},5:function(e){return i(e,0,2)&&2!=e?"one":"other"},6:function(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return 2==e?"two":1==e?"one":"other"},8:function(e){return i(e,3,6)?"few":i(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function(e){return 0===e||1!=e&&i(e%100,1,19)?"few":1==e?"one":"other"},10:function(e){return i(e%10,2,9)&&!i(e%100,11,19)?"few":e%10!=1||i(e%100,11,19)?"other":"one"},11:function(e){return i(e%10,2,4)&&!i(e%100,12,14)?"few":e%10==0||i(e%10,5,9)||i(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return i(e,2,4)?"few":1==e?"one":"other"},13:function(e){return i(e%10,2,4)&&!i(e%100,12,14)?"few":1!=e&&i(e%10,0,1)||i(e%10,5,9)||i(e%100,12,14)?"many":1==e?"one":"other"},14:function(e){return i(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return 0===e||i(e%100,2,10)?"few":i(e%100,11,19)?"many":1==e?"one":"other"},16:function(e){return e%10==1&&11!=e?"one":"other"},17:function(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function(e){return 0===e?"zero":i(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function(e){return i(e,2,10)?"few":i(e,0,1)?"one":"other"},20:function(e){return!i(e%10,3,4)&&e%10!=9||i(e%100,10,19)||i(e%100,70,79)||i(e%100,90,99)?e%1e6==0&&0!==e?"many":e%10!=2||a(e%100,[12,72,92])?e%10!=1||a(e%100,[11,71,91])?"other":"one":"two":"few"},21:function(e){return 0===e?"zero":1==e?"one":"other"},22:function(e){return i(e,0,1)||i(e,11,99)?"one":"other"},23:function(e){return i(e%10,1,2)||e%20==0?"one":"other"},24:function(e){return i(e,3,10)||i(e,13,19)?"few":a(e,[2,12])?"two":a(e,[1,11])?"one":"other"}},(s={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[(s=g).replace(/-.*$/,"")])in t?t[s]:function(){return"other"}));var s="["+u._pluralRules(r)+"]";return 0===r&&n+"[zero]"in m?e=m[n+"[zero]"][o]:1==r&&n+"[one]"in m?e=m[n+"[one]"][o]:2==r&&n+"[two]"in m?e=m[n+"[two]"][o]:n+s in m?e=m[n+s][o]:n+"[other]"in m&&(e=m[n+"[other]"][o]),e},{get:function(e,t,n){var o=e.lastIndexOf("."),r=c;0<o&&(r=e.substring(o+1),e=e.substring(0,o)),n&&((a={})[r]=n);var a=l(e,t,a);return a&&r in a?a[r]:"{{"+e+"}}"},getData:function(){return m},getText:function(){return f},getLanguage:function(){return g},setLanguage:function(e,t){o(e,function(){t&&t()})},getDirection:function(){var e=g.split("-",1)[0];return 0<=["ar","he","fa","ps","ur"].indexOf(e)?"rtl":"ltr"},translate:function(e){e=e||_.documentElement;for(var t,n=(t=e)?t.querySelectorAll("*[data-l10n-id]"):[],o=n.length,r=0;r<o;r++)a(n[r]);a(e)},getReadyState:function(){return h},ready:function(t){t&&("complete"==h||"interactive"==h?r.setTimeout(function(){t()}):_.addEventListener&&_.addEventListener("localized",function e(){_.removeEventListener("localized",e),t()}))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPrintService=i;var u=n(5),o=n(1),r=n(7),d=null,a=null;function i(e,t,n,o){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,a=5<arguments.length?arguments[5]:void 0;this.pdfDocument=e,this.pagesOverview=t,this.printContainer=n,this._printResolution=o||150,this._optionalContentConfigPromise=r||e.getOptionalContentConfig(),this.l10n=a||u.NullL10n,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}i.prototype={layout:function(){this.throwIfInactive();var e=document.querySelector("body");e.setAttribute("data-pdfjsprinting",!0);this.pagesOverview.every(function(e){return e.width===this.pagesOverview[0].width&&e.height===this.pagesOverview[0].height},this);this.pageStyleSheet=document.createElement("style");var t=this.pagesOverview[0];this.pageStyleSheet.textContent="@supports ((size:A4) and (size:1pt 1pt)) {@page { size: "+t.width+"pt "+t.height+"pt;}}",e.appendChild(this.pageStyleSheet)},destroy:function(){d===this&&(this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,d=null,m().then(function(){"printServiceOverlay"===a.active&&a.close("printServiceOverlay")}))},renderPages:function(){var r=this,a=this.pagesOverview.length;return new Promise(function e(t,n){if(r.throwIfInactive(),++r.currentPage>=a)return _(a,a,r.l10n),void t();var o=r.currentPage;_(o,a,r.l10n),function(n,e,o,t,r){var a=d.scratchCanvas,i=t/72;a.width=Math.floor(o.width*i),a.height=Math.floor(o.height*i);var s=Math.floor(o.width*u.CSS_UNITS)+"px",l=Math.floor(o.height*u.CSS_UNITS)+"px",c=a.getContext("2d");return c.save(),c.fillStyle="rgb(255, 255, 255)",c.fillRect(0,0,a.width,a.height),c.restore(),n.getPage(e).then(function(e){var t={canvasContext:c,transform:[i,0,0,i,0,0],viewport:e.getViewport({scale:1,rotation:o.rotation}),intent:"print",annotationStorage:n.annotationStorage,optionalContentConfigPromise:r};return e.render(t).promise}).then(function(){return{width:s,height:l}})}(r.pdfDocument,o+1,r.pagesOverview[o],r._printResolution,r._optionalContentConfigPromise).then(r.useRenderedPage.bind(r)).then(function(){e(t,n)},n)})},useRenderedPage:function(e){this.throwIfInactive();var n=document.createElement("img");n.style.width=e.width,n.style.height=e.height;e=this.scratchCanvas;"toBlob"in e&&!r.viewerCompatibilityParams.disableCreateObjectURL?e.toBlob(function(e){n.src=URL.createObjectURL(e)}):n.src=e.toDataURL();e=document.createElement("div");return e.appendChild(n),this.printContainer.appendChild(e),new Promise(function(e,t){n.onload=e,n.onerror=t})},performPrint:function(){var t=this;return this.throwIfInactive(),new Promise(function(e){setTimeout(function(){t.active?(l.call(window),setTimeout(e,20)):e()},0)})},get active(){return this===d},throwIfInactive:function(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};var s,l=window.print;function c(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,"custom"),window.dispatchEvent(t)}function p(){d&&(d.destroy(),c("afterprint"))}function _(e,t,n){var o=document.getElementById("printServiceOverlay"),e=Math.round(100*e/t),t=o.querySelector("progress"),r=o.querySelector(".relative-progress");t.value=e,n.get("print_progress_percent",{progress:e},e+"%").then(function(e){r.textContent=e})}function m(){if(!s){if(!(a=o.PDFViewerApplication.overlayManager))throw new Error("The overlay manager has not yet been initialized.");s=a.register("printServiceOverlay",document.getElementById("printServiceOverlay"),p,!0),document.getElementById("printCancel").onclick=p}return s}window.print=function(){if(!d){m().then(function(){d&&a.open("printServiceOverlay")});try{c("beforeprint")}finally{if(!d)return void m().then(function(){"printServiceOverlay"===a.active&&a.close("printServiceOverlay")});var e=d;d.renderPages().then(function(){return e.performPrint()}).catch(function(){}).then(function(){e.active&&p()})}}},window.addEventListener("keydown",function(e){80!==e.keyCode||!e.ctrlKey&&!e.metaKey||e.altKey||e.shiftKey&&!window.chrome&&!window.opera||(window.print(),e.preventDefault(),e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation())},!0),"onbeforeprint"in window&&(n=function(e){"custom"!==e.detail&&e.stopImmediatePropagation&&e.stopImmediatePropagation()},window.addEventListener("beforeprint",n),window.addEventListener("afterprint",n)),o.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService:function(e,t,n,o,r,a){if(d)throw new Error("The print service is created and active.");return d=new i(e,t,n,o,r,a)}}}]),angular.module("lu").animation(".progress-animation",function(){return{addClass:function(e,t,n){"progress-animate"===t&&(e.css("width",e.attr("progress-width")),n())},removeClass:function(e,t,n){"progress-animate"===t&&(e.css("width","0px"),n())}}}),function(){"use strict";function e(t,e,n,o,r,a,i){t.lupHelper=n,t.submitSearch=function(e){e.$setValidity("search",!!t.search&&t.search.trim().length>=n.inputFields.min_search_length),e.$valid&&o.close({search:t.search,advancedSearch:t.advancedSearch})},t.cancel=function(){o.dismiss()},t.search=r,t.advancedSearch=a,t.advancedSearchInfo=i,t.alwaysFocused=!0}angular.module("lu").controller("AdvancedSearch",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance","search","advancedSearch","advancedSearchInfo"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){}angular.module("lu").controller("BasePageController",e),e.$inject=["$scope","$http","$sce","$window","EnrollmentHelper","LupHelper","AssignmentAnswerFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this;l.cancel=function(){n.close()},l.save=function(){l.image?o.getData(l.imageType,function(t){r(function(){var e=t.data.signature_data.attributes;o.uploadFiles(l.image,e,function(e){e=(new DOMParser).parseFromString(e.data,"text/xml").getElementsByTagName("Location")[0].childNodes[0].nodeValue;n.close({action:"save",image_url:e,ckeditorInstance:l.ckeditorInstance})},function(e){n.close({})})})},function(e){n.close({})},{params:{resource_id:l.resource_id}}):n.close()},l.lupHelper=t,l.setImage=function(e){angular.isObject(e)&&(angular.equals(l.image,e)||(l.image=e))},l.resource_id=a,l.ckeditorInstance=i,l.imageType=s}angular.module("lu").controller("CKEditorUploadImageController",e),e.$inject=["$scope","LupHelper","$modalInstance","s3HelperFactory","$timeout","resource_id","ckeditorInstance","imageType"]}(),function(){"use strict";function e(t,e,n,o,r,a){e.get();t.confirmAccount=function(){var e={};e.params={do_the_confirmation:!0,cs:!0,confirmation_token:t.confirmationToken},t.nc&&(e.params.nc=t.nc);r({url:"/users/confirmation.json",method:"POST",params:e.params}).then(function(e){e.data.url_for_redirect&&(a.location=e.data.url_for_redirect)},function(e){e.data.url_for_redirect&&(a.location=e.data.url_for_redirect)})},t.LupHelper=n}angular.module("lu").controller("ConfirmAccountController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","$http","$window"]}(),function(){"use strict";function e(e,n,t,o,r,a){var i=this;i.helper=t,a.showMessage=!0,i.dismissFlashMsg=function(e){n.put("/flash_messages/:message_id/dismiss.json".replace(/:message_id/,e),null).success(function(e){a.showMessage=!1})},i.questionsId=null,i.survey=null,e.setQuestions=function(e){var t;e=e,t=r.defer(),n.get("/flash_messages/"+e+"/questions.json").success(function(e){t.resolve(e)}).error(function(){t.reject("Failed to get survey.")}),t.promise.then(function(e){var t;i.questionsId=e,e=i.questionsId,t=r.defer(),n.get("/in_app_survey_questions_list.json",{params:{questions_id:e}}).success(function(e){t.resolve(e)}).error(function(){t.reject("Failed to get in-app survey questions.")}),t.promise.then(function(e){i.survey=e})})},e.openInAppSurveyModal=function(e){o.open({templateUrl:"/tc/in_app_survey_questions/survey_questions.html",backdrop:"static",keyboard:!1,controller:"InAppSurveyQuestionsShowController",size:"md",resolve:{survey:function(){return e},questionsId:function(){return i.questionsId},resource:function(){return"Success"}}}).result.then(function(e){a.showMessage=e})}}angular.module("lu").controller("FlashMessagesController",e),e.$inject=["$scope","$http","LupHelper","$modal","$q","$rootScope"]}(),function(){"use strict";function e(t,n,o,e,r,a,i){t.helper=e,t.showLanguageOptions=function(e){e.preventDefault(),o.open({templateUrl:"/tc/set_language_modal.html",controller:"SetLanguageController",size:"sm"})},t.switchView=function(e){i.location=e},t.hasFocus=function(){i.scrollTo(0,0)},t.navOpeneMobile=!1,t.navHovered=!1,n.navOpened=!0;var s=document.getElementById("flash-msg"),l=document.getElementById("admin-nav"),c=document.getElementById("mainHeader").offsetHeight,u=document.getElementById("adminMobileNav"),d=0,p=0,_=0,m=1;t.scrollTo=function(e,t){setTimeout(function(){i.scrollTo(i.scrollX,i.scrollY-t)},1),n.$broadcast("focusarea")},t.getNavOpened=function(){t.localStorage=localStorage.getItem("navOpen"),t.localStorage?n.navOpened=JSON.parse(t.localStorage):i.localStorage.setItem("navOpen",n.navOpened)},t.changeNavPositonOnMobile=function(){var e;i.innerWidth<=480&&(e=i.pageYOffset||document.documentElement.scrollTop,c<e&&(e<=p?t.doOnScroll(e,_,u):t.doOnScroll(e,m,u)),0===e&&t.removeScrollClasses(u),p=e),new ResizeObserver(function(e){var t=e[0].contentRect,e=t.top,t=t.bottom;u.style.top=80+e+t+"px"}).observe(s)},t.doOnScroll=function(e,t,n){t==m?(n.classList.remove("scroll-up"),n.classList.add("scroll-down")):t==_&&(n.classList.remove("scroll-down"),n.classList.add("scroll-up"),i.pageYOffset==c?n.classList.remove("breadcrumb-bg"):n.classList.add("breadcrumb-bg"))},t.removeScrollClasses=function(e){e.classList.remove("scroll-up"),e.classList.remove("scroll-down")},t.trackScrollPosition=function(){var e=i.pageYOffset||document.documentElement.scrollTop;c<e&&(e<=d?t.doOnScroll(e,_,l):t.doOnScroll(e,m,l)),0===e&&t.removeScrollClasses(l),d=e},t.changeNavPositon=function(){s&&(i.addEventListener("scroll",t.trackScrollPosition),i.addEventListener("load",t.changeNavPositonOnMobile),i.addEventListener("resize",t.changeNavPositonOnMobile),i.addEventListener("scroll",t.changeNavPositonOnMobile),t.changeNavPositonOnMobile(),new ResizeObserver(function(e){var t=e[0].contentRect,e=t.top,t=t.bottom;l.style.top=80+e+t+"px"}).observe(s))},t.changeNavPositon(),t.getNavOpened(),t.toggleClass=function(){n.navOpened=!n.navOpened,i.localStorage.setItem("navOpen",n.navOpened)},t.toggleClassMobile=function(){t.navOpeneMobile=!t.navOpeneMobile}}angular.module("lu").controller("HeaderController",e),e.$inject=["$scope","$rootScope","$modal","LupHelper","$location","$anchorScroll","$window"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this;l.cancel=function(){n.close()},l.save=function(){l.blobImage&&l.croppedData&&(l.blobImage.name=l.image.name,n.close({image_for_upload:l.blobImage,image_for_preview:l.croppedData,alt_tag:l.altTag}))},l.lupHelper=t,l.setImage=function(e){angular.isObject(e)&&(angular.equals(l.image,e)||(l.image=e))},l.image=a,l.imageType=a.type?a.type:"image/jpeg",l.cropperAspectRatio=i,l.cropperImageSize=s,l.altTag=null,l.uiCropperTimeout=t.uiCropperConfig.uploadTimeout,l.loadDone=!0,l.onLoadBegin=function(){setTimeout(function(){l.loadDone=!1,e.$digest()},l.uiCropperTimeout)}}angular.module("lu").controller("ImageCropController",e),e.$inject=["$scope","LupHelper","$modalInstance","s3HelperFactory","$timeout","image","cropperAspectRatio","cropperImageSize"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){o=o.get();t.segment=o.segment.attributes,t.authToken=o.auth_token}window.angular.module("lu").controller("IosDocumentViewer",e),e.$inject=["$rootScope","$scope","LupHelper","StorageFactory","$window","$timeout","$modal"]}(),function(){"use strict";function e(e,t,n){e.showLatestNews=!0,e.hidaLatestNews=function(){e.showLatestNews=!1,(new n).hideLatestNews()}}angular.module("lu").controller("LatestNewsController",e),e.$inject=["$scope","$rootScope","UsersFactory"]}(),function(){"use strict";function e(t,n,e,o,r,a,i,s,l,c,u){var d=new i,p=new e;function _(){n.cancel(t.timeoutPromise),o.close()}function m(){var e={hideSpinner:!0};return e.url="/download_jobs/"+t.job.job_reference+"/status.json",p.get("download_jobs",e,t.job.job_reference).then(function(){t.job=p.data.job,t.job.status_id!==s.lupJobStatuses.completed&&(t.timeoutPromise=n(function(){m()},2e3))})}t.typeId=a.typeId,t.opts=a,t.LupHelper=s,t.cancel=_,t.timeoutPromise=null,t.job={},o.result.finally(function(){n.cancel(t.timeoutPromise)}),t.jobData=t.typeId==s.lupJobTypes.downloadTrainingHistory?{title:s.showMessage("lup.users.user_actions.download_history"),disclaimer:null}:t.typeId==s.lupJobTypes.downloadCertificate?{title:s.showMessage("lup.jobs.download_certificate"),disclaimer:null}:t.typeId==s.lupJobTypes.exportCoursesToExcel||t.typeId==s.lupJobTypes.exportUsersToExcel||t.typeId==s.lupJobTypes.exportGroupsToExcel?{title:s.showMessage("reports.csv_export"),disclaimer:null}:t.typeId==s.lupJobTypes.exportAllCourseReviews?{title:s.showMessage("reports.course_review_ratings_export.page_action"),disclaimer:null}:t.typeId==s.lupJobTypes.exportSignedEsignatureModules||t.typeId==s.lupJobTypes.exportResourcesToExcel||t.typeId==s.lupJobTypes.exportInvitesToExcel||t.typeId==s.lupJobTypes.exportPendingEnrollmentsToExcel?{title:s.showMessage("reports.csv_export"),disclaimer:null}:t.typeId==s.lupJobTypes.exportReport?{title:s.showMessage("lup.reports.report_download"),disclaimer:s.showMessage("lup.reports.lup_job_disclaimer")}:t.typeId==s.lupJobTypes.downloadExamResults?{title:s.showMessage("lup.exams.download_pdf"),disclaimer:null}:t.typeId==s.lupJobTypes.downloadAssignment?{title:u.getWebcomponentsFlag()?s.showMessage("billing.download_pdf"):s.showMessage("dashboard.download_your_assignment_feedback"),disclaimer:null}:t.typeId==s.lupJobTypes.createSalesforceUsers?{title:s.showMessage("lup.salesforce.create_users"),disclaimer:null}:t.typeId==s.lupJobTypes.exportExam||t.typeId==s.lupJobTypes.exportQuestionPool||t.typeId==s.lupJobTypes.exportCourseReviews?{title:s.showMessage("reports.csv_export"),disclaimer:null}:{title:"",disclaimer:null},t.downloadFile=function(e){var t;e&&((t=document.createElement("a")).href=e,t.download=e,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),document.querySelector("luds-modal").close(),_())},t.jobCompletedMessage=function(e){return t.typeId==s.lupJobTypes.downloadCertificate?s.showMessage("batchuserimports.great_successful_download",{url_for_download:e}):s.showMessage("lup_jobs.successful_download",{url_for_download:e})},t.typeId==s.lupJobTypes.exportReport&&t.opts.jobCode?(t.job={job_reference:t.opts.jobCode},m()):d.create(t.opts).then(function(){t.job=d.data.job,m()})}window.angular.module("lu").controller("LupJobController",e),e.$inject=["$scope","$timeout","learnUponApi","$modalInstance","$http","opts","LupJobFactory","LupHelper","$filter","$window","LuaFactory"]}(),function(){"use strict";function e(e,t,n,o){var r=this;r.actionsCount=0,r.increaseCount=function(){r.actionsCount++},r.rootScope=t,r.rootScope.showGoToTop=!1,r.LupHelper=n,r.ddmOppened=!1,r.toggled=function(e){r.ddmOppened=!0===e},r.navigateToUrl=function(e){o.location.href=e},e.$on("hideAction",function(e,t,n){r[t]=n})}angular.module("lu").controller("MainNavController",e),e.$inject=["$scope","$rootScope","LupHelper","$window"]}(),function(){"use strict";function e(e,n,t,o,r,a,i){var s=this;s.client="",s.clients=[],s.LupHelper=i;var l,c=s.LupHelper.search.waitTime;s.ddmOppened=!1,s.toggled=function(e){!0===e?function(){s.ddmOppened=!0,s.ddmPrevouslyOpened=!0,n.myPortals?s.clients=n.myPortals:d();u.addClass("hide-body-scroll")}():(s.ddmOppened=!1,u.removeClass("hide-body-scroll"),1==s.ddmPrevouslyOpened&&angular.element(".pjbtn").focus())},s.openPortal=function(e){e&&(r.location.href=e)},s.loadMore=d,s.search=p,s.closeDropdown=function(){e.$broadcast("$locationChangeSuccess")},s.onSearchChange=function(){l&&a.cancel(l);l=a(function(){p(),l=null},c)},s.a11yClientAria=function(e,t){if(e&&t)return s.LupHelper.showMessage("licensez.client_name")+" "+e.title+"("+(t+1)+" of "+s.clients.length+")"},s.ddmPrevouslyOpened=!1,s.keyParser=function(e,t){e=i.keyboard_keys[e.keyCode];"enter"!=e&&"space"!=e||s.LupHelper.openUrl(t)},s.searchParam="",s.currentPage=0,s.hasMore=!0;var u=angular.element(t[0].body);function d(t){s.hasMore&&(s.currentPage++,s.isLoading=!0,o.getAll({page:s.currentPage,search:s.searchParam}).then(function(e){t&&(s.clients.length=0),e.data.clients&&(!1===e.data.clients.meta.next_page&&(s.hasMore=!1),angular.forEach(e.data.clients.data,function(e,t){s.clients.push(e)})),n.myPortals=s.clients,a(function(){s.isLoading=!1},1e3)}))}function p(){s.currentPage=0,s.hasMore=!0,d(!0)}}angular.module("lu").controller("PortalJumperController",e),e.$inject=["$scope","$rootScope","$document","portalJumperFactory","$window","$timeout","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=new r;t.availableLanguages=e.available_languages,t.Helper=o,t.setLanguage=function(e){n.close();var t={data:{}};t.data.lang=e,i.updatePortalLanguage(t).then(function(){a.location.reload()})},t.flagUrl=function(e){return"/images/new_flags/"+e+".png"},t.displayLanguageName=function(e){return o.showMessage("locales."+e)}}window.angular.module("lu").controller("SetLanguageController",e),e.$inject=["$rootScope","$scope","$modalInstance","LupHelper","UsersFactory","$window"]}(),function(){"use strict";function e(e,t,o,r){var a=this;function i(e){e&&t.open(e,"_blank")}a.supportPage=i,a.accessZendesk=function(n){a.email=n,r.get("/support/confirmed_for_access.json").then(function(e){var t;e.data.data?i("/support"):(t=n,o.open({templateUrl:"/tc/support/email-verification-required-modal.html",controller:"EmailVerificationRequiredModalController",controllerAs:"vm",windowClass:"modal-box",resolve:{email:function(){return t}}}))})}}angular.module("lu").controller("SupportNavigationController",e),e.$inject=["$scope","$window","$modal","$http"]}(),function(){"use strict";function e(n,o,r,e){o.LupHelper=e,o.params={document_format:"pdf"},o.date={to_date:null,from_date:null,placeholder:e.getDatePlaceholder(n.dateFormat)},o.cancel=function(){r.close()},o.startDownload=function(){{var e,t;"csv"===o.params.document_format&&(e=o.date.to_date,(t=o.date.from_date)&&(o.params.from_date=t),e&&(o.params.to_date=e))}n.$broadcast("downloadTrainingHistory",o.params),r.close()}}window.angular.module("lu").controller("TrainingHistoryExportController",e),e.$inject=["$rootScope","$scope","$modalInstance","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;i.helper=n,i.ddmOppened=!1,i.toggled=function(e){!0===e?(i.ddmOppened=!0,i.ddmPrevouslyOpened=!0):(i.ddmOppened=!1,1==i.ddmPrevouslyOpened&&angular.element(".js-focus").focus())},i.ddmPrevouslyOpened=!1,i.accessSupportDesk=function(n){i.email=n,o.get("/support/confirmed_for_access.json").then(function(e){var t;e.data.data?(e="/support")&&a.open(e,"_blank"):(t=n,r.open({templateUrl:"/tc/support/email-verification-required-modal.html",controller:"EmailVerificationRequiredModalController",controllerAs:"vm",windowClass:"modal-box",resolve:{email:function(){return t}}}))})},i.clearLocalStorage=function(){a.localStorage.removeItem("navOpen"),a.localStorage.removeItem("luStickyFilters")}}angular.module("lu").controller("UserMenuController",e),e.$inject=["$scope","$rootScope","LupHelper","$http","$modal","$window"]}(),window.angular.module("lu").controller("UsersListController",["$scope","StorageFactory",function(t,e){t.users=e.get("users"),t.reverse=0,t.spotlightTriggered=!1,t.unenroll=function(e){t.users.splice(e,1)}}]),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l,c=new t;e.opts=r,e.LupHelper=a,e.cancel=function(){n.close()},e.credits=null,(l={hideSpinner:!0}).url="/enrollments/"+r.enrollment_id+"/view_credits/"+r.user_id+".json?for_course="+r.for_course,c.get("enrollments",l,null).then(function(){e.credits=c.data.earned_credits,e.credits||(e.credits=[])})}window.angular.module("lu").controller("ViewCreditsController",e),e.$inject=["$scope","learnUponApi","$modalInstance","$http","opts","LupHelper","$filter","$window"]}(),function(){"use strict";angular.module("lu").directive("infiniteScroll",["$timeout",function(c){return{link:function(t,n,e){var o=e.scrollThreshold||50,r=e.timeThreshold||400,a=t.$eval(e.infiniteScroll),i=null,s=9999,l=t.$eval(e.infiniteScrollEvent),o=parseInt(o,10),r=parseInt(r,10);a&&angular.isFunction(a)||(a=angular.noop),n.bind("scroll",function(){var e=n[0].scrollHeight-(n[0].clientHeight+n[0].scrollTop);e<o&&e-s<0&&(null!==i&&c.cancel(i),i=c(function(){a(),l&&t.$emit(l),i=null},r)),s=e})}}}])}(),function(){"use strict";function e(a,i,s){return{compile:function(e){return e.addClass("ng-binding"),function(t,n,o){n.data("$binding",o.bindHtmlCompile);var r=i(o.bindHtmlCompile);t.$watch(function(){return(r(t)||"").toString()},function(){var e;angular.isDefined(o.allowExpressions)||angular.isDefined(o.trust)?(e=angular.isDefined(o.trust)?a.trustAsHtml(r(t)).toString():a.getTrustedHtml(r(t)),e=e||"",e=angular.isString(e)?e.replace(/&#x7b;&#x7b;/g,"&#8203;{&#8203;{").replace(/{{/g,"&#8203;{&#8203;{").replace(/&#x7d;&#x7d;/g,"&#8203;}&#8203;}").replace(/}}/g,"&#8203;}&#8203;}").replace(/\[lu-ex-b]/g,"{{").replace(/\[lu-ex-e]/g,"}}"):"",n.html(e),e=t,o.bindHtmlScope&&(e=t.$eval(o.bindHtmlScope)),s(n.contents())(e)):n.html(a.getTrustedHtml(r(t))||"")})}}}}angular.module("lu").directive("bindHtmlCompile",e),e.$inject=["$sce","$parse","$compile"]}(),function(){"use strict";var e=angular.module("lu.pdfjs",[]);e.provider("pdfjsViewerConfig",function(){var t={workerSrc:null,cmapDir:null,imageResourcesPath:null,disableWorker:!1,verbosity:null};this.setWorkerSrc=function(e){t.workerSrc=e},this.setCmapDir=function(e){t.cmapDir=e},this.setImageDir=function(e){t.imageDir=e},this.disableWorker=function(e){void 0===e&&(e=!0),t.disableWorker=e},this.setVerbosity=function(e){t.verbosity=e},this.$get=function(){return t}}),e.run(["pdfjsViewerConfig",function(e){var t;e.workerSrc&&(pdfjsLib.GlobalWorkerOptions.workerSrc=e.workerSrc),e.cmapDir&&(pdfjsLib.cMapUrl=e.cmapDir),e.imageDir&&(pdfjsLib.imageResourcesPath=e.imageDir),e.disableWorker&&(pdfjsLib.disableWorker=!0),null!==e.verbosity&&(t="string"==typeof t?pdfjsLib.VerbosityLevel[t]:e.verbosity,pdfjsLib.VerbosityLevel=t)}]),e.directive("pdfjsViewer",["$interval","ComponentElementFactory","LupHelper","$window","$modal",function(c,u,d,e,p){return{templateUrl:"/tc/shared/pdfjs-viewer.html",restrict:"E",scope:{onInit:"&",onPageLoad:"&",scale:"=?",src:"=",data:"=?",destPage:"=?",copyProtect:"=?",onPageChange:"&",segment:"=",authToken:"=?"},link:function(r,e,n){e.children().wrap('<div class="pdfjs" style="width: 100%; height: 600px;"></div>'),r.lupHelper=d,r.downloadOriginalFile=function(){p.open({templateUrl:"/tc/component_elements/download_resource.html",controller:"DownloadResourceController",size:"md",resolve:{ResourceId:function(){return r.segment.resource_id},authToken:function(){return r.authToken}}})},r.PDFViewerApplication=null;var o=new u;o.id=r.segment.component_element_id,o.component_element=r.segment;var t,a=!1,i={};function s(){return r.segment&&r.segment.copyprotect_documents}function l(){return r.segment.page_click_tracking&&r.segment.enrollment_component_id&&!r.segment.is_preview&&!r.segment.copyprotect_documents&&!r.segment.allow_document_downloads}pdfjsLib&&(window.webViewerLoad(),r.PDFViewerApplication=PDFViewerApplication,s()&&(pdfjsLib.disableTextLayer=!0),t=c(function(){var e;r.PDFViewerApplication&&((e=r.PDFViewerApplication.pdfViewer)&&r.scale!==e.currentScale&&(i={},r.scale=e.currentScale),e=document.querySelectorAll(".page"),angular.forEach(e,function(e){var t=angular.element(e),e=t.attr("data-page-number");t.attr("data-loaded")?e in i||(a||function(){var e;a=!0,r.segment.enrollment_component_id||o.setNumberOfPagesInDocument(r.PDFViewerApplication.pagesCount),l()&&window.parent.trackPageClick(r.segment.start_page,r.PDFViewerApplication.pagesCount,1,r.segment.component_element_id),"true"===n.removeMouseListeners&&(window.removeEventListener("DOMMouseScroll",handleMouseWheel),window.removeEventListener("mousewheel",handleMouseWheel),e=document.querySelectorAll(".page"),angular.forEach(e,function(e){angular.element(e).children().css("pointer-events","none")})),r.onInit&&r.onInit(),r.destPage?(e=r.PDFViewerApplication.pagesCount,r.destPage>e||r.destPage<1?r.PDFViewerApplication.page=1:r.PDFViewerApplication.page=r.destPage):r.PDFViewerApplication.page=1,r.pdfViewerContainer=document.getElementById("viewerContainer"),r.pdfPages=document.querySelectorAll(".page");var t=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.getAttribute("data-page-number");e.target.setAttribute("data-visible","true");for(var n=t-1;0<n;n--){var o=document.querySelector('.page[data-page-number="'+n+'"]');o&&o.setAttribute("data-visible","true")}t==r.PDFViewerApplication.pagesCount&&(e=Array.from(r.pdfPages).every(function(e){return"true"===e.getAttribute("data-visible")}),t=r.pdfViewerContainer&&r.pdfViewerContainer.scrollHeight-r.pdfViewerContainer.scrollTop===r.pdfViewerContainer.clientHeight,(e||t)&&(r.PDFViewerApplication.pdfViewer.currentPageNumber=r.PDFViewerApplication.pagesCount))}})},{root:null,rootMargin:"0px",threshold:.75});r.pdfPages.forEach(function(e){e.setAttribute("data-visible","false"),t.observe(e)}),r.$on("$destroy",function(){r.pdfPages.forEach(function(e){t.unobserve(e)}),t.disconnect()})}(),r.onPageLoad&&!1===r.onPageLoad({page:e})||(i[e]=!0,0)):delete i[e]}))},200),e.on("$destroy",function(){c.cancel(t)}),r.$watch(function(){return r.src},function(e,t){e&&r.PDFViewerApplication.open(e).then(function(){r.PDFViewerApplication.eventBus.on("pagechanging",function(){var e;r.onPageChange&&(e=a?r.PDFViewerApplication.pdfViewer.currentPageNumber:r.segment.start_page,l()&&window.parent.trackPageClick(e,r.PDFViewerApplication.pagesCount,1,r.segment.component_element_id),r.onPageChange({pageNumber:e}))}),r.PDFViewerApplication.pdfViewer.textLayerMode=s()?0:1})}))}}}])}(),function(){"use strict";function e(){return{restrict:"A",scope:{ariaLiveMode:"@",atomic:"@"},link:t}}function t(e,t){t[0].ariaLive=angular.isDefined(e.ariaLiveMode)?e.ariaLiveMode:"polite",t[0].ariaAtomic=!angular.isDefined(e.atomic)||e.atomic}angular.module("lu").directive("luAriaLive",e),e.$inject=[]}(),function(){"use strict";function e(r){function a(e){var t=e.clone(),e=e.clone();return{nextMonth:t.month(t.month()+1),previousMonth:e.month(e.month()-1)}}function i(e){return e.day(0).hour(0).minute(0).second(0).millisecond(0)}function s(e){return e.hour(0).minute(0).second(0).millisecond(0)}function l(e,t,n){for(var l,c,o=!(e.weeks=[]),r=t.clone(),a=r.month(),i=0,s=(l=n,t=e.events,c=[],$.each(t,function(e,t){var n,o,r,a;if(t.is_multi_day)for(var i=moment(t.date),s=0;i<=moment(t.end_date);)o=i,r=t,((a=l).month()==o.month()&&o.dayOfYear()>=moment(r.date).dayOfYear()||(a.month()==o.month()&&o.dayOfYear()<=moment(r.end_date).dayOfYear()||a.month()!=moment(r.date).month()&&a.month()!=moment(r.end_date).month()&&(o.month()<a.month()||o.year()<a.year())&&(a.month()<moment(r.end_date).month()||a.year()<moment(r.end_date).year())))&&-1==c.indexOf(i.date())&&c.push(i.date()),s++,i=moment(t.date).add(s,"days");else l.month()==moment(t.date).month()&&(n=moment(t.date).date(),-1==c.indexOf(n)&&c.push(n))}),c);!o;)e.weeks.push({days:function(e,t,n){for(var o=[],r=0;r<7;r++)o.push({name:e.format("dd").substring(0,1),number:e.date(),isCurrentMonth:e.month()===t.month(),isToday:e.isSame(new Date,"day"),haveEvent:function(e,t,n){if(e.month()===t.month()&&-1<n.indexOf(e.date()))return!0;return!1}(e,t,n),date:e}),(e=e.clone()).add(1,"d");return o}(r.clone(),n,s)}),r.add(1,"w"),o=2<i++&&a!==r.month(),a=r.month()}return{restrict:"E",templateUrl:"/tc/shared/calendar.html",scope:{selected:"=",loadData:"&",events:"=",onFocusEmit:"&"},link:function(n,e){moment=r.addLocalesToMoment(moment);var t=null;function o(){n.previousMonth=a(n.month).previousMonth,n.nextMonth=a(n.month).nextMonth}t=n.selected&&"-"!==n.selected?(n.selected=s(n.selected),n.month=n.selected.clone(),n.selected.clone()):(n.month=s(moment()),s(moment()).clone()),o(),t.date(1),i(t.day(0)),l(n,t,n.month),n.select=function(e){e.isCurrentMonth&&(n.selected=e.date)},e.on("keydown",function(e){e.shiftKey&&"J"===r.keyboard_keys[e.keyCode]&&n.onFocusEmit()}),n.next=function(){var e=n.month.clone();i((n.loadMonth=e).month(e.month()+1).date(1)),n.month.month(n.month.month()+1),n.loadData({month:n.month.month()+1,year:n.month.year()}),l(n,n.loadMonth,n.month),n.selected="-",o()},n.previous=function(){var e=n.month.clone();i((n.loadMonth=e).month(e.month()-1).date(1)),n.month.month(n.month.month()-1),n.loadData({month:n.month.month()+1,year:n.month.year()}),l(n,n.loadMonth,n.month),n.selected="-",o()},n.$watch("events",function(e,t){e!==t&&(l(n,n.loadMonth,n.month),n.selected="-")},!0),n.LupHelper=r}}}angular.module("lu").directive("calendar",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(t){return{restrict:"E",template:'<input type="date" ng-class="class" placeholder="{{ placeholder }}" />',replace:"true",scope:{placeholder:"@datePlaceholder",class:"=",dateId:"@"},require:"ngModel",link:function(n,r,e,o){function a(e){return void 0===e&&(e=!0),(e?t.showMessage("lup.a11y.calendar.collapsed"):t.showMessage("lup.a11y.calendar.expanded"))+" "+t.showMessage("lup.a11y.calendar.date_format_is",{format:"en-GB"===webshims.activeLang()?t.showMessage("lup.a11y.calendar.date_format_dd_mm_yyyy"):"en-US"===webshims.activeLang()?t.showMessage("lup.a11y.calendar.date_format_mm_dd_yyyy"):""})}n.ngModel=o,n.dateId=n.dateId||"",n.$watch(function(){return o.$viewValue},function(e){var t;o.$render(),$(r).updatePolyfill(),(t=$(r).next(".ws-date"))&&n.dateId&&t.attr("id",n.dateId),(t=$(r).next(".ws-date"))&&t.attr("aria-label",a()),(t=$(r).siblings(".date-input-buttons").find(".ws-popover-opener"))&&t.attr("title",I18n.t("lup.a11y.open_datepicker")),$(r).siblings(".date-input-buttons").find(".ws-popover-opener").on("click keydown",function(e){var t,n,o=$(r).siblings(".ws-popover")[0];o&&(t=$(o).find(".ws-prev"),n=$(o).find(".ws-next"),t.attr("title")||n.attr("title")||(t.attr("title",I18n.t("lup.a11y.calendar_previous")),t.removeAttr("aria-label"),n.attr("title",I18n.t("lup.a11y.calendar_next")),n.removeAttr("aria-label")),new MutationObserver(function(e){var t=$(r).next(".ws-date");t&&e.forEach(function(e){"attributes"===e.type&&(-1<e.target.className.indexOf("ws-po-visible")?t.attr("aria-label",a(!1)):t.attr("aria-label",a()))})}).observe(o,{attributes:!0,childList:!1,subtree:!1}))})})}}}angular.module("lu").directive("luDateWebshims",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(o){return{restrict:"A",link:function(e,t,n){o(function(){t.attr("disabled-on-ajax")&&t.attr("default-btn-text",t.html())})}}}angular.module("lu").directive("disabledOnAjax",e).service("BtnDisabler",function(){return{enable:function(e){try{var t;e&&e.hasAttribute("disabled-on-ajax")&&((t=angular.element(e)).attr("disabled-on-ajax")&&t.html(t.attr("default-btn-text")),t.removeClass("disabled"))}catch(e){}},disable:function(e){try{var t;e&&e.hasAttribute("disabled-on-ajax")&&((t=angular.element(e)).attr("disabled-on-ajax")&&t.html(t.attr("disabled-on-ajax")),t.addClass("disabled"))}catch(e){}}}}),e.$inject=["$timeout"]}(),function(){"use strict";function e(l,e){return{restrict:"AE",transclude:!0,replace:!0,template:'<header class="header header--fixed" ng-class="{\'a11y-foc-area\': !!focusarea}" ng-transclude></header>',link:function(e,n){var t=document.getElementById("mainHeader"),o=t?t.offsetHeight:0,r=0,a=0,i=1;function s(e,t){t==i?(n.removeClass("scroll-up"),n.addClass("scroll-down")):t==a&&(n.removeClass("scroll-down"),n.addClass("scroll-up"),l.pageYOffset==o?n.removeClass("breadcrumb-bg"):n.addClass("breadcrumb-bg"))}e.$on("focusarea",function(){e.focusarea=!0}),l.addEventListener("scroll",function(){var e=l.pageYOffset||document.documentElement.scrollTop;o<e&&s(0,e<=r?a:i),0===e&&(n.removeClass("scroll-up"),n.removeClass("scroll-down")),r=e},!1)}}}angular.module("lu").directive("luFixedTop",e),e.$inject=["$window","$log"]}(),function(){function e(o,n,i,s,l,c){return{restrict:"EA",scope:{postsArray:"=",viewType:"=",exposedSearchFunction:"=",showTopicDot:"=",cameFromPage:"=",updatePostCounters:"=?",show3dm:"=?",objectId:"=?",creationType:"=?",currentUserPmId:"=?"},templateUrl:"/tc/forums/posts-template.html",link:function(r,e,t){var a=new n;r.lupHelper=o,r.tabIndex=i.tabIndex,r.topicTitleExpanded=!1,r.cdn_path=CONFIG.cdnPath,r.activePostDDM={},r.toggled=function(e,t){r.activePostDDM[t]=e},r.expandTopicTitle=function(){return r.topicTitleExpanded=!r.topicTitleExpanded,r.topicTitleExpanded},r.deletePost=function(e){var t;e.edit_permissions<r.lupHelper.forums.posts.edit_permissions.post_creator||(e.edit_permissions==r.lupHelper.forums.posts.edit_permissions.post_creator&&(0<e.likes_count||0<e.comments_count)?l.notify("",r.lupHelper.showMessage("lup.forums.forum_post.deletion_restricted")):(t={status_code:r.lupHelper.forums.posts.status_code.deleted},l.confirm(I18n.t("lup.forums.all_posts.delete_post"),I18n.t("lup.forums.posts.post_action.are_your_sure_you_want_to_delete_post",{post_title:e.title})).then(function(){a.updatePost(e.id,t).then(function(){r.exposedSearchFunction.fetch(),r.updatePostCounters&&angular.isFunction(r.updatePostCounters)&&r.updatePostCounters(e.status_code,r.lupHelper.forums.posts.action.deleting)})})))},r.toggleCommenting=function(e,t,n){c.toggleCommenting(e,t,n).then(function(){r.exposedSearchFunction.fetch()})},r.toggleArchiving=function(e,t,n){c.toggleArchiving(e,t,n).then(function(){r.exposedSearchFunction.fetch(),r.updatePostCounters&&angular.isFunction(r.updatePostCounters)&&r.updatePostCounters(t,r.lupHelper.forums.posts.action.archiving)})},r.filterByTopic=function(e,t,n){var o=r.exposedSearchFunction.returnFilterData();(o=o||a.defaultFilterValues()).topics=[e],o.selected_topics=[{title:t,id:e}],o.topic_type=n,r.exposedSearchFunction.changeFilterData(o,!0,!0,1)},r.filterByTags=function(e,t){var n=r.exposedSearchFunction.returnFilterData();(n=n||a.defaultFilterValues()).tags=[e],n.selected_tags=[{name:t,id:e}],r.exposedSearchFunction.changeFilterData(n,!0,!0,1)},r.buildPostUrl=function(e,t){var n=r.cameFromPage?r.cameFromPage+"/"+e:"/forums/posts/"+e;return o.contains(s.location.pathname,"forums/topic")&&!o.contains(s.location.search,"topics_by_type")?n+="?bc=topics":o.contains(s.location.pathname,"forums/moderation")?n="/forums/moderation/posts/"+e:o.contains(s.location.search,"topics_by_type")&&(n="/forums/posts/"+e+s.location.search),t&&(n+=o.contains(n,"?")?"&":"?",n+="comments"),n},r.editPost=function(e){if(r.currentUserPmId===e.created_by_pm_id){var t="/forums/my_contribution/"+e.id+"/edit";return o.contains(s.location.pathname,"forums/my_contribution")||o.contains(s.location.pathname,"forums/all_posts")||(t+="?object_id="+r.objectId+"&type_id="+r.creationType),void(s.location=t)}o.contains(s.location.pathname,"forums/topic/")?s.location="/forums/posts/"+e.id+"/edit?bc=topics&object_id="+r.objectId+"&type_id="+r.creationType:c.editPost(e.id,r.objectId,r.creationType)}}}}angular.module("lu").directive("forumPosts",e),e.$inject=["LupHelper","ForumPostsFactory","LupService","$window","$luPopover","ForumPostShowActionFactory"]}(),function(){"use strict";function e(e,o,r){return{restrict:"AE",transclude:!0,replace:!0,template:'<div id="backtop" class="{{theme}}"><button ng-click="scrollToTop($event)" title="{{title}}"><div ng-transclude></div></button></div>',scope:{text:"@buttonText",speed:"@scrollSpeed",theme:"@buttonTheme",title:"@buttonTitle"},link:function(l,n){l.text=l.text||"Scroll top",l.speed=parseInt(l.speed,10)||300,l.theme=l.theme||"light",l.title=l.title||"",l.scrollToTop=function(e){l.smoothScroll(),n.removeClass("back-to-top"),t(!0),r.checkIfEventIsKeyboardClick(e)&&setTimeout(function(){document.querySelector(".skiplink").focus()})},t(!0);function t(e,t){n.attr("aria-disabled",e),n.attr("tabindex",t)}l.currentYPosition=function(){return o.pageYOffset?o.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0},l.smoothScroll=function(){var e=l.currentYPosition(),t=e<0?0-e:+e;if(t<100)scrollTo(0,0);else{var n=Math.round(l.speed/100),o=Math.round(t/25),r=e<0?e+o:e-o,a=0;if(e<0)for(var i=e;i<0;i+=o)setTimeout("window.scrollTo(0, "+r+")",a*n),0<(r+=o)&&(r=0),a++;else for(var s=e;0<s;s-=o)setTimeout("window.scrollTo(0, "+r+")",a*n),(r-=o)<0&&(r=0),a++}},o.addEventListener("scroll",function(){400<o.pageYOffset?(n.addClass("back-to-top"),t(!1,"0")):(n.removeClass("back-to-top"),t(!0,"-1"))})}}}angular.module("lu").directive("luGoToTop",e),e.$inject=["$rootScope","$window","LupHelper"]}(),function(){"use strict";function e(e){return{restrict:"AE",replace:!0,scope:{name:"@",height:"@",width:"@",emailHash:"@"},link:function(e,t,n){e.defaultImage="mm"},template:'<img alt="{{ name }}" height="{{ height }}"  width="{{ width }}" src="https://secure.gravatar.com/avatar/{{ emailHash }}.jpg?s={{ width }}&d={{ defaultImage }}">'}}angular.module("lu").directive("gravatar",e),e.$inject=["$http"]}();var app=angular.module("lu");app.factory("I18nService",function(){function e(){}return e.prototype.language="en",e.prototype.fallback="en",e.prototype.timeHumanizer={},e.prototype.init=function(e,t){var n=humanizeDuration.getSupportedLanguages();this.fallback=void 0!==t?t:"en",-1===n.indexOf(t)&&(this.fallback="en"),this.language=e,-1===n.indexOf(e)&&(this.language=this.fallback),moment.locale(this.language),this.timeHumanizer=humanizeDuration.humanizer({language:this.language,halfUnit:!1})},e.prototype.getTimeUnits=function(e){var t=1e3*Math.round(e/1e3),e={};return void 0!==this.timeHumanizer&&(e={millis:this.timeHumanizer(t,{units:["milliseconds"]}),seconds:this.timeHumanizer(t,{units:["seconds"]}),minutes:this.timeHumanizer(t,{units:["minutes","seconds"]}),hours:this.timeHumanizer(t,{units:["hours","minutes","seconds"]}),days:this.timeHumanizer(t,{units:["days","hours","minutes","seconds"]}),months:this.timeHumanizer(t,{units:["months","days","hours","minutes","seconds"]}),years:this.timeHumanizer(t,{units:["years","months","days","hours","minutes","seconds"]})}),e},e}),function(h){"use strict";function e(u,d,p,m,f,g){return{restrict:"E",scope:{sortOptions:"=",filterOptions:"&",loadData:"&",clearFiltering:"&",filteringControl:"=",collectionTitle:"@?",searchText:"=?",hideSearch:"=?",advancedSearchTemplate:"@?",advancedSearchController:"@?",advancedSearchFlag:"=?",advancedSearchInfo:"=?",sortValue:"=?",cookieExists:"=?",a11ySearchTitle:"@?",infoText:"@?"},transclude:!0,templateUrl:"/tc/list_header.html",link:function(n,e,t){var o={};function r(){var e;n.sortOptions&&n.sortOptions.length&&(e=_.find(n.sortOptions,function(e){return!!e.default}),n.sort.input=(e||n.sortOptions[0]).value,n.sortValue&&(n.sort.input=n.sortValue))}n.helper=d,n.search={show:!1,advancedSearch:!1},n.searchText&&(n.search.input=n.searchText),n.advancedSearchFlag&&(n.search.advancedSearch=n.advancedSearchFlag),n.sort={},r();var a=function(){var e=h.copy(u.get());if(delete e.search,delete e.advancedSearch,delete e.sort,delete e.page,delete e.course_id,h.equals(e,{}))return!1;return!0}();function i(e){event.preventDefault(),event.stopPropagation();for(var t=0;t<n.filterOptions().length;t++)o[n.filterOptions()[t].filterName]=null;n.filteringEnabled=!1,n.clearFiltering()}a&&p.$broadcast("filterStatus",{status:a}),n.filteringEnabled=!1,n.showSorting=function(){return!!(n.sortOptions&&0<=n.sortOptions.length)},n.toggleSearch=function(e){if(e.preventDefault(),e.stopPropagation(),n.advancedSearchEnabled)return void f.open({templateUrl:n.advancedSearchTemplate,controller:n.advancedSearchController,windowClass:"modal-box modal-box--lg",resolve:{search:function(){return n.search.input},advancedSearch:function(){return n.search.advancedSearch},advancedSearchInfo:function(){return n.advancedSearchInfo}}}).result.then(function(e){e.search!==n.search.input&&g.showGroup("luSpinnerGlobal"),n.search.advancedSearch=e.advancedSearch,n.search.input=e.search});n.search.show=!n.search.show,n.search.show?m(function(){h.element("#list-header-search").focus()}):m(function(){h.element("#list-header-search").blur()})},n.submitSearch=c,n.submitSort=function(){o.sort=n.sort.input,n.cookieExists?u.merge(o):u.set(o);n.loadData()},n.resetFilters=i,n.resetSearch=function(){n.search.input&&g.showGroup("luSpinnerGlobal");n.search.advancedSearch=null,n.search.input=""},n.openFilter=function(){document.getElementById("filter-box").style.display="block"},n.filtering=n.filteringControl||{},n.hideSearch=!!n.hideSearch,n.advancedSearchEnabled=!!n.advancedSearchTemplate&&!!n.advancedSearchController,n.filtering.applyFilter=function(){for(var e=0;e<n.filterOptions().length;e++)o[n.filterOptions()[e].filterName]=n.filterOptions()[e].value;n.filteringEnabled=!0,n.cookieExists?(o.page=1,u.merge(o)):u.set(o),n.loadData()},p.$on("clearListHeaderSearch",function(){n.search.show=!1,n.search.input="",u.merge({search:""})}),p.$on("resetSort",function(){r()}),p.$on("resetFilter",function(e){i()}),n.$watch(function(){return n.filteringEnabled},function(e,t){e!==t&&p.$broadcast("filterStatus",{status:e})});var s=null;n.$watch(function(){return n.search.input},function(e,t){e!==t&&(s&&m.cancel(s),s=m(function(){c()},d.search.listHeaderWaitTime))}),n.$watch(function(){return n.search.advancedSearch},function(e,t){e!==t&&(s&&m.cancel(s),s=m(function(){c()},d.search.listHeaderWaitTime))});var l=!1;function c(){l||(l=!0,o.search=n.search.input,o.advancedSearch=n.search.advancedSearch,n.searchText=o.search,p.mergeSearch||n.cookieExists?(o.page=1,u.merge(o)):u.set(o),n.loadData(),s=null,l=!1)}}}}h.module("lu").directive("listHeader",e).service("paramsService",function(){var t={};return{get:function(){return t},set:function(e){t=e},merge:function(e){return _.extend(t,e),t}}}),e.$inject=["paramsService","LupHelper","$rootScope","$timeout","$modal","spinnerService"]}(window.angular),function(){"use strict";function e(o){return{restrict:"A",link:function(e,t,n){t.on("click",function(){o.$broadcast(n.luAction)})}}}window.angular.module("lu").directive("luAction",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(o,r,a,i,e){return{restrict:"A",scope:{field:"=",fieldLabel:"=",form:"=",focusInstance:"=?",resorceid:"=",imagetype:"="},link:function(t,e,n){e.on("click",function(){var e=o.open({templateUrl:"/tc/questions/advance-edit-modal.html",controller:"AdvanceEditModalController",size:"lg",resolve:{field:function(){return t.field},field_label:function(){return t.fieldLabel}}});e.opened.then(function(){r(function(){a.renderCKEditor({clear_all_previous_instances:!1,id:"advance_edit_wysi",add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0,add_insert_symbols:!0,add_math_jax:!0,auto_focus:!0})},100)}),e.result.then(function(e){e&&void 0!==e.field&&(t.field=e.field,t.form.$setDirty()),t.focusInstance&&a.focusCKEditorInstance(t.focusInstance)}),i.executeDjImageUpload=function(){o.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return t.resorceid},ckeditorInstance:function(){return"advance_edit_wysi"},imageType:function(){return t.imagetype}}}).result.then(function(e){e&&"save"===e.action&&CKEDITOR.instances.advance_edit_wysi.insertHtml('<img src="'+e.image_url+'">')})}})}}}angular.module("lu").directive("luAdvanceQuestionEdit",e),e.$inject=["$modal","$timeout","LupHelper","$window","$rootScope"]}(),angular.module("lu.autofocus",[]).directive("autofocus",["$timeout",function(n){return{restrict:"A",link:function(e,t){n(function(){t[0].focus()})}}}]),function(){"use strict";angular.module("lu").directive("luCardHeaderWithCtaRedesign",function(){return{restrict:"E",scope:{config:"="},templateUrl:"/tc/lu-card-header-with-cta/lu-card-header-with-cta-redesign.html"}})}(),function(){"use strict";angular.module("lu").directive("luCardHeaderWithCta",function(){return{restrict:"E",scope:{config:"="},templateUrl:"/tc/lu-card-header-with-cta/lu-card-header-with-cta.html"}})}(),function(){"use strict";function e(a){return{restrict:"E",require:"?^form",scope:{model:"=",options:"=?",ckid:"=?"},templateUrl:"/tc/lu-ck-editor.html",link:function(t,e,n,o){var e=e.find("textarea"),r=null,r=t.ckid?t.ckid:"ck_"+String(Date.now());e.attr("id",r),t.options||(t.options={});e={id:r,save_button_action:"save_text_button",width:"100%",editorTextChangeEvent:function(e){o&&o.$setDirty(),t.model=a.getHTMLFromCKEditor(r),t.$parent.$apply()}};a.renderCKEditor(angular.extend(e,t.options))}}}angular.module("lu").directive("luCkEditor",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(){return{restrict:"E",require:"?^form",scope:{color:"="},template:"<div class='branding_item_blob color-picker' ng-click='changeColor()' ng-style=\"{ 'background-color': color }\" ></div>",link:function(o,t,e,n){o.$form=n,o.changeColor=function(){t.ColorPicker({element_reference:null,color:o.color,onShow:function(e){return t.element_reference=e,$(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onChange:function(e,t,n){o.color="#"+t,o.$form&&o.$form.$setDirty(),o.$apply()}})},t.bind("keydown keypress keyup",function(e){e.preventDefault(),27===e.which&&angular.element(t.element_reference).hide()})}}}function a(e){return function(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b),n=o-n;t.b=o,t.s=0!==o?255*n/o:0,0!==t.s?e.r===o?t.h=(e.g-e.b)/n:e.g===o?t.h=2+(e.b-e.r)/n:t.h=4+(e.r-e.g)/n:t.h=-1;t.h*=60,t.h<0&&(t.h+=360);return t.s*=100/255,t.b*=100/255,t}((e=e,{r:(e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}))}function t(){return{restrict:"EA",scope:{ngModel:"=",name:"@",customId:"@",lightColorWarning:"@",lightColorThreshold:"@"},replace:!0,template:n,link:function(n,e,o){var r=!!n.lightColorWarning;n.displayColorWarning=!1,n.colorWarning={message:n.lightColorWarning},n.$watch("ngModel",function(e,t){if(e!==t){n.ngModel=function(e){e=/^#/.test(e)?e:"#"+e;return e}(e);if(document.documentElement.style.setProperty({"branding-hdr-color":"--theme-header-color","branding-bcg-color":"--theme-bg-color","branding-link-color":"--theme-link-color"}[o.customId],e),r)try{n.displayColorWarning=function(e,t){var n=!1,t=t?parseInt(t):92;{e&&(e=e.b-e.s/2,n=t<=e)}return n}(a(e),n.lightColorThreshold)}catch(e){n.displayColorWarning=!1}}})}}}function n(e,t){return["<div>",'<input type="text" class="form-control" id="{{customId}}" name="{{name}}" ng-model="ngModel"/>','<div class="help-block" ng-show="displayColorWarning" role="alert">{{colorWarning.message}}</div>',"</div>"].join("")}angular.module("lu").directive("luColorPicker",e).directive("luColorInput",t),e.$inject=[],t.$inject=[]}(),function(){"use strict";function e(e){return{restrict:"E",replace:!1,scope:{options:"=",concurrentAndSeriesSessions:"=?"},templateUrl:"/tc/lu-cta-card/lu-cta-card-redesign.html"}}angular.module("lu").directive("luCtaCardRedesign",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(e){return{restrict:"E",replace:!1,scope:{options:"="},templateUrl:"/tc/lu-cta-card/lu-cta-card.html"}}angular.module("lu").directive("luCtaCard",e),e.$inject=["LupHelper"]}(),function(){"use strict";var _,m,f,g;angular.module("lu").directive("luDraggable",function(){return{restrict:"A",scope:!0,link:function(r,a,e){function i(){d.width=!1,d.height=!1,d.height=parseInt(a[0].style.height),d.id=a[0].id}function s(e){var t=e.clientX-l;(e=e.clientY-c)<0||_-g<e||t<0||m-f<t||(a[0].style.top=e+"px",a[0].style.left=t+"px")}var l,c,u=window.getComputedStyle(a[0],null),d={},p=function(e){i(),r.$emit("lu-draggable.dragEnd",d),r.$apply(),document.removeEventListener("mouseup",p,!1),document.removeEventListener("mousemove",s,!1),a.removeClass("no-transition"),a.removeClass("stop-propagation")};a[0].ondragstart=function(){return!1},a[0].addEventListener("mousedown",function(e){var t,n,o;(e=e||window.event).which||void 0===e.button||(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),3!=e.which&&(t=e,o=document.body,e=document.documentElement,_=Math.max(o.scrollHeight,o.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),m=Math.max(e.clientWidth,o.clientWidth,o.offsetWidth),g=a[0].clientHeight,f=a[0].clientWidth,l=t.clientX-a[0].offsetLeft,c=t.clientY-a[0].offsetTop,parseInt(u.getPropertyValue("width")),parseInt(u.getPropertyValue("height")),a.addClass("no-transition"),a.addClass("stop-propagation"),document.addEventListener("mouseup",p,!1),document.addEventListener("mousemove",s,!1),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,i(),r.$emit("lu-draggable.dragStart",d),r.$apply())},!1)}}})}(),function(){"use strict";function e(){return{restrict:"A",scope:!1,link:t}}function t(t,e,n,o){e.bind("keydown keypress keyup",function(e){13===e.which&&(t.$apply(function(){t.$eval(n.luEnter)}),e.preventDefault())})}angular.module("lu").directive("luEnter",e),e.$inject=[]}(),function(){"use strict";function e(){return{restrict:"A",scope:!1,link:t}}function t(t,e,n,o){e.bind("keydown keypress keyup",function(e){27===e.which&&(t.$apply(function(){t.$eval(n.luEsc)}),e.preventDefault())})}angular.module("lu").directive("luEsc",e),e.$inject=[]}(),function(){"use strict";function e(o,r){return{restrict:"A",scope:{},templateUrl:"/tc/shared/filtering_enabled.html",link:function(n,e,t){n.helper=r,n.filteringEnabled=void 0,o.$on("filterStatus",function(e,t){n.filteringEnabled=!!t.status}),n.resetFilters=function(){o.$broadcast("resetFilter")}}}}angular.module("lu").directive("luFilterStatus",e),e.$inject=["$rootScope","LupHelper"]}(),function(){"use strict";function e(n){return{restrict:"A",link:function(e,t){t.find("a").on("click",function(e){n.checkIfEventIsKeyboardClick(e)&&(e.preventDefault(),window.location.href=e.currentTarget.href+"#main-content")})}}}angular.module("lu").directive("luFocusMainContent",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(a){return{restrict:"A",scope:{trapFocusTrigger:"=",trapFocusOptions:"=?"},link:function(e,t){var n=e.trapFocusOptions||{},o=window.focusTrap.createFocusTrap(t[0],n),r=!1;e.$watch("trapFocusTrigger",function(e){return e&&!r?(a(function(){o.activate()}),void(r=!0)):(o.deactivate(),void(r=!1))}),e.$on("$destroy",function(){o&&o.deactivate()})}}}angular.module("lu").directive("luFocusTrap",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(r){return{link:function(t,e,n){var o=e[0];t.$watch(n.luFocus,function(e){angular.isDefined(e)&&e&&r(function(){o.focus()},t.$eval(n.focusDelay)||0)},!0),e.bind("blur",function(){angular.isDefined(n.onFocusLost)&&t.$apply(n.onFocusLost)})},restrict:"A"}}angular.module("lu").directive("luFocus",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,r){return{restrict:"E",scope:{settings:"@?settings"},templateUrl:"/tc/footer.html",link:function(e,t,n){e.wl="",e.lupHelper=r,e.title="",e.footerLinks=[],e.socialLinks=[],e.luLogo=CONFIG.cdnPath+"images/learnupon.svg",angular.isDefined(e.settings)&&(o=decodeURIComponent(e.settings),o=JSON.parse(o)||{},e.wl=o.remove_powered_by,e.footerLinks=o.footer_links,e.portal_title=o.portal_title);var o=(new Date).getFullYear();e.poweredByText="© "+o+" LearnUpon Ltd."}}}angular.module("lu").directive("luFooter",e),e.$inject=["$rootScope","LupHelper"]}(),function(){function e(s,l,c,u,d){return{restrict:"EA",scope:{postId:"=",comments:"=",commentsCount:"=",isModerator:"=",isAdmin:"=",allowCommenting:"=",currentUserPmId:"="},templateUrl:"/tc/forums/comments/forum-post-comments-template.html",link:function(r,e,t){var o=new c,a=new u;r.lupHelper=s,r.forumService=l,r.lupHelper.renderCKEditor(r.forumService.buildCKForComments()),r.displayShowMoreBtn=!1,r.likingAllowed=!0,r.comments.meta.next_page&&(r.displayShowMoreBtn=!0);r.displaySpinner=!1,r.deletingInProgress=!1,r.fetchDataInProgress=!1,r.commentOrdering=[{name:r.lupHelper.showMessage("lup.forums.post_sort.latest_first"),value:"created_at.DESC",class:"select--ico-latest-first"},{name:r.lupHelper.showMessage("lup.forums.post_sort.oldest_first"),value:"created_at.ASC",class:"select--ico-oldest-first"},{name:r.lupHelper.showMessage("lup.forums.post_sort.most_likes"),value:"likes_count.DESC",class:"select--ico-most-popular"}];var n=angular.copy(r.commentOrdering);r.commentOrder=n[0];var i="/forums/posts/"+r.postId+"/comments.json";r.createComment=function(e){r.commentCreateRequest||(r.comment=r.lupHelper.getHTMLFromCKEditor("post_comments_wysi"),r.validateComment(e),e.$valid&&(r.commentCreateRequest=!0,a.createComment(r.postId,{content:r.comment}).then(function(e){e.success?(r.commentOrder=angular.copy(r.commentOrdering)[0],r.comments.meta.page=0,r.fetchData(!0)):r.commentCreateRequest=!1}).catch(function(e){r.commentCreateRequest=!1})))},r.updateOrdering=function(){var e=r.commentOrdering.filter(function(e){return e.value==r.commentOrder.value});r.commentOrder=angular.copy(e[0]),r.comments.meta.page=0;r.fetchData(!0)},r.fetchData=function(n){if(r.fetchDataInProgress||r.deletingInProgress)return!1;r.fetchDataInProgress=!0,n||(r.displaySpinner=!0);var e=parseInt(r.comments.meta.page)+1||1,t={};t.url=i,t.hideSpinner=!0,t.params={order:r.commentOrder.value,page:e},o.get(null,t,null).then(function(e){r.displaySpinner=!1;var t=e.data.comments;n?(r.comments=t,r.commentCreateRequest&&(r.comment=null,r.lupHelper.emptyCKEditor("post_comments_wysi"),r.commentCreateRequest=!1,document.getElementsByClassName("comments__count")[0]&&document.getElementsByClassName("comments__count")[0].scrollIntoView({behavior:"smooth"}))):(r.comments.data=r.comments.data.concat(t.data),r.comments.meta=t.meta),r.commentsCount=e.data.comment_count,r.displayShowMoreBtn=!!t.meta.next_page,r.fetchDataInProgress=!1})},r.deleteComment=function(n,o){if(r.deletingInProgress)return!1;d.confirm(s.showMessage("lup.confirm"),s.showMessage("lup.forums.comments.delete_comment_confirmation")).then(function(e){r.deletingInProgress=!0,r.indexOfCommentBeingDeleted=o;var t={status_code:r.lupHelper.forums.comments.deleted};a.updateComment(n,r.postId,t).then(function(e){e&&e.success?r.refreshCurrentPage():r.deletingInProgress=!1})})},r.refreshCurrentPage=function(){var e=parseInt(r.comments.meta.page),t={};t.url=i,t.hideSpinner=!0,t.params={order:r.commentOrder.value,page:e},o.get(null,t,null).then(function(e){var t=e.data.comments,n=t.data.pop();r.comments.data.splice(r.indexOfCommentBeingDeleted,1),0<t.data.length&&n.id!==_.last(r.comments.data).id&&(r.comments.data=r.comments.data.concat(n)),r.comments.meta=t.meta,r.commentsCount=e.data.comment_count,r.displayShowMoreBtn=!!t.meta.next_page,r.deletingInProgress=!1})},r.userAllowedToEditComment=function(e){return!!r.isAdmin||!!r.isModerator||e.created_by_pm_id===r.currentUserPmId},r.validateComment=function(e){e.$setValidity("emptyContent",!!r.comment)},r.likeComment=function(e){r.likingAllowed&&(r.likingAllowed=!1,e.is_liked&&0<e.likes_count?e.likes_count=e.likes_count-1:0<=e.likes_count&&(e.likes_count=e.likes_count+1),e.is_liked=!e.is_liked,e.new_like=e.is_liked,a.likeComment(e.id).finally(function(){r.likingAllowed=!0}))}}}}angular.module("lu").directive("luForumPostComments",e),e.$inject=["LupHelper","ForumService","learnUponApi","ForumCommentFactory","$luPopover"]}(),function(){"use strict";function e(n){return{restrict:"E",scope:{icon:"=",customClass:"="},templateUrl:"/tc/shared/lu-icon.html",link:function(e,t){e.customLink=n.location.origin+"/icons#"+e.icon}}}angular.module("lu").directive("luIcon",e),e.$inject=["$window"]}(),function(){"use strict";function e(o){return{restrict:"E",replace:!0,scope:{invalidFile:"=file",acceptedFormats:"@",maxSize:"@"},templateUrl:"/tc/shared/lu_invalid_file_upload.html",link:function(e,t,n){e.Helper=o}}}angular.module("lu").directive("luInvalidUpload",e),e.$inject=["LupHelper"]}(),angular.module("lu").directive("luLeaderboard",["LupHelper",function(o){return{restrict:"E",scope:{user:"=",index:"=",usersPage:"=?",hideEmails:"=?",hideLinks:"=?",isAnonymous:"=?",userId:"=?"},templateUrl:"/tc/badges/lu_leaderboard.html",link:function(t,e,n){t.userPosition=function(){var e=t.usersPage?t.usersPage:1;return t.user.position||10*(e-1)+t.index+1},t.replaceEmptyNames=function(){return t.isAnonymous&&t.user.user_id!=t.userId?o.showMessage("reviews.anonymous"):t.user.display_name&&t.user.display_name.trim()?t.user.display_name:o.showMessage("lup.users.na")},t.showInitials=function(){return t.isAnonymous&&t.user.user_id!=t.userId?o.showMessage("reviews.anonymous")[0]:o.avatarInitials(t.user)},t.displayProfileImage=function(e){return(!t.isAnonymous||t.user.user_id==t.userId)&&(!!e&&!!e.profile_image)},t.lupHelper=o}}}]),function(){"use strict";function e(b){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){var r,a,i,s=b.NUMBER_FORMATS.DECIMAL_SEP,l=b.NUMBER_FORMATS.GROUP_SEP,c=new RegExp("^\\s*(\\-|\\+)?(\\d+|(\\d*(\\.\\d*)))\\s*$"),u=!0,d=16,p=2;o.$parsers.push(function(e){angular.isUndefined(e)&&(e="");0===(e=e.toString().replace(s,".")).indexOf(".")&&(e="0"+e);0===e.indexOf("-")&&(0<=a?(e=null,o.$setViewValue(m(i)),o.$render()):"-"===e&&(e=""));o.$isEmpty(e)?i="":c.test(e)&&e.length<=d?i=r<e?r:e<a?a:""===e?null:parseFloat(e):(o.$setViewValue(m(i)),o.$render());return i}),o.$parsers.push(g),o.$parsers.push(h),o.$formatters.push(m),t.bind("blur",function(){var e=o.$modelValue;angular.isUndefined(e)||(o.$viewValue=_(e),o.$render())}),t.bind("focus",function(){var e=o.$modelValue;angular.isUndefined(e)||(o.$viewValue=e.toString().replace(".",s),o.$render())}),e.$watch(n.min,function(e){angular.isUndefined(e)||(a=parseFloat(e),i=g(o.$modelValue),o.$setViewValue(_(i)),o.$render())}),e.$watch(n.max,function(e){angular.isUndefined(e)||(r=parseFloat(e),d=f(r),i=h(o.$modelValue),o.$setViewValue(_(i)),o.$render())}),e.$watch(n.decimals,function(e){angular.isUndefined(e)||(p=parseFloat(e),d=f(r),void 0!==i&&(o.$setViewValue(_(i)),o.$render()))}),e.$watch(n.formatting,function(e){angular.isUndefined(e)||(u=!1!==e,o.$setViewValue(_(i)),o.$render())}),-1<p&&(o.$parsers.push(function(e){return e?(t=e,n=Math.pow(10,p),Math.round(t*n)/n):e;var t,n}),o.$formatters.push(function(e){return e?_(e):e}));function _(e){return e||0===e?function(e){if(u){var t=e.toString().split(s);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,l),t.join(s)}return e}(parseFloat(e).toFixed(p).replace(".",s)):""}function m(e){return o.$isEmpty(e)?"":""+e}function f(e){var t=16;return angular.isUndefined(e)||(t=Math.floor(e).toString().length),0<p&&(t+=p+1),a<0&&t++,t}function g(e){return!angular.isUndefined(a)&&!o.$isEmpty(e)&&e<a?a:e}function h(e){return!angular.isUndefined(r)&&!o.$isEmpty(e)&&r<e?r:e}}}}angular.module("lu").directive("luNumeric",e),e.$inject=["$locale"]}(),function(){"use strict";function e(o,r,a,i,s){return{restrict:"E",scope:{paginationData:"=",secondaryData:"=",page:"=",prevUrl:"=",nextUrl:"=",key:"@",secondaryKey:"@",formatDataFn:"&"},templateUrl:"/tc/pagination.html",link:function(n,e,t){n.showPagination=function(){return!!n.prevUrl||!!n.nextUrl},n.lupHelper=a,n.getData=function(e){o.get(e,{}).success(function(e){n.secondaryKey&&(n.secondaryData=e[n.secondaryKey].data),n.paginationData=e[n.key],!n.formatDataFn||(t=n.formatDataFn({data:e[n.key]}))&&(n.paginationData=t);var t=i.hash();i.hash("topOfList"),s(),i.hash(t),r.$broadcast("lupPagination:page-change-data",{data:e})})},n.nextPage=function(){n.nextUrl&&(r.$broadcast("lupPagination:page-change",{page:n.lupHelper.getQueryString("page",n.nextUrl),direction:"next"}),n.getData(n.nextUrl))},n.previousPage=function(){n.prevUrl&&(r.$broadcast("lupPagination:page-change",{page:n.lupHelper.getQueryString("page",n.prevUrl),direction:"prev"}),n.getData(n.prevUrl))}}}}window.angular.module("lu").directive("lupPagination",e),e.$inject=["$http","$rootScope","LupHelper","$location","$anchorScroll"]}(),function(){"use strict";angular.module("lu").directive("popoverHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"/tc//popover/popover-html-unsafe-popup.html"}}).directive("popoverHtmlUnsafe",["$tooltip",function(e){return e("popoverHtmlUnsafe","popover","click")}])}(),function(){"use strict";function e(){return{priority:99,link:function(e,t,n){var o=document.documentMode;n.$observe("luPoster",function(e){n.$set("poster",e),o&&t.prop("poster",n.poster)})}}}angular.module("lu").directive("luPoster",e),e.$inject=[]}(),angular.module("lu").directive("luRating",["$http","$sce","$window","EnrollmentHelper","LupHelper",function(e,t,n,o,r){return{restrict:"EA",scope:{ratingValue:"=ngModel",max:"=?",onRatingSelect:"&?",readonly:"=?"},template:'<div onload="templateLoaded()" class="star-rating" ng-class="{readonly: readonly}" ng-mouseleave="resetValue()">  <span ng-repeat="star in stars" class="star" ng-mouseenter="changeValue($index)" ng-click="setValue($index)">    <i class="fa" ng-class="{\'fa-star\': star.filled, \'fa-star-o\': !star.filled }"></i>  </span></div>',link:function(t,e,n){function o(){t.stars=[];for(var e=0;e<t.max;e++)0<t.ratingValue?t.stars.push({filled:e<Math.round(parseFloat(t.ratingValue))}):r()}function r(){t.stars.push({filled:!1})}t.selected=5,void 0===t.max&&(t.max=5),t.templateLoaded=function(){o()},t.changeValue=function(e){t.readonly||(t.ratingValue=e+1)},t.setValue=function(){t.readonly||(t.selected=t.ratingValue,t.onRatingSelect({rating:t.selected}))},t.resetValue=function(){t.readonly||(t.selected||(t.ratingValue=0,r()),t.ratingValue=t.selected)},t.$watch("ratingValue",function(e,t){o()})}}}]),function(){"use strict";angular.module("lu").directive("luResizable",function(){return{restrict:"A",scope:{rDirections:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rMinWidth:"=",rMinHeight:"=",windowResizeWatch:"="},link:function(a,i,e){a.$watch("rWidth",function(e){i[0].style.width=a.rWidth+"px"}),a.$watch("rHeight",function(e){i[0].style.height=a.rHeight+"px"}),i.addClass("resizable");var s,l,c,u,d,o,r=window.getComputedStyle(i[0],null),t=a.rDirections,p=a.rCenteredX?2:1,_=a.rCenteredY?2:1,n=a.windowResizeWatch,m={},f=0,g=0,h=0,b=0,v=0,w=0,y=!1;function M(){y&&console.log.apply(console,arguments)}function S(e,t,n,o,r,a){M("_resizeEventData:"+JSON.stringify({startX:e,startY:t,offsetX:n,offsetY:o,clientX:r,clientY:a})),M("_printInfo:"+JSON.stringify({top:i[0].style.top,left:i[0].style.left,width:i[0].style.width,height:i[0].style.height}))}n&&window.addEventListener("resize",function(){"60%"!==i[0].style.width&&(i[0].style.left="0px",i[0].style.width=window.innerWidth+"px")});function C(){m.width=!1,m.height=!1,"x"==o?m.width=parseInt(i[0].style.width):m.height=parseInt(i[0].style.height),m.id=i[0].id}function A(e){var t=c-e.clientX,n=u-e.clientY;switch(d.toUpperCase()){case"N":if(M("[Dragging] N"),S(c,u,t,n,e.clientX,e.clientY),l+n*_>=a.rMinHeight){var o=g-(e.pageY-b);if(e.clientY<0)return;i[0].style.height=o+"px",i[0].style.top=w+(e.pageY-b)+"px"}break;case"E":if(M("[Dragging] E"),S(c,u,t,n,e.clientX,e.clientY),i[0].clientWidth+t>window.innerWidth)return;s-t*p>=a.rMinWidth&&(i[0].style.width=e.pageX-v+"px");break;case"S":M("[Dragging] S"),S(c,u,t,n,e.clientX,e.clientY),l-n*_>=a.rMinHeight&&(o=g+(e.pageY-b),i[0].style.height=o+"px");break;case"W":if(M("[Dragging] W"),S(c,u,t,n,e.clientX,e.clientY),e.clientX<0)return;var r=f-(e.pageX-h);s+t*p>=a.rMinWidth&&(i[0].style.width=r+"px",i[0].style.left=v+(e.pageX-h)+"px");break;case"SE":if(M("[Dragging] SE"),S(c,u,t,n,e.clientX,e.clientY),i[0].clientWidth+t>window.innerWidth)return;s-t*p>=a.rMinWidth&&(r=f+(e.pageX-h),i[0].style.width=r+"px"),l-n*_>=a.rMinHeight&&(o=g+(e.pageY-b),i[0].style.height=o+"px");break;case"NE":if(M("[Dragging] NE"),S(c,u,t,n,e.clientX,e.clientY),s-t*p>=a.rMinWidth){if(e.clientY<0)return;var r=f+(e.pageX-h);i[0].style.width=r+"px"}l+n*_>=a.rMinHeight&&(o=g-(e.pageY-b),i[0].style.height=o+"px",i[0].style.top=w+(e.pageY-b)+"px");break;case"NW":if(M("[Dragging] NW"),S(c,u,t,n,e.clientX,e.clientY),s+t*p>=a.rMinWidth){if(e.clientY<0)return;r=f-(e.pageX-h);i[0].style.width=r+"px",i[0].style.left=v+(e.pageX-h)+"px"}l+n*_>=a.rMinHeight&&(o=g-(e.pageY-b),i[0].style.height=o+"px",i[0].style.top=w+(e.pageY-b)+"px");break;case"SW":if(M("[Dragging] SW"),S(c,u,t,n,e.clientX,e.clientY),e.clientX<0)return;s+t*p>=a.rMinWidth&&(r=f-(e.pageX-h),i[0].style.width=r+"px",i[0].style.left=v+(e.pageX-h)+"px"),l-n*_>=a.rMinHeight&&(o=g+(e.pageY-b),i[0].style.height=o+"px")}}var L=function(e){C(),a.$emit("lu-resizable.resizeEnd",m),a.$apply(),document.removeEventListener("mouseup",L,!1),document.removeEventListener("mousemove",A,!1),i.removeClass("no-transition"),i.removeClass("stop-propagation"),M("dragEnd")};window.addEventListener("orientationchange",function(){i[0].style.width="100%",i[0].style.height="100%"});for(var $=0;$<t.length;$++)!function(){var e=document.createElement("div"),n=t[$];e.setAttribute("class","rg-"+t[$].toLowerCase()),i[0].appendChild(e),e.ondragstart=function(){return!1},e.addEventListener("mousedown",function(e){var t;t=e,e=n,f=parseFloat(getComputedStyle(i[0],null).getPropertyValue("width").replace("px","")),g=parseFloat(getComputedStyle(i[0],null).getPropertyValue("height").replace("px","")),h=t.pageX,b=t.pageY,v=i[0].getBoundingClientRect().left,w=i[0].getBoundingClientRect().top,o="W"==(d=e).toUpperCase()||"E"==d.toUpperCase()?"x":"y",c=t.clientX,u=t.clientY,s=parseInt(r.getPropertyValue("width")),l=parseInt(r.getPropertyValue("height")),i.addClass("no-transition"),i.addClass("stop-propagation"),document.addEventListener("mouseup",L,!1),document.addEventListener("mousemove",A,!1),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,C(),a.$emit("lu-resizable.resizeStart",m),a.$apply(),M("dragStart")},!1)}()}}})}(),function(){function e(e,n,a,i,s,l){return{restrict:"EA",scope:{orderTypes:"=",luObjects:"=",luAdditional:"=",viewType:"=",pageNumber:"=",fetchUrl:"@",returningObjectName:"@",additionalObjectName:"@",filterController:"@?",filterTemplate:"@?",filterParams:"=?",exposedFunction:"=?",searchPlaceholder:"=?"},templateUrl:"/tc/lu-search-field/lu-search-field-ctg.html",link:function(r,e,t){var o=new l;r.lupHelper=i,r.isFilterApplied=!1,r.topicType=r.lupHelper.forums.topics.type_code.portal,r.getSelectOrder=function(){var e=angular.copy(r.orderTypes),e=_.find(e,function(e){return!!e.default});r.selectedOrder=e||r.orderTypes[0]},r.orderTypes&&r.getSelectOrder();r.switchView=function(e){r.viewType=e},r.changedOrder=function(){var e=r.orderTypes.filter(function(e){return e.value==r.selectedOrder.value});r.selectedOrder=angular.copy(e[0]),r.fetchData()},r.fetchData=function(){var e=a.defer(),t={params:{search:r.searchText,page:r.pageNumber},url:r.fetchUrl};return r.orderTypes&&r.selectedOrder&&(t.params.selectedOrder=r.selectedOrder.value),r.filterEnabled()&&r.filterData&&(t.params=s.prepareParams(r.filterData,t.params,r.excluded_keys)),o.get(null,t,null).then(function(){r.luObjects=o.data[r.returningObjectName],r.luAdditional=o.data[r.additionalObjectName].data,e.resolve(o.data[r.returningObjectName]),e.resolve(o.data[r.additionalObjectName].data)}),e.promise},r.fetchDataByCustomParams=function(e){var t=a.defer(),n={params:{search:e.searchText,page:e.pageNumber},url:r.fetchUrl};return e.orderTypes&&e.selectedOrder&&(n.params.selectedOrder=e.selectedOrder.value),e.filterData&&(n.params=s.prepareParams(e.filterData,n.params,e.excluded_keys)),e.topicType&&(r.topicType=e.topicType),e.clearFiltersIndicator&&(r.isFilterApplied=!1),e.updateFilterData&&(r.filterData=e.filterData),o.get(null,n,null).then(function(){t.resolve(o.data[r.returningObjectName])}),t.promise},r.openFilter=function(){r.filterEnabled()&&(r.exposedFunction.defaultFilterValues&&(r.filterData=r.exposedFunction.defaultFilterValues()),n.open({templateUrl:r.filterTemplate,controller:r.filterController,windowClass:"modal-box modal-box--lg",resolve:{filterData:function(){return r.filterData},filterParams:function(){return r.filterParams},topicType:function(){return r.topicType}}}).result.then(function(e){e.excluded_keys&&(r.excluded_keys=e.excluded_keys),r.isFilterApplied=r.exposedFunction.isFilterApplied?r.exposedFunction.isFilterApplied(e.data):e.isFilterApplied,e.data?(r.topicType=e.topicType,r.filterData=e.data,e.fetchData&&(r.pageNumber=1,r.fetchData())):r.clearFilters(e.fetchData)}))},r.clearFilters=function(e){r.exposedFunction.clearFiltersImplementation?r.exposedFunction.clearFiltersImplementation():(r.filterData=null,r.isFilterApplied=!1,r.excluded_keys=[],r.topicType=r.lupHelper.forums.topics.type_code.portal,(angular.isUndefined(e)||e)&&(r.pageNumber=1,r.fetchData()))},r.changeFilterData=function(e,t,n,o){return n=!!angular.isUndefined(n)||n,o&&(r.pageNumber=o),r.isFilterApplied=!!angular.isUndefined(t)||t,angular.equals(r.filterData,e)?a.reject():(r.filterData=e,n?r.fetchData():a.reject())},r.isFilterOrSearchApplied=function(){return r.isFilterApplied||!!r.searchText},r.returnFilterData=function(){return angular.copy(r.filterData)},r.exposedFunction=r.exposedFunction||{},r.exposedFunction=angular.extend({},{fetch:r.fetchData,changeFilterData:r.changeFilterData,filterOrSearchApplied:r.isFilterOrSearchApplied,fetchDataByCustomParams:r.fetchDataByCustomParams,returnFilterData:r.returnFilterData},r.exposedFunction),r.filterEnabled=function(){return!!r.filterController&&!!r.filterTemplate},r.searchInputPlaceholder=function(){return r.searchPlaceholder?r.searchPlaceholder:r.lupHelper.showMessage("lup.search_placeholder.default_placeholder")},r.submitSearch=function(){r.pageNumber=1,r.fetchData()},r.searchTextChangeHandler=function(){r.searchText||r.submitSearch()}}}}angular.module("lu").directive("luSearchFieldCtg",e),e.$inject=["$http","$modal","$q","LupHelper","LupService","learnUponApi"]}(),function(){function e(e,a,i,s,l,c){return{restrict:"EA",scope:{orderTypes:"=",luObjects:"=",viewType:"=",pageNumber:"=",fetchUrl:"@",returningObjectName:"@",filterController:"@?",filterTemplate:"@?",filterParams:"=?",exposedFunction:"=?",searchPlaceholder:"=?"},templateUrl:"/tc/lu-search-field/lu-search-field.html",link:function(r,e,t){var o=new c;{var n;r.lupHelper=s,r.isFilterApplied=!1,r.topicType=r.lupHelper.forums.topics.type_code.portal,r.orderTypes&&(n=angular.copy(r.orderTypes),r.selectedOrder=n[0])}r.switchView=function(e){r.viewType=e},r.changedOrder=function(){var e=r.orderTypes.filter(function(e){return e.value==r.selectedOrder.value});r.selectedOrder=angular.copy(e[0]),r.fetchData()},r.fetchData=function(){var e=i.defer(),t={params:{search:r.searchText,page:r.pageNumber},url:r.fetchUrl};return r.orderTypes&&r.selectedOrder&&(t.params.selectedOrder=r.selectedOrder.value),r.filterEnabled()&&r.filterData&&(t.params=l.prepareParams(r.filterData,t.params,r.excluded_keys)),o.get(null,t,null).then(function(){r.luObjects=o.data[r.returningObjectName],e.resolve(o.data[r.returningObjectName])}),e.promise},r.fetchDataByCustomParams=function(e){var t=i.defer(),n={params:{search:e.searchText,page:e.pageNumber},url:r.fetchUrl};return e.orderTypes&&e.selectedOrder&&(n.params.selectedOrder=e.selectedOrder.value),e.filterData&&(n.params=l.prepareParams(e.filterData,n.params,e.excluded_keys)),e.topicType&&(r.topicType=e.topicType),e.clearFiltersIndicator&&(r.isFilterApplied=!1),e.updateFilterData&&(r.filterData=e.filterData),o.get(null,n,null).then(function(){t.resolve(o.data[r.returningObjectName])}),t.promise},r.openFilter=function(){r.filterEnabled()&&(r.exposedFunction.defaultFilterValues&&(r.filterData=r.exposedFunction.defaultFilterValues()),a.open({templateUrl:r.filterTemplate,controller:r.filterController,windowClass:"modal-box modal-box--lg",resolve:{filterData:function(){return r.filterData},filterParams:function(){return r.filterParams},topicType:function(){return r.topicType}}}).result.then(function(e){e.excluded_keys&&(r.excluded_keys=e.excluded_keys),r.isFilterApplied=r.exposedFunction.isFilterApplied?r.exposedFunction.isFilterApplied(e.data):e.isFilterApplied,e.data?(r.topicType=e.topicType,r.filterData=e.data,e.fetchData&&(r.pageNumber=1,r.fetchData())):r.clearFilters(e.fetchData)}))},r.clearFilters=function(e){r.exposedFunction.clearFiltersImplementation?r.exposedFunction.clearFiltersImplementation():(r.filterData=null,r.isFilterApplied=!1,r.excluded_keys=[],r.topicType=r.lupHelper.forums.topics.type_code.portal,(angular.isUndefined(e)||e)&&(r.pageNumber=1,r.fetchData()))},r.changeFilterData=function(e,t,n,o){return n=!!angular.isUndefined(n)||n,o&&(r.pageNumber=o),r.isFilterApplied=!!angular.isUndefined(t)||t,angular.equals(r.filterData,e)?i.reject():(r.filterData=e,n?r.fetchData():i.reject())},r.isFilterOrSearchApplied=function(){return r.isFilterApplied||!!r.searchText},r.returnFilterData=function(){return angular.copy(r.filterData)},r.exposedFunction=r.exposedFunction||{},r.exposedFunction=angular.extend({},{fetch:r.fetchData,changeFilterData:r.changeFilterData,filterOrSearchApplied:r.isFilterOrSearchApplied,fetchDataByCustomParams:r.fetchDataByCustomParams,returnFilterData:r.returnFilterData},r.exposedFunction),r.filterEnabled=function(){return!!r.filterController&&!!r.filterTemplate},r.searchInputPlaceholder=function(){return r.searchPlaceholder?r.searchPlaceholder:r.lupHelper.showMessage("lup.search_placeholder.default_placeholder")},r.submitSearch=function(){r.pageNumber=1,r.fetchData()},r.searchTextChangeHandler=function(){r.searchText||r.submitSearch()}}}}angular.module("lu").directive("luSearchField",e),e.$inject=["$http","$modal","$q","LupHelper","LupService","learnUponApi"]}(),function(){"use strict";angular.module("lu").directive("luSelectTextOnFocus",e),e.$inject=["$timeout"];var r="";function e(o){return{link:function(t,n,e){n.bind("click",function(){o(function(){var e=n[0].id+"_"+t.$index;e!==r&&(n.select(),r=e)},1)}),n.bind("blur",function(){r=""})},restrict:"A"}}}(),function(){"use strict";function e(n){return{restrict:"E",replace:!0,scope:{options:"="},templateUrl:"/tc/sessions/session-details-redesign.html",link:function(e){var t={month:(e.Helper=n).showMessage("lup.date.month"),day:"31",year:n.showMessage("lup.date.year"),datetime:n.showMessage("lup.live_trainings.preview.session.datetime"),location:n.showMessage("lup.live_trainings.preview.session.location")};e.sessionOptions=e.options||t}}}angular.module("lu").directive("luSessionDetailsRedesign",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(n){return{restrict:"E",replace:!0,scope:{options:"="},templateUrl:"/tc/sessions/session-details.html",link:function(e){var t={month:n.showMessage("lup.date.month"),day:"31",year:n.showMessage("lup.date.year"),datetime:n.showMessage("lup.live_trainings.preview.session.datetime"),location:n.showMessage("lup.live_trainings.preview.session.location")};e.sessionOptions=e.options||t}}}angular.module("lu").directive("luSessionDetails",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(n){return{restrict:"E",replace:!0,scope:{limit:"@",initiallyExpanded:"@",text:"="},templateUrl:"/tc/shared/lu-show-more.html",link:function(t){t.ellipsis=" ...";var e=t.limit||400;t.LupHelper=n,t.textLimit=t.text.length>=e&&t.text.length<=e+50?e-100:e,t.expanded=t.initiallyExpanded||!1,t.toggle=function(e){e.preventDefault(),t.expanded=!t.expanded}}}}angular.module("lu").directive("luShowMore",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(r,a){return function(e,t){var n=angular.element(r),o=document.getElementById("module-view-wrapper");e.giveMeTheScrollableHeight=function(){try{return o.scrollHeight}catch(e){return 0}},e.giveMeTheDivHeight=function(){try{return o.clientHeight}catch(e){return 0}},e.getWindowDimensions=function(){return{h:n.outerHeight(),w:n.outerWidth(),sh:e.giveMeTheScrollableHeight(),ch:e.giveMeTheDivHeight()}},e.$watch(e.getWindowDimensions,function(e,t){a.windowHeight=e.h,a.windowWidth=e.w,a.scrollableHeight=e.sh,a.clientHeight=e.ch},!0),n.bind("resize",function(){e.$apply()})}}angular.module("lu").directive("luSize",e),e.$inject=["$window","$rootScope"]}(),function(){var t={handler:"&customHandler",socialWidth:"@",socialHeight:"@"};angular.module("socialLinks",[]).factory("socialLinker",["$window","$location",function(s,l){return function(i){return function(n,o,t){var e,r="status=no, width="+(n.socialWidth||640)+", height="+(n.socialHeight||480)+", resizable=yes, toolbar=no, menubar=no, scrollbars=no, location=no, directories=no",a=function(){return t.customUrl||l.absUrl()};return t.$observe("customUrl",function(){var e=i(n,a());if("A"===o[0].nodeName&&(!t.href||""===t.href))return o.attr("href",e)}),o.attr("rel","nofollow"),e=function(e){return e.preventDefault(),e=i(n,a()),s.open(e,"popupwindow",r).focus()},t.customHandler?o.on("click",e=function(e){var t=i(n,a());return o.attr("href",t),n.handler({$event:e,$url:t})}):o.on("click",e),n.$on("$destroy",function(){return o.off("click",e)})}}}]).directive("socialTwitter",["socialLinker",function(e){return{restrict:"ACEM",scope:angular.extend({status:"@status",customHashes:"@customHashes",relatedAccounts:"@relatedAccounts"},t),link:e(function(e,t){return e.status=e.status+" "+t,encodeURI("https://twitter.com/intent/tweet?hashtags="+e.customHashes+"&related="+e.relatedAccounts+"&text="+e.status)})}}])}.call(this),function(){"use strict";function e(e,r){return{restrict:"A",link:function(e,t,n){var o=window.location.href,t=_.map(t.find("a"),function(e){var t=!1;try{t="active"===e.parentNode.className}catch(e){t=!1}return{link:e.href,text:e.innerHTML,active:t||o===e.href}});r.activeSubnavTab=_.find(t,function(e){return e.active})}}}angular.module("lu").directive("luSubnavActiveTab",e),e.$inject=["$window","$rootScope"]}(),function(){"use strict";function e(r,a){return{restrict:"A",link:function(e,n,t){function o(e){for(var t=e.children(),n=t.length,o=function(e){switch(e){case 1:return"col-xs-12";case 2:return"col-xs-6";case 3:return"col-xs-4";case 4:return"col-xs-6";case 5:case 6:default:return"col-xs-4"}}(t.length),r=0;r<n;r++)t[r].className=o}r(function(){o(n)}),a.$on("luSummaryFilterLayout:update",function(e,t){r(function(){o(n)})})}}}angular.module("lu").directive("luSummaryFilterLayout",e),e.$inject=["$timeout","$rootScope"]}(),function(){"use strict";function e(r){return{replace:!0,restrict:"EA",require:"?^form",scope:{id:"@",name:"@",truthyOptionText:"@truthyOptionText",falsyOptionText:"@falsyOptionText",ngModel:"=ngModel",ngChange:"&ngChange",luDisabled:"=luDisabled",popUpMessage:"@?",popUpData:"@?",popUpTitle:"@?",popUpDoNotTranslate:"@?",removeHidden:"=?"},templateUrl:"/tc/shared/lu-switch.html",link:function(n,e,t,o){n.multiOption=!!n.truthyOptionText&&!!n.falsyOptionText,n.keyParser=function(e){var t={32:"space",13:"enter",112:"f1"}[e.keyCode];"space"!=t&&"enter"!=t||(n.changeValue(null,!0),e.preventDefault()),n.popUpMessage&&"f1"==t&&(r.showTip(n.popUpMessage),e.preventDefault())},n.infoPresent=function(){if(n.popUpMessage)return", "+r.showMessage("lup.more_info.help")},n.changeValue=function(e,t){n.luDisabled||(n.$form&&n.$form.$setDirty(),n.multiOption&&!t?n.ngModel=!!e:n.ngModel=!n.ngModel,n.ngChange&&n.ngChange())},n.$form=o,n.showHidden=!n.removeHidden,n.ngModel=!!n.ngModel,n.LupHelper=r}}}angular.module("lu").directive("luSwitch",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(){return{restrict:"EA",scope:{disabled:"=ngDisabled",value:"@",name:"@",model:"=?ngModel",interval:"@",id:"@",placeholder:"@"},templateUrl:"/tc/lu-time-picker/lu-time-picker.html",link:{pre:function(e,t,n){e.viewId=e.id,e.interval||(e.interval=15);e.viewId||(e.viewId="timepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()));$(t).find("input").timepicker({minuteStep:e.interval,template:!1,showInputs:!1})},post:function(o,e,t){var n;o.toggleTimePicker=function(e){if(e.preventDefault(),e.stopPropagation(),o.disabled)return;o.timepickerOpened=!o.timepickerOpened},o.chooseTime=function(e){o.viewModel=e,o.timepickerOpened=!1,o.$parent.form&&o.$parent.form.$setDirty()},o.timepickerOpened=!1,o.validateOnBlur=function(){/^(([0]?[\d])|([1][0-2])):([0-5][\d])\s?(AM|PM)$/.test(o.viewModel)||(o.viewModel=n)},$(document).on("click",function(e){o.timepickerOpened=!1,o.$apply()}),o.timeOptions=function(e){for(var t=[],n=0,o=["AM","PM"],r=0;n<1440;r++){var a=Math.floor(n/60),i=("0"+n%60).slice(-2),s=("0"+(a%12).toString()).slice(-2),l=o[Math.floor(a/12)];a%12==0&&(s="12"),t[r]=s+":"+i+" "+l,n+=e}return t}(o.interval),o.viewModel=function(e){if(!e)return null;var t=+e.split(":")[0];if(t<12)return e+" AM";t=("0"+(t-12).toString()).slice(-2),e=e.split(":")[1];return t+":"+e+" PM"}(o.model),o.viewModel&&(n=o.viewModel);function r(){var e,t,n;o.viewModel&&(e=o.viewModel,t=(n=e.split(" "))[0],e=n[1],n=t.split(":")[0],t=t.split(":")[1],"12"===n&&(n="00"),"PM"===e&&(n=parseInt(n,10)+12),t=n+":"+t,o.model=t)}o.$watch("viewModel",function(){r()},!0)}}}}angular.module("lu").directive("luTimePicker",e),e.$inject=[]}(),function(){"use strict";function e(){return{replace:!0,restrict:"A",scope:{id:"@",activeClass:"@",inactiveClass:"@",ngModel:"=ngModel",onClicked:"&?",relatedObject:"=?"},template:function(e,t){return['<span class="inline-middle" ng-click="toggle($event)" ng-keydown="($event.keyCode === 32) && toggle($event)">','<i class="fa starred" ng-class="{\'fa-star\' : ngModel, \'fa-star-o\' : !ngModel}" aria-hidden="true"></i>',"</span>"].join("")},link:function(t,e,n,o){t.onClicked=t.onClicked(),t.toggle=function(e){e.preventDefault(),t.ngModel=!t.ngModel;e={};e.model=t.ngModel,t.relatedObject&&(e.relatedObject=t.relatedObject),t.onClicked(e)}}}}angular.module("lu").directive("luToggleStar",e),e.$inject=[]}(),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.hasModernUserMedia="mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices,window.hasModernUserMedia&&(navigator.getMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)),window.hasUserMedia=function(){return!!navigator.getMedia},function(){"use strict";function e(v){return{template:'<div class="webcam" ng-transclude></div>',restrict:"E",replace:!0,transclude:!0,scope:{onError:"&",onStream:"&",onStreaming:"&",videoStatus:"=",placeholder:"=",videoHeight:"=",videoWidth:"=",ngModel:"=?",isVideoStarted:"=?",isVideoEnded:"=?",courseProgressionUiRedesign:"=?"},link:function(a,r){function i(e){e&&ng.element(e).remove()}function e(){u&&"function"==typeof u.stop&&u.stop(),c&&delete c.src}function s(t,n){setTimeout(b,9e5),setTimeout(function(){var e;n.remove(),u=t,window.hasModernUserMedia?(c.srcObject=t,c.muted=!0):navigator.mozGetUserMedia?c.mozSrcObject=t:(e=window.URL||window.webkitURL,c.src=e.createObjectURL(t)),c.play(),a.onStream&&a.onStream({stream:t,video:c}),(g=g||new MediaRecorder(t)).ondataavailable=function(e){h.push(e.data)},g.onstop=function(e){var t,n,o,r;t="video",n=h[0].type,a.ngModel,o=document.querySelector("#videoPreview"),r=new Blob(h,{type:n}),n=window.URL.createObjectURL(r),(t=document.createElement(t)).setAttribute("controls",""),t.setAttribute("disablePictureInPicture",""),t.setAttribute("controlsList","nodownload"),t.setAttribute("id","video_preview"),t.src=n,o.insertBefore(t,o.firstElementChild),a.ngModel=r,g=null,h=[]},g.onerror=function(e){},g.start(),a.courseProgressionUiRedesign&&(c.style.display="block")},3e3)}function l(e){i(d),console&&console.log,a.onError&&a.onError({err:e}),a.courseProgressionUiRedesign&&(c.style.display="block")}function n(){var e=document.querySelector("#videoPreview");c=document.createElement("video"),p=document.createElement("span"),m=setInterval(function(){1===f&&clearInterval(m),a.courseProgressionUiRedesign&&(_.style.backgroundColor="black",_.style.color="white",_.style.width="488px",_.style.height="366px"),_.innerText=v.showMessage("lup.assignments.video_recorder.starting")+" "+f,f--},1e3),(_=document.createElement("span")).setAttribute("class","recording-loading"),e.append(_),c.setAttribute("class","webcam-live"),c.setAttribute("autoplay",""),p.setAttribute("class","record-indicator"),r.append(c),a.courseProgressionUiRedesign&&(c.style.display="none"),a.placeholder&&((d=document.createElement("img")).setAttribute("class","webcam-loader"),d.src=a.placeholder,r.append(d));var t=!1,n=r.width=a.videoWidth||320,o=r.height=0;window.hasUserMedia()?(e={video:!0,audio:!0},window.hasModernUserMedia?navigator.getMedia(e).then(function(e){return s(e,_)}).catch(l):navigator.getMedia(e,s,l),c.addEventListener("canplay",function(){var e;t||(e=n/c.videoWidth,o=c.videoHeight*e||a.videoHeight,c.setAttribute("width",n),r.append(p),c.setAttribute("height",o),t=!0,a.isVideoStarted=!0,a.$emit("isVideoStarted",a.isVideoStarted),i(d),a.onStreaming&&a.onStreaming({video:c}))},!1)):l({code:-1,msg:"Browser does not support getUserMedia."})}function o(){f=3,g&&(g.stop(),g.stream.getTracks().forEach(function(e){return e.stop()})),e(),c.remove(),p.remove()}var c=null,u=null,d=null,p=null,_=null,m=null,f=3,g=null,h=[],b=function(){a.$emit("videoEnded",a.isVideoEnded)};a.$on("$destroy",e),a.$on("START_WEBCAM",n),a.$on("STOP_WEBCAM",o),a.$watch("videoStatus",function(e,t){e!=t&&(1==e&&n(),0==e&&o())})}}}angular.module("lu").directive("luWebcam",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(){return{restrict:"A",scope:!1,link:t}}function t(e,t,n){$(t).updatePolyfill()}angular.module("lu").directive("luWebshim",e),e.$inject=[]}(),function(){"use strict";function e(r){return{require:"form",link:function(e,t,n,o){t.on("submit",function(e){!function(e){e=_.select(e,function(e){return"checkbox"==e.type});_.each(e,function(e){e.value=!!e.value})}(e.currentTarget.elements),e.preventDefault()}),o.commit=function(){r(function(){t[0].submit()},300)}}}}window.angular.module("lu").directive("postFormNoAjax",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(o){return{link:function(e,t,n){n=decodeURIComponent(n.preloadFlash);(n=JSON.parse(n)||{})&&o.onFlash(n)}}}window.angular.module("lu").directive("preloadFlash",e),e.$inject=["notifyFactory"]}(),window.angular.module("lu").directive("preloadLocaleSettings",[function(){return{link:function(e,t,n){e.timezone=n.preloadLocaleSettings,e.lupLocale=n.preloadLocal,e.dateFormat=n.preloadDateFormat,e.dateFormat&&(e.dateFormat=e.dateFormat.replace("%Y","YYYY"),e.dateFormat=e.dateFormat.replace("%d","D"),e.dateFormat=e.dateFormat.replace("%m","M")),t.remove()}}}]),function(){"use strict";function e(o){return{restrict:"A",replace:!0,scope:{preloadResource:"@?preloadResource"},link:{pre:angular.noop,post:function(e,t,n){{angular.isDefined(e.preloadResource)&&(e=decodeURIComponent(e.preloadResource),e=JSON.parse(e)||{},o.set(e))}}}}}angular.module("lu").directive("preloadResource",e),e.$inject=["StorageFactory"]}(),window.angular.module("lu").directive("preloadSettings",[function(){return{link:function(e,t,n){n=JSON.parse(n.preloadSettings);angular.extend(e,n||{})}}}]),function(){"use strict";function e(){return{replace:!0,restrict:"A",scope:{items:"=",selection:"=",topLevelClick:"=",itemSelect:"@itemSelect",onStateChange:"&?",clearSelectionOnPaginate:"@?",canBeSelected:"&?",doSelectionBy:"&?"},template:n,controller:t,controllerAs:"saCtrl",bindToController:!0}}function t(n,t,e){var o=this;function r(){var e=_.countBy(n.items,function(e){return _.contains(n.selection,a(e))?"selected":"non_selected"});t.prop("indeterminate",!1),0<e.selected&&e.non_selected&&0<e.non_selected?(o.topLevel=!1,t.prop("indeterminate",!0)):0<e.selected&&!e.non_selected?o.topLevel=!0:o.topLevel=!1,o.onStateChange&&o.onStateChange()}function a(e){return angular.isDefined(n.doSelectionBy())?n.doSelectionBy()(e):e.id}function i(){angular.forEach(n.items,function(e){var t;_.contains(n.selection,a(e))||(t=e,angular.isDefined(n.canBeSelected())&&!n.canBeSelected()(t))||n.selection.push(a(e))})}function s(){angular.forEach(n.items,function(e){e=n.selection.indexOf(a(e));-1<e&&n.selection.splice(e,1)})}function l(){return function(e,t){r()}}o.topLevel=void 0,o.topLevelChange=function(){(o.topLevel?i:s)();n.topLevelClick&&n.topLevelClick();o.onStateChange&&o.onStateChange()},o.selectAllOnPage=i,o.deselectAllOnPage=s,o.onStateChange=n.onStateChange(),n.$watch(function(){return n.items},l(),!0),n.itemSelect?(n.$on(n.itemSelect,function(){r()}),r()):n.$watch("selection",l(),!0),e.$on("selectAll:deSelectAll",function(){n.selection.length=0,r()}),e.$on("lupPagination:page-change",function(e,t){n.clearSelectionOnPaginate&&"true"===n.clearSelectionOnPaginate&&(n.selection.length=0)})}function n(e,t){return'<input type="checkbox" ng-model="saCtrl.topLevel" class="f-left" ng-change="saCtrl.topLevelChange()">'}angular.module("lu").directive("selectAllCheckbox",e),e.$inject=[],t.$inject=["$scope","$element","$rootScope"]}(),angular.module("lu").directive("lupShowCoursePage",["$http","$sce","$rootScope","$window","$document","EnrollmentHelper","LupHelper","WebinarLauncherFactory","EnrollmentFactory","paramsService","$luPopover","$modal","LupJobFactory","$anchorScroll","$location","$timeout","$filter","spinnerService","notifyFactory","$compile",function(u,y,d,M,e,S,C,p,m,A,L,f,$,T,z,x,P,k,E,t){return{restrict:"E",scope:{pageToShow:"=page",isPreview:"=preview",enrollment:"=enrollment",cs:"=?",settingMinimalThresholdForMsTeamsEnabled:"=?",courseProgressionUiRedesign:"=?",rawTimezone:"=?",webComponentsRedesignEnabled:"=?",concurrentAndSeriesSessions:"=?"},template:'<div ng-include="getTemplateUrl()"></div>',link:function(g,e,t){var n,o;g.EnrollmentHelper=S,g.Helper=C,g.showWarning=!1,g.timeForExam=0,g.showWarningAt=0,g.was_auto_submitted=!1,g.is_reattempt=!1,g.scormDebuggerEnabled=!1,g.showLeaveExam=function(){return g.pageToShow.allow_to_continue},g.leaveExam=function(){L.confirm(C.showMessage("exams.leave_exam"),C.showMessage("lup.during_exam.leave_exam_modal.leave_exam_confirmation_text")).then(function(e){M.angular.element(M).off("beforeunload"),g.isPreview?M.location="/courses/"+g.enrollment.course_id:M.location="/enrollments/"+g.pageToShow.enrollment_id+"/content"})},g.haveQuestionsOnStartConfirmation=function(){var e=!0;(!g.pageToShow.exam_start_message||g.pageToShow.exam_start_message&&g.pageToShow.exam_start_message===C.showMessage("components.percentage_unknown"))&&(e=!1);return e},g.showAvailableAnswers=function(t){f.open({templateUrl:"/tc/enrollments/available_answers.html",controller:"AvailableMatchAnswersController as vm",size:"lg",resolve:{answerOption:function(){return t},availableAnswers:function(){return g.pageToShow.available_match_answers}}}).result.then(function(e){t.matches.push(e.chosen_answer),g.pageToShow.available_match_answers=_.without(g.pageToShow.available_match_answers,_.findWhere(g.pageToShow.available_match_answers,{id:e.chosen_answer.id}))})},g.cdn_path=CONFIG.cdnPath,g.enrollee_email=g.pageToShow.enrollee_email,g.examViewModes=C.examViewModes,g.portalDateFormat=d.dateFormat,g.webinarLauncher=p.build(g.pageToShow.webinar_type,g.pageToShow.start_at,g.pageToShow.end_at),g.isStarted=!1,g.signature="",g.enableSignButton=!0,g.isTakingExam=!1,g.skippingSurvey=!1,g.mapRadiobttonOptionsToWebComponentFormat=function(e){for(var t,n=document.querySelector("luds-radio-button-group"),e=g.pageToShow.answer_options.data,o=[],r=0;r<e.length;r++){var a=e[r];o.push({value:a.id,label:a.text,checked:a.is_checked,radioAriaLabel:C.showMessage("lup.a11y.survey_page_article_checkbox",{article_name:a.text,current_article:r+1,total_articles:e.length}),portal_id:a.portal_id})}return n&&(t=n)&&!g.exist&&(g.exist=!0,t.addEventListener("luds-radio-button-group:value-changed",function(e){var t=e.target.options.filter(function(e){return!0===e.checked}).map(function(e){return{id:e.value,portal_id:e.portal_id,is_checked:e.checked,text:e.label}})[0];g.pageToShow.answer_options.data=g.pageToShow.answer_options.data.map(function(e){return e.id!==t.id||e.is_checked?Object.assign({},e,{is_checked:!1}):Object.assign({},e,t)}),g.$apply()})),o},g.mapCheckboxOptionsToWebComponentFormat=function(e){for(var t,n=document.querySelector("luds-checkbox-group"),e=g.pageToShow.answer_options.data,o=[],r=0;r<e.length;r++){var a=e[r];o.push({value:a.id,label:a.text,checked:a.is_checked,checkboxAriaLabel:C.showMessage("lup.a11y.survey_page_article_checkbox",{article_name:a.text,current_article:r+1,total_articles:e.length}),portal_id:a.portal_id})}return n&&(t=n)&&t.addEventListener("luds-checkbox-group-value:changed",function(e){var n=e.target.options.filter(function(e){return!0===e.checked}).map(function(e){return{id:e.value,portal_id:e.portal_id,is_checked:e.checked,text:e.label}});g.pageToShow.answer_options.data=g.pageToShow.answer_options.data.map(function(t){var e=n.find(function(e){return e.id===t.id});return e?Object.assign({},t,{is_checked:e.is_checked}):Object.assign({},t,{is_checked:!1})}),g.$apply()}),o},g.$parent.flags&&0==g.$parent.flags.show_sign_button_immediately&&g.$parent.$watch("esignatureTrackingComplete",function(e,t){g.enableSignButton=e}),g.characterLimit=200,g.expandedId=null,g.pageToShow.session&&(g.toggleReadMore=function(e){g.expandedId===e?g.expandedId=null:g.expandedId=e},g.getDescription=function(e,t){return g.expandedId===e?t:g.getShortDescription(t)},g.getShortDescription=function(e){return e.length>g.characterLimit?e.substring(0,g.characterLimit)+"...":e}),g.sessionsData=g.pageToShow.session_type===C.sessionType.SERIES?g.pageToShow.session:[g.pageToShow.session],g.buildSessionDate=function(e,t){if(g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.not_started&&g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.completed&&g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.failed||null==g.pageToShow.session)return null;switch(t){case"year":return P("displayDateTime")(e.start_date,"YYYY");case"month":return P("displayDateTime")(e.start_date,"MMM");case"day":return P("displayDateTime")(e.start_date,"DD");case"datetime":return P("displayDateTime")(e.start_time,C.date_formats.session)+" - "+P("displayDateTime")(e.end_time,C.date_formats.session)+" ("+e.timezone+")";case"location":return e.location;case"isWebinar":return e.environment_type!==C.trainingEnvironment.in_person;case"webinar_type":return C.showMessage("ilts.webinars.webinar");case"status":return c();default:return null}},g.skipSurvey=function(){g.skippingSurvey=!0,i("submit")},g.getTemplateUrl=function(){return g.courseProgressionUiRedesign?"/tc/enrollments/show_course_page_redesign.html":"/tc/enrollments/show_course_page.html"},g.pageToShow.component_type_id===C.componentTypes.training&&(n=g.courseProgressionUiRedesign||g.concurrentAndSeriesSessions,!0===g.courseProgressionUiRedesign?g.trainingEnrollmentStatus=n?g.isPreview?{label:C.showMessage("lup.live_trainings.course_module.session.tooltip.registered"),pillClass:"success"}:{label:C.getTrainingEnrollmentStatusLabelRedesign(g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_choose_session,g.pageToShow.waitlisted),pillClass:C.getTrainingEnrolmentStatusPillClassRedesign(g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_choose_session,g.pageToShow.waitlisted),pillIcon:C.getTrainingEnrolmentStatusPillIconRedesign(g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_choose_session,g.pageToShow.waitlisted)}:s():g.trainingEnrollmentStatus=s(),g.trainingConfigPills=g.isPreview?[{label:C.showMessage("lup.live_trainings.preview.format_pill")}]:[{label:C.trainingEnvironmentLabels[g.pageToShow.environment_type]},{label:C.trainingFormatTypesLabels[g.pageToShow.format_type]}],g.trainingCtaOptions=function(){if(g.isPreview||g.pageToShow.enrollment_status_id!=C.trainingEnrollmentStatuses.not_registered)return null;if(g.pageToShow.session_registration_choice==C.sessionRegistrationChoices.automatic)return{title:C.showMessage("events.registration_cta.automatic_registration_waiting_title"),description:C.showMessage("lup.live_trainings.registration_cta.automatic_registration_waiting_description"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()};if(g.pageToShow.learner_can_choose_session)return g.pageToShow.number_of_sessions_available||g.pageToShow.training_waitlist_status?!g.pageToShow.number_of_sessions_available&&g.pageToShow.training_waitlist_status&&g.pageToShow.register_waitlist_enabled_on_any_session?{title:C.showMessage("lup.course_progression.waitlist_no_sessions_available"),description:C.showMessage("lup.course_progression.waitlist_no_sessions_available_info_text"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()}:{title:C.showMessage("events.registration_cta.choose_title_no_sessions"),description:C.showMessage("events.registration_cta.choose_description"+(1===g.pageToShow.number_of_sessions_available?"_singular":""),{number_of_sessions:g.pageToShow.number_of_sessions_available}),ctaClass:g.courseProgressionUiRedesign?"cta-redesign--danger":"cta--light",image:{url:g.cdn_path+"images/cta/register-for-session.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.choose_ximage_alt_tag")},buttons:l()}:{title:C.showMessage("events.registration_cta.choose_title_no_sessions"),description:C.showMessage("events.registration_cta.choose_description_no_sessions"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()};return{title:C.showMessage("lup.live_trainings.registration_cta.admin_choose_title"),description:C.showMessage("lup.live_trainings.registration_cta.admin_choose_description"),image:{url:g.cdn_path+"images/cta/registration_in_progress.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()}}(),g.instructorsPopoverText=function(){if(g.isPreview)return C.showMessage("group_memberships.instructors");var e="",t=C.showMessage(g.pageToShow.enrollment_status_id===C.trainingEnrollmentStatuses.not_registered?"events.registration.event_team":"group_memberships.instructors");g.pageToShow.instructors&&(e=g.pageToShow.instructors.map(function(e){return e.display_name}).join(", "));return t+": "+e}(),g.pageToShow.sessionOptions=function(){if(g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.not_started&&g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.completed&&g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.failed||null==g.pageToShow.session)return null;return session=g.pageToShow.session,{year:P("displayDateTime")(session.start_date,"YYYY"),month:P("displayDateTime")(session.start_date,"MMM"),day:P("displayDateTime")(session.start_date,"DD"),datetime:P("displayDateTime")(session.start_time,C.date_formats.session)+" - "+P("displayDateTime")(session.end_time,C.date_formats.session)+" ("+session.timezone+")",location:session.location,isWebinar:session.environment_type!==C.trainingEnvironment.in_person,webinar_type:C.showMessage("ilts.webinars.webinar"),status:c()}}(),g.trainingAlertText=function(){if(g.concurrentAndSeriesSessions)return C.getTrainingEnrollmentAlertLabelWebComponents(g.pageToShow.enrollment_status_id);return C.getTrainingEnrollmentAlertLabel(g.pageToShow.enrollment_status_id)}(),g.concurrentAndSeriesSessions&&(g.trainingOptionsWebComponent=(g.pageToShow.session_type===C.sessionType.SINGLE?function(){if(g.isPreview||g.pageToShow.enrollment_status_id!=C.trainingEnrollmentStatuses.not_registered)return null;if(g.pageToShow.session_registration_choice==C.sessionRegistrationChoices.automatic)return{title:C.showMessage("events.registration_cta.automatic_registration_waiting_title"),description:C.showMessage("lup.live_trainings.registration_cta.automatic_registration_waiting_description"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:null};if(g.pageToShow.learner_can_choose_session)return g.pageToShow.number_of_sessions_available||g.pageToShow.register_waitlist_enabled_on_any_session?!g.pageToShow.number_of_sessions_available&&g.pageToShow.training_waitlist_status&&g.pageToShow.register_waitlist_enabled_on_any_session?{title:C.showMessage("lup.course_progression.waitlist_no_sessions_available"),description:C.showMessage("lup.course_progression.waitlist_no_sessions_available_info_text"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()}:{title:C.showMessage("events.registration_cta.choose_title_no_sessions"),description:C.showMessage("events.registration_cta.choose_description"+(1===g.pageToShow.number_of_sessions_available?"_singular":""),{number_of_sessions:g.pageToShow.number_of_sessions_available}),ctaClass:"cta-redesign--default",image:{url:g.cdn_path+"images/cta/registration_in_progress.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.choose_ximage_alt_tag")},buttons:l()}:{title:C.showMessage("events.registration_cta.choose_title_no_sessions"),description:C.showMessage("events.registration_cta.choose_description_no_sessions"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()};return{title:C.showMessage("lup.live_trainings.registration_cta.admin_choose_title"),description:C.showMessage("lup.live_trainings.registration_cta.admin_choose_description"),image:{url:g.cdn_path+"images/cta/registration_in_progress.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()}}:function(){if(g.isPreview||g.pageToShow.enrollment_status_id!=C.trainingEnrollmentStatuses.not_registered)return null;if(g.pageToShow.session_registration_choice==C.sessionRegistrationChoices.automatic)return{title:C.showMessage("events.registration_cta.automatic_registration_waiting_title"),description:C.showMessage("events.registration_cta_for_session_series.automatic_registration_waiting_description"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:null};if(g.pageToShow.learner_can_choose_session)return g.pageToShow.number_of_sessions_available||g.pageToShow.register_waitlist_enabled_on_any_session?!g.pageToShow.number_of_sessions_available&&g.pageToShow.training_waitlist_status&&g.pageToShow.register_waitlist_enabled_on_any_session?{title:C.showMessage("lup.course_progression.waitlist_no_sessions_available"),description:C.showMessage("events.registration_cta_for_session_series.waitlist_no_sessions_available_info_text"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()}:{title:C.showMessage("events.registration_cta.choose_title_no_sessions"),description:C.showMessage("events.registration_cta_for_session_series.choose_description"+(1===g.pageToShow.number_of_sessions_available?"_singular":""),{number_of_sessions:g.pageToShow.number_of_sessions_available}),ctaClass:"cta-redesign--default",image:{url:g.cdn_path+"images/cta/registration_in_progress.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.choose_ximage_alt_tag")},buttons:l()}:{title:C.showMessage("events.registration_cta.choose_title_no_sessions"),description:C.showMessage("events.registration_cta_for_session_series.choose_description_no_sessions"),image:{url:g.cdn_path+"images/cta/register-for-session-no-sessions.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()};return{title:C.showMessage("lup.live_trainings.registration_cta.admin_choose_title"),description:C.showMessage("events.registration_cta_for_session_series.admin_choose_description"),image:{url:g.cdn_path+"images/cta/registration_in_progress.png",alt_tag:C.showMessage("lup.live_trainings.registration_cta.admin_choose_image_alt_tag")},buttons:l()}})())),g.pageToShow.component_type_id===C.componentTypes.session&&g.courseProgressionUiRedesign&&(g.pageToShow.sessionOptions=(o=g.pageToShow,{year:P("displayDateTime")(o.start_at,"YYYY"),month:P("displayDateTime")(o.start_at,"MMM"),day:P("displayDateTime")(o.start_at,"DD"),datetime:P("displayDateTime")(o.start_at,"MMMM Do YYYY, h:mm a")+" - "+P("displayDateTime")(o.end_at,"MMMM Do YYYY, h:mm a")+" ("+o.timezone+")",location:o.location_title,webinar_type:C.webinar_types_names[o.webinar_type]})),g.pageToShow.component_type_id===C.componentTypes.checklist&&(g.hide_checklist_questions=void 0===g.pageToShow.checklist_data.questions||0==g.pageToShow.checklist_data.questions.length,g.checklist_questions=g.pageToShow.checklist_data.questions,g.enrollment_component_checklist_questions=g.pageToShow.checklist_data.enrollment_component_checklist_questions,g.checklist_status=g.pageToShow.checklist_data.status,g.checklist_allow_learner_edit_items=g.pageToShow.checklist_data.allow_learner_edit_items,g.checklist_allow_learner_submit=g.pageToShow.checklist_data.allow_learner_submit,g.changeQuestionStatus=function(t,e){t.status=!e;e={id:_.find(g.enrollment_component_checklist_questions,function(e){return e.checklist_question_id===t.id}).id};u.post("/enrollment_component_checklist_questions/learner/change_status.json",e)},g.submitChecklist=function(){var t=LuAnywhere.services.toast.getInstance(),e={enrollment_component_checklist_id:g.pageToShow.checklist_data.enrollment_component_checklist_id,status:C.enrollment_statuses.completed};u.post("/enrollment_component_checklists/learner/update_status.json",e).success(function(){g.webComponentsRedesignEnabled?t.showToast({title:C.showMessage("data_service.toastr.success.success"),message:C.showMessage("lup.checklists.successfully_submitted_by_learner"),variant:"success"}):E.onSuccess({success:C.showMessage("lup.checklists.successfully_submitted_by_learner")}),setTimeout(function(){M.location.reload()},1e3)}).error(function(e){g.webComponentsRedesignEnabled?t.showToast({title:C.showMessage("data_service.toastr.error.error"),message:C.showMessage("lup.checklists.failed_to_submit_for_observation"),variant:"error"}):E.onError({error:C.showMessage(C.showMessage("lup.checklists.failed_to_submit_by_learner"))}),M.location.reload()})},g.canLearnerUpdateChecklistStatus=g.checklist_allow_learner_edit_items&&g.checklist_status<C.checklist.enrollment_component_checklist_status.completed),g.pageToShow.component_type_id===C.componentTypes.e_signature&&(g.signature=g.pageToShow.esignature_data.signature,g.showSignAction=!g.pageToShow.esignature_data.date_signed,g.isDateSigned=!!g.pageToShow.esignature_data.date_signed,g.dateSigned=g.pageToShow.esignature_data.date_signed),g.sessionCancelled=!1,g.enableDebugger=function(){g.scormDebuggerEnabled=!g.scormDebuggerEnabled,M.lup_debugger_on=g.scormDebuggerEnabled},g.minimumAttendanceThreshold=g.pageToShow.minimum_attendance_threshold,g.trustedHtml=function(e){return"string"==typeof e?y.trustAsHtml(e):e},g.examPageTranslations=["lup.exam_start_page.is_knowledge_check_header","lup.exam_start_page.is_graded_exam_header","lup.exam_start_page.start_exam_now","lup.exam_start_page.reattempt_exam_button","lup.exam_start_page.timed_exam_header","lup.exam_start_page.untimed_exam_header","lup.exam_start_page.timed_exam_message","lup.exam_start_page.untimed_exam_message","lup.exam_start_page.questions_number_header","lup.exam_start_page.dont_prevent_previous_question_message","lup.exam_start_page.prevent_previous_question_message","lup.exam_start_page.pass_percentage_header","lup.exam_start_page.pass_mark_header","lup.exam_start_page.pass_percentage_message","lup.exam_start_page.pass_mark_message","lup.exam_start_page.multiple_attempts_header","lup.exam_start_page.single_attempt_header","lup.exam_start_page.multiple_attempts_message","lup.exam_start_page.single_attempt_message","lup.exam_start_page.unlimited_attempts_message","lup.exam_start_page.start_exam_confirmation_modal.modal_timed_exam_message","lup.exam_start_page.start_exam_confirmation_modal.modal_start_exam_confirmation_message","lup.exam_start_page.unlimited_attempts_header","lup.exam_results.exam_results_banner.exam_passed","lup.exam_results.exam_results_banner.exam_failed","lup.exam_results.exam_results_banner.exam_undetermined","lup.exam_start_page.start_exam_confirmation_modal.modal_submit_exam_title","lup.exam_start_page.start_exam_confirmation_modal.modal_submit_exam_msg"].reduce(function(e,t){return e[t.split(".").pop()]=C.showMessage(t,g.pageToShow),e},{}),g.openLeaveExamConfirmationModal=function(){f.open({templateUrl:"/tc/enrollments/leave_exam_confirmation_modal.html",windowClass:"modal-box",controller:["$scope","$modalInstance",function(e,t){e.Helper=g.Helper,e.pageToShow=g.pageToShow,e.confirmLeave=function(){t.close()},e.cancel=function(){t.dismiss()}}],size:"md"}).result.then(function(e){M.angular.element(M).off("beforeunload"),g.isPreview?M.location="/courses/"+g.enrollment.course_id:g.enrollment_component.is_knowledge_test&&!g.enrollment_component.show_start_exam_confirmation?M.location="/enrollments/"+g.pageToShow.enrollment_id+"/details":M.location="/enrollments/"+g.pageToShow.enrollment_id})},g.openSubmitExamConfirmationModal=function(){f.open({templateUrl:"/tc/enrollments/submit_exam_confirmation_modal.html",windowClass:"modal-box",controller:["$scope","$modalInstance",function(e,t){e.Helper=g.Helper,e.confirmSubmit=function(){t.close()},e.cancel=function(){t.dismiss()}}],size:"md"}).result.then(function(e){i("submit")})},g.pageToShow.is_timed_exam&&(g.pageToShow.time_for_exam&&(g.timeForExam=60*g.pageToShow.time_for_exam),g.pageToShow.mins_warning_before_submit&&(g.showWarningAt=60*g.pageToShow.mins_warning_before_submit));var h=new m;if(g.enrollmentFactory=h,g.showPreviousButton=!1,g.pageToShow.question_index&&1<g.pageToShow.question_index&&!g.pageToShow.prevent_previous_question&&(g.showPreviousButton=!0),g.pageToShow.question_to_render&&(g.pageToShow.question_to_render.text=y.trustAsHtml(g.pageToShow.question_to_render.text),g.pageToShow.stripped_question_to_render=y.getTrustedHtml(g.pageToShow.question_to_render.text).replace(/(<([^>]+)>)/gi,"")),!g.pageToShow.questions_number||1!=g.pageToShow.questions_number&&g.pageToShow.questions_number!=g.pageToShow.question_index?g.showSubmitButton=!1:g.showSubmitButton=!0,g.selectedItemIndex=null,g.selectedItemDropped=null,g.onSpaceReArrange=function(e,t){var n;e.preventDefault(),32===e.which&&(null!==g.selectedItemIndex?(g.pageToShow.answer_options.data&&g.pageToShow.answer_options.data.length&&(n=t,e=g.pageToShow.answer_options.data[n],g.pageToShow.answer_options.data[n]=g.pageToShow.answer_options.data[g.selectedItemIndex],g.pageToShow.answer_options.data[g.selectedItemIndex]=e,g.selectedItemIndex=null,x(function(){!function(e){e=document.querySelector(".order-list--item:nth-child("+e+")");e&&e.focus()}(t+1)})),g.selectedItemDropped=t):g.selectedItemIndex=t)},g.ariaLabelForListQuestions=function(e,t){return null!==g.selectedItemIndex?g.selectedItemIndex===e?C.showMessage("a11y.exam_order_list.selected",{answer_option:t.text}):C.showMessage("a11y.exam_order_list.swap",{answer_option:t.text}):null!==g.selectedItemDropped&&g.selectedItemDropped===e?C.showMessage("a11y.exam_order_list.dropped",{answer_option:t.text}):C.showMessage("a11y.exam_order_list.select",{answer_option:t.text})},g.focusOnAnswers=null,g.onSpaceFocusToMatchingAnswer=function(e,t){e.preventDefault(),32===e.which&&(g.focusOnAnswers=t.id)},g.chooseMatchAnswer=function(e,t){g.focusOnAnswers&&(27===e.which&&(g.focusOnAnswers=null),32===e.which&&g.focusOnAnswers&&(e.preventDefault(),(e=g.pageToShow.givenAnswers.filter(function(e){return e.id===g.focusOnAnswers})[0]).matches&&e.matches.length&&e.matches.forEach(function(e){g.removeMatchAnswer(e.id,e.text)}),g.pageToShow.givenAnswers=g.pageToShow.givenAnswers.map(function(e){return e.id===g.focusOnAnswers&&(e.matches=[t]),e}),g.pageToShow.available_match_answers=g.pageToShow.available_match_answers.filter(function(e){return e.id!==t.id}),g.focusOnAnswers=null))},g.dragControlListeners={allowDuplicates:!1,dragMove:function(e,t,n){n&&(n.pageY<M.pageYOffset?M.scrollTo(0,n.pageY):n.pageY+e.offsetY>M.pageYOffset+M.innerHeight&&M.scrollTo(0,n.pageY+e.offsetY-M.innerHeight))}},g.pageToShow.givenAnswers=[],g.pageToShow.question_to_render&&g.pageToShow.question_to_render.question_type_id==C.questionTypes.match_list&&g.pageToShow.answer_options)for(var r=0;r<g.pageToShow.answer_options.data.length;r++){var a=g.pageToShow.answer_options.data[r];g.pageToShow.givenAnswers.push({id:a.id,for_matching:a.for_matching,text:a.text,matches:a.matches})}function i(o){var e={};e.params=A.get();var t,n,r,a,i,s,l,c,u,d=[],p=null,_=null,m=[];g.pageToShow.question_to_render.question_type_id==C.questionTypes.rating?(c=g.pageToShow.answer_options.data,u=[],angular.forEach(c,function(e){e.column_option_choice_selected&&u.push(e.id+"_"+e.column_option_choice_selected)}),d=u):g.pageToShow.question_to_render.question_type_id==C.questionTypes.order_list?(c=g.pageToShow.answer_options.data,l=[],angular.forEach(c,function(e){l.push(e.id)}),d=l):g.pageToShow.question_to_render.question_type_id==C.questionTypes.match_list?(a=g.pageToShow.givenAnswers,i=[],s=[],angular.forEach(a,function(e){i.push(e.id),e.matches[0]?s.push(e.matches[0].id):s.push("undefined")}),d=(m=[i,s])[0],p=m[1]):g.pageToShow.question_to_render.question_type_id==C.questionTypes.fill_the_blanks?(a=g.pageToShow.answer_options.data,n=[],r=[],angular.forEach(a,function(e){n.push(e.id),r.push(e.custom_answer)}),d=(m=[n,r])[0],_=m[1]):(f=g.pageToShow.answer_options.data,t=[],angular.forEach(f,function(e){e.is_checked&&t.push(e.id)}),d=t);var f=function(e){var t="";e&&0<e.length&&(t=e[0].feedback);return t}(g.pageToShow.answer_options.data);"prev"!=o&&!g.skippingSurvey&&g.pageToShow.survey_must_answer_questions&&function(e,t,n,o){var r=!1;e.question_type_id==C.questionTypes.choice&&0===n.length&&(r=!0);e.question_type_id==C.questionTypes.rating&&n.length<t&&(r=!0);e.question_type_id!=C.questionTypes.feedback||o||(r=!0);return r}(g.pageToShow.question_to_render,g.pageToShow.answer_options.data.length,d,f)?L.notify("",C.showMessage("exam_question_pool.survey_answers_required")):(e.params.question_data=function(e,t,n,o,r){var a=0,i=0;{var s;!g.pageToShow.is_timed_exam||(s=g.getUsedTime())&&(a=60*s.hours+s.minutes,i=s.seconds)}return{question_id:g.pageToShow.question_to_render.question_id,enrollment_exam_question_id:g.pageToShow.question_to_render.id,enrollment_exam_id:g.pageToShow.question_to_render.enrollment_exam_id,navigation:e,feedback:n,answer_option_ids:t,mins:a,secs:i,was_auto_submitted:g.was_auto_submitted,is_course_preview:!1,match_answers:o,custom_answers:r}}(o,d,f,p,_),h.saveAnswer(e,g.pageToShow.enrollment_id,g.pageToShow.id,g.isPreview).then(function(){if(o&&"submit"==o||h.data.was_auto_submitted){g.pageToShow.show_answers_given_after_submit=h.data.enrollment_component.attributes.show_answers_given_after_submit,g.pageToShow.show_answers_given_after_submit&&(g.pageToShow.question_list=h.data.enrollment_component.attributes.question_list,g.pageToShow.question_list&&angular.forEach(g.pageToShow.question_list,function(e){e.text=y.trustAsHtml(e.text)})),g.pageToShow.show_results=!0,g.pageToShow.show_correct_answers=h.data.enrollment_component.attributes.show_correct_answers,g.pageToShow.show_feedback=h.data.enrollment_component.attributes.show_feedback,g.pageToShow.show_overall_feedback=h.data.enrollment_component.attributes.show_overall_feedback,g.pageToShow.show_question_correctness=h.data.enrollment_component.attributes.show_question_correctness,g.pageToShow.show_previous_attempt_status_is_better=h.data.enrollment_component.attributes.show_previous_attempt_status_is_better,g.pageToShow.time_taken=h.data.enrollment_component.attributes.time_taken,g.pageToShow.show_pass_fail_after_submit=h.data.enrollment_component.attributes.show_pass_fail_after_submit,g.pageToShow.enrollment_component_status_id=h.data.enrollment_component.attributes.enrollment_component_status_id,g.pageToShow.show_required_percentage_after_submit=h.data.enrollment_component.attributes.show_required_percentage_after_submit,g.pageToShow.required_score=h.data.enrollment_component.attributes.required_score,g.pageToShow.show_score_after_submit=h.data.enrollment_component.attributes.show_score_after_submit,g.pageToShow.score_percentage=h.data.enrollment_component.attributes.score_percentage,g.pageToShow.score_headline=h.data.enrollment_component.attributes.score_headline,g.pageToShow.show_reattempt_button=h.data.enrollment_component.attributes.show_reattempt_button,g.pageToShow.show_num_attempts_after_submit=h.data.enrollment_component.attributes.show_num_attempts_after_submit,g.pageToShow.attempt_msg_after_submit=h.data.enrollment_component.attributes.attempt_msg_after_submit,g.pageToShow.enable_pdf_downloads=h.data.enrollment_component.attributes.enable_pdf_downloads,g.pageToShow.use_previous_attempt_score_if_better=h.data.enrollment_component.attributes.use_previous_attempt_score_if_better,g.pageToShow.last_attempt_percentage=h.data.enrollment_component.attributes.last_attempt_percentage,g.pageToShow.show_last_attempt_percentage=h.data.enrollment_component.attributes.show_last_attempt_percentage,g.pageToShow.last_attempt_time_taken=h.data.enrollment_component.attributes.last_attempt_time_taken,g.pageToShow.show_last_attempt_time_taken=h.data.enrollment_component.attributes.show_last_attempt_time_taken,M.refreshProgressBar(h.data.enrollment.attributes),h.data.show_leave_review&&S.showLeaveReviewDialog(h.data.enrollment.attributes,null,null,g.courseProgressionUiRedesign),h.data.next_course_on_path_id&&M.setNextCourseOnPath(h.data.next_course_on_path_id),h.data.lp_completed&&M.setLpCompleted(h.data.lp_completed),h.data.cert_awarded&&M.setCertificateId(h.data.cert_awarded),h.data.cert_awarded_type&&M.setCertificateType(h.data.cert_awarded_type),h.data.awarded_badges&&M.setAwardedBadges(h.data.awarded_badges),h.data.badges_for_notification&&M.setBadgesForNotification(h.data.badges_for_notification),angular.isDefined(h.data.enrollment_component.attributes.override_sequencing)&&M.overrideSequencing(h.data.enrollment_component.attributes.override_sequencing);var e=!!h.data.was_just_completed||!!h.data.was_just_passed_and_have_badges;M.wasJustCompletedAfterExam(e),h.data.social_sharing&&e&&(h.data.social_sharing.attributes.was_just_passed=h.data.was_just_passed,M.setSocialSharingSettingsOnEnrollmentsShowController(h.data.social_sharing.attributes)),M.angular.element(M).off("beforeunload"),M.updateEnrollmentComponentStatus(g.pageToShow.enrollment_component_status_id)}else{if(g.pageToShow.show_num_attempts_during_exam=h.data.enrollment_component.attributes.show_num_attempts_during_exam,g.pageToShow.attempt_msg_during_exam=h.data.enrollment_component.attributes.attempt_msg_during_exam,g.pageToShow.question_to_render=h.data.question_to_render.attributes,g.pageToShow.question_to_render_answers=h.data.question_to_render_answers,g.pageToShow.question_to_render.text=y.trustAsHtml(g.pageToShow.question_to_render.text),g.pageToShow.stripped_question_to_render=y.getTrustedHtml(g.pageToShow.question_to_render.text).replace(/(<([^>]+)>)/gi,""),g.pageToShow.answer_options=h.data.answer_options,g.pageToShow.available_match_answers=h.data.available_match_answers,g.pageToShow.column_option_choices=h.data.column_option_choices,g.pageToShow.question_index=h.data.question_index,b(h.data.question_index),v(h.data.question_index),g.pageToShow.givenAnswers=[],g.pageToShow.question_to_render.question_type_id==C.questionTypes.match_list&&g.pageToShow.answer_options)for(var t=0;t<g.pageToShow.answer_options.data.length;t++){var n=g.pageToShow.answer_options.data[t];g.pageToShow.givenAnswers.push({id:n.id,for_matching:n.for_matching,text:n.text,matches:n.matches})}M.document.getElementById("nextQuestion")&&M.document.getElementById("nextQuestion").blur(),M.document.getElementById("prevQuestion")&&M.document.getElementById("prevQuestion").blur(),g.pageToShow.is_survey||M.angular.element(M).on("beforeunload",function(e){return C.showMessage("lup.components.leaving_this_exam_warning")})}w()}))}function b(e){g.pageToShow.questions_number==e?g.showSubmitButton=!0:g.showSubmitButton=!1}function v(e){g.pageToShow.prevent_previous_question?g.showPreviousButton=!1:g.showPreviousButton=1<e}function w(){var e=z.hash();z.hash("pageContentWrapper"),T(),z.hash(e)}function s(){return g.isPreview?{label:C.showMessage("lup.live_trainings.course_module.session.tooltip.registered"),pillClass:"success"}:{label:C.getTrainingErnollmentStatusLabel(g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_choose_session,g.pageToShow.waitlisted),pillClass:C.getTrainingEnrolmentStatusPilLClass(g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_choose_session,g.pageToShow.waitlisted)}}function l(){var e=!g.pageToShow.number_of_sessions_available,t=g.pageToShow.learner_can_choose_session,n=g.pageToShow.session_registration_choice==C.sessionRegistrationChoices.automatic,o=g.pageToShow.session,r=g.pageToShow.register_waitlist_enabled_on_any_session;return e&&!r||!t&&!r||n&&!o&&!r?[]:g.concurrentAndSeriesSessions?[{label:C.showMessage("lup.live_trainings.registration_cta.choose_button_label"),variant:"primary",onClick:function(){var e="/enrollments/"+g.enrollment.id+"/page/"+g.pageToShow.id+"/choose-session";M.location=e}}]:[{label:C.showMessage("lup.live_trainings.registration_cta.choose_button_label"),btnClass:"btn btn-theme mt-18",onClick:function(){var e="/enrollments/"+g.enrollment.id+"/page/"+g.pageToShow.id+"/choose-session";M.location=e}}]}function c(){return g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.completed&&g.pageToShow.enrollment_status_id!==C.trainingEnrollmentStatuses.failed?null:{label:C.getTrainingErnollmentStatusLabel(g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_choose_session,g.pageToShow.waitlisted),class:C.getTrainingEnrolmentStatusPilLClass(g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_choose_session,g.pageToShow.waitlisted)}}g.kanbanSortOptions={accept:function(e,t){return"possibleAnswersWrapper"!=t.element[0].id&&(t.isEmpty()||!t.isEmpty()&&t.modelValue[0].id==e.modelValue.id)},allowDuplicates:!1,dragMove:function(e,t,n){n&&(n.pageY<M.pageYOffset?M.scrollTo(0,n.pageY):n.pageY+e.offsetY>M.pageYOffset+M.innerHeight&&M.scrollTo(0,n.pageY+e.offsetY-M.innerHeight))}},g.removeMatchAnswer=function(t,e){angular.forEach(g.pageToShow.givenAnswers,function(e){0<e.matches.length&&e.matches[0].id==t&&(e.matches=[])}),g.pageToShow.available_match_answers.push({id:t,text:e})},g.showEmptyMatchClass=function(e){return e&&0!==e.length?"notempty":"empty"},g.ariaLabelForMatchList=function(e,t){return t&&t.length?C.showMessage("a11y.exam_match_list.select_answer",{answer_for_match:e.for_matching,answer_match_option:t[0].text}):C.showMessage("a11y.exam_match_list.answer",{answer_for_match:e.for_matching})},g.templateLoaded=function(e){},g.displaySessionTutor=function(e){return e.first_name+" "+e.last_name},g.add_address_detail=function(e,t){return g.addComma&&(t=", "+t,g.addComma=!1),e+"<span>"+t+"</span>"},g.addComma=!1,g.displaySessionAddress=function(e){var t="";return e.address_1&&(t=g.add_address_detail(t,e.address_1),g.addComma=!0),e.address_2&&(t=g.add_address_detail(t,e.address_2),g.addComma=!0),e.address_3&&(t=g.add_address_detail(t,e.address_3),g.addComma=!0),e.state_code&&"xx"!=e.state_code&&(t=g.add_address_detail(t,I18n.t("statelists."+e.state_code.toLowerCase())),g.addComma=!0),e.country_code&&"xx"!=e.country_code&&(t=g.add_address_detail(t,I18n.t("countrylists."+e.country_code.toLowerCase()))),t},g.displaySessionNotes=function(e){return e.notes?e.notes.replace(/\r\n/g,"<div/>").replace(/\n/g,"<div/>"):"-"},g.displaySessionLocation=function(e){return e.location_id&&e.location_title?e.location_title:I18n.t("ilts.not_applicable")},g.getIncludeFile=function(e){if(e){g.Helper.isUserTakingExam=!1,g.examViewMode="";e=e;if(g.enrollment_component=e)return e.not_released_yet?(g.pageToShow.not_released_yet_message=C.showMessage("courses.this_module_will_be_released",{time:e.release_at}),"/tc/enrollments/not_released_yet.html"):e.component_type_id==C.componentTypes.scorm?(g.scormObj=S.launchPermitted(g.enrollment)?g.pageToShow:g.enrollment,g.courseProgressionUiRedesign?"/tc/enrollments/scorm_page_launch_redesign.html":"/tc/enrollments/scorm_page_launch.html"):e.component_type_id==C.componentTypes.linkedin_learning?(g.linkedinLearning=S.launchPermitted(g.enrollment)?g.pageToShow:g.enrollment,g.courseProgressionUiRedesign?"/tc/enrollments/linkedin_learning_page_launch_redesign.html":"/tc/enrollments/linkedin_learning_page_launch.html"):e.component_type_id==C.componentTypes.session?g.courseProgressionUiRedesign?"/tc/enrollments/session_page_launch_redesign.html":"/tc/enrollments/session_page_launch.html":e.component_type_id===C.componentTypes.training?g.courseProgressionUiRedesign?"/tc/enrollments/trainings_page_launch_redesign.html":"/tc/enrollments/trainings_page_launch.html":e.component_type_id===C.componentTypes.checklist?g.courseProgressionUiRedesign?"/tc/enrollments/checklist_page_launch_redesign.html":"/tc/enrollments/checklist_page_launch.html":e.component_type_id===C.componentTypes.e_signature?g.courseProgressionUiRedesign?"/tc/enrollments/esignature_page_launch_redesign.html":"/tc/enrollments/esignature_page_launch.html":e.component_type_id==C.componentTypes.exam?e.is_survey?g.pageToShow.show_results?g.courseProgressionUiRedesign?"/tc/enrollments/survey_results_redesign.html":"/tc/enrollments/survey_results.html":g.courseProgressionUiRedesign&&g.webComponentsRedesignEnabled&&!g.isStarted?"/tc/enrollments/survey_start_page_redesign.html":g.courseProgressionUiRedesign?"/tc/enrollments/survey_page_launch_redesign.html":"/tc/enrollments/survey_page_launch.html":g.pageToShow.show_results?(g.examViewMode=g.examViewModes.exam_results,g.pageToShow.question_list&&0<g.pageToShow.question_list.length&&g.pageToShow.question_list.map(function(e){e.question_type_id===C.questionTypes.fill_the_blanks&&angular.isString(e.text)&&(e.text=y.trustAsHtml(e.text))}),g.courseProgressionUiRedesign?"/tc/enrollments/exam_results_redesign.html":"/tc/enrollments/exam_results.html"):e.exam_start_message?g.courseProgressionUiRedesign?"/tc/enrollments/exam_start_page_redesign.html":"/tc/enrollments/exam_start_page.html":(g.Helper.isUserTakingExam=!0,g.courseProgressionUiRedesign?"/tc/enrollments/exam_page_launch_redesign.html":"/tc/enrollments/exam_page_launch.html"):e.component_type_id==C.componentTypes.assignment?g.courseProgressionUiRedesign?"/tc/enrollments/assignment_page_launch_redesign.html":"/tc/enrollments/assignment_page_launch.html":void 0}},g.isChoiceQuestion=function(e){return e==C.questionTypes.choice},g.isRatingQuestion=function(e){return e==C.questionTypes.rating},g.isFeedbackQuestion=function(e){return e==C.questionTypes.feedback},g.isOrderListQuestion=function(e){return e==C.questionTypes.order_list},g.isMatchListQuestion=function(e){return e==C.questionTypes.match_list},g.isFillTheBlanksQuestion=function(e){return e==C.questionTypes.fill_the_blanks},g.isMultyChoiceQuestion=function(e){return g.pageToShow.question_to_render.choice_type_id==C.question_choice_types.multiple},g.chooseAnswerDiv=function(e,t){e.is_checked?e.is_checked=!1:(e.is_checked=!0,t&&g.setRadioToFalse(e.id))},g.showFeedback=function(e,t){f.open({templateUrl:"/tc/enrollments/question_feedback_modal.html",controller:"EnrollmentsShowModalFeedbackController",size:"lg",resolve:{answer:function(){return e},question_type_id:function(){return t},show_feedback:function(){return g.pageToShow.show_feedback},show_correct_answers:function(){return g.pageToShow.show_correct_answers}}})},g.setRadioToFalse=function(t){angular.forEach(g.pageToShow.answer_options.data,function(e){e.id!=t&&(e.is_checked=!1)})},g.submitAnswerAndLoadNextQuestion=function(){i("next")},g.submitAnswerAndLoadPreviousQuestion=function(){i("prev"),g.webComponentsRedesignEnabled&&(g.exist=!1)},g.submitAnswerAndLoadResaults=function(){var e;g.webComponentsRedesignEnabled?g.openSubmitSurveyConfirmationModal():(e=C.showMessage("courses.you_are_bout_to_submit_your_exam_for_marking_are_your_sure"),g.pageToShow.is_survey&&(e=C.showMessage("courses.your_are_about_to_submit_your_surey_are_your_sure")),L.confirm(C.showMessage("lup.confirm"),e).then(function(e){i("submit")}))},g.openSubmitSurveyConfirmationModal=function(){f.open({templateUrl:"/tc/enrollments/submit_survey_confirmation_modal.html",windowClass:"modal-box",controller:["$scope","$modalInstance",function(e,t){e.pageToShow=g.pageToShow,e.examPageTranslations=g.examPageTranslations,e.Helper=g.Helper,e.submitSurvey=function(){i("submit"),t.close()},e.cancel=function(){t.dismiss()}}],size:"md"})},g.openStartSurveyConfirmationModal=function(){f.open({templateUrl:"/tc/enrollments/start_survey_confirmation_modal.html",windowClass:"modal-box",controller:["$scope","$modalInstance",function(e,t){e.pageToShow=g.pageToShow,e.examPageTranslations=g.examPageTranslations,e.Helper=g.Helper,e.startExam=function(){t.close()},e.cancel=function(){t.dismiss()}}],size:"md"}).result.then(function(){g.startExam()})},g.openStartExamConfirmationModal=function(){if(!g.pageToShow.show_start_exam_confirmation)return g.startExam();f.open({templateUrl:"/tc/enrollments/start_exam_confirmation_modal.html",windowClass:"modal-box",controller:["$scope","$modalInstance",function(e,t){e.pageToShow=g.pageToShow,e.examPageTranslations=g.examPageTranslations,e.Helper=g.Helper,e.startExam=function(){t.close()},e.cancel=function(){t.dismiss()}}],size:"md"}).result.then(function(){g.startExam()})},g.startExam=function(){var e={};e.params=A.get(),e.params.is_reattempt=g.is_reattempt,h.startExam(e,g.pageToShow.enrollment_id,g.pageToShow.id,g.isPreview).then(function(){if(g.is_reattempt=!1,g.enrollment_component=null,g.pageToShow.exam_start_message=null,g.pageToShow.question_list=[],g.pageToShow.show_results=!1,g.pageToShow.show_num_attempts_during_exam=h.data.enrollment_component.attributes.show_num_attempts_during_exam,g.pageToShow.attempt_msg_during_exam=h.data.enrollment_component.attributes.attempt_msg_during_exam,g.pageToShow.question_to_render=h.data.question_to_render.attributes,g.pageToShow.question_to_render_answers=h.data.question_to_render_answers,g.pageToShow.question_to_render.text=y.trustAsHtml(g.pageToShow.question_to_render.text),g.pageToShow.stripped_question_to_render=y.getTrustedHtml(g.pageToShow.question_to_render.text).replace(/(<([^>]+)>)/gi,""),g.pageToShow.available_match_answers=h.data.available_match_answers,g.pageToShow.answer_options=h.data.answer_options,g.pageToShow.column_option_choices=h.data.column_option_choices,g.pageToShow.question_index=h.data.question_index,g.showWarning=!1,g.pageToShow.givenAnswers=[],g.pageToShow.question_to_render.question_type_id==C.questionTypes.match_list&&g.pageToShow.answer_options)for(var e=0;e<g.pageToShow.answer_options.data.length;e++){var t=g.pageToShow.answer_options.data[e];g.pageToShow.givenAnswers.push({id:t.id,for_matching:t.for_matching,text:t.text,matches:t.matches})}g.pageToShow.is_survey||M.angular.element(M).on("beforeunload",function(e){return C.showMessage("lup.components.leaving_this_exam_warning")}),b(h.data.question_index),v(h.data.question_index),g.isTakingExam=!0,window.dispatchEvent(new CustomEvent("isTakingExam",{detail:g.isTakingExam}))}),g.isStarted=!0,w()},g.reattemptExam=function(){var e=C.showMessage("courses.doing_so_will_assume_your_previous_answers_are_null");L.confirm(C.showMessage("lup.confirm"),e,{windowClass:"modal-box"}).then(function(e){g.is_reattempt=!0,M.wasJustCompletedAfterExam(!1),g.startExam()})},g.trustContent=function(e){return y.trustAsHtml(e)},g.cancelExamStart=function(){g.isPreview?M.location="/courses/"+g.enrollment.course_id:M.location="/enrollments/"+g.pageToShow.enrollment_id+"/details"},g.showHideWarning=function(e){g.showWarning=e},g.getUsedTime=function(){return document.getElementsByTagName("timer")[0].returnUsedTime()},g.autoSubmitExam=function(){g.was_auto_submitted=!0,i("submit")},g.enrollmentIsPassed=function(){return g.pageToShow.enrollment_component_status_id==C.enrollmentStatuses.passed},g.enrollmentIsFailed=function(){return g.pageToShow.enrollment_component_status_id==C.enrollmentStatuses.failed},g.questionIsCorrect=function(e){return e===C.answerStatuses.correct},g.handleCompletedExamStatus=function(){if(g.pageToShow.show_pass_fail_after_submit){if(g.pageToShow.enrollment_component_status_id==C.enrollmentStatuses.passed)return C.showMessage("dashboard.passed");if(g.pageToShow.enrollment_component_status_id==C.enrollmentStatuses.failed)return C.showMessage("dashboard.failed")}return C.showMessage("dashboard.completed")},g.downloadResults=function(){var e=new $,t={typeId:C.lupJobTypes.downloadExamResults,id:g.pageToShow.enrollment_id,enrollment_component_id:g.isPreview?g.pageToShow.component_id:g.pageToShow.id,is_preview:g.isPreview};e.initiateJob(t)},g.submitChecklistForReview=function(){var t=LuAnywhere.services.toast.getInstance(),e={enrollment_component_checklist_id:g.pageToShow.checklist_data.enrollment_component_checklist_id,status:C.enrollment_statuses.pending_review};u.post("/enrollment_component_checklists/update_status.json",e).success(function(){g.webComponentsRedesignEnabled?t.showToast({title:C.showMessage("data_service.toastr.success.success"),message:C.showMessage("lup.checklists.successfully_submitted_for_observation"),variant:"success"}):E.onSuccess({success:C.showMessage("lup.checklists.successfully_submitted_for_observation")}),setTimeout(function(){M.location.reload()},1e3)}).error(function(e){g.webComponentsRedesignEnabled?t.showToast({title:C.showMessage("data_service.toastr.error.error"),message:C.showMessage("lup.checklists.failed_to_submit_for_observation"),variant:"error"}):E.onError({error:C.showMessage(C.showMessage("lup.checklists.failed_to_submit_for_observation"))}),M.location.reload()})},g.signModule=function(e){g.showSignAction=!1,g.signatureIterator=0,g.ele=document.getElementById("eSignatureAnimationHolder"),g.ele.hidden=!1,g.ele.innerHTML="",function e(t){g.signatureIterator<t.length&&(g.ele.innerHTML+=t.charAt(g.signatureIterator),g.signatureIterator++,setTimeout(function(){e(t)},100))}(e);var t="/esignature_audits/"+(g.isPreview?"sign_preview_module.json":"sign_module.json"),e={enrollment_component_id:g.pageToShow.id,esignature_component_id:g.pageToShow.esignature_data.esignature_component_id,signature:e};u.post(t,e).success(function(e){e.error?E.onError({error:e.error}):E.onSuccess({success:C.showMessage("lup.esignatures.successfully_signed_module")}),setTimeout(function(){M.location.reload()},1500)}).error(function(e){E.onError({error:C.showMessage("lup.esignatures.failed_to_sign_module")}),M.location.reload()})},g.pageToShow.prevent_unload&&!g.pageToShow.exam_start_message?M.angular.element(M).on("beforeunload",function(e){return C.showMessage("lup.components.leaving_this_exam_warning")}):M.angular.element(M).off("beforeunload"),g.webinarLauncher.registerOnJoinStatusChanged(function(e){switch(e){case C.webinarJoinStatuses.too_early:g.headerConfig={title:C.showMessage("lup.ilts.webinar_details_tl"),body:C.showMessage("lup.ilts.webinar_details_content_too_early"),actions:[{type:"button",body:C.showMessage("webinar.join_webinar"),disabled:!0}]};break;case C.webinarJoinStatuses.too_late:g.headerConfig={title:C.showMessage("lup.ilts.webinar_details_tl"),body:C.showMessage("lup.ilts.webinar_details_content_too_late")};break;case C.webinarJoinStatuses.in_progress:g.headerConfig={title:C.showMessage("lup.ilts.webinar_details_tl"),body:C.showMessage("lup.ilts.webinar_details_content_on_time",{email:g.pageToShow.email}),actions:[{type:"anchor",href:"/join-webinar/"+g.pageToShow.id,target:"_new",body:C.showMessage("webinar.join_webinar")}]}}}),g.webinarProviderUsesThisLauncher=function(){return g.webinarLauncher.webinarProviderUsesThisLauncher()},g.allowChangeSession=function(e,t,n,o){return new Date(e).getTime()>Date.now()&&(t==C.ilt_sessions.must_choose_one||t==C.ilt_sessions.can_choose_more_than_one)&&(n==C.enrollment_statuses.not_started||n==C.enrollment_statuses.waitlisted)&&!!o},g.launchWebinar=function(e){M.open((e||session).webinar_url,"_blank")},g.canJoinWebinar=function(e){if(g.pageToShow.session){var t=new Date;if(g.rawTimezone&&(t=P("displayDateTime")(t,C.date_formats.session,g.rawTimezone),t=new Date(t)),g.pageToShow.session_type===C.sessionType.SERIES){var n=new Date(e.end_time)<=t;return!!e.webinar_url&&g.pageToShow.enrollment_status_id===C.trainingEnrollmentStatuses.not_started&&!n}n=new Date(g.pageToShow.session.end_time)<=t;return!!g.pageToShow.session.webinar_url&&g.pageToShow.enrollment_status_id===C.trainingEnrollmentStatuses.not_started&&!n}},g.cancelSessionRegistration=function(n){g.pageToShow.session_type===C.sessionType.SERIES?f.open({templateUrl:"/tc/sessions/cancel-session-registration-modal.html",controller:["$scope","$modalInstance",function(e,t){e.modalHeader=C.showMessage("lup.live_trainings.admin_cancel_session_registration_modal_title"),e.modalMsg=C.showMessage("lup.live_trainings.cancel_registration_modal_text",{session_title:g.pageToShow.title}),e.confirmLabel=C.showMessage("apprise.yes_text"),e.cancelLabel=C.showMessage("apprise.no_text"),e.submitDisabled=!1,e.confirmCancellation=function(){e.submitDisabled=!0,t.dismiss(),k.showGroup("luSpinnerGlobal"),u.post("/angie/trainings/"+n.training_id+"/sessions/"+n.session_id+"/cancel-registration/"+n.session_attendee_pm_id+".json").success(function(){g.sessionCancelled=!0,k.hideGroup("luSpinnerGlobal"),E.onSuccess({success:C.showMessage("lup.live_trainings.registration_cancellation_success_message")}),setTimeout(function(){M.location.reload()},1e3)}).error(function(e){g.sessionCancelled=!0,k.hideGroup("luSpinnerGlobal");e=Array.isArray(e.error)&&e.error[0]&&e.error[0].value?e.error[0].value:"events.errors.session_registration_cannot_be_canceled";E.onError({error:C.showMessage(e)}),setTimeout(function(){M.location.reload()},1e3)})},e.cancel=function(){t.dismiss()}}]}):f.open({templateUrl:"/tc/sessions/cancel-session-registration-modal.html",controller:["$scope","$modalInstance",function(e,t){e.modalHeader=C.showMessage("lup.live_trainings.admin_cancel_session_registration_modal_title"),e.modalMsg=C.showMessage("lup.live_trainings.cancel_registration_modal_text",{session_title:g.pageToShow.session.session_title}),e.confirmLabel=C.showMessage("apprise.yes_text"),e.cancelLabel=C.showMessage("apprise.no_text"),e.submitDisabled=!1,e.confirmCancellation=function(){e.submitDisabled=!0,t.dismiss(),k.showGroup("luSpinnerGlobal"),u.post("/angie/trainings/"+g.pageToShow.session.training_id+"/sessions/"+g.pageToShow.session.id+"/cancel-registration/"+g.pageToShow.session.session_attendee_pm_id+".json").success(function(){g.sessionCancelled=!0,k.hideGroup("luSpinnerGlobal"),E.onSuccess({success:C.showMessage("lup.live_trainings.registration_cancellation_success_message")}),setTimeout(function(){M.location.reload()},1e3)}).error(function(e){g.sessionCancelled=!0,k.hideGroup("luSpinnerGlobal");e=Array.isArray(e.error)&&e.error[0]&&e.error[0].value?e.error[0].value:"events.errors.session_registration_cannot_be_canceled";E.onError({error:C.showMessage(e)}),setTimeout(function(){M.location.reload()},1e3)})},e.cancel=function(){t.dismiss()}}]})},g.viewSessions=function(){var e="/enrollments/"+g.enrollment.id+"/page/"+g.pageToShow.id+"/choose-session";M.location=e},g.showViewSessionButton=function(){if(!g.pageToShow.session||g.sessionCancelled)return!1;var e=g.pageToShow.session.start_time,t=g.pageToShow.session_registration_choice;return C.showViewSessionButton(e,t,g.pageToShow.session,g.pageToShow.waitlisted)},g.showSessionRegistrationCancellationButton=function(e){if(!g.pageToShow.session||g.sessionCancelled)return!1;if(g.pageToShow.session_type===C.sessionType.SERIES)return C.shouldRenderSessionCancellation(e.start_time,e.session_attendee_status,g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_cancel_registration,g.pageToShow.session_registration_choice,g.pageToShow.is_deleted);e=g.pageToShow.session.start_time;return C.shouldRenderSessionCancellation(e,g.pageToShow.session.session_attendee_status,g.pageToShow.enrollment_status_id,g.pageToShow.learner_can_cancel_registration,g.pageToShow.session_registration_choice,g.pageToShow.is_deleted)}}}}]),window.angular.module("lu").directive("lupShowPageSegment",["$http","$sce","$window","LupHelper","$rootScope","$luPopover","EnrollmentComponentElementFactory","$timeout","$document",function(e,o,C,A,n,r,a,L,t){var i=jQuery(window).height(),l=jQuery(window).width(),c=!0,$=moment.duration(2e3).asSeconds(),T=(T=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1)||(/Macintosh/.test(navigator.userAgent)&&"ontouchend"in t[0]||!1);return{restrict:"E",scope:{pageSegments:"=segments",page:"=page",adminView:"=",isPreview:"=",previewModule:"=",previewSegment:"=",mergeContent:"=",loadedInSalesforce:"=?",learnerUsageView:"=",allowDownload:"=",courseProgressionUiRedesign:"=?",webComponentsRedesignEnabled:"=?"},template:'<div ng-include="getTemplateUrl()"></div>',link:function(v,e,t){v.LupHelper=A,v.cdn_path=CONFIG.cdnPath,v.ftrEnBxI="true"===CONFIG.ftrEnBxI,v.ftrEnBxJ="true"===CONFIG.ftrEnBxJ,v.videoOverlay={};v.getTemplateUrl=function(){return v.courseProgressionUiRedesign?"/tc/courses/show_page_segment_redesign.html":"/tc/courses/show_page_segment.html"};var s=new a,w=1,y=2,M=3;function S(){0}T&&(S(),S(),S()),v.downloadContent=function(e,t){var n="audio";t==="video"&&C.open(o.trustAsResourceUrl(e),"_blank"),t===n&&C.open(e,"_blank")},v.showInfo=function(e){r.notify("",e)},v.reloadPage=function(){C.location.reload()},v.viewLarger=function(e,t,n){jQuery(".document-overlay").show(),jQuery("#larger_document_window").show(),jQuery("#larger_document_window").css("height",i),jQuery("#larger_document_window").css("width",l),t?jQuery("#larger_document_iframe").attr("src",e.doc_url):jQuery("#larger_document_iframe").attr("src",v.jsUrlForDocument(e,n)),jQuery("#document_close_button").bind("click",function(){jQuery(".document-overlay").hide(),jQuery("#larger_document_window").hide(),t||C.reloadCourseContent()}),jQuery("#document_expand_button").bind("click",function(){c?(c=!1,jQuery("#larger_document_window").css({right:"0",left:"0"}),jQuery("#larger_document_window").css("height",400),jQuery("#larger_document_window").css("width",600)):(c=!0,jQuery("#larger_document_window").css({top:"0",left:"0",right:"0"}),jQuery("#larger_document_window").css("height",jQuery(window).height()),jQuery("#larger_document_window").css("width",jQuery(window).width()))})},n.$on("CoursesEditSegmentController::segmentSaved",function(){}),v.jsUrlForDocument=function(e,t){if("viewable"!=e.document_status)return"";var n="/component_elements/0/render_document?view_session_id="+e.doc_url;return n+="&for_dialog=false",n+="&start_page="+e.start_page,n+="&is_course_preview="+v.isPreview,e.component_element_id&&(n+="&element="+e.component_element_id),e.enrollment_component_id&&(n+="&enrollment_component="+e.enrollment_component_id),n+="&for_box="+t},v.trustSrc=function(e){return o.trustAsResourceUrl(e)},v.isRequestingSegment=function(e){return e.endsWith(".ts")},v.isEmbedded=function(){try{return window.self!==window.top}catch(e){return!0}},v.getSignedUrlWithoutRedirecting=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t+"?forEmbed",!1),e.setRequestHeader("Authorization","Bearer-Embed "+localStorage.getItem("authToken")),e.send(),200===e.status?JSON.parse(e.responseText).url:t}catch(e){return t}},v.luaXhrInterceptor=function(e){return v.isRequestingSegment(e.uri)?e.uri=v.getSignedUrlWithoutRedirecting(e.uri):e.headers=Object.assign(e.headers||{},{Authorization:"Bearer-Embed "+localStorage.getItem("authToken")}),e},v.setupForEmbed=function(){try{null!=localStorage.getItem("authToken")&&v.isEmbedded()&&(videojs.Vhs.xhr.beforeRequest=v.luaXhrInterceptor)}catch(e){}},v.setupHTML5Player=function(b){v.setupForEmbed();function e(){var o,t,r,n,a,i,s,l,e,c,u,d,p,m="html5VideoDiv_"+b.component_element_id,f=window.document.getElementById(m),g=0,h=!0;f&&((v.adminView||v.previewSegment)&&(d=videojs.getPlayers(),angular.isDefined(d)&&angular.isDefined(d[m])&&delete d[m]),o=videojs(m,{fluid:!0,aspectRatio:"16:9",playbackRates:b.prevent_fast_play?[.25,.5,.75,1]:[.25,.5,.75,1,1.25,1.5,2],controlBar:{fullscreenToggle:!v.loadedInSalesforce,volumeMenuButton:{inline:!1}},html5:{hls:{limitRenditionByPlayerDimensions:!1,overrideNative:!videojs.browser.IS_SAFARI||v.isEmbedded()},nativeAudioTracks:!1,nativeVideoTracks:!1}}),v.adminView||v.isPreview||!b.enable_video_tracking?o.ready(function(){var t=this;S(),t.on("loadedmetadata",function(e){S(),t.on("error",function(e){S(),"error"==e.type&&(v.videoOverlay[m]=!0,v.$apply())})})}):(t=angular.isNumber(b.video_last_position)?b.video_last_position:0,r=angular.isNumber(b.max_video_position_viewed)?b.max_video_position_viewed:0,p=angular.isNumber(b.video_duration)?b.video_duration:0,c=t,u=r,d=p,p=b,n=!(v.adminView||v.$parent.was_just_completed||!c||!d||!u||d===u||!p.enable_video_tracking),a=!1,i=b.enable_video_tracking?w:M,s=function(e){angular.isNumber(e)&&0<e&&(S(),a=!0,o.currentTime(e),n&&o.play(),a=!1)},l=function(e){if(T)if(o.paused()&&l.internalCallCount<3)S(),l.internalCallCount++;else{if(o.paused()&&3<=l.internalCallCount)return void S();0<l.internalCallCount&&(S(),l.internalCallCount=0)}var t=o.currentTime(),n=o.duration();T&&o.seeking()?S():(0<t&&(t=t.toFixed(6)),_.isBoolean(e)&&!0===e&&(S(n.toFixed(6)),t=n.toFixed(6)),angular.isNumber(n)&&0<n&&(n=n.toFixed(6),v.trackVideoDuration(b,n,$,t,1,A.componentElementTypes.video),S()))},e=function(){S(),T||s(t),o.on("play",function(e){S(),T&&h&&(s(t),h=!1)}),T&&setInterval(function(){S((o.paused(),o.seeking())),o.seeking()?S():(S(),l(!1))},2e3),T||o.on("timeupdate",_.throttle(l,2e3)),o.on("timeupdate",function(e){S(),T&&(o.seeking()||(g=o.currentTime())),o.seeking()||(r=Math.max(r,o.currentTime()))}),o.on("seeking",function(e){var t;S(o.currentTime()),T&&!a&&(t=0,i===w?(t=o.currentTime()-r,S(),S(o.currentTime()),S(),.01<t&&(S(),o.currentTime(r))):i===y&&(t=o.currentTime()-g,.01<Math.abs(t)&&(S(),o.currentTime(g))))}),o.on("seeked",function(e){S(o.currentTime())}),o.on("ended",function(e){S(),l(!T||!(g=0)),o.posterImage.show(),o.bigPlayButton.show(),o.currentTime(0)}),o.on("error",function(e){S(),"error"==e.type&&(v.videoOverlay[m]=!0,v.$apply())}),function(o){o=o||{};var r="hidden";r in C.document?C.document.addEventListener("visibilitychange",e):(r="mozHidden")in C.document?C.document.addEventListener("mozvisibilitychange",e):(r="webkitHidden")in C.document?C.document.addEventListener("webkitvisibilitychange",e):(r="msHidden")in C.document?C.document.addEventListener("msvisibilitychange",e):"onfocusin"in C.document?C.document.onfocusin=C.document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e;function e(e){var t="visible",n="hidden",n={focus:t,focusin:t,pageshow:t,blur:n,focusout:n,pagehide:n};(e=e||window.event).type in n?"blur"==n[e.type]?(S(),o.onWindowBlur()):(S(),o.onWindowFocus()):this[r]?(S(),o.onWindowBlur()):(S(),o.onWindowFocus())}void 0!==C.document[r]&&e({type:C.document[r]?"blur":"focus"})}({onWindowFocus:function(){},onWindowBlur:function(){o.pause(),L(function(){l(!1)},100)}}),l.internalCallCount=0},o.ready(function(){var n,o=this;T||(n=o.currentTime,o.currentTime=function(e){if(void 0===e)return n.apply(o);var t=!1;a||(i===w?(r<e&&(e=r),t=!0):i===y&&(t=!1)),(t||a)&&n.apply(o,[e])}),S(),T&&o.on("loadedmetadata",function(){e()})}),T||f.addEventListener("loadedmetadata",function(){e()})))}C.setTimeout(function(){e()})},v.setupHTML5AudioPlayer=function(e){var t="html5AudioDiv_"+e.component_element_id,n=window.document.getElementById(t);C.setTimeout(function(){var e;n&&((v.adminView||v.previewSegment)&&(e=videojs.getPlayers(),angular.isDefined(e)&&angular.isDefined(e[t])&&delete e[t]),videojs(t,{fluid:!0,aspectRatio:"1:0",controlBar:{fullscreenToggle:!1,volumeMenuButton:{inline:!1}}}))})},v.fixUpIE9ControlsIssue=function(){C.navigator&&C.navigator.userAgent&&/MSIE/.test(C.navigator.userAgent)&&!C.opera&&9==parseFloat(C.navigator.appVersion.split("MSIE")[1])&&jQuery(".lupvideo").each(function(e,t){var n=jQuery(t);t.muted=!0,n.attr("autoplay","autoplay"),C.setTimeout(function(){n.removeAttr("autoplay"),t.muted=!1,t.currentTime=0,t.pause()},1e3)})},v.templateLoaded=function(e){2==e.component_element_type_id?e.hls_manifest||C.document.createElement("video").canPlayType?v.setupHTML5Player(e):r.notify("",A.showMessage("component_elements.play_back_not_supported")):4==e.component_element_type_id&&v.setupHTML5AudioPlayer(e)},v.getIncludeFile=function(e){return 2==e.component_element_type_id?e.hls_manifest||C.document.createElement("video").canPlayType?"/tc/courses/html5_video_segment.html":void r.notify("",A.showMessage("component_elements.play_back_not_supported")):4==e.component_element_type_id?"/tc/courses/audio_segment.html":1==e.component_element_type_id?e.use_pdf_viewer&&(e.enrollment_component_id||v.previewModule)?"/tc/courses/pdf_viewer_document_segment_iframe.html":e.use_pdf_viewer&&!e.enrollment_component_id?"/tc/courses/pdf_viewer_document_segment.html":e.use_iframe_viewer?"/tc/courses/iframe_document_segment.html":e.use_the_crocodoc_api?"/tc/courses/crocodoc_js_document_segment.html":"/tc/courses/box_js_document_segment.html":"/tc/courses/text_segment.html"},v.trackVideoDuration=function(e,t,n,o,r,a){var i=A.setupConfig(v);i.params.video_duration=t,i.params.video_duration_viewed=n,i.params.video_last_position=o,i.params.show_complete=r,i.params.component_element_type_id=a,i.params.enrollment_component_id=e.enrollment_component_id,i.params.enrollment_id=v.$parent.enrollment.id,i.hideSpinner=!0,s.trackVideoDuration(i).then(function(){v.$parent.enrollment=s.enrollment,s.flags.is_completed&&(v.$parent.tracking_complete=!0,C.document.getElementById("confirmCourseCompletion")?(v.$parent.showCompletionButton=!0,_.each(v.$parent.enrollment_components,function(e){e.id===v.$parent.enrollment_component.id&&e.component_type_id===A.componentTypes.page&&(e.enrollment_component_status_id=A.enrollmentStatuses.completed)})):(v.$parent.enrollment_component.enrollment_component_status_id=A.enrollmentStatuses.completed,_.each(v.$parent.enrollment_components,function(e){e.id===v.$parent.enrollment_component.id&&(e.enrollment_component_status_id=A.enrollmentStatuses.completed)})),function e(t){v.$parent.enrollment_components[t]&&"locked"==v.$parent.enrollment_components[t].class?v.$parent.enrollment_components[t].class="not-started":v.$parent.enrollment_components.length>=t+1&&"completed"===v.$parent.enrollment_components[t].class&&e(t+=1)}(_.indexOf(_.map(v.$parent.enrollment_components,function(e){return e.id}),v.$parent.enrollment_component.id)+1))})}}}}]),window.angular.module("lu").directive("spotlight",[function(){return{restrict:"A",scope:{spotlight:"="},link:function(e,n){e.$watch("spotlight",function(e,t){e!==t&&n&&(e?n.addClass("spotlighted"):n.removeClass("spotlighted"))})}}}]),window.angular.module("lu").directive("strongSecret",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){o.$parsers.push(function(e){return/[A-Z]/.test(e)?o.$setValidity("uppercaseValidator",!0):o.$setValidity("uppercaseValidator",!1),/[0-9]/.test(e)?o.$setValidity("numberValidator",!0):o.$setValidity("numberValidator",!1),6===e.length?o.$setValidity("sixCharactersValidator",!0):o.$setValidity("sixCharactersValidator",!1),e})}}});var timerModule=angular.module("lu").directive("timer",["$compile",function(u){return{restrict:"EA",replace:!1,scope:{showWarning:"&showWarning",showWarningAt:"=",interval:"=interval",startTimeAttr:"=startTime",endTimeAttr:"=endTime",countdownattr:"=countdown",finishCallback:"&finishCallback",autoStart:"&autoStart",language:"@?",fallback:"@?",maxTimeUnit:"=",seconds:"=?",minutes:"=?",hours:"=?",days:"=?",months:"=?",years:"=?",secondsS:"=?",minutesS:"=?",hoursS:"=?",daysS:"=?",monthsS:"=?",yearsS:"=?"},controller:["$scope","$element","$attrs","$timeout","I18nService","$interpolate",function(n,o,t,r,e,a){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),n.warning_shown=!1,n.autoStart=t.autoStart||t.autostart,n.language=n.language||"en",n.fallback=n.fallback||"en",n.$watch("language",function(e,t){void 0!==e&&i.init(e,n.fallback)});var i=new e;function s(){n.timeoutId&&clearTimeout(n.timeoutId)}function l(){var e;void 0!==t.startTime&&(n.millis=moment().diff(moment(n.startTimeAttr))),e=i.getTimeUnits(n.millis),n.maxTimeUnit&&"day"!==n.maxTimeUnit?"second"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3),n.minutes=0,n.hours=0,n.days=0,n.months=0,n.years=0):"minute"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4),n.hours=0,n.days=0,n.months=0,n.years=0):"hour"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5),n.days=0,n.months=0,n.years=0):"month"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5%24),n.days=Math.floor(n.millis/36e5/24%30),n.months=Math.floor(n.millis/36e5/24/30),n.years=0):"year"===n.maxTimeUnit&&(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5%24),n.days=Math.floor(n.millis/36e5/24%30),n.months=Math.floor(n.millis/36e5/24/30%12),n.years=Math.floor(n.millis/36e5/24/365)):(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5%24),n.days=Math.floor(n.millis/36e5/24),n.months=0,n.years=0),n.secondsS=1===n.seconds?"":"s",n.minutesS=1===n.minutes?"":"s",n.hoursS=1===n.hours?"":"s",n.daysS=1===n.days?"":"s",n.monthsS=1===n.months?"":"s",n.yearsS=1===n.years?"":"s",n.secondUnit=e.seconds,n.minuteUnit=e.minutes,n.hourUnit=e.hours,n.dayUnit=e.days,n.monthUnit=e.months,n.yearUnit=e.years,n.sseconds=n.seconds<10?"0"+n.seconds:n.seconds,n.mminutes=n.minutes<10?"0"+n.minutes:n.minutes,n.hhours=n.hours<10?"0"+n.hours:n.hours,n.ddays=n.days<10?"0"+n.days:n.days,n.mmonths=n.months<10?"0"+n.months:n.months,n.yyears=n.years<10?"0"+n.years:n.years}i.init(n.language,n.fallback),n.displayProgressBar=0,n.displayProgressActive="active",0===o.html().trim().length?o.append(u("<span>"+a.startSymbol()+"millis"+a.endSymbol()+"</span>")(n)):o.append(u(o.contents())(n)),n.startTime=null,n.endTime=null,n.timeoutId=null,n.countdown=angular.isNumber(n.countdownattr)&&0<=parseInt(n.countdownattr,10)?parseInt(n.countdownattr,10):void 0,n.isRunning=!1,n.$on("timer-start",function(){n.start()}),n.$on("timer-resume",function(){n.resume()}),n.$on("timer-stop",function(){n.stop()}),n.$on("timer-clear",function(){n.clear()}),n.$on("timer-reset",function(){n.reset()}),n.$on("timer-set-countdown",function(e,t){n.countdown=t}),n.$watch("startTimeAttr",function(e,t){e!==t&&n.isRunning&&n.start()}),n.$watch("endTimeAttr",function(e,t){e!==t&&n.isRunning&&n.start()}),n.start=o[0].start=function(){n.startTime=n.startTimeAttr?moment(n.startTimeAttr):moment(),n.endTime=n.endTimeAttr?moment(n.endTimeAttr):null,angular.isNumber(n.countdown)||(n.countdown=angular.isNumber(n.countdownattr)&&0<parseInt(n.countdownattr,10)?parseInt(n.countdownattr,10):void 0),s(),c(),n.isRunning=!0},n.resume=o[0].resume=function(){s(),n.countdownattr&&(n.countdown+=1),n.startTime=moment().diff(moment(n.stoppedTime).diff(moment(n.startTime))),c(),n.isRunning=!0},n.stop=n.pause=o[0].stop=o[0].pause=function(){var e=n.timeoutId;n.clear(),n.$emit("timer-stopped",{timeoutId:e,millis:n.millis,seconds:n.seconds,minutes:n.minutes,hours:n.hours,days:n.days})},n.clear=o[0].clear=function(){n.stoppedTime=moment(),s(),n.timeoutId=null,n.isRunning=!1},n.reset=o[0].reset=function(){n.startTime=n.startTimeAttr?moment(n.startTimeAttr):moment(),n.endTime=n.endTimeAttr?moment(n.endTimeAttr):null,n.countdown=angular.isNumber(n.countdownattr)&&0<parseInt(n.countdownattr,10)?parseInt(n.countdownattr,10):void 0,s(),c(),n.isRunning=!1,n.clear()},n.$watch("countdown",function(e){!n.warning_shown&&e&&e<=n.showWarningAt&&n.showWarning&&r(function(){n.warning_shown=!0,n.$eval(n.showWarning)})}),o.bind("$destroy",function(){s(),n.isRunning=!1}),n.countdownattr?(n.millis=1e3*n.countdownattr,n.addCDSeconds=o[0].addCDSeconds=function(e){n.countdown+=e,n.$digest(),n.isRunning||n.start()},n.returnUsedTime=o[0].returnUsedTime=function(){return{hours:n.hours,minutes:n.minutes,seconds:n.seconds}},n.$on("timer-add-cd-seconds",function(e,t){r(function(){n.addCDSeconds(t)})}),n.$on("timer-set-countdown-seconds",function(e,t){n.isRunning||n.clear(),n.countdown=t,n.millis=1e3*t,l()})):n.millis=0,l();var c=function e(){n.millis=moment().diff(n.startTime);var t=n.millis%1e3;if(n.endTimeAttr&&(n.endTimeAttr,n.millis=moment(n.endTime).diff(moment()),t=n.interval-n.millis%1e3),n.countdownattr&&(n.countdownattr,n.millis=1e3*n.countdown),n.millis<0)return n.stop(),n.millis=0,l(),void(n.finishCallback&&n.$eval(n.finishCallback));l(),n.timeoutId=setTimeout(function(){e(),n.$digest()},n.interval-t),n.$emit("timer-tick",{timeoutId:n.timeoutId,millis:n.millis,timerElement:o[0]}),0<n.countdown?n.countdown--:n.countdown<=0&&(n.stop(),n.finishCallback&&n.$eval(n.finishCallback))};void 0!==n.autoStart&&!0!==n.autoStart||n.start()}]}}]);function show_prices_with_vat(){var e=(e=$("#billing_country_code").val())&&e.toLowerCase(),t=$("#"+e+"_actual_year_cost_display_with_vat_"+$("#chosen_plan").val()).val(),e=$("#"+e+"_actual_plan_cost_with_vat_"+$("#chosen_plan").val()).val();$("#pay_yearly_for_discount").prop("checked")?$("#vat_signup_cost").text(t+"/yr including VAT"):$("#vat_signup_cost").text(e+"/mo including VAT"),(0<$("#actual_year_cost_cost_"+$("#chosen_plan").val()).length?$("#actual_year_cost_cost_"+$("#chosen_plan").val()):$("#actual_plan_cost_display_"+$("#chosen_plan").val())).text(t),$("#actual_plan_cost_display_"+$("#chosen_plan").val()).text(e)}function show_prices_without_vat(){$("#vat_signup_cost").val(),$("#vat_signup_cost").text("");var e=$("#billing_country_code").val(),t=$("#actual_year_cost_display_"+$("#chosen_plan").val()).val(),n=$("#actual_plan_cost_"+$("#chosen_plan").val()).val();is_eu_country(e)?$("#pay_yearly_for_discount").prop("checked")?$("#vat_signup_cost").text(t+"/yr excluding VAT"):$("#vat_signup_cost").text(n+"/mo excluding VAT"):$("#vat_signup_cost").hide(),$("#actual_year_cost_cost_"+$("#chosen_plan").val()).text(t),$("#actual_plan_cost_display_"+$("#chosen_plan").val()).text(n)}function do_country_show_state_logic(e){$("#vat_number_field").hide(),$(".vat_number_field").hide(),$("#billing_country_code").val(e),$("#confirm_state").val("xx").attr("selected",!0),$("#selected_state_code").val("xx"),"US"==e?($("#confirm_state").removeAttr("disabled"),$("#state_and_zip").show()):($("#confirm_state").attr("disabled",""),$("#billing_state_code").val("xx"),$("#state_and_zip").hide()),determine_show_hide_vat_pricings()}function determine_show_hide_vat_pricings(e){var t=$("#billing_country_code").val();is_eu_country(t)?($("#vat_number_field").show(),$(".vat_number_field").show(),$("#vat_signup_cost").show(),("IE"===t?show_prices_with_vat:show_prices_without_vat)()):show_prices_without_vat(),e&&!$("#pay_yearly_for_discount").prop("checked")&&(e=I18n.t("lup.tips.yearly_billing_saving",{saving:$("#you_save_value").text()}),window.luPopover.confirm(I18n.t("lup.confirm"),e).then(function(e){},function(e){$("#pay_yearly_for_discount").prop("checked",!0),determine_show_hide_vat_pricings(!1)}))}function pre_select_country(){$("#confirm_country").val($("#billing_country_code").val()),$("#confirm_country option:selected").each(function(){do_country_show_state_logic($(this).val())}),$("#confirm_state").val($("#billing_state_code").val())}function setup_card_changed_form(){var t,e,n;"undefined"!=typeof stripe&&0!==$("#cc-card-number-element").length&&(n=stripe.elements({fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Roboto:400,500,500i,700,700i,900,900i"}]}),t=n.create("cardNumber",{style:stripeStyles,classes:stripeElementClasses}),e=n.create("cardExpiry",{style:stripeStyles,classes:stripeElementClasses}),n=n.create("cardCvc",{style:stripeStyles,classes:stripeElementClasses}),t.mount("#cc-card-number-element"),e.mount("#cc-card-expiry-element"),n.mount("#cc-card-cvc-element")),$("#payment-changecard").submit(function(e){return e.preventDefault(),$("#cardupdate_address_line_1").val($("#billing_address_line_1").val()),$("#cardupdate_address_line_2").val($("#billing_address_line_2").val()),$("#cardupdate_address_city").val($("#billing_city").val()),$("#cardupdate_address_country").val(I18n.t("countrylists."+$("#billing_country_code").val().toLowerCase())),"xx"!=$("#billing_state_code").val().toLowerCase()?$("#cardupdate_address_state").val(I18n.t("statelists."+$("#billing_state_code").val().toLowerCase())):$("#cardupdate_address_state").val(""),$("#cardupdate_address_zip").val($("#billing_zip").val()),$(".payment-changecard-errors").removeClass("alert"),$(".payment-changecard-errors").removeClass("alert-danger"),$(".payment-changecard-errors").text(""),$("#changecard_submit_button").hide(),$("#changecard_submit_button_blurb").show(),stripe.createToken(t).then(function(e){e.error?($(".payment-changecard-errors").append(e.error.message),$(".payment-changecard-errors").addClass("alert"),$(".payment-changecard-errors").addClass("alert-danger"),$("#changecard_submit_button").show(),$("#changecard_submit_button_blurb").hide()):(e.token,stripeTokenHandler(e.token,"payment-changecard"),$("#payment-changecard").trigger("submit.rails"))}),!1})}function is_eu_country(e){var t=["IE","GB","AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"];for(i=0;i<t.length;i++)if(e==t[i])return!0;return!1}function enrollment_wizard_filter(mainFilterElement,is_for_reports){var is_for_data_setup=!1,show_error_warning=!1,choice_select_types={single_select:1,multi_select:2,numeric_select:3},field_types={string:1,decimal:2,integer:3,string_choice:4,decimal_choice:5,integer_choice:6},filters=[];function getFilters(e){e.find(".container.filter").each(function(e,t){var n,o={id:jQuery(this).data("id"),choice_select_type:jQuery(this).data("choice-type"),field_type:jQuery(this).data("type"),element:jQuery(this)};o.choice_select_type!==choice_select_types.multi_select&&o.choice_select_type!==choice_select_types.numeric_select||(n=[],o.element.find(".choice-selection option").each(function(e,t){t.value&&n.push(t.value)}),o.availableData=n),filters.push(o)})}function choiceSelectorChanged(e,t,n){t.choice_select_type===choice_select_types.single_select?(displayInList(e,t),show_error_warning?show_error_warning=!1:(t.data=e,t.element.find(".choice-selection").hide())):t.choice_select_type===choice_select_types.numeric_select?(t.data&&t.data instanceof Array||(t.data=[]),displayInList(e,t),checkComparatorCondition(t)):(t.data&&t.data instanceof Array||(t.data=[]),-1!=jQuery.inArray(e,t.data)?showError(I18n.t("enrollment_wizard_filter.filter_already_selected"),t):(displayInList(e,t),show_error_warning||(t.data.push(e),checkComparatorCondition(t))))}function fixTypes(n){n.data&&jQuery.each(n.data,function(e,t){t?n.field_type!=field_types.string&&n.field_type!=field_types.string_choice&&(n.data[e]=parseFloat(t)):n.data.splice(e,1)})}function calculateComparatorData(filter,comparator){if(comparator&&-1!=jQuery.inArray(comparator,["==","<",">",">=","<="])){if(filter.data=[],"=="==comparator)return delete filter.comparator,void filter.element.find(".filter-item-container").find(".filter-item").each(function(e,t){var n="";null!=t&&(n=t.textContent||t.innerText),filter.data.push(n)});var comparatorValueElement=filter.element.find(".filter-item-container").find(".filter-item").first()[0],comparatorValue=null;null!=comparatorValueElement&&(comparatorValue=comparatorValueElement.textContent||comparatorValueElement.innerText),fixTypes(filter),null!=comparatorValue&&(filter.comparator={symbol:comparator,value:comparatorValue});var tempData=filter.availableData;tempData.sort();for(var filteredData=[],i=0;i<filter.availableData.length;i++)null!=comparatorValue&&eval("if( parseFloat( filter.availableData[ i ] ) "+comparator+" comparatorValue ) { filteredData.push( filter.availableData[ i ] ); }");0==filteredData.length&&null!=comparatorValueElement&&"undefined"!=comparatorValueElement&&(filteredData=[parseFloat(tempData[0]-1)]),filter.data=filteredData}}function checkComparatorCondition(e){var t,n;e.choice_select_type==choice_select_types.numeric_select&&(t=e.element.find(".filter-item-container").find(".filter-item"),n=e.element.find(".choice-comparator"),1<t.length?(n.val("=="),n.attr("disabled","true"),calculateComparatorData(e,"==")):(n.attr("disabled",!1),calculateComparatorData(e,n.val())))}function inputChanged(e,t,n){t.data=e}function showError(e,t){}function getFilterById(e){for(var t=0;t<filters.length;t++)if(filters[t].id==e)return filters[t]}function findDecimalValueAndElement(e,t){for(var n=[null,t],o=1;o<=5;o++)if(t=parseInt(t).toFixed(o),list_element=e.element.find('.choice-selection option[value="'+t+'"]'),null!=list_element&&"undefined"!=list_element&&jQuery.trim(list_element.html()))return n=[list_element,t];return n}function displayInList(e,t){if(e||0==e){var n=null,o=null;if(-1<jQuery.inArray(t.field_type,[2,5])&&1==e.toString().split(".").length)element_and_value=findDecimalValueAndElement(t,e),n=element_and_value[0],e=element_and_value[1],o=t.element.find('.choice-selection option[value="'+e+'"]');else{var r=e;try{r=e.replace(/'/g,"\\'").replace(/"/g,'\\"')}catch(e){}o=t.element.find('.choice-selection option[value="'+r+'"]')}if(is_for_data_setup){r=e;try{r=e.replace(/'/g,"\\'").replace(/"/g,'\\"')}catch(e){}n=jQuery("<div />",{class:"label label-default",html:'<span class="link-c"> '+e+'</span><a href="#" class="link-c close-label" onclick="setup_data_filters.removeFromFilter(\''+r+"', '"+t.id+'\')" title="'+I18n.t("components.remove")+" "+e+'"><i class="fa fa-times-circle" aria-hidden="true"></i></a>',"data-value":e})}else if(is_for_reports){r=e;try{r=e.replace(/'/g,"\\'").replace(/"/g,'\\"')}catch(e){}n=jQuery("<div />",{class:"label label-default",html:'<span class="link-c">'+e+'</span><a class="link-c close-label" onclick="report_filters.removeFromFilter(\''+r+"', '"+t.id+'\')"><i class="fa fa-times-circle"></i></a>',"data-value":e})}else{r=e;try{r=e.replace(/'/g,"\\'").replace(/"/g,'\\"')}catch(e){}n=jQuery("<div />",{class:"label label-default",html:'<span class="link-c">'+e+'</span><a class="link-c close-label" onclick="enrollment_wizard.removeFromFilter(\''+r+"', '"+t.id+'\')"><i class="fa fa-times-circle"></i></a>',"data-value":e})}if(null!=o&&"undefined"!=o&&jQuery.trim(o.html())){r=e;try{r=e.replace(/'/g,"\\'").replace(/"/g,'\\"')}catch(e){}t.element.find(".filter-item-container").prepend(n),t.element.find('.choice-selection option[value="'+r+'"]').remove(),is_for_data_setup&&!show_error_warning&&t.element.find(".invalid_predefinded_warning").css("display","none"),t.element.height(""),fixContainerHeights()}else is_for_data_setup&&(show_error_warning=(t.choice_select_type===choice_select_types.single_select?t.element.find(".invalid_predefinded_warning").html(I18n.t("portalsettings.invalid_predefined_value",{invalid_value:e})):t.element.find(".invalid_predefinded_warning").html(I18n.t("portalsettings.invalid_predefined_value_multiple")),!0),t.element.find(".invalid_predefinded_warning").css("display","block"),t.element.find(".choice-selection").val(""))}}function removeFromList(e,t){var n=t.element.find(".choice-selection");n.append(jQuery("<option />",{value:e,html:e})),t.data instanceof Array&&t.choice_select_type!=choice_select_types.single_select?t.data.splice(jQuery.inArray(e,t.data),1):(t.data="",n.val(""),n.show()),t.element.find('[data-value="'+e+'"]').remove(),fixContainerHeights()}function setupEvents(){jQuery(filters).each(function(e,o){o.element.find("input").bind("change",function(e){inputChanged(jQuery(this).val(),o,e)}),o.element.find("select").bind("change",function(e){jQuery(this).hasClass("choice-selection")?"none"!=jQuery(this).css("display")&&(choiceSelectorChanged(jQuery(this).val(),o,e),o.choice_select_type!==choice_select_types.multi_select&&o.choice_select_type!==choice_select_types.numeric_select||jQuery(this).val("")):jQuery(this).hasClass("choice-comparator")&&calculateComparatorData(o,jQuery(this).val())}),o.element.find(".select_all_data").bind("click",function(n){o.choice_select_type===choice_select_types.multi_select&&(o.element.find(".choice-selection"),o.element.find(".choice-selection option:enabled").each(function(e,t){choiceSelectorChanged(jQuery(t).val(),o,n)}))})})}function fixContainerHeights(){var n,e;is_for_data_setup||(n=0,jQuery(filters).each(function(e,t){t.element[0].offsetHeight>n&&(n=t.element[0].offsetHeight),(e+1)%3==0&&(filters[e].element.height(n),filters[e-1].element.height(n),filters[e-2].element.height(n),n=0)}),1<filters.length&&filters.length%2==1&&((e=filters.slice(-2))[0].element[0].offsetHeight>e[1].element[0].offsetHeight?e[1].element.height(e[0].element[0].offsetHeight):e[0].element.height(e[1].element[0].offsetHeight)))}function is_choice_type(e){return e==field_types.string_choice||e==field_types.decimal_choice||e==field_types.integer_choice}this.collectData=function(){var n={};return jQuery.each(filters,function(e,t){t.data&&t.data instanceof Array&&fixTypes(t),(is_for_data_setup||t.data&&0!=t.data.length)&&(null!=t.data&&(n[t.id]={type_id:t.field_type,values:t.data}),t.comparator&&(n[t.id].comparator=t.comparator))}),n},this.applyFilters=function(e){"null"!==e&&e&&jQuery.each(e,function(e,t){var n=getFilterById(e);null!=n&&"null"!=n&&"undefined"!=n&&(is_choice_type(n.field_type)&&n.choice_select_type==choice_select_types.numeric_select?t.comparator?(n.element.find(".choice-comparator").val(t.comparator.symbol),choiceSelectorChanged(t.comparator.value,n),calculateComparatorData(n,t.comparator.symbol)):t.values instanceof Array&&(jQuery.each(t.values,function(e,t){choiceSelectorChanged(t,n)}),jQuery(mainFilterElement).find(".choice-comparator").val("==")):is_choice_type(n.field_type)?is_choice_type(n.field_type)&&n.choice_select_type==choice_select_types.single_select?(n.element.find(".choice-selection").val(t.values),choiceSelectorChanged(t.values,n)):is_choice_type(n.field_type)&&n.choice_select_type==choice_select_types.multi_select&&(!t.values||t.values instanceof Array||(t.values=[t.values]),jQuery.each(t.values,function(e,t){choiceSelectorChanged(t.toString(),n)}),show_error_warning=show_error_warning&&!1):(n.element.find("input").val(t.values),inputChanged(t.values,n)))})},this.hideFiltersWithData=function(e){"null"!==e&&e&&jQuery.each(e,function(e,t){e=getFilterById(e);null!=e&&"null"!=e&&"undefined"!=e&&e.element.hide()})},this.removeFromFilter=function(e,t){t=getFilterById(t);removeFromList(e,t),checkComparatorCondition(t)},this.removeEvents=function(){jQuery(filters).each(function(e,t){t.element.find("input, select").unbind("change")})},this.fixContainerHeightsForReports=function(){fixContainerHeights()},this.resetContainerHeightsForReports=function(){jQuery(filters).each(function(e,t){filters[e].element.height("auto")})},this.resetFilters=function(o,e){jQuery.each(e,function(e,t){var n=getFilterById(e);if(is_choice_type(n.field_type)&&n.choice_select_type==choice_select_types.numeric_select)n.data=[],jQuery(o).find(".choice-comparator").val(""),jQuery(o).find(".choice-selection").val("");else if(is_choice_type(n.field_type)){if(is_choice_type(n.field_type)&&n.choice_select_type==choice_select_types.single_select)removeFromList(t.values,n);else if(is_choice_type(n.field_type)&&n.choice_select_type==choice_select_types.multi_select)for(;0<t.values.length;)removeFromList(t.values[0],n)}else n.element.find("input").val(""),inputChanged("",n)})},this.used_for_data_setup=function(){is_for_data_setup=!0},this.prevent_cannot_edit_value=function(){is_for_data_setup&&jQuery.each(filters,function(e,t){var n;null!=t.element.attr("data-cannot-edit")&&"true"==t.element.attr("data-cannot-edit")&&(n="",is_choice_type(t.field_type)?(jQuery.each(t.element.find(".close-label"),function(e,t){t.parentElement.style.paddingRight="10px",t.remove()}),t.element.find(".choice-selection").remove(),t.element.find(".select_all_data").remove()):(n=t.element.find(".data_input").val(),t.element.find(".data_input").remove()),null!=n&&""!=n||(n="n/a"),is_choice_type(t.field_type)&&null!=t.data&&""!=t.data||(n=jQuery("<div />",{class:"filter-item form-control disabled",html:n,style:"padding-right: 10px;"}),t.element.find(".filter-item-container").prepend(n)))})},getFilters(mainFilterElement),setupEvents(),is_for_reports||fixContainerHeights()}"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports=timerModule),function(){"use strict";function e(i,s,l,c){return{restrict:"E",scope:{webinar:"=",session:"=",course:"=",passwordValidatorForm:"=?"},templateUrl:"/tc/webinars/update-webinar-settings.html",link:function(n,e,t){function o(){n.passwordOption=l.initPasswordOptions(n.webinar.webinar_settings_id),a(n.passwordOption.selectedValue),l.selectAccount(n.courseId,n.webinar),n.webinar_type=l.findAccount(n.webinar.webinar_settings_id).webinar_type,n.initial_load?n.initial_load=!1:n.webinar.webinar_key="_new_webinar",c.$broadcast("webinarSelected"),n.isMsTeams=n.webinar_type===s.webinar_types.ms_teams}function r(){return"__webinar"===n.session.location_id}function a(e){n.webinar.new_webinar_data&&(n.webinar.new_webinar_data.use_default_password=!1,n.webinar.new_webinar_data.password=null,"default"===e?(n.webinar.new_webinar_data.use_default_password=!0,n.webinar.new_webinar_data.password=null):"no_password"===e&&(n.webinar.new_webinar_data.password=null))}n.helper=s,n.minimumAttendanceThreshold=i.getKey("minimum_attendance_threshold"),n.settingMinimalThresholdForMsTeamsEnabled=i.getKey("setting_minimal_threshold_for_ms_teams_enabled"),function(e){{var t;n.courseId=n.course.id,n.editScreen=!!n.session,n.initial_load=!0,e&&(n.webinar=e.attributes,n.webinar&&(t=i.getKey("webex_pass_policy_config").attributes,e=i.getKey("webex_pass_validator_rules").attributes,n.webinar_config={webex_pass_policy_config:t,webex_pass_validator_rules:e},l.setAccounts(n.webinar.webinar_settings_id,n.courseId,i.getKey("webinar_accounts")),n.webinar.enabled&&(n.session.location_id="__webinar"),n.webinar.component_webinar_setting_id||function(){var e=l.getAccounts(),e=e[0]?e[0].id:"";n.webinar.webinar_settings_id=e,n.webinar.webinar_key="_new_webinar",n.webinar.new_webinar_data={}}(),o()))}}(i.getKey("webinar")),n.$watchCollection(function(){return n.session},function(e,t){n.webinar.enabled=!!n.webinar&&r()}),n.selectWebinarAccount=o,n.selectWebinar=function(){{var e;"_new_webinar"===n.webinar.webinar_key?(n.webinar.new_webinar_data||(n.webinar.new_webinar_data={}),n.passwordOption=l.initPasswordOptions(n.webinar.webinar_settings_id),a(n.passwordOption.selectedValue),c.$broadcast("webinarSelected")):n.webinar_type===s.webinar_types.zoom?(e=_.find(l.getWebinarsForAccount(n.webinar.webinar_settings_id),function(e){return e.key==n.webinar.webinar_key}))&&(n.webinar.meeting_type=e.zoom_meeting_type==s.zoom_webinar_types.meeting,c.$broadcast("webinarSelected",e)):c.$broadcast("webinarSelected")}},n.displayWebinarSettings=r,n.disableWebinarEdit=function(){return n.course.published_status_id!=n.helper.coursePublishedStatuses.draft},n.webinarAccounts=function(){return l.getAccounts()},n.webinarSelection=function(){return l.getWebinarsForAccount(n.webinar.webinar_settings_id)},n.setPasswordOptions=a,n.passwordMaxLength=function(){return n.webinar_type===s.webinar_types.zoom?s.webinars.password_maxlength.zoom:n.webinar_type===s.webinar_types.webex_event||n.webinar_type===s.webinar_types.webex_training?n.webinar_config.webex_pass_validator_rules.password_length:s.webinars.password_maxlength.default},n.validate_webex_password_rules=function(){(function(){{var e,t;"specify"!==n.passwordOption.selectedValue||n.webinar_type!==s.webinar_types.webex_event&&n.webinar_type!==s.webinar_types.webex_training||(e=new RegExp(n.webinar_config.webex_pass_validator_rules.regexp),(t=n.webinar.new_webinar_data.password)&&e.test(t)?n.passwordValidatorForm.webinar_password.$setValidity("empty",!1):n.passwordValidatorForm.webinar_password.$setValidity("empty",!0))}})(),function(){{var e;"specify"!==n.passwordOption.selectedValue||n.webinar_type!==s.webinar_types.webex_event&&n.webinar_type!==s.webinar_types.webex_training||((e=n.webinar.new_webinar_data.password)&&e.length>n.webinar_config.webex_pass_validator_rules.password_length?n.passwordValidatorForm.webinar_password.$setValidity("length",!1):n.passwordValidatorForm.webinar_password.$setValidity("length",!0))}}()},n.isWebexValidator=function(){return n.webinar_type===s.webinar_types.webex_event||n.webinar_type===s.webinar_types.webex_training}}}}function t(i,e,s,a,l){var o=[];function c(t){return _.find(o,function(e){return e.id==t})}function u(t,n,o){var e,r,a;t.webinars.length||(e=o.webinar_settings_id,r=n,e="/webinar/:id/get_webinars.json".replace(/:id/,e),a=l.defer(),i.get(e,{params:{course_id:r}}).then(function(e){return 200!==e.status?a.reject():a.resolve(e.data.webinars)}),a.promise.then(function(e){t.webinars=e,function(t,e,n){{var o;t.webinar_type===s.webinar_types.zoom&&n.component_webinar_setting_id&&"_new_webinar"!=n.webinar_key&&(_.find(t.webinars,function(e){return e.key===n.webinar_key})||(o="/webinar/:id/past_webinar.json".replace(/:id/,n.webinar_settings_id),i.get(o,{params:{course_id:e,component_webinar_setting_id:n.component_webinar_setting_id,webinar_key:n.webinar_key}}).then(function(e){t.webinars.push(e.data.webinars[0])})))}}(t,n,o)}))}return{initPasswordOptions:function(e){var t={};return c(e).default_password?(t.selectedValue="default",t.displayDefaultPasswordOption=!0):(t.selectedValue="specify",t.displayDefaultPasswordOption=!1),t},getWebinarsForAccount:function(e){return(e=c(e))?e.webinars:[]},addWebinarToAccount:function(e,t){(e=c(e))&&e.webinars.push(t)},findAccount:c,selectAccount:function(t,n){var e,o,r=c(n.webinar_settings_id);r&&(e=r,[s.webinar_types.ms_teams].includes(e.webinar_type)?(e="/lup/webinars/authentication_token/expiration_status/:id.json".replace(/:id/,(e=n).webinar_settings_id),o=l.defer(),i.get(e).then(function(e){if(200!==e.status)return o.reject(e);e=!e.data.expired;return o.resolve(e)}),o.promise.then(function(e){e?u(r,t,n):function(e){e=I18n.t("lup.webinar.invalid_token",{provider_name:s.webinar_types_names[e.webinar_type],account_name:e.display_name});a.error(e,null,{timeOut:1e4})}(r)})):u(r,t,n))},setAccounts:function(e,t,n){o=n},getAccounts:function(){return o},addAccount:function(e){o.push(e)}}}angular.module("lu").service("WebinarService",t).directive("webinarSettings",e),e.$inject=["StorageFactory","LupHelper","WebinarService","$rootScope"],t.$inject=["$http","$timeout","LupHelper","toastr","$q"]}(),angular.module("lu").filter("abbreviate",function(){return function(e,t){var n=["K","M","B"];if(window.isNaN(e))return 0;if(e.toString().length<=t)return e;var o=Math.floor(Math.log(Math.abs(e))/Math.log(1e3)),t=e/Math.pow(1e3,o);return t<100?(e/Math.pow(1e3,o)).toFixed(t<10?1:0)+n[o-1]:(e/Math.pow(1e3,++o)).toFixed(1)+n[o-1]}}),angular.module("lu").filter("capitalize",function(){return function(e){if(!e||0===e.length)return"";for(var t="",n=e.split(" "),o=0;o<n.length;o++)0!==o&&(t+=" "),t+=n[o].charAt(0).toUpperCase()+n[o].substr(1).toLowerCase();return t}}),function(){"use strict";angular.module("lu").filter("charactersLeft",function(){return function(e,t,n){if(!e)return t;var o=e.match(/\n/g)||[];e=e.replace(/(\r\n|\n|\r)/gm,"");e=t-(2*o.length+e.length);return n||0<e?e:0}})}(),window.angular.module("lu").filter("displayDateTime",["$window","$rootScope","$log","LupHelper",function(r,a,i,s){return r.moment.tz.load({version:"2017c",zones:["Africa/Abidjan|LMT GMT|g.8 0|01|-2ldXH.Q|48e5","Africa/Accra|LMT GMT +0020|.Q 0 -k|012121212121212121212121212121212121212121212121|-26BbX.8 6tzX.8 MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE|41e5","Africa/Nairobi|LMT EAT +0230 +0245|-2r.g -30 -2u -2J|01231|-1F3Cr.g 3Dzr.g okMu MFXJ|47e5","Africa/Algiers|PMT WET WEST CET CEST|-9.l 0 -10 -10 -20|0121212121212121343431312123431213|-2nco9.l cNb9.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 DA0 Imo0 rd0 De0 9Xz0 1fb0 1ap0 16K0 2yo0 mEp0 hwL0 jxA0 11A0 dDd0 17b0 11B0 1cN0 2Dy0 1cN0 1fB0 1cL0|26e5","Africa/Lagos|LMT WAT|-d.A -10|01|-22y0d.A|17e6","Africa/Bissau|LMT -01 GMT|12.k 10 0|012|-2ldWV.E 2xonV.E|39e4","Africa/Maputo|LMT CAT|-2a.k -20|01|-2GJea.k|26e5","Africa/Cairo|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-1bIO0 vb0 1ip0 11z0 1iN0 1nz0 12p0 1pz0 10N0 1pz0 16p0 1jz0 s3d0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1WL0 rd0 1Rz0 wp0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1qL0 Xd0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1ny0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 WL0 1qN0 Rb0 1wp0 On0 1zd0 Lz0 1EN0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0|15e6","Africa/Casablanca|LMT WET WEST CET|u.k 0 -10 -10|0121212121212121213121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2gMnt.E 130Lt.E rb0 Dd0 dVb0 b6p0 TX0 EoB0 LL0 gnd0 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4mn0 SyN0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 Rc0 11A0 e00 e00 U00 11A0 8o0 e00 11A0 11A0 5A0 e00 17c0 1fA0 1a00 1a00 1fA0 17c0 1io0 14o0 1lc0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1lc0 14o0 1fA0|32e5","Africa/Ceuta|WET WEST CET CEST|0 -10 -10 -20|010101010101010101010232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-25KN0 11z0 drd0 18p0 3HX0 17d0 1fz0 1a10 1io0 1a00 1y7o0 LL0 gnd0 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4VB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|85e3","Africa/El_Aaiun|LMT -01 WET WEST|Q.M 10 0 -10|01232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1rDz7.c 1GVA7.c 6L0 AL0 1Nd0 XX0 1Cp0 pz0 1cBB0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 Rc0 11A0 e00 e00 U00 11A0 8o0 e00 11A0 11A0 5A0 e00 17c0 1fA0 1a00 1a00 1fA0 17c0 1io0 14o0 1lc0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1lc0 14o0 1fA0|20e4","Africa/Johannesburg|SAST SAST SAST|-1u -20 -30|012121|-2GJdu 1Ajdu 1cL0 1cN0 1cL0|84e5","Africa/Juba|LMT CAT CAST EAT|-26.s -20 -30 -30|01212121212121212121212121212121213|-1yW26.s 1zK06.s 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0","Africa/Khartoum|LMT CAT CAST EAT|-2a.8 -20 -30 -30|012121212121212121212121212121212131|-1yW2a.8 1zK0a.8 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0 HjL0|51e5","Africa/Monrovia|MMT MMT GMT|H.8 I.u 0|012|-23Lzg.Q 28G01.m|11e5","Africa/Ndjamena|LMT WAT WAST|-10.c -10 -20|0121|-2le10.c 2J3c0.c Wn0|13e5","Africa/Tripoli|LMT CET CEST EET|-Q.I -10 -20 -20|012121213121212121212121213123123|-21JcQ.I 1hnBQ.I vx0 4iP0 xx0 4eN0 Bb0 7ip0 U0n0 A10 1db0 1cN0 1db0 1dd0 1db0 1eN0 1bb0 1e10 1cL0 1c10 1db0 1dd0 1db0 1cN0 1db0 1q10 fAn0 1ep0 1db0 AKq0 TA0 1o00|11e5","Africa/Tunis|PMT CET CEST|-9.l -10 -20|0121212121212121212121212121212121|-2nco9.l 18pa9.l 1qM0 DA0 3Tc0 11B0 1ze0 WM0 7z0 3d0 14L0 1cN0 1f90 1ar0 16J0 1gXB0 WM0 1rA0 11c0 nwo0 Ko0 1cM0 1cM0 1rA0 10M0 zuM0 10N0 1aN0 1qM0 WM0 1qM0 11A0 1o00|20e5","Africa/Windhoek|+0130 SAST SAST CAT WAT WAST|-1u -20 -30 -20 -10 -20|01213454545454545454545454545454545454545454545454543|-2GJdu 1Ajdu 1cL0 1SqL0 9Io0 16P0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|NST NWT NPT BST BDT AHST HST HDT|b0 a0 a0 b0 a0 a0 a0 90|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17SX0 8wW0 iB0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AST AWT APT AHST AHDT YST AKST AKDT|a0 90 90 a0 90 90 90 80|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17T00 8wX0 iA0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Port_of_Spain|LMT AST|46.4 40|01|-2kNvR.U|43e3","America/Araguaina|LMT -03 -02|3c.M 30 20|0121212121212121212121212121212121212121212121212121|-2glwL.c HdKL.c 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 ny10 Lz0|14e4","America/Argentina/Buenos_Aires|CMT -04 -03 -02|4g.M 40 30 20|01212121212121212121212121212121212121212123232323232323232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 A4p0 uL0 1qN0 WL0","America/Argentina/Catamarca|CMT -04 -03 -02|4g.M 40 30 20|01212121212121212121212121212121212121212123232323132321232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 7B0 8zb0 uL0","America/Argentina/Cordoba|CMT -04 -03 -02|4g.M 40 30 20|01212121212121212121212121212121212121212123232323132323232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0 1qN0 WL0","America/Argentina/Jujuy|CMT -04 -03 -02|4g.M 40 30 20|012121212121212121212121212121212121212121232323121323232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1ze0 TX0 1ld0 WK0 1wp0 TX0 A4p0 uL0","America/Argentina/La_Rioja|CMT -04 -03 -02|4g.M 40 30 20|012121212121212121212121212121212121212121232323231232321232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0","America/Argentina/Mendoza|CMT -04 -03 -02|4g.M 40 30 20|01212121212121212121212121212121212121212123232312121321232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1u20 SL0 1vd0 Tb0 1wp0 TW0 ri10 Op0 7TX0 uL0","America/Argentina/Rio_Gallegos|CMT -04 -03 -02|4g.M 40 30 20|01212121212121212121212121212121212121212123232323232321232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0","America/Argentina/Salta|CMT -04 -03 -02|4g.M 40 30 20|012121212121212121212121212121212121212121232323231323232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0","America/Argentina/San_Juan|CMT -04 -03 -02|4g.M 40 30 20|012121212121212121212121212121212121212121232323231232321232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rld0 m10 8lb0 uL0","America/Argentina/San_Luis|CMT -04 -03 -02|4g.M 40 30 20|012121212121212121212121212121212121212121232323121212321212|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 XX0 1q20 SL0 AN0 vDb0 m10 8lb0 8L0 jd0 1qN0 WL0 1qN0","America/Argentina/Tucuman|CMT -04 -03 -02|4g.M 40 30 20|0121212121212121212121212121212121212121212323232313232123232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 4N0 8BX0 uL0 1qN0 WL0","America/Argentina/Ushuaia|CMT -04 -03 -02|4g.M 40 30 20|01212121212121212121212121212121212121212123232323232321232|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rkN0 8p0 8zb0 uL0","America/Curacao|LMT -0430 AST|4z.L 4u 40|012|-2kV7o.d 28KLS.d|15e4","America/Asuncion|AMT -04 -03|3O.E 40 30|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-1x589.k 1DKM9.k 3CL0 3Dd0 10L0 1pB0 10n0 1pB0 10n0 1pB0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1lB0 14n0 1dd0 1cL0 1fd0 WL0 1rd0 1aL0 1dB0 Xz0 1qp0 Xb0 1qN0 10L0 1rB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 WN0 1qL0 11B0 1nX0 1ip0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 TX0 1tB0 19X0 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0|28e5","America/Atikokan|CST CDT CWT CPT EST|60 50 50 50 50|0101234|-25TQ0 1in0 Rnb0 3je0 8x30 iw0|28e2","America/Bahia|LMT -03 -02|2y.4 30 20|01212121212121212121212121212121212121212121212121212121212121|-2glxp.U HdLp.U 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 l5B0 Rb0|27e5","America/Bahia_Banderas|LMT MST CST PST MDT CDT|71 70 60 80 60 50|0121212131414141414141414141414141414152525252525252525252525252525252525252525252525252525252|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|84e3","America/Barbados|LMT BMT AST ADT|3W.t 3W.t 40 30|01232323232|-1Q0I1.v jsM0 1ODC1.v IL0 1ip0 17b0 1ip0 17b0 1ld0 13b0|28e4","America/Belem|LMT -03 -02|3d.U 30 20|012121212121212121212121212121|-2glwK.4 HdKK.4 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0|20e5","America/Belize|LMT CST -0530 CDT|5Q.M 60 5u 50|01212121212121212121212121212121212121212121212121213131|-2kBu7.c fPA7.c Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1f0Mu qn0 lxB0 mn0|57e3","America/Blanc-Sablon|AST ADT AWT APT|40 30 30 30|010230|-25TS0 1in0 UGp0 8x50 iu0|11e2","America/Boa_Vista|LMT -04 -03|42.E 40 30|0121212121212121212121212121212121|-2glvV.k HdKV.k 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 smp0 WL0 1tB0 2L0|62e2","America/Bogota|BMT -05 -04|4U.g 50 40|0121|-2eb73.I 38yo3.I 2en0|90e5","America/Boise|PST PDT MST MWT MPT MDT|80 70 70 60 60 60|0101023425252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-261q0 1nX0 11B0 1nX0 8C10 JCL0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 Dd0 1Kn0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e4","America/Cambridge_Bay|-00 MST MWT MPT MDDT MDT CST CDT EST|0 70 60 60 50 60 60 50 50|0123141515151515151515151515151515151515151515678651515151515151515151515151515151515151515151515151515151515151515151515151|-21Jc0 RO90 8x20 ix0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11A0 1nX0 2K0 WQ0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e2","America/Campo_Grande|LMT -04 -03|3C.s 40 30|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwl.w HdLl.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0|77e4","America/Cancun|LMT CST EST EDT CDT|5L.4 60 50 40 50|0123232341414141414141414141414141414141412|-1UQG0 2q2o0 yLB0 1lb0 14p0 1lb0 14p0 Lz0 xB0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|CMT -0430 -04|4r.E 4u 40|01212|-2kV7w.k 28KM2.k 1IwOu kqo0|29e5","America/Cayenne|LMT -04 -03|3t.k 40 30|012|-2mrwu.E 2gWou.E|58e3","America/Panama|CMT EST|5j.A 50|01|-2uduE.o|15e5","America/Chicago|CST CDT EST CWT CPT|60 50 50 50 50|01010101010101010101010101010101010102010101010103401010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 1wp0 TX0 WN0 1qL0 1cN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 11B0 1Hz0 14p0 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|LMT MST CST CDT MDT|74.k 70 60 50 60|0121212323241414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 2zQN0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|81e4","America/Costa_Rica|SJMT CST CDT|5A.d 60 50|0121212121|-1Xd6n.L 2lu0n.L Db0 1Kp0 Db0 pRB0 15b0 1kp0 mL0|12e5","America/Creston|MST PST|70 80|010|-29DR0 43B0|53e2","America/Cuiaba|LMT -04 -03|3I.k 40 30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwf.E HdLf.E 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 4a10 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0|54e4","America/Danmarkshavn|LMT -03 -02 GMT|1e.E 30 20 0|01212121212121212121212121212121213|-2a5WJ.k 2z5fJ.k 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 DC0|8","America/Dawson|YST YDT YWT YPT YDDT PST PDT|90 80 80 80 70 80 70|0101023040565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-25TN0 1in0 1o10 13V0 Ser0 8x00 iz0 LCL0 1fA0 jrA0 fNd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|13e2","America/Dawson_Creek|PST PDT PWT PPT MST|80 70 70 70 70|0102301010101010101010101010101010101010101010101010101014|-25TO0 1in0 UGp0 8x10 iy0 3NB0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 ML0|12e3","America/Denver|MST MDT MWT MPT|70 60 60 60|01010101023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261r0 1nX0 11B0 1nX0 11B0 1qL0 WN0 mn0 Ord0 8x20 ix0 LCN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Detroit|LMT CST EST EWT EPT EDT|5w.b 60 50 40 40 40|012342525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-2Cgir.N peqr.N 156L0 8x40 iv0 6fd0 11z0 XQp0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e5","America/Edmonton|LMT MST MDT MWT MPT|7x.Q 70 60 60 60|01212121212121341212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2yd4q.8 shdq.8 1in0 17d0 hz0 2dB0 1fz0 1a10 11z0 1qN0 WL0 1qN0 11z0 IGN0 8x20 ix0 3NB0 11z0 LFB0 1cL0 3Cp0 1cL0 66N0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|10e5","America/Eirunepe|LMT -05 -04|4D.s 50 40|0121212121212121212121212121212121|-2glvk.w HdLk.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0 yTd0 d5X0|31e3","America/El_Salvador|LMT CST CDT|5U.M 60 50|012121|-1XiG3.c 2Fvc3.c WL0 1qN0 WL0|11e5","America/Tijuana|LMT MST PST PDT PWT PPT|7M.4 70 80 70 70 70|012123245232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQE0 4PX0 8mM0 8lc0 SN0 1cL0 pHB0 83r0 zI0 5O10 1Rz0 cOO0 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 BUp0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|20e5","America/Fort_Nelson|PST PDT PWT PPT MST|80 70 70 70 70|01023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010104|-25TO0 1in0 UGp0 8x10 iy0 3NB0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Fort_Wayne|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|010101023010101010101010101040454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 QI10 Db0 RB0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 5Tz0 1o10 qLb0 1cL0 1cN0 1cL0 1qhd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Fortaleza|LMT -03 -02|2y 30 20|0121212121212121212121212121212121212121|-2glxq HdLq 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 5z0 2mN0 On0|34e5","America/Glace_Bay|LMT AST ADT AWT APT|3X.M 40 30 30 30|012134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsI0.c CwO0.c 1in0 UGp0 8x50 iu0 iq10 11z0 Jg10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3","America/Godthab|LMT -03 -02|3q.U 30 20|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a5Ux.4 2z5dx.4 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e3","America/Goose_Bay|NST NDT NST NDT NWT NPT AST ADT ADDT|3u.Q 2u.Q 3u 2u 2u 2u 40 30 20|010232323232323245232323232323232323232323232323232323232326767676767676767676767676767676767676767676768676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-25TSt.8 1in0 DXb0 2HbX.8 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 WL0 1qN0 WL0 1qN0 7UHu itu 1tB0 WL0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1tB0 WL0 1ld0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 S10 g0u 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|76e2","America/Grand_Turk|KMT EST EDT AST|57.b 50 40 40|01212121212121212121212121212121212121212121212121212121212121212121212121232121212121212121212121212121212121212121|-2l1uQ.N 2HHBQ.N 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Guatemala|LMT CST CDT|62.4 60 50|0121212121|-24KhV.U 2efXV.U An0 mtd0 Nz0 ifB0 17b0 zDB0 11z0|13e5","America/Guayaquil|QMT -05 -04|5e 50 40|0121|-1yVSK 2uILK rz0|27e5","America/Guyana|LMT -0345 -03 -04|3Q.E 3J 30 40|0123|-2dvU7.k 2r6LQ.k Bxbf|80e4","America/Halifax|LMT AST ADT AWT APT|4e.o 40 30 30 30|0121212121212121212121212121212121212121212121212134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsHJ.A xzzJ.A 1db0 3I30 1in0 3HX0 IL0 1E10 ML0 1yN0 Pb0 1Bd0 Mn0 1Bd0 Rz0 1w10 Xb0 1w10 LX0 1w10 Xb0 1w10 Lz0 1C10 Jz0 1E10 OL0 1yN0 Un0 1qp0 Xb0 1qp0 11X0 1w10 Lz0 1HB0 LX0 1C10 FX0 1w10 Xb0 1qp0 Xb0 1BB0 LX0 1td0 Xb0 1qp0 Xb0 Rf0 8x50 iu0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 6i10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Havana|HMT CST CDT|5t.A 50 40|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1Meuu.o 72zu.o ML0 sld0 An0 1Nd0 Db0 1Nd0 An0 6Ep0 An0 1Nd0 An0 JDd0 Mn0 1Ap0 On0 1fd0 11X0 1qN0 WL0 1wp0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 14n0 1ld0 14L0 1kN0 15b0 1kp0 1cL0 1cN0 1fz0 1a10 1fz0 1fB0 11z0 14p0 1nX0 11B0 1nX0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 1a10 1in0 1a10 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 17c0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 11A0 6i00 Rc0 1wo0 U00 1tA0 Rc0 1wo0 U00 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Hermosillo|LMT MST CST PST MDT|7n.Q 70 60 80 60|0121212131414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0|64e4","America/Indiana/Knox|CST CDT CWT CPT EST|60 50 50 50 50|0101023010101010101010101010101010101040101010101010101010101010101010101010101010101010141010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 3NB0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 11z0 1o10 11z0 1o10 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 3Cn0 8wp0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 z8o0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Marengo|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101023010101010101010104545454545414545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 dyN0 11z0 6fd0 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 jrz0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1e6p0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Petersburg|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010104010101010101010101010141014545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 njX0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 3Fb0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 19co0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Tell_City|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010454541010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 g0p0 11z0 1o10 11z0 1qL0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 caL0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vevay|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|010102304545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 kPB0 Awn0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1lnd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vincennes|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010454541014545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 g0p0 11z0 1o10 11z0 1qL0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 caL0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Winamac|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010101010454541054545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 jrz0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1za0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Inuvik|-00 PST PDDT MST MDT|0 80 60 70 60|0121343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-FnA0 tWU0 1fA0 wPe0 2pz0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|35e2","America/Iqaluit|-00 EWT EPT EST EDDT EDT CST CDT|0 40 40 50 30 40 60 50|01234353535353535353535353535353535353535353567353535353535353535353535353535353535353535353535353535353535353535353535353|-16K00 7nX0 iv0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|67e2","America/Jamaica|KMT EST EDT|57.b 50 40|0121212121212121212121|-2l1uQ.N 2uM1Q.N 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0|94e4","America/Juneau|PST PWT PPT PDT YDT YST AKST AKDT|80 70 70 70 80 90 90 80|01203030303030303030303030403030356767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cM0 1cM0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|33e3","America/Kentucky/Louisville|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101010102301010101010101010101010101454545454545414545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 3Fd0 Nb0 LPd0 11z0 RB0 8x30 iw0 Bb0 10N0 2bB0 8in0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 xz0 gso0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Kentucky/Monticello|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101023010101010101010101010101010101010101010101010101010101010101010101454545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 SWp0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/La_Paz|CMT BOST -04|4w.A 3w.A 40|012|-1x37r.o 13b0|19e5","America/Lima|LMT -05 -04|58.A 50 40|0121212121212121|-2tyGP.o 1bDzP.o zX0 1aN0 1cL0 1cN0 1cL0 1PrB0 zX0 1O10 zX0 6Gp0 zX0 98p0 zX0|11e6","America/Los_Angeles|PST PDT PWT PPT|80 70 70 70|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261q0 1nX0 11B0 1nX0 SgN0 8x10 iy0 5Wp1 1VaX 3dA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Maceio|LMT -03 -02|2m.Q 30 20|012121212121212121212121212121212121212121|-2glxB.8 HdLB.8 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 8Q10 WL0 1tB0 5z0 2mN0 On0|93e4","America/Managua|MMT CST EST CDT|5J.c 60 50 50|0121313121213131|-1quie.M 1yAMe.M 4mn0 9Up0 Dz0 1K10 Dz0 s3F0 1KH0 DB0 9In0 k8p0 19X0 1o30 11y0|22e5","America/Manaus|LMT -04 -03|40.4 40 30|01212121212121212121212121212121|-2glvX.U HdKX.U 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0|19e5","America/Martinique|FFMT AST ADT|44.k 40 30|0121|-2mPTT.E 2LPbT.E 19X0|39e4","America/Matamoros|LMT CST CDT|6E 60 50|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1UQG0 2FjC0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|45e4","America/Mazatlan|LMT MST CST PST MDT|75.E 70 60 80 60|0121212131414141414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|44e4","America/Menominee|CST CDT CWT CPT EST|60 50 50 50 50|01010230101041010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 LCN0 1fz0 6410 9Jb0 1cM0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|85e2","America/Merida|LMT CST EST CDT|5W.s 60 50 50|0121313131313131313131313131313131313131313131313131313131313131313131313131313131313131|-1UQG0 2q2o0 2hz0 wu30 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|11e5","America/Metlakatla|PST PWT PPT PDT AKST AKDT|80 70 70 70 90 80|0120303030303030303030303030303030454545454545454545454545454545454545454545454|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1hU10 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Mexico_City|LMT MST CST CDT CWT|6A.A 70 60 50 50|012121232324232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 gEn0 TX0 3xd0 Jb0 6zB0 SL0 e5d0 17b0 1Pff0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|20e6","America/Miquelon|LMT AST -03 -02|3I.E 40 30 20|012323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-2mKkf.k 2LTAf.k gQ10 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Moncton|EST AST ADT AWT APT|50 40 30 30 30|012121212121212121212134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsH0 CwN0 1in0 zAo0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1K10 Lz0 1zB0 NX0 1u10 Wn0 S20 8x50 iu0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14n1 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 ReX 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|64e3","America/Monterrey|LMT CST CDT|6F.g 60 50|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1UQG0 2FjC0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|41e5","America/Montevideo|MMT -0330 -03 -02 -0230|3I.I 3u 30 20 2u|012121212121212121212121213232323232324242423243232323232323232323232323232323232323232|-20UIf.g 8jzJ.g 1cLu 1dcu 1cLu 1dcu 1cLu ircu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu WLu 1qMu WLu 1qMu 11zu 1o0u 11zu NAu 11bu 2iMu zWu Dq10 19X0 pd0 jz0 cm10 19X0 1fB0 1on0 11d0 1oL0 1nB0 1fzu 1aou 1fzu 1aou 1fzu 3nAu Jb0 3MN0 1SLu 4jzu 2PB0 Lb0 3Dd0 1pb0 ixd0 An0 1MN0 An0 1wp0 On0 1wp0 Rb0 1zd0 On0 1wp0 Rb0 s8p0 1fB0 1ip0 11z0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Toronto|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101012301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TR0 1in0 11Wu 1nzu 1fD0 WJ0 1wr0 Nb0 1Ap0 On0 1zd0 On0 1wp0 TX0 1tB0 TX0 1tB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 4kM0 8x40 iv0 1o10 11z0 1nX0 11z0 1o10 11z0 1o10 1qL0 11D0 1nX0 11B0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e5","America/Nassau|LMT EST EDT|59.u 50 40|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2kNuO.u 26XdO.u 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|24e4","America/New_York|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Nipigon|EST EDT EWT EPT|50 40 40 40|010123010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TR0 1in0 Rnb0 3je0 8x40 iv0 19yN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|16e2","America/Nome|NST NWT NPT BST BDT YST AKST AKDT|b0 a0 a0 b0 a0 90 90 80|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17SX0 8wW0 iB0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cl0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|38e2","America/Noronha|LMT -02 -01|29.E 20 10|0121212121212121212121212121212121212121|-2glxO.k HdKO.k 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|30e2","America/North_Dakota/Beulah|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101014545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/Center|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101014545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/New_Salem|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101454545454545454545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Ojinaga|LMT MST CST CDT MDT|6V.E 70 60 50 60|0121212323241414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 2zQN0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Pangnirtung|-00 AST AWT APT ADDT ADT EDT EST CST CDT|0 40 30 30 20 30 40 50 60 50|012314151515151515151515151515151515167676767689767676767676767676767676767676767676767676767676767676767676767676767676767|-1XiM0 PnG0 8x50 iu0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1o00 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Paramaribo|LMT PMT PMT -0330 -03|3E.E 3E.Q 3E.A 3u 30|01234|-2nDUj.k Wqo0.c qanX.I 1yVXN.o|24e4","America/Phoenix|MST MDT MWT|70 60 60|01010202010|-261r0 1nX0 11B0 1nX0 SgN0 4Al1 Ap0 1db0 SWqX 1cL0|42e5","America/Port-au-Prince|PPMT EST EDT|4N 50 40|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-28RHb 2FnMb 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14q0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 i6n0 1nX0 11B0 1nX0 d430 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Rio_Branco|LMT -05 -04|4v.c 50 40|01212121212121212121212121212121|-2glvs.M HdLs.M 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 NBd0 d5X0|31e4","America/Porto_Velho|LMT -04 -03|4f.A 40 30|012121212121212121212121212121|-2glvI.o HdKI.o 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0|37e4","America/Puerto_Rico|AST AWT APT|40 30 30|0120|-17lU0 7XT0 iu0|24e5","America/Punta_Arenas|SMT -05 -04 -03|4G.K 50 40 30|0102021212121212121232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323|-2q2jh.e fJAh.e 5knG.K 1Vzh.e jRAG.K 1pbh.e 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 nHX0 op0 blz0 ko0 Qeo0 WL0 1zd0 On0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0","America/Rainy_River|CST CDT CWT CPT|60 50 50 50|010123010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TQ0 1in0 Rnb0 3je0 8x30 iw0 19yN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|842","America/Rankin_Inlet|-00 CST CDDT CDT EST|0 60 40 50 50|012131313131313131313131313131313131313131313431313131313131313131313131313131313131313131313131313131313131313131313131|-vDc0 keu0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e2","America/Recife|LMT -03 -02|2j.A 30 20|0121212121212121212121212121212121212121|-2glxE.o HdLE.o 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|33e5","America/Regina|LMT MST MDT MWT MPT CST|6W.A 70 60 60 60 60|012121212121212121212121341212121212121212121212121215|-2AD51.o uHe1.o 1in0 s2L0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 66N0 1cL0 1cN0 19X0 1fB0 1cL0 1fB0 1cL0 1cN0 1cL0 M30 8x20 ix0 1ip0 1cL0 1ip0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 3NB0 1cL0 1cN0|19e4","America/Resolute|-00 CST CDDT CDT EST|0 60 40 50 50|012131313131313131313131313131313131313131313431313131313431313131313131313131313131313131313131313131313131313131313131|-SnA0 GWS0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|229","America/Santarem|LMT -04 -03|3C.M 40 30|0121212121212121212121212121212|-2glwl.c HdLl.c 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 NBd0|21e4","America/Santiago|SMT -05 -04 -03|4G.K 50 40 30|010202121212121212321232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323|-2q2jh.e fJAh.e 5knG.K 1Vzh.e jRAG.K 1pbh.e 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 nHX0 op0 9Bz0 jb0 1oN0 ko0 Qeo0 WL0 1zd0 On0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0|62e5","America/Santo_Domingo|SDMT EST EDT -0430 AST|4E 50 40 4u 40|01213131313131414|-1ttjk 1lJMk Mn0 6sp0 Lbu 1Cou yLu 1RAu wLu 1QMu xzu 1Q0u xXu 1PAu 13jB0 e00|29e5","America/Sao_Paulo|LMT -03 -02|36.s 30 20|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2glwR.w HdKR.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 pTd0 PX0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|20e6","America/Scoresbysund|LMT -02 -01 +00|1r.Q 20 10 0|0121323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-2a5Ww.8 2z5ew.8 1a00 1cK0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|452","America/Sitka|PST PWT PPT PDT YST AKST AKDT|80 70 70 70 90 90 80|01203030303030303030303030303030345656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|90e2","America/St_Johns|NST NDT NST NDT NWT NPT NDDT|3u.Q 2u.Q 3u 2u 2u 2u 1u|01010101010101010101010101010101010102323232323232324523232323232323232323232323232323232323232323232323232323232323232323232323232323232326232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-28oit.8 14L0 1nB0 1in0 1gm0 Dz0 1JB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1fB0 19X0 1fB0 19X0 10O0 eKX.8 19X0 1iq0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 WL0 1qN0 WL0 1qN0 7UHu itu 1tB0 WL0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1tB0 WL0 1ld0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","America/Swift_Current|LMT MST MDT MWT MPT CST|7b.k 70 60 60 60 60|012134121212121212121215|-2AD4M.E uHdM.E 1in0 UGp0 8x20 ix0 1o10 17b0 1ip0 11z0 1o10 11z0 1o10 11z0 isN0 1cL0 3Cp0 1cL0 1cN0 11z0 1qN0 WL0 pMp0|16e3","America/Tegucigalpa|LMT CST CDT|5M.Q 60 50|01212121|-1WGGb.8 2ETcb.8 WL0 1qN0 WL0 GRd0 AL0|11e5","America/Thule|LMT AST ADT|4z.8 40 30|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a5To.Q 31NBo.Q 1cL0 1cN0 1cL0 1fB0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|656","America/Thunder_Bay|CST EST EWT EPT EDT|60 50 40 40 40|0123141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141|-2q5S0 1iaN0 8x40 iv0 XNB0 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","America/Vancouver|PST PDT PWT PPT|80 70 70 70|0102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TO0 1in0 UGp0 8x10 iy0 1o10 17b0 1ip0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Whitehorse|YST YDT YWT YPT YDDT PST PDT|90 80 80 80 70 80 70|0101023040565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-25TN0 1in0 1o10 13V0 Ser0 8x00 iz0 LCL0 1fA0 3NA0 vrd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Winnipeg|CST CDT CWT CPT|60 50 50 50|010101023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aIi0 WL0 3ND0 1in0 Jap0 Rb0 aCN0 8x30 iw0 1tB0 11z0 1ip0 11z0 1o10 11z0 1o10 11z0 1rd0 10L0 1op0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 1cL0 1cN0 11z0 6i10 WL0 6i10 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|66e4","America/Yakutat|YST YWT YPT YDT AKST AKDT|90 80 80 80 90 80|01203030303030303030303030303030304545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-17T10 8x00 iz0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cn0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|642","America/Yellowknife|-00 MST MWT MPT MDDT MDT|0 70 60 60 50 60|012314151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151|-1pdA0 hix0 8x20 ix0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3","Antarctica/Casey|-00 +08 +11|0 -80 -b0|0121212|-2q00 1DjS0 T90 40P0 KL0 blz0|10","Antarctica/Davis|-00 +07 +05|0 -70 -50|01012121|-vyo0 iXt0 alj0 1D7v0 VB0 3Wn0 KN0|70","Antarctica/DumontDUrville|-00 +10|0 -a0|0101|-U0o0 cfq0 bFm0|80","Antarctica/Macquarie|AEST AEDT -00 +11|-a0 -b0 0 -b0|0102010101010101010101010101010101010101010101010101010101010101010101010101010101010101013|-29E80 19X0 4SL0 1ayy0 Lvs0 1cM0 1o00 Rc0 1wo0 Rc0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0|1","Antarctica/Mawson|-00 +06 +05|0 -60 -50|012|-CEo0 2fyk0|60","Pacific/Auckland|NZMT NZST NZST NZDT|-bu -cu -c0 -d0|01020202020202020202020202023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323|-1GCVu Lz0 1tB0 11zu 1o0u 11zu 1o0u 11zu 1o0u 14nu 1lcu 14nu 1lcu 1lbu 11Au 1nXu 11Au 1nXu 11Au 1nXu 11Au 1nXu 11Au 1qLu WMu 1qLu 11Au 1n1bu IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|14e5","Antarctica/Palmer|-00 -03 -04 -02|0 30 40 20|0121212121213121212121212121212121212121212121212121212121212121212121212121212121|-cao0 nD0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 jsN0 14N0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40","Antarctica/Rothera|-00 -03|0 30|01|gOo0|130","Antarctica/Syowa|-00 +03|0 -30|01|-vs00|20","Antarctica/Troll|-00 +00 +02|0 0 -20|01212121212121212121212121212121212121212121212121212121212121212121|1puo0 hd0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|40","Antarctica/Vostok|-00 +06|0 -60|01|-tjA0|25","Europe/Oslo|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2awM0 Qm0 W6o0 5pf0 WM0 1fA0 1cM0 1cM0 1cM0 1cM0 wJc0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1qM0 WM0 zpc0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|62e4","Asia/Riyadh|LMT +03|-36.Q -30|01|-TvD6.Q|57e5","Asia/Almaty|LMT +05 +06 +07|-57.M -50 -60 -70|012323232323232323232321232323232323232323232323232|-1Pc57.M eUo7.M 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|15e5","Asia/Amman|LMT EET EEST|-2n.I -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1yW2n.I 1HiMn.I KL0 1oN0 11b0 1oN0 11b0 1pd0 1dz0 1cp0 11b0 1op0 11b0 fO10 1db0 1e10 1cL0 1cN0 1cL0 1cN0 1fz0 1pd0 10n0 1ld0 14n0 1hB0 15b0 1ip0 19X0 1cN0 1cL0 1cN0 17b0 1ld0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1So0 y00 1fc0 1dc0 1co0 1dc0 1cM0 1cM0 1cM0 1o00 11A0 1lc0 17c0 1cM0 1cM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|25e5","Asia/Anadyr|LMT +12 +13 +14 +11|-bN.U -c0 -d0 -e0 -b0|01232121212121212121214121212121212121212121212121212121212141|-1PcbN.U eUnN.U 23CL0 1db0 2q10 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|13e3","Asia/Aqtau|LMT +04 +05 +06|-3l.4 -40 -50 -60|012323232323232323232123232312121212121212121212|-1Pc3l.4 eUnl.4 24PX0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|15e4","Asia/Aqtobe|LMT +04 +05 +06|-3M.E -40 -50 -60|0123232323232323232321232323232323232323232323232|-1Pc3M.E eUnM.E 23CL0 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|27e4","Asia/Ashgabat|LMT +04 +05 +06|-3R.w -40 -50 -60|0123232323232323232323212|-1Pc3R.w eUnR.w 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0|41e4","Asia/Atyrau|LMT +03 +05 +06 +04|-3r.I -30 -50 -60 -40|01232323232323232323242323232323232324242424242|-1Pc3r.I eUor.I 24PW0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 2sp0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0","Asia/Baghdad|BMT +03 +04|-2V.A -30 -40|012121212121212121212121212121212121212121212121212121|-26BeV.A 2ACnV.A 11b0 1cp0 1dz0 1dd0 1db0 1cN0 1cp0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1de0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0|66e5","Asia/Qatar|LMT +04 +03|-3q.8 -40 -30|012|-21Jfq.8 27BXq.8|96e4","Asia/Baku|LMT +03 +04 +05|-3j.o -30 -40 -50|01232323232323232323232123232323232323232323232323232323232323232|-1Pc3j.o 1jUoj.o WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 9Je0 1o00 11z0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|BMT +07|-6G.4 -70|01|-218SG.4|15e6","Asia/Barnaul|LMT +06 +07 +08|-5z -60 -70 -80|0123232323232323232323212323232321212121212121212121212121212121212|-21S5z pCnz 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 p90 LE0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0","Asia/Beirut|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-21aq0 1on0 1410 1db0 19B0 1in0 1ip0 WL0 1lQp0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 q6N0 En0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1op0 11b0 dA10 17b0 1iN0 17b0 1iN0 17b0 1iN0 17b0 1vB0 SL0 1mp0 13z0 1iN0 17b0 1iN0 17b0 1jd0 12n0 1a10 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0|22e5","Asia/Bishkek|LMT +05 +06 +07|-4W.o -50 -60 -70|012323232323232323232321212121212121212121212121212|-1Pc4W.o eUnW.o 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2e00 1tX0 17b0 1ip0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1cPu 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|87e4","Asia/Brunei|LMT +0730 +08|-7D.E -7u -80|012|-1KITD.E gDc9.E|42e4","Asia/Kolkata|MMT IST +0630|-5l.a -5u -6u|012121|-2zOtl.a 1r2LP.a 1un0 HB0 7zX0|15e6","Asia/Chita|LMT +08 +09 +10|-7x.Q -80 -90 -a0|012323232323232323232321232323232323232323232323232323232323232312|-21Q7x.Q pAnx.Q 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3re0|33e4","Asia/Choibalsan|LMT +07 +08 +10 +09|-7C -70 -80 -a0 -90|0123434343434343434343434343434343434343434343424242|-2APHC 2UkoC cKn0 1da0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 3Db0 h1f0 1cJ0 1cP0 1cJ0|38e3","Asia/Shanghai|CST CDT|-80 -90|01010101010101010|-1c1I0 LX0 16p0 1jz0 1Myp0 Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6","Asia/Colombo|MMT +0530 +06 +0630|-5j.w -5u -60 -6u|01231321|-2zOtj.w 1rFbN.w 1zzu 7Apu 23dz0 11zu n3cu|22e5","Asia/Dhaka|HMT +0630 +0530 +06 +07|-5R.k -6u -5u -60 -70|0121343|-18LFR.k 1unn.k HB0 m6n0 2kxbu 1i00|16e6","Asia/Damascus|LMT EET EEST|-2p.c -20 -30|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-21Jep.c Hep.c 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1xRB0 11X0 1oN0 10L0 1pB0 11b0 1oN0 10L0 1mp0 13X0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 Nb0 1AN0 Nb0 bcp0 19X0 1gp0 19X0 3ld0 1xX0 Vd0 1Bz0 Sp0 1vX0 10p0 1dz0 1cN0 1cL0 1db0 1db0 1g10 1an0 1ap0 1db0 1fd0 1db0 1cN0 1db0 1dd0 1db0 1cp0 1dz0 1c10 1dX0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 19z0 1fB0 1qL0 11B0 1on0 Wp0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0|26e5","Asia/Dili|LMT +08 +09|-8m.k -80 -90|01212|-2le8m.k 1dnXm.k 1nfA0 Xld0|19e4","Asia/Dubai|LMT +04|-3F.c -40|01|-21JfF.c|39e5","Asia/Dushanbe|LMT +05 +06 +07|-4z.c -50 -60 -70|012323232323232323232321|-1Pc4z.c eUnz.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2hB0|76e4","Asia/Famagusta|LMT EET EEST +03|-2f.M -20 -30 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212312121212121212121212121212121212121212121|-1Vc2f.M 2a3cf.M 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Gaza|EET EEST IST IDT|-20 -30 -20 -30|010101010101010101010101010101012323232323232323232323232320101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-1c2q0 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 pBd0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 dW0 hfB0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 11z0 1o10 14o0 1lA1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0|18e5","Asia/Hebron|EET EEST IST IDT|-20 -30 -20 -30|01010101010101010101010101010101232323232323232323232323232010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-1c2q0 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 pBd0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 dW0 hfB0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 12L0 1mN0 14o0 1lc0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0|25e4","Asia/Ho_Chi_Minh|LMT PLMT +07 +08 +09|-76.E -76.u -70 -80 -90|0123423232|-2yC76.E bK00.a 1h7b6.u 5lz0 18o0 3Oq0 k5b0 aW00 BAM0|90e5","Asia/Hong_Kong|LMT HKT HKST JST|-7A.G -80 -90 -90|0121312121212121212121212121212121212121212121212121212121212121212121|-2CFHA.G 1sEP6.G 1cL0 ylu 93X0 1qQu 1tX0 Rd0 1In0 NB0 1cL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1kL0 14N0 1nX0 U10 1tz0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 Rd0 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 17d0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|73e5","Asia/Hovd|LMT +06 +07 +08|-66.A -60 -70 -80|012323232323232323232323232323232323232323232323232|-2APG6.A 2Uko6.A cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|IMT +07 +08 +09|-6V.5 -70 -80 -90|01232323232323232323232123232323232323232323232323232323232323232|-21zGV.5 pjXV.5 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4","Europe/Istanbul|IMT EET EEST +04 +03|-1U.U -20 -30 -40 -30|012121212121212121212121212121212121212121212121212121234343434342121212121212121212121212121212121212121212121212121212121212124|-2ogNU.U dzzU.U 11b0 8tB0 1on0 1410 1db0 19B0 1in0 3Rd0 Un0 1oN0 11b0 zSp0 CL0 mN0 1Vz0 1gN0 1pz0 5Rd0 1fz0 1yp0 ML0 1kp0 17b0 1ip0 17b0 1fB0 19X0 1jB0 18L0 1ip0 17z0 qdd0 xX0 3S10 Tz0 dA10 11z0 1o10 11z0 1qN0 11z0 1ze0 11B0 WM0 1qO0 WI0 1nX0 1rB0 10L0 11B0 1in0 17d0 1in0 2pX0 19E0 1fU0 16Q0 1iI0 16Q0 1iI0 1Vd0 pb0 3Kp0 14o0 1de0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1a00 1fA0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|BMT +0720 +0730 +09 +08 WIB|-77.c -7k -7u -90 -80 -70|01232425|-1Q0Tk luM0 mPzO 8vWu 6kpu 4PXu xhcu|31e6","Asia/Jayapura|LMT +09 +0930 WIT|-9m.M -90 -9u -90|0123|-1uu9m.M sMMm.M L4nu|26e4","Asia/Jerusalem|JMT IST IDT IDDT|-2k.E -20 -30 -40|01212121212132121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-26Bek.E SyMk.E 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 3LB0 Em0 or0 1cn0 1dB0 16n0 10O0 1ja0 1tC0 14o0 1cM0 1a00 11A0 1Na0 An0 1MP0 AJ0 1Kp0 LC0 1oo0 Wl0 EQN0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 1hB0 1dX0 1ep0 1aL0 1eN0 17X0 1nf0 11z0 1tB0 19W0 1e10 17b0 1ep0 1gL0 18N0 1fz0 1eN0 17b0 1gq0 1gn0 19d0 1dz0 1c10 17X0 1hB0 1gn0 19d0 1dz0 1c10 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0|81e4","Asia/Kabul|+04 +0430|-40 -4u|01|-10Qs0|46e5","Asia/Kamchatka|LMT +11 +12 +13|-ay.A -b0 -c0 -d0|012323232323232323232321232323232323232323232323232323232323212|-1SLKy.A ivXy.A 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|18e4","Asia/Karachi|LMT +0530 +0630 +05 PKT PKST|-4s.c -5u -6u -50 -50 -60|012134545454|-2xoss.c 1qOKW.c 7zX0 eup0 LqMu 1fy00 1cL0 dK10 11b0 1610 1jX0|24e6","Asia/Urumqi|LMT +06|-5O.k -60|01|-1GgtO.k|32e5","Asia/Kathmandu|LMT +0530 +0545|-5F.g -5u -5J|012|-21JhF.g 2EGMb.g|12e5","Asia/Khandyga|LMT +08 +09 +10 +11|-92.d -80 -90 -a0 -b0|0123232323232323232323212323232323232323232323232343434343434343432|-21Q92.d pAp2.d 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 qK0 yN0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|66e2","Asia/Krasnoyarsk|LMT +06 +07 +08|-6b.q -60 -70 -80|01232323232323232323232123232323232323232323232323232323232323232|-21Hib.q prAb.q 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|10e5","Asia/Kuala_Lumpur|SMT +07 +0720 +0730 +09 +08|-6T.p -70 -7k -7u -90 -80|0123435|-2Bg6T.p 17anT.p l5XE 17bO 8Fyu 1so1u|71e5","Asia/Kuching|LMT +0730 +08 +0820 +09|-7l.k -7u -80 -8k -90|0123232323232323242|-1KITl.k gDbP.k 6ynu AnE 1O0k AnE 1NAk AnE 1NAk AnE 1NAk AnE 1O0k AnE 1NAk AnE pAk 8Fz0|13e4","Asia/Macau|LMT CST CDT|-7y.k -80 -90|012121212121212121212121212121212121212121|-2le7y.k 1XO34.k 1wn0 Rd0 1wn0 R9u 1wqu U10 1tz0 TVu 1tz0 17gu 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cJu 1cL0 1cN0 1fz0 1cN0 1cOu 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cJu 1cL0 1cN0 1fz0 1cN0 1cL0|57e4","Asia/Magadan|LMT +10 +11 +12|-a3.c -a0 -b0 -c0|012323232323232323232321232323232323232323232323232323232323232312|-1Pca3.c eUo3.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Cq0|95e3","Asia/Makassar|LMT MMT +08 +09 WITA|-7V.A -7V.A -80 -90 -80|01234|-21JjV.A vfc0 myLV.A 8ML0|15e5","Asia/Manila|+08 +09|-80 -90|010101010|-1kJI0 AL0 cK10 65X0 mXB0 vX0 VK10 1db0|24e6","Asia/Nicosia|LMT EET EEST|-2d.s -20 -30|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1Vc2d.s 2a3cd.s 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|32e4","Asia/Novokuznetsk|LMT +06 +07 +08|-5M.M -60 -70 -80|012323232323232323232321232323232323232323232323232323232323212|-1PctM.M eULM.M 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|55e4","Asia/Novosibirsk|LMT +06 +07 +08|-5v.E -60 -70 -80|0123232323232323232323212323212121212121212121212121212121212121212|-21Qnv.E pAFv.E 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 ml0 Os0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 4eN0|15e5","Asia/Omsk|LMT +05 +06 +07|-4R.u -50 -60 -70|01232323232323232323232123232323232323232323232323232323232323232|-224sR.u pMLR.u 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|12e5","Asia/Oral|LMT +03 +05 +06 +04|-3p.o -30 -50 -60 -40|01232323232323232424242424242424242424242424242|-1Pc3p.o eUop.o 23CK0 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 1cM0 IM0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|27e4","Asia/Pontianak|LMT PMT +0730 +09 +08 WITA WIB|-7h.k -7h.k -7u -90 -80 -80 -70|012324256|-2ua7h.k XE00 munL.k 8Rau 6kpu 4PXu xhcu Wqnu|23e4","Asia/Pyongyang|LMT KST JST KST|-8n -8u -90 -90|01231|-2um8n 97XR 1lTzu 2Onc0|29e5","Asia/Qyzylorda|LMT +04 +05 +06|-4l.Q -40 -50 -60|0123232323232323232323232323232323232323232323|-1Pc4l.Q eUol.Q 23CL0 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 3ao0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|73e4","Asia/Rangoon|RMT +0630 +09|-6o.L -6u -90|0121|-21Jio.L SmnS.L 7j9u|48e5","Asia/Sakhalin|LMT +09 +11 +12 +10|-9u.M -90 -b0 -c0 -a0|01232323232323232323232423232323232424242424242424242424242424242|-2AGVu.M 1BoMu.M 1qFa0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 2pB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|58e4","Asia/Samarkand|LMT +04 +05 +06|-4r.R -40 -50 -60|01232323232323232323232|-1Pc4r.R eUor.R 23CL0 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|36e4","Asia/Seoul|LMT KST JST KST KDT KDT|-8r.Q -8u -90 -90 -9u -a0|0123141414141414135353|-2um8r.Q 97XV.Q 1m1zu kKo0 2I0u OL0 1FB0 Rb0 1qN0 TX0 1tB0 TX0 1tB0 TX0 1tB0 TX0 2ap0 12FBu 11A0 1o00 11A0|23e6","Asia/Srednekolymsk|LMT +10 +11 +12|-ae.Q -a0 -b0 -c0|01232323232323232323232123232323232323232323232323232323232323232|-1Pcae.Q eUoe.Q 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|35e2","Asia/Taipei|CST JST CDT|-80 -90 -90|01020202020202020202020202020202020202020|-1iw80 joM0 1yo0 Tz0 1ip0 1jX0 1cN0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 10N0 1BX0 10p0 1pz0 10p0 1pz0 10p0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1BB0 ML0 1Bd0 ML0 uq10 1db0 1cN0 1db0 97B0 AL0|74e5","Asia/Tashkent|LMT +05 +06 +07|-4B.b -50 -60 -70|012323232323232323232321|-1Pc4B.b eUnB.b 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0|23e5","Asia/Tbilisi|TBMT +03 +04 +05|-2X.b -30 -40 -50|0123232323232323232323212121232323232323232323212|-1Pc2X.b 1jUnX.b WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cK0 1cL0 1cN0 1cL0 1cN0 2pz0 1cL0 1fB0 3Nz0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 An0 Os0 WM0|11e5","Asia/Tehran|LMT TMT +0330 +04 +05 +0430|-3p.I -3p.I -3u -40 -50 -4u|01234325252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-2btDp.I 1d3c0 1huLT.I TXu 1pz0 sN0 vAu 1cL0 1dB0 1en0 pNB0 UL0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 64p0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0|14e6","Asia/Thimphu|LMT +0530 +06|-5W.A -5u -60|012|-Su5W.A 1BGMs.A|79e3","Asia/Tokyo|JST JDT|-90 -a0|010101010|-QJH0 QL0 1lB0 13X0 1zB0 NX0 1zB0 NX0|38e6","Asia/Tomsk|LMT +06 +07 +08|-5D.P -60 -70 -80|0123232323232323232323212323232323232323232323212121212121212121212|-21NhD.P pxzD.P 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 co0 1bB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Qp0|10e5","Asia/Ulaanbaatar|LMT +07 +08 +09|-77.w -70 -80 -90|012323232323232323232323232323232323232323232323232|-2APH7.w 2Uko7.w cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|12e5","Asia/Ust-Nera|LMT +08 +09 +12 +11 +10|-9w.S -80 -90 -c0 -b0 -a0|012343434343434343434345434343434343434343434343434343434343434345|-21Q9w.S pApw.S 23CL0 1d90 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|65e2","Asia/Vladivostok|LMT +09 +10 +11|-8L.v -90 -a0 -b0|01232323232323232323232123232323232323232323232323232323232323232|-1SJIL.v itXL.v 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4","Asia/Yakutsk|LMT +08 +09 +10|-8C.W -80 -90 -a0|01232323232323232323232123232323232323232323232323232323232323232|-21Q8C.W pAoC.W 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|28e4","Asia/Yekaterinburg|LMT PMT +04 +05 +06|-42.x -3J.5 -40 -50 -60|012343434343434343434343234343434343434343434343434343434343434343|-2ag42.x 7mQh.s qBvJ.5 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|14e5","Asia/Yerevan|LMT +03 +04 +05|-2W -30 -40 -50|0123232323232323232323212121212323232323232323232323232323232|-1Pc2W 1jUnW WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 4RX0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|13e5","Atlantic/Azores|HMT -02 -01 +00 WET|1S.w 20 10 0 0|01212121212121212121212121212121212121212121232123212321232121212121212121212121212121212121212121232323232323232323232323232323234323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-2ldW5.s aPX5.s Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 qIl0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|25e4","Atlantic/Bermuda|LMT AST ADT|4j.i 40 30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1BnRE.G 1LTbE.G 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e3","Atlantic/Canary|LMT -01 WET WEST|11.A 10 0 -10|01232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UtaW.o XPAW.o 1lAK0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|54e4","Atlantic/Cape_Verde|LMT -02 -01|1y.4 20 10|01212|-2xomp.U 1qOMp.U 7zX0 1djf0|50e4","Atlantic/Faroe|LMT WET WEST|r.4 0 -10|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2uSnw.U 2Wgow.U 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|49e3","Atlantic/Madeira|FMT -01 +00 +01 WET WEST|17.A 10 0 -10 0 -10|01212121212121212121212121212121212121212121232123212321232121212121212121212121212121212121212121454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2ldWQ.o aPWQ.o Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 qIl0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e4","Atlantic/Reykjavik|LMT -01 +00 GMT|1s 10 0 0|012121212121212121212121212121212121212121212121212121212121212121213|-2uWmw mfaw 1Bd0 ML0 1LB0 Cn0 1LB0 3fX0 C10 HrX0 1cO0 LB0 1EL0 LA0 1C00 Oo0 1wo0 Rc0 1wo0 Rc0 1wo0 Rc0 1zc0 Oo0 1zc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0|12e4","Atlantic/South_Georgia|-02|20|0||30","Atlantic/Stanley|SMT -04 -03 -02|3P.o 40 30 20|012121212121212323212121212121212121212121212121212121212121212121212|-2kJw8.A 12bA8.A 19X0 1fB0 19X0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 Cn0 1Cc10 WL0 1qL0 U10 1tz0 2mN0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 U10 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qN0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 U10 1tz0 U10 1tz0 U10|21e2","Australia/Sydney|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACST ACDT|-9u -au|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 WM0 1qM0 Rc0 1zc0 U00 1tA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST AEDT|-a0 -b0|01010101010101010|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0|20e5","Australia/Broken_Hill|ACST ACDT|-9u -au|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|18e3","Australia/Currie|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-29E80 19X0 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|746","Australia/Darwin|ACST ACDT|-9u -au|010101010|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0|12e4","Australia/Eucla|+0845 +0945|-8J -9J|0101010101010101010|-293kI xcX 10jd0 yL0 1cN0 1cL0 1gSp0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|368","Australia/Hobart|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-29E80 19X0 10jd0 yL0 1cN0 1cL0 1fB0 19X0 VfB0 1cM0 1o00 Rc0 1wo0 Rc0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|21e4","Australia/Lord_Howe|AEST +1030 +1130 +11|-a0 -au -bu -b0|0121212121313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|raC0 1zdu Rb0 1zd0 On0 1zd0 On0 1zd0 On0 1zd0 TXu 1qMu WLu 1tAu WLu 1tAu TXu 1tAu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu 11zu 1o0u 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 11Au 1nXu 1qMu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu 11zu 1o0u WLu 1qMu 14nu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu|347","Australia/Lindeman|AEST AEDT|-a0 -b0|010101010101010101010|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0|10","Australia/Melbourne|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|39e5","Australia/Perth|AWST AWDT|-80 -90|0101010101010101010|-293jX xcX 10jd0 yL0 1cN0 1cL0 1gSp0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|18e5","CET|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","CST6CDT|CST CDT CWT CPT|60 50 50 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Pacific/Easter|EMT -07 -06 -05|7h.s 70 60 50|012121212121212121212121212123232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323|-1uSgG.w 1s4IG.w WL0 1zd0 On0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 2pA0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0|30e2","EET|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","EST|EST|50|0|","EST5EDT|EST EDT EWT EPT|50 40 40 40|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 SgN0 8x40 iv0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Europe/Dublin|DMT IST GMT BST IST|p.l -y.D 0 -10 -10|01232323232324242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242|-2ax9y.D Rc0 1fzy.D 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 g600 14o0 1wo0 17c0 1io0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Etc/GMT+0|GMT|0|0|","Etc/GMT+1|-01|10|0|","Etc/GMT+10|-10|a0|0|","Etc/GMT+11|-11|b0|0|","Etc/GMT+12|-12|c0|0|","Etc/GMT+3|-03|30|0|","Etc/GMT+4|-04|40|0|","Etc/GMT+5|-05|50|0|","Etc/GMT+6|-06|60|0|","Etc/GMT+7|-07|70|0|","Etc/GMT+8|-08|80|0|","Etc/GMT+9|-09|90|0|","Etc/GMT-1|+01|-10|0|","Pacific/Port_Moresby|+10|-a0|0||25e4","Pacific/Pohnpei|+11|-b0|0||34e3","Pacific/Tarawa|+12|-c0|0||29e3","Etc/GMT-13|+13|-d0|0|","Etc/GMT-14|+14|-e0|0|","Etc/GMT-2|+02|-20|0|","Etc/GMT-3|+03|-30|0|","Etc/GMT-4|+04|-40|0|","Etc/GMT-5|+05|-50|0|","Etc/GMT-6|+06|-60|0|","Indian/Christmas|+07|-70|0||21e2","Etc/GMT-8|+08|-80|0|","Pacific/Palau|+09|-90|0||21e3","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Amsterdam|AMT NST +0120 +0020 CEST CET|-j.w -1j.w -1k -k -20 -10|010101010101010101010101010101010101010101012323234545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545|-2aFcj.w 11b0 1iP0 11A0 1io0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1co0 1io0 1yo0 Pc0 1a00 1fA0 1Bc0 Mo0 1tc0 Uo0 1tA0 U00 1uo0 W00 1s00 VA0 1so0 Vc0 1sM0 UM0 1wo0 Rc0 1u00 Wo0 1rA0 W00 1s00 VA0 1sM0 UM0 1w00 fV0 BCX.w 1tA0 U00 1u00 Wo0 1sm0 601k WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|16e5","Europe/Andorra|WET CET CEST|0 -10 -20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-UBA0 1xIN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|79e3","Europe/Astrakhan|LMT +03 +04 +05|-3c.c -30 -40 -50|012323232323232323212121212121212121212121212121212121212121212|-1Pcrc.c eUMc.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0","Europe/Athens|AMT EET EEST CEST CET|-1y.Q -20 -30 -20 -10|012123434121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a61x.Q CNbx.Q mn0 kU10 9b0 3Es0 Xa0 1fb0 1dd0 k3X0 Nz0 SCp0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|35e5","Europe/London|GMT BST BDST|0 -10 -20|0101010101010101010101010101010101010101010101010121212121210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2axa0 Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|10e6","Europe/Belgrade|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19RC0 3IP0 WM0 1fA0 1cM0 1cM0 1rc0 Qo0 1vmo0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Berlin|CET CEST CEMT|-10 -20 -30|01010101010101210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 kL0 Nc0 m10 WM0 1ao0 1cp0 dX0 jz0 Dd0 1io0 17c0 1fA0 1a00 1ehA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|41e5","Europe/Prague|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 16M0 1lc0 1tA0 17A0 11c0 1io0 17c0 1io0 17c0 1fc0 1ao0 1bNc0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|13e5","Europe/Brussels|WET CET CEST WEST|0 -10 -20 -10|0121212103030303030303030303030303030303030303030303212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ehc0 3zX0 11c0 1iO0 11A0 1o00 11A0 my0 Ic0 1qM0 Rc0 1EM0 UM0 1u00 10o0 1io0 1io0 17c0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a30 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 y00 5Wn0 WM0 1fA0 1cM0 16M0 1iM0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|21e5","Europe/Bucharest|BMT EET EEST|-1I.o -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1xApI.o 20LI.o RA0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Axc0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|19e5","Europe/Budapest|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1ip0 17b0 1op0 1tb0 Q2m0 3Ne0 WM0 1fA0 1cM0 1cM0 1oJ0 1dc0 1030 1fA0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1iM0 1fA0 8Ha0 Rb0 1wN0 Rb0 1BB0 Lz0 1C20 LB0 SNX0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e5","Europe/Zurich|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19Lc0 11A0 1o00 11A0 1xG10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|38e4","Europe/Chisinau|CMT BMT EET EEST CEST CET MSK MSD|-1T -1I.o -20 -30 -20 -10 -30 -40|012323232323232323234545467676767676767676767323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-26jdT wGMa.A 20LI.o RA0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 27A0 2en0 39g0 WM0 1fA0 1cM0 V90 1t7z0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 gL0 WO0 1cM0 1cM0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11D0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|67e4","Europe/Copenhagen|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 Tz0 VuO0 60q0 WM0 1fA0 1cM0 1cM0 1cM0 S00 1HA0 Nc0 1C00 Dc0 1Nc0 Ao0 1h5A0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Gibraltar|GMT BST BDST CET CEST|0 -10 -20 -10 -20|010101010101010101010101010101010101010101010101012121212121010121010101010101010101034343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-2axa0 Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 10Jz0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|30e3","Europe/Helsinki|HMT EET EEST|-1D.N -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1WuND.N OULD.N 1dA0 1xGq0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Kaliningrad|CET CEST CET CEST MSK MSD EEST EET +03|-10 -20 -20 -30 -30 -40 -30 -20 -30|0101010101010232454545454545454546767676767676767676767676767676767676767676787|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 Am0 Lb0 1en0 op0 1pNz0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|44e4","Europe/Kiev|KMT EET MSK CEST CET MSD EEST|-22.4 -20 -30 -20 -10 -40 -30|0123434252525252525252525256161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161|-1Pc22.4 eUo2.4 rnz0 2Hg0 WM0 1fA0 da0 1v4m0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 Db0 3220 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|34e5","Europe/Kirov|LMT +03 +04 +05|-3i.M -30 -40 -50|01232323232323232321212121212121212121212121212121212121212121|-22WM0 qH90 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|48e4","Europe/Lisbon|LMT WET WEST WEMT CET CEST|A.J 0 -10 -20 -10 -20|012121212121212121212121212121212121212121212321232123212321212121212121212121212121212121212121214121212121212121212121212121212124545454212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ldXn.f aPWn.f Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 pvy0 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e5","Europe/Luxembourg|LMT CET CEST WET WEST WEST WET|-o.A -10 -20 0 -10 -20 -10|0121212134343434343434343434343434343434343434343434565651212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2DG0o.A t6mo.A TB0 1nX0 Up0 1o20 11A0 rW0 CM0 1qP0 R90 1EO0 UK0 1u20 10m0 1ip0 1in0 17e0 19W0 1fB0 1db0 1cp0 1in0 17d0 1fz0 1a10 1in0 1a10 1in0 17f0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 vA0 60L0 WM0 1fA0 1cM0 17c0 1io0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|54e4","Europe/Madrid|WET WEST WEMT CET CEST|0 -10 -20 -10 -20|010101010101010101210343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-25Td0 19B0 1cL0 1dd0 b1z0 18p0 3HX0 17d0 1fz0 1a10 1io0 1a00 1in0 17d0 iIn0 Hd0 1cL0 bb0 1200 2s20 14n0 5aL0 Mp0 1vz0 17d0 1in0 17d0 1in0 17d0 1in0 17d0 6hX0 11B0 XHX0 1a10 1fz0 1a10 19X0 1cN0 1fz0 1a10 1fC0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|62e5","Europe/Malta|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2arB0 Lz0 1cN0 1db0 1410 1on0 Wp0 1qL0 17d0 1cL0 M3B0 5M20 WM0 1fA0 1co0 17c0 1iM0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 LA0 1C00 LA0 1EM0 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1co0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|42e4","Europe/Minsk|MMT EET MSK CEST CET MSD EEST +03|-1O -20 -30 -20 -10 -40 -30 -30|01234343252525252525252525261616161616161616161616161616161616161617|-1Pc1O eUnO qNX0 3gQ0 WM0 1fA0 1cM0 Al0 1tsn0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fc0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0|19e5","Europe/Monaco|PMT WET WEST WEMT CET CEST|-9.l 0 -10 -20 -10 -20|01212121212121212121212121212121212121212121212121232323232345454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2nco9.l cNb9.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 1u00 10o0 1io0 1wo0 Rc0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Df0 2RV0 11z0 11B0 1ze0 WM0 1fA0 1cM0 1fa0 1aq0 16M0 1ekn0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|38e3","Europe/Moscow|MMT MMT MST MDST MSD MSK +05 EET EEST MSK|-2u.h -2v.j -3v.j -4v.j -40 -30 -50 -20 -30 -40|012132345464575454545454545454545458754545454545454545454545454545454545454595|-2ag2u.h 2pyW.W 1bA0 11X0 GN0 1Hb0 c4v.j ik0 3DA0 dz0 15A0 c10 2q10 iM10 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|16e6","Europe/Paris|PMT WET WEST CEST CET WEMT|-9.l 0 -10 -20 -10 -20|0121212121212121212121212121212121212121212121212123434352543434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434|-2nco8.l cNb8.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 1u00 10o0 1io0 1wo0 Rc0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Df0 Ik0 5M30 WM0 1fA0 1cM0 Vx0 hB0 1aq0 16M0 1ekn0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e6","Europe/Riga|RMT LST EET MSK CEST CET MSD EEST|-1A.y -2A.y -20 -30 -20 -10 -40 -30|010102345454536363636363636363727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272|-25TzA.y 11A0 1iM0 ko0 gWm0 yDXA.y 2bX0 3fE0 WM0 1fA0 1cM0 1cM0 4m0 1sLy0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|64e4","Europe/Rome|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2arB0 Lz0 1cN0 1db0 1410 1on0 Wp0 1qL0 17d0 1cL0 M3B0 5M20 WM0 1fA0 1cM0 16M0 1iM0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 LA0 1C00 LA0 1EM0 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1C00 LA0 1zc0 Oo0 1C00 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|39e5","Europe/Samara|LMT +03 +04 +05|-3k.k -30 -40 -50|0123232323232323232121232323232323232323232323232323232323212|-22WM0 qH90 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2y10 14m0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|12e5","Europe/Saratov|LMT +03 +04 +05|-34.i -30 -40 -50|012323232323232321212121212121212121212121212121212121212121212|-22WM0 qH90 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 5810","Europe/Simferopol|SMT EET MSK CEST CET MSD EEST MSK|-2g -20 -30 -20 -10 -40 -30 -40|012343432525252525252525252161616525252616161616161616161616161616161616172|-1Pc2g eUog rEn0 2qs0 WM0 1fA0 1cM0 3V0 1u0L0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 4eL0 1cL0 1cN0 1cL0 1cN0 dX0 WL0 1cN0 1cL0 1fB0 1o30 11B0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0|33e4","Europe/Sofia|EET CET CEST EEST|-20 -10 -20 -30|01212103030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030|-168L0 WM0 1fA0 1cM0 1cM0 1cN0 1mKH0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Stockholm|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 TB0 2yDe0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|15e5","Europe/Tallinn|TMT CET CEST EET MSK MSD EEST|-1D -10 -20 -20 -30 -40 -30|012103421212454545454545454546363636363636363636363636363636363636363636363636363636363636363636363636363636363636363636363|-26oND teD 11A0 1Ta0 4rXl KSLD 2FX0 2Jg0 WM0 1fA0 1cM0 18J0 1sTX0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|41e4","Europe/Tirane|LMT CET CEST|-1j.k -10 -20|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2glBj.k 14pcj.k 5LC0 WM0 4M0 1fCK0 10n0 1op0 11z0 1pd0 11z0 1qN0 WL0 1qp0 Xb0 1qp0 Xb0 1qp0 11z0 1lB0 11z0 1qN0 11z0 1iN0 16n0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|42e4","Europe/Ulyanovsk|LMT +03 +04 +05 +02|-3d.A -30 -40 -50 -20|01232323232323232321214121212121212121212121212121212121212121212|-22WM0 qH90 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0","Europe/Uzhgorod|CET CEST MSK MSD EET EEST|-10 -20 -30 -40 -20 -30|010101023232323232323232320454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-1cqL0 6i00 WM0 1fA0 1cM0 1ml0 1Cp0 1r3W0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 1Nf0 2pw0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e4","Europe/Vienna|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 3KM0 14o0 LA00 6i00 WM0 1fA0 1cM0 1cM0 1cM0 400 2qM0 1a00 1cM0 1cM0 1io0 17c0 1gHa0 19X0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|18e5","Europe/Vilnius|WMT KMT CET EET MSK CEST MSD EEST|-1o -1z.A -10 -20 -30 -20 -40 -30|012324525254646464646464646473737373737373737352537373737373737373737373737373737373737373737373737373737373737373737373|-293do 6ILM.o 1Ooz.A zz0 Mfd0 29W0 3is0 WM0 1fA0 1cM0 LV0 1tgL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|54e4","Europe/Volgograd|LMT +03 +04 +05|-2V.E -30 -40 -50|01232323232323232121212121212121212121212121212121212121212121|-21IqV.E psLV.E 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|10e5","Europe/Warsaw|WMT CET CEST EET EEST|-1o -10 -20 -20 -30|012121234312121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ctdo 1LXo 11d0 1iO0 11A0 1o00 11A0 1on0 11A0 6zy0 HWP0 5IM0 WM0 1fA0 1cM0 1dz0 1mL0 1en0 15B0 1aq0 1nA0 11A0 1io0 17c0 1fA0 1a00 iDX0 LA0 1cM0 1cM0 1C00 Oo0 1cM0 1cM0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1C00 LA0 uso0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e5","Europe/Zaporozhye|+0220 EET MSK CEST CET MSD EEST|-2k -20 -30 -20 -10 -40 -30|01234342525252525252525252526161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161|-1Pc2k eUok rdb0 2RE0 WM0 1fA0 8m0 1v9a0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cK0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|77e4","HST|HST|a0|0|","Indian/Chagos|LMT +05 +06|-4N.E -50 -60|012|-2xosN.E 3AGLN.E|30e2","Indian/Cocos|+0630|-6u|0||596","Indian/Kerguelen|-00 +05|0 -50|01|-MG00|130","Indian/Mahe|LMT +04|-3F.M -40|01|-2yO3F.M|79e3","Indian/Maldives|MMT +05|-4S -50|01|-olgS|35e4","Indian/Mauritius|LMT +04 +05|-3O -40 -50|012121|-2xorO 34unO 14L0 12kr0 11z0|15e4","Indian/Reunion|LMT +04|-3F.Q -40|01|-2mDDF.Q|84e4","Pacific/Kwajalein|+11 -12 +12|-b0 c0 -c0|012|-AX0 W9X0|14e3","MET|MET MEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","MST|MST|70|0|","MST7MDT|MST MDT MWT MPT|70 60 60 60|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Pacific/Chatham|+1215 +1245 +1345|-cf -cJ -dJ|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-WqAf 1adef IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|600","PST8PDT|PST PDT PWT PPT|80 70 70 70|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261q0 1nX0 11B0 1nX0 SgN0 8x10 iy0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Pacific/Apia|LMT -1130 -11 -10 +14 +13|bq.U bu b0 a0 -e0 -d0|01232345454545454545454545454545454545454545454545454545454|-2nDMx.4 1yW03.4 2rRbu 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|37e3","Pacific/Bougainville|+10 +09 +11|-a0 -90 -b0|0102|-16Wy0 7CN0 2MQp0|18e4","Pacific/Efate|LMT +11 +12|-bd.g -b0 -c0|0121212121212121212121|-2l9nd.g 2Szcd.g 1cL0 1oN0 10L0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 Lz0 1Nd0 An0|66e3","Pacific/Enderbury|-12 -11 +13|c0 b0 -d0|012|nIc0 B8n0|1","Pacific/Fakaofo|-11 +13|b0 -d0|01|1Gfn0|483","Pacific/Fiji|LMT +12 +13|-bT.I -c0 -d0|0121212121212121212121212121212121212121212121212121212121212121|-2bUzT.I 3m8NT.I LA0 1EM0 IM0 nJc0 LA0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0|88e4","Pacific/Galapagos|LMT -05 -06|5W.o 50 60|01212|-1yVS1.A 2dTz1.A gNd0 rz0|25e3","Pacific/Gambier|LMT -09|8X.M 90|01|-2jof0.c|125","Pacific/Guadalcanal|LMT +11|-aD.M -b0|01|-2joyD.M|11e4","Pacific/Guam|GST ChST|-a0 -a0|01|1fpq0|17e4","Pacific/Honolulu|HST HDT HST|au 9u a0|010102|-1thLu 8x0 lef0 8Pz0 46p0|37e4","Pacific/Kiritimati|-1040 -10 +14|aE a0 -e0|012|nIaE B8nk|51e2","Pacific/Kosrae|+11 +12|-b0 -c0|010|-AX0 1bdz0|66e2","Pacific/Majuro|+11 +12|-b0 -c0|01|-AX0|28e3","Pacific/Marquesas|LMT -0930|9i 9u|01|-2joeG|86e2","Pacific/Pago_Pago|LMT SST|bm.M b0|01|-2nDMB.c|37e2","Pacific/Nauru|LMT +1130 +09 +12|-b7.E -bu -90 -c0|01213|-1Xdn7.E PvzB.E 5RCu 1ouJu|10e3","Pacific/Niue|-1120 -1130 -11|bk bu b0|012|-KfME 17y0a|12e2","Pacific/Norfolk|+1112 +1130 +1230 +11|-bc -bu -cu -b0|01213|-Kgbc W01G On0 1COp0|25e4","Pacific/Noumea|LMT +11 +12|-b5.M -b0 -c0|01212121|-2l9n5.M 2EqM5.M xX0 1PB0 yn0 HeP0 Ao0|98e3","Pacific/Pitcairn|-0830 -08|8u 80|01|18Vku|56","Pacific/Rarotonga|-1030 -0930 -10|au 9u a0|012121212121212121212121212|lyWu IL0 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu|13e3","Pacific/Tahiti|LMT -10|9W.g a0|01|-2joe1.I|18e4","Pacific/Tongatapu|+1220 +13 +14|-ck -d0 -e0|0121212121|-1aB0k 2n5dk 15A0 1wo0 xz0 1Q10 xz0 zWN0 s00|75e3","WET|WET WEST|0 -10|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00"],links:["Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|Atlantic/St_Helena","Africa/Cairo|Egypt","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|US/Alaska","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Catamarca|America/Argentina/ComodRivadavia","America/Argentina/Catamarca|America/Catamarca","America/Argentina/Cordoba|America/Cordoba","America/Argentina/Cordoba|America/Rosario","America/Argentina/Jujuy|America/Jujuy","America/Argentina/Mendoza|America/Mendoza","America/Atikokan|America/Coral_Harbour","America/Chicago|US/Central","America/Curacao|America/Aruba","America/Curacao|America/Kralendijk","America/Curacao|America/Lower_Princes","America/Denver|America/Shiprock","America/Denver|Navajo","America/Denver|US/Mountain","America/Detroit|US/Michigan","America/Edmonton|Canada/Mountain","America/Fort_Wayne|America/Indiana/Indianapolis","America/Fort_Wayne|America/Indianapolis","America/Fort_Wayne|US/East-Indiana","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Indiana/Knox|America/Knox_IN","America/Indiana/Knox|US/Indiana-Starke","America/Jamaica|Jamaica","America/Kentucky/Louisville|America/Louisville","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Manaus|Brazil/West","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|Mexico/General","America/New_York|US/Eastern","America/Noronha|Brazil/DeNoronha","America/Panama|America/Cayman","America/Phoenix|US/Arizona","America/Port_of_Spain|America/Anguilla","America/Port_of_Spain|America/Antigua","America/Port_of_Spain|America/Dominica","America/Port_of_Spain|America/Grenada","America/Port_of_Spain|America/Guadeloupe","America/Port_of_Spain|America/Marigot","America/Port_of_Spain|America/Montserrat","America/Port_of_Spain|America/St_Barthelemy","America/Port_of_Spain|America/St_Kitts","America/Port_of_Spain|America/St_Lucia","America/Port_of_Spain|America/St_Thomas","America/Port_of_Spain|America/St_Vincent","America/Port_of_Spain|America/Tortola","America/Port_of_Spain|America/Virgin","America/Regina|Canada/Saskatchewan","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Tijuana|America/Ensenada","America/Tijuana|America/Santa_Isabel","America/Tijuana|Mexico/BajaNorte","America/Toronto|America/Montreal","America/Toronto|Canada/Eastern","America/Vancouver|Canada/Pacific","America/Whitehorse|Canada/Yukon","America/Winnipeg|Canada/Central","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Vientiane","Asia/Dhaka|Asia/Dacca","Asia/Dubai|Asia/Muscat","Asia/Ho_Chi_Minh|Asia/Saigon","Asia/Hong_Kong|Hongkong","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Singapore","Asia/Macau|Asia/Macao","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|Europe/Nicosia","Asia/Qatar|Asia/Bahrain","Asia/Rangoon|Asia/Yangon","Asia/Riyadh|Asia/Aden","Asia/Riyadh|Asia/Kuwait","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|PRC","Asia/Taipei|ROC","Asia/Tehran|Iran","Asia/Thimphu|Asia/Thimbu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Urumqi|Asia/Kashgar","Atlantic/Faroe|Atlantic/Faeroe","Atlantic/Reykjavik|Iceland","Atlantic/South_Georgia|Etc/GMT+2","Australia/Adelaide|Australia/South","Australia/Brisbane|Australia/Queensland","Australia/Broken_Hill|Australia/Yancowinna","Australia/Darwin|Australia/North","Australia/Hobart|Australia/Tasmania","Australia/Lord_Howe|Australia/LHI","Australia/Melbourne|Australia/Victoria","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/NSW","Etc/GMT+0|Etc/GMT","Etc/GMT+0|Etc/GMT-0","Etc/GMT+0|Etc/GMT0","Etc/GMT+0|Etc/Greenwich","Etc/GMT+0|GMT","Etc/GMT+0|GMT+0","Etc/GMT+0|GMT-0","Etc/GMT+0|GMT0","Etc/GMT+0|Greenwich","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belgrade|Europe/Ljubljana","Europe/Belgrade|Europe/Podgorica","Europe/Belgrade|Europe/Sarajevo","Europe/Belgrade|Europe/Skopje","Europe/Belgrade|Europe/Zagreb","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Helsinki|Europe/Mariehamn","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Portugal","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Oslo|Arctic/Longyearbyen","Europe/Oslo|Atlantic/Jan_Mayen","Europe/Prague|Europe/Bratislava","Europe/Rome|Europe/San_Marino","Europe/Rome|Europe/Vatican","Europe/Warsaw|Poland","Europe/Zurich|Europe/Busingen","Europe/Zurich|Europe/Vaduz","Indian/Christmas|Etc/GMT-7","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kwajalein|Kwajalein","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Palau|Etc/GMT-9","Pacific/Pohnpei|Etc/GMT-11","Pacific/Pohnpei|Pacific/Ponape","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tarawa|Etc/GMT-12","Pacific/Tarawa|Pacific/Funafuti","Pacific/Tarawa|Pacific/Wake","Pacific/Tarawa|Pacific/Wallis"]}),function(e,t,n,o){if(o=angular.isString(o)?o:"-",!e||0===e.length||e===o)return o;t&&0!==t.length||(t=a.dateFormat?a.dateFormat:"M/D/YYYY");o=a.timezone;return n&&(o=n),moment=s.addLocalesToMoment(moment),null===moment.tz.zone(o)&&(i.log("Warning: invalid timezone: "+o),o="UTC"),r.moment.tz(e,o).format(t)}}]),function(){"use strict";angular.module("lu").filter("messagesCount",function(){return function(e){return window.isNaN(e)?null:e<99?e:"99:plus".replace(/:plus/,99<e?"+":"")}})}(),window.angular.module("lu").filter("showDescriptions",[function(){return function(e,t){if(!e||0===e.length)return"";t=t||200;e=e?String(e).replace(/<[^>]+>/gm,""):"";return e.length>t&&(e=e.substring(0,t-1)+"... "),e}}]),function(){"use strict";angular.module("lu").filter("truncate",function(){return function(e,t,n,o){if(!e||0===e.length)return"";isNaN(t)&&(t=250),void 0===n&&(n="...");var r=e?String(e).replace(/<[^>]+>/gm,""):"";return o&&(r=r.replace().replace(/&nbsp;/gi,"")),e.length<=t||e.length-n.length<=t?r:r.substring(0,t-n.length)+n}})}(),function(){function e(t){return function(e){return t.trustAsResourceUrl(e)}}angular.module("lu").filter("trustUrl",e),e.$inject=["$sce"]}(),function(){"use strict";angular.module("lu").filter("unique",function(){return function(e,t){return!1===t||(t||angular.isUndefined(t))&&angular.isArray(e)&&(o=[],r=function(e){return angular.isObject(e)&&angular.isString(t)?e[t]:e},angular.forEach(e,function(e){for(var t=!1,n=0;n<o.length;n++)if(angular.equals(r(o[n]),r(e))){t=!0;break}t||o.push(e)}),e=o),e;var o,r}})}(),angular.module("toastr",[]).directive("toast",["$compile","$timeout","toastr","LupHelper",function(i,s,l,c){return{replace:!0,templateUrl:"templates/toastr/toastr.html",link:function(t,e,n){var o,r;function a(e){return s(function(){l.remove(t.toastId)},e)}t.toastClass=t.options.toastClass,t.titleClass=t.options.titleClass,t.messageClass=t.options.messageClass,t.options.timeOut=8e3,t.helper=c,t.options.closeHtml&&((r=angular.element(t.options.closeHtml)).addClass("toast-close-button"),r.attr({"ng-click":"close()","aria-label":c.showMessage("a11y.dismiss_toastr")}),i(r)(t),e.prepend(r)),t.init=function(){t.options.timeOut&&(o=a(t.options.timeOut))},e.on("mouseenter",function(){o&&s.cancel(o)}),t.tapToast=function(){t.options.tapToDismiss&&t.close()},t.close=function(){l.remove(t.toastId)},e.on("mouseleave",function(){0===t.options.timeOut&&0===t.options.extendedTimeOut||(o=a(t.options.extendedTimeOut))})}}}]).constant("toastrConfig",{allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",positionClass:"toast-bottom-full-width ",tapToDismiss:!0,timeOut:5e3,titleClass:"toast-title",toastClass:"toast"}).factory("toastr",["$animate","$compile","$document","$rootScope","$sce","toastrConfig","$q",function(i,s,l,c,u,e,n){var d,p=0,_=[],m=n.defer();return{clear:function(e){if(e)r(e.toastId);else for(var t=0;t<_.length;t++)r(_[t].toastId)},error:function(e,t,n){return o({iconClass:f().iconClasses.error,message:e,optionsOverride:n,title:t})},info:function(e,t,n){return o({iconClass:f().iconClasses.info,message:e,optionsOverride:n,title:t})},remove:r,success:function(e,t,n){return o({iconClass:f().iconClasses.success,message:e,optionsOverride:n,title:t})},warning:function(e,t,n){return o({iconClass:f().iconClasses.warning,message:e,optionsOverride:n,title:t})}};function f(){return angular.extend({},e)}function o(e){var t=f();if(e.optionsOverride&&(t=angular.extend(t,e.optionsOverride)),t.preventOpenDuplicates)for(var n=_.length-1;0<=n;n--)if(_[n].scope.message===e.message)return;var o,r,a={toastId:p++,scope:c.$new()};return a.iconClass=e.iconClass,e.optionsOverride&&(a.iconClass=e.optionsOverride.iconClass||a.iconClass),function(e,t,n){n.allowHtml?(e.scope.allowHtml=!0,e.scope.title=u.trustAsHtml(t.title),e.scope.message=u.trustAsHtml(t.message)):(e.scope.title=t.title,e.scope.message=t.message);e.scope.toastType=e.iconClass,e.scope.toastId=e.toastId,e.scope.options={extendedTimeOut:n.extendedTimeOut,messageClass:n.messageClass,tapToDismiss:n.tapToDismiss,timeOut:n.timeOut,titleClass:n.titleClass,toastClass:n.toastClass},n.closeButton&&(e.scope.options.closeHtml=n.closeHtml)}(a,e,t),a.el=(o=a.scope,r=angular.element("<div toast></div>"),s(r)(o)),_.push(a),t=t,d||((d=angular.element("<div></div>")).attr("id",t.containerId),d.addClass(t.positionClass),d.css({"pointer-events":"auto"}),t=l.find("body").eq(0),i.enter(d,t,null,function(){m.resolve()})),m.promise.then(function(){i.enter(a.el,d,null,function(){a.scope.init()})}),a}function r(e){var t=function(e){for(var t=0;t<_.length;t++)if(_[t].toastId===e)return _[t]}(e);t&&i.leave(t.el,function(){t.scope.$destroy(),d&&0===d.children().length&&(_=[],d.remove(),d=null,m=n.defer())})}}]),angular.module("toastr").run(["$templateCache",function(e){"use strict";e.put("templates/toastr/toastr.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div class=\' toast-wrap\' ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" role="alert" aria-live="assertive">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" role="alert" aria-live="assertive" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n</div>')}]),$(document).ready(function(){var e;setup_card_changed_form(),$("#update-form").submit(function(e){return is_eu_country($("#billing_country_code").val())||$("#billing_vat_number").val(""),e.preventDefault(),$(".payment-errors").removeClass("alert"),$(".payment-errors").removeClass("alert-danger"),$(".payment-errors").removeClass("active"),$(".payment-errors").text(""),$("#vat_signup_cost").hide(),$("#payment_submit_button").hide(),$("#payment_submit_button_blurb").show(),$("#update-form").trigger("submit.rails"),!1}),$("#confirm_country").change(function(){$("#confirm_country option:selected").each(function(){do_country_show_state_logic($(this).val()),$("#country_text_name").val(I18n.t("countrylists."+$(this).val().toLowerCase()))})}),$("#billing_vat_number").on("keyup",function(){clearTimeout(e),e=setTimeout(determine_show_hide_vat_pricings(),500)}),$("#confirm_state").change(function(){$("#confirm_state option:selected").each(function(){$("#billing_state_code").val($(this).val()),"xx"!=$("#billing_state_code").val().toLowerCase()?$("#state_text_name").val(I18n.t("statelists."+$(this).val().toLowerCase())):$("#state_text_name").val("")})})}),function(a){var t,e,o,n,r,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w=(e={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(t=65)},o=function(e){var t,n=a(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?n.data("colorpicker").color=t=g(f(this.value)):0<this.parentNode.className.indexOf("_hsb")?n.data("colorpicker").color=t=_({h:parseInt(n.data("colorpicker").fields.eq(4).val(),10),s:parseInt(n.data("colorpicker").fields.eq(5).val(),10),b:parseInt(n.data("colorpicker").fields.eq(6).val(),10)}):n.data("colorpicker").color=t=h(m({r:parseInt(n.data("colorpicker").fields.eq(1).val(),10),g:parseInt(n.data("colorpicker").fields.eq(2).val(),10),b:parseInt(n.data("colorpicker").fields.eq(3).val(),10)})),e&&(y(t,n.get(0)),S(t,n.get(0)),M(t,n.get(0))),C(t,n.get(0)),A(t,n.get(0)),$(t,n.get(0)),n.data("colorpicker").onChange.apply(n,[t,v(t),b(t)])},n=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&o.apply(e.data.field.get(0),[!0]),!1},r=function(e){return o.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),a(document).unbind("mouseup",r),a(document).unbind("mousemove",n),!1},i=function(e){return o.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},s=function(e){return y(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),S(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),a(document).unbind("mouseup",s),a(document).unbind("mousemove",i),!1},l=function(e){return o.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},c=function(e){return y(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),S(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),a(document).unbind("mouseup",c),a(document).unbind("mousemove",l),!1},u=function(e){d(e.data.cal.get(0),e.target,e.data.cal.get(0))||(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),a(document).unbind("mousedown",u))},d=function(e,t,n){if(e==t)return!0;if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));for(var o=t.parentNode;o&&o!=n;){if(o==e)return!0;o=o.parentNode}return!1},p=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(e?document.documentElement:document.body).scrollTop,w:window.innerWidth||(e?document.documentElement:document.body).clientWidth,h:window.innerHeight||(e?document.documentElement:document.body).clientHeight}},_=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},m=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},f=function(e){var t=6-e.length;if(0<t){for(var n=[],o=0;o<t;o++)n.push("0");n.push(e),e=n.join("")}return e},g=function(e){return h(function(e){e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16);return{r:e>>16,g:(65280&e)>>8,b:255&e}}(e))},h=function(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b),n=o-n;return t.b=o,t.s=0!=o?255*n/o:0,0!=t.s?e.r==o?t.h=(e.g-e.b)/n:e.g==o?t.h=2+(e.b-e.r)/n:t.h=4+(e.r-e.g)/n:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},b=function(e){var t={},n=Math.round(e.h),o=Math.round(255*e.s/100),r=Math.round(255*e.b/100);return 0==o?t.r=t.g=t.b=r:(r=n%60*((e=r)-(o=(255-o)*r/255))/60,360==n&&(n=0),n<60?(t.r=e,t.b=o,t.g=o+r):n<120?(t.g=e,t.b=o,t.r=e-r):n<180?(t.g=e,t.r=o,t.b=o+r):n<240?(t.b=e,t.r=o,t.g=e-r):n<300?(t.b=e,t.g=o,t.r=o+r):n<360?(t.r=e,t.g=o,t.b=e-r):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},v=function(e){return e=b(e),n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)],a.each(n,function(e,t){1==t.length&&(n[e]="0"+t)}),n.join("");var n},{init:function(n){if("string"==typeof(n=a.extend({},e,n||{})).color)n.color=g(n.color);else if(null!=n.color.r&&null!=n.color.g&&null!=n.color.b)n.color=h(n.color);else{if(null==n.color.h||null==n.color.s||null==n.color.b)return this;n.color=_(n.color)}return this.each(function(){var e,t;a(this).data("colorpickerId")||((e=a.extend({},n)).origColor=n.color,t="collorpicker_"+parseInt(1e3*Math.random()),a(this).data("colorpickerId",t),t=a('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",t),e.flat?t.appendTo(this).show():t.appendTo(document.body),e.fields=t.find("input").bind("keyup",T).bind("change",o).bind("blur",z).bind("focus",x),t.find("span").bind("mousedown",P).end().find(">div.colorpicker_current_color").bind("click",F),e.selector=t.find("div.colorpicker_color").bind("mousedown",E),e.selectorIndic=e.selector.find("div div"),e.el=this,e.hue=t.find("div.colorpicker_hue div"),t.find("div.colorpicker_hue").bind("mousedown",k),e.newColor=t.find("div.colorpicker_new_color"),e.currentColor=t.find("div.colorpicker_current_color"),t.data("colorpicker",e),t.find("div.colorpicker_submit").bind("mouseenter",O).bind("mouseleave",I).bind("click",D),y(e.color,t.get(0)),M(e.color,t.get(0)),S(e.color,t.get(0)),A(e.color,t.get(0)),C(e.color,t.get(0)),L(e.color,t.get(0)),$(e.color,t.get(0)),e.flat?t.css({position:"relative",display:"block"}):a(this).bind(e.eventName,N))})},showPicker:function(){return this.each(function(){a(this).data("colorpickerId")&&N.apply(this)})},hidePicker:function(){return this.each(function(){a(this).data("colorpickerId")&&a("#"+a(this).data("colorpickerId")).hide()})},setColor:function(t){if("string"==typeof t)t=g(t);else if(null!=t.r&&null!=t.g&&null!=t.b)t=h(t);else{if(null==t.h||null==t.s||null==t.b)return this;t=_(t)}return this.each(function(){var e;a(this).data("colorpickerId")&&((e=a("#"+a(this).data("colorpickerId"))).data("colorpicker").color=t,e.data("colorpicker").origColor=t,y(t,e.get(0)),M(t,e.get(0)),S(t,e.get(0)),A(t,e.get(0)),C(t,e.get(0)),L(t,e.get(0)),$(t,e.get(0)))})}});function y(e,t){e=b(e),a(t).data("colorpicker").fields.eq(1).val(e.r).end().eq(2).val(e.g).end().eq(3).val(e.b).end()}function M(e,t){a(t).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()}function S(e,t){a(t).data("colorpicker").fields.eq(0).val(v(e)).end()}function C(e,t){a(t).data("colorpicker").selector.css("backgroundColor","#"+v({h:e.h,s:100,b:100})),a(t).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})}function A(e,t){a(t).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))}function L(e,t){a(t).data("colorpicker").currentColor.css("backgroundColor","#"+v(e))}function $(e,t){a(t).data("colorpicker").newColor.css("backgroundColor","#"+v(e))}function T(e){if(e=e.charCode||e.keyCode||-1,t<e&&e<=90||32==e)return!1;!0===a(this).parent().parent().data("colorpicker").livePreview&&o.apply(this)}function z(e){a(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function x(){t=0<this.parentNode.className.indexOf("_hex")?70:65,a(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),a(this).parent().addClass("colorpicker_focus")}function P(e){var t=a(this).parent().find("input").focus(),t={el:a(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:e.pageY,field:t,val:parseInt(t.val(),10),preview:a(this).parent().parent().data("colorpicker").livePreview};a(document).bind("mouseup",t,r),a(document).bind("mousemove",t,n)}function k(e){var t={cal:a(this).parent(),y:a(this).offset().top};t.preview=t.cal.data("colorpicker").livePreview,a(document).bind("mouseup",t,s),a(document).bind("mousemove",t,i)}function E(e){var t={cal:a(this).parent(),pos:a(this).offset()};t.preview=t.cal.data("colorpicker").livePreview,a(document).bind("mouseup",t,c),a(document).bind("mousemove",t,l)}function O(e){a(this).addClass("colorpicker_focus")}function I(e){a(this).removeClass("colorpicker_focus")}function D(e){var t=a(this).parent(),n=t.data("colorpicker").color;t.data("colorpicker").origColor=n,L(n,t.get(0)),t.data("colorpicker").onSubmit(n,v(n),b(n),t.data("colorpicker").el)}function N(e){var t=a("#"+a(this).data("colorpickerId"));t.data("colorpicker").onBeforeShow.apply(this,[t.get(0)]);var n=a(this).offset(),o=p(),r=n.top+this.offsetHeight,n=n.left;return r+176>o.t+o.h&&(r-=this.offsetHeight+176),n+356>o.l+o.w&&(n-=356),t.css({left:n+"px",top:r+"px"}),0!=t.data("colorpicker").onShow.apply(this,[t.get(0)])&&t.show(),a(document).bind("mousedown",{cal:t},u),!1}function F(){var e=a(this).parent(),t=e.data("colorpicker").origColor;e.data("colorpicker").color=t,y(t,e.get(0)),S(t,e.get(0)),M(t,e.get(0)),C(t,e.get(0)),A(t,e.get(0)),$(t,e.get(0))}a.fn.extend({ColorPicker:w.init,ColorPickerHide:w.hidePicker,ColorPickerShow:w.showPicker,ColorPickerSetColor:w.setColor})}(jQuery),$(document).ready(function(){function e(){n||(n=!0,t())}var t,n;"undefined"!=typeof document&&(t=function(){var r=!0,t=!1,n=null,a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(e){return!(!e||e===document||"HTML"===e.nodeName||"BODY"===e.nodeName)}function s(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function e(e){r=!1}function o(){document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("mouseup",l),document.addEventListener("pointermove",l),document.addEventListener("pointerdown",l),document.addEventListener("pointerup",l),document.addEventListener("touchmove",l),document.addEventListener("touchstart",l),document.addEventListener("touchend",l)}function l(e){"html"!==e.target.nodeName.toLowerCase()&&(r=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",l),document.removeEventListener("pointermove",l),document.removeEventListener("pointerdown",l),document.removeEventListener("pointerup",l),document.removeEventListener("touchmove",l),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",l))}document.addEventListener("keydown",function(e){i(document.activeElement)&&s(document.activeElement),r=!0},!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("focus",function(e){var t,n,o;i(e.target)&&(r||(t=e.target,n=t.type,"INPUT"==(o=t.tagName)&&a[n]&&!t.readonly||("TEXTAREA"==o&&!t.readonly||"true"==t.contentEditable)))&&(s(e.target),r=!1)},!0),document.addEventListener("blur",function(e){i(e.target)&&e.target.classList.contains("focus-visible")&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),(e=e.target).hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added")))},!0),document.addEventListener("visibilitychange",function(e){"hidden"==document.visibilityState&&(t&&(r=!0),o())},!0),o(),document.body.classList.add("js-focus-visible")},"complete"===document.readyState?t():(document.addEventListener("DOMContentLoaded",e,n=!1),window.addEventListener("load",e,!1)))}),function(){var _={de:{y:function(e){return"Jahr"+(1!==e?"e":"")},mo:function(e){return"Monat"+(1!==e?"e":"")},w:function(e){return"Woche"+(1!==e?"n":"")},d:function(e){return"Tag"+(1!==e?"e":"")},h:function(e){return"Stunde"+(1!==e?"n":"")},m:function(e){return"Minute"+(1!==e?"n":"")},s:function(e){return"Sekunde"+(1!==e?"n":"")},ms:function(e){return"Millisekunde"+(1!==e?"n":"")},decimal:","},en:{y:function(e){return"year"+(1!==e?"s":"")},mo:function(e){return"month"+(1!==e?"s":"")},w:function(e){return"week"+(1!==e?"s":"")},d:function(e){return"day"+(1!==e?"s":"")},h:function(e){return"hour"+(1!==e?"s":"")},m:function(e){return"minute"+(1!==e?"s":"")},s:function(e){return"second"+(1!==e?"s":"")},ms:function(e){return"millisecond"+(1!==e?"s":"")},decimal:"."},es:{y:function(e){return"año"+(1!==e?"s":"")},mo:function(e){return"mes"+(1!==e?"es":"")},w:function(e){return"semana"+(1!==e?"s":"")},d:function(e){return"día"+(1!==e?"s":"")},h:function(e){return"hora"+(1!==e?"s":"")},m:function(e){return"minuto"+(1!==e?"s":"")},s:function(e){return"segundo"+(1!==e?"s":"")},ms:function(e){return"milisegundo"+(1!==e?"s":"")},decimal:","},fr:{y:function(e){return"an"+(1!==e?"s":"")},mo:"mois",w:function(e){return"semaine"+(1!==e?"s":"")},d:function(e){return"jour"+(1!==e?"s":"")},h:function(e){return"heure"+(1!==e?"s":"")},m:function(e){return"minute"+(1!==e?"s":"")},s:function(e){return"seconde"+(1!==e?"s":"")},ms:function(e){return"milliseconde"+(1!==e?"s":"")},decimal:","},nl:{y:"jaar",mo:function(e){return 1===e?"maand":"maanden"},w:function(e){return 1===e?"week":"weken"},d:function(e){return 1===e?"dag":"dagen"},h:"uur",m:function(e){return 1===e?"minuut":"minuten"},s:function(e){return 1===e?"seconde":"seconden"},ms:function(e){return 1===e?"milliseconde":"milliseconden"},decimal:","},pt:{y:function(e){return"ano"+(1!==e?"s":"")},mo:function(e){return 1!==e?"meses":"mês"},w:function(e){return"semana"+(1!==e?"s":"")},d:function(e){return"dia"+(1!==e?"s":"")},h:function(e){return"hora"+(1!==e?"s":"")},m:function(e){return"minuto"+(1!==e?"s":"")},s:function(e){return"segundo"+(1!==e?"s":"")},ms:function(e){return"milissegundo"+(1!==e?"s":"")},decimal:","}};function e(e){var n=function(e,t){return function(e,t){var n,o,r;e=Math.abs(e);var a=t.languages[t.language]||_[t.language];if(!a)throw new Error("No language "+a+".");var i,s,l,c,u,d=[];for(n=0,o=t.units.length;n<o;n++)i=t.units[n],s=t.unitMeasures[i],l=n+1===o?e/s:Math.floor(e/s),d.push({unitCount:l,unitName:i}),e-=l*s;if(t.round)for(n=d.length-1;0<=n&&((r=d[n]).unitCount=Math.round(r.unitCount),0!==n);n--)u=d[n-1],c=t.unitMeasures[u.unitName]/t.unitMeasures[r.unitName],(r.unitCount%c==0||t.largest&&t.largest-1<n)&&(u.unitCount+=r.unitCount/c,r.unitCount=0);var p=[];for(n=0,d.length;n<o&&((r=d[n]).unitCount&&p.push(m(r.unitCount,r.unitName,a,t)),p.length!==t.largest);n++);return p.length?p.join(t.delimiter):m(0,t.units[t.units.length-1],a,t)}(e,o({},n,t||{}))};return o(n,{language:"en",delimiter:", ",spacer:" ",units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},e)}var t=e({});function m(e,t,n,o){var r=(void 0===o.decimal?n:o).decimal,r=e.toString().replace(".",r),t=n[t],t="function"==typeof t?t(e):t;return r+o.spacer+t}function o(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])t.hasOwnProperty(o)&&(e[o]=t[o]);return e}t.getSupportedLanguages=function(){var e,t=[];for(e in _)_.hasOwnProperty(e)&&t.push(e);return t},t.humanizer=e,"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:this.humanizeDuration=t}();var setup_data_filters=function(o){var r=null,t=!1,n=!1;return{removeFromFilter:function(e,t){r.removeFromFilter(e,t)},collectData:function(){var e;null!=r&&"undefined"!=r&&(e=r.collectData(),o("#custom_data").val(JSON.stringify(e)),window.collectData=JSON.stringify(e))},initialSetup:function(){try{var e=o(".wo-wizard");(r=new enrollment_wizard_filter(e,!0)).used_for_data_setup();e=o("#custom_data").val();null!=e&&""!=e&&"{}"!=e&&(r.applyFilters(JSON.parse(decodeURIComponent(e))),t&&r.prevent_cannot_edit_value(),n&&r.hideFiltersWithData(JSON.parse(decodeURIComponent(e))))}catch(e){}},hideFiltersWithData:function(){n=!0},preventCannotEdit:function(){t=!0},submitCourseData:function(e){var t,n;null!=r&&"undefined"!=r&&(n=o(".wo-wizard"),t=angular.element(n).scope(),window.showLoader=!0,t.$digest(),n=r.collectData(),n={custom_course_data:JSON.stringify(n),authenticity_token:o("#authenticity_token").val()},o.ajax({url:"/courses/"+e+"/save_custom_course_data.json",cache:!1,type:"POST",data:n,success:function(e){window.courseMetaDataResponse=e,window.courseMetaDataForm=!0,t.$digest()}}))}}}(window.jQuery);!function(){"use strict";angular.module("as.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"as-sortable-item-handle",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden",dragging:"as-sortable-dragging"})}(),function(){"use strict";angular.module("as.sortable").factory("$helper",["$document","$window",function(o,r){return{height:function(e){return e[0].getBoundingClientRect().height},width:function(e){return e[0].getBoundingClientRect().width},offset:function(e,t){var n=e[0].getBoundingClientRect();return t=t||o[0].documentElement,{width:n.width||e.prop("offsetWidth"),height:n.height||e.prop("offsetHeight"),top:n.top+(r.pageYOffset||t.scrollTop-t.offsetTop),left:n.left+(r.pageXOffset||t.scrollLeft-t.offsetLeft)}},eventObj:function(e){var t=e;return void 0!==e.changedTouches?t=e.changedTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches.item(0)),t},isTouchInvalid:function(e){var t=!1;return(void 0!==e.touches&&1<e.touches.length||void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&1<e.originalEvent.touches.length)&&(t=!0),t},positionStarted:function(e,t,n){var o={};return o.offsetX=e.pageX-this.offset(t,n).left,o.offsetY=e.pageY-this.offset(t,n).top,o.startX=o.lastX=e.pageX,o.startY=o.lastY=e.pageY,o.nowX=o.nowY=o.distX=o.distY=o.dirAx=0,o.dirX=o.dirY=o.lastDirX=o.lastDirY=o.distAxX=o.distAxY=0,o},calculatePosition:function(e,t){e.lastX=e.nowX,e.lastY=e.nowY,e.nowX=t.pageX,e.nowY=t.pageY,e.distX=e.nowX-e.lastX,e.distY=e.nowY-e.lastY,e.lastDirX=e.dirX,e.lastDirY=e.dirY,e.dirX=0===e.distX?0:0<e.distX?1:-1,e.dirY=0===e.distY?0:0<e.distY?1:-1;t=Math.abs(e.distX)>Math.abs(e.distY)?1:0;e.dirAx!==t?(e.distAxX=0,e.distAxY=0):(e.distAxX+=Math.abs(e.distX),0!==e.dirX&&e.dirX!==e.lastDirX&&(e.distAxX=0),e.distAxY+=Math.abs(e.distY),0!==e.dirY&&e.dirY!==e.lastDirY&&(e.distAxY=0)),e.dirAx=t},movePosition:function(e,t,n,o,r,a){r="relative"===r;t.x=e.pageX-n.offsetX,t.y=e.pageY-n.offsetY,o&&(a=this.offset(o,a),r&&(t.x-=a.left,t.y-=a.top,a.left=0,a.top=0),t.x<a.left?t.x=a.left:t.x>=a.width+a.left-this.offset(t).width&&(t.x=a.width+a.left-this.offset(t).width),t.y<a.top?t.y=a.top:t.y>=a.height+a.top-this.offset(t).height&&(t.y=a.height+a.top-this.offset(t).height)),t.css({left:t.x+"px",top:t.y+"px"}),this.calculatePosition(n,e)},dragItem:function(e){return{index:e.index(),parent:e.sortableScope,source:e,targetElement:null,targetElementOffset:null,sourceInfo:{index:e.index(),itemScope:e.itemScope,sortableScope:e.sortableScope},canMove:function(e,t,n){return this.targetElement!==t?(this.targetElement=t,this.targetElementOffset=n,!0):(0<e.dirX*(n.left-this.targetElementOffset.left)||0<e.dirY*(n.top-this.targetElementOffset.top))&&(this.targetElementOffset=n,!0)},moveTo:function(e,t){this.parent=e,this.isSameParent()&&this.source.index()<t&&!this.sourceInfo.sortableScope.cloning&&--t,this.index=t},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.cloning?this.parent.options.clone||this.parent.insertItem(this.index,angular.copy(this.source.modelValue)):(this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),(this.parent.options.allowDuplicates||this.parent.modelValue.indexOf(this.source.modelValue)<0)&&this.parent.insertItem(this.index,this.source.modelValue))}}},noDrag:function(e){return void 0!==e.attr("no-drag")||void 0!==e.attr("data-no-drag")},findAncestor:function(e,t){e=e[0];for(var n=Element.matches||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector;(e=e.parentElement)&&!n.call(e,t););return e?angular.element(e):angular.element(document.body)}}}])}(),function(){"use strict";var e=angular.module("as.sortable");e.controller("as.sortable.sortableController",["$scope",function(o){(this.scope=o).modelValue=null,o.callbacks=null,o.type="sortable",o.options={longTouch:!1},o.isDisabled=!1,o.insertItem=function(e,t){o.options.allowDuplicates?o.modelValue.splice(e,0,angular.copy(t)):o.modelValue.splice(e,0,t)},o.removeItem=function(e){var t=null;return-1<e&&(t=o.modelValue.splice(e,1)[0]),t},o.isEmpty=function(){return o.modelValue&&0===o.modelValue.length},o.accept=function(e,t,n){return o.callbacks.accept(e,t,n)}}]),e.directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"as.sortable.sortableController",link:function(n,e,t,o){var r,a=o;a&&(a.$render=function(){n.modelValue=a.$modelValue},(n.element=e).data("_scope",n),(r={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragMove:null,dragCancel:null,dragEnd:null}).accept=function(e,t,n){return!0},r.orderChanged=function(e){},r.itemMoved=function(e){},r.dragStart=function(e){},r.dragMove=angular.noop,r.dragCancel=function(e){},r.dragEnd=function(e){},n.$watch(t.asSortable,function(e,t){angular.forEach(e,function(e,t){r[t]?"function"==typeof e&&(r[t]=e):n.options[t]=e}),n.callbacks=r},!0),angular.isDefined(t.isDisabled)&&n.$watch(t.isDisabled,function(e,t){angular.isUndefined(e)||(n.isDisabled=e)},!0))}}})}(),function(){"use strict";var e=angular.module("as.sortable");e.controller("as.sortable.sortableItemHandleController",["$scope",function(e){(this.scope=e).itemScope=null,e.type="handle"}]),e.directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document","$timeout",function(D,N,F,q,j){return{require:"^asSortableItem",scope:!0,restrict:"A",controller:"as.sortable.sortableItemHandleController",link:function(i,r,e,t){var s,l,n,c,u,d,p,o,_,a,m,f,g,h,b,v,w,y,M,S,C,A,L,$,T,z,x,P,k=!1;function E(e,t){"table-row"!==l.css("display")&&l.css("display","block"),t.sortableScope.options.clone||(e[0].parentNode.insertBefore(l[0],e[0]),u.moveTo(t.sortableScope,t.index()))}function O(e){for(var t;!t&&e.length;)(t=e.data("_scope"))||(e=e.parent());return t}function I(){i.itemScope.sortableScope.cloning||n.replaceWith(i.itemScope.element),l.remove(),s.remove(),s=null,T=!1,d.css("cursor",""),d.removeClass("as-sortable-un-selectable")}S="ontouchstart"in F,C=/iPad|iPhone|iPod/.test(F.navigator.userAgent)&&!F.MSStream,D.handleClass&&r.addClass(D.handleClass),i.itemScope=t.scope,r.data("_scope",i),i.$watch("sortableScope.isDisabled",function(e){k!==e&&((k=e)?w:v)()}),i.$watch("sortableScope.options.longTouch",function(){(k?w:v)()}),i.$on("$destroy",function(){angular.element(q[0].body).unbind("keydown",P)}),z=function(e){return"function"==typeof i.sortableScope.options.placeholder?angular.element(i.sortableScope.options.placeholder(e)):"string"==typeof i.sortableScope.options.placeholder?angular.element(i.sortableScope.options.placeholder):angular.element(q[0].createElement(e.element.prop("tagName")))},o=function(t){var n,o=function(){angular.element(q).unbind("mousemove",e),angular.element(q).unbind("touchmove",e),r.unbind("mouseup",o),r.unbind("touchend",o),r.unbind("touchcancel",o)},e=function(e){e.preventDefault();e=N.eventObj(e);n=n||{clientX:e.clientX,clientY:e.clientY},10<Math.abs(e.clientX-n.clientX)+Math.abs(e.clientY-n.clientY)&&(o(),a(t))};angular.element(q).bind("mousemove",e),angular.element(q).bind("touchmove",e),r.bind("mouseup",o),r.bind("touchend",o),r.bind("touchcancel",o),t.stopPropagation()},a=function(e){var t;(S||2!==e.button&&3!==e.which)&&(S&&N.isTouchInvalid(e)||!T&&h(e)&&(T=!0,e.preventDefault(),t=N.eventObj(e),i.sortableScope=i.sortableScope||i.itemScope.sortableScope,i.callbacks=i.callbacks||i.itemScope.callbacks,i.itemScope.sortableScope.options.clone||i.itemScope.sortableScope.options.ctrlClone&&e.ctrlKey?i.itemScope.sortableScope.cloning=!0:i.itemScope.sortableScope.cloning=!1,_=0<angular.element(q[0].querySelector(i.sortableScope.options.scrollableContainer)).length?q[0].querySelector(i.sortableScope.options.scrollableContainer):q[0].documentElement,(d=i.sortableScope.options.containment?N.findAncestor(r,i.sortableScope.options.containment):angular.element(q[0].body)).css("cursor","move"),d.css("cursor","-webkit-grabbing"),d.css("cursor","-moz-grabbing"),d.addClass("as-sortable-un-selectable"),p=i.sortableScope.options.containerPositioning||"absolute",u=N.dragItem(i),e=i.itemScope.element.prop("tagName"),(s=angular.element(q[0].createElement(i.sortableScope.element.prop("tagName"))).addClass(i.sortableScope.element.attr("class")).addClass(D.dragClass)).css("width",N.width(i.itemScope.element)+"px"),s.css("height",N.height(i.itemScope.element)+"px"),(l=z(i.itemScope).addClass(D.placeHolderClass).addClass(i.sortableScope.options.additionalPlaceholderClass)).css("width",N.width(i.itemScope.element)+"px"),l.css("height",N.height(i.itemScope.element)+"px"),n=angular.element(q[0].createElement(e)),D.hiddenClass&&n.addClass(D.hiddenClass),c=N.positionStarted(t,i.itemScope.element,_),i.itemScope.sortableScope.options.clone||i.itemScope.element.after(l),i.itemScope.sortableScope.cloning?s.append(i.itemScope.element.clone()):(i.itemScope.element.after(n),s.append(i.itemScope.element)),d.append(s),N.movePosition(t,s,c,d,p,_),i.sortableScope.$apply(function(){i.callbacks.dragStart(u.eventArgs())}),y()))},h=function(e){for(var t=angular.element(e.target),e=O(t),n=e&&"handle"===e.type;n&&t[0]!==r[0];)N.noDrag(t)&&(n=!1),t=t.parent();return n},m=function(e){var t,n,o;if((!S||!N.isTouchInvalid(e))&&(T&&s&&(e.preventDefault(),t=N.eventObj(e),i.callbacks.dragMove!==angular.noop&&i.sortableScope.$apply(function(){i.callbacks.dragMove(c,d,t)}),r=t.pageX-q[0].documentElement.scrollLeft,a=t.pageY-(F.pageYOffset||q[0].documentElement.scrollTop),o=angular.element(q[0].elementFromPoint(r,a)),s.addClass(D.hiddenClass),s.removeClass(D.hiddenClass),N.movePosition(t,s,c,d,p,_),s.addClass(D.dragging),(n=O(o))&&n.type&&("handle"===n.type&&(n=n.itemScope),"item"===n.type||"sortable"===n.type)))){if("item"===n.type&&n.accept(i,n.sortableScope,n)){o=n.element;var r=N.offset(o,_);if(!u.canMove(c,o,r))return;var a=b(n.sortableScope.element);!(a<0)&&a<=n.index()?(r=o,a=n,"table-row"!==l.css("display")&&l.css("display","block"),a.sortableScope.options.clone||(r.after(l),u.moveTo(a.sortableScope,a.index()+1))):E(o,n)}"sortable"===n.type&&n.accept(i,n)&&!function e(t,n){return!(!n||"HTML"===n.nodeName)&&(n.parentNode===t||e(t,n.parentNode))}(n.element[0],o[0])&&(x(o)||n.options.clone||(o[0].appendChild(l[0]),u.moveTo(n,n.modelValue.length)))}},b=function(e){var t,n;if(e.hasClass(D.placeHolderClass))return 0;for(t=e.children(),n=0;n<t.length;n+=1)if(angular.element(t[n]).hasClass(D.placeHolderClass))return n;return-1},x=function(e){return 0<=b(e)},f=function(e){T&&(e.preventDefault(),s&&(I(),u.apply(),i.sortableScope.$apply(function(){u.isSameParent()?u.isOrderChanged()&&i.callbacks.orderChanged(u.eventArgs()):i.callbacks.itemMoved(u.eventArgs())}),i.sortableScope.$apply(function(){i.callbacks.dragEnd(u.eventArgs())}),u=null),M())},g=function(e){T&&(e.preventDefault(),s&&(I(),i.sortableScope.$apply(function(){i.callbacks.dragCancel(u.eventArgs())}),u=null),M())},v=function(){S?i.sortableScope.options.longTouch?C?(r.bind("touchstart",A),r.bind("touchend",L),r.bind("touchmove",L)):r.bind("contextmenu",o):r.bind("touchstart",o):r.bind("mousedown",o)},w=function(){r.unbind("touchstart",A),r.unbind("touchend",L),r.unbind("touchmove",L),r.unbind("contextmenu",o),r.unbind("touchstart",o),r.unbind("mousedown",o)},A=function(e){$=j(function(){o(e)},500)},L=function(){j.cancel($)},P=function(e){27===e.keyCode&&g(e)},angular.element(q[0].body).bind("keydown",P),y=function(){angular.element(q).bind("touchmove",m),angular.element(q).bind("touchend",f),angular.element(q).bind("touchcancel",g),angular.element(q).bind("mousemove",m),angular.element(q).bind("mouseup",f)},M=function(){angular.element(q).unbind("touchend",f),angular.element(q).unbind("touchcancel",g),angular.element(q).unbind("touchmove",m),angular.element(q).unbind("mouseup",f),angular.element(q).unbind("mousemove",m)}}}}])}(),function(){"use strict";var e=angular.module("as.sortable");e.controller("as.sortable.sortableItemController",["$scope",function(e){(this.scope=e).sortableScope=null,e.modelValue=null,e.type="item",e.index=function(){return e.$index},e.itemData=function(){return e.sortableScope.modelValue[e.$index]}}]),e.directive("asSortableItem",["sortableConfig",function(i){return{require:["^asSortable","?ngModel"],restrict:"A",controller:"as.sortable.sortableItemController",link:function(e,t,n,o){var r=o[0],a=o[1];i.itemClass&&t.addClass(i.itemClass),e.sortableScope=r.scope,a?a.$render=function(){e.modelValue=a.$modelValue}:e.modelValue=r.scope.modelValue[e.$index],(e.element=t).data("_scope",e)}}}])}(),function(l,s){"use strict";var c;l.rails!==s&&l.error("jquery-ujs has already been loaded!");var e=l(document);l.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return l("meta[name=csrf-token]").attr("content")},csrfParam:function(){return l("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=c.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){l('form input[name="'+c.csrfParam()+'"]').val(c.csrfToken())},fire:function(e,t,n){t=l.Event(t);return e.trigger(t,n),!1!==t.result},confirm:function(e){return confirm(e)},ajax:function(e){return l.ajax(e)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==s&&!1!==e.data("remote")},handleRemote:function(o){var e,t,n;if(c.fire(o,"ajax:before")){var r,a=o.data("with-credentials")||null,i=o.data("type")||l.ajaxSettings&&l.ajaxSettings.dataType;return o.is("form")?(e=o.data("ujs:submit-button-formmethod")||o.attr("method"),t=o.data("ujs:submit-button-formaction")||o.attr("action"),n=l(o[0]).serializeArray(),(r=o.data("ujs:submit-button"))&&(n.push(r),o.data("ujs:submit-button",null)),o.data("ujs:submit-button-formmethod",null),o.data("ujs:submit-button-formaction",null)):o.is(c.inputChangeSelector)?(e=o.data("method"),t=o.data("url"),n=o.serialize(),o.data("params")&&(n=n+"&"+o.data("params"))):o.is(c.buttonClickSelector)?(e=o.data("method")||"get",t=o.data("url"),n=o.serialize(),o.data("params")&&(n=n+"&"+o.data("params"))):(e=o.data("method"),t=c.href(o),n=o.data("params")||null),i={type:e||"GET",data:n,dataType:i,beforeSend:function(e,t){if(t.dataType===s&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),!c.fire(o,"ajax:beforeSend",[e,t]))return!1;o.trigger("ajax:send",e)},success:function(e,t,n){o.trigger("ajax:success",[e,t,n])},complete:function(e,t){o.trigger("ajax:complete",[e,t])},error:function(e,t,n){o.trigger("ajax:error",[e,t,n])},crossDomain:c.isCrossDomain(t)},a&&(i.xhrFields={withCredentials:a}),t&&(i.url=t),c.ajax(i)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(e){return!0}},handleMethod:function(e){var t=c.href(e),n=e.data("method"),o=e.attr("target"),r=c.csrfToken(),a=c.csrfParam(),e=l('<form method="post" action="'+t+'"></form>'),n='<input name="_method" value="'+n+'" type="hidden" />';a===s||r===s||c.isCrossDomain(t)||(n+='<input name="'+a+'" value="'+r+'" type="hidden" />'),o&&e.attr("target",o),e.hide().append(n).appendTo("body"),e.submit()},formElements:function(e,t){return e.is("form")?l(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){c.formElements(e,c.disableSelector).each(function(){c.disableFormElement(l(this))})},disableFormElement:function(e){var t=e.is("button")?"html":"val",n=e.data("disable-with");n!==s&&(e.data("ujs:enable-with",e[t]()),e[t](n)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(e){c.formElements(e,c.enableSelector).each(function(){c.enableFormElement(l(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")!==s&&(e[t](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,n=e.data("confirm"),o=!1;if(!n)return!0;if(c.fire(e,"confirm")){try{o=c.confirm(n)}catch(e){(console.error||console.log).call(console,e.stack||e)}t=c.fire(e,"confirm:complete",[o])}return o&&t},blankInputs:function(e,t,n){var o,r,a,i=l(),t=t||"input,textarea",t=e.find(t),s={};return t.each(function(){(o=l(this)).is("input[type=radio]")?(a=o.attr("name"),s[a]||(0===e.find('input[type=radio]:checked[name="'+a+'"]').length&&(r=e.find('input[type=radio][name="'+a+'"]'),i=i.add(r)),s[a]=a)):(o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val())===n&&(i=i.add(o))}),!!i.length&&i},nonBlankInputs:function(e,t){return c.blankInputs(e,t,!0)},stopEverything:function(e){return l(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(e){var t=e.data("disable-with");t!==s&&(e.data("ujs:enable-with",e.html()),e.html(t)),e.bind("click.railsDisable",function(e){return c.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==s&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},c.fire(e,"rails:attachBindings")&&(l.ajaxPrefilter(function(e,t,n){e.crossDomain||c.CSRFProtection(n)}),l(window).on("pageshow.rails",function(){l(l.rails.enableSelector).each(function(){var e=l(this);e.data("ujs:disabled")&&l.rails.enableFormElement(e)}),l(l.rails.linkDisableSelector).each(function(){var e=l(this);e.data("ujs:disabled")&&l.rails.enableElement(e)})}),e.delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(l(this))}),e.delegate(c.buttonDisableSelector,"ajax:complete",function(){c.enableFormElement(l(this))}),e.delegate(c.linkClickSelector,"click.rails",function(e){var t=l(this),n=t.data("method"),o=t.data("params"),r=e.metaKey||e.ctrlKey;if(!c.allowAction(t))return c.stopEverything(e);if(!r&&t.is(c.linkDisableSelector)&&c.disableElement(t),c.isRemote(t)){if(r&&(!n||"GET"===n)&&!o)return!0;o=c.handleRemote(t);return!1===o?c.enableElement(t):o.fail(function(){c.enableElement(t)}),!1}return n?(c.handleMethod(t),!1):void 0}),e.delegate(c.buttonClickSelector,"click.rails",function(e){var t=l(this);if(!c.allowAction(t)||!c.isRemote(t))return c.stopEverything(e);t.is(c.buttonDisableSelector)&&c.disableFormElement(t);e=c.handleRemote(t);return!1===e?c.enableFormElement(t):e.fail(function(){c.enableFormElement(t)}),!1}),e.delegate(c.inputChangeSelector,"change.rails",function(e){var t=l(this);return c.allowAction(t)&&c.isRemote(t)?(c.handleRemote(t),!1):c.stopEverything(e)}),e.delegate(c.formSubmitSelector,"submit.rails",function(e){var t,n=l(this),o=c.isRemote(n);if(!c.allowAction(n))return c.stopEverything(e);if(n.attr("novalidate")===s)if(n.data("ujs:formnovalidate-button")===s){if((t=c.blankInputs(n,c.requiredInputSelector,!1))&&c.fire(n,"ajax:aborted:required",[t]))return c.stopEverything(e)}else n.data("ujs:formnovalidate-button",s);if(o){if(o=c.nonBlankInputs(n,c.fileInputSelector)){setTimeout(function(){c.disableFormElements(n)},13);o=c.fire(n,"ajax:aborted:file",[o]);return o||setTimeout(function(){c.enableFormElements(n)},13),o}return c.handleRemote(n),!1}setTimeout(function(){c.disableFormElements(n)},13)}),e.delegate(c.formInputClickSelector,"click.rails",function(e){var t=l(this);if(!c.allowAction(t))return c.stopEverything(e);var n=t.attr("name"),e=n?{name:n,value:t.val()}:null,n=t.closest("form");0===n.length&&(n=l("#"+t.attr("form"))),n.data("ujs:submit-button",e),n.data("ujs:formnovalidate-button",t.attr("formnovalidate")),n.data("ujs:submit-button-formaction",t.attr("formaction")),n.data("ujs:submit-button-formmethod",t.attr("formmethod"))}),e.delegate(c.formSubmitSelector,"ajax:send.rails",function(e){this===e.target&&c.disableFormElements(l(this))}),e.delegate(c.formSubmitSelector,"ajax:complete.rails",function(e){this===e.target&&c.enableFormElements(l(this))}),l(function(){c.refreshCSRFTokens()}))}(jQuery);var we_are_tincan=!1,old_background="",lup_enrollment_id=0,lup_course_id=0,lup_component_id=0,lup_scorm_token="",lup_debugger_on=!1,module_title_launched="",interactions_for_save="",learner_comments_for_save="",course_called_no_need_to_poll=!1,initial_suspend_data="",IS_WHITE_LABELLED_LAUNCH=!1,scorm_paired_view="",session_suspend_data="not_set",suspend_data_timeout=!1,lmsfinish_called=!1,session_time_timeout=!1,isScormInNewWindow=!1,childWindowObjParams=null,lesson_status_set="not_set",score_raw_set="not_set",session_time_set="not_set",scorm_fully_expanded=!1,saving=!1,isSafari=void 0!==window.safari,isOpera=-1<navigator.userAgent.indexOf("OP"),scorm_object_access=!1,scorm_object_url="",scorm_object_url_after_init="",scorm_object_url_after_launch="",scorm_channel="learnupon_scorm",sub_scorms_params=[],suspend_data_gap=!1;function getScormOrigin(e){e=document.getElementById(e);return e?new URL(e.src).origin:""}function LMSGetInnerScormUrl(e,t,n,o){return url="/scorm_api/enroll?slt="+o+"&portal_id="+e+"&course_id="+t+"&component_id="+n,scorm_url="",jQuery.ajax({url:url,async:!1,cache:!1,success:function(e){if(!1===e.enrollment)throw new Error("Unable to get required enrollment_id from endpoint: "+url);scorm_url=launch_scorm_course(n,e.enrollment,!0)},error:function(e,t,n){scorm_url="LMSGetInnerScormUrl#error_generating_valid_scorm_url"}}),scorm_url}function _preventWindowFromClosing(){(isSafari||isOpera)&&(window.onbeforeunload=function(e){return e.preventDefault(),e.returnValue="",showSaveToolTip(),""})}function _allowWindowUnload(){window.onbeforeunload=function(){}}window.addEventListener("message",function(e){if(e.origin===getScormOrigin("scorm_iframe"))try{var t=JSON.parse(e.data);t.channel===scorm_channel&&e.source.postMessage(JSON.stringify({channel:scorm_channel,url:LMSGetInnerScormUrl(t.portal_id,t.course_id,t.component_id,t.slt)}),getScormOrigin("scorm_iframe"))}catch(e){SyntaxError}});var this_launch_is_new_window=!1;function show_saving_dialog(){window.close=function(){},jQuery("#launch_scorm_window_wrap").hide(),_deactivateFocusTrap(),jQuery(".scorm-overlay").hide(),reloadScrollBars(),weCalledCloseCourse(),_allowWindowUnload(),window.spinnerService&&window.spinnerService.showGroup("luSpinnerGlobal");var e=jQuery("body"),e=angular.element(e).scope();e&&e.$digest()}function scorm_course_was_closed(e){"function"==typeof window.scormOrTinCanExitDetected?lup_enrollment_id&&0!=parseInt(lup_enrollment_id)&&window.scormOrTinCanExitDetected(lup_enrollment_id):"function"==typeof window.reloadCourseContent&&window.reloadCourseContent(),jQuery("body").removeClass("hide-body-scroll")}function init_default_settings_for_lu_launch(){session_suspend_data=initial_suspend_data=interactions_for_save="",isScormInNewWindow=this_launch_is_new_window=we_are_tincan=!1,_preventWindowFromClosing(),session_time_set=score_raw_set=lesson_status_set="not_set",window.spinnerService.showGroup("luSpinnerGlobal")}function forceCloseOurSCORMWindow(){try{scorm_course_window&&scorm_course_window.close()}catch(e){}}function willBeReleased(e){window.luPopover.notify("",I18n.t("courses.this_module_will_be_released",{time:e}))}function launch_after_initiation(t,n,o,r,a,i){var e=t.overwrite_previous_attempt,s=t.only_overwrite_if_better,l=t.has_previously_completed,c=t.released,u=t.release_at;if(!c)return window.spinnerService.hideGroup("luSpinnerGlobal"),willBeReleased(u),!1;if(0===n&&(n=t.component_id),0<jQuery("#max_next_prev_seq").length&&(consider_current_window_launch=1),l&&e){e=I18n.t("components.are_you_sure_you_want_re_launch_previous_attempt_overwritten");s&&(e=I18n.t("components.are_you_sure_you_want_re_launch_previous_attempt_overwritten_if_better")),forceCloseOurSCORMWindow(),window.luPopover.confirm(I18n.t("lup.confirm"),e).then(function(e){return a?setScormUrlAfterInit(launch_sub_scorm(t,n,o,r)):void launch_wl_course(t,n,o,r,i)},function(e){launch_fail_handler()})}else{if(a)return setScormUrlAfterInit(launch_sub_scorm(t,n,o,r));launch_wl_course(t,n,o,r,i)}return!1}function setScormUrlAfterInit(e){return scorm_object_url_after_init=e}function launch_tincan_course(t,n,o,r){init_default_settings_for_lu_launch(),we_are_tincan=!0;var a=0;"undefined"!=typeof current_course_id&&(a=current_course_id,n=0);var e="/enrollments/initiate_tincan_launch/0.json?enroll_id="+n+"&course_id="+a+"&component_id="+t;0<scorm_paired_view.length&&(e="/enrollments/initiate_tincan_launch/0.json?auth_token="+scorm_paired_view+"&enroll_id="+n+"&course_id="+a+"&component_id="+t),jQuery.ajax({url:e,async:!0,cache:!1,success:function(e){launch_after_initiation(e,t,n,a,!1,r),o&&r&&startTinCanCompletionTracking(o,n,t)},error:function(e,t,n){launch_fail_handler()}})}function launch_scorm_course(t,n,o){init_default_settings_for_lu_launch();var r=0;"undefined"!=typeof current_course_id&&(r=current_course_id,n=0);var e="/enrollments/initiate_scorm_launch/0.json?enroll_id="+n+"&course_id="+r+"&component_id="+t;if(0<scorm_paired_view.length&&(e="/enrollments/initiate_scorm_launch/0.json?auth_token="+scorm_paired_view+"&enroll_id="+n+"&course_id="+r+"&component_id="+t),jQuery.ajax({url:e,async:!o,cache:!1,success:function(e){o?setScormUrlAfterLaunch(launch_after_initiation(e,t,n,r,o,!1)):launch_after_initiation(e,t,n,r,o,!1)},error:function(e,t,n){launch_fail_handler(),409==e.status&&window.luPopover.notify(I18n.t("lup.scorm_single_session_lock.modal.title"),I18n.t("lup.scorm_single_session_lock.modal.content"))}}),o)return scorm_object_url_after_launch}function setScormUrlAfterLaunch(e){scorm_object_url_after_launch=e}function is_white_label_launch(){return-1==document.location.protocol.indexOf("https")&&-1<document.location.href.indexOf("."+CONFIG.domainName)?(document.domain=CONFIG.domainName,0):1}function weCalledCloseCourse(){course_called_no_need_to_poll&&!we_are_tincan||jQuery("#scorm_iframe").attr("src",jQuery("#scorm_iframe").attr("src")+"#dialog_closed"),we_are_tincan&&tin_can_closed(),showIOSSpinner()}function courseCalledLMSFinish(){course_called_no_need_to_poll=!0,show_saving_dialog()}function _doDigest(){var e=jQuery("body"),e=angular.element(e).scope();e&&e.$digest()}function lmsFinishSaved(e){window.spinnerService&&window.spinnerService.hideGroup("luSpinnerGlobal"),_doDigest(),scorm_course_was_closed(e)}function attachReceiveMessage(t){try{t.attachEvent?t.attachEvent("onmessage",receiveMessage):t.addEventListener("message",receiveMessage,!0)}catch(e){try{t.attachEvent("onmessage",receiveMessage)}catch(e){}}}function window_close_caught(){jQuery(".scorm-overlay").hide(),_deactivateFocusTrap(),jQuery("#launch_scorm_window_wrap").hide(),reloadScrollBars(),weCalledCloseCourse()}function receiveMessage(e){"courseCalledLMSFinish"==e.data?courseCalledLMSFinish():"lmsFinishSaved"==e.data?lmsFinishSaved(null):-1<String(e.data).indexOf("addreview_")?add_review(splitOnID(e.data)):-1<String(e.data).indexOf("window_close_caught")?(window_close_caught(),callIOSClose()):-1<String(e.data).indexOf("showSaveToolTip")?showSaveToolTip():"lu_LMSFinish"==e.data?lu_LMSFinish(""):"ready_for_suspend_data"==e.data?ready_for_suspend_data():-1<String(e.data).indexOf("LUPINT_")?interactions_for_save=(interactions_for_save=e.data).replace("LUPINT_",""):-1<String(e.data).indexOf("LUPLCOMS_")?learner_comments_for_save=(learner_comments_for_save=e.data).replace("LUPLCOMS_",""):-1<String(e.data).indexOf("LUPSUSP_")?save_suspend_data(e.data.replace("LUPSUSP_","")):-1<String(e.data).indexOf("LUPLESSONSTATUS_")?save_lesson_status(e.data.replace("LUPLESSONSTATUS_","")):-1<String(e.data).indexOf("LUPSCORERAW_")?save_score_raw(e.data.replace("LUPSCORERAW_","")):-1<String(e.data).indexOf("LUPSESSIONTIME_")&&save_session_time(e.data.replace("LUPSESSIONTIME_",""))}window.callbackChildWindowParams=function(e){childWindowObjParams=e},attachReceiveMessage(window);var scorm_course_window=null;function launch_course_in_new_window(e,t,n,o,r){var a;null!=scorm_course_window&&!scorm_course_window.closed||get_tincan_popup_ready(),!scorm_course_window||scorm_course_window.closed||void 0===scorm_course_window.closed?(forceCloseOurSCORMWindow(),window.luPopover.notify("",I18n.t("layouts.popups_blocked")+"<br/><br/>"+I18n.t("layouts.popup_click_here")),jQuery(document).on("click",".popupblocked_link",function(){null!=scorm_course_window&&!scorm_course_window.closed||get_tincan_popup_ready(),launch_course_in_new_window(e,t,n,o,r)})):(scorm_course_window.resizeTo(r,o),scorm_course_window.document.location.href=t,scorm_course_window.focus(),window.spinnerService.hideGroup("luSpinnerGlobal"),a=setInterval(function(){scorm_course_window.closed&&(tin_can_closed(),clearInterval(a))},500))}var scorm_new_window=null;function launch_scorm_in_new_window_ie_11(e,t,n,o,r){var a,i;null!=scorm_new_window&&!scorm_new_window.closed||get_tincan_popup_ready(),!scorm_new_window||scorm_new_window.closed||void 0===scorm_new_window.closed?(forceCloseOurSCORMWindow(),window.luPopover.notify("",I18n.t("layouts.popups_blocked")+"<br/><br/>"+I18n.t("layouts.popup_click_here")),jQuery(document).on("click",".popupblocked_link",function(){null!=scorm_new_window&&!scorm_new_window.closed||get_tincan_popup_ready(),launch_scorm_in_new_window_ie_11(e,t,n,o,r)})):(scorm_new_window.resizeTo(r,o),a=document.location.protocol+"//"+window.location.host+"/scorm_api/scorm-new-window?",a+="scorm_link="+encodeURIComponent(t),scorm_new_window.document.location.href=a,scorm_new_window.focus(),window.spinnerService.hideGroup("luSpinnerGlobal"),i=setInterval(function(){var e=scorm_new_window.document.querySelector("#scorm-content-title");e&&""===e.innerHTML&&(e.innerHTML=n),scorm_new_window.closed&&(lu_LMSFinishForWindowClose(),clearInterval(i))},500))}function tin_can_closed(){scorm_course_was_closed(!1),0<jQuery("#scorm_iframe").length&&setTimeout(function(){jQuery("#scorm_iframe").attr("src","about:blank")},1e3)}function _activateFocusTrap(){var e=jQuery("#launch_scorm_window_wrap");window.focusTrap&&(window.scormFocusTrap=window.focusTrap.createFocusTrap(e[0]),window.scormFocusTrap.activate())}function _deactivateFocusTrap(){window.scormFocusTrap&&window.scormFocusTrap.deactivate()}function setup_course_window(e,t,n){var o=e.scorm_popup_window_height,r=e.scorm_popup_window_width;if(is_it_native()?(o=jQuery(window).height(),r=jQuery(window).width(),scorm_fully_expanded=!0):(o||(scorm_fully_expanded=!0,o=null!=e.lup_tincanData_id?jQuery(window).height():"100%"),r||(scorm_fully_expanded=!0,r=n&&0<jQuery(".scorm-redesign").length?jQuery(".scorm-redesign").width():n?jQuery("#module-view-wrapper").width():null!=e.lup_tincanData_id?jQuery(window).width():"100%")),window.scrollTo(0,0),"1"==e.alwlaun)if(module_title_launched=e.component_title,this_launch_is_new_window=e.launch_scorm_in_new_window,e.launch_scorm_in_new_window_ie11&&(isIE()||isIeOrEdge())&&(isScormInNewWindow=!!e.launch_scorm_in_new_window_ie11),n)jQuery("#scorm-content-section").html('<iframe id="scorm_iframe" name="scorm_iframe" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="yes" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" oallowfullscreen="true" allow="microphone *; autoplay *; encrypted-media *; clipboard-write;" />'),jQuery("#scorm_iframe").attr("src",t),jQuery("#scorm-content-section").css("height",o),jQuery("#scorm-content-section").css("width",r),window.spinnerService.hideGroup("luSpinnerGlobal",1);else if(e.launch_scorm_in_new_window&&!is_it_native())launch_course_in_new_window(e,t,module_title_launched,o,r);else{if(forceCloseOurSCORMWindow(),isScormInNewWindow)return void launch_scorm_in_new_window_ie_11(e,t,module_title_launched,o,r);is_it_native()?jQuery("#scorm-content").html('<iframe id="scorm_iframe" name="scorm_iframe" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="no" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" oallowfullscreen="true" allow="microphone *; autoplay *; encrypted-media *; clipboard-write;" />'):jQuery("#scorm-content").html('<iframe id="scorm_iframe" name="scorm_iframe" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="yes" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" oallowfullscreen="true" allow="microphone *; autoplay *; encrypted-media *; clipboard-write;" />'),jQuery(".scorm-overlay").show(),jQuery("#scorm-content-title").html(module_title_launched),jQuery("#launch_scorm_window_wrap").show(),jQuery("#launch_scorm_window_wrap").closest("body").addClass("hide-body-scroll"),window.spinnerService.hideGroup("luSpinnerGlobal"),jQuery("#launch_scorm_window_wrap").css("height",o),jQuery("#launch_scorm_window_wrap").css("width",r),jQuery("#scorm_close_button, #scorm_close_bottom_button").bind("click",function(){jQuery(".scorm-overlay").hide(),_deactivateFocusTrap(),jQuery("#launch_scorm_window_wrap").hide(),reloadScrollBars(),weCalledCloseCourse()}),jQuery("#scorm_expand_button").bind("click",function(){scorm_fully_expanded?(scorm_fully_expanded=!1,jQuery("#launch_scorm_window_wrap").css({right:"0",left:"0"}),o==jQuery(window).height()&&(o="400"),r==jQuery(window).width()&&(r="60%"),jQuery("#launch_scorm_window_wrap").css("height",o),jQuery("#launch_scorm_window_wrap").css("width",r)):(scorm_fully_expanded=!0,jQuery("#launch_scorm_window_wrap").css({top:"0",left:"0",right:"0"}),jQuery("#launch_scorm_window_wrap").css("height",jQuery(window).height()),jQuery("#launch_scorm_window_wrap").css("width",jQuery(window).width()))}),unloadScrollBars(),jQuery("#scorm_iframe").attr("src",t),_preventWindowFromClosing(),_activateFocusTrap();try{window.close=function(){window_close_caught()}}catch(e){}}else launch_fail_handler(),forceCloseOurSCORMWindow(),window.luPopover.notify("",I18n.t("components.launched_too_many_times_already"))}function launch_wl_tincan_course(e,t,n,o,r){o="/tincan_api/launch.json?slt="+e.scorm_token+"&comp_id="+t+"&enroll_id="+n+"&course_id="+o;jQuery.ajax({url:o,async:!0,cache:!1,success:function(e){var t=getTinCanLauncherUrl(e,document.location.protocol),n=t.url;n+=t.separator+"endpoint="+encodeURIComponent(document.location.protocol+"//"+e.scorm_apiendpoint),n+="&actor="+encodeURIComponent('{"name": ['+JSON.stringify(e.student_name)+'], "mbox": ["mailto:'+e.student_id+'"]}'),n+="&auth="+encodeURIComponent(e.scorm_token),n+="&activity_id="+encodeURIComponent(e.identifier),n+="&registration="+e.registration,n+="&enroll_id="+e.enroll_id,n+="&course_id="+e.course_id,n+="&component_id="+e.component_id,n+="&lup_tincandata_id="+e.tindata_id,n+="&slt="+encodeURIComponent(e.scorm_token),n+="&lv="+e.launcher_version,0<scorm_paired_view.length&&(n+="&auth_token="+encodeURIComponent(scorm_paired_view)),lup_enrollment_id=e.enroll_id?e.enroll_id:0,lup_course_id=e.course_id,lup_component_id=e.component_id,lup_launch_mode=e.credit_mode,lup_scorm_token=e.scorm_token,lup_scormdata_id=e.lup_scormdata_id,setup_course_window(e,n,r)},error:function(e,t,n){launch_fail_handler()}})}function launch_sub_scorm(e,t,n,o){if(course_called_no_need_to_poll=!1,session_time_set=score_raw_set=lesson_status_set="not_set",!we_are_tincan){var r="/scorm_api/launch.json?slt="+e.scorm_token+"&comp_id="+t+"&enroll_id="+n+"&course_id="+o;return jQuery.ajax({url:r,async:!1,cache:!1,success:function(e){var t=document.location.protocol+"//"+e.scorm_content_location+"/lu_launcher.html?";t+="api="+e.scorm_apiendpoint,t+="&ssl="+e.use_ssl,t+="&slt="+e.scorm_token,t+="&p="+encodeURIComponent(e.parameters),t+="&cm="+e.credit_mode,t+="&e="+e.enroll_id,t+="&cp="+e.component_id,t+="&cr="+e.course_id,t+="&u="+encodeURIComponent(e.content_href),t+="&wl="+is_white_label_launch(),t+="&nap="+is_it_native(),t+="&sv="+e.scorm_version,t+="&chsc="+!0,t+="&lv="+e.launcher_version,IS_WHITE_LABELLED_LAUNCH=-1!=navigator.appVersion.indexOf("MSIE 7.")?0:parseInt(is_white_label_launch()),t+="&ms="+e.mastery_score,t+="&sdid="+e.lup_scormdata_id,0<e.max_time_allowed.length&&(t+="&max_time_allowed="+encodeURIComponent(e.max_time_allowed)),0<e.time_limit_action.length&&(t+="&time_limit_action="+encodeURIComponent(e.time_limit_action)),0<e.lesson_location.length&&(t+="&lesson_location="+encodeURIComponent(e.lesson_location)),0<e.lesson_mode.length&&(t+="&lesson_mode="+e.lesson_mode),0<e.entry.length&&(t+="&entry="+e.entry),0<e.lesson_status.length&&(t+="&lesson_status="+e.lesson_status),0<e.score_raw.length&&(t+="&score_raw="+e.score_raw),0<e.score_max.length&&(t+="&score_max="+e.score_max),0<e.score_min.length&&(t+="&score_min="+e.score_min),0<e.exzit_statuz.length&&(t+="&exit_status="+e.exzit_statuz),0<e.total_time.length&&(t+="&total_time="+encodeURIComponent(e.total_time)),0<e.comments.length&&(t+="&comments="+encodeURIComponent(e.comments)),0<e.comments_from_lms.length&&(t+="&comments_from_lms="+encodeURIComponent(e.comments_from_lms)),t+="&student_pref_audio="+encodeURIComponent(e.student_pref_audio),t+="&student_pref_text="+encodeURIComponent(e.student_pref_text),t+="&student_pref_speed="+encodeURIComponent(e.student_pref_speed),t+="&student_pref_lang="+encodeURIComponent(e.student_pref_lang),0<e.suspend_data.length&&save_sub_scorm_suspend_data(e.suspend_data,e.lup_scormdata_id),0<e.data_from_lms.length&&(t+="&data_from_lms="+encodeURIComponent(e.data_from_lms)),0<e.student_id.length&&(t+="&student_id="+encodeURIComponent(e.student_id)),0<e.student_name.length&&(t+="&student_name="+encodeURIComponent(e.student_name)),t+="&hzsc="+e.h_scale,t+="&vrsc="+e.v_scale,lup_debugger_on&&(t+="&d=1"),sub_scorms_params.push({enrollment_id:e.enroll_id,course_id:e.course_id,component_id:e.component_id,scormdata_id:e.lup_scormdata_id,credit_mode:lup_launch_mode,slt:lup_scorm_token}),e.scorm_popup_window_width&&"null"!=e.scorm_popup_window_width&&(t+="&w="+e.scorm_popup_window_width),e.scorm_popup_window_height&&"null"!=e.scorm_popup_window_height&&(t+="&h="+e.scorm_popup_window_height),getSubScormContentUrl(t)},error:function(e,t,n){launch_fail_handler()}}),scorm_object_url}launch_wl_tincan_course(e,t,n,o,!1)}function getSubScormContentUrl(e){scorm_object_url=e}function launch_wl_course(e,t,n,o,r){course_called_no_need_to_poll=!1,session_time_set=score_raw_set=lesson_status_set="not_set",we_are_tincan?launch_wl_tincan_course(e,t,n,o,r):(o="/scorm_api/launch.json?slt="+e.scorm_token+"&comp_id="+t+"&enroll_id="+n+"&course_id="+o,jQuery.ajax({url:o,async:!0,cache:!1,success:function(e){var t=document.location.protocol+"//"+e.scorm_content_location+"/lu_launcher.html?";t+="api="+e.scorm_apiendpoint,t+="&ssl="+e.use_ssl,t+="&slt="+e.scorm_token,t+="&p="+encodeURIComponent(e.parameters),t+="&cm="+e.credit_mode,t+="&e="+e.enroll_id,t+="&cp="+e.component_id,t+="&cr="+e.course_id,t+="&u="+encodeURIComponent(e.content_href),t+="&wl="+is_white_label_launch(),t+="&nap="+is_it_native(),t+="&sv="+e.scorm_version,t+="&lv="+e.launcher_version,IS_WHITE_LABELLED_LAUNCH=-1!=navigator.appVersion.indexOf("MSIE 7.")?0:parseInt(is_white_label_launch()),t+="&ms="+e.mastery_score,t+="&sdid="+e.lup_scormdata_id,0<e.max_time_allowed.length&&(t+="&max_time_allowed="+encodeURIComponent(e.max_time_allowed)),0<e.time_limit_action.length&&(t+="&time_limit_action="+encodeURIComponent(e.time_limit_action)),0<e.lesson_location.length&&(t+="&lesson_location="+encodeURIComponent(e.lesson_location)),0<e.lesson_mode.length&&(t+="&lesson_mode="+e.lesson_mode),0<e.entry.length&&(t+="&entry="+e.entry),0<e.lesson_status.length&&(t+="&lesson_status="+e.lesson_status),0<e.score_raw.length&&(t+="&score_raw="+e.score_raw),0<e.score_max.length&&(t+="&score_max="+e.score_max),0<e.score_min.length&&(t+="&score_min="+e.score_min),0<e.exzit_statuz.length&&(t+="&exit_status="+e.exzit_statuz),0<e.total_time.length&&(t+="&total_time="+encodeURIComponent(e.total_time)),0<e.comments.length&&(t+="&comments="+encodeURIComponent(e.comments)),0<e.comments_from_lms.length&&(t+="&comments_from_lms="+encodeURIComponent(e.comments_from_lms)),t+="&student_pref_audio="+encodeURIComponent(e.student_pref_audio),t+="&student_pref_text="+encodeURIComponent(e.student_pref_text),t+="&student_pref_speed="+encodeURIComponent(e.student_pref_speed),t+="&student_pref_lang="+encodeURIComponent(e.student_pref_lang),0<e.suspend_data.length&&(initial_suspend_data=e.suspend_data,session_suspend_data=e.suspend_data),0<e.data_from_lms.length&&(t+="&data_from_lms="+encodeURIComponent(e.data_from_lms)),0<e.student_id.length&&(t+="&student_id="+encodeURIComponent(e.student_id)),0<e.student_name.length&&(t+="&student_name="+encodeURIComponent(e.student_name)),t+="&hzsc="+e.h_scale,t+="&vrsc="+e.v_scale,lup_debugger_on&&(t+="&d=1"),lup_enrollment_id=e.enroll_id,lup_course_id=e.course_id,lup_component_id=e.component_id,lup_launch_mode=e.credit_mode,lup_scorm_token=e.scorm_token,lup_scormdata_id=e.lup_scormdata_id,suspend_data_gap=e.suspend_data_gap_enabled,sub_scorms_params=[],e.scorm_popup_window_width&&"null"!=e.scorm_popup_window_width&&(t+="&w="+e.scorm_popup_window_width),e.scorm_popup_window_height&&"null"!=e.scorm_popup_window_height&&(t+="&h="+e.scorm_popup_window_height),setup_course_window(e,t,!1)},error:function(e,t,n){launch_fail_handler()}}))}function launch_fail_handler(){window.spinnerService.hideGroup("luSpinnerGlobal"),_doDigest(),jQuery("#scorm_iframe").attr("src",""),jQuery(".scorm-overlay").hide(),_deactivateFocusTrap(),jQuery("#launch_scorm_window_wrap").hide(),reloadScrollBars(),weCalledCloseCourse(),callIOSClose()}function showSaveToolTip(){var e=jQuery(".scorm-info-message"),t=jQuery(".scorm-launch-window-overlay");e.fadeIn(),t.fadeIn(),jQuery(document).bind("click","#close-scorm-notice",function(){e.fadeOut(),t.fadeOut()})}function ipad_viewer(){return null!=navigator.userAgent.match(/iPad/i)}function lu_LMSFinish(){suspend_data_timeout&&clearTimeout(suspend_data_timeout),session_time_timeout&&clearTimeout(session_time_timeout),saving=!0,sub_scorms_params.forEach(function(e){jQuery.ajax({url:"/scorm_api/lmsfinish.js",data:e,type:"POST",dataType:"json",cache:!1,async:!0})}),showIOSSpinner(),jQuery.ajax({url:"/scorm_api/lmsfinish.js",data:{enrollment_id:lup_enrollment_id,course_id:lup_course_id,component_id:lup_component_id,credit_mode:lup_launch_mode,slt:lup_scorm_token,interactions:interactions_for_save,learner_comments:learner_comments_for_save,lesson_status_set:lesson_status_set,score_raw_set:score_raw_set,suspend_data:session_suspend_data,session_time_set:session_time_set},type:"POST",dataType:"json",cache:!1,async:!0,success:function(e){callIOSClose(),isIE()&&isIE()<11&&-1<window.location.href.indexOf("/enrollments/")||ipad_viewer()&&-1<window.location.href.indexOf("/enrollments/")?location.reload(!0):(jQuery("#scorm_iframe").remove(),lmsFinishSaved(e.forbindden_from_scorm))},error:function(e){callIOSClose(),403!=e.status&&401!=e.status||(document.location.href="/users/sign_in")}}),lmsfinish_called=!(suspend_data_timeout=!1)}function lu_LMSFinishForWindowClose(){showIOSSpinner(),saving=!0,jQuery.ajax({url:"/scorm_api/lmsfinish.js",data:{enrollment_id:childWindowObjParams.enrollment_id,course_id:childWindowObjParams.course_id,component_id:childWindowObjParams.component_id,credit_mode:childWindowObjParams.credit_mode,slt:childWindowObjParams.slt,interactions:childWindowObjParams.interactions,learner_comments:childWindowObjParams.learner_comments,lesson_status_set:childWindowObjParams.lesson_status_set,score_raw_set:childWindowObjParams.score_raw_set,suspend_data:childWindowObjParams.suspend_data,session_time_set:childWindowObjParams.session_time_set},type:"POST",dataType:"json",cache:!1,async:!1,success:function(e){callIOSClose(),isIE()&&isIE()<11&&-1<window.location.href.indexOf("/enrollments/")||ipad_viewer()&&-1<window.location.href.indexOf("/enrollments/")?location.reload(!0):lmsFinishSaved(e.forbindden_from_scorm)},error:function(e){callIOSClose(),403!==e.status&&401!==e.status||(document.location.href="/users/sign_in")}}),childWindowObjParams=null}function isIE(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}function isIeOrEdge(){return!!window.document.documentMode||/Edg/.test(navigator.userAgent)}function save_suspend_data(e){session_suspend_data=e,suspend_data_timeout||(!0===(e=12e4)?e=2e3:!0===lmsfinish_called&&(lmsfinish_called=!1,e=200),suspend_data_timeout=setTimeout(function(){jQuery.ajax({url:"/scorm_api/lmssetvalue",cache:!1,success:function(){suspend_data_timeout=!1},data:{attr:"suspend_data",value_to_be_set:session_suspend_data,scormdata_id:lup_scormdata_id,slt:lup_scorm_token},async:!0,type:"POST"})},e))}function save_sub_scorm_suspend_data(e,t){jQuery.ajax({url:"/scorm_api/lmssetvalue",cache:!1,success:function(){},data:{attr:"suspend_data",value_to_be_set:e,scormdata_id:t,slt:lup_scorm_token},async:!0,type:"POST"})}function set_interactions(e){interactions_for_save=e}function set_learner_comments(e){learner_comments_for_save=e}function ready_for_suspend_data(){var e=window.frames.scorm_iframe;0===IS_WHITE_LABELLED_LAUNCH?e.set_suspend_data(initial_suspend_data):e.postMessage("set_suspend_data_"+initial_suspend_data,"*")}function save_lesson_status(e){lesson_status_set=e}function save_score_raw(e){score_raw_set=e}function save_session_time(e){session_time_set=e,session_time_timeout=session_time_timeout||setTimeout(function(){jQuery.ajax({url:"/scorm_api/lmssetvalue",cache:!1,success:function(){session_time_timeout=!1},data:{attr:"session_time",value_to_be_set:session_time_set,scormdata_id:lup_scormdata_id,slt:lup_scorm_token},async:!0,type:"POST"})},12e4)}function is_it_native(){return 0<scorm_paired_view.length?1:0}function is_it_android_related(){try{return null!=navigator.userAgent.match(/android/i)}catch(e){return!1}}function is_it_ios_related(){try{return null!=navigator.userAgent.match(/iPad/i)||null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/iPod/i)}catch(e){return!1}}function resize_scorm_window_for_screen(e){try{if(is_it_android_related())return;!e&&1!=is_it_native()||setTimeout(function(){jQuery(".ui-dialog-content:visible").each(function(){var e=jQuery(this).data("dialog");window.scrollTo(0,0),e.option("position",e.options.position),e.option("height",jQuery(window).height()),e.option("width",jQuery(window).width())})},400)}catch(e){}}function get_tincan_popup_ready(){scorm_new_window=scorm_course_window=null;try{window.spinnerService.hideGroup("luSpinnerGlobal")}catch(e){}we_are_tincan||!isScormInNewWindow?is_it_native()||this_launch_is_new_window&&(scorm_course_window=window.open("about:blank","_blank","toolbar=0,location=0,menubar=0,height=0px,width=0px,resizable=yes")):scorm_new_window=window.open("about:blank","_blank","toolbar=0,location=0,menubar=0,height=0px,width=0px,resizable=yes")}function reloadScrollBars(){try{document.documentElement.style.overflow="auto",document.body.scroll="yes"}catch(e){}}function unloadScrollBars(){try{document.documentElement.style.overflow="hidden",document.body.scroll="no"}catch(e){}}var showIOSSpinner=_.throttle(function(){"undefined"!=typeof webkit&&webkit.messageHandlers&&webkit.messageHandlers.webViewScorm&&(webkit.messageHandlers.webViewScorm.postMessage("show_spinner"),setTimeout(function(){saving||callIOSClose()},3e3))},6e3);function callIOSClose(){"undefined"!=typeof webkit&&webkit.messageHandlers&&webkit.messageHandlers.webViewScorm&&webkit.messageHandlers.webViewScorm.postMessage("scorm_closed")}function startTinCanCompletionTracking(e,t,n){n={typeId:26,tracking_id:t&&0!=t?"e_"+t:"c_"+n};e.initiateTinCanTrackingJob(n)}function getTinCanLauncherUrl(e,t){var n="?";if("number"==typeof e.launcher_version&&parseInt(e.launcher_version)===e.launcher_version){if(!e.scorm_content_location||!e.content_href||!e.scorm_apiendpoint)return;var o=t+"//"+e.scorm_content_location+"/lu_launcher.html"+n+("u="+encodeURIComponent(e.content_href))+"&"+("api="+encodeURIComponent(e.scorm_apiendpoint.split("/")[0])),n="&"}else{if(!e.scorm_content_location||!e.content_href)return;o=t+"//"+e.scorm_content_location+"/"+e.content_href}return{url:o,separator:n}}function stripeTokenHandler(e,t){var n=document.getElementById(t),t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","stripeToken"),t.setAttribute("value",e.id),n.appendChild(t)}function handleStripeCardPayment(e){stripe.handleCardPayment(e).then(function(e){e.error,$("#payment-form").trigger("submit.rails")})}function handleStripePlanChange(e,o){stripe.handleCardPayment(e).then(function(e){var t=document.getElementById("change-plan-form"),n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","stripe_invoice"),n.setAttribute("value",o),t.appendChild(n),e.error,$("#change-plan-form").trigger("submit.rails")})}function handleStripeAdditionalAuthentication(e,t){displayPaymentInfo(!0),stripe.handleCardPayment(e).then(function(e){e.error?$.ajax({url:"/billings/invoice_failed.js?invoice_id="+t,cache:!1,type:"post"}):$.ajax({url:"/billings/confirm_invoice.js?invoice_id="+t,cache:!1,type:"post"})})}jQuery(function(n){var o,e,t;"undefined"!=typeof stripe&&0!==n("#card-number-element").length&&(t=stripe.elements({fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Roboto:400,500,500i,700,700i,900,900i"}]}),o=t.create("cardNumber",{style:stripeStyles,classes:stripeElementClasses}),e=t.create("cardExpiry",{style:stripeStyles,classes:stripeElementClasses}),t=t.create("cardCvc",{style:stripeStyles,classes:stripeElementClasses}),o.mount("#card-number-element"),e.mount("#card-expiry-element"),t.mount("#card-cvc-element")),n("#payment-form").submit(function(e){n(".payment-errors").removeClass("alert"),n(".payment-errors").removeClass("alert-danger"),n(".payment-errors").removeClass("active"),n(".payment-errors").text(""),is_eu_country(n("#billing_country_code").val())||n("#billing_vat_number").val("");n(this);var t=I18n.t("billing.before_continuing",{plan_name:I18n.t("billing.plan_"+n("#chosen_plan").val())});return n("#accept_terms_and_cons").prop("checked")?window.luPopover.confirm(I18n.t("lup.confirm"),t).then(function(e){n("#payment_submit_button").hide(),n("#payment_submit_button_blurb").show(),n("#vat_signup_cost").hide(),stripe.createToken(o).then(function(e){e.error?(n(".payment-errors").append(e.error.message),n(".payment-errors").addClass("alert alert-danger active"),n("#payment_submit_button").show(),n("#payment_submit_button_blurb").hide(),determine_show_hide_vat_pricings()):(e.token,stripeTokenHandler(e.token,"payment-form"),n("#payment-form").trigger("submit.rails"))})}):window.luPopover.notify("",I18n.t("billing.please_accept_terms")),!1})}),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(i,s,l){var c=function(t,e,n){n=n||{};var o=i.defer(),r=c[n.animation?"animationEndEventName":"transitionEndEventName"],a=function(e){l.$apply(function(){t.unbind(r,a),o.resolve(t)})};return r&&t.bind(r,a),s(function(){angular.isString(e)?t.addClass(e):angular.isFunction(e)?e(t):angular.isObject(e)&&t.css(e),r||o.resolve(t)}),o.promise.cancel=function(){r&&t.unbind(r,a),o.reject("Transition cancelled")},o.promise},n=document.createElement("trans");function e(e){for(var t in e)if(void 0!==n.style[t])return e[t]}return c.transitionEndEventName=e({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}),c.animationEndEventName=e({WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"}),c}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(l){return{link:function(e,o,t){var r,n=!0;function a(e){var t=l(o,e);return r&&r.cancel(),(r=t).then(n,n),t;function n(){r===t&&(r=void 0)}}function i(){o.removeClass("collapsing"),o.addClass("collapse in"),o.css({height:"auto"})}function s(){o.removeClass("collapsing"),o.addClass("collapse")}e.$watch(t.collapse,function(e){e?n?(n=!1,s(),o.css({height:0})):(o.css({height:o[0].scrollHeight+"px"}),o[0].offsetWidth,o.removeClass("collapse in").addClass("collapsing"),a({height:0}).then(s)):n?(n=!1,i()):(o.removeClass("collapse").addClass("collapsing"),a({height:o[0].scrollHeight+"px"}).then(i))})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,n,o){this.groups=[],this.closeOthers=function(t){(angular.isDefined(n.closeOthers)?e.$eval(n.closeOthers):o.closeOthers)&&angular.forEach(this.groups,function(e){e!==t&&(e.isOpen=!1)})},this.addGroup=function(t){var n=this;this.groups.push(t),t.$on("$destroy",function(e){n.removeGroup(t)})},this.removeGroup=function(e){e=this.groups.indexOf(e);-1!==e&&this.groups.splice(e,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"/tc/ui-bootstrap-templates/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"/tc/ui-bootstrap-templates/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(t,e,n,o){o.addGroup(t),t.$watch("isOpen",function(e){e&&o.closeOthers(t)}),t.toggleOpen=function(){t.isDisabled||(t.isOpen=!t.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,o,r){o.setHeading(r(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,o){e.$watch(function(){return o[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"/tc/ui-bootstrap-templates/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(r){return{require:"alert",link:function(e,t,n,o){r(function(){o.close()},parseInt(n.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(t,n,o,e){var r=e[0],a=e[1];a.$render=function(){n.toggleClass(r.activeClass,angular.equals(a.$modelValue,t.$eval(o.btnRadio)))},n.bind(r.toggleEvent,function(){var e=n.hasClass(r.activeClass);e&&!angular.isDefined(o.uncheckable)||t.$apply(function(){a.$setViewValue(e?null:t.$eval(o.btnRadio)),a.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(n,e,t,o){var r=o[0],a=o[1];function i(){return s(t.btnCheckboxTrue,!0)}function s(e,t){e=n.$eval(e);return angular.isDefined(e)?e:t}a.$render=function(){e.toggleClass(r.activeClass,angular.equals(a.$modelValue,i()))},e.bind(r.toggleEvent,function(){n.$apply(function(){a.$setViewValue(e.hasClass(r.activeClass)?s(t.btnCheckboxFalse,!1):i()),a.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(i,t,n,s){var o,r,l=this,c=l.slides=i.slides=[],u=-1;l.currentSlide=null;var d=!1;function p(){a();var e=+i.interval;!isNaN(e)&&0<e&&(o=n(_,e))}function a(){o&&(n.cancel(o),o=null)}function _(){var e=+i.interval;r&&!isNaN(e)&&0<e?i.next():i.pause()}l.select=i.select=function(n,o){var r=c.indexOf(n);function e(){var e,t;d||(l.currentSlide&&angular.isString(o)&&!i.noTransition&&n.$element?(n.$element.addClass(o),n.$element[0].offsetWidth,angular.forEach(c,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(n,{direction:o,active:!0,entering:!0}),angular.extend(l.currentSlide||{},{direction:o,leaving:!0}),i.$currentTransition=s(n.$element,{}),e=n,t=l.currentSlide,i.$currentTransition.then(function(){a(e,t)},function(){a(e,t)})):a(n,l.currentSlide),l.currentSlide=n,u=r,p())}function a(e,t){angular.extend(e,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(t||{},{direction:"",active:!1,leaving:!1,entering:!1}),i.$currentTransition=null}void 0===o&&(o=u<r?"next":"prev"),n&&n!==l.currentSlide&&(i.$currentTransition?(i.$currentTransition.cancel(),t(e)):e())},i.$on("$destroy",function(){d=!0}),l.indexOfSlide=function(e){return c.indexOf(e)},i.next=function(){var e=(u+1)%c.length;return l.select(c[e],"next")},i.prev=function(){var e=u-1<0?c.length-1:u-1;if(!i.$currentTransition)return l.select(c[e],"prev")},i.isActive=function(e){return l.currentSlide===e},i.$watch("interval",p),i.$on("$destroy",a),i.play=function(){r||(r=!0,p())},i.pause=function(){i.noPause||(r=!1,a())},l.addSlide=function(e,t){e.$element=t,c.push(e),1===c.length||e.active?(l.select(c[c.length-1]),1==c.length&&i.play()):e.active=!1},l.removeSlide=function(e){var t=c.indexOf(e);c.splice(t,1),0<c.length&&e.active?t>=c.length?l.select(c[t-1]):l.select(c[t]):t<u&&u--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"/tc/ui-bootstrap-templates/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"/tc/ui-bootstrap-templates/carousel/slide.html",scope:{active:"=?"},link:function(t,e,n,o){o.addSlide(t,e),t.$on("$destroy",function(){o.removeSlide(t)}),t.$watch("active",function(e){e&&o.select(t)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(_,m){this.parsers={};var f={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:_.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=_.DATETIME_FORMATS.MONTH.indexOf(e)}},MMM:{regex:_.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=_.DATETIME_FORMATS.SHORTMONTH.indexOf(e)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:_.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:_.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(e,t){if(!angular.isString(e)||!t)return e;var a,i,s;t=_.DATETIME_FORMATS[t]||t,this.parsers[t]||(this.parsers[t]=(i=[],s=(a=t).split(""),angular.forEach(f,function(e,t){var n=a.indexOf(t);if(-1<n){a=a.split(""),s[n]="("+e.regex+")",a[n]="$";for(var o=n+1,r=n+t.length;o<r;o++)s[o]="",a[o]="$";a=a.join(""),i.push({index:n,apply:e.apply})}}),{regex:new RegExp("^"+s.join("")+"$"),map:m(i,"index")}));var n=this.parsers[t],t=n.regex,o=n.map,r=e.match(t);if(r&&r.length){for(var l,c={year:1900,month:0,date:1,hours:0},u=1,d=r.length;u<d;u++){var p=o[u-1];p.apply&&p.apply.call(c,r[u])}return function(e,t,n){if(1===t&&28<n)return 29===n&&(e%4==0&&e%100!=0||e%400==0);return 3!==t&&5!==t&&8!==t&&10!==t||n<31}(c.year,c.month,c.date)&&(l=new Date(c.year,c.month,c.date,c.hours)),l}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(r,n){function a(e){return"static"===(t="position",((e=e).currentStyle?e.currentStyle:n.getComputedStyle?n.getComputedStyle(e):e.style)[t]||"static");var t}return{position:function(e){var t=this.offset(e),n={top:0,left:0},o=function(e){for(var t=r[0],n=e.offsetParent||t;n&&n!==t&&a(n);)n=n.offsetParent;return n||t}(e[0]);o!=r[0]&&((n=this.offset(angular.element(o))).top+=o.clientTop-o.scrollTop,n.left+=o.clientLeft-o.scrollLeft);o=e[0].getBoundingClientRect();return{width:o.width||e.prop("offsetWidth"),height:o.height||e.prop("offsetHeight"),top:t.top-n.top,left:t.left-n.left}},offset:function(e){var t=e[0].getBoundingClientRect();return{width:t.width||e.prop("offsetWidth"),height:t.height||e.prop("offsetHeight"),top:t.top+(n.pageYOffset||r[0].documentElement.scrollTop),left:t.left+(n.pageXOffset||r[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,o){var r,a=n.split("-"),n=a[0],a=a[1]||"center",i=o?this.offset(e):this.position(e),s=t.prop("offsetWidth"),l=t.prop("offsetHeight"),e={center:function(){return i.left+i.width/2-s/2},left:function(){return i.left},right:function(){return i.left+i.width}},t={center:function(){return i.top+i.height/2-l/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(n){case"right":r={top:t[a](),left:e[n]()};break;case"left":r={top:t[a](),left:i.left-s};break;case"bottom":r={top:t[n](),left:e[a]()};break;default:r={top:i.top-l,left:e[a]()}}return r}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(n,o,e,r,t,a,i,s){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(e,t){l[e]=angular.isDefined(o[e])?t<8?r(o[e])(n.$parent):n.$parent.$eval(o[e]):s[e]}),angular.forEach(["minDate","maxDate"],function(t){o[t]?n.$parent.$watch(e(o[t]),function(e){l[t]=e?new Date(e):null,l.refreshView()}):l[t]=s[t]?new Date(s[t]):null}),n.datepickerMode=n.datepickerMode||s.datepickerMode,n.uniqueId="datepicker-"+n.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(o.initDate)?n.$parent.$eval(o.initDate):new Date,n.isActive=function(e){return 0===l.compare(e.date,l.activeDate)&&(n.activeDateId=e.uid,!0)},this.init=function(e){(c=e).$render=function(){l.render()}},this.render=function(){var e,t;c.$modelValue&&(e=new Date(c.$modelValue),(t=!isNaN(e))?this.activeDate=e:a.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)),this.refreshView()},this.refreshView=function(){var e;this.element&&(this._refreshView(),e=c.$modelValue?new Date(c.$modelValue):null,c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e)))},this.createDateObject=function(e,t){var n=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:i(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(e){return this.minDate&&this.compare(e,this.minDate)<0||this.maxDate&&0<this.compare(e,this.maxDate)||o.dateDisabled&&n.dateDisabled({date:e,mode:n.datepickerMode})},this.split=function(e,t){for(var n=[];0<e.length;)n.push(e.splice(0,t));return n},n.select=function(e){var t;n.datepickerMode===l.minMode?((t=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0)).setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),c.$setViewValue(t),c.$render()):(l.activeDate=e,n.datepickerMode=l.modes[l.modes.indexOf(n.datepickerMode)-1])},n.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),e=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,e,1),l.refreshView()},n.toggleMode=function(e){e=e||1,n.datepickerMode===l.maxMode&&1===e||n.datepickerMode===l.minMode&&-1===e||(n.datepickerMode=l.modes[l.modes.indexOf(n.datepickerMode)+e])},n.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};function u(){t(function(){l.element[0].focus()},0,!1)}n.$on("datepicker.focus",u),n.keydown=function(e){var t=n.keys[e.which];!t||e.shiftKey||e.altKey||(e.preventDefault(),e.stopPropagation(),"enter"===t||"space"===t?l.isDisabled(l.activeDate)||(n.select(l.activeDate),u()):!e.ctrlKey||"up"!==t&&"down"!==t?(l.handleKeyDown(t,e),l.refreshView()):(n.toggleMode("up"===t?1:-1),u()))}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"/tc/ui-bootstrap-templates/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,o){var r=o[0],o=o[1];o&&r.init(o)}}}).directive("daypicker",["dateFilter",function(u){return{restrict:"EA",replace:!0,templateUrl:"/tc/ui-bootstrap-templates/datepicker/day.html",require:"^datepicker",link:function(l,e,t,c){l.showWeeks=c.showWeeks,c.step={months:1},c.element=e;var n=[31,28,31,30,31,30,31,31,30,31,30,31];function r(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?n[t]:29}c._refreshView=function(){var e=c.activeDate.getFullYear(),t=c.activeDate.getMonth(),n=new Date(e,t,1),e=c.startingDay-n.getDay(),e=0<e?7-e:-e,n=new Date(n);0<e&&n.setDate(1-e);for(var o=function(e,t){var n=new Array(t),o=new Date(e),r=0;for(o.setHours(12);r<t;)n[r++]=new Date(o),o.setDate(o.getDate()+1);return n}(n,42),r=0;r<42;r++)o[r]=angular.extend(c.createDateObject(o[r],c.formatDay),{secondary:o[r].getMonth()!==t,uid:l.uniqueId+"-"+r});l.labels=new Array(7);for(var a=0;a<7;a++)l.labels[a]={abbr:u(o[a].date,c.formatDayHeader),full:u(o[a].date,"EEEE")};if(l.title=u(c.activeDate,c.formatDayTitle),l.rows=c.split(o,7),l.showWeeks){l.weekNumbers=[];for(var i=function(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));e=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1}(l.rows[0][0].date),s=l.rows.length;l.weekNumbers.push(i++)<s;);}},c.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},c.handleKeyDown=function(e,t){var n,o=c.activeDate.getDate();"left"===e?--o:"up"===e?o-=7:"right"===e?o+=1:"down"===e?o+=7:"pageup"===e||"pagedown"===e?(n=c.activeDate.getMonth()+("pageup"===e?-1:1),c.activeDate.setMonth(n,1),o=Math.min(r(c.activeDate.getFullYear(),c.activeDate.getMonth()),o)):"home"===e?o=1:"end"===e&&(o=r(c.activeDate.getFullYear(),c.activeDate.getMonth())),c.activeDate.setDate(o)},c.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"/tc/ui-bootstrap-templates/datepicker/month.html",require:"^datepicker",link:function(o,e,t,r){r.step={years:1},r.element=e,r._refreshView=function(){for(var e=new Array(12),t=r.activeDate.getFullYear(),n=0;n<12;n++)e[n]=angular.extend(r.createDateObject(new Date(t,n,1),r.formatMonth),{uid:o.uniqueId+"-"+n});o.title=a(r.activeDate,r.formatMonthTitle),o.rows=r.split(e,3)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},r.handleKeyDown=function(e,t){var n,o=r.activeDate.getMonth();"left"===e?--o:"up"===e?o-=3:"right"===e?o+=1:"down"===e?o+=3:"pageup"===e||"pagedown"===e?(n=r.activeDate.getFullYear()+("pageup"===e?-1:1),r.activeDate.setFullYear(n)):"home"===e?o=0:"end"===e&&(o=11),r.activeDate.setMonth(o)},r.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"/tc/ui-bootstrap-templates/datepicker/year.html",require:"^datepicker",link:function(o,e,t,r){var a=r.yearRange;function i(e){return parseInt((e-1)/a,10)*a+1}r.step={years:a},r.element=e,r._refreshView=function(){for(var e=new Array(a),t=0,n=i(r.activeDate.getFullYear());t<a;t++)e[t]=angular.extend(r.createDateObject(new Date(n+t,0,1),r.formatYear),{uid:o.uniqueId+"-"+t});o.title=[e[0].label,e[a-1].label].join(" - "),o.rows=r.split(e,5)},r.compare=function(e,t){return e.getFullYear()-t.getFullYear()},r.handleKeyDown=function(e,t){var n=r.activeDate.getFullYear();"left"===e?--n:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*r.step.years:"home"===e?n=i(r.activeDate.getFullYear()):"end"===e&&(n=i(r.activeDate.getFullYear())+a-1),r.activeDate.setFullYear(n)},r.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(m,f,g,h,b,v,w){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(o,t,r,n){var a,i=angular.isDefined(r.closeOnDateSelection)?o.$parent.$eval(r.closeOnDateSelection):w.closeOnDateSelection,s=angular.isDefined(r.datepickerAppendToBody)?o.$parent.$eval(r.datepickerAppendToBody):w.appendToBody;o.showButtonBar=angular.isDefined(r.showButtonBar)?o.$parent.$eval(r.showButtonBar):w.showButtonBar,o.getText=function(e){return o[e+"Text"]||w[e+"Text"]},r.$observe("datepickerPopup",function(e){a=e||w.datepickerPopup,n.$render()});var e=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");function l(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}e.attr({"ng-model":"date","ng-change":"dateSelection()"});var c=angular.element(e.children()[0]);function u(e){if(!e)return n.$setValidity("date",!0),null;if(angular.isDate(e)&&!isNaN(e))return n.$setValidity("date",!0),e;if(angular.isString(e)){e=v.parse(e,a)||new Date(e);if(!isNaN(e))return n.$setValidity("date",!0),e;n.$setValidity("date",!1)}else n.$setValidity("date",!1)}r.datepickerOptions&&angular.forEach(o.$parent.$eval(r.datepickerOptions),function(e,t){c.attr(l(t),e)}),o.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(t){var e,n;r[t]&&(e=f(r[t]),o.$parent.$watch(e,function(e){o.watchData[t]=e}),c.attr(l(t),"watchData."+t),"datepickerMode"===t&&(n=e.assign,o.$watch("watchData."+t,function(e,t){e!==t&&n(o.$parent,e)})))}),r.dateDisabled&&c.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),n.$parsers.unshift(u),o.dateSelection=function(e){angular.isDefined(e)&&(o.date=e),n.$setViewValue(o.date),n.$render(),i&&(o.isOpen=!1,t[0].focus())},t.bind("input change keyup",function(){o.$apply(function(){o.date=n.$modelValue})}),n.$render=function(){var e=n.$viewValue?b(n.$viewValue,a):"";t.val(e),o.date=u(n.$modelValue)};function d(e){o.isOpen&&e.target!==t[0]&&o.$apply(function(){o.isOpen=!1})}function p(e,t){o.keydown(e)}t.bind("keydown",p),o.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),o.close()):40!==e.which||o.isOpen||(o.isOpen=!0)},o.$watch("isOpen",function(e){e?(o.$broadcast("datepicker.focus"),o.position=s?h.offset(t):h.position(t),o.position.top=o.position.top+t.prop("offsetHeight"),g.bind("click",d)):g.unbind("click",d)}),o.select=function(e){var t;"today"===e&&(t=new Date,angular.isDate(n.$modelValue)?(e=new Date(n.$modelValue)).setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):e=new Date(t.setHours(0,0,0,0))),o.dateSelection(e)},o.close=function(){o.isOpen=!1,t[0].focus()};var _=m(e)(o);e.remove(),s?g.find("body").append(_):t.after(_),o.$on("$destroy",function(){_.remove(),t.unbind("keydown",p),g.unbind("click",d)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"/tc/ui-bootstrap-templates/datepicker/popup.html",link:function(e,t,n){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(t){var n=null;this.open=function(e){n||(t.bind("click",o),t.bind("keydown",r)),n&&n!==e&&(n.isOpen=!1),n=e},this.close=function(e){n===e&&(n=null,t.unbind("click",o),t.unbind("keydown",r))};var o=function(e){var t;n&&(t=n.getToggleElement(),e&&t&&t[0].contains(e.target)||n.$apply(function(){n.isOpen=!1}))},r=function(e){27===e.which&&(n.focusToggleElement(),o())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(n,t,o,e,r,a){var i,s=this,l=n.$new(),c=e.openClass,u=angular.noop,d=t.onToggle?o(t.onToggle):angular.noop;this.init=function(e){s.$element=e,t.isOpen&&(i=o(t.isOpen),u=i.assign,n.$watch(i,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return s.toggleElement},l.focusToggleElement=function(){s.toggleElement&&s.toggleElement[0].focus()},l.$watch("isOpen",function(e,t){a[e?"addClass":"removeClass"](s.$element,c),e?(l.focusToggleElement(),r.open(l)):r.close(l),u(n,e),angular.isDefined(e)&&e!==t&&d(n,{open:!!e})}),n.$on("$locationChangeSuccess",function(){l.isOpen=!1}),n.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,o){o.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(t,n,o,r){var e;r&&(r.toggleElement=n,e=function(e){e.preventDefault(),n.hasClass("disabled")||o.disabled||t.$apply(function(){r.toggle()})},n.bind("click",e),n.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(r.isOpen,function(e){n.attr("aria-expanded",!!e)}),t.$on("$destroy",function(){n.unbind("click",e)}))}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var o=[];return{add:function(e,t){o.push({key:e,value:t})},get:function(e){for(var t=0;t<o.length;t++)if(e==o[t].key)return o[t]},keys:function(){for(var e=[],t=0;t<o.length;t++)e.push(o[t].key);return e},top:function(){return o[o.length-1]},remove:function(e){for(var t=-1,n=0;n<o.length;n++)if(e==o[n].key){t=n;break}return o.splice(t,1)[0]},removeTop:function(){return o.splice(o.length-1,1)[0]},length:function(){return o.length}}}}}).directive("modalBackdrop",["$timeout",function(o){return{restrict:"EA",replace:!0,templateUrl:"/tc/ui-bootstrap-templates/modal/backdrop.html",link:function(e,t,n){e.backdropClass=n.backdropClass||"",e.animate=!1,o(function(){e.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(o,r){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"/tc/ui-bootstrap-templates/modal/window.html"},link:function(e,t,n){t.addClass(n.windowClass||""),e.size=n.size,r(function(){e.animate=!0,t[0].querySelectorAll("[autofocus]").length||t[0].focus()}),e.close=function(e){var t=o.getTop();t&&t.value.backdrop&&"static"!=t.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),o.dismiss(t.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,o,r){r(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(s,l,r,a,i,e){var c,u,d="modal-open",p=e.createNew(),n={};function _(){for(var e=-1,t=p.keys(),n=0;n<t.length;n++)p.get(t[n]).value.backdrop&&(e=n);return e}function o(e){var t=r.find("body").eq(0),n=p.get(e).value;p.remove(e),m(n.modalDomEl,n.modalScope,300,function(){n.modalScope.$destroy(),t.toggleClass(d,0<p.length()),function(){{var e;c&&-1==_()&&(m(c,e=u,150,function(){e.$destroy(),e=null}),u=c=void 0)}}()})}function m(e,t,n,o){t.animate=!1;var r,a=s.transitionEndEventName;function i(){i.done||(i.done=!0,e.remove(),o&&o())}a?(r=l(i,n),e.bind(a,function(){l.cancel(r),i(),t.$apply()})):l(i)}return i.$watch(_,function(e){u&&(u.index=e)}),r.bind("keydown",function(e){var t;27===e.which&&(t=p.top())&&t.value.keyboard&&(e.preventDefault(),i.$apply(function(){n.dismiss(t.key,"escape key press")}))}),n.open=function(e,t){p.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var n=r.find("body").eq(0),e=_();0<=e&&!c&&((u=i.$new(!0)).index=e,(o=angular.element("<div modal-backdrop></div>")).attr("backdrop-class",t.backdropClass),c=a(o)(u),n.append(c));var o=angular.element("<div modal-window></div>");o.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:p.length()-1,animate:"animate"}).html(t.content);t=a(o)(t.scope);p.top().value.modalDomEl=t,n.append(t),n.addClass(d)},n.close=function(e,t){var n=p.get(e);n&&(n.value.deferred.resolve(t),o(e))},n.dismiss=function(e,t){var n=p.get(e);n&&(n.value.deferred.reject(t),o(e))},n.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},n.getTop=function(){return p.top()},n}]).provider("$modal",function(){var _={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(o,l,r,c,u,d,p){var e={};return e.open=function(a){var i=r.defer(),e=r.defer(),s={result:i.promise,opened:e.promise,close:function(e){p.close(s,e)},dismiss:function(e){p.dismiss(s,e)}};if((a=angular.extend({},_.options,a)).resolve=a.resolve||{},!a.template&&!a.templateUrl)throw new Error("One of template or templateUrl options is required.");var t,n,n=r.all([(n=a).template?r.when(n.template):c.get(angular.isFunction(n.templateUrl)?n.templateUrl():n.templateUrl,{cache:u}).then(function(e){return e.data})].concat((n=a.resolve,t=[],angular.forEach(n,function(e){(angular.isFunction(e)||angular.isArray(e))&&t.push(r.when(o.invoke(e)))}),t)));return n.then(function(n){var e=(a.scope||l).$new();e.$close=s.close,e.$dismiss=s.dismiss;var t,o={},r=1;a.controller&&(o.$scope=e,o.$modalInstance=s,angular.forEach(a.resolve,function(e,t){o[t]=n[r++]}),t=d(a.controller,o),a.controllerAs&&(e[a.controllerAs]=t)),p.open(s,{scope:e,deferred:i,content:n[0],backdrop:a.backdrop,keyboard:a.keyboard,backdropClass:a.backdropClass,windowClass:a.windowClass,windowTemplateUrl:a.windowTemplateUrl,size:a.size})},function(e){i.reject(e)}),n.then(function(){e.resolve(!0)},function(){e.reject(!1)}),s},e}]};return _}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(n,o,r){var a=this,i={$setViewValue:angular.noop},t=o.numPages?r(o.numPages).assign:angular.noop;this.init=function(e,t){i=e,this.config=t,i.$render=function(){a.render()},o.itemsPerPage?n.$parent.$watch(r(o.itemsPerPage),function(e){a.itemsPerPage=parseInt(e,10),n.totalPages=a.calculateTotalPages()}):this.itemsPerPage=t.itemsPerPage},this.calculateTotalPages=function(){var e=this.itemsPerPage<1?1:Math.ceil(n.totalItems/this.itemsPerPage);return Math.max(e||0,1)},this.render=function(){n.page=parseInt(i.$viewValue,10)||1},n.selectPage=function(e){n.page!==e&&0<e&&e<=n.totalPages&&(i.$setViewValue(e),i.$render())},n.getText=function(e){return n[e+"Text"]||a.config[e+"Text"]},n.noPrevious=function(){return 1===n.page},n.noNext=function(){return n.page===n.totalPages},n.$watch("totalItems",function(){n.totalPages=a.calculateTotalPages()}),n.$watch("totalPages",function(e){t(n.$parent,e),n.page>e?n.selectPage(e):i.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(i,s){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"/tc/ui-bootstrap-templates/pagination/pagination.html",replace:!0,link:function(e,t,n,o){var l,c,r,a=o[0],o=o[1];function u(e,t,n){return{number:e,text:t,active:n}}o&&(l=angular.isDefined(n.maxSize)?e.$parent.$eval(n.maxSize):s.maxSize,c=angular.isDefined(n.rotate)?e.$parent.$eval(n.rotate):s.rotate,e.boundaryLinks=angular.isDefined(n.boundaryLinks)?e.$parent.$eval(n.boundaryLinks):s.boundaryLinks,e.directionLinks=angular.isDefined(n.directionLinks)?e.$parent.$eval(n.directionLinks):s.directionLinks,a.init(o,s),n.maxSize&&e.$parent.$watch(i(n.maxSize),function(e){l=parseInt(e,10),a.render()}),r=a.render,a.render=function(){r(),0<e.page&&e.page<=e.totalPages&&(e.pages=function(e,t){var n=[],o=1,r=t,a=angular.isDefined(l)&&l<t;a&&(c?t<(r=(o=Math.max(e-Math.floor(l/2),1))+l-1)&&(o=(r=t)-l+1):(o=(Math.ceil(e/l)-1)*l+1,r=Math.min(o+l-1,t)));for(var i=o;i<=r;i++){var s=u(i,i,i===e);n.push(s)}return a&&!c&&(1<o&&(o=u(o-1,"...",!1),n.unshift(o)),r<t&&(t=u(r+1,"...",!1),n.push(t))),n}(e.page,e.totalPages))})}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"/tc/ui-bootstrap-templates/pagination/pager.html",replace:!0,link:function(e,t,n,o){var r=o[0],o=o[1];o&&(e.align=angular.isDefined(n.align)?e.$parent.$eval(n.align):a.align,r.init(o,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){var s={placement:"top",animation:!0,popupDelay:0},l={mouseenter:"mouseleave",click:"click",focus:"blur"},c={};this.options=function(e){angular.extend(c,e)},this.setTriggers=function(e){angular.extend(l,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,a,L,$,T,i){return function(M,S,t){var C=angular.extend({},s,c);function A(e){e=e||C.trigger||t;return{show:e,hide:l[e]||e}}var e=M.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()}),n=i.startSymbol(),o=i.endSymbol(),r="<div "+e+'-popup title="'+n+"title"+o+'" content="'+n+"content"+o+'" placement="'+n+"placement"+o+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,t){var y=a(r);return function(e,t,n){var o,r,a,i,s=!!angular.isDefined(C.appendToBody)&&C.appendToBody,l=A(void 0),c=angular.isDefined(n[S+"Enable"]),u=e.$new(!0),d=function(){var e=T.positionElements(t,o,u.placement,s);e.top+="px",e.left+="px",o.css(e)};function p(){(u.isOpen?m:_)()}function _(){c&&!e.$eval(n[S+"Enable"])||(function(){var e=n[S+"Placement"];u.placement=angular.isDefined(e)?e:C.placement}(),function(){var e=n[S+"PopupDelay"],e=parseInt(e,10);u.popupDelay=isNaN(e)?C.popupDelay:e}(),u.popupDelay?i||(i=L(f,u.popupDelay,!1)).then(function(e){e()}):f()())}function m(){e.$apply(function(){g()})}function f(){return i=null,a&&(L.cancel(a),a=null),u.content?(function(){o&&h();r=u.$new(),o=y(r,angular.noop)}(),o.css({top:0,left:0,display:"block"}),s?$.find("body").append(o):t.after(o),d(),u.isOpen=!0,u.$digest(),d):angular.noop}function g(){u.isOpen=!1,L.cancel(i),i=null,u.animation?a=a||L(h,500):h()}function h(){a=null,o&&(o.remove(),o=null),r&&(r.$destroy(),r=null)}u.isOpen=!1,n.$observe(M,function(e){!(u.content=e)&&u.isOpen&&g()}),n.$observe(S+"Title",function(e){u.title=e});function b(){t.unbind(l.show,_),t.unbind(l.hide,m)}var v;v=n[S+"Trigger"],b(),(l=A(v)).show===l.hide?t.bind(l.show,p):(t.bind(l.show,_),t.bind(l.hide,m));var w=e.$eval(n[S+"Animation"]);u.animation=angular.isDefined(w)?!!w:C.animation;w=e.$eval(n[S+"AppendToBody"]);(s=angular.isDefined(w)?w:s)&&e.$on("$locationChangeSuccess",function(){u.isOpen&&g()}),e.$on("$destroy",function(){L.cancel(a),L.cancel(i),b(),h(),u=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"/tc/ui-bootstrap-templates/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"/tc/ui-bootstrap-templates/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"/tc/ui-bootstrap-templates/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(n,e,t){var o=this,r=angular.isDefined(e.animate)?n.$parent.$eval(e.animate):t.animate;this.bars=[],n.max=angular.isDefined(e.max)?n.$parent.$eval(e.max):t.max,this.addBar=function(t,e){r||e.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(e){t.percent=+(100*e/n.max).toFixed(2)}),t.$on("$destroy",function(){e=null,o.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"/tc/ui-bootstrap-templates/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"/tc/ui-bootstrap-templates/progressbar/bar.html",link:function(e,t,n,o){o.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"/tc/ui-bootstrap-templates/progressbar/progressbar.html",link:function(e,t,n,o){o.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(t,n,o){var r={$setViewValue:angular.noop};this.init=function(e){(r=e).$render=this.render,this.stateOn=angular.isDefined(n.stateOn)?t.$parent.$eval(n.stateOn):o.stateOn,this.stateOff=angular.isDefined(n.stateOff)?t.$parent.$eval(n.stateOff):o.stateOff;e=angular.isDefined(n.ratingStates)?t.$parent.$eval(n.ratingStates):new Array(angular.isDefined(n.max)?t.$parent.$eval(n.max):o.max);t.range=this.buildTemplateObjects(e)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;t<n;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},t.rate=function(e){!t.readonly&&0<=e&&e<=t.range.length&&(r.$setViewValue(e),r.$render())},t.enter=function(e){t.readonly||(t.value=e),t.onHover({value:e})},t.reset=function(){t.value=r.$viewValue,t.onLeave()},t.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),t.rate(t.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){t.value=r.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"/tc/ui-bootstrap-templates/rating/rating.html",replace:!0,link:function(e,t,n,o){var r=o[0],o=o[1];o&&r.init(o)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var n,o=this,r=o.tabs=e.tabs=[];o.select=function(t){angular.forEach(r,function(e){e.active&&e!==t&&(e.active=!1,e.onDeselect())}),t.active=!0,t.onSelect()},o.addTab=function(e){r.push(e),1===r.length?e.active=!0:e.active&&o.select(e)},o.removeTab=function(e){var t=r.indexOf(e);e.active&&1<r.length&&!n&&(e=t==r.length-1?t-1:t+1,o.select(r[e])),r.splice(t,1)},e.$on("$destroy",function(){n=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"/tc/ui-bootstrap-templates/tabs/tabset.html",link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"/tc/ui-bootstrap-templates/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(e,t,r){return function(t,e,n,o){t.$watch("active",function(e){e&&o.select(t)}),t.disabled=!1,n.disabled&&t.$parent.$watch(a(n.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},o.addTab(t),t.$on("$destroy",function(){o.removeTab(t)}),t.$transcludeFn=r}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,n,o){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){return{restrict:"A",require:"^tabset",link:function(e,n,t){var o=e.$eval(t.tabContentTransclude);o.$transcludeFn(o.$parent,function(e){angular.forEach(e,function(e){var t;(t=e).tagName&&(t.hasAttribute("tab-heading")||t.hasAttribute("data-tab-heading")||"tab-heading"===t.tagName.toLowerCase()||"data-tab-heading"===t.tagName.toLowerCase())?o.headingElement=e:n.append(e)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(o,n,e,t,r,a){var i=new Date,s={$setViewValue:angular.noop},l=angular.isDefined(n.meridians)?o.$parent.$eval(n.meridians):a.meridians||r.DATETIME_FORMATS.AMPMS;this.init=function(e,t){(s=e).$render=this.render;e=t.eq(0),t=t.eq(1);(angular.isDefined(n.mousewheel)?o.$parent.$eval(n.mousewheel):a.mousewheel)&&this.setupMousewheelEvents(e,t),o.readonlyInput=angular.isDefined(n.readonlyInput)?o.$parent.$eval(n.readonlyInput):a.readonlyInput,this.setupInputEvents(e,t)};var c=a.hourStep;n.hourStep&&o.$parent.$watch(e(n.hourStep),function(e){c=parseInt(e,10)});var u=a.minuteStep;function d(){var e=parseInt(o.hours,10);if(o.showMeridian?0<e&&e<13:0<=e&&e<24)return o.showMeridian&&(12===e&&(e=0),o.meridian===l[1]&&(e+=12)),e}function p(){var e=parseInt(o.minutes,10);return 0<=e&&e<60?e:void 0}function _(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function m(e){f(),s.$setViewValue(new Date(i)),g(e)}function f(){s.$setValidity("time",!0),o.invalidHours=!1,o.invalidMinutes=!1}function g(e){var t=i.getHours(),n=i.getMinutes();o.showMeridian&&(t=0===t||12===t?12:t%12),o.hours="h"===e?t:_(t),o.minutes="m"===e?n:_(n),o.meridian=i.getHours()<12?l[0]:l[1]}function h(e){e=new Date(i.getTime()+6e4*e);i.setHours(e.getHours(),e.getMinutes()),m()}n.minuteStep&&o.$parent.$watch(e(n.minuteStep),function(e){u=parseInt(e,10)}),o.showMeridian=a.showMeridian,n.showMeridian&&o.$parent.$watch(e(n.showMeridian),function(e){var t;o.showMeridian=!!e,s.$error.time?(t=d(),e=p(),angular.isDefined(t)&&angular.isDefined(e)&&(i.setHours(t),m())):g()}),this.setupMousewheelEvents=function(e,t){function n(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||0<t}e.bind("mousewheel wheel",function(e){o.$apply(n(e)?o.incrementHours():o.decrementHours()),e.preventDefault()}),t.bind("mousewheel wheel",function(e){o.$apply(n(e)?o.incrementMinutes():o.decrementMinutes()),e.preventDefault()})},this.setupInputEvents=function(e,t){if(o.readonlyInput)return o.updateHours=angular.noop,void(o.updateMinutes=angular.noop);function n(e,t){s.$setViewValue(null),s.$setValidity("time",!1),angular.isDefined(e)&&(o.invalidHours=e),angular.isDefined(t)&&(o.invalidMinutes=t)}o.updateHours=function(){var e=d();angular.isDefined(e)?(i.setHours(e),m("h")):n(!0)},e.bind("blur",function(e){!o.invalidHours&&o.hours<10&&o.$apply(function(){o.hours=_(o.hours)})}),o.updateMinutes=function(){var e=p();angular.isDefined(e)?(i.setMinutes(e),m("m")):n(void 0,!0)},t.bind("blur",function(e){!o.invalidMinutes&&o.minutes<10&&o.$apply(function(){o.minutes=_(o.minutes)})})},this.render=function(){var e=s.$modelValue?new Date(s.$modelValue):null;isNaN(e)?(s.$setValidity("time",!1),t.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(i=e),f(),g())},o.incrementHours=function(){h(60*c)},o.decrementHours=function(){h(60*-c)},o.incrementMinutes=function(){h(u)},o.decrementMinutes=function(){h(-u)},o.toggleMeridian=function(){h(720*(i.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"/tc/ui-bootstrap-templates/timepicker/timepicker.html",link:function(e,t,n,o){var r=o[0],o=o[1];o&&r.init(o,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(n){var o=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(e){var t=e.match(o);if(!t)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+e+'".');return{itemName:t[3],source:n(t[4]),viewMapper:n(t[2]||t[1]),modelMapper:n(t[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(A,L,$,T,z,x,P){var k=[9,13,27,38,40];return{require:"ngModel",link:function(a,i,e,s){var l,n=a.$eval(e.typeaheadMinLength)||1,o=a.$eval(e.typeaheadWaitMs)||0,r=!1!==a.$eval(e.typeaheadEditable),c=L(e.typeaheadLoading).assign||angular.noop,u=L(e.typeaheadOnSelect),d=e.typeaheadInputFormatter?L(e.typeaheadInputFormatter):void 0,p=!!e.typeaheadAppendToBody&&a.$eval(e.typeaheadAppendToBody),_=!1!==a.$eval(e.typeaheadFocusFirst),m=L(e.ngModel).assign,f=P.parse(e.typeahead),g=a.$new();a.$on("$destroy",function(){g.$destroy()});var t="typeahead-"+g.$id+"-"+Math.floor(1e4*Math.random());i.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":t});var h=angular.element("<div typeahead-popup></div>");h.attr({id:t,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(e.typeaheadTemplateUrl)&&h.attr("template-url",e.typeaheadTemplateUrl);function b(){g.matches=[],g.activeIdx=-1,i.attr("aria-expanded",!1)}function v(e){return t+"-option-"+e}g.$watch("activeIdx",function(e){e<0?i.removeAttr("aria-activedescendant"):i.attr("aria-activedescendant",v(e))});function w(o){var r={$viewValue:o};c(a,!0),$.when(f.source(a,r)).then(function(e){var t=o===s.$viewValue;if(t&&l)if(0<e.length){g.activeIdx=_?0:-1;for(var n=g.matches.length=0;n<e.length;n++)r[f.itemName]=e[n],g.matches.push({id:v(n),label:f.viewMapper(g,r),model:e[n]});g.query=o,g.position=p?x.offset(i):x.position(i),g.position.top=g.position.top+i.prop("offsetHeight"),i.attr("aria-expanded",!0)}else b();t&&c(a,!1)},function(){b(),c(a,!1)})}var y;b(),g.query=void 0;function M(){y&&T.cancel(y)}s.$parsers.unshift(function(e){var t;return l=!0,e&&e.length>=n?0<o?(M(),t=e,y=T(function(){w(t)},o)):w(e):(c(a,!1),M(),b()),r?e:e?void s.$setValidity("editable",!1):(s.$setValidity("editable",!0),e)}),s.$formatters.push(function(e){var t,n={};return d?(n.$model=e,d(a,n)):(n[f.itemName]=e,t=f.viewMapper(a,n),n[f.itemName]=void 0,t!==f.viewMapper(a,n)?t:e)}),g.select=function(e){var t,n={};n[f.itemName]=t=g.matches[e].model,e=f.modelMapper(a,n),m(a,e),s.$setValidity("editable",!0),u(a,{$item:t,$model:e,$label:f.viewMapper(a,n)}),b(),T(function(){i[0].focus()},0,!1)},i.bind("keydown",function(e){0!==g.matches.length&&-1!==k.indexOf(e.which)&&(-1!=g.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(g.activeIdx=(g.activeIdx+1)%g.matches.length,g.$digest()):38===e.which?(g.activeIdx=(0<g.activeIdx?g.activeIdx:g.matches.length)-1,g.$digest()):13===e.which||9===e.which?g.$apply(function(){g.select(g.activeIdx)}):27===e.which&&(e.stopPropagation(),b(),g.$digest()))}),i.bind("blur",function(e){l=!1});function S(e){i[0]!==e.target&&(b(),g.$digest())}z.bind("click",S),a.$on("$destroy",function(){z.unbind("click",S),p&&C.remove()});var C=A(h)(g);p?z.find("body").append(C):i.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"/tc/ui-bootstrap-templates/typeahead/typeahead-popup.html",link:function(t,e,n){t.templateUrl=n.templateUrl,t.isOpen=function(){return 0<t.matches.length},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(o,r,a,i){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(t,n,e){e=i(e.templateUrl)(t.$parent)||"/tc/ui-bootstrap-templates/typeahead/typeahead-match.html";o.get(e,{cache:r}).success(function(e){n.replaceWith(a(e.trim())(t))})}}}]).filter("typeaheadHighlight",function(){return function(e,t){return t?(""+e).replace(new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):e}}),function(){"use strict";function e(e){var n=new e,e=function(){this.data=null,this.meta=null};return e.prototype.changePassword=function(e){var t=this,e={url:"/change-password.json",data:{user:e}};return n.put(null,e,null).then(function(){t.data=n.data})},e.prototype.updateAccountSettings=function(e){var t=this,e={url:"/update-account-settings.json",data:e};return n.put(null,e,null).then(function(){return t.data=n.data,t.data})},e}window.angular.module("lu").factory("AccountFactory",e),e.$inject=["learnUponApi"]}(),window.angular.module("lu").factory("AssignmentAnswerFactory",["$log","learnUponApi","LupHelper","$luPopover","$window","LuaFactory","$sce",function(e,t,c,u,a,d,p){var _=new t,t=function(){this.objectName="assignment_answers",this.data=null,this.meta=null};return t.prototype.save=function(e,t,n,o){var r=this,a=LuAnywhere.services.toast.getInstance(),i=d.getWebcomponentsFlag(),s=c.getHTMLFromCKEditor("answer_text");if(0!==t.assignment_allow_uploads||s&&0!==s.length)if(0!==t.assignment_allow_feedback||0!==t.assignment_uploads.data.length)if(0!==t.assignment_uploads.data.length||s&&0!==s.length){var t=document.getElementById("select_instructor_for_assign"),l=0;if(!t||!e||(l=t.options[t.selectedIndex].value)&&-1!=l&&"----"!=l||!n)return n?void(i?d.openModal('<p class="p-large">'+c.showMessage("lup.assignments.modal_submit_msg")+'</p><div slot="footer" class="o-flex o-flex--justify-end"><luds-button id="closeAssigmentSubmissionButton" variant="secondary" class="mr-12">'+c.showMessage("cancel")+'</luds-button><luds-button id="submitAssignmentButton" variant="primary">'+c.showMessage("submit")+"</luds-button></div>",{showCloseIcon:!0,width:"sm",height:"sm",title:c.showMessage("lup.assignments.modal_submit_title"),animation:!0},{close:{selector:"#closeAssigmentSubmissionButton",handler:function(){var e=document.querySelector("luds-modal");e&&e.close()}},submit:{selector:"#submitAssignmentButton",handler:function(){_.put(r.objectName,{data:{select_instructor_for_assign:l,was_submitted:"1",assignment_answer:{answer_text:s}}},o).then(function(){r.data=_.data,window.reloadCourseContent()})}}}):u.confirm(I18n.t("lup.confirm"),I18n.t("course_assignments.are_you_sure_you_want_to_submit")).then(function(e){return _.put(r.objectName,{data:{select_instructor_for_assign:l,was_submitted:"1",assignment_answer:{answer_text:s}}},o).then(function(){r.data=_.data,window.reloadCourseContent()})})):_.put(r.objectName,{data:{select_instructor_for_assign:l,assignment_answer:{answer_text:s}}},o).then(function(){r.data=_.data});i?a.showToast({title:c.showMessage("data_service.toastr.error.error"),message:p.getTrustedHtml(c.showMessage("course_assignments.choose_your_instructor_select_request")).replace(/(<([^>]+)>)/gi,""),variant:"error"}):u.notify("",I18n.t("course_assignments.choose_your_instructor_select_request"))}else i?a.showToast({title:c.showMessage("data_service.toastr.error.error"),message:c.showMessage("lup.assignments.empty_assignment"),variant:"error"}):u.notify("",I18n.t("course_assignments.please_provide_an_answer_to_your_asignment"));else i?a.showToast({title:c.showMessage("data_service.toastr.error.error"),message:c.showMessage("course_assignments.please_provide_an_upload_to_your_asignment"),variant:"error"}):u.notify("",I18n.t("course_assignments.please_provide_an_upload_to_your_asignment"));else i?a.showToast({title:c.showMessage("data_service.toastr.error.error"),message:c.showMessage("course_assignments.please_provide_an_answer_to_your_asignment"),variant:"error"}):u.notify("",I18n.t("course_assignments.please_provide_an_answer_to_your_asignment"))},t.prototype.save_feedback=function(t,e,n){var o=this,r=c.getHTMLFromCKEditor("answer_text");if(!e)return _.put(o.objectName,{data:{assignment_answer:{corrected_comments:r,percentage:t.percentage}}},t.id).then(function(){o.data=_.data});u.confirm(I18n.t("lup.confirm"),I18n.t("lup.assignments.submit_feedback_question")).then(function(e){return n.assignment_answer_status_id&&(t.assignment_answer_status_id=n.assignment_answer_status_id),_.put(o.objectName,{data:{submit_final_feedback:n.submit_final_feedback,lup_to_set_enrollment_status:n.lup_to_set_enrollment_status,count_of_pending_assignments_to_correct:n.count_of_pending_assignments_to_correct,invoke_course_pass_mark:n.invoke_course_pass_mark,contains_failed_items:n.contains_failed_items,contains_passed_items:n.contains_passed_items,assignment_answer_passing_percentage:n.assignment_answer_passing_percentage,assignment_answer:{corrected_comments:r,percentage:t.percentage},manually_set_score:n.manually_set_score,assignment_answer_status_id:t.assignment_answer_status_id}},t.id).then(function(){o.data=_.data,a.location.reload()})})},t.prototype.reject_assignment=function(e,t){var n={url:"/courses/"+e+"/assignments/"+t+"/reject-assignment.json",data:{corrected_comments:c.getHTMLFromCKEditor("answer_text")}};u.confirm(I18n.t("lup.confirm"),c.trustContent(c.showMessage("course_assignments.are_you_sure_you_want_to_reject_this_assignment"))).then(function(e){return _.put(null,n,null).then(function(){self.data=_.data})})},t}]),window.angular.module("lu").factory("AssignmentAnswerUploadFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="assignment_answer_uploads",this.data=null,this.meta=null,this.id=null,this.uuid=null,this.assignment_file_name=null,this.assignment_answer_id=null,this.assignment_file_size=0,this.assignment_content_type=null,this.output_url=null};return t.prototype.create=function(){var e=this,t={},n={};return t.uuid=e.uuid,t.assignment_file_name=e.assignment_file_name,t.assignment_answer_id=e.assignment_answer_id,t.assignment_file_size=e.assignment_file_size,t.assignment_content_type=e.assignment_content_type,t.output_url=e.output_url,n.data={},n.data.assignment=t,r.create(e.objectName,n).then(function(){e.data=r.data,e.id=e.data.assignment_answer_upload.id})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),window.angular.module("lu").factory("AssignmentAnswerUploadFeedbackFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="assignment_answer_upload_feedbacks",this.data=null,this.meta=null,this.id=null,this.uuid=null,this.assignment_file_name=null,this.assignment_answer_id=null,this.assignment_file_size=0,this.assignment_content_type=null,this.output_url=null};return t.prototype.create=function(){var e=this,t={},n={};return t.uuid=e.uuid,t.assignment_file_name=e.assignment_file_name,t.assignment_answer_id=e.assignment_answer_id,t.assignment_file_size=e.assignment_file_size,t.assignment_content_type=e.assignment_content_type,t.output_url=e.output_url,n.data={},n.data.assignment=t,r.create(e.objectName,n).then(function(){e.data=r.data,e.id=e.data.assignment_answer_upload_feedback.id,e.download_url=e.data.assignment_answer_upload_feedback.download_url})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),window.angular.module("lu").factory("AssignmentHandoutFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="assignment_handouts",this.data=null,this.meta=null,this.id=null,this.uuid=null,this.handout_file_name=null,this.component_id=null,this.handout_file_size=0,this.handout_content_type=null,this.output_url=null};return t.prototype.create=function(){var e=this,t={},n={};return t.uuid=e.uuid,t.handout_file_name=e.handout_file_name,t.component_id=e.component_id,t.handout_file_size=e.handout_file_size,t.handout_content_type=e.handout_content_type,t.output_url=e.output_url,n.data={},n.data.assignment=t,r.create(e.objectName,n).then(function(){e.data=r.data,e.id=e.data.assignment_handout.id,e.url=e.data.assignment_handout.url})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),function(){function e(e,o,t){var n,r=new e,e=function(){this.objectName="auto_assign_rules",this.data=null,this.meta=null,n=this};return e.prototype.getRules=function(e){e={url:"/settings/users/auto_assign_rules.json",params:e.params};return r.get(n.objectName,e).then(function(e){return e})},e.prototype.getRuleData=function(e){var e={url:"/settings/users/auto_assign_rules/"+e+".json"},t=o.defer();return r.get(n.objectName,e).then(function(e){e.data.error?t.reject("Failed to fetch rule data"):t.resolve(e)}),t.promise},e.prototype.createRule=function(e){var t=this,e={url:"/settings/users/auto_assign_rules.json",data:e,hideSpinner:!0},n=o.defer();return r.post(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to create auto_assign_rule"):n.resolve(t.data)}),n.promise},e.prototype.updateRule=function(e){var t=this,e={url:"/settings/users/auto_assign_rules/"+e.rule.id+".json",data:e,hideSpinner:!0},n=o.defer();return r.put(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to update auto_assign_rule"):n.resolve(t.data)}),n.promise},e.prototype.runTheRules=function(e){e={url:"/users/"+e+"/run_the_rules.json"};return r.get(n.objectName,e).then(function(e){return e})},e.prototype.pingForRulesProgress=function(e){var t={hideSpinner:!0};return t.url="/download_jobs/"+e+"/status.json",r.get("download_jobs",t,e).then(function(){return r.data.job.status_id})},e.prototype.deleteRule=function(e){var t=this,e={url:"/settings/users/auto_assign_rules/"+e+".json",hideSpinner:!0},n=o.defer();return r.destroy(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to delete auto_assign_rule"):n.resolve(t.data)}),n.promise},e.prototype.defaultFilterValues=function(){return{filterCreatedAfter:"",filterCreatedBefore:"",filterType:t.autoAssignRules.filterType.autoAssignRules,selectedGroup:[],groups:[],selectedOption:0}},e.prototype.enable_dynamic_rules=function(){var e="/settings/users/auto_assign_rules/enable_dynamic_rules.json",t={url:e,hideSpinner:!1};return r.post(e,t,null).then(function(){return r.data})},e}angular.module("lu").factory("AutoAssignRulesFactory",e),e.$inject=["learnUponApi","$q","LupHelper"]}(),window.angular.module("lu").factory("AutoCorrectAssignmentDetailFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="auto_correct_assignment_details",this.data={},this.meta=null,this.id=null};return t.prototype.get=function(e){var t=this;return r.get(t.objectName,{},e).then(function(){t.data=r.data.auto_correct_assignment_detail.attributes,t.id=t.data.id})},t.prototype.save=function(){var e={data:{}};return e.data.auto_correct_assignment_detail=this.data,r.put(this.objectName,e,this.data.id).then(function(){})},t}]),function(){"use strict";function e(e,t,n,o,r){var a=new e,e=function(){this.objectName="badge_activities",this.data=null,this.meta=null};return e.prototype.getBadgeActivities=function(e){var t=this,e={url:"/settings/gamification/badge_activities.json",params:e.params};return a.getList(t.objectName,e).then(function(){t.meta=a.data.badge_activities.meta,t.data=a.data})},e.prototype.update=function(e){var t={url:"/badge_activities/:id.json".replace(/:id/,e.badge_activity_id),data:{badge_activity:e}};return a.put(this.objectName,t,e.id).then(function(e){return e})},e}window.angular.module("lu").factory("BadgeActivitiesFactory",e),e.$inject=["learnUponApi","$luPopover","LupHelper","Upload","$q"]}(),window.angular.module("lu").factory("BadgeCoursesFactory",["learnUponApi","$q",function(e,r){var a=new e,e=function(){this.objectName="badge_courses",this.data=null,this.meta=null};return e.prototype.createBadgeCourse=function(e,t){var n=this,e={url:"/courses/"+t+"/learning_awards.json",data:e,hideSpinner:!0},o=r.defer();return a.post(null,e,null).then(function(){n.data=a.data,n.data.error?o.reject("Failed to create badge_course"):o.resolve(n.data)}),o.promise},e.prototype.editBadgeCourse=function(e,t){var n=this,e={url:"/courses/"+t+"/learning_awards/"+e.award.id+".json",data:e,hideSpinner:!0},o=r.defer();return a.put(null,e,null).then(function(){n.data=a.data,n.data.error?o.reject("Failed to edit badge_course"):o.resolve(n.data)}),o.promise},e.prototype.deleteBadgeCourse=function(e,t){var n=this,t={url:"/courses/"+e+"/learning_awards/"+t+".json",hideSpinner:!0},o=r.defer();return a.destroy(null,t,null).then(function(){n.data=a.data,n.data.error?o.reject("Failed to delete badge_course"):o.resolve(n.data)}),o.promise},e}]),window.angular.module("lu").factory("BadgeLearningPathsFactory",["learnUponApi","$q",function(e,r){var a=new e,e=function(){this.objectName="badge_learning_paths",this.data=null,this.meta=null};return e.prototype.createBadgeLearningPath=function(e,t){var n=this,e={url:"/learning_paths/"+t+"/learning_awards.json",data:e,hideSpinner:!0},o=r.defer();return a.post(null,e,null).then(function(){n.data=a.data,n.data.error?o.reject("Failed to create badge_learning_path"):o.resolve(n.data)}),o.promise},e.prototype.editBadgeLearningPath=function(e,t){var n=this,e={url:"/learning_paths/"+t+"/learning_awards/"+e.award.id+".json",data:e,hideSpinner:!0},o=r.defer();return a.put(null,e,null).then(function(){n.data=a.data,n.data.error?o.reject("Failed to edit badge_learning_path"):o.resolve(n.data)}),o.promise},e.prototype.deleteBadgeLearningPath=function(e,t){var n=this,t={url:"/learning_paths/"+e+"/learning_awards/"+t+".json",hideSpinner:!0},o=r.defer();return a.destroy(null,t,null).then(function(){n.data=a.data,n.data.error?o.reject("Failed to delete badge_learning_path"):o.resolve(n.data)}),o.promise},e}]),window.angular.module("lu").factory("BadgeUsersFactory",["learnUponApi",function(e){var n=new e,e=function(){this.objectName="badge_users",this.data=null,this.meta=null};return e.prototype.getList=function(e){var t=this;return e.url="/my-awards.json",e.params.user_id&&(e.url="/users/"+e.params.user_id+"/achievements.json"),e.hideSpinner=!1,n.getList(t.objectName,e).then(function(){t.meta=n.data.awards.meta,t.data=n.data})},e.prototype.getItemsForAward=function(e){var t=this;return e.url="/my-awards/"+e.badge_id+"/items/"+e.action_type_id+".json",e.user_id&&(e.url=e.url+"?user_id="+e.user_id),n.getList(t.objectName,e).then(function(){t.meta=n.data.items.meta,t.data=n.data})},e.prototype.getLeaderboard=function(e){var t=this;return e.url="/my-awards.json",e.params.user_id&&(e.url="/users/"+e.params.user_id+"/achievements.json"),e.hideSpinner=!1,n.get(t.objectName,e).then(function(){t.meta=n.data.my_leaderboard.meta,t.data=n.data})},e.prototype.destroyMultiple=function(e,t){t={url:"/users/:id/revoke_badges.json".replace(/:id/,e),data:{badgeUsers:t}};return n.post(this.objectName,t).then(function(e){return e})},e}]),function(){"use strict";function e(e,r,a,o,i){var s=new e,e=function(){this.objectName="badges",this.data=null,this.meta=null};return e.prototype.getBadges=function(e){var t=this,e={url:"/settings/gamification/badges.json",params:e.params};return s.getList(t.objectName,e).then(function(){t.meta=s.data.badges.meta,t.data=s.data})},e.prototype.create=function(e,t){if(t){var n=i.defer();return e.image=t,o.upload({url:"/badges.json",method:"POST",data:{badge:e,filename:t.name,"Content-Type":""!==t.type?t.type:"application/octet-stream"}}).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}e={url:"/badges.json",data:{badge:e}};return s.post(this.objectName,e).then(function(e){return e})},e.prototype.update=function(e,t){if(t){var n=i.defer();return e.image=t,o.upload({url:"/badges/:id.json".replace(/:id/,e.id),method:"PUT",data:{badge:e,filename:t.name,"Content-Type":""!==t.type?t.type:"application/octet-stream"}}).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}t={url:"/badges/:id.json".replace(/:id/,e.id),data:{badge:e}};return s.put(this.objectName,t,e.id).then(function(e){return e})},e.prototype.destroy=function(t){var n=this;if(t.badge_type_id===a.badge_types.learning||!t.is_used){var o={url:"/badges/:id.json".replace(/:id/,t.id)};return r.confirm(a.showMessage("lup.confirm"),a.showMessage("lup.badges.are_your_sure_you_want_to_delete_this_badge_it_will_revoke_data")).then(function(e){return s.destroy(n.objectName,o,t.id).then(function(e){return e})})}r.notify("",a.showMessage("lup.badges.cannot_delete_badge_is_used"))},e.prototype.formatBadgeDataForToastr=function(e){var t={};return e&&(t={badgeImage:e.image_url,badgeDetails:a.showMessage("lup.gamification.you_achieved_badge",{badge_name:e.name})}),t},e}window.angular.module("lu").factory("BadgesFactory",e),e.$inject=["learnUponApi","$luPopover","LupHelper","Upload","$q"]}(),function(){"use strict";function e(e){var n=new e,e=function(){this.objectName="batch-imports",this.data=null,this.meta=null};return e.prototype.importUsers=function(e){var t=this;return n.create(t.objectName+"/import-users",e).then(function(){t.data=n.data})},e}window.angular.module("lu").factory("BatchImportFactory",e),e.$inject=["learnUponApi"]}(),function(){function e(e){var o=new e;return{objectName:"bundles",data:null,meta:null,getList:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);var t=this;return o.getList(t.objectName,e).then(function(){t.meta=o.data.bundles.meta,t.data=o.data})},doMultiDelete:function(e){(e=e||{}).hideSpinner=!0,e.url="/bundles/multi-delete.json";var t=this;return o.put(null,e,null).then(function(){t.data=o.data})},doSaveBundle:function(e){(e=e||{}).url="/bundles/new";var t=this;return o.create(null,e).then(function(){t.data=o.data})},doUpdateBundle:function(e){(e=e||{}).url="/bundles/"+e.id+".json";var t=this;return o.put(null,e,null).then(function(){t.data=o.data})},doSetAsThumbnail:function(e){(e=e||{}).url="/bundles/set_as_thumbnail/"+e.image_id+".json";var t=this;return o.put(null,e).then(function(){t.data=o.data})},doUnsetAsThumbnail:function(e){(e=e||{}).url="/bundles/remove_thumbnail_from_bundle/"+e.bundle_id+".json";var t=this;return o.put(null,e).then(function(){t.data=o.data})},doDestroyImage:function(e){var t=this;return o.destroy("bundle_images",{},e).then(function(){t.data=o.data})},doRemoveCourseFromBundle:function(e,t){var n=this,t={url:"/bundles/"+e+"/remove_course/"+t+".json"};return o.destroy(null,t,null).then(function(){n.data=o.data})},doReorderCourses:function(e,t){var n=this,t={url:"/bundles/"+t+"/reorder_courses.json"};return t.data={new_order:e.toString()},o.put(null,t,null).then(function(){n.data=o.data})},getUnknownEnrollments:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);var t=this;return o.getList(t.objectName,e).then(function(){t.meta=o.data.unknown_enrollments.meta,t.data=o.data})},uploadImage:function(){var e=this,t={url:"/bundle_images.json",hideSpinner:!0,data:{bundle_image:{uuid:e.uuid,image_file_name:e.image_file_name,output_url:e.output_url,bundle_id:e.bundle_id,portal_id:e.portal_id}}};return o.post(e.objectName,t).then(function(){e.data=o.data})}}}angular.module("lu").factory("learnUponBundle",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(e,s,l,c,i,u,d){var n=new e,e=function(){this.objectName="catalog",this.data=null,this.meta=null};function p(e,t){i.open({templateUrl:"/tc/enrollment_approvals/show_request_enrollment.html",controller:"ShowApproveEnrollmentController as vm",size:"sm",resolve:{item:function(){return e},type:function(){return t}}})}function _(e,t,n){e.enrollment_approval_id&&i.open({templateUrl:"/tc/enrollment_approvals/show_reject_enrollment.html",controller:"ShowRejectEnrollmentController",size:"sm",resolve:{item:function(){return e},type:function(){return t},callback:function(){return n}}})}return e.prototype.courses=function(e){var t=this;return e.url="/catalog/courses.json",n.getList(t.objectName,e).then(function(){t.meta=n.data.courses.meta,t.data=n.data})},e.prototype.learningPaths=function(e){var t=this;return e.url="/catalog/learning-paths.json",n.getList(t.objectName,e).then(function(){t.meta=n.data.learning_paths.meta,t.data=n.data})},e.prototype.iltSessions=function(e){var t=this;return e.url="/catalog/ilt-sessions.json",n.getList(t.objectName,e).then(function(){t.meta=n.data.ilt_sessions.meta,t.data=n.data})},e.prototype.courseEnroll=function(e,n,o){var r=e.course_id||e.id,t=e.must_choose_session&&!n,a=e.requires_approval,i=!!e.enrollment_approval_id;!a||e.enrollment?t?c.location="/catalog/courses/"+r+"/enroll":(u.showGroup("luSpinnerGlobal"),t={},n&&(t={params:{component_ids:n.join(",")}}),l.get("/enrollments/courses/"+r+"/check_existence.json",t).success(function(e){function t(t){var e={id:r,sessions:n};u.showGroup("luSpinnerGlobal"),l.post("/catalog/courses/enroll.json",e).success(function(e){if(u.hideGroup("luSpinnerGlobal"),e.enrollment_id)switch(e.redirect_after_enrollment){case d.portalCatalog.redirect_options.dashboard:t?c.location.reload():c.location="/dashboard";break;case d.portalCatalog.redirect_options.description:c.location="/enrollments/"+e.enrollment_id+"/details";break;case d.portalCatalog.redirect_options.catalog:l.get("/catalog/courses.json").success(function(e){u.hideGroup("luSpinnerGlobal")}),c.location="/catalog/courses";break;case d.portalCatalog.redirect_options.start_immediately:c.location="/enrollments/"+e.enrollment_id;break;default:c.location="/dashboard"}else c.location="/dashboard"})}u.hideGroup("luSpinnerGlobal"),e.result&&"is_enrolled"===e.result?s.notify(I18n.t("lup.info"),e.message):e.redirect_after_enrollment===d.portalCatalog.redirect_options.start_immediately&&"okay"===e.result?t(o):"no_capacity"===e.result?s.notify(I18n.t("events.sessions_full_in_catalog"),e.message):(e=e.message,s.confirm(I18n.t("lup.confirm"),e).then(function(e){t(o)}))})):(i?_:p)(e,"Course")},e.prototype.cancelEnrollmentRequestFromDashboard=function(e,t){_(e,e.approval_type,t)},e.prototype.learningPathEnroll=function(e){var n=e.learning_path_id,t=e.requires_approval,o=!!e.enrollment_approval_id;!t||e.learning_path_user?(u.showGroup("luSpinnerGlobal"),l.get("/enrollments/learning_paths/"+n+"/check_existence.json").success(function(e){u.hideGroup("luSpinnerGlobal");e=e.message;s.confirm(I18n.t("lup.confirm"),e).then(function(e){var t={id:n};u.showGroup("luSpinnerGlobal"),l.post("/catalog/learning-paths/enroll.json",t).success(function(e){if(u.hideGroup("luSpinnerGlobal"),e.enrollment_id)switch(e.lp_redirect_after_enrollment){case d.portalCatalog.redirect_options.dashboard:c.location="/dashboard";break;case d.portalCatalog.redirect_options.description:c.location="/lpaths/"+e.enrollment_id+"/details";break;case d.portalCatalog.redirect_options.catalog:l.get("/catalog/learning-paths.json").success(function(e){u.hideGroup("luSpinnerGlobal")}),c.location=e.catalog_redesign_enabled?"/catalog":"/catalog/learning-paths";break;default:c.location="/dashboard"}else c.location="/dashboard"})})})):(o?_:p)(e,"LearningPath")},e.prototype.showSessionDetails=function(e,t,n,o){var r="/catalog/ilt-sessions/"+e+".json",a={params:{}};t&&(r="/angie/catalog/ilt-sessions/"+e+".json",a={params:{component_id:t}}),u.showGroup("luSpinnerGlobal"),l.get(r,a).success(function(e){t&&(e=e.data),u.hideGroup("luSpinnerGlobal"),i.open({templateUrl:"/tc/users/show_session_details.html",controller:"UsersShowSessionDetailsController",backdrop:"static",size:"lg",resolve:{event:function(){return e.session_details.attributes},instructor:function(){return e.instructor},has_enrollment:function(){return!1},show_view_course:function(){return!0},showingOnPage:function(){return"catalog"},status:function(){return e.session_details.attributes.description},num_on_waitlist:function(){return null},waitlist_count:function(){return e.waitlist_count},course_enable_waitlist:function(){return e.course_enable_waitlist},course_waitlist_type:function(){return e.course_waitlist_type},course_settings:function(){return null},settingMinimalThresholdForMsTeamsEnabled:function(){return e.setting_minimal_threshold_for_ms_teams_enabled},forceHideViewCourse:function(){return!!n},showCloseBtn:function(){return!!o},sessionCourses:function(){return[]},showVisitSessionBtn:function(){return!1}}})})},e.prototype.showDescription=function(e,t){var n,o="";return e&&(o=e.description?String(e.description).replace(/<[^>]+>/gm,""):"",n=d.showMessage("lup.dashboard.read_more"),o.length>t&&(o=o.substring(0,t-1)+'... <a href="'+e.url+'"> '+n+"</a>")),angular.isString(o)?o.trim():""},e}angular.module("lu").factory("CatalogFactory",e),e.$inject=["learnUponApi","$luPopover","$http","$window","$modal","spinnerService","LupHelper"]}(),function(){"use strict";function e(e){var n=new e,e=function(){this.objectName="certifications",this.data=null,this.meta=null};return e.prototype.getList=function(e){var t=this;return n.getList(t.objectName,e).then(function(){t.meta=n.data.certifications.meta,t.data=n.data})},e.prototype.updateImage=function(){var e=this,t={url:"/certifications/"+e.certification_id+".json",hideSpinner:!0,data:{certification:{uuid:e.uuid,image_file_name:e.image_file_name,output_url:e.output_url,portal_id:e.portal_id}}};return n.put(e.objectName,t).then(function(){e.data=n.data})},e.prototype.getAwardedEnrollmentsCount=function(e){var t=this,e={url:"/certifications/certification_awarded_enrollments_count.json",params:{certification_id:e}};return n.get(null,e,null).then(function(){t.data=n.data})},e}window.angular.module("lu").factory("CertificationsFactory",e),e.$inject=["learnUponApi"]}(),window.angular.module("lu").factory("ChecklistFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="checklists",this.data=null,this.meta=null};return t.prototype.getList=function(e){var t=this;return r.getList(t.objectName,e).then(function(){t.meta=r.data.checklists.meta,t.data=r.data})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t.prototype.reorder=function(e){var t=this,e={url:"/checklists/reorder.json",data:e};return r.post(null,e,null).then(function(){t.data=r.data})},t}]),window.angular.module("lu").factory("ChecklistQuestionFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="checklist_questions",this.data=null,this.meta=null};return t.prototype.getList=function(e){var t=this;return e.url=e.checklist_id+".json",r.getList(t.objectName,e).then(function(){t.meta=r.data.checklist_questions.meta,t.data=r.data.checklist_questions.data})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),function(){"use strict";function e(e,t){var n=new t,t=function(){this.objectName="clients",this.data=null,this.meta=null};return t.prototype.getList=function(e){var t=this;return n.getList(t.objectName,e).then(function(){t.meta=n.data.clients.meta,t.data=n.data})},t.prototype.destroy=function(e){var t=this;return n.destroy(t.objectName,{},e).then(function(){t.data=n.data})},t.prototype.deactivateUsers=function(e){var t=this;return n.put(t.objectName,{action:"/manage-users",params:{deactivate_users:!0}},e).then(function(){t.data=n.data})},t.prototype.activateUsers=function(e){var t=this;return n.put(t.objectName,{action:"/manage-users",params:{activate_users:!0}},e).then(function(){t.data=n.data})},t}window.angular.module("lu").factory("learnUponClient",e),e.$inject=["$log","learnUponApi"]}(),window.angular.module("lu").factory("ComponentElementFactory",["$log","learnUponApi","LupHelper","$timeout","$q",function(e,t,r,n,i){var s=new t,o=i.defer(),t=function(e){this.objectName="component_elements",this.id=null,this.data=null,this.tip=null,this.meta=null,this.component_element=null,this.wasCreated=!1};return t.prototype.getNewURL=function(e,t,n){return e?"/courses/"+e+"/content/"+t+"/edit/"+n+"/new":"/components/"+t+"/edit/"+n+"/new"},t.prototype.getModalConfig=function(e){var t={windowClass:""};switch(e){case r.componentElementTypes.document:t.template="/tc/component_elements/edit_document.html",t.controller="DocumentEditController";break;case r.componentElementTypes.video:t.template="/tc/component_elements/edit_video.html",t.controller="VideoEditController";break;case r.componentElementTypes.text:t.template="/tc/component_elements/edit_text.html",t.controller="TextSegmentEditController",t.windowClass="modal-text-segment";break;case r.componentElementTypes.audio:t.template="/tc/component_elements/edit_audio.html",t.controller="AudioEditController"}return t},t.prototype.getInitObject=function(e,t,n){n={url:this.getNewURL(e,t,n)+".json"};return s.get(null,n).then(function(){return s.data.component_element})},t.prototype.getComponentElement=function(n,e,t){var o;if(t=t||!1,this.component_element=e.filter(function(e,t){return e.id==n&&(o=t),e.id==n})[0],this.readyForViewing())return i.when(this.component_element);var r=this,a={};return a.hideSpinner=t,s.get(r.objectName,a,r.component_element.id).then(function(){return e[o]=s.data.component_element,r.component_element=s.data.component_element,s.data.component_element})},t.prototype.getVideoCaptionData=function(n,e,t){if(t=t||!1,this.component_element=e.filter(function(e,t){return e.id==n&&0,e.id==n})[0],this.component_element.caption_status!=r.videoCaptionStatuses.processing)return i.when(this.component_element);var o=this,e={};return e.hideSpinner=t,s.get(o.objectName,e,o.component_element.id).then(function(){return o.component_element.caption_status=s.data.component_element.caption_status,s.data.component_element})},t.prototype.edit=function(e){var t=this;return s.show(t.objectName,{},e).then(function(){t.component_element=s.data.component_element,t.tip=s.data.tip,t.id=t.component_element.id})},t.prototype.destroy=function(e){var t=this;return s.destroy(t.objectName,{},e).then(function(e){return t.component_element=null,t.id=null,e})},t.prototype.setNumberOfPagesInDocument=function(e){if(this.component_element.num_pages===e)return o.promise;var t={data:{}};return t.data.component_element={},t.data.component_element.num_pages=e,t.action="/set_pages_number",t.hideSpinner=!0,s.put(this.objectName,t,this.id).then(function(){})},t.prototype.save=function(e,t){var n=this;n.component_element=t,n.wasCreated=!1;t={data:{}};return n.id?t.data.id=n.id:n.component_element&&(n.component_element.component_element_id?n.id=n.component_element.component_element_id:n.id=n.component_element.id),n.component_element.id||(n.component_element.component_element_type_id===r.componentElementTypes.document?t.url="/resources":n.component_element.component_element_type_id===r.componentElementTypes.video?t.url="/videos":n.component_element.component_element_type_id===r.componentElementTypes.audio&&(t.url="/audios")),!!e&&(t.data.component_id=e,n.component_element&&(t.data.component_element=n.component_element),n.id?s.put(n.objectName,t,n.id).then(function(){n.component_element=s.data.component_element,n.tip=s.data.tip,n.id=n.component_element.id}):s.create(n.objectName,t).then(function(){n.component_element=s.data.component_element,n.tip=s.data.tip,n.id=n.component_element.id,n.wasCreated=!0}))},t.prototype.readyForViewing=function(){if(this.component_element.component_element_type_id===r.componentElementTypes.document){if("viewable"===this.component_element.document_status)return!0}else if(this.component_element.component_element_type_id===r.componentElementTypes.video){if("finished"===this.component_element.encoded_state)return!0}else if(this.component_element.component_element_type_id===r.componentElementTypes.audio){if("finished"===this.component_element.encoded_state)return!0}else if(this.component_element.component_element_type_id===r.componentElementTypes.text)return!!this.component_element.detail;return!1},t.prototype.failedToProcess=function(){if(this.component_element.component_element_type_id===r.componentElementTypes.document){if(this.component_element.document_status===r.component_element_statuses.failed)return!0}else if(this.component_element.component_element_type_id===r.componentElementTypes.video&&this.component_element.encoded_state===r.component_element_statuses.failed)return!0;return!1},t.prototype.stillProcessing=function(){if(this.component_element.component_element_type_id===r.componentElementTypes.document){if("processing"===this.component_element.document_status)return!0}else if(this.component_element.component_element_type_id===r.componentElementTypes.video){if("unencoded"===this.component_element.encoded_state||"processing"===this.component_element.encoded_state)return!0}else if(this.component_element.component_element_type_id===r.componentElementTypes.audio&&("unencoded"===this.component_element.encoded_state||"processing"===this.component_element.encoded_state))return!0;return!1},t.prototype.loadSegmentIntoView=function(){var e=this,t={hideSpinner:!0};return s.get(e.objectName,t,e.id).then(function(){e.component_element=s.data.component_element})},t.prototype.downloadOriginalFile=function(e,t){var n=this,t={url:"/download_original_file/"+e+".json",params:{auth_token:t}};return s.get(n.objectName,t).then(function(){n.resource_url=s.data.resource_url})},t.prototype.downloadVideo=function(e){e={url:"/component_elements/"+e+"/download_video/"};return s.get(self.objectName,e).then(function(){window.open(s.data)})},t.prototype.uploadImage=function(){var e=this,t={url:"/component_elements/"+e.id+"/update_thumbnail.json?v="+e.video_id,hideSpinner:!0,data:{video_thumbnail_image:{uuid:e.uuid,image_file_name:e.image_file_name,output_url:e.output_url,video_id:e.video_id,portal_id:e.portal_id}}};return s.post(e.objectName,t).then(function(){e.data=s.data})},t}]),window.angular.module("lu").factory("ComponentFactory",["$log","learnUponApi","ComponentElementFactory","LupHelper","$timeout","$modal","$q",function(e,t,n,i,o,s,r){var l=new t,a=new n,n=function(){this.objectName="components",this.id=null,this.data=null,this.tip=null,this.meta=null,this.component=null,this.componentElements=[],this.loadedSegment=null,this.assignment_handouts=[]};return n.prototype.setReleaseDate=function(e){var t={};return t.data={course_component_id:e.course_component_id,release_at:e.release_at},t.action="/set_release_date",l.put(this.objectName,t,e.id).then(function(){})},n.prototype.getList=function(e){var t=this;return l.getList(t.objectName,e).then(function(){t.meta=l.data.components.meta,t.data=l.data})},n.prototype.reorderContent=function(e){var t={};return t.data={new_order:e.toString()},t.action="/reorder_content",l.put(this.objectName,t,this.id).then(function(){})},n.prototype.deleteSegment=function(n){var o=this;return a.loadedSegment=o.loadedSegment,void 0===n&&o.loadedSegment&&(n=o.loadedSegment.id),a.destroy(n).then(function(){var e=[];if(o.componentElements)for(var t=0;t<o.componentElements.length;t++)n!=o.componentElements[t].id&&e.push(o.componentElements[t]);o.componentElements=e,o.loadedSegment=null})},n.prototype.destroy=function(e,t){var n=this,o={params:{}};return void 0!==t&&(o.params.course_id=t),l.destroy(n.objectName,o,e).then(function(e){return this.component=null,this.componentElements=[],this.assignment_handouts=[],this.loadedSegment=null,n.id=null,e})},n.prototype.save=function(e){var t=this,n={data:{}};return t.component&&t.component.id&&(t.id=t.component.id),t.id&&(n.data.id=t.id),e&&(n.data.course_id=e),t.component&&(n.data.component=t.component,t.component.component_type_id==i.componentTypes.scorm?n.data.component.description=document.getElementById("course_form_description").value:t.component.component_type_id==i.componentTypes.session&&(n.data.component.start_at=t.component.start_datetime_tz,n.data.component.end_at=t.component.end_datetime_tz,n.data.component.assignment_question_text=i.getHTMLFromCKEditor("ilt_description_text_wysi"))),t.id&&!t.component.is_replacement?l.put(t.objectName,n,t.id).then(function(){t.component=l.data.component,t.tip=l.data.tip,t.id=t.component.id}):(t.component.component_type_id==i.componentTypes.scorm&&(n.url="/scormzipfiles"),l.create(t.objectName,n).then(function(){t.component.bulk||(t.component=l.data.component,t.tip=l.data.tip,t.id=t.component.id,t.assignment_handouts=[],t.component.assignment_handouts=t.assignment_handouts)}))},n.prototype.pingScormForProgress=function(){var e=this,t={};return e.component.s3_scorm_status!==i.s3ScormStatuses.pending||e.component.retry_permitted?r.reject("Error"):(t.hideSpinner=!0,l.get(e.objectName,t,e.component.id).then(function(){e.component=l.data.component}))},n.prototype.cancelSession=function(t,n,o,r){var a=this;s.open({templateUrl:"/tc/courses/components/sessions/cancel.html",controller:"CoursesComponentsSessionsCancelController as vm",size:"lg",resolve:{course:function(){return n},component:function(){return t}}}).result.then(function(e){e={what_to_do_if_cancelled:e,bulk_set:!1,status_id_to_set:i.enrollmentStatuses.cancelled,cancel_session:!0,course_id:n.id},e={url:"/components/sessions/:component_id/mark_attended_status.json".replace(/:component_id/,t.id),data:e};return l.put(a.objectName,e,null).then(function(e){o(e)}).catch(function(e){r(e)})})},n.prototype.getAttendees=function(e,t,n){n={url:"/courses/:course_id/content/:component_id/manage-attendees.json".replace(/:course_id/,e).replace(/:component_id/,t),params:n};return l.get(this.objectName,n).then(function(e){return e})},n}]),function(){"use strict";function e(s){return{calculateSessionAvailability:function(e,t){var n=e.max_capacity-e.number_enrolled_on_session,o=e.enable_waitlist,r=e.waitlist_type,a=e.course_enable_waitlist,i=e.course_waitlist_type,a=1==o?o:a,i=1==o?r:i;if(null==e.max_capacity)return I18n.t("custom_email_templates.unlimited");if(0==n&&a&&(i==s.waitlist_types.manually&&0<=t||null==t))return I18n.t("lup.courses.waitlist_open");if(0==n&&a&&i==s.waitlist_types.automatic&&0<=t)return I18n.t("lup.courses.num_on_waitlist",{waitlist_num:t});if(0==n)return I18n.t("lup.courses.full");if(0<n)return I18n.t("lup.courses.seats",{seats:n})},showSessionStatus:function(e,t,n){return e!=I18n.t("ilts.waitlisted")||t.waitlist_type!=s.waitlist_types.automatic&&t.course_waitlist_type!=s.waitlist_types.automatic?e:I18n.t("lup.courses.num_on_waitlist",{waitlist_num:n})}}}angular.module("lu").factory("ComponentService",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(e){function c(e){for(var t,n=document.cookie.split(";"),o=e+"=",r=0;r<n.length;r++){var a=n[r].indexOf(o);if(-1!==a){try{t=atob(n[r].substring(o.length+a,n[r].length))}catch(e){t=n[r].substring(o.length+a,n[r].length)}return t}}return"{}"}function i(e,t){var n;try{n=angular.fromJson(c(e))}catch(e){n={}}return void 0===n[t]?{}:n[t]}function s(e,t,n,o,r){var a={};try{a=angular.fromJson(c(e))}catch(e){a={}}var i=angular.copy(a);a[t]={};var s,l,r=r?"secure;":"";for(s in n)n.hasOwnProperty(s)&&null!==n[s]&&""!==n[s]&&(a[t][s]=n[s]);if(angular.equals(a,{})&&(o=0),!angular.equals(a,i)){try{l=btoa(angular.toJson(a))}catch(e){l=angular.toJson(a)}document.cookie=e+"="+l+";max-age="+3600*o+";path=/;"+r}}return{getCookieValue:c,setCookieValue:s,getJsonFromCookie:i,cookieExists:function(e,t){t=i(e,t);return!angular.equals(t,{})},setPageNumberOnCookie:function(e,t,n,o,r){var a=i(e,t);return void 0===a?{}:(a.page=n,s(e,t,a,o,r),a)}}}angular.module("lu").factory("CookiesService",e),e.$inject=["LupHelper"]}(),function(){"use strict";function e(e,r,t,n,o,a){var i=new e,e=function(e){this.objectName="coupon",this.couponType=e,this.createUrl=function(){return"/coupons/:coupon_type.json".replace(/:coupon_type/,this.couponType)},this.updateUrl=function(e){return"/coupons/:coupon_type/:coupon_id.json".replace(/:coupon_type/,this.couponType).replace(/:coupon_id/,e)},this.destroyUrl=function(e){return"/coupons/:coupon_type/:coupon_id.json".replace(/:coupon_type/,this.couponType).replace(/:coupon_id/,e)}};return e.prototype.edit=function(e,t){var n=this;o.open({templateUrl:"/tc/coupons/update.html",controller:"CouponsUpdateController as vm",size:"lg",resolve:{coupon:function(){return e},couponType:function(){return n.couponType}}}).result.then(function(e){t(e)})},e.prototype.new=function(t){var e=this;o.open({templateUrl:"/tc/coupons/create.html",controller:"CouponsCreateController as vm",size:"lg",resolve:{couponType:function(){return e.couponType}}}).result.then(function(e){t(e)})},e.prototype.create=function(e){e={url:this.createUrl(),data:{coupon_form_data:e}};return i.post(this.objectName,e).then(function(e){return e})},e.prototype.update=function(e,t){t={url:this.updateUrl(e),data:{coupon_form_data:t}};return i.put(this.objectName,t,e).then(function(e){return e})},e.prototype.destroy=function(t){var n=this,o={url:n.destroyUrl(t)};return r.confirm(I18n.t("lup.confirm"),I18n.t("coupons.are_your_sure_you_want_to_delete_this_coupon")).then(function(e){return i.destroy(n.objectName,o,t).then(function(e){return e})})},e}angular.module("lu").factory("CouponFactory",e),e.$inject=["learnUponApi","$luPopover","$http","$window","$modal","spinnerService"]}(),function(){"use strict";function e(r,a,i,o,t,s,l,n,c,u){return{deleteCourse:function(n){var t={id:n.course.id,published_status_id:n.course.published_status_id,version:n.course.version};{var o,e;t.published_status_id===r.coursePublishedStatuses.published||t.published_status_id===r.coursePublishedStatuses.under_revision?(o=new i,Promise.all([o.getNumberOfLearningPaths(t.id,!0,!1),o.getRelatedLearningJourneys(t.id,1,!1)]).then(function(){if(o.isFirstOnAnyLearningPath)throw new Error("Cannot delete course that is first on a learning path");if(o.referenceFound&&!o.referenceWorkflows.every(function(e){return e.status===r.learningJourneyStatuses.version_archived}))throw new Error("Cannot delete course that is a part of learning journey");return o.numberOfLearningPaths}).then(function(e){n.enrollment_approvals_enabled?o.getNumberOfEnrollmentRequests(t.id).then(function(){d(n,e,o.numberOfEnrollmentRequests)}):d(n,e,0)}).catch(function(e){var t;o.referenceFound?(t=r.showMessage("lup.ljw.courses.delete_block_single"),0<o.referenceWorkflows.length&&(t=r.showMessage("lup.ljw.courses.delete_block_multi")+" "+o.referenceWorkflows.map(function(e){return e.name}).join(", ")),u.error(t)):s.document.location.href="/courses/"+n.course.id})):t.published_status_id===r.coursePublishedStatuses.archived?(o=new i).getRelatedLearningJourneys(t.id,1,!1).then(function(){if(o.referenceFound){var e=r.showMessage("lup.ljw.courses.delete_block_single");return 0<o.referenceWorkflows.length&&(e=r.showMessage("lup.ljw.courses.delete_block_multi")+" "+o.referenceWorkflows.map(function(e){return e.name}).join(", ")),u.error(e),Promise.reject()}e=r.showMessage("courses.are_your_sure_you_want_to_delete_this_archived_course");return a.confirm(I18n.t("lup.confirm"),e)}).then(function(e){return t.published_status_id=r.coursePublishedStatuses.deleted,o.save(t)}).then(function(){s.document.location.href="/courses"}).catch(function(e){}):(e=r.showMessage("courses.are_your_sure_you_want_to_delete_this_course"),t.published_status_id===r.coursePublishedStatuses.draft&&1<t.version&&(e=r.showMessage("courses.this_isa_new_version_of_an_existing_course_if_the_prev_version_is_urevision_it_will_go_to_published_again_ok")),a.confirm(I18n.t("lup.confirm"),e).then(function(e){t.published_status_id=r.coursePublishedStatuses.deleted,(new i).save(t).then(function(){s.document.location.href="/courses"})}))}},publishCourse:function(n){{var e;n.course.published_status_id===r.coursePublishedStatuses.draft&&1<n.course.version?(e=new i,Promise.all([e.getNumberOfLearningPaths(n.course.id,!1,!1),e.getRelatedLearningJourneys(n.course.id,1,!0)]).then(function(){o.open({templateUrl:"/tc/courses/publish_course_choice.html",controller:"PublishCourseChoiceController",backdrop:!0,resolve:{course:function(){return n.course},numberOfLearningPaths:function(){return e.numberOfLearningPaths},referenceFound:function(){return e.referenceFound},referenceWorkflows:function(){return e.referenceWorkflows}}})})):a.confirm(I18n.t("lup.confirm"),I18n.t("courses.are_your_sure_you_want_to_publish_this_course")).then(function(e){var t=new i;t.id=n.course.id,t.publishCourse(n.course.id,r.coursePublishedStatuses.published).then(function(){s.location="/courses/"+n.course.id})})}},exportToExcel:function(e){var t=new l;e.typeId=r.lupJobTypes.exportCoursesToExcel,t.initiateJob(e)},exportAllCourseRatingsAndReviews:function(){var e=new l,t={typeId:r.lupJobTypes.exportAllCourseReviews};e.initiateJob(t)},exportSignedEsignatureModules:function(e){var t={},n=new l;t.typeId=r.lupJobTypes.exportSignedEsignatureModules,t.course_id=e,n.initiateJob(t)},createNewCourseVersion:function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("courses.are_you_sure_new_version")).then(function(e){document.location.href="/courses/"+t.course.id+"?newver=1"})},archiveCourse:function(e){var t={id:e.course.id,published_status_id:e.course.published_status_id};{var n;t.published_status_id===r.coursePublishedStatuses.published?(n=new i,Promise.all([n.getNumberOfLearningPaths(t.id,!1,!0),n.getNamesOfLearningPaths(t.id),n.getRelatedLearningJourneys(t.id,1,!1)]).then(function(){o.open({templateUrl:"/tc/courses/archive_course.html",controller:"CoursesArchiveController as vm",size:"md",resolve:{course:function(){return e.course},numberOfLearningPaths:function(){return n.numberOfLearningPaths},namesOfLearningPaths:function(){return n.namesOfLearningPaths},referenceFound:function(){return n.referenceFound},referenceWorkflows:function(){return n.referenceWorkflows}}})})):a.notify(I18n.t("lup.confirm"),I18n.t("coursez.cannot_archive_course")).then(function(){s.document.location.href="/courses/"+e.course.id})}},createCourseCopy:function(e){o.open({templateUrl:"/tc/courses/clone_course.html",controller:"CoursesCloneController",size:"md",resolve:{courseCloneData:function(){return n.get("/courses/initiate_clone/:course_id.json".replace(/:course_id/,e))},user_allowed_to_copy_courses:function(){return c.user_allowed_to_copy_courses}}})},openEmbedCourseLinkModal:function(e){o.open({templateUrl:"/tc/courses/generate_embed_link_modal.html",controller:"CoursesGenerateEmbedLinkController",size:"md",resolve:{courseId:function(){return e}}})},save:function(e){e.$valid&&(t.showGroup("luSpinnerGlobal"),e.commit())}};function d(e,t,n){o.open({templateUrl:"/tc/courses/delete_course_choice.html",controller:"DeleteCourseChoiceController",size:"lg",resolve:{course:function(){return e.course},numberOfLearningPaths:function(){return t},numberOfEnrollmentRequests:function(){return n}}})}}angular.module("lu").factory("CourseActionFactory",e),e.$inject=["LupHelper","$luPopover","CourseFactory","$modal","spinnerService","$window","LupJobFactory","$http","$rootScope","toastr"]}(),function(){"use strict";function e(e){var n=new e;return{objectName:"course_instructor_learners",data:null,meta:null,getList:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);e.url="/courses/"+e.course_id+"/instructors/"+e.instructor_id+"/learners.json";var t=this;return n.getList(null,e).then(function(){t.meta=n.data.enrollments.meta,t.data=n.data})}}}angular.module("lu").factory("CourseInstructorLearnersFactory",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(e){var n=new e;return{objectName:"course_instructors",data:null,meta:null,getList:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);e.url="/courses/"+e.course_id+"/instructors.json";var t=this;return n.getList(null,e).then(function(){t.meta=n.data.instructors.meta,t.data=n.data})}}}angular.module("lu").factory("CourseInstructorsFactory",e),e.$inject=["learnUponApi"]}(),function(){function e(e){var o=new e;return{objectName:"course_questions",data:null,meta:null,getList:function(e){(e=e||{}).url||(e.url="/courses/"+e.course_id+"/questions.json");void 0===e.hideSpinner&&(e.hideSpinner=!0);var t=this;return o.getList(t.objectName,e).then(function(e){return t.meta=o.data.questions.meta,t.data=o.data,e})},getQuestionDetails:function(e){var t=this,n="/courses/"+(e=e||{}).course_id+"/questions/"+e.question_id+".json";return e.url=n,o.get(t.objectName,e,"").then(function(e){return t.meta=o.data.answers.meta,t.data=o.data,e})},destroy:function(e){var t=this;return o.destroy(t.objectName,{},e).then(function(){t.data=o.data})}}}angular.module("lu").factory("CourseQuestionsFactory",e),e.$inject=["learnUponApi"]}(),function(){function e(e){var n=new e;return{objectName:"reviews",data:null,meta:null,getList:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);var t=this;return n.getList(t.objectName,e).then(function(){t.meta=n.data.reviews.meta,t.data=n.data})},doDelete:function(e){var t=this;return n.destroy(t.objectName,{},e).then(function(){t.data=n.data})}}}angular.module("lu").factory("CourseReviewFactory",e),e.$inject=["learnUponApi"]}(),window.angular.module("lu").factory("CourseFactory",["$log","learnUponApi","ComponentFactory","$luPopover","LupHelper",function(e,t,n,o,r){var a=new t,i=new n,n=function(){this.objectName="courses",this.id=null,this.data=null,this.tip=null,this.meta=null,this.component=null,this.loadedSegment=null,this.componentElements=[],this.enrollments=null,this.deletedComponent=!1,this.numberOfLearningPaths=0,this.namesOfLearningPaths=""};return n.prototype.getRelatedLearningJourneys=function(e,t,n){var o=this,r={};return r.id=e,r.type=t,r.for_reversioning=n,r.url="/angie/learning-journeys/references/"+t+"/"+e+(n?".json?for_reversioning=true":".json"),a.get(o.objectName,r,e).then(function(){o.referenceFound=a.data.data.reference_found,o.referenceWorkflows=a.data.data.workflows})},n.prototype.getNumberOfLearningPaths=function(e,t,n){var o=this,r={};return r.id=e,r.url="/courses/"+e+"/number_of_paths.json?deletingCourse="+t+"&archivingCourse="+n,a.get(o.objectName,r,e).then(function(){o.numberOfLearningPaths=a.data.numberOfLearningPaths,o.isFirstOnAnyLearningPath=a.data.isFirstOnAnyLearningPath})},n.prototype.getNamesOfLearningPaths=function(e){var t=this,n={};return n.id=e,n.url="/courses/"+e+"/names_of_paths.json",a.get(t.objectName,n,e).then(function(){t.namesOfLearningPaths=a.data.namesOfLearningPaths})},n.prototype.getNumberOfEnrollmentRequests=function(e){var t=this,n={};return n.url="/courses/"+e+"/enrollment-approvals.json",a.get(t.objectName,n,e).then(function(){t.numberOfEnrollmentRequests=a.data.pending_enrollment_approvals_count})},n.prototype.save=function(e){var t={data:{}};return t.data.course_form=e,a.put(this.objectName,t,e.id).then(function(){})},n.prototype.publishNewVersion=function(e){var t=this,n={data:{}};return n.data.whatToDo=e,n.data.published_status_id=e.published_status_id,n.action="/publish_new_version",a.put(t.objectName,n,e.id).then(function(){t.data=a.data})},n.prototype.updateStatus=function(e){var t={data:{}};return t.data.whatToDo=e,t.action="/update_status",a.put(this.objectName,t,e.id).then(function(){})},n.prototype.archiveCourse=function(e){var t=this,n={data:{whatToDo:e},action:"/archive",url:"/courses/:course_id/archive.json".replace(/:course_id/,e.course.id)};return a.put(t.objectName,n,e.id).then(function(){t.data=a.data})},n.prototype.getList=function(e){var t=this,e={url:"/all_courses.json",params:e.params};return a.getList(t.objectName,e).then(function(){t.meta=a.data.courses.meta,t.data=a.data})},n.prototype.getListIndex=function(e){var t=this;return a.getList(t.objectName,e).then(function(){t.meta=a.data.courses.meta,t.data=a.data})},n.prototype.getGroups=function(e){var t=this,e={url:"/courses/:course_id/groups.json".replace(/:course_id/,e)};return a.getList(t.objectName,e).then(function(){t.data=a.data})},n.prototype.getEnrollmentList=function(e){var t=this;return a.getList("courses/"+t.id+"/enrollments",e).then(function(){t.can_mark_complete=a.data.can_mark_complete,t.enrollments=a.data.enrollments,t.enrollment_approvals=a.data.enrollment_approvals,t.counts=a.data.counts,t.groups=a.data.groups})},n.prototype.reorderContent=function(e){var t={};return t.data={new_order:e.toString()},t.action="/reorder_content",a.put(this.objectName,t,this.id).then(function(){})},n.prototype.saveComponent=function(){var e=this;return i.component=e.component,i.save(e.id).then(function(){e.component=i.component})},n.prototype.deleteComponent=function(e,t){var n=this;return n.deletedComponent=!1,void 0===e&&n.component&&(e=n.component.id),i.destroy(e,n.id).then(function(){n.deletedComponent=!0,n.component=null})},n.prototype.getAssignments=function(e,t){var n=this;return a.getList("courses/"+e+"/assignments",t).then(function(){n.data=a.data})},n.prototype.updateCatalogSettings=function(e,t){t={url:"/courses/:course_id/catalog.json".replace(/:course_id/,e),data:t};return a.put(this.objectName,t,e).then(function(e){return e})},n.prototype.updateSalesSettings=function(e,t){t={url:"/courses/:course_id/sales.json".replace(/:course_id/,e),data:t};return a.put(this.objectName,t,e).then(function(e){return e})},n.prototype.getCoupons=function(e,t){return t.url="/courses/:course_id/sales/coupons.json".replace(/:course_id/,e),a.get(this.objectName,t,e).then(function(e){return e})},n.prototype.addAssociationPrice=function(e,t,n){n={url:"/courses/:course_id/add_association_price.json".replace(/:course_id/,e),data:t,reload:n};return a.post(this.objectName,n,e).then(function(e){return e})},n.prototype.removeAssociationPrice=function(e,t,n){n={url:"/courses/:course_id/remove_association_price.json".replace(/:course_id/,e),data:t,reload:n};return a.post(this.objectName,n,e).then(function(e){return e})},n.prototype.createPreviewCourse=function(e){var t=this,n={url:"/courses/"+e+"/create_preview_enrollment.json"};return a.post(t.objectName,n,e).then(function(){t.data=a.data,t.renderMathJax()})},n.prototype.updateWaitlistSettings=function(e,t){t={url:"/courses/:course_id/update_waitlist_settings.json".replace(/:course_id/,e),data:{waitlist_form_data:t}};return a.put(this.objectName,t,e).then(function(e){return e})},n.prototype.getWaitlistEnrollments=function(e,t){t={url:"/courses/:course_id/content/manage-waitlist.json".replace(/:course_id/,e),params:t};return a.get(this.objectName,t,e).then(function(e){return e})},n.prototype.promoteFromWaitlist=function(e,t){t={url:"/courses/:course_id/promote_from_waitlist/:waitlist_enrollment_id.json".replace(/:course_id/,e).replace(/:waitlist_enrollment_id/,t)};return a.put(this.objectName,t,e).then(function(e){return e})},n.prototype.removeFromWaitlist=function(e,t){t={url:"/courses/:course_id/remove_from_waitlist/:waitlist_enrollment_id.json".replace(/:course_id/,e).replace(/:waitlist_enrollment_id/,t)};return a.put(this.objectName,t,e).then(function(e){return e})},n.prototype.doSetAsThumbnail=function(e){(e=e||{}).url="/courses/set_as_thumbnail/"+e.image_id+".json";var t=this;return a.put(null,e).then(function(){t.data=a.data})},n.prototype.doUnsetAsThumbnail=function(e){(e=e||{}).url="/courses/remove_thumbnail_from_course/"+e.course_id+".json";var t=this;return a.put(null,e).then(function(){t.data=a.data})},n.prototype.doDestroyImage=function(e){var t=this;return a.destroy("course_images",{},e).then(function(){t.data=a.data})},n.prototype.publishCourse=function(e,t){var n=this,t={url:"/courses/"+e+".json",data:{course_form:{published_status_id:t}}};return a.post(n.objectName,t,e).then(function(){n.data=a.data})},n.prototype.getUnknownEnrollments=function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);var t=this;return a.getList(t.objectName,e).then(function(){t.meta=a.data.unknown_enrollments.meta,t.data=a.data})},n.prototype.uploadImage=function(){var e=this,t={url:"/course_images.json",hideSpinner:!0,data:{course_image:{uuid:e.uuid,image_file_name:e.image_file_name,output_url:e.output_url,course_id:e.course_id,portal_id:e.portal_id,alt_tag:e.alt_tag}}};return a.post(e.objectName,t).then(function(){e.data=a.data})},n.prototype.getBreadcrumbTitle=function(e,t){return!t||t<2?e:e+(" ("+r.showMessage("courses.version")+" "+t+")")},n.prototype.updateForumSettings=function(e,t){var n=this,t={url:"/courses/:course_id/update_forum_settings.json".replace(/:course_id/,e),data:t};return a.post(null,t,null).then(function(){n.data=a.data})},n.prototype.renderMathJax=function(){Promise.resolve(null).then(function(){window.MathJax.Hub.Typeset()})},n.prototype.getChecklistForPendingObservation=function(e,t){var n=this;return a.getList("courses/"+e+"/checklists_observation",t).then(function(){n.data=a.data})},n}]),function(){"use strict";function e(){var n="x-xsrf-token",o="csrf-token",r=["POST","PUT","PATCH","DELETE"];function e(){return{request:function(e){if(-1==r.indexOf(e.method))return e;{var t;!$||(t=$("meta[name='"+o+"']"))&&0<t.length&&((t=t.attr("content"))&&(e.headers[n]=t))}return e}}}this.setHeaderName=function(e){n=e},this.setTokenName=function(e){o=e},this.setAllowedMethods=function(e){r=e},(this.$get=e).$inject=[]}function t(e){e.interceptors.push("csrfTokenizer")}t.$inject=["$httpProvider"],angular.module("lu.interceptors",[]).provider("csrfTokenizer",e).config(t),e.$inject=[]}(),window.angular.module("lu").factory("CustomCourseDataFactory",["$log","learnUponApi","$luPopover",function(e,t,n){var o=new t,t=function(){this.objectName="settings/courses/customdata",this.id=null,this.data=null};return t.prototype.reorderContent=function(e){var t={};return t.data={new_order:e.toString()},t.action="/reorder_content",o.put(this.objectName,t,this.id).then(function(){})},t.prototype.destroy=function(e){var t=this;return o.destroy("custom_course_datas",{},e).then(function(){t.data=o.data})},t.prototype.getList=function(e){var t=this;return o.getList(t.objectName,e).then(function(){t.data=o.data})},t}]),window.angular.module("lu").factory("CustomUserDataFactory",["$log","learnUponApi","$luPopover",function(e,t,n){var o=new t,t=function(){this.objectName="settings/users/customdata",this.id=null,this.data=null};return t.prototype.reorderContent=function(e){var t={};return t.data={new_order:e.toString()},t.action="/reorder_content",o.put(this.objectName,t,this.id).then(function(){})},t.prototype.destroy=function(e){var t=this;return o.destroy("custom_user_datas",{},e).then(function(){t.data=o.data})},t.prototype.getList=function(e){var t=this;return o.getList(t.objectName,e).then(function(){t.data=o.data})},t}]),function(){"use strict";function e(e,a){var i=new e,e=function(){this.objectName="email_banners",this.data=null,this.meta=null};return e.prototype.update=function(e,t){var n=this,o={url:"/email_banners/"+e+".json",data:t},r=a.defer();return i.put(null,o,null).then(function(e){n.data=i.data,n.data.error?r.reject("Failed to update email banner"):r.resolve(n.data)}),r.promise},e.prototype.create=function(e){var t=this,n={url:"/email_banners.json",data:e},o=a.defer();return i.post(null,n,null).then(function(e){t.data=i.data,t.data.error?o.reject("Failed to create email banner"):o.resolve(t.data)}),o.promise},e.prototype.delete=function(e){var t=this,e={url:"/email_banners/"+e+".json",hideSpinner:!0},n=a.defer();return i.destroy(null,e,null).then(function(){t.data=i.data,t.data.error?n.reject("Failed to delete email banner"):n.resolve(t.data)}),n.promise},e.prototype.setDefault=function(e){var t=this,e={url:"/email_banners/"+e+"/set_default.json",hideSpinner:!1},n=a.defer();return i.put(null,e,null).then(function(){t.data=i.data,t.data.error?n.reject("Failed to set banner as default"):n.resolve(t.data)}),n.promise},e}angular.module("lu").factory("EmailBannerFactory",e),e.$inject=["learnUponApi","$q"]}(window.angular),function(){"use strict";function e(e,t){var n=new e,e=function(e){this.id=e.id,0};return e.approveEnrollmentRequest=function(e){e={url:"/enrollment-approvals/:id/approve.json".replace(/:id/,e)};return n.put("EnrollmentApprovals",e).then(function(e){return e})},e.approveEnrollmentRequests=function(e){e={url:"/enrollment-approvals/approve.json",data:{ids:e}};return n.post("EnrollmentApprovals",e).then(function(e){return e})},e.rejectEnrollmentRequest=function(e){e={url:"/enrollment-approvals/:id/reject.json".replace(/:id/,e)};return n.put("EnrollmentApprovals",e).then(function(e){return e})},e.rejectEnrollmentRequests=function(e){e={url:"/enrollment-approvals/reject.json",data:{ids:e}};return n.post("EnrollmentApprovals",e).then(function(e){return e})},e.index=function(e){e={url:"/enrollment-approvals.json",params:e};return n.get("EnrollmentApprovals",e).then(function(e){return e})},e}angular.module("lu").factory("EnrollmentApprovalFactory",e),e.$inject=["learnUponApi","LupHelper"]}(),window.angular.module("lu").factory("EnrollmentComponentElementFactory",["$log","learnUponApi","$sanitize",function(e,t,n){var o=new t,t=function(){this.objectName="enrollment_component_elements",this.enrollment=null,this.flags=null};return t.prototype.trackPageClick=function(e){var t=this;return o.get(t.objectName+"/track_pages",e,e.params.enrollment_component_id).then(function(){t.enrollment=o.data.enrollment.attributes,t.flags=o.data.flags.attributes})},t.prototype.trackVideoDuration=function(e){var t=this;return o.get(t.objectName+"/track_video_duration",e,e.params.enrollment_component_id).then(function(){t.enrollment=o.data.enrollment.attributes,t.flags=o.data.flags.attributes})},t}]),window.angular.module("lu").factory("EnrollmentComponentFactory",["$log","learnUponApi","$sanitize",function(e,t,n){var o=new t,t=function(){this.objectName="enrollment_components",this.pageElements=null,this.enrollment_component=null,this.assignment_handouts=null,this.assignment_uploads=null,this.tutors=null,this.meta=null,this.flags=null,this.is_last_page_in_course=!1,this.previous_enrollment_component=null,this.current_enrollment_component=null};return t.prototype.loadPage=function(e,t){var n=this;return n.previous_enrollment_component=n.current_enrollment_component,n.current_enrollment_component=t,o.get(n.objectName,e,t.id).then(function(){n.pageElements=o.data.elements,n.pageElements&&(n.meta=o.data.elements.meta),n.assignment_handouts=o.data.assignment_handouts,n.assignment_uploads=o.data.assignment_uploads,n.tutors=o.data.tutors,n.flags=o.data.flags.attributes,n.is_last_page_in_course=n.flags.is_last_page_in_course,n.enrollment_component=o.data.enrollment_component})},t}]),window.angular.module("lu").factory("EnrollmentComponentHelper",["$window","$filter","$rootScope","LupHelper",function(e,t,n,o){return{canMarkCompleted:function(e,t){var n=!1;return t?(e.component_type_id!==o.componentTypes.session&&e.component_type_id!==o.componentTypes.assignment&&e.enrollment_component_status_id==o.enrollmentStatuses.failed||e.enrollment_component_status_id<o.enrollmentStatuses.completed)&&e.component_type_id==o.componentTypes.scorm&&(n=!0):n=!1,n},canEditScore:function(e,t,n){return!(!n||!t)&&(!(!e.enrollment_exam_status_id||null===e.percentage||0!==e.is_survey)||(e.enrollment_component_status_id>=o.enrollmentStatuses.completed&&e.enrollment_component_status_id<o.enrollmentStatuses.pending_review?e.component_type_id==o.componentTypes.assignment&&null!==e.assignment_answer_percentage||(e.component_type_id==o.componentTypes.session||e.component_type_id==o.componentTypes.scorm):void 0))},canResetAttempts:function(e,t,n,o,r){return!!(t||n||o||r)&&!(!e.enrollment_exam_status_id&&0!==e.is_survey)}}}]),function(){"use strict";function e(e,t,n){new e;return{objectName:"enrollment_component_settings",data:null,meta:null,saveBypassSequenceSettings:function(e){e=e||{},t.post("/enrollment_components/override_sequencing.json",{data:e}).success(function(e){n.location.reload()}).error(function(){n.location.reload()})}}}angular.module("lu").factory("EnrollmentComponentSettingsFactory",e),e.$inject=["learnUponApi","$http","$window"]}(),window.angular.module("lu").factory("EnrollmentFactory",["$log","learnUponApi",function(e,t){var i=new t,t=function(){this.objectName="enrollments",this.data=null,this.meta=null};return t.prototype.get=function(e,t){var n=this;return i.get(n.objectName,e,t).then(function(){n.meta=i.data.meta,n.data=i.data})},t.prototype.enrollOnSessions=function(e,t,n){var o=this,n={url:"/enrollments/"+e+"/enroll_in_session",data:{prevent_succcess:!!n}};return n.data.sessions=t,i.create(o.objectName,n).then(function(){o.data=i.data})},t.prototype.saveAnswer=function(e,t,n,o){var r=this,a="/enrollments/"+t+"/page/"+n+"/answer-question";o&&(a="/enrollments/"+t+"/page/"+n+"/answer-preview-question");e={url:a,data:e.params};return i.create(r.objectName,e).then(function(){r.data=i.data,r.renderMathJax()})},t.prototype.startExam=function(e,t,n,o){var r=this,a="/enrollments/"+t+"/page/"+n+"/start-exam.json";o&&(a="/enrollments/"+t+"/page/"+n+"/start-preview-exam.json");e={url:a,data:e.params};return i.put(null,e,null).then(function(){r.data=i.data,r.renderMathJax()})},t.prototype.unenroll=function(e){var t=this,e={url:"/enrollments/"+e+"/unenroll.json",data:{id:e}};return i.post(t.objectName,e).then(function(){t.data=i.data})},t.prototype.unenrollPending=function(e,t){var n=this,t={url:"/enrollments/"+e+"/unenroll_pending.json",data:{lp:t}};return i.post(n.objectName,t).then(function(){n.data=i.data})},t.prototype.selfUnenroll=function(e){var t=this,e={url:"/enrollments/"+e+"/unenroll.json",data:{id:e,self:"true"}};return i.post(t.objectName,e).then(function(){t.data=i.data})},t.prototype.exportPending=function(e){var t=this,e={url:"/courses/"+e+"/export-pending-enrollments.csv"};return i.get(null,e,null).then(function(){t.meta=i.data.meta,t.data=i.data})},t.prototype.create=function(e){e={url:"/enrollments.json",data:e};return i.post(this.objectName,e).then(function(e){return e})},t.prototype.renderMathJax=function(){Promise.resolve(null).then(function(){window.MathJax.Hub.Typeset()})},t}]),window.angular.module("lu").factory("EnrollmentHelper",["$window","$filter","$rootScope","LupHelper","$luPopover","$modal","EnrollmentFactory","ReviewFactory","BadgesFactory","notifyFactory","LupJobFactory",function(r,t,n,l,o,a,i,s,c,u,e){var d={sequential:0,x_of_y:1},p=1,m=2,f=new e;function g(e,t,n,o){o=a.open({templateUrl:o?"/tc/shared/leave_review_dialog_redesign.html":"/tc/shared/leave_review_dialog.html",controller:"LeaveReviewController",backdrop:0===e.review_is_mandatory||"static",keyboard:0===e.review_is_mandatory,size:o?"redesign":"lg",resolve:{enrollment:function(){return e},review:function(){return t}}});n&&angular.isArray(n.data)&&0<n.data.length?o.result.then(function(){b(n)},function(){b(n)}):o.result.then(function(){h()},function(){h()})}function h(){"function"==typeof r.reloadDashboardCourses?r.reloadDashboardCourses():"function"==typeof r.reloadAfterReview&&r.reloadAfterReview()}function b(e){a.open({templateUrl:"/tc/badges/awarded_badges_modal.html",controller:"AwardedBadgesController",controllerAs:"vm",size:"lg",windowClass:"badge-modal",resolve:{badges:function(){return e}}}).result.then(function(){h()},function(){h()})}function v(e){return!e.has_expired&&(!!e.has_attempts_remaining||(!(e.status_id>l.enrollmentStatuses.in_progress&&e.status_id!=l.enrollmentStatuses.pending_review)||(1==e.allow_relaunch_after_completion||1==e.stick_to_dash)))}function w(e,t,n){if(1!=e.enable_sequencing||[l.enrollmentStatuses.completed,l.enrollmentStatuses.passed].includes(e.status_id))return!1;t.enrollment_component_status_id;var o,r,a,i,s=t.component_type_id;return s!==l.componentTypes.session&&s!==l.componentTypes.training&&((1!=t.is_survey||1!=t.survey_is_mandatory||e.status_id!=l.enrollmentStatuses.failed)&&(o=n,t=t,r=e,a=!0,i=_.findIndex(o,{id:t.id}),angular.forEach(o,function(e){var t=_.findIndex(o,{id:e.id});angular.isNumber(i)&&angular.isNumber(t)&&t<i&&(e.override_sequencing||e.enrollment_component_status_id!=l.enrollmentStatuses.completed&&e.enrollment_component_status_id!=l.enrollmentStatuses.passed&&(e.enrollment_component_status_id<l.enrollmentStatuses.completed&&e.component_type_id!==l.componentTypes.e_signature&&(a=!1),e.component_type_id===l.componentTypes.assignment&&e.enrollment_component_status_id==l.enrollmentStatuses.pending_review&&0===r.bypass_sequencing_on_assignments&&(a=!1),e.component_type_id===l.componentTypes.checklist&&e.enrollment_component_status_id==l.enrollmentStatuses.pending_review&&0===r.bypass_sequencing_on_checklists&&(a=!1),e.component_type_id===l.componentTypes.e_signature&&e.enrollment_component_status_id<l.enrollmentStatuses.completed&&0===r.bypass_sequencing_on_esignatures&&(a=!1),e.enrollment_component_status_id!=l.enrollmentStatuses.failed||angular.isNumber(r.pass_mark)||e.enrollment_exam_status_id&&(1==e.is_knowledge_test||1==e.is_survey)||(a=!1)))}),!a))}function y(e){e=new Date(e.release_at).getTime();return!(n.enable_module_release_dates&&e>Date.now())}function M(e,t){return e==l.enrollmentStatuses.in_progress?1===t?l.showMessage("course_assignments.assignment_rejected"):l.showMessage("dashboard.in_progress"):e==l.enrollmentStatuses.pending_review?l.showMessage("course_assignments.pending_review"):e==l.enrollmentStatuses.completed?l.showMessage("dashboard.completed"):e==l.enrollmentStatuses.passed?l.showMessage("dashboard.passed"):e==l.enrollmentStatuses.failed?l.showMessage("dashboard.failed"):e==l.enrollmentStatuses.waitlisted?l.showMessage("ilts.waitlisted"):e==l.enrollmentStatuses.cancelled?l.showMessage("lup.dashboard.cancelled"):l.showMessage("dashboard.not_started")}function S(e){var t=0;return 0<e.count_on_path&&(t=e.x_courses),t}function C(e){return e.status_id==l.enrollmentStatuses.completed||e.status_id==l.enrollmentStatuses.passed||e.status_id==l.enrollmentStatuses.failed}return{launchButtonText:function(e,t,n,o){var r="",a="";return t&&(r=l.showMessage("courses.details"),a='<i class="fa fa-eye mr-6"></i>'),void 0===(t=e.status_id)&&(t=e.enrollment_component_status_id),r=t===l.enrollmentStatuses.not_started||void 0===t?(a='<i class="fa fa-play mr-6"></i>',l.showMessage("lup.dashboard.start")):t===l.enrollmentStatuses.failed?1==e.has_attempts_remaining?(a='<i class="fa fa-repeat mr-6"></i>',l.showMessage("components.re_attempt")):(a='<i class="fa fa-repeat mr-6"></i>',l.showMessage("enrollments.relaunch")):t===l.enrollmentStatuses.in_progress?(a='<i class="fa fa-play mr-6"></i>',l.showMessage("lup.dashboard.resume")):o?(a="",l.showMessage("lup.dashboard.access_closed")):(a='<i class="fa fa-repeat mr-6"></i>',l.showMessage("enrollments.relaunch")),n&&(r=a+r),r},showScore:function(e){return null!=e.percentage&&0<e.number_scoreables&&C(e)&&1==e.show_scores_to_learners&&angular.isNumber(e.percentage)?e.percentage+"%":"-"},launchCourse:function(e){if(!v(e))return o.notify("",l.showMessage("course_access.access_denied_error_closed")),!1;if(1==e.auto_launch_scorm&&1!==e.launch_to_description){if(n.hidePreviewFooterAction=!0,1!=e.contains_tincans)return launch_scorm_course(0,e.id,!1);launch_tincan_course(0,e.id,f,n.tincan_completion_tracking)}else if(1==e.auto_launch_scorm&&1===e.launch_to_description&&null!==e.last_accessed_enrollment_component_id){if(n.hidePreviewFooterAction=!0,1!=e.contains_tincans)return launch_scorm_course(0,e.id,!1);launch_tincan_course(0,e.id,f,n.tincan_completion_tracking)}else if(e.component_type_id==l.componentTypes.scorm){if(n.hidePreviewFooterAction=!0,!e.is_tin_can)return launch_scorm_course(e.component_id,e.enrollment_id,!1);launch_tincan_course(e.component_id,e.enrollment_id,f,n.tincan_completion_tracking)}else null!==e.launch_to_description&&1===e.launch_to_description&&null===e.last_accessed_enrollment_component_id?document.location.href="/enrollments/"+e.id+"/description":document.location.href="/enrollments/"+e.id},showDifficulty:function(e){return 1==e.difficulty_level?l.showMessage("courses.basic"):2==e.difficulty_level?l.showMessage("courses.intermediate"):3==e.difficulty_level?l.showMessage("courses.advanced"):l.showMessage("courses.not_applicable")},displayTutorName:function(e){return e.personal_tutor_name?e.personal_tutor_name:e.course_tutor_name?e.course_tutor_name:"-"},activeOrSelected:function(e,t,n,o){return e.id==n.last_accessed_enrollment_component_id?"selected":!y(e)||0<o&&w(n,e,t)?"locked":e.enrollment_component_status_id==l.enrollmentStatuses.not_started?"not-started":e.enrollment_component_status_id==l.enrollmentStatuses.in_progress?"in-progress":e.enrollment_component_status_id==l.enrollmentStatuses.completed||e.enrollment_component_status_id==l.enrollmentStatuses.passed?"completed":e.enrollment_component_status_id==l.enrollmentStatuses.failed?"failed":e.enrollment_component_status_id==l.enrollmentStatuses.pending_review?"pending":"not-started"},launchPermitted:v,showStaggeredCourseDetails:function(e){return e.staggered_course_title&&0<e.staggered_course_title.length?l.showMessage("learningpaths.next_course_on_path_staggered",{trigger_at:t("displayDateTime")(e.trigger_at),course_name:e.staggered_course_title}):e.trigger_id&&0<e.trigger_id?l.showMessage("learningpaths.your_path_has_been_completed_staggered",{trigger_at:t("displayDateTime")(e.trigger_at),course_name:e.staggered_course_title}):e.course_title?e.status_id==l.enrollmentStatuses.not_started?l.showMessage("learningpaths.start_your_path",{course_name:e.course_title}):e.status_id==l.enrollmentStatuses.in_progress?l.showMessage("learningpaths.next_course_on_path",{course_name:e.course_title}):e.status_id==l.enrollmentStatuses.pending_review?l.showMessage("learningpaths.pending_review_next_course_on_path",{course_name:e.course_title}):void 0:void 0},moduleReleased:y,sequenceBlocked:w,translateEnrollmentStatus:function(e){var t=e.status_id,n=e.show_passfail_to_learners,o=e.must_choose_session,e=e.only_contains_sessions;return t==l.enrollmentStatuses.waitlisted?l.showMessage("ilts.waitlisted"):t==l.enrollmentStatuses.in_progress?l.showMessage("dashboard.in_progress"):t==l.enrollmentStatuses.pending_review?l.showMessage("course_assignments.pending_review"):t==l.enrollmentStatuses.closed?l.showMessage("learningpaths.closed"):t==l.enrollmentStatuses.completed?1==e?l.showMessage("ilts.attended"):l.showMessage("dashboard.completed"):t==l.enrollmentStatuses.passed?l.showMessage("dashboard.passed"):t==l.enrollmentStatuses.failed?1==n?l.showMessage("dashboard.failed"):l.showMessage("dashboard.completed"):o?l.showMessage("lup.dashboard.choose_session"):l.showMessage("dashboard.not_started")},launchPath:function(e,t){var n=e.id,o=e.learning_path_id;e.is_historical?l.showTip("learningpaths.see_other_version_l"):document.location.href=t?"/content-details/"+o+"/"+p:"/lpaths/"+n+"/details"},launchJourney:function(e){document.location.href="learning-journey-progression/"+e.workflow_id+"/"+e.version_id+"/"+e.user_id+"/"+e.enrollment_id},lpPercentageComplete:function(e){var t=0;return e.completion_logic==d.sequential?t=S(e)/e.count_on_path*100:0<e.x_courses&&(t=e.x_courses/e.lp_x_courses*100),100<t&&(t=100),parseInt(t)},learningPathProgressTypes:d,getLPXofYCompleted:function(e){var t=S(e),n=t;return(n=e.completion_logic==d.sequential?e.count_on_path:(t=e.x_courses,e.lp_x_courses))<t&&(t=n),t+"/"+n},showLeaveReviewDialog:g,translateAssignmentStatus:M,translateAssignmentClassRedesign:function(e,t){return e==l.enrollmentStatuses.in_progress?1===t?{className:"danger",icon:"lu-canceled"}:{className:"neutral",icon:"lu-logout"}:e==l.enrollmentStatuses.pending_review?{className:"pending-review",icon:"lu-alert"}:e==l.enrollmentStatuses.completed||e==l.enrollmentStatuses.passed?{className:"completed",icon:"lu-completed"}:e==l.enrollmentStatuses.failed||e==l.enrollmentStatuses.cancelled?{className:"failed",icon:"lu-canceled"}:{className:"default",icon:"lu-assignment"}},getPillsStyleByAssignmentStatus:function(e,t){switch(e){case l.enrollmentStatuses.in_progress:return 1===t?{className:"wb-pill--failed",icon:"canceled"}:{className:"wb-pill--progress",icon:"alert"};case l.enrollmentStatuses.pending_review:return{className:"wb-pill--pending",icon:"alert"};case l.enrollmentStatuses.completed:case l.enrollmentStatuses.passed:return{className:"wb-pill--completed",icon:"completed"};case l.enrollmentStatuses.failed:case l.enrollmentStatuses.cancelled:return{className:"wb-pill--failed",icon:"canceled"};default:return{className:"",icon:"assignment"}}},translateEnrollmentComponentStatus:function(e,t){var n=e.enrollment_component_status_id;return n==l.enrollmentStatuses.waitlisted?e.waitlist_type==l.waitlist_types.automatic||e.course_waitlist_type==l.waitlist_types.automatic?l.showMessage("lup.courses.num_on_waitlist",{waitlist_num:e.num_on_waitlist}):l.showMessage("ilts.waitlisted"):n==l.enrollmentStatuses.in_progress?e.component_type_id==l.componentTypes.assignment&&1===e.was_rejected?l.showMessage("course_assignments.assignment_rejected"):l.showMessage("dashboard.in_progress"):n==l.enrollmentStatuses.pending_review?l.showMessage("course_assignments.pending_review"):n==l.enrollmentStatuses.closed?l.showMessage("learningpaths.closed"):n==l.enrollmentStatuses.completed?e.component_type_id==l.componentTypes.session?l.showMessage("ilts.attended"):l.showMessage("dashboard.completed"):n==l.enrollmentStatuses.passed?l.showMessage("dashboard.passed"):n==l.enrollmentStatuses.failed?1==t?l.showMessage("dashboard.failed"):l.showMessage("dashboard.completed"):n==l.enrollmentStatuses.cancelled?l.showMessage("lup.dashboard.cancelled"):l.showMessage("dashboard.not_started")},translateLearningJourneyStatus:function(e){return l.showMessage({unenrolled:"lup.ljw.workflow_user_status_unenrolled",terminated:"lup.ljw.workflow_user_status_terminated",passed:"lup.ljw.workflow_user_status_passed",enrolled:"lup.ljw.workflow_user_status_enrolled",failed:"lup.ljw.workflow_user_status_failed",completed:"lup.ljw.workflow_user_status_completed",missingdata:"lup.ljw.workflow_user_status_missingdata",notcompliant:"lup.ljw.workflow_user_status_notcompliant"}[e])},displayEnrollmentComponentScore:function(e,t,n){if(e.enrollment_component_status_id>=l.enrollmentStatuses.completed){if((1===t||n)&&e.enrollment_exam_status_id&&e.percentage&&0===e.is_survey)return e.percentage+"%";if(e.component_type_id===l.componentTypes.assignment&&e.assignment_answer_percentage)return e.assignment_answer_percentage+"%";if(e.component_type_id===l.componentTypes.session&&e.session_percentage)return e.session_percentage+"%";if(e.component_type_id===l.componentTypes.scorm)if(1===e.is_tin_can){if(e.tincan_score)return e.tincan_score+"%"}else if(e.scorm_score)return e.scorm_score+"%"}return"-"},returnEnrollmentComponentScore:function(e){if(e.enrollment_component_status_id>=l.enrollmentStatuses.completed){if(e.enrollment_exam_status_id&&e.percentage&&0===e.is_survey)return e.percentage;if(e.component_type_id===l.componentTypes.assignment&&e.assignment_answer_percentage)return e.assignment_answer_percentage;if(e.component_type_id===l.componentTypes.session&&e.session_percentage)return e.session_percentage;if(e.component_type_id===l.componentTypes.scorm)if(1===e.is_tin_can){if(e.tincan_score)return e.tincan_score}else if(e.scorm_score)return e.scorm_score}return null},showLengthWithUnits:function(e){var t=e.minute_length;return t=0===e.course_length_unit?l.showMessage("store.min",{count:parseInt(t)}):l.showMessage("store.hour",{count:parseInt(t)})},progressBarClass:function(e){if(e){if(e.status_id==l.enrollmentStatuses.passed)return"progress-bar-lu-passed";if(e.status_id==l.enrollmentStatuses.failed&&1==e.show_passfail_to_learners)return"progress-bar-lu-failed"}return"progress-bar-lu"},canMarkCompleted:function(e,t){return 1!=e.must_choose_session&&e.status_id<l.enrollmentStatuses.completed&&t},canEditScore:function(e,t,n){return!0===n&&!0===t&&null!==e.percentage&&void 0!==e.percentage},messagingEnabled:function(e){return!!e&&!e.license_id&&1!==e.disable_message_author&&!n.disable_messaging&&e.portal_id===n.current_portal_id},unenrollMe:function(e,t){var n;e&&t&&(n=new i,o.confirm(l.showMessage("lup.are_you_sure"),l.showMessage("lup.courses.are_you_sure_to_self_unenroll"),{size:"md"}).then(function(e){n.selfUnenroll(t.id).then(function(){r.location="/dashboard?display=my_courses"})}))},showAwardedBadgesAfterReview:b,isEnrollmentFinished:C,getIconClass:function(e){return e.enrollment_component_status_id==l.enrollmentStatuses.failed?"fa-times failed-module":e.enrollment_component_status_id==l.enrollmentStatuses.passed||e.enrollment_component_status_id==l.enrollmentStatuses.completed?"fa-check completed-module":e.component_type_id===l.componentTypes.e_signature?"fa-pencil":e.component_type_id==l.componentTypes.exam?e.is_survey?"fa-check-square-o":"fa-pencil-square-o":e.component_type_id==l.componentTypes.page?"fa-book":e.component_type_id==l.componentTypes.checklist?"fa-list-ul":e.component_type_id==l.componentTypes.linkedin_learning?"fa-linkedin-square":e.component_type_id==l.componentTypes.scorm?"fa-list-alt":e.component_type_id==l.componentTypes.assignment?e.was_rejected?"fa-exclamation-circle":e.enrollment_component_status_id==l.enrollmentStatuses.pending_review?"fa-clock-o":"fa-flag":e.component_type_id==l.componentTypes.checklist?e.was_rejected?"fa-exclamation-circle":e.enrollment_component_status_id==l.enrollmentStatuses.pending_review?"fa-clock-o":"fa-list-ul":e.component_type_id==l.componentTypes.session||e.component_type_id==l.componentTypes.training?"fa-calendar-plus-o":e.enrollment_component_status_id==l.enrollmentStatuses.failed?"fa-times failed-module":e.enrollment_component_status_id==l.enrollmentStatuses.passed||e.enrollment_component_status_id==l.enrollmentStatuses.completed?"fa-check completed-module":"fa-book"},getIconClassRedesign:function(e){return e.enrollment_component_status_id==l.enrollmentStatuses.failed?"lu-canceled":e.enrollment_component_status_id==l.enrollmentStatuses.passed||e.enrollment_component_status_id==l.enrollmentStatuses.completed?"lu-completed":e.component_type_id===l.componentTypes.e_signature?"lu-exam":e.component_type_id==l.componentTypes.exam?e.is_survey?"lu-survey":"lu-exam":e.component_type_id==l.componentTypes.page?"lu-module":e.component_type_id==l.componentTypes.checklist?"lu-checklist":e.component_type_id==l.componentTypes.linkedin_learning?"lu-linkedin":e.component_type_id==l.componentTypes.scorm?"lu-scorm":e.component_type_id==l.componentTypes.assignment||e.component_type_id==l.componentTypes.checklist?e.was_rejected?"lu-alert":e.enrollment_component_status_id==l.enrollmentStatuses.pending_review?"lu-time":"lu-assignment":e.component_type_id==l.componentTypes.session||e.component_type_id==l.componentTypes.training?"lu-session":e.enrollment_component_status_id==l.enrollmentStatuses.failed?"lu-canceled":e.enrollment_component_status_id==l.enrollmentStatuses.passed||e.enrollment_component_status_id==l.enrollmentStatuses.completed?"lu-completed":"lu-module"},getSegmentName:function(e,t,n,o){var r=l.showMessage("reports.module");if(e.component_type_id==l.componentTypes.exam?r=e.is_survey?l.showMessage("courses.survey"):l.showMessage("courses.exam"):e.component_type_id==l.componentTypes.page?r=l.showMessage("reports.module"):e.component_type_id==l.componentTypes.checklist?r=l.showMessage("checklist.module"):e.component_type_id==l.componentTypes.e_signature?r=l.showMessage("esignature.module"):e.component_type_id==l.componentTypes.linkedin_learning?r="LinkedIn Learning":e.component_type_id==l.componentTypes.scorm?r=o?l.showMessage("reports.module"):e.is_tin_can?l.showMessage("lup.courses.tincan"):l.showMessage("courses.scorm"):e.component_type_id==l.componentTypes.assignment?r=(e.was_rejected||(e.enrollment_component_status_id,l.enrollmentStatuses.pending_review),l.showMessage("reports.assignment")):e.component_type_id==l.componentTypes.checklist?r=(e.was_rejected||(e.enrollment_component_status_id,l.enrollmentStatuses.pending_review),l.showMessage("checklist.module")):e.component_type_id!==l.componentTypes.session&&e.component_type_id!==l.componentTypes.training||(r=o?l.showMessage("reports.session"):l.showMessage("events.course_module.icon_tooltip")),t){e=M(e.enrollment_component_status_id,e.was_rejected);return n?o?e+" · "+r:r:"<strong class='text-darker'>"+e+"</strong> <span class='px-6'>·</span> "+r}return r},scormOrTinCanExitDetected:function(e){var o=new s;o.checkScormTinCanShowRequired(e).then(function(){var t,n;o.data.enrollment&&o.data.show_leave_review?g(o.data.enrollment.attributes,null,o.data.awarded_badges):o.data.enrollment&&o.data.show_completion_data&&"function"==typeof r.showScormOrTinCanFinishPopup?r.showScormOrTinCanFinishPopup(o.data.enrollment.attributes,o.data.awarded_badges,o.data.social_sharing.attributes):o.data.enrollment&&o.data.awarded_badges&&angular.isArray(o.data.awarded_badges.data)&&0<o.data.awarded_badges.data.length&&b(o.data.awarded_badges),o.data.enrollment&&o.data.badges_for_notification&&(t=[],n=new c,_.each(o.data.badges_for_notification.data,function(e){t.push(n.formatBadgeDataForToastr(e))}),0<t.length&&u.onBadgeAwarded(t))})},showScormOrTinCanFinishPopup:function(e,t,n){a.open({templateUrl:"/tc/shared/scorm_tc_finish_modal.html",controller:"ScormTcFinishModalController",controllerAs:"vm",size:"lg",resolve:{enrollment:function(){return e},badges:function(){return t},socialSharing:function(){return n}}}).result.then(function(){h()},function(){h()})},catalog_overlay_status:function(e){switch(e){case l.enrollmentStatuses.not_started:return{text:l.showMessage("dashboard.enrolled"),icon:"fa fa-exchange"};case l.enrollmentStatuses.in_progress:return{text:l.showMessage("dashboard.in_progress"),icon:"fa fa-list"};case l.enrollmentStatuses.completed:return{text:l.showMessage("dashboard.completed"),icon:"fa fa-check"};case l.enrollmentStatuses.passed:return{text:l.showMessage("dashboard.passed"),icon:"fa fa-check"};case l.enrollmentStatuses.failed:return{text:l.showMessage("dashboard.failed"),icon:"fa fa-close"};case l.enrollmentStatuses.waitlisted:return{text:l.showMessage("ilts.waitlisted"),icon:"fa fa-list-ol"};default:return{text:l.showMessage("dashboard.enrolled"),icon:"fa fa-exchange"}}},isMultiDaySession:function(e,t){return!(!e||!t)&&(start=new Date(e),end=new Date(t),sameYear=start.getFullYear()==end.getFullYear(),sameMonth=start.getMonth()==end.getMonth(),sameDay=start.getDate()==end.getDate(),!(sameYear&&sameMonth&&sameDay))},changeSession:function(e,t){t="/enrollments/"+e+"/change_session/"+t,r.location=t},showAvailableSeats:function(e){var t=e.max_capacity-e.number_enrolled_on_session;return 0<t?l.showMessage("lup.courses.seats",{seats:t}):1==e.enable_waitlist?l.showMessage("lup.courses.waitlist_open"):l.showMessage("lup.courses.full")},launchDetails:function(e,t){e=e.id,document.location.href=t?"/content-details/"+e+"/"+m:"/enrollments/"+e+"/details"}}}]),window.angular.module("lu").factory("ExamQuestionPoolFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="exam_question_pools",this.data=null,this.meta=null};return t.prototype.enableDisable=function(e,t){var n=this,t={url:"/exam_question_pools/"+e+".json",data:t};return r.put(null,t,null).then(function(){n.data=r.data})},t.prototype.destroy=function(e){var t=this;return r.destroy(t.objectName,{},e).then(function(){t.id=null})},t}]),window.angular.module("lu").factory("ExamQuestionPoolQuestionFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="exam_question_pool_questions",this.data=null,this.meta=null};return t.prototype.enableDisable=function(e,t){var n=this,t={url:"/exam_question_pool_questions/"+e+".json",data:t};return r.put(null,t,null).then(function(){n.data=r.data})},t.prototype.saveReorder=function(e,t){var n=this,e={url:"/exam_question_pool_questions/"+t+"/reorder.json",data:e};return r.put(null,e,null).then(function(){n.data=r.data})},t}]),window.angular.module("lu").factory("ExternalTrainingFeedbackDocumentFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="external_training_feedback_documents",this.data=null,this.meta=null,this.url=null,this.id=null,this.uuid=null,this.supporting_document_file_name=null,this.external_training_record_id=null,this.supporting_document_file_size=0,this.supporting_document_content_type=null,this.output_url=null};return t.prototype.create=function(){var e=this,t={},n={};return t.uuid=e.uuid,t.supporting_document_file_name=e.supporting_document_file_name,t.external_training_record_id=e.external_training_record_id,t.supporting_document_file_size=e.supporting_document_file_size,t.supporting_document_content_type=e.supporting_document_content_type,t.output_url=e.output_url,n.data={},n.data.external_training_feedback_document=t,r.create(e.objectName,n).then(function(){e.data=r.data,e.id=e.data.external_training_feedback_document.id,e.url=e.data.external_training_feedback_document.url})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),window.angular.module("lu").factory("ExternalTrainingRecordFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="external_training_records",this.data=null,this.meta=null,this.id=null};return t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),window.angular.module("lu").factory("ExternalTrainingSupportingDocumentFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="external_training_supporting_documents",this.data=null,this.meta=null,this.id=null,this.uuid=null,this.supporting_document_file_name=null,this.external_training_record_id=null,this.supporting_document_file_size=0,this.supporting_document_content_type=null,this.output_url=null};return t.prototype.create=function(){var e=this,t={},n={};return t.uuid=e.uuid,t.supporting_document_file_name=e.supporting_document_file_name,t.external_training_record_id=e.external_training_record_id,t.supporting_document_file_size=e.supporting_document_file_size,t.supporting_document_content_type=e.supporting_document_content_type,t.output_url=e.output_url,n.data={},n.data.external_training_supporting_document=t,r.create(e.objectName,n).then(function(){e.data=r.data,e.id=e.data.external_training_supporting_document.id,e.url=e.data.external_training_supporting_document.url})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),function(){"use strict";function e(e,t,i,n,o){var s=new e,e=function(){this.objectName="comments",this.data=null,this.meta=null};return e.prototype.createComment=function(e,t){var n=this,o={hideSpinner:!0,url:"/forums/posts/"+e+"/comments.json",data:t},r=i.defer();return s.post(null,o,null).then(function(e){n.data=s.data,n.data.error?r.reject("Failed to create Forum comment"):r.resolve(n.data)}),r.promise},e.prototype.likeComment=function(e){var t=this,e={url:"/forums/comments/"+e+"/like.json",hideSpinner:!0},n=i.defer();return s.post(null,e,null).then(function(e){t.data=s.data,t.data.error?n.reject("Failed to like forum comment"):n.resolve(t.data)}),n.promise},e.prototype.updateComment=function(e,t,n){var o=this,r={hideSpinner:!0,url:"/forums/posts/"+t+"/comments/"+e,data:n},a=i.defer();return s.put(null,r,null).then(function(e){o.data=s.data,o.data.error?a.reject("Failed to update Forum comment"):a.resolve(o.data)}),a.promise},e}angular.module("lu").factory("ForumCommentFactory",e),e.$inject=["learnUponApi","$http","$q","$log","LupHelper"]}(window.angular),function(){"use strict";function e(e,n,a,t,i,s){var l=new e,e=function(){this.objectName="posts",this.data=null,this.meta=null};return e.prototype.fetchTagsApi=function(e){var t=a.defer();return n.get("/forums/tags/select.json",{params:{search:e.$query,page:e.$page}}).success(function(e){e=e.tags.data;t.resolve(e)}).error(function(){t.reject("Failed to get topics")}),t.promise},e.prototype.updatePost=function(e,t){var n=this,o={url:"/forums/posts/"+e+".json",data:t},r=a.defer();return l.put(null,o,null).then(function(e){n.data=l.data,n.data.error?r.reject("Failed to update forum post"):r.resolve(n.data)}),r.promise},e.prototype.createPost=function(e){var t=this,n={url:"/forums/posts.json",data:e},o=a.defer();return l.post(null,n,null).then(function(e){t.data=l.data,t.data.error?o.reject("Failed to create forum post"):o.resolve(t.data)}),o.promise},e.prototype.likePost=function(e){var t=this,e={url:"/forums/posts/like/"+e+".json",hideSpinner:!0},n=a.defer();return l.post(null,e,null).then(function(e){t.data=l.data,t.data.error?n.reject("Failed to like forum post"):n.resolve(t.data)}),n.promise},e.prototype.defaultFilterValues=function(){return{filterCreatedAfter:"",filterCreatedBefore:"",selectedStatus:i.forums.posts.filter_status.published_only,topics:[],tags:[],selected_topics:[],selected_tags:[]}},e.prototype.getPostsForTopic=function(e,t){var n=this,e="/forums/topic/"+e+".json",o=a.defer(),r={url:e,params:{search:t.$query,page:t.$page}};return l.get("posts",r,null).then(function(e){e.data.posts?(n.data=e.data.posts.data,n.meta=e.data.posts.meta,o.resolve(n)):o.reject("Failed to get posts")}),o.promise},e.prototype.buildPostBreadcrumbs=function(e,t,n){var o,r=[{title:i.showMessage("lup.tabs.forums"),url:"/forums"}];return i.contains(s.location.pathname,"my_contribution")?(r.push({title:i.showMessage("lup.subnav.lup_my_contribution"),url:"/forums/my_contribution"}),r.push({title:e.title,url:"/forums/my_contribution/"+e.id})):i.contains(s.location.pathname,"moderation")?(r.push({title:i.showMessage("lup.subnav.lup_moderation"),url:"/forums/moderation"}),r.push({title:n,url:"/forums/moderation/"+t}),r.push({title:e.title,url:"/forums/moderation/posts/"+e.id})):i.contains(s.location.search,"bc=topics")?(r.push({title:n,url:"/forums/topic/"+t}),r.push({title:e.title,url:"/forums/posts/"+e.id+"?bc=topics"})):i.contains(s.location.search,"topics_by_type")?((o=i.urlParam("topics_by_type"))==i.forums.topics.type_code.course?(r.push({title:i.showMessage("lup.forums.topics.topics_by_course"),url:"/forums/topics_by_type/"+o}),r.push({title:n,url:"/forums/topic/"+t+"?topics_by_type="+o})):o==i.forums.topics.type_code.learning_path&&(r.push({title:i.showMessage("lup.forums.topics.topics_by_lp"),url:"/forums/topics_by_type/"+o}),r.push({title:n,url:"/forums/topic/"+t+"?topics_by_type="+o})),r.push({title:e.title,url:"/forums/posts/"+e.id+"?topics_by_type="+o})):(r.push({title:i.showMessage("lup.forums.topics.all_posts"),url:"/forums/all_posts/"}),r.push({title:e.title,url:"/forums/posts/"+e.id})),r},e}angular.module("lu").factory("ForumPostsFactory",e),e.$inject=["learnUponApi","$http","$q","$log","LupHelper","$window"]}(window.angular),function(){"use strict";function e(a,i,e,t,s,n,o,l){var c=new o;return{editPost:function(e,t,n,o){if(o)return void(s.location="/forums/my_contribution/"+e+"/edit?object_id="+t+"&type_id="+n);var r="/forums/posts/"+e+"/edit";{a.contains(s.location.href,"my_contribution")?r="/forums/my_contribution/"+e+"/edit":a.contains(s.location.search,"bc=topics")?r="/forums/posts/"+e+"/edit?bc=topics":a.contains(s.location.href,"moderation")?r="/forums/moderation/"+e+"/edit":a.contains(s.location.search,"topics_by_type")&&(o=a.urlParam("topics_by_type"),r="/forums/topics_by_type/"+e+"/edit?topics_by_type="+o)}r=(r+=a.contains(r,"?")?"&":"?")+"object_id="+t+"&type_id="+n,s.location=r},toggleArchiving:function(e,t,n){var o=t==a.forums.posts.status_code.published?I18n.t("lup.forums.all_posts.archiving_post"):I18n.t("lup.forums.all_posts.unarchiving_post"),e=I18n.t(t==a.forums.posts.status_code.published?"lup.forums.posts.post_action.are_your_sure_you_want_to_archive_post":"lup.forums.posts.post_action.are_your_sure_you_want_to_unarchive_post",{post_title:e}),r=l.defer();return i.confirm(o,e).then(function(){var e={status_code:null};t==a.forums.posts.status_code.published?e.status_code=a.forums.posts.status_code.archived:e.status_code=a.forums.posts.status_code.published,r.resolve(c.updatePost(n,e))}),r.promise},deletePost:function(e,t,n){i.confirm(I18n.t("lup.forums.all_posts.delete_post"),I18n.t("lup.forums.posts.post_action.are_your_sure_you_want_to_delete_post",{post_title:e})).then(function(){c.updatePost(t,{status_code:a.forums.posts.status_code.deleted}).then(function(){s.location=n})})},toggleCommenting:function(e,t,n){var o=t?I18n.t("lup.forums.all_posts.disable_commenting"):I18n.t("lup.forums.all_posts.enable_commenting"),e=I18n.t(t?"lup.forums.posts.post_action.are_your_sure_you_want_to_disable_commenting":"lup.forums.posts.post_action.are_your_sure_you_want_to_enable_commenting",{post_title:e}),r=l.defer();return i.confirm(o,e).then(function(){var e={allow_commenting:null};e.allow_commenting=!t,r.resolve(c.updatePost(n,e))}),r.promise}}}angular.module("lu").factory("ForumPostShowActionFactory",e),e.$inject=["LupHelper","$luPopover","$modal","spinnerService","$window","$http","ForumPostsFactory","$q"]}(),function(){"use strict";function e(e,s,t,l,n,a,o,c,r,i){var u=new n,d=new r;return{postCreatedAt:function(e){return l.showMessage("lup.forums.posts.created_on")+" "+o("date")(e,"dd MMMM yyyy @ h:mm a")},postCommentsCount:function(e){return e+" "+(1==e?l.showMessage("lup.forums.posts.comment"):l.showMessage("lup.forums.posts.comments"))},pingForProgress:function t(n,o,r){var e={hideSpinner:!0};if(n)return e.url="/download_jobs/"+n+"/status.json",u.get("download_jobs",e,n).then(function(){var e=u.data.job;e&&e.status_id!==l.lupJobStatuses.completed?a(function(){t(n,o,r)},4500):(e={url:"/forums/posts/"+o+".json",hideSpinner:!(n=null)},u.get(null,e,null).then(function(e){e.data.post&&r(e.data.post.attributes)}))})},buildCKForComments:function(){return{id:"post_comments_wysi",body_class:"ck-editor-post-comments",include_custom_css:!0,toolbar_for_post_comments:!0,width:"100%"}},showCreateComment:function(e,t,n){return!!e||!!t||!!n},updateTopicStatus:function(e,t,n){var o="",r="",a=s.defer();e==l.forums.topics.status_code.deleted?(o=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_delete_topic"),r=I18n.t("lup.forums.topics.topic_action.delete_topic")):e==l.forums.topics.status_code.draft?(o=t==l.forums.topics.status_code.archived?I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_unarchive_topic"):I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_unpublish_topic"),r=t==l.forums.topics.status_code.archived?I18n.t("lup.forums.topics.topic_action.unarchive_topic"):I18n.t("lup.forums.topics.topic_action.unpublish_topic")):e==l.forums.topics.status_code.archived?(o=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_archive_topic"),r=I18n.t("lup.forums.topics.topic_action.archive_topic")):e==l.forums.topics.status_code.published&&(o=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_publish_topic"),r=I18n.t("lup.forums.topics.topic_action.publish_topic"));var i={status_code:e};return c.confirm(r,o).then(function(){a.resolve(d.updateTopic(n,i))}),a.promise},enablePosting:function(e,t){var n=e?I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_enable_posting"):I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_disable_posting"),o={allow_posting:e},r=s.defer();return c.confirm(I18n.t("lup.confirm"),n).then(function(){r.resolve(d.updateTopic(t,o))}),r.promise},switchButtons:function(e,t){i.$broadcast("hideAction",e,!t)}}}angular.module("lu").factory("ForumService",e),e.$inject=["$http","$q","$log","LupHelper","learnUponApi","$timeout","$filter","$luPopover","ForumTopicsFactory","$rootScope"]}(),function(){function e(e,t,o,a,r,n,i,s){function l(){this.objectName="forum_topics",this.data=null,this.meta=null}var c=new e,u=t;return l.prototype.getTopic=function(e){return o.get("/forums/topics/"+e+"/edit.json").then(function(e){return e.data})},l.prototype.createTopic=function(e){var t=this,e={url:"/forums/topics.json",data:e,hideSpinner:!0},n=a.defer();return c.post(null,e,null).then(function(){t.data=c.data,t.data.error?n.reject("Failed to create forum_topic"):n.resolve(t.data)}),n.promise},l.prototype.updateTopic=function(e,t){var n=this,o={url:"/forum_topics/"+e+".json",data:t,hideSpinner:!0},r=a.defer();return c.put(null,o,null).then(function(e){n.data=c.data,n.data.error?r.reject("Failed to update forum_topic"):r.resolve(n.data)}),r.promise},l.prototype.updateTopicsOrder=function(e){var t=this,n={url:"/forums/reorder_topics.json",data:e,hideSpinner:!0},o=a.defer();return c.put(null,n,null).then(function(e){t.data=c.data,t.data.error?o.reject("Failed to update forum_topic order"):o.resolve(t.data)}),o.promise},l.prototype.updateTopicStatus=function(e,t,n){var o="",r="";switch(t){case u.forums.topics.status_code.deleted:o=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_delete_topic",{topic_title:n}),r=I18n.t("lup.forums.topics.topic_action.delete_topic");break;case u.forums.topics.status_code.draft:o=e.status_code==u.forums.topics.status_code.archived?I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_unarchive_topic",{topic_title:n}):I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_unpublish_topic",{topic_title:n}),r=e.status_code==u.forums.topics.status_code.archived?I18n.t("lup.forums.topics.topic_action.unarchive_topic"):I18n.t("lup.forums.topics.topic_action.unpublish_topic");break;case u.forums.topics.status_code.archived:o=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_archive_topic",{topic_title:n}),r=I18n.t("lup.forums.topics.topic_action.archive_topic");break;case u.forums.topics.status_code.published:o=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_publish_topic",{topic_title:n}),r=I18n.t("lup.forums.topics.topic_action.publish_topic")}var a={status_code:t};return i.confirm(r,o).then(function(){return l.prototype.updateTopic(e.id,a).then(function(e){return e})})},l.prototype.updateAllowPosting=function(e,t){var n=t?I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_enable_posting"):I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_disable_posting"),o={allow_posting:t};return i.confirm(I18n.t("lup.confirm"),n).then(function(){return l.prototype.updateTopic(e,o).then(function(e){return e})})},l.prototype.fetchGroupsApi=function(e){var t=a.defer(),n="";try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){r.debug("fetchCoursesApi: Unable to convert selected topic to string!"),n=""}return o.get("/forums/groups/select.json",{params:{search:e.$query,page:e.$page,except:n}}).success(function(e){e=e.groups.data;t.resolve(e)}).error(function(){t.reject("Failed to get topics")}),t.promise},l.prototype.fetchModeratorsApi=function(e){var t=a.defer();return o.get("/forums/moderators/select.json",{params:{search:e.$query,page:e.$page}}).success(function(e){e=e.moderators.data,e=s.populateDisplayNames(e);t.resolve(e)}).error(function(){t.reject("Failed to get topics")}),t.promise},l}angular.module("lu").factory("ForumTopicsFactory",e),e.$inject=["learnUponApi","LupHelper","$http","$q","$log","$modal","$luPopover","LupService"]}(),window.angular.module("lu").factory("GamificationConfigurationsFactory",["learnUponApi","$q",function(e,o){var r=new e,e=function(){this.objectName="gamification_configurations",this.data=null,this.meta=null};return e.prototype.editConfigurations=function(e){var t=this,e={url:"/settings/gamification/configurations/edit.json",data:e},n=o.defer();return r.put(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to edit gamification configurations"):n.resolve(t.data)}),n.promise},e}]),window.angular.module("lu").factory("GamificationLevelsFactory",["learnUponApi","$q",function(e,o){var r=new e,e=function(){this.objectName="gamification_levels",this.data=null,this.meta=null};return e.prototype.getList=function(e){var t=this;return e.url="/settings/gamification/levels.json",r.getList(t.objectName,e).then(function(){t.meta=r.data.levels.meta,t.data=r.data})},e.prototype.editLevel=function(e){var t=this,e={url:"/settings/gamification/levels/"+e.id+".json",data:e,hideSpinner:!0},n=o.defer();return r.put(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to edit level"):n.resolve(t.data)}),n.promise},e}]),function(){"use strict";function e(e){var t=new e;return{search:function(e){e={url:"/search.json",params:e=e||{}};return t.search(e)}}}angular.module("lu").factory("globalSearchFactory",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(e,i){var s=new e,e=function(){this.objectName="groups",this.data=null,this.meta=null};return e.prototype.getList=function(e){var t=this;return s.getList(t.objectName,e).then(function(){t.meta=s.data.groups.meta,t.data=s.data})},e.prototype.getUserAvailableGroup=function(e,t){var n=this,t="/users/"+t+"/user_available_groups.json";return e.url=t,s.get(n.objectName,e,"").then(function(){n.meta=s.data.users_groups.meta,n.data=s.data})},e.prototype.getUserGroupForManaging=function(e,t){var n=this,t="/users/"+t+"/user_groups_for_managing.json";return e.url=t,s.get(n.objectName,e,"").then(function(){n.meta=s.data.groups_not_managing.meta,n.data=s.data})},e.prototype.update=function(e,t){var n=this;return s.put(n.objectName,{data:t},e).then(function(){n.data=s.data})},e.prototype.removeCategoryCourses=function(e){var t=this,e={url:"/"+t.objectName+"/"+e+"/remove_courses_from_category.json"};return s.destroy(t.objectName,e).then(function(){t.data=s.data})},e.prototype.deleteCategory=function(e){var t=this,e={url:"/"+t.objectName+"/"+e+"/delete_category.json"};return s.destroy(t.objectName,e).then(function(){t.data=s.data})},e.prototype.destroy=function(e,t){var n=this;return s.destroy(n.objectName,{params:t},e).then(function(){n.data=s.data})},e.prototype.getUsers=function(e,t){var n=this;return s.getList(n.objectName+"/"+e+"/users",t).then(function(e){return n.meta=s.data.users.meta,n.data=s.data,e})},e.prototype.getCourses=function(e,t){var n=this;return s.getList(n.objectName+"/"+e+"/courses",t).then(function(){n.data=s.data})},e.prototype.getManagers=function(e,t){var n=this;return s.getList(n.objectName+"/"+e+"/managers",t).then(function(){n.meta=s.data.managers.meta,n.data=s.data})},e.prototype.removeManager=function(e,t){var n=this,t={url:"/"+n.objectName+"/"+e+"/managers/"+t+".json",params:{manager_id:t}};return s.destroy(n.objectName,t).then(function(){n.data=s.data})},e.prototype.updateManager=function(e,t,n){var o=this,n={url:"/"+o.objectName+"/"+e+"/managers/"+t+".json",data:{manager_form:n}};return s.put(o.objectName,n).then(function(){o.data=s.data})},e.prototype.removeUser=function(e,t){var n=this,t={url:"/"+n.objectName+"/"+e+"/users/"+t+".json"};return s.destroy(n.objectName,t).then(function(){n.data=s.data})},e.prototype.addUser=function(e,t,n){var o=this,n={url:"/"+o.objectName+"/"+e+"/users.json",data:{users_form_data:t,from_users:"1",user_id:n}};return s.post(o.objectName,n).then(function(){o.data=s.data})},e.prototype.addManager=function(e,t,n){var o=this,n={url:"/"+o.objectName+"/"+e+"/managers.json",data:{managers_form_data:t,from_users:"1",user_id:n}};return s.post(o.objectName,n).then(function(){o.data=s.data})},e.prototype.removePendingUser=function(e,t){var n=this,t={url:"/"+n.objectName+"/"+e+"/pending-users/"+t+".json"};return s.destroy(n.objectName,t).then(function(){n.data=s.data})},e.prototype.removeCourse=function(t,n,o){var r=this;i.open({templateUrl:"/tc/groups/remove_course_modal.html",controller:"GroupsCourseRemove",size:"lg"}).result.then(function(e){e={url:"/"+r.objectName+"/"+t+"/courses/"+n+".json",params:{delete_enrollments:e}};return s.destroy(r.objectName,e).then(function(){o()})})},e.prototype.removeLearningPath=function(t,n,o){var r=this;i.open({templateUrl:"/tc/groups/remove_learning_path_modal.html",controller:"GroupsLearningPathRemove",size:"lg"}).result.then(function(e){e={url:"/"+r.objectName+"/"+t+"/learning-paths/"+n+".json",params:{delete_enrollments:e}};return s.destroy(r.objectName,e).then(function(){o()})})},e.prototype.switchUi=function(e,t){var n=this,t={url:"/"+n.objectName+"/"+e+"/switch_ui/"+t+".json"};return s.put(n.objectName,t).then(function(){n.data=s.data})},e.prototype.getLeaderboard=function(e,t){var n=this;return t.url="/groups/"+e+"/leaderboard.json",s.getList(n.objectName,t).then(function(){n.meta=s.data.users.meta,n.data=s.data})},e.prototype.editDueDates=function(t,n,e,o,r){var a=this;i.open({templateUrl:"/tc/groups/edit_due_date_modal.html",controller:"GroupsCourseDueDate",size:"lg",resolve:{due_date:function(){return e},due_days:function(){return o}}}).result.then(function(e){if(e.form_dirty){e={url:"/"+a.objectName+"/"+t+"/courses/"+n+".json",params:{due_date:e.due_date,due_days:e.due_days}};return s.put(a.objectName,e).then(function(){r()})}})},e}window.angular.module("lu").factory("GroupsFactory",e),e.$inject=["learnUponApi","$modal"]}(),function(){"use strict";function e(t,n,o,e){return{request:function(e){{var t;a()&&r(e.url)&&(e.headers=Object.assign(e.headers||{},{"X-Ajax-Embed":"1"}),null!=(t=localStorage.getItem("authToken"))&&(e.headers=Object.assign(e.headers||{},{Authorization:"Bearer-Embed "+t})))}return e},requestError:function(e){return o.hideGroup("luSpinnerGlobal"),e},response:function(e){e.data.success&&!e.data.prevent_success_message&&t.$broadcast("httpSuccess",e.data);e.data.redirect_url&&(window.location.href=e.data.redirect_url);return e},responseError:function(e){return o.hideGroup("luSpinnerGlobal"),t.$broadcast("httpError",e.data),n.reject(e)}}}function r(e){return("/"==e[0]||e.includes(window.location.hostname))&&!e.includes(".html")}function a(){try{return window.self!==window.top}catch(e){return 1}}window.angular.module("lu").factory("HttpInterceptor",e),e.$inject=["$rootScope","$q","spinnerService","$timeout"],$.ajaxSetup({beforeSend:function(e,t){var n;a()&&r(this.url)&&(n=localStorage.getItem("authToken"),e.setRequestHeader("X-Ajax-Embed","1"),null!=n&&e.setRequestHeader("Authorization","Bearer-Embed "+n))}})}(),function(){"use strict";angular.module("lu").factory("IconsHelper",function(){return{icons:{glass:"glass",music:"music",search:"search",envelopeo:"envelope-o",heart:"heart",star:"star",staro:"star-o",user:"user",film:"film",thlarge:"th-large",th:"th",thlist:"th-list",check:"check",times:"times",searchplus:"search-plus",searchminus:"search-minus",poweroff:"power-off",signal:"signal",gear:"gear",trasho:"trash-o",home:"home",fileo:"file-o",clocko:"clock-o",road:"road",download:"download",arrowcircleodown:"arrow-circle-o-down",arrowcircleoup:"arrow-circle-o-up",inbox:"inbox",playcircleo:"play-circle-o",rotateright:"rotate-right",refresh:"refresh",listalt:"list-alt",lock:"lock",flag:"flag",headphones:"headphones",volumeoff:"volume-off",volumedown:"volume-down",volumeup:"volume-up",qrcode:"qrcode",barcode:"barcode",tag:"tag",tags:"tags",book:"book",bookmark:"bookmark",print:"print",camera:"camera",font:"font",bold:"bold",italic:"italic",textheight:"text-height",textwidth:"text-width",alignleft:"align-left",aligncenter:"align-center",alignright:"align-right",alignjustify:"align-justify",list:"list",dedent:"dedent",indent:"indent",videocamera:"video-camera",image:"image",pencil:"pencil",mapmarker:"map-marker",adjust:"adjust",tint:"tint",pencilsquareo:"pencil-square-o",sharesquareo:"share-square-o",checksquareo:"check-square-o",arrows:"arrows",stepbackward:"step-backward",fastbackward:"fast-backward",backward:"backward",play:"play",pause:"pause",forward:"forward",fastforward:"fast-forward",stepforward:"step-forward",eject:"eject",chevronleft:"chevron-left",chevronright:"chevron-right",pluscircle:"plus-circle",minuscircle:"minus-circle",timescircle:"times-circle",checkcircle:"check-circle",questioncircle:"question-circle",infocircle:"info-circle",crosshairs:"crosshairs",timescircleo:"times-circle-o",checkcircleo:"check-circle-o",ban:"ban",arrowleft:"arrow-left",arrowright:"arrow-right",arrowup:"arrow-up",arrowdown:"arrow-down",mailforward:"mail-forward",share:"share",expand:"expand",compress:"compress",plus:"plus",minus:"minus",asterisk:"asterisk",exclamationcircle:"exclamation-circle",gift:"gift",leaf:"leaf",fire:"fire",eye:"eye",eyeslash:"eye-slash",warning:"warning",plane:"plane",calendar:"calendar",random:"random",comment:"comment",magnet:"magnet",chevronup:"chevron-up",chevrondown:"chevron-down",retweet:"retweet",shoppingcart:"shopping-cart",folder:"folder",folderopen:"folder-open",arrowsv:"arrows-v",arrowsh:"arrows-h",barchart:"bar-chart",cameraretro:"camera-retro",key:"key",gears:"gears",comments:"comments",thumbsoup:"thumbs-o-up",starhalf:"star-half",hearto:"heart-o",signout:"sign-out",thumbtack:"thumb-tack",externallink:"external-link",signin:"sign-in",trophy:"trophy",upload:"upload",lemono:"lemon-o",phone:"phone",squareo:"square-o",bookmarko:"bookmark-o",phonesquare:"phone-square",unlock:"unlock",creditcard:"credit-card",rss:"rss",hddo:"hdd-o",bullhorn:"bullhorn",bell:"bell",certificate:"certificate",handoright:"hand-o-right",handoleft:"hand-o-left",handoup:"hand-o-up",handodown:"hand-o-down",arrowcircleleft:"arrow-circle-left",arrowcircleright:"arrow-circle-right",arrowcircleup:"arrow-circle-up",arrowcircledown:"arrow-circle-down",globe:"globe",wrench:"wrench",tasks:"tasks",filter:"filter",briefcase:"briefcase",arrowsalt:"arrows-alt",users:"users",chain:"chain",cloud:"cloud",flask:"flask",scissors:"scissors",fileso:"files-o",paperclip:"paperclip",floppyo:"floppy-o",square:"square",bars:"bars",listul:"list-ul",listol:"list-ol",strikethrough:"strikethrough",underline:"underline",table:"table",magic:"magic",truck:"truck",money:"money",caretdown:"caret-down",caretup:"caret-up",caretleft:"caret-left",caretright:"caret-right",columns:"columns",sort:"sort",sortdesc:"sort-down",sortdown:"sort-down",sortup:"sort-up",envelope:"envelope",linkedin:"linkedin",undo:"undo",gavel:"gavel",dashboard:"dashboard",commento:"comment-o",commentso:"comments-o",bolt:"bolt",sitemap:"sitemap",umbrella:"umbrella",clipboard:"clipboard",lightbulbo:"lightbulb-o",exchange:"exchange",clouddownload:"cloud-download",cloudupload:"cloud-upload",usermd:"user-md",stethoscope:"stethoscope",suitcase:"suitcase",bello:"bell-o",coffee:"coffee",cutlery:"cutlery",filetexto:"file-text-o",buildingo:"building-o",hospitalo:"hospital-o",ambulance:"ambulance",medkit:"medkit",fighterjet:"fighter-jet",beer:"beer",hsquare:"h-square",plussquare:"plus-square",angledoubleleft:"angle-double-left",angledoubleright:"angle-double-right",angledoubleup:"angle-double-up",angledoubledown:"angle-double-down",angleleft:"angle-left",angleright:"angle-right",angleup:"angle-up",angledown:"angle-down",desktop:"desktop",laptop:"laptop",tablet:"tablet",mobilephone:"mobile-phone",circleo:"circle-o",quoteleft:"quote-left",quoteright:"quote-right",spinner:"spinner",circle:"circle",reply:"reply",foldero:"folder-o",folderopeno:"folder-open-o",smileo:"smile-o",frowno:"frown-o",gamepad:"gamepad",keyboardo:"keyboard-o",flago:"flag-o",flagcheckered:"flag-checkered",terminal:"terminal",code:"code",replyall:"reply-all",starhalfo:"star-half-o",locationarrow:"location-arrow",crop:"crop",codefork:"code-fork",unlink:"unlink",question:"question",info:"info",exclamation:"exclamation",superscript:"superscript",subscript:"subscript",eraser:"eraser",puzzlepiece:"puzzle-piece",microphone:"microphone",microphoneslash:"microphone-slash",shield:"shield",calendaro:"calendar-o",fireextinguisher:"fire-extinguisher",rocket:"rocket",chevroncircleleft:"chevron-circle-left",chevroncircleright:"chevron-circle-right",chevroncircleup:"chevron-circle-up",chevroncircledown:"chevron-circle-down",html5:"html5",css3:"css3",anchor:"anchor",unlockalt:"unlock-alt",bullseye:"bullseye",ellipsish:"ellipsis-h",ellipsisv:"ellipsis-v",rsssquare:"rss-square",playcircle:"play-circle",ticket:"ticket",minussquare:"minus-square",minussquareo:"minus-square-o",levelup:"level-up",leveldown:"level-down",checksquare:"check-square",pencilsquare:"pencil-square",externallinksquare:"external-link-square",sharesquare:"share-square",compass:"compass",toggledown:"toggle-down",toggleup:"toggle-up",toggleright:"toggle-right",euro:"euro",gbp:"gbp",dollar:"dollar",bitcoinb:"bitcoin",btc:"btc",file:"file",filetext:"file-text",sortalphaasc:"sort-alpha-asc",sortalphadesc:"sort-alpha-desc",sortamountasc:"sort-amount-asc",sortamountdesc:"sort-amount-desc",sortnumericasc:"sort-numeric-asc",sortnumericdesc:"sort-numeric-desc",thumbsup:"thumbs-up",youtube:"youtube",youtubeplay:"youtube-play",longarrowdown:"long-arrow-down",longarrowup:"long-arrow-up",longarrowleft:"long-arrow-left",longarrowright:"long-arrow-right",apple:"apple",windows:"windows",android:"android",linux:"linux",trello:"trello",female:"female",male:"male",suno:"sun-o",moono:"moon-o",archive:"archive",bug:"bug",pagelines:"pagelines",stackexchange:"stack-exchange",arrowcircleoright:"arrow-circle-o-right",arrowcircleoleft:"arrow-circle-o-left",caretsquareoleft:"caret-square-o-left",dotcircleo:"dot-circle-o",wheelchair:"wheelchair",plussquareo:"plus-square-o",spaceshuttle:"space-shuttle",envelopesquare:"envelope-square",university:"university",graduationcap:"graduation-cap",delicious:"delicious",language:"language",fax:"fax",building:"building",child:"child",paw:"paw",spoon:"spoon",cube:"cube",cubes:"cubes",recycle:"recycle",car:"car",cab:"cab",tree:"tree",database:"database",filepdfo:"file-pdf-o",filewordo:"file-word-o",fileexcelo:"file-excel-o",filepowerpointo:"file-powerpoint-o",fileimageo:"file-image-o",filearchiveo:"file-archive-o",fileaudioo:"file-audio-o",filemovieo:"file-movie-o",filecodeo:"file-code-o",lifebouy:"life-bouy",circlnotch:"circle-o-notch",wechat:"wechat",paperplane:"paper-plane",paperplaneo:"paper-plane-o",history:"history",circlethin:"circle-thin",header:"header",paragraph:"paragraph",sliders:"sliders",sharealt:"share-alt",sharealtsquare:"share-alt-square",bomb:"bomb",futbolo:"futbol-o",tty:"tty",binoculars:"binoculars",plug:"plug",newspapero:"newspaper-o",wifi:"wifi",calculator:"calculator",paypal:"paypal",ccvisa:"cc-visa",ccmastercard:"cc-mastercard",ccdiscover:"cc-discover",ccamex:"cc-amex",ccpaypal:"cc-paypal",ccstripe:"cc-stripe",trash:"trash",copyright:"copyright",at:"at",eyedropper:"eyedropper",paintbrush:"paint-brush",birthdaycake:"birthday-cake",areachart:"area-chart",piechart:"pie-chart",linechart:"line-chart",toggleoff:"toggle-off",toggleon:"toggle-on",bicycle:"bicycle",bus:"bus",cartplus:"cart-plus",cartarrowdown:"cart-arrow-down",diamond:"diamond",ship:"ship",usersecret:"user-secret",motorcycle:"motorcycle",streetview:"street-view",heartbeat:"heartbeat",venus:"venus",mars:"mars",mercury:"mercury",server:"server",userplus:"user-plus",usertimes:"user-times",bed:"bed",train:"train",subway:"subway",opencart:"opencart",expeditedssl:"expeditedssl",battery4:"battery-4",battery3:"battery-3",battery2:"battery-2",battery1:"battery-1",battery0:"battery-0",mousepointer:"mouse-pointer",icursor:"i-cursor",objectgroup:"object-group",objectungroup:"object-ungroup",stickynote:"sticky-note",stickynoteo:"sticky-note-o",ccjcb:"cc-jcb",ccdinersclub:"cc-diners-club",clone:"clone",balancescale:"balance-scale",hourglasso:"hourglass-o",hourglass1:"hourglass-1",hourglass2:"hourglass-2",hourglass3:"hourglass-3",hourglass:"hourglass",handgrabo:"hand-grab-o",handpapero:"hand-paper-o",handscissorso:"hand-scissors-o",handlizardo:"hand-lizard-o",handspocko:"hand-spock-o",handpointero:"hand-pointer-o",handpeaceo:"hand-peace-o",trademark:"trademark",registered:"registered",tripadvisor:"tripadvisor",wikipediaw:"wikipedia-w",safari:"safari",chrome:"chrome",internetexplorer:"internet-explorer",television:"television",calendarpluso:"calendar-plus-o",calendarminuso:"calendar-minus-o",calendartimeso:"calendar-times-o",calendarchecko:"calendar-check-o",industry:"industry",mappin:"map-pin",mapsigns:"map-signs",mapo:"map-o",map:"map",commenting:"commenting",commentingo:"commenting-o",creditcardalt:"credit-card-alt",usb:"usb",pausecircle:"pause-circle",pausecircleo:"pause-circle-o",stopcircle:"stop-circle",stopcircleo:"stop-circle-o",shoppingbag:"shopping-bag",shoppingbasket:"shopping-basket",hashtag:"hashtag",bluetooth:"bluetooth",bluetoothb:"bluetooth-b",percent:"percent"}}})}(),function(){"use strict";function e(r,a,t,s,n,l,c){var i={templateUrl:"/tc/courses/upload-image.html",controller:"UploadImageController",size:"md",windowClass:"lu-modal type-1",backdrop:"static",keyboard:!1,resolve:{}};return{upload:function(e,t){{var n,o;t?angular.isObject(e)&&angular.isObject(e.resolve)&&angular.isFunction(e.resolve.image)&&(n=e.resolve.image(),angular.isFunction(e.resolve.paramsFn)&&(o=e.resolve.paramsFn(),angular.isFunction(e.resolve.callbacks)&&(t=e.resolve.callbacks(),function(e,t,n){var o={method:"POST",data:{filename:e.name,"Content-Type":""!==e.type?e.type:"application/octet-stream"}};a.upload(d(o,t(e))).then(function(e){u(n,"onSuccess")(e)},function(e){u(n,"onError")(e)},function(e){u(n,"onProgress")(e)})}(n,o,t)))):((e=r.open(d(i,e))).opened.then(function(){angular.noop()}),e.result.then(function(e){angular.noop()}))}},remove:function(e,t){var n={method:"POST",headers:{"Content-type":"application/json;charset=utf-8"},data:{}};r.open({templateUrl:"/tc/users/remove_profile_image.html",controller:"RemoveProfileImageController",size:"sm",backdrop:"static",keyboard:!1,resolve:{params:function(){return d(n,e)},callbacks:function(){return t}}})},deepExtend:d,extendFn:function(e,t){return function(){e.apply(e,arguments),t.apply(e,arguments)}},blobToFile:function(e,t){angular.isObject(e)&&(e.lastModifiedDate=new Date,e.name=t);return e},errorDialog:function(e){angular.isDefined(e)&&t.notify("",e)},getCallback:u,pingForRemovalProgress:function n(o,r,e,a){var t={};var i="/download_jobs/"+o+"/status.json";s.get(i,t).then(function(e){var t=e.data.job;t.status_id!==l.lupJobStatuses.completed?a=c(function(){n(o,r,e,a)},2e3):(o=null,angular.isDefined(a)&&c.cancel(a),p(e,r))})}};function u(e,t){return angular.isObject(e)&&angular.isDefined(t)&&angular.isFunction(e[t])?e[t]:angular.noop}function d(e,t){if(angular.isUndefined(t))return e;for(var n in t)t.hasOwnProperty(n)&&(e[n]&&"object"==typeof t[n]?d(e[n],t[n]):e[n]=t[n]);return e}function p(e,t){angular.isUndefined(e)||angular.isUndefined(e.data)||angular.isUndefined(e.data.job)?u(t,"onError")(e):e.data.job.has_errors?(n.onError({error:l.showMessage("lup.portal_membership_profile_image.util.remove.error")}),u(t,"onError")(e)):(n.onSuccess({success:l.showMessage("lup.portal_membership_profile_image.util.remove.success")}),u(t,"onSuccess")(e))}}angular.module("lu").service("ImageUploadService",e),e.$inject=["$modal","Upload","$luPopover","$http","notifyFactory","LupHelper","$timeout"]}(),function(){"use strict";function e(r,e,t){function n(){this.inviteSupportModal=null,this.inviteUsersModal=null,this.inviteEmailAddresses="",this.selectedType=null,this.types=null,this.is_admin=null,this.available_groups_list=null}return n.prototype.showInviteUsersModal=function(e,t,n){var o=this;o.types=e||o.types,o.is_admin=t||o.is_admin,o.available_groups_list=n||o.available_groups_list,o.inviteUsersModal=r.open({templateUrl:"/tc/users/invite_users.html",controller:"InviteUsersController",size:"lg",resolve:{types:function(){return o.types},is_admin:function(){return o.is_admin},available_groups_list:function(){return o.available_groups_list},emailAddresses:function(){return o.inviteEmailAddresses},selectedType:function(){return o.selectedType}}}),o.inviteUsersModal.result.then(function(e){e&&"notify_staff_access_feature"==e.action?(o.inviteEmailAddresses=e.emailAddresses,o.selectedType=e.selectedType,o.showInviteSupportModal()):(o.inviteEmailAddresses="",o.selectedType=null)},function(e){o.inviteEmailAddresses="",o.selectedType=null})},n.prototype.showInviteSupportModal=function(){var t=this;t.inviteSupportModal=r.open({templateUrl:"/tc/users/invite_support_modal.html",controller:"InviteSupportModalController",size:"sm"}),t.inviteSupportModal.result.then(function(e){t.showInviteUsersModal()},function(e){t.inviteEmailAddresses="",t.selectedType=null})},n}window.angular.module("lu").factory("InviteUsersFactory",e),e.$inject=["$modal","StorageFactory","$log"]}(),window.angular.module("lu").factory("LearnerDashboardFactory",["$log","learnUponApi",function(e,t){var n=new t,t=function(){this.objectName="dashboard",this.data=null,this.meta=null,this.number_enrolled=0,this.number_completed=0,this.number_pending_review=0,this.number_learning_paths=0,this.number_learning_journeys=0};return t.prototype.getList=function(e){var t=this;return n.getList(t.objectName,e).then(function(){t.meta=n.data.courses.meta,t.data=n.data,t.number_enrolled=t.data.counts.attributes.number_enrolled,t.number_completed=t.data.counts.attributes.number_completed,t.number_pending_review=t.data.counts.attributes.number_pending_review,t.number_learning_paths=t.data.counts.attributes.number_learning_paths,t.number_enrollment_requests=t.data.counts.attributes.number_enrollment_requests,t.number_learning_journeys=t.data.counts.attributes.number_learning_journeys})},t}]),window.angular.module("lu").factory("LearnerResourceListFactory",["$log","learnUponApi","$luPopover",function(e,t,n){var o=new t,t=function(){this.objectName="learner_resource_list",this.data=null};return t.prototype.getList=function(e){var t=this;return o.getList(t.objectName,e).then(function(){t.data=o.data.resources})},t.prototype.awardActivityBadge=function(e){var t=this,e={url:"/learner_resource_list/"+e+"/award_badges.json",data:{resource_id:e}};return o.post(t.objectName,e).then(function(e){t.data=e.data})},t}]),window.angular.module("lu").factory("LearnerResourceFactory",["$log","learnUponApi","LupHelper","$timeout",function(e,t,n,o){var r=new t,t=function(){this.objectName="learner_resources",this.id=null,this.data=null,this.tip=null,this.meta=null};return t.prototype.getList=function(e){var t=this;return r.getList(t.objectName,e).then(function(){t.meta=r.data.resources.meta,t.data=r.data})},t.prototype.destroy=function(e){var t=this,n={params:{}};return r.destroy(t.objectName,n,e).then(function(){this.resource=null,t.id=null})},t.prototype.save=function(e,t){var n=this,e={data:e};return r.put(n.objectName,e,t).then(function(){n.data=r.data})},t.prototype.createResource=function(e){var t=this,e={data:{learner_resource:e}};return r.create(t.objectName,e).then(function(){t.data=r.data})},t.prototype.uploadResource=function(e,t){var n=this,e={url:"/learner_resources/"+t+"/upload_resource.json",hideSpinner:!0,data:e};return r.put(n.objectName,e).then(function(){n.data=r.data})},t.prototype.deleteResource=function(e){var t=this,e={url:"/learner_resources/"+e+"/delete_resource.json"};return r.put(t.objectName,e).then(function(){t.data=r.data})},t}]),function(){"use strict";function e(t,o,n,r,a,e,i,s,l){return{deletePath:function(n){var e=t.showMessage("learningpaths.are_your_sure_you_want_to_delete_this_path");0<n.number_users_on_path&&(e=t.showMessage("lup.learningpaths.are_your_sure_you_want_to_delete_this_path_with_enrollments"));o.confirm(t.showMessage("lup.confirm"),e).then(function(e){r.showGroup("luSpinnerGlobal");var t={data:{}};t.data.learning_path_form={},t.data.learning_path_form.id=n.learningPath.id,t.data.learning_path_form.published_status_id="2",t.id=n.learningPath.id,n.showAction&&l.doUpdateLP(t).then(function(e){a.location="/learning_paths/"})})},publishPath:function(n){if(!angular.isUndefined(n.learningPath.learning_path_courses_count)&&0===n.learningPath.learning_path_courses_count)return void o.notify("",t.showMessage("learningpaths.not_publishable_without_courses"));var e=t.showMessage("learningpaths.are_your_sure_you_want_to_publish_this_path");o.confirm(t.showMessage("lup.confirm"),e).then(function(e){r.showGroup("luSpinnerGlobal");var t={data:{}};t.data.learning_path_form={},t.data.learning_path_form.id=n.learningPath.id,t.data.learning_path_form.published_status_id="1",t.id=n.learningPath.id,n.showAction&&l.doUpdateLP(t).then(function(e){a.location="/learning_paths/"})})},archivePath:function(n){var e=t.showMessage("learningpaths.are_your_sure_you_want_to_archive_this_path");o.confirm(t.showMessage("lup.confirm"),e).then(function(e){r.showGroup("luSpinnerGlobal");var t={data:{}};t.data.learning_path_form={},t.data.learning_path_form.id=n.learningPath.id,t.data.learning_path_form.published_status_id="4",t.id=n.learningPath.id,n.showAction&&l.doUpdateLP(t).then(function(e){a.location="/learning_paths/"})})},addCourseToPath:function(e){n.open({templateUrl:"/tc/learning_paths/add_courses.html",controller:"AddCoursesToLPController",size:"lg",resolve:{learningPath:function(){return e.learningPath},courses:function(){return e.courses}}}).result.then(function(){e.contentWasAdded&&a.location.reload()})}}}angular.module("lu").factory("LearningPathActionsFactory",e),e.$inject=["LupHelper","$luPopover","$modal","spinnerService","$window","LupJobFactory","$http","$rootScope","learnUponLearningPath"]}(),window.angular.module("lu").factory("LearningPathFactory",["$log","learnUponApi","$luPopover",function(e,t,n){var o=new t,t=function(){this.objectName="learning_paths",this.data=null};return t.prototype.enrollInCourse=function(e){var t=this,n={};return n.url="/lpaths/"+e+"/enrol_in_course.json",o.getList(t.objectName,n).then(function(){t.data=o.data})},t.prototype.updateForumSettings=function(e,t){var n=this,t={url:"/learning_paths/:learning_path_id/update_forum_settings.json".replace(/:learning_path_id/,e),data:t};return o.post(null,t,null).then(function(){n.data=o.data})},t}]),function(){function e(e){var o=new e;return{objectName:"learning_paths",data:null,meta:null,getList:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);var t=this;return o.getList(t.objectName,e).then(function(){t.meta=o.data.learning_paths.meta,t.data=o.data})},doUpdateLP:function(e){(e=e||{}).url="/learning_paths/"+e.id+".json";var t=this;return o.put(null,e,null).then(function(){t.data=o.data})},doSaveLP:function(e){(e=e||{}).url="/learning_paths/new";var t=this;return o.create(null,e).then(function(){t.data=o.data})},doSetAsThumbnail:function(e){(e=e||{}).url="/learning_paths/set_as_thumbnail/"+e.image_id+".json";var t=this;return o.put(null,e).then(function(){t.data=o.data})},doUnsetAsThumbnail:function(e){(e=e||{}).url="/learning_paths/remove_thumbnail/"+e.learning_path_id+".json";var t=this;return o.put(null,e).then(function(){t.data=o.data})},doDestroyImage:function(e){var t=this;return o.destroy("learning_path_images",{},e).then(function(){t.data=o.data})},doRemoveCourseFromLearningPath:function(e,t){var n=this,t={url:"/learning_paths/"+e+"/remove_course/"+t+".json"};return o.destroy(null,t,null).then(function(){n.data=o.data})},doReorderCourses:function(e,t){t={url:"/learning_paths/"+t+"/reorder_courses.json"};return t.data={new_order:e.toString()},o.put(null,t,null).then(function(){return o.data})},updateCatalogSettings:function(e,t){t={url:"/learning_paths/:learning_path_id/catalog.json".replace(/:learning_path_id/,e),data:t};return o.put(this.objectName,t,e).then(function(e){return e})},updateSalesSettings:function(e,t){t={url:"/learning_paths/:learning_path_id/sales.json".replace(/:learning_path_id/,e),data:t};return o.put(this.objectName,t,e).then(function(e){return e})},getCoupons:function(e,t){return t.url="/learning_paths/:learning_path_id/sales/coupons.json".replace(/:learning_path_id/,e),o.get(this.objectName,t,e).then(function(e){return e})},addAssociationPrice:function(e,t,n){n={url:"/learning_paths/:learning_path_id/add_association_price.json".replace(/:learning_path_id/,e),data:t,reload:n};return o.post(this.objectName,n,e).then(function(e){return e})},removeAssociationPrice:function(e,t,n){n={url:"/learning_paths/:learning_path_id/remove_association_price.json".replace(/:learning_path_id/,e),data:t,reload:n};return o.post(this.objectName,n,e).then(function(e){return e})},getUnknownEnrollments:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);var t=this;return o.getList(t.objectName,e).then(function(){t.meta=o.data.unknown_enrollments.meta,t.data=o.data})},getGroups:function(e){var t=this,e={url:"/learning_paths/:learning_path_id/groups.json".replace(/:learning_path_id/,e)};return o.getList(t.objectName,e).then(function(){t.data=o.data})},unassignLP:function(e){var t={url:"/learning_paths/"+e+"/unassign.json"};return o.put(this.objectName,t,e).then(function(e){return e})},enrollmentsForLp:function(e,t){var n=this;return o.getList("learning_paths/"+t+"/enrollments",e).then(function(){n.data=o.data})},uploadImage:function(){var e=this,t={url:"/learning_path_images.json",hideSpinner:!0,data:{learning_path_image:{uuid:e.uuid,image_file_name:e.image_file_name,output_url:e.output_url,learning_path_id:e.learning_path_id,portal_id:e.portal_id,alt_tag:e.alt_tag}}};return o.post(e.objectName,t).then(function(){e.data=o.data})}}}angular.module("lu").factory("learnUponLearningPath",e),e.$inject=["learnUponApi"]}(),function(){"use strict";angular.module("lu").factory("learnUponApi",["$http","$log","spinnerService","BtnDisabler",function(a,e,i,s){function t(){this.response=null,this.data=null,this.meta=null}return t.prototype.get=function(e,t,n){var o,r=this;try{o=event.currentTarget}catch(e){}return s.disable(o),t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="GET",t.url||(t.url="/"+e+"/"+n+".json"),a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),s.enable(o),r.response=e,r.data=e.data,r.meta=e.data.meta,e}).catch(function(e){return s.enable(o),r.response=e,r.data=e.data,e})},t.prototype.post=function(e,t,n){var o,r=this;try{o=event.currentTarget}catch(e){}return s.disable(o),t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="POST",t.url||(t.url="/"+e,n&&(t.url=t.url+"/"+n),t.action&&(t.url=t.url+t.action),t.url=t.url+".json"),a(t).then(function(e){return t.reload||i.hideGroup("luSpinnerGlobal"),s.enable(o),r.response=e,r.data=e.data,e}).catch(function(e){return s.enable(o),r.response=e,r.data=e.data,e})},t.prototype.put=function(e,t,n){var o,r=this;try{o=event.currentTarget}catch(e){}return s.disable(o),t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="PUT",t.url||(t.url="/"+e,n&&(t.url=t.url+"/"+n),t.action&&(t.url=t.url+t.action),t.url=t.url+".json"),a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),s.enable(o),r.response=e,r.data=e.data,e}).catch(function(e){return s.enable(o),r.response=e,r.data=e.data,e})},t.prototype.destroy=function(e,t,n){var o,r=this;try{o=event.currentTarget}catch(e){}return s.disable(o),t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="DELETE",t.url||(t.url="/"+e+"/"+n+".json"),a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),s.enable(o),r.response=e,r.data=e.data,e}).catch(function(e){return s.enable(o),r.response=e,r.data=e.data,e})},t.prototype.edit=function(e,t,n){var o=this;return t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="GET",t.url||(t.url="/"+e+"/"+n+"/edit.json"),a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),o.response=e,o.data=e.data,o.meta=e.data.meta,!0})},t.prototype.show=function(e,t,n){var o=this;return t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="GET",t.url||(t.url="/"+e+"/"+n+".json"),a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),o.response=e,o.data=e.data,o.meta=e.data.meta,!0})},t.prototype.getList=function(e,t){var n=this;return t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="GET",t.url||(t.url="/"+e+".json"),a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),n.response=e,n.data=e.data,n.meta=e.data.meta,e})},t.prototype.putList=function(e,t){var n=this;return t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="PUT",t.url||(t.url="/"+e,t.url=t.url+"/0",t.action&&(t.url=t.url+t.action),t.url=t.url+".json"),a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),n.response=e,n.data=e.data,e})},t.prototype.create=function(e,t){var n=this;return t&&!t.hideSpinner&&i.showGroup("luSpinnerGlobal"),t.method="POST",t.url||(t.url="/"+e,t.action&&(t.url=t.url+t.action)),t.url=t.url+".json",a(t).then(function(e){return i.hideGroup("luSpinnerGlobal"),n.response=e,n.data=e.data,!0})},t.prototype.search=function(e){return(e=e||{}).method="GET",a(e)},t}])}(),function(){"use strict";function e(e){return{enable:function(){e.info("Leave Page with Unsaved Data Warning enabled"),window.onbeforeunload=function(){return!0}},disable:function(){e.info("Leave Page with Unsaved Data Warning disabled"),window.onbeforeunload=!1}}}angular.module("lu").factory("LeavePageWithUnsavedChangesWarning",e),e.$inject=["$log"]}(),function(){"use strict";function e(e){var n=new e,e=function(){this.objectName="licenses",this.data=null,this.meta=null};return e.prototype.getList=function(e){var t=this;return n.getList(t.objectName,e).then(function(){t.meta=n.data.licenses.meta,t.data=n.data})},e.prototype.destroy=function(e){var t=this;return n.destroy(t.objectName,{},e).then(function(){t.data=n.data})},e}window.angular.module("lu").factory("LicensesFactory",e),e.$inject=["learnUponApi"]}(),window.angular.module("lu").factory("LocationFactory",["$log","learnUponApi","$luPopover",function(e,t,n){var o=new t,t=function(){this.objectName="settings/courses/iltlocations",this.id=null,this.data=null};return t.prototype.destroy=function(e){var t=this;return o.destroy("locations",{},e).then(function(){t.data=o.data})},t.prototype.getList=function(e){var t=this;return o.getList(t.objectName,e).then(function(){t.data=o.data})},t}]),function(){function e(e){e.useBackdrop("static"),e.useEscClose(!1),e.useCopy(!1),e.setSize("sm")}function t(e,t){var n=t.startSymbol(),t=t.endSymbol();e.put("/dialogs/error.html",'<div class="modal-header dialog-header-error"><h4 class="modal-title"><span class="'+n+"icon"+t+'"></span> <span ng-bind-html="header"></span></h4></div><div class="modal-body word-break-word" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="close()">'+I18n.t("close")+"</button></div>"),e.put("/dialogs/notify.html",'<div class="modal-header dialog-header-notify"><h4 class="modal-title"><span class="'+n+"icon"+t+'"></span> '+n+"header"+t+'</h4></div><div class="modal-body word-break-word" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="close()">'+I18n.t("apprise.ok")+"</button></div>"),e.put("/dialogs/confirm.html",'<div class="modal-header dialog-header-confirm"><h4 class="modal-title"><span class="'+n+"icon"+t+'"></span> '+n+"header"+t+'</h4></div><div class="modal-body word-break-word" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-success" ng-click="yes()">'+I18n.t("apprise.yes_text")+'</button><button type="button" class="btn btn-default" ng-click="no()">'+I18n.t("apprise.no_text")+"</button></div>")}function n(i){return{confirm:function(e,t,n){return n=n||{},0===e.length&&(e=I18n.t("lup.confirm")),i.confirm(e,t,n).result},error:function(e,t,n){return n=n||{},0===e.length&&(e=I18n.t("lup.error")),i.error(e,t,n).result},notify:function(e,t,n){return n=n||{},0===e.length&&(e=I18n.t("lup.info")),i.notify(e,t,n).result},custom:function(e,t,n,o,r){var a={};return o=o||{},a.size=angular.isDefined(o.size)?!!o.size:"lg",a.keyboard=!angular.isDefined(o.keyboard)||!!o.keyboard,a.backdrop=!!angular.isDefined(o.backdrop)&&!!o.backdrop,a.windowClass=angular.isDefined(o.windowClass)?!!o.windowClass:"my-class",i.create(e,t,n,a).result}}}angular.module("lu.dialogs",[]).config(e).run(t).factory("$luPopover",n),e.$inject=["dialogsProvider"],t.$inject=["$templateCache","$interpolate"],n.$inject=["dialogs"]}(),function(){"use strict";angular.module("lu").directive("luNumberMaskDec",function(){return{link:function(e,t,n,a){t.on("keyup",function(e){var t=a.$viewValue.replace(".","").split(""),o=[],r="";angular.forEach(t,function(e){!1===isNaN(e)&&o.push(e)}),angular.forEach(o,function(e,t){var n=o.length;r+=2<n&&n-2==t?"."+e:e}),a.$setViewValue(r),a.$render()})},require:"ngModel",restrict:"A"}})}(),function(){"use strict";angular.module("lu").directive("luNumberMaskInt",function(){return{link:function(e,t,i,s){var l=null;e.$watch(i.ngModel,function(e,t){var n,o,r=parseInt(i.min)||0,a=parseInt(i.max)||10;o=a,r<=(n=e)&&n<=o?l=e:(a<e?s.$setViewValue(a):e<r?s.$setViewValue(r):s.$setViewValue(l),s.$render())},!0)},require:"ngModel",restrict:"A"}})}(),function(){"use strict";function e(r){var a={};return{DEFAULT_MESSAGE:"Loading...",_register:function(e){if(!e.hasOwnProperty("name"))throw new Error("Spinner must specify a name when registering with the spinner service.");a[e.name]=e},_unregister:function(e){a.hasOwnProperty(e)&&delete a[e]},_unregisterGroup:function(e){for(var t in a)a[t].group===e&&delete a[t]},_unregisterAll:function(){for(var e in a)delete a[e]},show:function(e,t){var n=a[e];if(!n)throw new Error("No spinner named '"+e+"' is registered.");t&&n.setMessage(t);n.show()},hide:function(e,t){var n=a[e];if(!n)throw new Error("No spinner named '"+e+"' is registered.");angular.isNumber(t)?r(function(){n.hide()},t):n.hide()},showGroup:function(e,t){for(var n in a){var o=a[n];o.group===e&&(t&&o.setMessage(t),o.show(),0)}},hideGroup:function(n,e){if(angular.isNumber(e))r(function(){for(var e in a){var t=a[e];t.group===n&&(t.hide(),0)}},e);else{for(var t in a){var o=a[t];o.group===n&&(o.hide(),0)}}},showAll:function(){for(var e in a)a[e].show()},hideAll:function(){for(var e in a)a[e].hide()},setSpinnerMessage:function(e,t){var n=a[e];if(!n)throw new Error("No spinner named '"+e+"' is registered.");n.setMessage(t)},setGroupMessage:function(e,t){for(var n in a){var o=a[n];o.group===e&&(o.setMessage(t),0)}}}}function t(t,n){t.hasOwnProperty("register")?t.register="false"!==t.register.toLowerCase():t.register=!0;var o={name:t.name,message:t.message,group:t.group,show:function(){t.show=!0},hide:function(){t.show=!1,t.message=null},toggle:function(){t.show=!t.show},setMessage:function(e){t.message=e}};!0===t.register&&n._register(o),(t.onShow||t.onHide)&&t.$watch("show",function(e){e&&t.onShow?t.onShow({spinnerService:n,spinnerApi:o}):!e&&t.onHide&&t.onHide({spinnerService:n,spinnerApi:o})}),t.onLoaded&&t.onLoaded({spinnerService:n,spinnerApi:o})}angular.module("lu.spinners",[]).factory("spinnerService",e).directive("spinner",function(){return{restrict:"EA",replace:!0,scope:{name:"@?",message:"@?",group:"@?",show:"=?",imgSrc:"@?",register:"@?",onLoaded:"&?",onShow:"&?",onHide:"&?"},template:function(){return['<div ng-show="show" class="spinner-wrap">','<div class="spinner-bg">','<img ng-if="imgSrc" ng-src="{{cdn_path + imgSrc}}" class="spinner"/>',"</div>",'<h2 ng-if="message">{{message}}</h2>',"</div>"].join("")},controller:t,link:function(e,t,n){e.message=n.message}}}),e.$inject=["$timeout"],t.$inject=["$scope","spinnerService"]}(),function(){"use strict";window.angular.module("lu").factory("LuaFactory",["$window","LupJobFactory","LupHelper","SocialSharingFactory","EnrollmentHelper",function(s,r,n,e,l){var c,t=function(){var e=document.querySelector("[preload-resource]").getAttribute("preload-resource");try{return JSON.parse(decodeURIComponent(e))}catch(e){return{}}}(),o=t&&t.web_components_redesign_enabled,a=null,i=[],u=n,d=new e;function p(e){if(!e.detail.module)throw Error("Module is not defined");s.lup_debugger_on=Boolean(e.detail.enableDebugger),l.launchCourse(e.detail.module)}function _(){c.learner_dashboard_enabled?document.location.href="/learner-dashboard":c.is_admin?document.location.href="/dashboard?display=my_courses":document.location.href="/dashboard"}function m(e){if(!e.detail.course_id)throw Error("Course id is not defined");e=e.detail.course_id;s.location.href="/courses/"+e}function f(e){if(!e.detail.course_id)throw Error("Course id is not defined");if(!e.detail.component_id)throw Error("Component id is not defined");var t=e.detail.course_id,e=e.detail.component_id;s.location.href="/courses/"+t+"/content/"+e+"/edit"}function g(t){if(!t.detail.module)throw Error("Module is not defined");var e,n,o=t.detail.module.enrollment_id,r=t.detail.module.id,a=t.detail.module.course_id,i=c.enrollment_components.find(function(e){return e.component_id===t.detail.module.component_id});l.moduleReleased(i)||(e=new Date(i.release_at).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),n.showToast({message:I18n.t("courses.this_module_will_be_released",{time:e}),variant:"error"})),l.sequenceBlocked(c.enrollment,i,c.enrollment_components)?(n=LuAnywhere.services.toast.getInstance()).showToast({message:I18n.t("courses.course_is_sequenced_html"),variant:"error"}):!0===c.is_preview?s.location.href="/courses/"+a+"/preview/"+o+"/page/"+r:c.embedded_content&&c.embedded_content_autoplay?(r=0===c.autoLaunched?"":"?autolaunched="+i.id,s.location.href="/enrollments/"+o+"/page/"+i.id+r):s.location.href="/enrollments/"+o+"/page/"+i.id}function h(e){var t=e.detail.isSurvey;e.detail.component_type_id===n.componentTypes.exam&&t&&s.location.reload()}function b(e){if(!e.detail.module)throw Error("Module is not defined");var t=e.detail.module.enrollment_id,e=e.detail.module.id;s.document.location.href="/enrollments/"+t+"/page/"+e+"?confirm_course_completion=true"}function v(e){var t=e.detail.course_id,n=e.detail.learning_path_id,e=t?0:1,n=t||n;s.document.location.href="/content-details/"+n+"/"+e}function w(e){if(e.preventDefault(),!e.detail.enrollment_id)throw Error("Enrollment id is not defined");e=e.detail.enrollment_id;s.location.href="/enrollments/"+e+"/description"}function y(e,t,n){var o=new r,n={typeId:u.lupJobTypes.downloadCertificate,enrollment_id:e,for_course:t,user_id:n};o.initiateJob(n)}function M(e){switch(e.detail.media){case"linkedin":d.shareDialog(e.detail.enrollment_id);break;case"twitter":var t=e.detail.customHashes,n=e.detail.relatedAccounts,e=u.showMessage("social_sharing.predefined_twitter_text",{course_name:e.detail.enrollment_name})+" "+e.detail.customUrl,e=encodeURI("https://twitter.com/intent/tweet?hashtags="+t+"&related="+n+"&text="+e);s.open(e,"popupwindow","status=no, width=640, height=480, resizable=yes, toolbar=no, menubar=no, scrollbars=no, location=no, directories=no").focus()}}return{addLuaCoursePlayerEventListeners:function(){var e;!o&&!c.web_components_redesign_enabled||(e=document.getElementById("lua-course-player"))&&(e.addEventListener("lua-course-player:navigated-to-module",g),e.addEventListener("lua-course-player:navigated-back-to-course",m),e.addEventListener("lua-course-player:navigated-to-edit-content",f),e.addEventListener("lua-course-player:navigated-to-previous-module",g),e.addEventListener("lua-course-player:navigated-to-next-module",g),e.addEventListener("lua-course-player:exited",_),e.addEventListener("lua-course-player:course-completed",b),e.addEventListener("lua-course-player:navigated-to-content-details",v),e.addEventListener("lua-course-player:description-showed",w),e.addEventListener("lua-course-player:leave-survey-clicked",h),e.addEventListener("lua-course-player:certificate-downloaded",y),e.addEventListener("lua-course-player:social-link-clicked",M),e.addEventListener("lua-course-player:scorm-launched",p))},setup:function(e){c=e.scope},getWebcomponentsFlag:function(){return t.web_components_redesign_enabled},web_components_redesign_enabled:o,openModal:function(e,t,r){a||(a=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var n=e[t];if("childList"===n.type)for(var o=0;o<i.length;o++)i[o](n)}})).observe(document.body,{childList:!0,subtree:!0}),LuAnywhere.services.modal.getInstance().openModal(e,t),t=function(e){for(var t=Array.prototype.slice.call(e.addedNodes),n=0;n<t.length;n++){var o=t[n];o.tagName&&"luds-modal"===o.tagName.toLowerCase()&&function(e,t){for(var n in t){var o,r;t.hasOwnProperty(n)&&(r=t[n].selector,o=t[n].handler,(r=e.querySelector(r))&&r.addEventListener("click",o))}}(o,r)}},i.push(t)}}}])}(),window.angular.module("lu").factory("LupHelper",["$window","$filter","spinnerService","$timeout","$sce","$luPopover","$modal","$log","$rootScope",function(f,n,e,t,o,r,g,a,i){f.spinnerService=e;var s=[{value:1,label:I("lup.filters.all_learning_paths")},{value:2,label:I("lup.filters.only_enrollments")}],l=[{value:1,label:I("lup.filters.all_courses")},{value:2,label:I("lup.filters.only_enrollments")}],c={settings:{default_course_posts_colour:"#d1584f",default_lp_posts_colour:"#eb9d50",default_topic_colour:"#4bbd97"},topics:{status_code:{deleted:5,pending_review:10,draft:14,published:15,archived:20},type_code:{portal:1,group:2,course:3,learning_path:4},filter_status:{published_and_enabled:1,archived_and_enabled:2,all_disabled:3,all_enabled:4},create_post_permission:{admins_and_moderators:0,everyone:1}},posts:{max_number_of_tags:5,status_code:{deleted:5,pending_review:10,draft:15,published:20,archived:25},filter_status:{published_only:1,archived_only:2,all_posts:3,draft_only:4},edit_permissions:{learner:1,post_creator:2,moderator:3,admin:4},action:{editing:1,deleting:2,archiving:3},creation_type:{course:1,learning_path:2,enrollment:3,topic:4}},tags:{max_number_of_characters:20},comments:{published:5,deleted:10,pending_review:25},card_types:{list:1,grid:2},max_length_for_description:120,image_size:{post_cover:"5MB",post_content:"1MB"},image_types:{post_cover:".jpg,.jpeg,.png",post_content:".jpg,.jpeg,.png"}},u=[{value:"all",label:I("ilts.all")},{value:"active",label:I("lup.licenses.active")},{value:"expired",label:I("lup.licenses.expired")}],d={portal_coupon_type:{apply_to_whole_basket:1,apply_to_cheapest_course:2,apply_to_most_expensive_course:3},max_usage_limits:3e4};answerStatuses={not_attempted:0,correct:1,incorrect:2};var p={waitlisted:-4,partially_attended:-3,cancelled:-2,no_show:-1,not_started:1,in_progress:2,completed:3,passed:4,failed:5,pending_review:6,closed:7,past_due:8},h=[],m={published:1,deleted:2,draft:3,archived:4,under_revision:5},b={nista:0,cloned:1,cloning:2,being_cloned:3,course_failure:4,component_errors:5,certs_credit_error:6};var v={exam:1,scorm:2,page:3,assignment:4,session:5,training:6,checklist:7,linkedin_learning:8,e_signature:10},w={document:1,video:2,text:3,audio:4,embedded_script:5},y={member:1,admin:2,instructor:3,manager:4},M=[{value:0,text:I("batchuserimports.comma")},{value:1,text:I("batchuserimports.tab")},{value:2,text:I("batchuserimports.pipe")},{value:3,text:I("batchuserimports.other")}],S={activity:1,learning:2,level:3},C=1,A=2,L={course_completion:1,exam_completion:2,survey_completion:3,purchase_completion:4,learning_path_completion:5,badge_awarded:6,badge_revoked:7,course_updated:8,course_enrollment:9,course_unenrollment:10,learning_path_enrollment:11,learning_path_updated:12,course_clone_completion:13,module_completion:14},$={published:1,deleted:2,draft:3,archived:4,under_revision:5},T={gotowebinar:1,gotomeeting:2,webex_training:4,gototraining:8,webex_event:16,webex_meeting:32,adobe_event:64,adobe_meeting:128,zoom:256,ms_teams:512},z={do_not_update_memberships:1,update_memberships:2,delete_memberships:3},x={rejected:0,removed_consent:5,required:10,accepted_before:15,delete_requested:20,not_required:25,agreed:30},P={everyone:0,admins_excluded:1},k={0:I("lup.live_trainings.course_module.registration.format_single"),1:I("lup.live_trainings.course_module.registration.format_multi")},E={0:I("lup.live_trainings.environment_type_online"),1:I("lup.live_trainings.environment_type_in_person")};function O(e){return e.cloned_status_id==b.cloning}function I(e,t){return I18n.t(e,t)}function D(e,t){t=t||window.location.href,t=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(t);return t?t[1]:null}function N(e){var t=I("lup.users.na");return e.display_name&&" "!=e.display_name?t=_.map(e.display_name.split(" "),function(e){return e[0]}).join("").substr(0,2):e.first_name&&" "!=e.first_name?(t=e.first_name[0],e.last_name&&(t+=e.last_name[0])):e.username?t=e.username[0]:e.email&&(t=e.email[0]),t.toUpperCase()}e=[{text:I18n.t("course_assignments.all"),value:0},{text:I18n.t("course_assignments.pending_review"),value:p.pending_review},{text:I18n.t("dashboard.completed"),value:p.completed},{text:I18n.t("dashboard.passed"),value:p.passed},{text:I18n.t("dashboard.failed"),value:p.failed}];function F(e){var t=document.createElement("a");return t.href=e,t}function q(e){var t,n=F(e);return-1!==n.host.indexOf("youtube.com")&&-1!==n.pathname.indexOf("embed")?t=n.pathname.replace(/embed/,""):-1!==n.host.indexOf("youtube.com")?t=D("v",e):-1!==n.host.indexOf("youtu.be")&&(t=n.pathname.replace(/\//,"")),t?"https://www.youtube.com/embed/"+t+"?rel=0&&showinfo=0&iv_load_policy=3&enablejsapi=1":e}var j={daily_learning:1,purchase:2,views_resource:3,self_enroll:4,approve_ext_credit:5};var B={not_registered:-10,not_started:10,completed:20,failed:30,no_show:40},R={automatic:0,manual:1};return{catalogOrderingOptions:{dashboard:0,description:1,catalog:2,start_immediately:3},sales_tax_label:{default:0,vat:1,gst:2},keyboard_keys:{13:"enter",32:"space",74:"J"},setupConfig:function(e){var t={params:{}};try{e.reverse&&(t.params.direction=e.reverse)}catch(e){}try{e.search.searchQuery&&(t.params.search=e.search.searchQuery)}catch(e){}try{e.filterStatus&&(t.params.filterStatus=e.filterStatus)}catch(e){}try{e.filterGroup&&(t.params.filterGroup=e.filterGroup)}catch(e){}try{e.filterPublishedAfter&&(t.params.filterPublishedAfter=e.filterPublishedAfter)}catch(e){}try{e.filterCreatedAfter&&(t.params.filterCreatedAfter=e.filterCreatedAfter)}catch(e){}try{0<e.page&&(t.params.page=e.page)}catch(e){}try{0<e.filter_by&&(t.params.filter_by=e.filter_by)}catch(e){}return t},renderCKEditor:function(n){var e="",t=0;if(n.prevent_duplicates)for(e in CKEDITOR.instances)for(t=0;t<h.length;t++)if(e==n.id&&e==h[t])return;if(n.clear_all_previous_instances)for(e in CKEDITOR.instances)try{CKEDITOR.instances[e].destroy(!0)}catch(e){}var o,r,a=610,i=200,s="",l="";CKEDITOR.timestamp=Math.random(),n.width&&(a=n.width),n.height&&(i=n.height),n.add_image_upload_via_dj&&n.disable_image_properties?l="image":n.add_image_upload&&(CKEDITOR.config.filebrowserUploadUrl="/uploaded_images"),n.image_type&&(o=n.id,r=n.image_type,f.executeDjImageUpload=function(){g.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg modal-box--tofront",resolve:{resource_id:function(){return null},ckeditorInstance:function(){return o},imageType:function(){return r}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})});var c,u,d=[],d=n.toolbar_for_forums?((u=[]).push({name:"clipboard",items:["Undo","Redo"]}),u.push({name:"styles",items:["Format"]}),u.push({name:"basicstyles",items:["Bold","Italic","Underline","-","Link","Unlink","-","Subscript","Superscript"]}),u.push({name:"paragraph",items:["NumberedList","BulletedList","-","Blockquote","-","JustifyLeft","JustifyCenter","JustifyRight","-","MediaEmbed"]}),u.push({name:"insert",items:["djimage"]}),CKEDITOR.config.linkShowAdvancedTab=!1,u):n.toolbar_for_post_comments?((c=[]).push({name:"clipboard",items:["Undo","Redo"]}),c.push({name:"basicstyles",items:["Bold","Italic","Underline","-","Link","Unlink","-","Subscript","Superscript"]}),CKEDITOR.config.linkShowAdvancedTab=!1,c):(c=n,p=[],(_=[]).push({name:"clipboard",items:["Paste","PasteText","PasteFromWord","-","Undo","Redo"]}),_.push({name:"styles",items:["Format","Font","FontSize"]}),_.push({name:"colors",items:["TextColor","BGColor"]}),_.push({name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","HorizontalRule"]}),_.push({name:"basicstyles",items:["Bold","Italic","Underline","Subscript","Superscript"]}),_.push({name:"links",items:["Link","Unlink"]}),c.add_image_upload_via_dj?p.push("djimage"):c.add_image_upload&&p.push("Image"),c.add_embedded_media&&p.push("MediaEmbed"),p.push("Table"),_.push({name:"insert",items:p}),c.add_math_jax&&_.push({name:"tools",items:["Mathjax"]}),c.add_insert_symbols&&_.push({name:"tools",items:["Symbol"]}),p=["Preview","Maximize"],c.show_source&&p.push("Source"),c.add_blank_placeholder&&p.push("add_blank_placeholder"),_.push({name:"advanced",items:p}),_);n.add_math_jax&&(s="mathjax"),n.add_insert_symbols&&(0===s.length?s="symbol":s+=",symbol"),n.add_blank_placeholder&&(0===s.length?s="addblankquestionplaceholder":s+=",addblankquestionplaceholder"),n.add_embedded_media&&(0===s.length?s="mediaembed":s+=",mediaembed");var p="";n.body_class&&(p=n.body_class);var _="p;h1;h2;h3;h4;h5;h6;pre;address;div";n.format_tags&&(_=n.format_tags);var m={language:I18n.t("ck.language"),extraPlugins:s,removePlugins:l,toolbar:d,width:a,height:i,bodyClass:p,format_tags:_,on:{instanceReady:function(e){n.auto_focus&&e.editor.focus()}}};n.include_custom_css&&(m.contentsCss=CONFIG.cdnPath+"application.css");try{CKEDITOR.replace(n.id,m)}catch(e){}if(h.push(n.id),n.form_identifier&&"function"==typeof IEFixBeforeSubmit&&IEFixBeforeSubmit(n.form_identifier),n.editorTextChangeEvent)for(t in CKEDITOR.instances)CKEDITOR.instances[t].on("change",n.editorTextChangeEvent);CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name,e=e.data.definition;"link"==t&&(e.removeContents("upload"),function(e){e=e.getContents("info").get("linkType");e.items=e.items.filter(function(e){return"anchor"!==e[1]})}(e)),n.disable_image_properties||"image"!=t||e.removeContents("Upload")})},getHTMLFromCKEditor:function(t){try{return CKEDITOR.instances[t].getData()}catch(e){a("Failed to get HTML from "+t+" :: "+e)}return""},destroyCKEditor:function(e){try{CKEDITOR.instances[e].destroy()}catch(e){a("Failed to destroy editor instance :: "+e)}},emptyCKEditor:function(e){try{CKEDITOR.instances[e].setData("")}catch(e){a("Failed to empty editor instance :: "+e)}},focusCKEditorInstance:function(e){try{CKEDITOR.instances[e].focus()}catch(e){a("Failed to focus editor instance :: "+e)}},applyMathJax:function(){try{for(var e=document.querySelectorAll(".lu-math"),t=0;t<e.length;t++)MathJax.Hub.Queue(["Typeset",MathJax.Hub,e[t]],function(){})}catch(e){return}},launchButtonText:function(e){return e.status_id==p.not_started?I18n.t("lup.dashboard.start"):e.status_id==p.failed?I18n.t("lup.dashboard.re_attempt"):e.status_id==p.in_progress?I18n.t("lup.dashboard.resume"):I18n.t("lup.dashboard.launch")},showStaggeredCourseDetails:function(e){return e.staggered_course_title&&0<e.staggered_course_title.length?I18n.t("learningpaths.next_course_on_path_staggered",{trigger_at:n("displayDateTime")(e.trigger_at),course_name:e.staggered_course_title}):e.trigger_id&&0<e.trigger_id?I18n.t("learningpaths.your_path_has_been_completed_staggered",{trigger_at:n("displayDateTime")(e.trigger_at),course_name:e.staggered_course_title}):e.course_title?e.status_id==p.not_started?I18n.t("learningpaths.start_your_path",{course_name:e.course_title}):e.status_id==p.in_progress?I18n.t("learningpaths.next_course_on_path",{course_name:e.course_title}):e.status_id==p.pending_review?I18n.t("learningpaths.pending_review_next_course_on_path",{course_name:e.course_title}):void 0:void 0},translateEnrollmentStatus:function(e){var t=e.status_id,n=e.show_passfail_to_learners,o=e.must_choose_session,e=e.only_contains_sessions;return t==p.waitlisted?I18n.t("ilts.waitlisted"):t==p.in_progress?I18n.t("dashboard.in_progress"):t==p.pending_review?I18n.t("course_assignments.pending_review"):t==p.closed?I18n.t("learningpaths.closed"):t==p.completed?1==e?I18n.t("attended.ilts"):I18n.t("dashboard.completed"):t==p.passed?I18n.t("dashboard.passed"):t==p.failed?1==n?I18n.t("dashboard.failed"):I18n.t("dashboard.completed"):o?I18n.t("ilts.session_choice_required"):I18n.t("dashboard.not_started")},showMessage:I,publishedCourseStatus:function(e,t){var n=e.published_status_id,o=e.sellable,r=e.cataloged,a=e.allowed_to_sell;if(O(e))return I("coursez.being_cloned");if(t){if(n==m.published){if(o&&1==a&&!r)return I("licensez.licensed_sellable");if(!o&&r)return I("licensez.licensed_cataloged");if(!o&&r)return I("licensez.licensed_cataloged");if(o&&1==a&&r)return I("licensez.licensed_sellable_cataloged");if(o&&1!=a&&r)return I("licensez.licensed_cataloged");if(o&&1!=a&&r)return I("licensez.licensed_cataloged")}return I("licensez.licensed")}return n==m.published?I(o&&!r?"course_status.sellable":!o&&r?"group_catalog.cataloged":o&&r?"group_catalog.sellable_cataloged":"course_status.published"):n==m.deleted?I("course_status.deleted"):n==m.archived?I("course_status.archived"):n==m.draft?I("course_status.draft"):n==m.under_revision?I("course_status.under_revision"):void 0},trustContent:function(e){return o.trustAsHtml(e)},courseCloningStatuses:b,courseIsCloning:O,showTip:function(e,t,n,o){r.notify(n||"",o?e:I(e,t),{windowClass:"wide-modal"})},enrollmentStatuses:p,componentTypes:v,componentElementTypes:w,ilt_sessions:{enroll_in_all:0,must_choose_one:1,can_choose_more_than_one:2,choose_session_from:{dashboard:1,course_details:2},mark_attended:{dont_do_anything:0,unenroll_from_course:1,allow_to_choose_again:2,dont_do_anything_but_allow_sequence_override:3}},enrollment_statuses:{waitlisted:-4,partially_attended:-3,cancelled:-2,no_show:-1,not_started:1,in_progress:2,completed:3,passed:4,failed:5,pending_review:6,closed:7,past_due:8},fileUploads:{max_assignment_uploads:5,types:{assignment_upload_answers:1,document:2,video:3,audio:4,scorm_or_tincan:5,assignment_handouts:6,batch_upload:7,supporting_documents:8,feedback_documents:9,assignment_answer_upload_feedbacks:10,learner_resources:11,session_roster:12,profile_image:13,topic_image:14,post_content_image:15,post_cover_image:16,course_image:17,learning_path_image:18,bundle_image:19,mobile_branding:20,logo_branding:21,banners:22,badge:23,certificate:24,saml_logo_image:25,sqsso_logo_image:26,course_description_image:27,course_objectives_image:28,login_welcome_message_image:29,learner_resource_description:30,store_branding:31,portal_banner_slide_content:32,learning_path_description:33,question_text:34,answer_options:35,component_description:36,ecommerce_store_about_page_sidebar:37,component_element_image:39,ecommerce_store_author_description:40,custom_ip_blocked_messages:41,author_terms_and_conditions:42,question_details_overall_feedback:43,video_thumbnail_image:44,post_cover_image_after_create:45,training_history_migration:46,email_banner_image:47,video_caption:48}},translateComponentElementType:function(e){return e==w.document?I("lup.components.document"):e==w.text?I("lup.components.text"):e==w.video?I("lup.components.video"):e==w.audio?I("lup.components.audio"):"-"},s3ScormStatuses:{not_required:0,pending:1,completed:2,error:3,no_scorm_zip_file_row:4,version_not_supported:5,no_launchables:6,no_default_org:7,no_manifest_found:8,failed_to_retrieve_file:9,cannot_swap_types:10,timed_out:11},scormCompleteWhen:{lmsfinish_received:0,score_raw_received:1,score_raw_received_but_ignore_zero:2,lmsfinish_with_score_only:3},coursePublishedStatuses:m,learningJourneyStatuses:{draft:"draft",published:"published",archived:"archived",deleted:"deleted",version_draft:"version_draft",version_archived:"version_archived"},groupMembershipTypes:y,search:{waitTime:300,listHeaderWaitTime:900,minCharacters:3,maxCharacters:50,visibleCharacters:16},samlFingerprintValidLengths:{unformattedSHA1:40,formattedSHA1:59,unformattedSHA256:64,formattedSHA256:95},batchfile_delimiter_options:M,translatePortalMembershipType:function(e){var t="";return e==y.member?t=I18n.t("group_memberships.learner"):e==y.admin?t=I18n.t("group_memberships.admin"):e==y.instructor?t=I18n.t("group_memberships.tutor"):e==y.manager&&(t=I18n.t("group_memberships.manager")),t},newModuleBreadCrumbTitle:function(e){return I(e===v.scorm?"lup.breadcrumbs.courses.new_scorm":e===v.assignment?"lup.breadcrumbs.courses.new_assignment":e===v.session?"breadcrumbs.courses.new_session":e===v.exam?"lup.breadcrumbs.courses.new_exam":e===v.checklist?"lup.breadcrumbs.courses.new_checklist":"lup.breadcrumbs.courses.new_page")},newSegmentBreadCrumbTitle:function(e){return I(e===w.video?"lup.breadcrumbs.courses.new_video":e===w.audio?"lup.breadcrumbs.courses.new_audio":e===w.text?"lup.breadcrumbs.courses.new_text":"lup.breadcrumbs.courses.new_document")},segmentBreadCrumbTitle:function(e){return I(e===w.video?"lup.breadcrumbs.courses.video":e===w.audio?"lup.breadcrumbs.courses.audio":e===w.text?"lup.breadcrumbs.courses.text":"lup.breadcrumbs.courses.document")},showComponentType:function(e,t){return I(e===v.checklist?"lup.checklists.library_search_tag":e===v.scorm?t?"lup.courses.tincan":"courses.scorm":"reports.page")},locales:[{key:"english",value:1},{key:"spanish",value:2},{key:"french",value:3},{key:"german",value:4},{key:"english_uk",value:5},{key:"dutch",value:6},{key:"brazilian_portuguese",value:7},{key:"italian",value:8},{key:"polish",value:9},{key:"russian",value:10},{key:"japanese",value:11},{key:"chinese",value:12},{key:"canadian_french",value:13},{key:"traditional_chinese",value:14},{key:"czech",value:15},{key:"danish",value:16},{key:"hungarian",value:17},{key:"norwegian",value:18},{key:"flemish",value:19},{key:"european_portuguese",value:20},{key:"slovak",value:21},{key:"swedish",value:22},{key:"turkish",value:23},{key:"korean",value:24},{key:"finnish",value:25},{key:"arabic",value:26},{key:"vietnamese",value:27},{key:"indonesian",value:28}],flag_codes:{english:"en",spanish:"es",french:"fr",german:"de",english_uk:"uk",dutch:"nl",brazilian_portuguese:"ptbr",italian:"it",polish:"pl",russian:"ru",japanese:"ja",chinese:"zhcn",traditional_chinese:"zhtw",canadian_french:"frca",czech:"cs",danish:"da",hungarian:"hu",norwegian:"nbno",flemish:"nlbe",european_portuguese:"pt",slovak:"sk",swedish:"sv",turkish:"tr",korean:"ko_kr",finnish:"fi_fl",arabic:"ar",vietnamese:"vi_vn",indonesian:"id"},lupJobTypes:{downloadTrainingHistory:1,downloadCertificate:2,exportCoursesToExcel:3,exportUsersToExcel:4,exportResourcesToExcel:5,exportInvitesToExcel:6,exportPendingEnrollmentsToExcel:7,exportReport:9,downloadExamResults:10,downloadAssignment:11,batchImportSample:12,exportExam:13,exportQuestionPool:14,exportTermsData:15,exportCourseReviews:16,exportAutoAssignRulesPdf:20,exportGroupsToExcel:22,exportAllCourseReviews:23,exportSignedEsignatureModules:24,trackTinCanProgression:26},lupJobStatuses:{not_started:1,in_progress:2,completed:3,not_found:4,failed:5},statusJobs:{userWaitingDrEnrollments:1},batch_import_types:{users:1,enrollments:2,groups:3},messages_type:{internal:1,both:2},getQueryString:D,questionTypes:{choice:1,feedback:2,rating:3,order_list:4,match_list:5,fill_the_blanks:6},showReviewerName:function(e){return e.is_anonymous?I("reviews.anonymous"):e.first_name&&0!==e.first_name.length?e.first_name:"-"},reviewerNameInitials:function(e){return e.is_anonymous?I("reviews.anonymous")[0]:N(e)},avatarInitials:N,answerStatuses:answerStatuses,question_choice_types:{single:1,multiple:2},viewLearnersCredits:function(e){g.open({templateUrl:"/tc/shared/view_credits.html",controller:"ViewCreditsController",backdrop:"static",size:"lg",resolve:{opts:function(){return e}}})},displayName:function(e,t){var n=I("lup.users.na"),o=e.display_name||e.co_display_name,r=e.first_name||e.co_first_name,a=e.last_name||e.co_last_name,i=e.username||e.co_username,e=e.email||e.co_email;return r&&a&&" "!=r?n=r+" "+a:o&&" "!=o?n=o:i&&t?n=i:e&&(n=e),n},translate_assignment_status:function(e,t,n){return t||e!=p.completed?t&&e==p.completed?I18n.t("ilts.attended"):e==p.cancelled?I18n.t("ilts.cancelled"):e==p.no_show?I18n.t("ilts.no_show"):e==p.partially_attended?I18n.t("ilts.partially_attended"):e==p.passed?n?I18n.t("dashboard.passed"):I18n.t("dashboard.completed"):e==p.failed?n?I18n.t("dashboard.failed"):I18n.t("dashboard.completed"):e==p.in_progress?I18n.t("dashboard.in_progress"):e==p.pending_review?I18n.t("course_assignments.pending_review"):-1==e?I18n.t("course_assignments.pending_invite"):e==p.waitlisted?I18n.t("ilts.waitlisted"):t?I18n.t("ilts.enrolled"):I18n.t("dashboard.not_started"):I18n.t("dashboard.completed")},get_assignment_statuses_for_select:e,external_training_record_statuses:{pending_review:0,approved:1,rejected:2},dashboard_filters:{enrolled_courses:1,completed_courses:2,learning_paths:3,pending_review_courses:4,external_trainings:5,pending_enrollments:6,course_questions:7,enrollment_requests:8,learning_journeys:9},badge_filters:{all_badges:0,activity_badges:1,learning_badges:2,level_badges:3},badge_types:S,associationTypeIds:{member:0,non_member:1},translateBundleStatus:function(e){var t="";return e==A?t=I18n.t("course_status.sellable"):e==C&&(t=I18n.t("course_status.draft")),t},questionPoolTypes:{exam:1,survey:2,scorm:3},translateLearningPathStatus:function(e,t,n){return e==$.published?t&&!n?I18n.t("course_status.sellable"):!t&&n?I18n.t("group_catalog.cataloged"):t&&n?I18n.t("group_catalog.sellable_cataloged"):I18n.t("course_status.published"):e==$.draft?I18n.t("course_status.draft"):e==$.archived?I18n.t("course_status.archived"):I18n.t("course_status.deleted")},learning_paths:{immediate:0,previous_completed:1,previous_passed:2,previous_passed_or_failed:3,fixed_date:4,fixed_days:5,filter_in_search:"only_paths",enrollment_options:{learner_chooses:0,must_purchase:1,fixed_date:2,fixed_days:3},completion_logic:{sequential:0,x_of_y:1}},formatFileSize:function(e){return(e=parseInt(e))<1e3?e+" B":1e3<=e&&e<1e6?Math.round(e/1e3*100)/100+" KB":Math.round(e/1e6*100)/100+" MB"},translateWebhookType:function(e){var t=[L.course_enrollment,L.course_unenrollment];return e===L.course_completion?I("webhooks.course_completion"):e===L.exam_completion?I("webhooks.exam_completion"):e===L.survey_completion?I("webhooks.survey_completion"):e===L.purchase_completion?I("webhooks.purchase_completion"):e===L.learning_path_completion?I("webhooks.learning_path_completion"):e===L.badge_awarded?I("webhooks.badge_awarded"):e===L.badge_revoked?I("webhooks.badge_revoked"):e===L.course_updated?I("webhooks.course_updated"):e===L.learning_path_enrollment?I("webhooks.learning_path_enrollment"):e===L.learning_path_updated?I("webhooks.learning_path_updated"):e===L.course_clone_completion?I("webhooks.course_clone_completion"):e===L.module_completion?I("webhooks.module_completion"):t.includes(e)?I("webhooks.course_enrollment"):"-"},translateWebhookStatus:function(e){return e.success?I("webhooks.success_at"):e.last_error_at?I("webhooks.error_at"):I("webhooks.pending")},memberTypes:{member:0,non_member:1},coupons:d,waitlist_types:{manually:0,automatic:1},returnPublishedStatusesForCopiedCourse:function(){var e=[];return e.push([I("course_status.draft"),m.draft]),e.push([I("course_status.published"),m.published]),e},lupScheduledReports:{daily:1,weekly:2,monthly:3},componentCancelText:function(e){return e.id?I("close"):I("cancel")},simpleEmailValidation:function(e){return new RegExp(i.email_regex).test(e)},emailListValidation:function(e){for(var t=e.split(","),n=!0,o=new RegExp(i.email_regex),r=0;r<t.length;r++){var a=t[r].trim();if(!o.test(a)){n=!1;break}}return n},couponCodeValidation:function(e){return/^[a-z0-9A-Z-]+$/.test(e)},couponCodeLengthValidation:function(e){var t=!0;return e&&0<e.length&&e.length<7&&(t=!1),t},couponUsageLimitsValueValidation:function(e){return!(null!==e&&!angular.isUndefined(e))||(e=parseInt(e),!window.isNaN(e)&&(0<e&&e<=d.max_usage_limits))},checkStringExistence:function(e){return!!e&&""!==e.trim()},checkPositiveIntegerExistence:function(e){return(e=Number(e))%1==0&&0<e},question_errors:{empty_question:0,no_correct_answer:1,question_points_are_zero:2,empty_answer:3,duplicate_answers:4},maxNumberOfSalesforceImports:1e3,webinar_types:T,getWebinarKeyFromType:function(e){for(var t=parseInt(e),n=Object.keys(T).map(function(e){return{key:e,value:T[e]}}),o=0;o<n.length;o++)if(t===n[o].value)return n[o].key;return null},webinar_types_names:{1:"GoTo Webinar",2:"GoTo Meeting",4:"Webex Training",8:"GoTo Training",16:"Webex Event",32:"Webex Meeting",64:"Adobe Event",128:"Adobe Meeting",256:"Zoom",512:"MS Teams"},zoom_webinar_types:{webinar:1,meeting:2},webinars:{password_maxlength:{default:null,zoom:10}},noneOrOnlyOne:function(e){var t=!0,n=!1;return _.each(e,function(e){if(e){if(n)return t=!1;n=!0}}),t},translateBadgeType:function(e){var t="";return e===S.activity?t=I("lup.gamification.activity_badge"):e===S.learning?t=I("lup.gamification.learning_badge"):e===S.level&&(t=I("lup.gamification.level_badge")),t},portalBannerSlideTypes:{multimedia_slide:"MultimediaSlide",image_slide:"ImageSlide",content_slide:"ContentSlide"},isIE:function(){return!!document.documentMode},embedYoutubeUrl:q,embedVideoUrl:function(e){return/(youtube.com|youtu.be)/i.test(e)?q(e):/(vimeo.com|player.vimeo.com)/i.test(e)?function(e){var t,n=F(e);-1!==n.host.indexOf("vimeo.com")&&-1===n.host.indexOf("player.vimeo.com")&&(t=n.pathname.replace(/\//,""));return t?"https://player.vimeo.com/video/"+t+"?title=0&byline=0&portrait=0":e+additionalParams}(e):e},translateBadgeActivity:function(e){var t="";return e===j.daily_learning?t=I("lup.gamification.badge_activity_types.daily_learning"):e===j.purchase?t=I("lup.gamification.badge_activity_types.purchase"):e===j.views_resource?t=I("lup.gamification.badge_activity_types.views_resource"):e===j.self_enroll?t=I("lup.gamification.badge_activity_types.self_enroll"):e===j.approve_ext_credit&&(t=I("lup.gamification.badge_activity_types.approve_ext_credit")),t},checkPercentageValidity:function(e){return null!=e&&""!==e&&(0<=(e=Number(e))&&e<=100)},gamification_limitations:{max_learnign_awards:5,badge_name_length:32,level_name_length:32,badge_max_points:5e6},cert_award_types:{enrollments:1,learning_paths:2},badge_event_types:{daily_learning:1,purchase:2,views_resource:3,self_enroll:4,approve_ext_credit:5,course_completion:6,learning_path_completion:7,level_achieved:8},date_formats:{dashboard:"DD MMM YYYY",messages:"YYYY/MM/DD @ h:mm A",session:"MMM D, YYYY, hh:mm A"},abbreviateNumber:function(e,t){return e=parseInt(e),!window.isNaN(e)&&!window.isNaN(t)&&t<e.toString().length},badge_activity_types:j,rule_data_types:{custom_user_data:1,all_users:2,email_domain:3,membership_type:4},pagination_sizes:{default:10,dashboard:5,catalog:5,learner_global_search:7,client_list:10,dashboard_activity_feed:6,reviews:10,courses:10,groups:10,licenses:10,portal_jumper:10,message_list:10,message_dialog:5,learner_resource_views:5,webhooks:15,typeadhead_default:10},comparePasswords:function(e,t){return e===t},enrollment_approvals:{status_types:{pending:0,accepted:1,rejected:2},notifications:{scheduled_types:{instant:0,scheduled:1}},approval_types:{course:1,learning_path:2}},filterLicenseStatuses:u,password_policy_form_validations:{password_expiration_days_min:1,num_historical_passwords_stored_min:1,num_historical_passwords_stored_max:25,minimum_numerical_characters_min:0,minimum_special_characters_min:0,minimum_uppercase_characters_min:0,minimum_lowercase_characters_min:0,minimum_password_length_min:6,minimum_password_length_max:100},rule_types:{group:1,membership_type:2},custom_data_field_types:{string:1,decimal:2,integer:3,string_choice:4,decimal_choice:5,integer_choice:6,date:7},custom_data_choice_select_types:{single_select:1,multi_select:2,numeric_select:3},rules_apply_types:{new:1,all:2},free_text_match_types:{contains:1,matches:2},publishedStatuses:$,store_catalog_order_by:{alphabetically:0,newest_first:1},catalogMetaDataReleaseDateHidden:function(e,t,n){return 2<=e+t+n},portal_learning_credits_settings:{max_number_of_characters_name:100,max_number_of_characters_abbr:12},image_upload_settings:{file_size_mb:10,file_size_5_mb:5,file_types:[".jpg",".jpeg",".pjpeg",".png",".xpng"]},openUrl:function(e){angular.isUndefined(e)||(f.location=e)},translateAssociationMembershipType:function(e,t){var n="";return!angular.isArray(e)||angular.isUndefined(t)?"":(angular.forEach(e,function(e){e[1]==t&&(n=e[0])}),n)},uiDateFormats:{dashboard:"DD MMM YYYY",messages:"YYYY/MM/DD @ h:mm A",staff_access:"DD MMM YYYY @ h:mm A"},currentTimestamp:function(){return(new Date).getTime()},client_memberships_decisions:z,clientMembershipsDecisionsList:function(){var e=[];return e.push([z.do_not_update_memberships,I("lup.users.do_not_update_client_portal_memberships")]),e.push([z.update_memberships,I("lup.users.update_client_portal_memberships")]),e.push([z.delete_memberships,I("lup.users.delete_client_portal_memberships")]),e},delete_group_enrollment_options:{delete_enrollments:0,leave_enrollments:1},component_element_statuses:{viewable:"viewable",failed:"failed",pending:"pending",finished:"finished"},translateManagerPermissions:function(e){return"create_users"==e?permission_labels="lup.lu_dashboard.widgets.quick_actions.create_list_title":"delete_users"==e?permission_labels="lup.messages.delete":"approve_enrollments"==e?permission_labels="lup.groups.manager_permissions.approve_enrollments":"mark_complete"==e?permission_labels="lup.groups.manager_permissions.mark_complete":"enroll"==e?permission_labels="lup.catalog.enroll":"unenroll"==e?permission_labels="lup.groups.manager_permissions.unenroll":"move_groups"==e&&(permission_labels="lup.groups.manager_permissions.move_groups"),angular.isDefined(permission_labels)?I18n.t(permission_labels):""},truncateMessage:function(e,t){return n("truncate")(e,t,"...",!0)},formatNumberPurchased:function(e){return e||I("licensez.unlimited")},calculateAvailableLicenses:function(e,t){return angular.isNumber(e)&&angular.isNumber(t)?t<e?e-t:0:"-"},getIconClass:function(e){return e.component_element_type_id==w.document?"fa-file-o":e.component_element_type_id==w.video?"fa-film":e.component_element_type_id!=w.text&&e.component_element_type_id==w.audio?"fa-volume-up":"fa-newspaper-o"},charLeft:function(e,t){return t&&t.length&&0<t.length?e-t.length:e},tosStatuses:{draft:0,published:5,archived:10,disabled:15},ppStatuses:{draft:0,published:5,archived:10,disabled:15},tosPublishedPrompt:P,translatePresentTo:function(e){return I(e===P.everyone?"lup.gamification.all_users":"lup.terms_of_service.published_prompt_exc_admins")},updateMethods:{update:1,use_existing:2,override:3},ppUpdateMethods:{update:1,use_existing:2,override:3},inputFields:{max_title_lenght:255,group_title_length:80,min_search_length:3},userIsLocked:function(e){return e===x.delete_requested},tos_status_codes:x,tosValidationValues:{title_length:64,reference_length:16},ppValidationValues:{title_length:64,reference_length:16},urlParam:function(e){return null==(e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href))?null:decodeURI(e[1])||0},contains:function(e,t){return("string"==typeof e||"object"==typeof e)&&-1!=e.indexOf(t)},forums:c,emailBanners:{imageSize:"0.5MB",imageTypes:".jpg,.jpeg,.png"},autoAssignRules:{filterType:{autoAssignRules:0,salesForceRules:1}},salesForceAssignRules:{objectTypes:{user:1,contact:2},objectAttributeTypes:{roles:1,standardAndCustomFields:2}},topicStatusTranslation:function(e){switch(e){case c.topics.status_code.archived:return I("course_status.archived");case c.topics.status_code.draft:return I("course_status.draft");default:return I("course_status.published")}},forumPostStatusTranslation:function(e){switch(e){case c.posts.status_code.deleted:return I("course_status.deleted");case c.posts.status_code.pending_review:return I("course_assignments.pending_review");case c.posts.status_code.published:return I("course_status.published");case c.posts.status_code.archived:return I("course_status.archived");default:return I("course_status.draft")}},showDisplayName:function(e){if(e){e=e.trim();if(e)return e}return I("lup.users.na")},supportEmail:"support@learnupon.com",numberInRange:function(e,t,n){return null!==e&&!angular.isUndefined(e)&&(null!==t&&!angular.isUndefined(t)&&(null!==n&&!angular.isUndefined(n)&&(e=parseInt(e),!window.isNaN(e)&&(t<=e&&e<=n))))},whitelisted_mime_types:function(){return".mp3,.wav,.mp4,.qt,.wmv,.doc,.docx,.dot,.dotx,.pdf,.msword,.rtf,.xlsx,.xls,.xlt,.xltx,.odf,.gif,.jpeg,.jpg,.png,.tiff,.pptx,.ppt,.pot,.potx,.7z,.rar,.zip,.zipx,.txt,.tar,.odp,.ods,.odt,.gz,.wma,.pub,.vsd,.mpeg,.avi,.mov,.csv,.m4a,.pages,.numbers,.key"},resource_and_assigmend_max_file_size:function(){return"500MB"},catalogLpShowFilters:s,catalogShowFilters:l,showAvailableCredits:function(e,t){return!!(e&&t&&0<t.length&&(e.status_id<p.completed||e.has_attempts_remaining))},showEarnedCredits:function(e,t){return!!(e&&t&&e.status_id>=p.completed&&0<t.length)},courseReversioning:{not_started_logic:{unenroll:1,leave_on_course:2},in_progress_logic:{unenroll:1,leave_on_course:2},lp_logic:{replace_on_path:1,leave_on_path:2}},maxLengthCourseFields:{customEnroll:1e3,customReminder:1e3,customCompletion:1e3},sidekiqStatuses:{queued:"queued",working:"working",completed:"completed",interrupted:"interrupted",retrying:"retrying",failed:"failed"},session:{duration:12},returnPreviousPage:function(e){var t;try{t=parseInt(e)}catch(e){t=1}return 1<t?t-1:1},letsEncrypt:{domainValidationStatuses:{valid:1,invalid:2,pending:3,canceled:4}},certificateTemplateVersion:{first:1,latest:2},webhookTypes:L,validations:{length:{custom_user_data:{field_value:255},image_upload_alt_tag:255}},isArray:function(e){return Array.isArray(e)},rubyDateFormatToJS:function(e){switch(e){case"%m/%d/%Y":return"MM/DD/YYYY";case"%d/%m/%Y":return"DD/MM/YYYY";case"%Y/%m/%d":return"YYYY/MM/DD";default:return"MM/DD/YYYY"}},portalCatalog:{redirect_options:{dashboard:0,description:1,catalog:2,start_immediately:3},lp_redirect_options:{dashboard:0,description:1,catalog:2}},examViewModes:{exam_start:"exam_start",exam_in_progress:"exam_in_progress",exam_results:"exam_results"},videoCaptionStatuses:{empty:0,processing:1,uploaded:2},courseRecommenderFeedbackTypes:{positive_feedback:1},courseRecommenderFeedbackSources:{catalog:1},webinar_join_time_restriction:{ms_teams:{start_time_allowance:15,end_time_allowance:15}},certificateEditorVariableTypes:{course_and_user_data:1,learning_credit:2,custom_user_data:3},certificateEditorVariableValues:{course_and_user_data:{first_name:1,last_name:2,first_name_and_last_name:3,course_title:5,completion_date:6,score_achieved:7,unique_id:1001,course_code:1002,cert_expiry_date:1003,course_length:1004}},webinarJoinStatuses:{in_progress:0,too_early:1,too_late:2},getImageAltTag:function(e,t,n){for(var o=0;o<e.length;o++)if(e[o].alt_tag&&e[o].id===t)return e[o].alt_tag;return n+" "+this.showMessage("lup.component_elements.thumbnail_image")},checkIfEventIsKeyboardClick:function(e){return 0===e.originalEvent.detail&&!document.documentMode||1===e.buttons},dynamicRuleStatuses:{disabled:0,preview:1,enabled:5},trainingEnvironment:{virtual:0,in_person:1,custom_virtual:2},trainingFormatType:{single:0,multi_part_session:1},trainingFormatTypesLabels:k,trainingEnrollmentStatuses:B,trainingEnvironmentLabels:E,getTrainingErnollmentStatusLabel:function(e,t,n){switch(e){case B.not_registered:return t?I(n?"lup.ilts.waitlist.on_the_waitlist":"events.enrollment_statuses.not_registered"):I("events.enrollment_statuses.awaiting_registration");case B.not_started:return I("lup.live_trainings.course_module.session.tooltip.registered");case B.completed:return I("lup.reports_builder.enrollment_status_types.completed");case B.failed:return I("lup.reports_builder.enrollment_status_types.not_completed");case B.no_show:return I("lup.reports_builder.enrollment_status_types.no_show")}},getTrainingEnrollmentStatusLabelRedesign:function(e,t,n){switch(e){case B.not_registered:return t?I(n?"lup.ilts.waitlist.on_the_waitlist":"events.enrollment_statuses.not_registered"):I("events.enrollment_statuses.awaiting_registration");case B.not_started:return I("ilts.not_started");case B.completed:return I("lup.reports_builder.enrollment_status_types.completed");case B.failed:return I("lup.reports_builder.enrollment_status_types.not_completed");case B.no_show:return I("lup.reports_builder.enrollment_status_types.no_show")}},getTrainingEnrolmentStatusPilLClass:function(e,t,n){switch(e){case B.not_registered:return!t||n?"pending":"default";case B.not_started:case B.completed:return"success";case B.failed:case B.no_show:return"danger"}},getTrainingEnrolmentStatusPillClassRedesign:function(e,t,n){switch(e){case B.not_registered:return!t||n?"pending":"danger";case B.not_started:return"default";case B.completed:return"success";case B.failed:case B.no_show:return"danger"}},getTrainingEnrolmentStatusPillIconRedesign:function(e,t,n){switch(e){case B.not_registered:return t?n?"lu-calendar":"lu-alert":"lu-time";case B.not_started:return"lu-time";case B.completed:return"lu-completed";case B.failed:case B.no_show:return"lu-canceled"}},getTrainingEnrolmentStatusInfoTextClass:function(e,t,n){switch(e){case B.not_registered:return!t||n?"text-pending":"text-darker";case B.not_started:case B.completed:return"text-success";case B.failed:case B.no_show:return"text-danger"}},shouldRenderTrainingEnrollmentStatus:function(e){return(!e.enrollment_component_status_id||e.enrollment_component_status_id===p.not_started||e.enrollment_component_status_id===p.in_progress)&&(!e.training_enrollment_status_id||e.training_enrollment_status_id===B.not_registered)},getSessionsAvailableMessage:function(e){return(e=e.number_of_sessions_available)?1===e?"lup.live_trainings.course_content_view.session_available_singular":"lup.live_trainings.course_content_view.session_available_plural":"lup.live_trainings.registration.no_sessions_found"},getTrainingEnrollmentAlertLabel:function(e){switch(e){case B.completed:return{icon:"fa fa-check",title:I("lup.live_trainings.session_statuses.alert.title.completed")};case B.failed:return{icon:"fa fa-exclamation-triangle",title:I("lup.live_trainings.session_statuses.alert.title.not_completed")}}},shouldRenderSessionCancellation:function(e,t,n,o,r,a){var i=new Date,i=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());return!(new Date(e)<=new Date(i))&&(!!o&&(r===R.manual&&(!a&&(t===B.not_started&&n===B.not_started))))},showViewSessionButton:function(e,t,n,o){var r=new Date,r=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds());return!(new Date(e)<=new Date(r))&&!(t===R.automatic&&!n&&!o)},sessionRegistrationChoices:R,uiCropperConfig:{imageSize:1500,uploadTimeout:1500},checklist:{status:{draft:0,locked:5,deleted:10},path:{show:function(e){return"/checklists/:checklist_id".replace(/:checklist_id/,e)}},question:{path:{updateStatus:function(e,t){return"/checklists/:checklist_id/checklist_questions/:id/status".replace(/:checklist_id/,e).replace(/:id/,t)}},status:{active:0,deleted:1}},enrollment_component_checklist_status:{not_started:1,in_progress:2,completed:3,passed:4,failed:5,pending_review:6}},icalAttachmentOptions:{publish:0,request:1,do_not_send:2},addLocalesToMoment:function(e){var t={months:I18n.t("date.month_names").slice(1,I18n.t("date.month_names").length),weekdays:I18n.t("date.day_names"),weekdaysShort:I18n.t("date.abbr_day_names")};return e.updateLocale(i.lupLocale,t),e},getDatePlaceholder:function(e){switch(e){case"M/D/YYYY":return"mm/dd/yyyy";case"D/M/YYYY":return"dd/mm/yyyy";case"YYYY/M/D":return"yyyy/mm/dd"}},icalReminderValues:{min:0,max:10080,default:15},getByteLength:function(e){for(var t=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o<=127?t+=1:o<=2047?t+=2:o<=65535?t+=3:o<=1114111&&(t+=4)}return t},videoThumbnail:{maxFileNameLength:63},videoConstants:{file_size_limit_ui:"3.5"},getTrainingEnrollmentAlertLabelWebComponents:function(e){switch(e){case B.completed:return{icon:"checkmark",title:I("lup.live_trainings.session_statuses.alert.title.completed")};case B.failed:return{icon:"warning",title:I("lup.live_trainings.session_statuses.alert.title.not_completed")}}},getTrainingEnrolmentStatusPillIconWebComponents:function(e,t,n){switch(e){case B.not_registered:return t?n?"calendar":"alert":"time";case B.not_started:return"time";case B.completed:return"completed";case B.failed:case B.no_show:return"canceled"}},sessionType:{SINGLE:0,SERIES:1}}}]),window.angular.module("lu").factory("LupJobFactory",["$log","learnUponApi","$modal","LupHelper","$timeout",function(e,t,n,o,a){function i(){this.objectName="download_jobs",this.data=null,this.job=null}var s=new t,l=o;i.prototype.create=function(e){var t=this,n={hideSpinner:!0};return n.data=e,s.create(t.objectName,n).then(function(){t.data=s.data})},i.prototype.initiateJob=function(e){n.open({templateUrl:"/tc/shared/lup_job.html",controller:"LupJobController",backdrop:"static",size:"lg",resolve:{opts:function(){return e}}})},i.prototype.startJob=function(e){n.open({templateUrl:"/tc/shared/lup_job_redesign.html",controller:"LupJobController",windowClass:"modal-box-redesign modal-box modal-box--lg",backdrop:!1,size:"lg",resolve:{opts:function(){return e}}})},i.prototype.initiateTinCanTrackingJob=function(t){var n=new i;n.create(t).then(function(){var e=n.data.job.job_reference;r(e,t)})},i.prototype.pingForProgress=function(t,n,o){var r=this,e={hideSpinner:!0};return e.url="/enrollments/get_job_status/:job_number.json".replace(/:job_number/,t),s.get("jobs",e,t).then(function(e){r.job=e.data.job.attributes,r.job.status_id!==l.lupJobStatuses.completed?(n(r.job.percentage_complete),r.timeoutPromise=a(function(){i.prototype.pingForProgress(t,n,o)},2e3)):o(r.job)})};i.prototype.pingForProgressWithAutoDownload=function(e,o){var t={};t.url="/download_jobs/"+e+"/status.json",s.get("download_jobs",t,e).then(function(e){var t,n=e.data.job;n.status_id!==l.lupJobStatuses.completed?a(function(){i.prototype.pingForProgressWithAutoDownload(n.job_reference,o)},2e3):(t=n,(e=document.createElement("a")).setAttribute("href",t.s3_url),e.setAttribute("download",t.s3_url),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),o(n))})};var r=function(e,t){var n={};return n.url="/download_jobs/"+e+"/status.json?type="+o.lupJobTypes.trackTinCanProgression+"&tracking_id="+t.tracking_id,n.hideSpinner=!0,s.get("download_jobs",n,e).then(function(){s.data.job.status_id!==o.lupJobStatuses.completed?a(function(){r(e,t)},2e3):"function"==typeof window.reloadCourseData&&window.reloadCourseData()})};return i}]),function(){"use strict";function e(e,c,t,s,n,l,o,r){var u=new n;return{prepareParams:function(n,o,r){return o?(Object.keys(n).forEach(function(e){var t=n[e];r&&s.contains(r,e)||0!==t&&!t||(Array.isArray(t)?o[e+"[]"]=t:o[e]=t)}),o):void 0},compareItemsById:function(e,t){return!!(angular.isDefined(e)&&angular.isDefined(e.id)&&angular.isDefined(t)&&angular.isDefined(t.id))&&e.id==t.id},tabIndex:function(e){return e?0:-1},customSelectFn:function(e){return angular.isDefined(e)?e.id:nil},pingForProgress:function t(n,o,r,a,i){var e={hideSpinner:!0,params:{}};i&&(e.params.skip_validation=i);if(n)return e.url="/download_jobs/"+n+"/status.json",u.get("download_jobs",e,n).then(function(){var e=u.data.job;e&&e.status_id!==s.lupJobStatuses.completed?l(function(){t(n,o,r,a,i)},4500):o&&!r||(r=!1,n=null,a&&angular.isFunction(a)&&a())})},trimAndReplaceMultipleSpacesWithSingle:function(e){return e.trim().replace(/ +/g," ")},redirectBack:function(e){var t=e,n=document.referrer,e=window.location.href;n&&n!=e&&(t=n);return t},populateDisplayNames:function(e){return e?(_.each(e,function(e){e.display_name&&0!==e.display_name.trim().length||(o.usernames_enabled?e.display_name=e.username?e.username:s.showMessage("lup.users.na"):e.display_name=e.email?e.email:s.showMessage("lup.users.na"))}),e):[]},resetInterval:function(e){angular.isDefined(e)&&(r.cancel(e),e=void 0)},deepExtend:function e(t,n){if(angular.isUndefined(n))return t;for(var o in n)n.hasOwnProperty(o)&&(t[o]&&"object"==typeof n[o]?e(t[o],n[o]):t[o]=n[o]);return t},getSFDefinitions:function(t,n,o,r,a,e,i){var s=c.defer(),l=_.find(angular.copy(t),function(e){return e.objectType===n&&e.objectAttributeType===o});l?(l=r&&0<r.length?_.filter(l.data,function(e){return(!a||a.indexOf(e.id)<0)&&(0<=e.name.toLowerCase().indexOf(r.toLowerCase())||0<=e.label.toLowerCase().indexOf(r.toLowerCase())||e.id===r)}):l.data,s.resolve(l)):e.getDefinitions({sf_attribute_type:o,sf_object_type:n,hide_spinner:i}).then(function(e){t.push({objectType:n,objectAttributeType:o,data:angular.copy(e.data.sf_definitions.data)}),s.resolve(e.data.sf_definitions.data)});return s.promise}}}angular.module("lu").factory("LupService",e),e.$inject=["$http","$q","$log","LupHelper","learnUponApi","$timeout","$rootScope","$interval"]}(),window.angular.module("lu").factory("LupUtil",["$window","$rootScope",function(){return{optionObject:function(e,t){return{value:e,label:t}}}}]),function(){"use strict";function e(i,r,n){return{importantArchiveSender:function(e,t){{if(o(e,t))return t.display_name?'<em class="user-display-name"> '+r.showMessage("messages.sent_by")+':</em><span class="msg-person-info">'+t.display_name+""+(t.group_title?" ("+t.group_title+")":"")+"</span>":'<em class="user-display-name">'+r.showMessage("messages.sent_by")+':</em><span class="msg-person-info">'+(t.username?t.username:t.email+""+(t.group_title?" ("+t.group_title+")":""))+"</span>";if(a(e,t))return'<em class="user-display-name">'+r.showMessage("messages.sent_to")+':</em><span class="msg-person-info">'+s(0,t)+"</span>"}},isCurrentUserRecipient:o,isCurrentUserSender:a,sentRecipient:s,doMessageImportant:function(t,e,n,o,r){var a={};a.data={messages_for_important:e?[e]:t.selection,important:n?1:0},(t.selection||e)&&i.doMultiImportant(a).then(function(){e||angular.forEach(t.messages.data,function(e){_.contains(t.selection,e.id)&&("inbox"==t.location?e.recipient_important=!!a.data.important:"sent"==t.location&&(e.sender_important=!!a.data.important))}),r&&r(),o&&!r&&o()})},userNameForMessages:function(e,t){var n=t.email?t.email:t.username,o="--";o=t.first_name||t.last_name?[t.first_name,t.last_name,"["+n+"]"].join(" "):n;return t.sender_pm_id==e.portalMembershipId?r.showMessage("messages.you"):o},openMessage:function(e,t){e&&(n.location="drafts"==t?"/messages/drafts/"+e+"/compose":"archive"==t?"/messages/archive/"+e:"important"==t?"/messages/important/"+e:"sent"==t?"/messages/sent/"+e:"/messages/inbox/"+e)}};function o(e,t){return t.recipient_pm_id==e.portalMembershipId}function a(e,t){return t.sender_pm_id==e.portalMembershipId}function s(e,t){return t&&1==t.bulk_send?t.course_id?t.first_name:t.email:t.display_name?t.display_name:t.username?t.username:t.email}}angular.module("lu").factory("messagesHelper",e),e.$inject=["learnUponMessage","LupHelper","$window"]}(),function(){"use strict";function e(e){var n=new e;return{objectName:"messages",data:null,meta:null,getList:function(e){void 0===(e=e||{}).hideSpinner&&(e.hideSpinner=!0);var t=this;return n.getList(t.objectName,e).then(function(){t.meta=n.data.messages.meta,t.data=n.data})},doMultiDelete:function(e){(e=e||{}).hideSpinner=!0,e.url="/messages/multi-delete.json";var t=this;return n.put(null,e,null).then(function(){t.data=n.data})},doMultiArchive:function(e){(e=e||{}).hideSpinner=!0,e.url="/messages/multi-archive.json";var t=this;return n.put(null,e,null).then(function(){t.data=n.data})},doMultiImportant:function(e){(e=e||{}).hideSpinner=!0,e.url="/messages/multi-important.json";var t=this;return n.put(null,e,null).then(function(){t.data=n.data})},doMultiRead:function(e){(e=e||{}).hideSpinner=!0,e.url="/messages/multi-read.json";var t=this;return n.put(null,e,null).then(function(){t.data=n.data})},doMessageReply:function(e){(e=e||{}).url="/messages/reply";var t=this;return n.create(null,e).then(function(){t.data=n.data})},doSendMessageToAuthor:function(e){(e=e||{}).hideSpinner=!0,e.url="/messages/to-author",e.data=e.data||{},e.data.disable_redirect=!0;var t=this;return n.create(null,e).then(function(){t.data=n.data})},doNewMessage:function(e){(e=e||{}).url="/messages/new-message";var t=this;return n.create(null,e).then(function(){t.data=n.data})}}}angular.module("lu").factory("learnUponMessage",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(o){var e={onError:function(e){{e.error&&!Array.isArray(e.error)&&(r=!0,e=n(e.error),o.error(e.details,e.title,e.config))}},onSuccess:function(e){{e.success&&(e=n(e.success),o.success(e.details,e.title,e.config))}},onFlash:function(e){var t="";e.error&&(r=!0,t=n(e.error),o.error(t.details,t.title,t.config));e.notice&&(r=!1,t=n(e.notice),o.info(t.details,t.title,t.config));e.info&&(r=!1,t=n(e.info),o.info(t.details,t.title,t.config));e.warning&&(r=!0,t=n(e.warning),o.warning(t.details,t.title,t.config));e.success&&(r=!1,e.success.awarded_badges?(o.clear(),_.each(e.success.awarded_badges,function(e){t=a(e.badgeImage,e.badgeDetails),o.success(t.details,t.title,t.config)})):(t=n(e.success),o.success(t.details,t.title,t.config)))},onBadgeAwarded:function(e){{var t;e&&(o.clear(),t="",_.each(e,function(e){t=a(e.badgeImage,e.badgeDetails),o.success(t.details,t.title,t.config)}))}}},r=!1;return e;function n(e){o.clear();var t=8e3;r&&(t=1e8);var n={title:"",details:"",config:{timeOut:t,closeButton:!0,closeHtml:'<button><i class="fa fa-close"></i></button>',tapToDismiss:!0}};return"string"==typeof e&&(n.title=e,n.config.allowHtml=!0),"object"==typeof e&&(n.title=e.title,n.config.allowHtml=!0,_.extendOwn(n.config,e.config),_.each(e.details,function(e){n.details=n.details+e+"</br>"})),n}function a(e,t){return{title:"",details:function(e,t){var n="";e&&t&&(n="<div class='media'><div class='media-left'><div class='badge-placeholder sm'><img class='img-responsive' src='"+e+"'></div></div><div class='media-body media-middle' ng-non-bindable>"+t+"</div></div>");return n}(e,t),config:{timeOut:5e3,closeButton:!1,closeHtml:'<button><i class="fa fa-close"></i></button>',allowHtml:!0,iconClass:"toast-badge"}}}}window.angular.module("lu").factory("notifyFactory",e),e.$inject=["toastr"]}(),function(){"use strict";function e(e,t,s,o,n,r,l){function c(e){this.id=e.id,0}var a=new e;return c.validEmbedVideoUrl=function(t,e){if(e&&!t)return!0;return _.some(["youtube.com","youtu.be","youtube-nocookie.com","vimeo.com","player.vimeo.com/video"],function(e){return new RegExp("^https?://(www.)?"+e+"/").test(t)})},c.updateDashboardBanner=function(e,t){var n=s.defer();return o.put("/settings/dashboard-banners.json",{banner_form:e,slides_form:t}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},c.updateCatalogBanner=function(e,t){var n=s.defer();return o.put("/settings/catalog/banners.json",{banner_form:e,slides_form:t}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},c.updateSlide=function(e,t){var n=s.defer(),e="/settings/update_portal_banner_slide/:id.json".replace(/:id/,e);return o.put(e,{portal_banner_slide_form:t}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},c.uploadSlideImage=function(){var e={url:"/settings/upload_portal_banner_slide_image.json",hideSpinner:!0,data:{banner_image:{uuid:c.uuid,image_file_name:c.image_file_name,output_url:c.output_url,banner_slide_id:c.banner_slide_id,portal_id:c.portal_id,slide_type:c.slide_type,image_type:c.image_type,alt_tag:c.alt_tag}}};return a.put(c.objectName,e).then(function(){c.data=a.data})},c.mapNameByPortalBannerType=function(e){switch(e){case t.portalBannerSlideTypes.multimedia_slide:return I18n.t("lup.settings.promo_banners_settings.multimedia_banner");case t.portalBannerSlideTypes.image_slide:return I18n.t("lup.settings.promo_banners_settings.image_banner");case t.portalBannerSlideTypes.content_slide:return I18n.t("lup.settings.promo_banners_settings.centered_content")}},c.promptToEnableSlideType=function(o,r,a){var e,t,i=s.defer();return o.enabled_slide_type!==r&&(e=I18n.t("lup.settings.promo_banners.activate_this_banner_type_prompt_title"),t=I18n.t("lup.settings.promo_banners.activate_this_banner_type_prompt_body",{slide_type:c.mapNameByPortalBannerType(r),banner_enabled_type:c.mapNameByPortalBannerType(o.enabled_slide_type)}),l.confirm(e,t).then(function(e){var t={enabled_slide_type:r},n=[{id:a,type:r,enabled:!0}];"DashboardBanner"===o.type_of?c.updateDashboardBanner(t,n).then(function(e){i.resolve(e)}):"CatalogBanner"===o.type_of&&c.updateCatalogBanner(t,n).then(function(e){i.resolve(e)})})),i.promise},c}angular.module("lu").factory("PortalBannerFactory",e),e.$inject=["learnUponApi","LupHelper","$q","$http","Upload","spinnerService","$luPopover"]}(),function(){"use strict";function e(t){return{getAll:function(e){return t({method:"GET",url:"/my-portals.json",params:e=e||{}})}}}angular.module("lu").factory("portalJumperFactory",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){var a=new e,e=function(){this.data=null,this.meta=null};return e.prototype.getCoupons=function(e){return e.url="/settings/ecommerce/coupons.json",a.get(this.objectName,e,null).then(function(e){return e})},e.prototype.saveMemberType=function(e,t){var n=this,t={data:{id:e,label:t},url:"/settings/update_member_type.json"};return a.put(null,t,null).then(function(){n.data=a.data})},e.prototype.destroyMemberType=function(e){var t=this,e={url:"/settings/remove_member_type/"+e+".json"};return a.destroy(null,e,null).then(function(){t.data=a.data})},e.prototype.destroyApprover=function(e){var t=this,e={url:"/settings/remove_approver/"+e+".json"};return a.destroy(null,e,null).then(function(){t.data=a.data})},e.prototype.updateSettings=function(e,t){var n=this,e={url:"/settings/"+t+".json",data:e};return a.put(null,e,null).then(function(){n.data=a.data})},e.prototype.generateAPIKeys=function(e){var t=this,e={url:"/settings/generate_new_keys.json",data:e};return a.post(null,e,null).then(function(){return t.data=a.data,t.data})},e.prototype.connectShopify=function(e){var t=this,e={url:"/shopify/initialize.json",data:e};return a.post(null,e,null).then(function(){t.data=a.data})},e.prototype.uploadImage=function(e){var t=this;switch(e){case"mobile_logo":var n={url:"/mobile_brandings/"+t.mobile_branding_id+".json",hideSpinner:!0,data:{mobile_branding:{uuid:t.uuid,image_file_name:t.image_file_name,output_url:t.output_url,mobile_branding_id:t.mobile_branding_id,portal_id:t.portal_id,alt_tag:t.alt_tag}}};return a.put(t.objectName,n).then(function(){t.data=a.data});case"squared_logo":n={url:"/settings/branding.json",hideSpinner:!0,data:{portal_image:{logo_squared:{uuid:t.uuid,image_file_name:t.image_file_name,output_url:t.output_url,portal_id:t.portal_id,alt_tag:t.alt_tag}}}};return a.post(t.objectName,n).then(function(){t.data=a.data});case"header_logo":var o={url:"/settings/branding.json",hideSpinner:!0,data:{portal_image:{logo:{uuid:t.uuid,image_file_name:t.image_file_name,output_url:t.output_url,portal_id:t.portal_id,alt_tag:t.alt_tag}}}};return a.post(t.objectName,o).then(function(){t.data=a.data});case"store_logo":o={url:"/settings/ecommerce/branding.json",hideSpinner:!0,data:{portal_image:{store_logo:{uuid:t.uuid,image_file_name:t.image_file_name,output_url:t.output_url,portal_id:t.portal_id,alt_tag:t.alt_tag}}}};return a.post(t.objectName,o).then(function(){t.data=a.data});case"store_logo_squared":var r={url:"/settings/ecommerce/branding.json",hideSpinner:!0,data:{portal_image:{store_logo_squared:{uuid:t.uuid,image_file_name:t.image_file_name,output_url:t.output_url,portal_id:t.portal_id,alt_tag:t.alt_tag}}}};return a.post(t.objectName,r).then(function(){t.data=a.data});case"store_hero_image":r={url:"/settings/ecommerce/branding.json",hideSpinner:!0,data:{portal_image:{store_hero_image:{uuid:t.uuid,image_file_name:t.image_file_name,output_url:t.output_url,portal_id:t.portal_id,alt_tag:t.alt_tag}}}};return a.post(t.objectName,r).then(function(){t.data=a.data})}},e}window.angular.module("lu").factory("PortalSettingFactory",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(e,t,n,r,o,a){var i=new e,e=function(){this.objectName="privacy_policies",this.data=null,this.meta=null};return e.prototype.deletePrivacyPolicy=function(e){var t=this,n={url:"/settings/users/privacy_policies/"+e+".json",hideSpinner:!0},o=r.defer();return i.destroy(t.objectName,n,e).then(function(){t.data=i.data,t.data.error?o.reject("Failed to delete Privacy Policy draft"):o.resolve(t.data)}),o.promise},e.prototype.archivePrivacyPolicy=function(e){var t=this,n={url:"/settings/users/privacy_policies/"+e+"/archive.json",hideSpinner:!0},o=r.defer();return i.put(t.objectName,n,e).then(function(){t.data=i.data,t.data.error?o.reject("Failed to archive Privacy Policy"):o.resolve(t.data)}),o.promise},e.prototype.savePrivacyPolicy=function(e){var e={url:"/settings/users/privacy_policies/save.json",data:e,hideSpinner:!0},t=r.defer();return i.post(null,e,null).then(function(){t.resolve(i.data)}),t.promise},e.prototype.publishPrivacyPolicy=function(e){var e={url:"/settings/users/privacy_policies/publish.json",data:e,hideSpinner:!0},t=r.defer();return i.post(null,e,null).then(function(){t.resolve(i.data)}),t.promise},e.prototype.updatePrivacyPolicy=function(t){t.draft||t.published?o.open({templateUrl:"/tc/privacy_policies/update_method_modal.html",controller:"PrivacyPoliciesUpdateMethod as vm",size:"md",resolve:{draftPresent:function(){return!!t.draft}}}).result.then(function(e){e===n.ppUpdateMethods.update||e===n.ppUpdateMethods.override?a.location="/settings/users/privacy_policies/new":e===n.ppUpdateMethods.use_existing&&(a.location="/settings/users/privacy_policies/"+t.draft.id+"/edit")}):a.location="/settings/users/privacy_policies/new"},e.prototype.togglePrivacyPolicy=function(e){var t=this,e={url:"/settings/users/privacy_policies/toggle_pp.json",data:e},n=r.defer();return i.put(t.objectName,e,null).then(function(){t.data=i.data,t.data.error?n.reject("Failed to toggle Privacy Policy"):n.resolve(t.data)}),n.promise},e.prototype.getArchived=function(){var e={url:"/settings/users/privacy_policies/archived.json"};return i.get(self.objectName,e).then(function(e){return e})},e.prototype.clonePrivacyPolicy=function(e){var t=this,e={url:"/settings/users/privacy_policies/"+e.pp_id+"/clone.json",data:e,hideSpinner:!0},n=r.defer();return i.put(t.objectName,e,null).then(function(){t.data=i.data,t.data.error?n.reject("Failed to clone Privacy Policy"):n.resolve(t.data)}),n.promise},e}window.angular.module("lu").factory("PrivacyPoliciesFactory",e),e.$inject=["learnUponApi","$luPopover","LupHelper","$q","$modal","$window"]}(),window.angular.module("lu").factory("QuestionFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="questions",this.data=null,this.meta=null};return t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),window.angular.module("lu").factory("QuestionPoolFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="question_pools",this.data=null,this.meta=null};return t.prototype.getList=function(e){var t=this;return r.getList(t.objectName,e).then(function(){t.meta=r.data.question_pools.meta,t.data=r.data})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),window.angular.module("lu").factory("QuestionPoolQuestionFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="question_pool_questions",this.data=null,this.meta=null};return t.prototype.saveReorder=function(e,t){var n=this,e={url:"/question_pools/"+t+"/reorder.json",data:e};return r.put(null,e,null).then(function(){n.data=r.data})},t}]),function(ng){ng.module("lu").factory("ReportFactory",["$log","learnUponApi","LupHelper","$luPopover","$http","$q","notifyFactory",function($log,learnUponApi,LupHelper,$luPopover,$http,$q,notifyFactory){var api=new learnUponApi,ReportFactory=function(){this.data=null,this.meta=null};function getxsrfMetaToken(){var e=$("meta[name='csrf-token']"),t="";return e&&0<e.length&&(t=e.attr("content")),t}return ReportFactory.prototype.saveExpiryDate=function(e,t,n){var o=this,n={url:"/enrollments/set_multiple_expiry.json",data:{enrollment:{expires_at:e},course_id:t,enrollments_list:n}};return api.post(null,n,null).then(function(){o.data=api.data})},ReportFactory.prototype.saveDueDate=function(e,t,n){var o=this,n={url:"/enrollments/set_multiple_duedate.json",data:{enrollment:{due_date:e},course_id:t,enrollments_list:n}};return api.post(null,n,null).then(function(){o.data=api.data})},ReportFactory.prototype.sendMessageToUsers=function(e,t,n){var o=this,n={url:"/messages/send_multiple_recipients_message.json",data:{recipient_list:e,subject:t,body:n}};return api.post(null,n,null).then(function(){o.data=api.data})},ReportFactory.prototype.executeAjaxGetRequest=function(url,myData,targetDiv){var xsrfMeta=getxsrfMetaToken(),req={method:"GET",headers:{"X-CSRF-Token":xsrfMeta,"X-Requested-With":"XMLHttpRequest","x-xsrf-token":xsrfMeta},url:url};myData&&(req.params=myData);var def=$q.defer();return $http(req).then(function(res){res.data&&(eval(res.data),targetDiv&&showTargetDiv(targetDiv)),def.resolve(res)}).catch(function(e){def.reject(e)}),def.promise},ReportFactory.prototype.executeAjaxComboboxGetRequest=function(e,t){var n=getxsrfMetaToken(),e={method:"GET",headers:{"X-CSRF-Token":n,"X-Requested-With":"XMLHttpRequest","x-xsrf-token":n},url:e},o=$q.defer();return t&&(e.params=t),$http(e).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},ReportFactory.prototype.executeAjaxPostRequest=function(e,t){$http({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t}).then(function(e){e.data&&(e.data.job_code?getDownloadStatus(e.data.job_code):notifyFactory.onError({error:e.data.message}))})},ReportFactory}])}(window.angular),window.angular.module("lu").factory("ReportScheduleFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.objectName="report_schedules",this.data=null,this.meta=null};return t.prototype.getList=function(e){var t=this;return r.getList(t.objectName,e).then(function(){t.meta=r.data.report_schedules.meta,t.data=r.data})},t.prototype.destroy=function(){var e=this;return r.destroy(e.objectName,{},e.id).then(function(){e.id=null})},t}]),function(){"use strict";function e(o,r,a,i){return{fetchGroups:function(e){var t=r.defer(),n="";try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){a.debug("fetchGroupsApi: Unable to convert selected groups to string!"),n=""}return o.get("/groups.json",{params:{search:e.$query,page:e.$page,except:n,manager_user_id:e.manager_user_id}}).success(function(e){e=e.groups.data,e=angular.isUndefined(e)?[]:_.map(e,function(e){var t;return e.firstLineDisplay=angular.isDefined(e.title)?e.title:"",e.secondLineDisplay=angular.isDefined(e.member_count)?(t=e.member_count)?[String(t),i.showMessage(1===t?"user.one":"user.other")].join(" "):"":"",e});t.resolve(e)}).error(function(){t.reject("Failed to get groups")}),t.promise}}}angular.module("lu").factory("restrictByGroupService",e),e.$inject=["$http","$q","$log","LupHelper"]}(),window.angular.module("lu").factory("ReviewFactory",["$log","learnUponApi","LupHelper",function(e,t,n){var o=new t,t=function(){this.objectName="reviews",this.data=null};return t.prototype.checkScormTinCanShowRequired=function(e){var t=this,n={};return n.params={enrollment_id:e},n.url="/reviews/"+e+"/checkstatus.json",o.get(t.objectName,n).then(function(){t.data=o.data})},t.prototype.save=function(e){var t=this,n={};return n.data={review:e},o.create(t.objectName,n).then(function(){t.data=o.data})},t}]),function(){"use strict";function e(r,i,a,n){return{getData:function(e,t,n,o){e={method:"POST",url:"/uploads/s3-upload-for/"+e+".json",data:{}};return r(a.deepExtend(e,o)).then(function(e){return t?void t(e):e},function(e){return n?void n(e):e})},uploadFiles:function(e,t,n,o,r){var a=t.folder_path+e.name;t.file_path_and_name_override&&(a=t.file_path_and_name_override);e.upload=i.upload({url:t.upload_url,method:"POST",data:{key:a,acl:"public-read",success_action_status:"201","X-Amz-Credential":t.x_amz_credential,"X-Amz-Algorithm":t.x_amz_algorithm,"X-Amz-Date":t.x_amz_date,Policy:t.policy,"X-Amz-Signature":t.x_amz_signature,"X-Amz-Storage-Class":t.x_amz_storage_class,"Content-Type":""!==e.type?e.type:"application/octet-stream",filename:a,file:e,resource_id:t.resource_id}}),e.upload.then(function(e){n&&n(e)},function(e){o&&o(e)}),e.upload.progress(function(e){r&&(e.progress=Math.min(100,parseInt(100*e.loaded/e.total)),r(e))})},assignmentAnswerUrlAvailable:function(e){var t=n.defer();return r.post("/uploads/assignment-answer-upload-available.json",{s3Url:e}).success(function(e){t.resolve("ok"===e.status)}).error(function(){t.resolve(!1)}),t.promise},validateS3Filename:function(t){var e=null,n=[];["&","$","@","=",";","/",":","+",'"',"?","\\","{","^","}","%","`","]",">","[","~","<","#","|"].forEach(function(e){return t.includes(e)&&n.push(e)}),0<n.length&&(e=n.join(", "));return e}}}angular.module("lu").factory("s3HelperFactory",e),e.$inject=["$http","Upload","ImageUploadService","$q"]}(),function(){function e(e,o){var n,r=new e,e=function(){this.objectName="sales_force_assign_rules",this.data=null,this.meta=null,n=this};return e.prototype.getDefinitions=function(e){var e={url:"/settings/users/sales_force_assign_rules/sf_definitions.json?sf_object_type="+e.sf_object_type+"&sf_attribute_type="+e.sf_attribute_type,hideSpinner:e.hide_spinner},t=o.defer();return r.get(null,e,null).then(function(e){e.data.error?t.reject("Failed to fetch SF definitions"):t.resolve(e)}),t.promise},e.prototype.createRule=function(e){var t=this,e={url:"/settings/users/sales_force_assign_rules/create.json",data:e,hideSpinner:!0},n=o.defer();return r.post(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to create sales_force_assign_rule"):n.resolve(t.data)}),n.promise},e.prototype.deleteRule=function(e){var t=this,e={url:"/settings/users/sales_force_assign_rules/"+e+".json",hideSpinner:!0},n=o.defer();return r.destroy(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to delete sales_force_assign_rule"):n.resolve(t.data)}),n.promise},e.prototype.sync=function(e){var t=this,e={url:"/settings/users/sales_force_assign_rules/sync/"+e+".json",hideSpinner:!0},n=o.defer();return r.post(null,e,null).then(function(){t.data=r.data,t.data.error?n.reject("Failed to schedule sales_force_assign_rule sync"):n.resolve(t.data)}),n.promise},e.prototype.getRuleData=function(e){var e={url:"/settings/users/sales_force_assign_rules/"+e+".json"},t=o.defer();return r.get(n.objectName,e).then(function(e){e.data.error?t.reject("Failed to fetch sales_force_assign_rule"):t.resolve(e)}),t.promise},e.prototype.updateRule=function(e){var e={url:"/settings/users/sales_force_assign_rules/"+e.id+".json",data:{rule:e}},t=o.defer();return r.put(null,e,null).then(function(e){e.data.error?t.reject("Failed to update sales_force_assign_rule"):t.resolve(e)}),t.promise},e.prototype.runSFRules=function(e){var t=o.defer(),e={url:"/users/"+e+"/run_sf_rules.json"};return r.get(n.objectName,e).then(function(e){e.data.error?t.reject("Failed to run SF Rules"):t.resolve(e)}),t.promise},e.prototype.pingForProgress=function(e){var t=o.defer(),n={hideSpinner:!0,url:"/download_jobs/"+e+"/status.json"};return r.get("download_jobs",n,e).then(function(e){e.data.error?t.reject("Failed to run SF Rules"):t.resolve(e.data.job.status_id)}),t.promise},e}angular.module("lu").factory("SalesForceAssignRulesFactory",e),e.$inject=["learnUponApi","$q"]}(),window.angular.module("lu").factory("SamlCertFingerPrintFactory",["$log","learnUponApi","$luPopover",function(e,t,n){var o=new t,t=function(){this.objectName="saml_cert_finger_prints",this.id=null,this.data=null,this.meta=null};return t.prototype.save=function(e){var t=this,n={data:{}};return n.data.finger_print=e,o.putList(t.objectName,n).then(function(){t.meta=o.data.saml_cert_finger_prints.meta,t.data=o.data})},t.prototype.destroy=function(e){var t=this,n={params:{}};return o.destroy(t.objectName,n,e).then(function(){null!==o.data&&void 0!==o.data.saml_cert_finger_prints&&(t.meta=o.data.saml_cert_finger_prints.meta,t.data=o.data)})},t.prototype.getList=function(e){var t=this;return o.getList(t.objectName,e).then(function(){t.meta=o.data.saml_cert_finger_prints.meta,t.data=o.data})},t}]),function(){"use strict";function e(e,r){var a=new e,e=function(){this.data=null,this.meta=null};return e.prototype.uploadImage=function(e){var t=this,n={url:"/settings/integrations/saml/general.json",data:e,hideSpinner:!0},o=r.defer();return a.post(null,n,null).then(function(e){t.data=a.data,t.data.error?o.reject("Failed to upload image"):o.resolve(t.data)}),o.promise},e.prototype.deactivateHardening=function(){var e=this,t={url:"/saml/deactivate-hardening.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.activateHardening=function(){var e=this,t={url:"/saml/activate-hardening.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.deactivateWantAssertionsSigned=function(){var e=this,t={url:"/saml/deactivate-want-assertions-signed.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.activateWantAssertionsSigned=function(){var e=this,t={url:"/saml/activate-want-assertions-signed.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.deactivateSkipDestination=function(){var e=this,t={url:"/saml/deactivate-skip-destination.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.activateSkipDestination=function(){var e=this,t={url:"/saml/activate-skip-destination.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.deactivateSkipSubjectConfirmation=function(){var e=this,t={url:"/saml/deactivate-skip-subject-confirmation.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.activateSkipSubjectConfirmation=function(){var e=this,t={url:"/saml/activate-skip-subject-confirmation.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.deactivateSignAuthnRequests=function(){var e=this,t={url:"/saml/deactivate-sign-authn-requests.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e.prototype.activateSignAuthnRequests=function(){var e=this,t={url:"/saml/activate-sign-authn-requests.json"};return a.post(null,t,null).then(function(){return e.data=a.data,e.data})},e}window.angular.module("lu").factory("SamlFactory",e),e.$inject=["learnUponApi","$q"]}(),function(){"use strict";function e(e){var n=new e,e=function(){this.data=null,this.meta=null};return e.prototype.cancel=function(e){var t=this,e={url:"/ses_identities/0/cancel_address.json",data:{id:e}};return n.put(null,e,null).then(function(){t.data=n.data})},e.prototype.retry=function(){var e=this;return n.put(null,{url:"/ses_identities/0/retry_address.json"},null).then(function(){e.data=n.data})},e.prototype.create=function(e){var t=this,e={url:"/ses_identities/0/add_address.json",data:{address:e}};return n.put(null,e,null).then(function(){t.data=n.data})},e}window.angular.module("lu").factory("SesIdentityFactory",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(e,s,l,o,a,r){function i(e){this.id=e.id,this.course_id=e.course_id,this.paths={createSession:["POST","/components.json"],updateSession:["PUT","/components/:session_id.json".replace(/:session_id/,this.id)],create_roster:["POST","/components/sessions/:session_id/upload_roster.json".replace(/:session_id/,this.id)],delete_roster:["DELETE","/components/sessions/:session_id/remove_roster/:roster_id.json".replace(/:session_id/,this.id)],enroll_user:["POST","/components/sessions/:session_id/enroll_user.json".replace(/:session_id/,this.id)],mark_attended_status:["POST","/components/sessions/:session_id/mark_attended_status.json".replace(/:session_id/,this.id)],get_waitlist_enrollments:["GET","/courses/:course_id/content/:session_id/manage-waitlist.json".replace(/:course_id/,this.course_id).replace(/:session_id/,this.id)],promote_from_waitlist:["PUT","/components/sessions/:session_id/promote_from_waitlist/:waitlist_enrollment_id.json".replace(/:session_id/,this.id)],remove_from_waitlist:["PUT","/components/sessions/:session_id/remove_from_waitlist/:waitlist_enrollment_id.json".replace(/:session_id/,this.id)],update_webinar_settings:["PUT","/components/sessions/:session_id/webinar_settings.json".replace(/:session_id/,this.id)]},c=this}var c,u=new e;return i.prototype.get=function(){return this},i.prototype.createSession=function(e){e={url:c.paths.createSession[1],data:{component:e.component,webinar:e.webinar,course_id:e.course_id}};return u.post("createSession",e).then(function(e){return e}).catch(function(e){return e})},i.prototype.updateSession=function(e){e={url:c.paths.updateSession[1],data:{component:e.component,webinar:e.webinar,course_id:e.course_id}};return u.put("updateSession",e).then(function(e){return e})},i.prototype.uploadRoster=function(o,r,a,i){l.getData(s.fileUploads.types.session_roster,null,null,{data:{resource_id:c.id}}).then(function(e){var t=e.data.signature_data.attributes,e=t.folder_path+o.name,n={component_id:c.id,s3_url:e,uuid:t.guid,roster_file_name:o.name,roster_file_size:o.size,roster_content_type:o.output_url,output_url:e};l.uploadFiles(o,t,function(e){var t={hideSpinner:!0,url:c.paths.create_roster[1],data:{roster_data:n}};return u.post("create_roster",t).then(function(e){r(e)}).catch(function(e){i&&(e.type="createRoster",i(e))})},function(e){i&&(e.type="failedUpload",i(e))},function(e){a(e)})}).catch(function(e){i&&(e.type="getData",i(e))})},i.prototype.removeRoster=function(e){e={url:c.paths.delete_roster[1].replace(/:roster_id/,e)};return u.destroy("delete_roster",e).then(function(e){return e})},i.prototype.enrollUser=function(e){e={hideSpinner:!0,url:c.paths.enroll_user[1],data:{user_data:e}};return u.post("enrollUser",e).then(function(e){return e}).catch(function(e){return e})},i.prototype.setAttendance=function(e,t){var n={hideSpinner:!0,url:c.paths.mark_attended_status[1],data:{single_attendance_data:e}};return t?n.data=e:n.data.single_attendance_data=e,u.put("mark_attended_status",n).then(function(e){return e}).catch(function(e){return e})},i.prototype.getWaitlistEnrollments=function(e){e={url:c.paths.get_waitlist_enrollments[1],params:e};return u.get("get_waitlist_enrollments",e).then(function(e){return e})},i.prototype.promoteFromWaitlist=function(e){e={url:c.paths.promote_from_waitlist[1].replace(/:waitlist_enrollment_id/,e)};return u.put("promote_from_waitlist",e).then(function(e){return e})},i.prototype.removeFromWaitlist=function(e){e={url:c.paths.remove_from_waitlist[1].replace(/:waitlist_enrollment_id/,e)};return u.put("remove_from_waitlist",e).then(function(e){return e})},i.prototype.updateWebinarSettings=function(e){e={url:c.paths.update_webinar_settings[1],data:{webinar_settings_form_data:e}};return u.put("update_webinar_settings",e).then(function(e){return e})},i.prototype.cancelSession=function(t,n,o,r){a.open({templateUrl:"/tc/courses/components/sessions/cancel.html",controller:"CoursesComponentsSessionsCancelController as vm",size:"lg",resolve:{course:function(){return n},component:function(){return t}}}).result.then(function(e){e={what_to_do_if_cancelled:e,bulk_set:!1,status_id_to_set:s.enrollmentStatuses.cancelled,cancel_session:!0,course_id:n.id},e={url:"/components/sessions/:component_id/mark_attended_status.json".replace(/:component_id/,t.id),data:e};return u.put(i.objectName,e,null).then(function(e){o(e)}).catch(function(e){r(e)})})},i.prototype.getSessionCourses=function(e){e={url:"/angie/catalog/components/:component_id/courses.json".replace(/:component_id/,e)};return u.get(null,e)},i.prototype.deleteSession=function(t,n){o.confirm(I18n.t("lup.confirm"),I18n.t("courses.are_you_sure_you_want_to_remove_this_session_from_this_course")).then(function(e){return(new r).destroy(c.id,c.course_id).then(function(e){t(e)}).catch(function(e){n(e)})})},i.prototype.sendMessageToILTSessionAttendees=function(e,t,n,o){var r=this,o={url:"/messages/send_message_to_ilt_session_attendees.json",data:{course_id:e,session_id:t,subject:n,body:o}};return u.post(null,o,null).then(function(){r.data=u.data})},i.find=function(e){},i}angular.module("lu").factory("SessionFactory",e),e.$inject=["learnUponApi","LupHelper","s3HelperFactory","$luPopover","$modal","ComponentFactory"]}(),window.angular.module("lu").factory("ShopifyProductFactory",["$log","learnUponApi","LupHelper","$luPopover",function(e,t,n,o){var r=new t,t=function(){this.data=null,this.meta=null};return t.prototype.getShopifyProducts=function(e){var t=this,e={url:"/shopify/products.json?next_page="+e};return r.getList(null,e).then(function(){t.data=r.data})},t.prototype.updateCourseShopifyProductSelected=function(e,t,n){n={url:"/shopify/set_metadata.json",data:{old_shopify_product_id:e,course_setting:{course_id:t,shopify_product_id:n}}};return r.put(null,n,null).then(function(e){return e})},t.prototype.updateLearningPathShopifyProductSelected=function(e,t,n){n={url:"/shopify/set_learning_path_metadata.json",data:{old_shopify_product_id:e,learning_path:{id:t,shopify_product_id:n}}};return r.put(null,n,null).then(function(e){return e})},t.prototype.updateBundleShopifyProductSelected=function(e,t,n){n={url:"/shopify/set_bundle_metadata.json",data:{old_shopify_product_id:e,bundle:{id:t,shopify_product_id:n}}};return r.put(null,n,null).then(function(e){return e})},t}]),function(){"use strict";function e(e,n){var o=new e,e=function(){this.objectName="social-sharings",this.data=null,this.meta=null};return e.prototype.share=function(e){var t=this,e={url:"/share/"+e+".json"};return o.get(t.objectName,e,null).then(function(){t.data=o.data})},e.prototype.shareDialog=function(e){var t=this;t.share(e).then(function(){n.open({templateUrl:"/tc/social-sharings/social-sharings-dialog.html",controller:"SocialSharingsDialogController",size:"md",resolve:{data:function(){return t.data}}})})},e}window.angular.module("lu").factory("SocialSharingFactory",e),e.$inject=["learnUponApi","$modal"]}(),function(){"use strict";function e(e,r){var a=new e,e=function(){this.data=null,this.meta=null};return e.prototype.uploadImage=function(e){var t=this,n={url:"/settings/integrations/sqsso/general.json",data:e,hideSpinner:!0},o=r.defer();return a.post(null,n,null).then(function(e){t.data=a.data,t.data.error?o.reject("Failed to upload image"):o.resolve(t.data)}),o.promise},e}window.angular.module("lu").factory("SqssoFactory",e),e.$inject=["learnUponApi","$q"]}(),window.angular.module("lu").factory("StaffAccessFactory",["$log","$q","learnUponApi","$luPopover","LupHelper",function(e,r,t,n,o){var a=new t,t=function(){this.objectName="portals",this.id=null,this.data=null,this.meta=null};return t.prototype.getPortals=function(e){var t=r.defer(),n=this,e={url:"/settings/support.json",params:e.params};return a.getList(n.objectName,e).then(function(e){n.meta=e.data.meta,n.data=e.data,t.resolve(n.data)}),t.promise},t.prototype.getLogs=function(e,t){var n=r.defer(),o=this,e={url:"/settings/support/"+t+"/logs.json",params:e.params};return a.get(o.objectName,e,t).then(function(e){o.meta=e.data.meta,o.data=e.data,n.resolve(o.data)}),n.promise},t.prototype.revoke=function(e){var t=r.defer();return e.url="/settings/support/revoke.json",a.put("staff_access",e).then(function(e){t.resolve(e.data)}),t.promise},t.prototype.allow=function(e){var t=r.defer();return e.url="/settings/support/allow.json",a.post(null,e).then(function(e){t.resolve(e.data)}),t.promise},t}]),function(t){"use strict";t.module("lu").factory("StorageFactory",function(){var n=null;return{set:function(e){n=e},get:function(){return t.copy(n)},getKey:function(e){return t.copy(n[e])},setKey:function(e,t){return n[e]=t}}})}(window.angular),function(){"use strict";function e(e,t,n,r,o,a){var i=new e,e=function(){this.objectName="terms_of_services",this.data=null,this.meta=null};return e.prototype.deleteTos=function(e){var t=this,n={url:"/settings/users/terms_of_services/"+e+".json",hideSpinner:!0},o=r.defer();return i.destroy(t.objectName,n,e).then(function(){t.data=i.data,t.data.error?o.reject("Failed to delete Terms of service draft"):o.resolve(t.data)}),o.promise},e.prototype.archiveTos=function(e){var t=this,n={url:"/settings/users/terms_of_services/"+e+"/archive.json",hideSpinner:!0},o=r.defer();return i.put(t.objectName,n,e).then(function(){t.data=i.data,t.data.error?o.reject("Failed to archive Terms of service"):o.resolve(t.data)}),o.promise},e.prototype.saveTos=function(e){var e={url:"/settings/users/terms_of_services/save.json",data:e,hideSpinner:!0},t=r.defer();return i.post(null,e,null).then(function(){t.resolve(i.data)}),t.promise},e.prototype.publishTos=function(e){var e={url:"/settings/users/terms_of_services/publish.json",data:e,hideSpinner:!0},t=r.defer();return i.post(null,e,null).then(function(){t.resolve(i.data)}),t.promise},e.prototype.updateTos=function(t){t.draft||t.published?o.open({templateUrl:"/tc/terms_of_services/update_method_modal.html",controller:"TermsOfServicesUpdateMethod as vm",size:"md",resolve:{draftPresent:function(){return!!t.draft}}}).result.then(function(e){e===n.updateMethods.update||e===n.updateMethods.override?a.location="/settings/users/terms_of_services/new":e===n.updateMethods.use_existing&&(a.location="/settings/users/terms_of_services/"+t.draft.id+"/edit")}):a.location="/settings/users/terms_of_services/new"},e.prototype.toggleTos=function(e){var t=this,e={url:"/settings/users/terms_of_services/toggle_tos.json",data:e},n=r.defer();return i.put(t.objectName,e,null).then(function(){t.data=i.data,t.data.error?n.reject("Failed to toggle Terms of service"):n.resolve(t.data)}),n.promise},e.prototype.getArchived=function(){var e={url:"/settings/users/terms_of_services/archived.json"};return i.get(self.objectName,e).then(function(e){return e})},e.prototype.cloneTos=function(e){var t=this,e={url:"/settings/users/terms_of_services/"+e.tos_id+"/clone.json",data:e,hideSpinner:!0},n=r.defer();return i.put(t.objectName,e,null).then(function(){t.data=i.data,t.data.error?n.reject("Failed to clone Terms of service"):n.resolve(t.data)}),n.promise},e}window.angular.module("lu").factory("TermsOfServicesFactory",e),e.$inject=["learnUponApi","$luPopover","LupHelper","$q","$modal","$window"]}(),function(){"use strict";function e(e){var n=new e,e=function(){this.data=null,this.meta=null};return e.prototype.checkVerificationCode=function(e){var t=this,e={url:"/two-factor-authentication/verify.json",data:e};return n.post(null,e,null).then(function(){return t.data=n.data,t.data})},e.prototype.checkActivationCode=function(e){var t=this,e={url:"/two-factor-authentication/activate.json",data:e};return n.post(null,e,null).then(function(){return t.data=n.data,t.data})},e.prototype.disable=function(){var e=this,t={url:"/two-factor-authentication/disable.json"};return n.post(null,t,null).then(function(){return e.data=n.data,e.data})},e.prototype.passwordVerification=function(e){var t=this,e={url:"/two-factor-authentication/verify-password.json",data:e};return n.post(null,e,null).then(function(){return t.data=n.data,t.data})},e.prototype.disableForAnotherUser=function(e){var t=this,e={url:"/two-factor-authentication/disable_for_another_user.json",data:{user:e}};return n.post(null,e,null).then(function(){return t.data=n.data,t.data})},e.prototype.generateBackupCodes=function(){var e=this,t={url:"/two-factor-authentication/generate_backup_codes.json"};return n.post(null,t,null).then(function(){return e.data=n.data,e.data})},e}angular.module("lu").factory("TwoFactorAuthentication",e),e.$inject=["learnUponApi"]}(window.angular),function(){"use strict";function e(i,s,l){return{uploadToS3:function(n,o,r){var a=i.defer();return setTimeout(function(){var e,t;e={method:"POST",url:"/uploads/s3-upload-for/"+o+".json",data:{}},t=i.defer(),setTimeout(function(){s(e).then(function(e){t.resolve(e)},function(e){t.reject(e)})}),t.promise.then(function(t){return function(e,t,n){var o=t.folder_path+e.name;t.file_path_and_name_override&&(o=t.file_path_and_name_override);var r=i.defer();return setTimeout(function(){e.upload=l.upload({url:t.upload_url,method:"POST",data:{key:o,acl:"public-read",success_action_status:"201","X-Amz-Credential":t.x_amz_credential,"X-Amz-Algorithm":t.x_amz_algorithm,"X-Amz-Date":t.x_amz_date,Policy:t.policy,"X-Amz-Signature":t.x_amz_signature,"X-Amz-Storage-Class":t.x_amz_storage_class,"Content-Type":""!==e.type?e.type:"application/octet-stream",filename:o,file:e,resource_id:t.resource_id}}),e.upload.then(function(e){r.resolve(e)},function(e){r.reject(e)}),e.upload.progress(function(e){n&&(e.progress=Math.min(100,parseInt(100*e.loaded/e.total)),n(e))})}),r.promise}(n,t.data.signature_data.attributes,r).then(function(e){a.resolve(e)},function(e){a.reject(t)})}).then(function(e){a.resolve(e)},function(e){a.reject(e)})}),a.promise},getS3UploadLocation:function(e){e=(new DOMParser).parseFromString(e.data,"text/xml").firstChild.firstChild.textContent;return decodeURIComponent(e).replace(/[+]/g," ")}}}e.$inject=["$q","$http","Upload"],angular.module("lu").factory("UploadService",e),e.inject=["$q","$http","Upload"]}(),function(){"use strict";function e(t,p,n,_,o){return{deleteUser:function(s,e,l,c){var u=t.showMessage("lup.confirm"),d=[];e&&d.push(t.showMessage("group.warn_user_will_be_deleted_from_child_portals"));n.get("/users/"+s.id+"/no-of-tutored-courses.json",{}).then(function(e){var t,n,o,r=e.data.number_of_courses,a=e.data.number_of_client_courses,i=e.data.is_training_owner;angular.isUndefined(e.data)||angular.isUndefined(e.data.number_of_courses)?_.debug("Can't get number of tutored courses for this user"):(t=!!r,n=!!a,o=!!i,p.open({templateUrl:"/tc/users/delete_user.html",controller:"DeleteUserController",size:t||n||o?"lg":"sm",resolve:{title:function(){return u},messages:function(){return d},user:function(){return s},existAsInstructor:function(){return t},existAsClientInstructor:function(){return n},isTrainingOwner:function(){return o}}}).result.then(function(e){angular.isDefined(e.action)&&("success"===e.action?angular.isFunction(l)&&l():"error"===e.action&&angular.isFunction(c)&&c())}))})},impersonateUser:function(e){n.post("/users/impersonate.json",{id:e}).success(function(){o.location="/users/sign_in"}).error(function(){_.debug("Cannot impersonate user")})}}}angular.module("lu").service("UserActionService",e),e.$inject=["LupHelper","$modal","$http","$log","$window"]}(),function(){"use strict";function e(e){var i=new e,e=function(){this.objectName="users",this.data=null,this.meta=null};return e.prototype.getList=function(e){var t=this;return i.getList(t.objectName,e).then(function(){t.meta=i.data.users.meta,t.data=i.data})},e.prototype.getSFContactList=function(e){var t=this;return e.url="/users/import_sf_contacts.json",i.getList(t.objectName,e).then(function(){t.meta=i.data.users.meta,t.data=i.data})},e.prototype.destroy=function(e,t){var n=this;return t=t||{},i.destroy(n.objectName,t,e).then(function(){n.data=i.data})},e.prototype.getPendingUsersList=function(e){var t=this;return i.getList(t.objectName+"/pending-users",e).then(function(){t.meta=i.data.users.meta,t.data=i.data})},e.prototype.hideLatestNews=function(){var e=this,t={url:"/set_welcomemessage_hidden.json"};return i.get(e.objectName,t).then(function(){e.data=i.data})},e.prototype.showInvite=function(e){var t=this,e={url:"/"+t.objectName+"/pending-users/"+e+".json"};return i.get(t.objectName,e).then(function(){t.data=i.data})},e.prototype.cancelInvite=function(e){var t=this;return i.put(t.objectName+"/pending-users/"+e+"/cancel-invite",{},null).then(function(){t.data=i.data})},e.prototype.resendInvite=function(e){var t=this;return i.put(t.objectName+"/pending-users/"+e+"/resend-invite",{},null).then(function(){t.data=i.data})},e.prototype.cancelOtherSentInvites=function(e,t){var n=this,t={invite_ids:_.map(t,function(e){return e.invite.id})};return i.put(n.objectName+"/pending-users/"+e+"/cancel-other-sent-invites",{data:t},null).then(function(){n.data=i.data})},e.prototype.getUserEnrollments=function(e,t){var n=this,t={url:"/users/"+e+"/enrollments.json",params:t.params};return i.getList(n.objectName,t).then(function(){n.meta=i.data.items.meta,n.data=i.data})},e.prototype.setEnrollmentDueDate=function(e){var t=this,e={url:"/users/"+e.user_id+"/enrollments/"+e.id+"/set-enrollment-due-date.json",data:{calculated_due_date:e.calculated_due_date}};return i.put(null,e,null).then(function(){t.data=i.data})},e.prototype.setLearningPathDueDate=function(e){var t=this,e={url:"/users/"+e.user_id+"/enrollments/"+e.id+"/set-learning-path-due-date.json",data:{calculated_due_date:e.calculated_due_date}};return i.put(null,e,null).then(function(){t.data=i.data})},e.prototype.setEnrollmentExpiryDate=function(e,t){var n=this,t={url:"/users/"+e.user_id+"/enrollments/"+e.id+"/set-enrollment-expiry-date.json",data:{expires_at:t}};return i.put(null,t,null).then(function(){n.data=i.data})},e.prototype.updateUser=function(e,t){var n=this,t={url:"/users/"+e+".json",data:t};return i.put(null,t,null).then(function(){n.data=i.data})},e.prototype.updateUserSettings=function(e,t){var n=this,t={url:"/users/"+e+"/update-user-settings.json",data:t};return i.put(null,t,null).then(function(){n.data=i.data})},e.prototype.getRecentActivities=function(e,t){var n=this,t={url:"/users/"+e+"/recent-activities.json",params:t.params};return i.getList(n.objectName,t).then(function(){n.meta=i.data.activity_feed.meta,n.data=i.data})},e.prototype.setUserPassword=function(e){var t=this,e={url:"/users/"+e.id+"/set-password.json",data:{user:e}};return i.put(null,e,null).then(function(){t.data=i.data})},e.prototype.changeMembershipType=function(e){var t=this,e={url:"/users/pending-users/"+e.id+"/update-invite-type.json",data:{portal_membership_type_id:e.portal_membership_type_id}};return i.put(null,e,null).then(function(){t.data=i.data})},e.prototype.sendResetEmail=function(e){var t=this,e={url:"/users/"+e+"/reset-password-request.json"};return i.put(null,e,null).then(function(){t.data=i.data})},e.prototype.getCalendarEvents=function(e,t,n){var o=this,e="/users/"+e+"/training-calendar.json";n&&(e="/dashboard_training_calendar.json");t={url:e,params:t.params};return i.getList(o.objectName,t).then(function(){o.meta=i.data.calendar_events.meta,o.data=i.data})},e.prototype.createUser=function(e){var t=this,e={url:"/users/create-new-user",data:e.data};return i.create(null,e).then(function(){t.data=i.data})},e.prototype.getDetailsForSession=function(e,t,n,o){var r=this,a="/users/"+e+"/get-session-details/"+t+".json";o&&(a="/users/"+e+"/get-training-details/"+t+".json");n={url:a,params:n.params};return i.get(r.objectName,n,null).then(function(){r.data=i.data})},e.prototype.updatePortalLanguage=function(e){var t=this,e={url:"/users/update-portal-language.json",data:e.data};return i.put(null,e,null).then(function(){t.data=i.data})},e.prototype.completeProfile=function(e){var t=this,e={url:"/users/"+e.user.id+"/complete-your-profile.json",data:e};return i.put(null,e,null).then(function(){t.data=i.data})},e.prototype.updateCustomUserData=function(e,t){var n=this,e={url:"/users/"+t+"/update-custom-data.json",data:e};return i.put(null,e,null).then(function(){n.data=i.data})},e.prototype.inviteUsers=function(e){var t=this;return e={url:"/users/invite-users.json",data:e},i.post(null,e,null).then(function(){return t.data=i.data,t.data})},e.prototype.createSfUsers=function(e){var t=this,e={url:"/users/create-from-sf",data:e};return i.create(null,e).then(function(){t.data=i.data})},e.prototype.returnToAdmin=function(e){var t=this;return e={url:"/users/return_to_impersonator.json",data:e},i.post(null,e,null).then(function(){return t.data=i.data,t.data})},e.prototype.inviteSfUsers=function(e){var t=this,e={url:"/users/invite-from-sf.json",data:e};return i.post(null,e,null).then(function(){t.data=i.data})},e.prototype.syncSFUser=function(e){e={url:"/users/"+e+"/sync-sf-user.json"};return i.put(null,e,null).then(function(e){return e})},e.prototype.getLeaderboard=function(e){var t=this;return e.url="/users/leaderboard.json",i.getList(t.objectName,e).then(function(){t.meta=i.data.users.meta,t.data=i.data})},e.prototype.requestDeletion=function(e){e={url:"/users/"+e+"/request-deletion.json"};return i.put(null,e,null).then(function(e){return e})},e.prototype.revokeDeletion=function(e){e={url:"/users/"+e+"/request-revoke-deletion.json"};return i.put(null,e,null).then(function(e){return e})},e.prototype.updateGroups=function(e,t){var n=this,t={url:"/"+n.objectName+"/"+e+"/update_groups.json",data:t};return i.put(n.objectName,t).then(function(){n.data=i.data})},e.prototype.getNonAdmins=function(e){var t=this,e={url:"/users/non_admins.json",params:e,hideSpinner:!0};return i.getList(t.objectName,e).then(function(){t.meta=i.data.users.meta,t.data=i.data})},e}window.angular.module("lu").factory("UsersFactory",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(o,r,a,i){return{userStatuses:[{id:1,title:i.showMessage("lup.users.login_enabled")},{id:0,title:i.showMessage("lup.users.login_disabled")}],userTypes:[{id:1,title:i.showMessage("group_memberships.learner")},{id:2,title:i.showMessage("group_memberships.admin")},{id:3,title:i.showMessage("group_memberships.tutor")},{id:4,title:i.showMessage("group_memberships.manager")}],fetchGroups:function(e){var t=r.defer(),n="";try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){a.debug("fetchGroupsApi: Unable to convert selected groups to string!"),n=""}return o.get("/groups.json",{params:{search:e.$query,page:e.$page,except:n}}).success(function(e){e=e.groups.data,e=angular.isUndefined(e)?[]:_.map(e,function(e){var t;return e.firstLineDisplay=angular.isDefined(e.title)?e.title:"",e.secondLineDisplay=angular.isDefined(e.member_count)?(t=e.member_count)?[String(t),i.showMessage(1===t?"user.one":"user.other")].join(" "):"":"",e});t.resolve(e)}).error(function(){t.reject("Failed to get groups")}),t.promise},groupCustomSelectFn:function(e){return angular.isDefined(e)?e.id:nil}}}angular.module("lu").factory("usersFilteringOptionsService",e),e.$inject=["$http","$q","$log","LupHelper"]}(),function(){"use strict";function e(e,r){var a=new e,e=function(){this.data=null,this.meta=null};return e.prototype.procesCaption=function(e){var t=this,n={url:"/videos/"+e.id+"/process-captions.json",data:e,hideSpinner:!0},o=r.defer();return a.put(null,n,null).then(function(e){t.data=a.data,t.data.error?o.reject("Failed to process caption"):o.resolve(t.data)}),o.promise},e.prototype.removeCaption=function(e){var t=this,n={url:"/videos/"+e.id+"/remove-captions.json",data:e,hideSpinner:!0},o=r.defer();return a.destroy(null,n,null).then(function(e){t.data=a.data,t.data.error?o.reject("Failed to remove caption"):o.resolve(t.data)}),o.promise},e}window.angular.module("lu").factory("VideoFactory",e),e.$inject=["learnUponApi","$q"]}(),function(){"use strict";function e(e){var t=["xs","sm","md","lg"];function n(){return window.getComputedStyle(document.body,":before").content.replace(/"/g,"")}return{is:function(e){return n()===e},isEqualOrGreaterThan:function(e){return t.indexOf(n())>=t.indexOf(e)}}}angular.module("lu").factory("ViewPortService",e),e.$inject=["$window"]}(),window.angular.module("lu").factory("WebhookFactory",["$log","learnUponApi","$luPopover",function(e,t,n){var o=new t,t=function(){this.objectName="webhooks",this.id=null,this.data=null};return t.prototype.getList=function(e){var t=this;return o.getList(t.objectName,e).then(function(){t.data=o.data})},t}]),function(){"use strict";function e(e){var n=new e,e=function(){this.data=null,this.meta=null};return e.prototype.citrixG2MDisconnect=function(e){var t=this,e={url:"/webinar/citrix/gotomeeting/disconnect/"+e+".json"};return n.destroy(null,e,null).then(function(){t.data=n.data})},e.prototype.citrixG2TDisconnect=function(e){var t=this,e={url:"/webinar/citrix/gototraining/disconnect/"+e+".json"};return n.destroy(null,e,null).then(function(){t.data=n.data})},e.prototype.citrixG2WDisconnect=function(e){var t=this,e={url:"/webinar/citrix/gotowebinar/disconnect/"+e+".json"};return n.destroy(null,e,null).then(function(){t.data=n.data})},e.prototype.webexDisconnect=function(e){var t=this,e={url:"/webinar/cisco/webextrainingcenter/disconnect/"+e+".json"};return n.destroy(null,e,null).then(function(){t.data=n.data})},e.prototype.adobeDisconnect=function(e){var t=this,e={url:"/webinar/adobe-connect/type/disconnect/"+e+".json"};return n.destroy(null,e,null).then(function(){t.data=n.data})},e.prototype.zoomDisconnect=function(e){var t=this,e={url:"/zoom/disconnect/"+e+".json"};return n.destroy(null,e,null).then(function(){t.data=n.data})},e.prototype.msTeamsDisconnect=function(e){var t=this,e={url:"/lup/webinars/microsoft/teams_integrations/"+e+".json"};return n.destroy(null,e,null).then(function(){t.data=n.data})},e.prototype.directJoinPath=function(e){return"/lup/webinars/direct_join/"+e},e}window.angular.module("lu").factory("WebinarFactory",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(e,o){var r={updateIntervalSeconds:1e3,init:function(e,t,n){r.webinarProvider=e,r.webinarStartTimeUTC=t,r.webinarEndTimeUTC=n,r.webinarProviderKey=o.getWebinarKeyFromType(r.webinarProvider),r.webinarProviderUsesThisLauncher()&&r.validateParams()&&(r.webinarTimeRestrictions=o.webinar_join_time_restriction[r.webinarProviderKey],r.updateWebinarJoinStatus())},registerOnJoinStatusChanged:function(e){r.onJoinStatusChange=e,r.onJoinStatusChange(r.webinarJoinStatus)},validateParams:function(){return!!r.webinarProvider&&!!r.webinarStartTimeUTC&&!!r.webinarEndTimeUTC},webinarProviderUsesThisLauncher:function(){return["ms_teams"].includes(r.webinarProviderKey)},updateWebinarJoinStatus:function(){r.webinarJoinStatus=r.getWebinarJoinStatus(),r.previousStatus!==r.webinarJoinStatus&&(r.previousStatus=r.webinarJoinStatus,r.onJoinStatusChange&&r.onJoinStatusChange(r.webinarJoinStatus)),r.webinarJoinStatus!==o.webinarJoinStatuses.too_late&&e(r.updateWebinarJoinStatus,r.updateIntervalSeconds)},getWebinarJoinStatus:function(){var e=r.getCurrentTimeUTC();return e<r.getStartTimeCutoff()?o.webinarJoinStatuses.too_early:e>r.getEndTimeCutoff()?o.webinarJoinStatuses.too_late:o.webinarJoinStatuses.in_progress},getCurrentTimeUTC:function(){return(new Date).getTime()/1e3},getStartTimeCutoff:function(){return r.getStartTime()-r.getStartTimeAllowance()},getStartTime:function(){return new Date(r.webinarStartTimeUTC).getTime()/1e3},getStartTimeAllowance:function(){return 60*r.webinarTimeRestrictions.start_time_allowance},getEndTimeCutoff:function(){return r.getEndTime()+r.getEndTimeAllowance()},getEndTime:function(){return new Date(r.webinarEndTimeUTC).getTime()/1e3},getEndTimeAllowance:function(){return 60*r.webinarTimeRestrictions.end_time_allowance}};return{build:function(e,t,n){return r.init(e,t,n),r}}}angular.module("lu").factory("WebinarLauncherFactory",e),e.$inject=["$timeout","LupHelper"]}(),function(){"use strict";function e(e){var n=new e,e=function(){this.data=null,this.meta=null};return e.prototype.update=function(e){var t=this,e={url:"/update-white-label-settings.json",data:e};return n.put(null,e,null).then(function(){t.data=n.data})},e.prototype.cancelPendingDomain=function(){var e=this,t={url:"/cancel-pending-domain.json",data:{}};return n.put(null,t,null).then(function(){e.data=n.data})},e}window.angular.module("lu").factory("WhitelabelsFactory",e),e.$inject=["learnUponApi"]}(),function(){"use strict";function e(t){return function(e){angular.extend(e),this.user_id=e.user_id,this.id=e.id,this.group_manager_id=e.group_manager_id,this.name_or_email=e.name_or_email,this.email=e.email,this.display_name=e.name_or_email,this.profile_image=e.profile_image,this.initials=function(){return t.avatarInitials(this)}}}angular.module("lu").factory("GroupManagerVM",e),e.$inject=["LupHelper"]}(),function(r){"use strict";function e(o){return function(e,t){r.extend(e),this.id=e.id,this.invite_id=e.invite_id,this.pending=!!e.invite_id,this.full_name=e.display_name?e.display_name:"No Name",this.email=e.email,this.display_name=e.display_name,this.first_name=e.first_name,this.user_id=e.user_id,this.added_by_rule_id=e.added_by_rule_id,this.label=this.pending?"pending":"active",this.enrollment_count=e.enrollment_count,this.username=e.username,this.profile_image=e.profile_image,this.initials=function(){return this.pending?"?":o.avatarInitials(this)},this.actions=[];var n=[],n=this.pending?["destroy","resendInvite","showInviteUrl"]:["destroy"];this.showAction=function(e){return _.includes(n,e)},this.displayEmailOrUsername=function(){return t&&e.username?e.username:e.email}}}r.module("lu").factory("GroupUserVM",e),e.$inject=["LupHelper"]}(window.angular),function(){function e(o,t,e,r,n,a,i,s,l,c,u){o.LupHelper=e;var d=this.slides=o.slides=[],p=-1;this.currentSlide=null;e=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}();o.luSlide_uuid=e,o.direction="left",o.currentIndex=0,o.currentSlide=o.slides[o.currentIndex],o.slideInterval=angular.isUndefined(o.interval)?7e3:o.interval,o.hideArrows=!0,o.setCurrentSlideIndex=function(e){o.direction=e>o.currentIndex?"left":"right",o.currentIndex=e},o.isCurrentSlideIndex=function(e){return o.currentIndex===e},o.next=function(){var e=o.currentIndex<o.slides.length-1?++o.currentIndex:0;_||o.goToSlide(e,"right",!0)},o.prev=function(){r.cancel(o.timeoutID);var e=0<o.currentIndex?--o.currentIndex:o.slides.length-1;o.goToSlide(e,"left",!0)},o.goToSlide=g,o.play=function(){o.goToSlide()},o.stop=function(){r.cancel(o.timeoutID)},o.pauseVideoOnSlideChange=h;var _=!1;function m(e){i.debug("_setSlide"),angular.isNumber(e)&&(o.currentIndex=e,o.currentSlide=o.slides[o.currentIndex])}this.addSlide=function(e,t){e.$element=t,d.push(e),1===d.length?(g(d.length-1),1==d.length&&o.play()):e.visible=!1},this.removeSlide=function(e){var t=d.indexOf(e);d.splice(t,1),0<d.length&&e.active?t>=d.length?m(t-1):m(t):t<p&&p--};var f=function(){r.cancel(o.timeoutID),u.is("xs")||angular.isArray(o.slides)&&1<o.slides.length&&(o.timeoutID=r(function(){o.next(),f()},o.slideInterval))};function g(e,t,n){r.cancel(o.timeoutID),void 0!==e&&h(e),void 0!==e&&angular.isNumber(e)&&!isNaN(e)||(e=o.currentIndex),i.debug("goToSlide(:index)".replace(/:index/,e)),o.direction=angular.isDefined(t)?t:e>o.currentIndex?"left":"right",i.debug("lu-slider::scope.direction -> "+o.direction),o.currentIndex=e,o.currentSlide=o.slides[e],o.slides.forEach(function(e){e.visible=!1}),o.slides[o.currentIndex].visible=!0,n?o.stop():f()}function h(e){t.$broadcast("slideChanged",e)}function b(){i.debug("lu-slider: Orientation has changed."),o.goToSlide()}r(function(){f()}),o.$on("$destroy",function(){r.cancel(o.timeoutID)}),o.$on("lu-slider::stop",function(e,t){o.stop()}),o.$on("lu-slider::play",function(e,t){o.play()}),o.$on("lu-slider::next",function(e,t){o.next()}),o.$on("lu-slider::previous",function(e,t){o.prev()}),o.$on("lu-slider::go-to-slide",function(e,t){i.debug((angular.isDefined(t),"("+t.toString()+")")),angular.isDefined(t)&&angular.isNumber(t.slideIndex)&&o.goToSlide(t.slideIndex)});var v=angular.element(a);v.bind("orientationchange",b),v.bind("resize",b),o.$on("$destroy",function(){v.unbind("orientationchange",b),v.unbind("resize",b)})}function t(e,t,n,o,r,a,i){return{restrict:"EA",replace:!0,transclude:!0,scope:{interval:"=",noTransition:"=",noPause:"="},controller:"LuSlideController",require:"luSlider",templateUrl:"/tc/lu-slider/lu-slider-template.html"}}function n(e,t,n,r,o,a,i){return{require:"^luSlider",restrict:"EA",transclude:!0,replace:!0,templateUrl:"/tc/lu-slider/slide.html",scope:{active:"=?"},link:function(e,t,n,o){o.addSlide(e,t),r.debug("addSlide(scope, element);"),e.$on("$destroy",function(){o.removeSlide(e)})}}}angular.module("lu").controller("LuSlideController",e).directive("luSlider",t).directive("luSlide",n).directive("luSliderAutoSlide",["$interval","$log",function(e,a){return{restrict:"A",link:function(e,t,n){function o(){a.debug("luSliderAutoSlide::stopAutoPlay"),e.stop()}function r(){a.debug("luSliderAutoSlide::restartTimer"),e.play()}n.hasOwnProperty("luSliderPauseOnHover")&&"false"!==n.luSliderPauseOnHover&&(t.on("mouseenter",o),t.on("mouseleave",r)),e.$on("$destroy",function(){o(),t.off("mouseenter",o),t.off("mouseleave",r)})}}}]).animation(".slide-animation",function(){return{addClass:function(e,t,n){var o=e.scope();"ng-hide"==t?(t=e.parent().width(),"right"!==o.direction&&(t=-t),TweenMax.to(e,.5,{left:t,onComplete:n})):n()},removeClass:function(e,t,n){var o=e.scope();"ng-hide"==t?(e.removeClass("ng-hide"),t=e.parent().width(),"right"===o.direction&&(t=-t),TweenMax.set(e,{left:t}),TweenMax.to(e,.5,{left:0,onComplete:n})):n()}}}),e.$inject=["$scope","$rootScope","LupHelper","$timeout","$document","$window","$log","$compile","$http","$templateCache","ViewPortService"],t.$inject=["$timeout","$document","$window","$log","$compile","$http","$templateCache"],n.$inject=["$timeout","$document","$window","$log","$compile","$http","$templateCache"]}(),angular.module("lu.tags",[]),function(){function e(o){return{restrict:"A",link:function(e,t,n){o(function(){t.addClass("show-chip")})}}}angular.module("lu.tags").directive("luAnimateTagsChip",e),e.$inject=["$timeout"]}(),function(){function e(o,r,a,i){return{restrict:"EA",link:function(t,n,e){t.typeahedParent=t.$parent.$parent.$parent.$parent;e=i(e.templateUrl)(t.$parent)||"/tc/lu-tags/lu-tags-chip-text.html";o.get(e,{cache:r}).success(function(e){n.replaceWith(a(e.trim())(t))})},scope:{index:"=",item:"="}}}angular.module("lu.tags").directive("luTagsChipText",e),e.$inject=["$http","$templateCache","$compile","$parse"]}(),function(){function e(){return{restrict:"EA",transclude:!0,replace:!0,templateUrl:"/tc/lu-tags/lu-tags-chip.html"}}angular.module("lu.tags").directive("luTagsChip",e),e.$inject=[]}(),function(){function e(c,u){return{bindFocusBlur:function(n,o){var r,a,i;function s(e){e&&"INPUT"!==e.target.nodeName||(r=i=!1,a?i=!0:u(function(){n.triggerHandler("blur"),angular.element(n).removeClass("in-focus")}))}function e(){r||(r=!0,u(function(){n.triggerHandler("focus"),angular.element(n).addClass("in-focus")}))}function t(){a=!0}function l(e){a=!1;var t=e.target,e=contains(n[0],t);i&&!e&&s(),e&&"INPUT"!==t.nodeName&&u(function(){o[0].focus()}),!e&&r&&(r=!1)}return c[0].addEventListener("click",l,!0),n[0].addEventListener("mousedown",t,!0),n[0].addEventListener("blur",s,!0),o.on("focus",e),function(){c[0].removeEventListener("click",l,!0),n[0].removeEventListener("mousedown",t,!0),n[0].removeEventListener("blur",s,!0),o.off("focus",e)}}}}angular.module("lu.tags").factory("luTagsUtils",e),e.$inject=["$document","$timeout"]}(),function(){function e(c,e,t,n,o,u,d,r,p){return{restrict:"EA",replace:!0,templateUrl:"/tc/lu-tags/lu-tags-template.html",scope:{modelArr:"=ngModel",beforeSelectItem:"=?",afterSelectItem:"=?",validateItem:"=?",customMsg:"=?",beforeRemoveItem:"=?",afterRemoveItem:"=?",cleanQuery:"=?",placeholder:"=?",tabIndex:"=?",customId:"@"},link:{pre:function(r,e,t){var o=e.find("input"),a=$("span.sizer").first();r.placeholder;r.showLoader=!1,r.isHover=!1,r.isFocused=!1,r.maxSelections=parseInt(r.$eval(t.maxSelections))||1/0,r.chipUrl=t.chipUrl,r.hidePowerUserTips=!1,r.disableOnFocus=!1,r.onFocus=function(){r.disableOnFocus||(r.isFocused=!0);r.disableOnFocus=!1},r.onMouseEnter=function(){r.isHover=!0},r.onMouseLeave=function(){r.isHover=!1},r.onBlur=function(){r.inputValue&&l(r.inputValue);r.isFocused=!1},r.onChange=function(){angular.noop()},r.keyParser=function(e){var t={38:"up",40:"down",8:"backspace",13:"enter",9:"tab",27:"esc"}[e.keyCode];"backspace"===t?(r.validationMsg=null,""!==r.inputValue&&!angular.isUndefined(r.inputValue)||0===r.modelArr.length||n(r.modelArr[r.modelArr.length-1])):"esc"===t?(r.isHover=!1,r.isFocused=!1):"enter"===t&&(e.preventDefault(),r.inputValue&&l(r.inputValue))},r.canAddMore=s,r.removeAddedValues=n,r.translations={delete_item:p.showMessage("lup.typeahead.delete_item"),add_item:p.showMessage("lup.typeahead.add_item"),loading:p.showMessage("lup.typeahead.loading"),default_error_msg:p.showMessage("lup.auto_assign_rules.validation_msgs.default_msg")},angular.isDefined(t.hidePowerUserTips)&&(r.hidePowerUserTips=!0===r.$eval(t.hidePowerUserTips));angular.isDefined(r.tabIndex)&&o.attr("tabindex",r.tabIndex);e=d.bindFocusBlur(e,o);r.$on("$destroy",e),null!==r.modelArr&&""!==r.modelArr&&!angular.isUndefined(r.modelArr)||(r.modelArr=[]);function i(){var e=r.placeholder||"";o.attr("placeholder",e),o.attr("size",o.attr("placeholder").length)}function s(){return r.maxSelections===1/0||!(angular.isArray(r.modelArr)&&r.modelArr.length>=r.maxSelections)}function n(e){var t;r.disableOnFocus=!0,null===r.modelArr||""===r.modelArr||-1!=(t=r.modelArr.indexOf(e))&&(angular.isFunction(r.beforeRemoveItem)&&r.beforeRemoveItem(e),r.modelArr.splice(t,1),angular.isFunction(r.afterRemoveItem)&&r.afterRemoveItem(e))}function l(e){r.cleanQuery&&(r.inputValue=""),r.showLoader=!0;var n=e.split(/[,;]+/);n=(n=_.map(n,function(e){return e.trim()})).filter(function(e,t){return n.indexOf(e)==t}),function(e){var t=u.defer();{var n;r.validateItem?angular.isFunction(r.validateItem)?(n=r.validateItem(e),t.resolve(n)):r.validateItem instanceof RegExp?_.every(e,function(e){return e.match(r.validateItem)})?t.resolve({result:!0,items:e}):t.resolve({result:!1,message:r.customMsg||r.translations.default_error_msg}):(t.reject("Validation form is wrong, please use function or RegExp"),c.error("Validation form is wrong, please use function or RegExp")):t.resolve({result:!0,items:e})}return t.promise}(n=_.reject(n,function(e){return function(e,t){var n=!1;if(null===e||""===e)return n;for(var o=0;o<e.length&&!(n=r.compareItemsFn&&angular.isFunction(r.compareItemsFn)?r.compareItemsFn(e[o],t):angular.equals(e[o],t));o++);return n}(r.modelArr,e)})).then(function(e){e.result?(r.validationMsg=null,n=e.items,angular.isFunction(r.beforeSelectItem)&&r.beforeSelectItem(n),_.each(n,function(e){e&&s()&&r.modelArr.push(e)}),r.showLoader=!1,angular.isFunction(r.afterSelectItem)&&r.afterSelectItem(n)):(r.showLoader=!1,r.validationMsg=r.customMsg||e.message||r.translations.default_error_msg)})}r.$watch("inputValue",function(e,t){var n;i(),e?(n=angular.isDefined(e)?e:o.val(),a.text(n),n=Math.ceil(a.width()+1),o.css("width",n)):o.css("width","auto"),e!==t&&angular.isDefined(e)&&(r.isFocused||(r.isFocused=!0))}),r.$watch("placeholder",function(e){i()})},post:angular.noop}}}angular.module("lu.tags").directive("luTags",e),e.$inject=["$log","$filter","$http","$parse","$timeout","$q","lutaUtils","$interpolate","LupHelper"]}(),angular.module("lu").directive("onMouseClick",function(){return{restrict:"A",link:function(t,e,n){function o(e){t[r](e,t.$index)}var r=n.onMouseEnter;e.on("click",o),t.$on("$destroy",function(){e.off("click",o)})}}}),angular.module("lu").directive("onMouseEnter",function(){return{restrict:"A",link:function(t,e,n){function o(e){t[r](e,t.$index)}var r=n.onMouseEnter;e.on("mouseenter",o),t.$on("$destroy",function(){e.off("mouseenter",o)})}}}),angular.module("lu").directive("onMouseLeave",function(){return{restrict:"A",link:function(t,e,n){function o(e){t[r](e,t.$index)}var r=n.onMouseLeave;e.on("mouseleave",o),t.$on("$destroy",function(){e.off("mouseleave",o)})}}}),function(){function t(){return{restrict:"EA",link:function(t,c,n){var u=-1!==navigator.userAgent.indexOf("Macintosh")&&-1!==navigator.userAgent.indexOf("WebKit"),d=-1!==navigator.userAgent.indexOf("firefox");c[0].onwheel=p,c[0].onmousewheel=p,d&&(c[0].scrollTop=0,c[0].addEventListener("DOMMouseScroll",p,!1));function p(t){var n=c[0],o=n.scrollTop,r=n.scrollHeight,a=n.clientHeight,i=-30*t.deltaY||t.wheelDeltaY/4||void 0===t.wheelDeltaY&&t.wheelDelta/4||-10*t.detail||0;u&&(i/=30);function s(){return d&&"DOMMouseScroll"!==e.type&&n.removeEventListener("DOMMouseScroll",p,!1),t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1}var l=0<i;return!l&&r-a-o<-i?(n.scrollTop=r,s()):l&&o<i?(n.scrollTop=0,s()):void 0}}}}angular.module("lu").directive("luPreventParentScroll",t),t.$inject=[]}(),angular.module("lu").run(["$templateCache",function(e){}]),angular.module("lu.typeahead",[]),function(){function e(o,r,a,i){return{restrict:"EA",link:function(t,n,e){t.typeahedParent=t.$parent.$parent.$parent;e=i(e.templateUrl)(t.$parent)||"/tc/lu-typeahead/lu-typeahead-match.html";o.get(e,{cache:r}).success(function(e){n.replaceWith(a(e.trim())(t))})},replace:!0,scope:{index:"=",match:"=",query:"=",selectAs:"=",displayAs:"=",itemIsAnObject:"="}}}angular.module("lu.typeahead").directive("luTypeaheadMatch",e),e.$inject=["$http","$templateCache","$compile","$parse"]}(),function(){function e(o){return{restrict:"A",link:function(e,t,n){o(function(){t.addClass("show-chip")})}}}angular.module("lu.typeahead").directive("luAnimateChip",e),e.$inject=["$timeout"]}(),function(){function e(o,r,a,i){return{restrict:"EA",link:function(t,n,e){t.typeahedParent=t.$parent.$parent.$parent.$parent;e=i(e.templateUrl)(t.$parent)||"/tc/lu-typeahead/lu-typeahead-chip-text.html";o.get(e,{cache:r}).success(function(e){n.replaceWith(a(e.trim())(t))})},scope:{index:"=",item:"=",selectAs:"=",displayAs:"=",itemIsAnObject:"="}}}angular.module("lu.typeahead").directive("luTypeaheadChipText",e),e.$inject=["$http","$templateCache","$compile","$parse"]}(),function(){function e(e,t,n,o){return{restrict:"EA",transclude:!0,replace:!0,templateUrl:"/tc/lu-typeahead/lu-typeahead-chip.html"}}angular.module("lu.typeahead").directive("luTypeaheadChip",e),e.$inject=["$http","$templateCache","$compile","$parse"]}(),angular.module("lu.typeahead").filter("luTypeaheadHighlight",function(){return function(e,t){return t?(""+e).replace(new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):e}}),function(){function e(c,u){return{contains:d,bindFocusBlur:function(n,o){var r,a,i;function s(e){e&&"INPUT"!==e.target.nodeName||(r=i=!1,a?i=!0:u(function(){n.triggerHandler("blur"),angular.element(n).removeClass("in-focus")}))}function e(){r||(r=!0,u(function(){n.triggerHandler("focus"),angular.element(n).addClass("in-focus")}))}function t(){a=!0}function l(e){a=!1;var t=e.target,e=d(n[0],t);i&&!e&&s(),e&&"INPUT"!==t.nodeName&&u(function(){o[0].focus()}),!e&&r&&(r=!1)}return c[0].addEventListener("click",l,!0),n[0].addEventListener("mousedown",t,!0),n[0].addEventListener("blur",s,!0),o.on("focus",e),function(){c[0].removeEventListener("click",l,!0),n[0].removeEventListener("mousedown",t,!0),n[0].removeEventListener("blur",s,!0),o.off("focus",e)}},scrollActiveOption:function(e,t){var n,o,r,a,i;t&&(o=e.offsetHeight,r=function(e,t,n){var o=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),r="width"===t?e.offsetWidth:e.offsetHeight,a=window.getComputedStyle(e,null);if(r<=0||null===r){if(((r=a[t])<0||null===r)&&(r=e.style[t]),o.test(r))return r;r=parseFloat(r)||0}return r+function(e,t,n,o){var r=t===(n?"border":"content")?4:"width"===e?1:0,a=0,i=["Top","Right","Bottom","Left"];function s(e){return parseFloat(o[e])}for(;r<4;r+=2)"margin"===t&&(a+=s(t+i[r])),n?("content"===t&&(a-=s("padding"+i[r])),"margin"!==t&&(a-=s("border"+i[r]+"Width"))):(a+=s("padding"+i[r]),"padding"!==t&&(a+=s("border"+i[r]+"Width")));return a}(t,n||"content",!0,a)}(t,"height","margin"),a=e.scrollTop||0,n=s(t).top-s(e).top+a,t=(i=n)-o+r,o+a<n+r?e.scrollTop=t:n<a&&(e.scrollTop=i))}};function d(e,t,n){for(var o=t;o&&o.ownerDocument&&11!==o.nodeType;){if(n){if(o===e)return!1;if(0<=o.className.indexOf(n))return!0}else if(o===e)return!0;o=o.parentNode}return!1}function s(e){var t=e.getBoundingClientRect(),n=e&&e.ownerDocument;if(n){e=n.documentElement,n=null!==(n=n)&&n===n.window?n:9===n.nodeType&&n.defaultView;return{top:t.top+n.pageYOffset-e.clientTop,left:t.left+n.pageXOffset-e.clientLeft}}}}angular.module("lu.typeahead").factory("lutaUtils",e),e.$inject=["$document","$timeout"]}(),function(){function e(A,L,e,t,T,z,x,n,P,k){return{restrict:"EA",replace:!0,templateUrl:"/tc/lu-typeahead/lu-typeahead-template.html",scope:{suggestionsArr:"=?",modelArr:"=?ngModel",customOutArr:"=?",customOutFn:"=?",apiUrl:"@",apiMethod:"=?",beforeSelectItem:"=?",afterSelectItem:"=?",beforeRemoveItem:"=?",afterRemoveItem:"=?",compareItemsFn:"=?",matchTrackerFn:"=?",sendOnSearchFn:"=?",cleanQuery:"=?",placeholder:"=?",resultItemUrl:"@?resultItemUrl",chipUrl:"@?chipUrl",tabIndex:"=?",initFocus:"@?",identifier:"@?",addOptionsDynamically:"@?",addOptionsDynamicallyLabel:"@?",exposeSearchInput:"=?",id:"@?"},link:{pre:function(a,n,e){var r,o=n.find("input"),i=angular.element(n[0].querySelector(".smart-list")),s=$("span.sizer").first(),l=0,c=a.$eval(e.debounce)||P.search.waitTime,u=a.apiMethod,d=(a.placeholder,1),p=!1,m=!1;a.liveAnnouncer=null,a.selectAs=e.selectAs,a.displayAs=e.displayAs,a.showLoader=!1,a.showInfiniteLoader=!1,a.selectedItemIndex=0,a.name=e.name,a.isRequired=e.required,a.errMsgRequired=e.errMsgRequired,a.isHover=!1,a.isFocused=!1,a.isAlwaysOpen=a.$eval(e.alwaysOpen)||!1,a.maxSelections=parseInt(a.$eval(e.maxSelections))||1/0,a.maxInputLength=parseInt(a.$eval(e.maxInputLength))||1/0,a.asPopover=!!a.$eval(e.asPopover)&&!a.isAlwaysOpen||!1,a.preloadingData=!0,a.queryPage=d,a.useInfiniteScroll=!1,a.hidePowerUserTips=!1,a.disableOnFocus=!1,a.customElementIndex=-1,a.addOptionsDynamicallyLabel=a.addOptionsDynamicallyLabel||P.showMessage("lup.typeahead.new_option"),a.id=a.id||"",angular.isUndefined(a.suggestionsArr)&&(a.suggestionsArr=[]);a.itemIsAnObject=function(){return angular.isDefined(a.selectAs)&&""!==a.selectAs&&angular.isDefined(a.displayAs)&&""!==a.displayAs},a.isActive=v,a.iOS=function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1},a.onFocus=function(){a.disableOnFocus||(a.isFocused=!0);a.disableOnFocus=!1},a.onMouseEnter=function(){a.isHover=!0},a.onMouseLeave=function(){a.isHover=!1},a.onBlur=function(){a.isFocused=!1},a.onChange=function(){a.exposeSearchInput&&(a.$parent.vm?a.$parent.vm.typeahedSearchValue=angular.copy(a.inputValue):a.$parent.typeahedSearchValue=angular.copy(a.inputValue))},a.keyParser=function(e){var t,n={38:"up",40:"down",8:"backspace",13:"enter",9:"tab",27:"esc"}[e.keyCode];if("backspace"==n)""!==a.inputValue&&!angular.isUndefined(a.inputValue)||0===a.modelArr.length||a.removeAddedValues(a.modelArr[a.modelArr.length-1]);else if("down"==n)t=L("filter")(a.suggestionsArr,a.alreadyAddedValues),a.selectedItemIndex<t.length-1&&a.selectedItemIndex++,x.scrollActiveOption(i[0],i.find("li")[a.selectedItemIndex]);else if("up"==n&&a.selectedItemIndex>(a.addOptionsDynamically?a.customElementIndex:0))a.selectedItemIndex--,x.scrollActiveOption(i[0],i.find("li")[a.selectedItemIndex]);else if("esc"==n)a.isHover=!1,a.isFocused=!1;else if("enter"==n){if(e.preventDefault(),t=L("filter")(a.suggestionsArr,a.alreadyAddedValues),a.addOptionsDynamically&&a.selectedItemIndex==a.customElementIndex)return void a.onSuggestedItemsClick(a.inputValue,a.selectedItemIndex);a.selectedItemIndex<t.length&&a.onSuggestedItemsClick(t[a.selectedItemIndex])}else if(String(a.inputValue).length>=a.maxInputLength)return e.preventDefault(),!1;a.isCustomOptionActive=v(a.customElementIndex)},a.onSuggestedItemsClick=function(e,t){if(!y())return;if(function(e){return a.addOptionsDynamically&&e==a.customElementIndex}(t)&&!(e=M(e)))return void(a.inputValue="");angular.isDefined(t)&&(a.selectedItemIndex=t);a.beforeSelectItem&&angular.isFunction(a.beforeSelectItem)&&a.beforeSelectItem(e);{a.modelArr.push(e),a.customOutFn&&angular.isFunction(a.customOutFn)&&((t=a.customOutFn(e))?a.customOutArr.push(t):A.debug("You can't insert blank item to custom output list!"))}a.afterSelectItem&&angular.isFunction(a.afterSelectItem)&&a.afterSelectItem(e);C((e.display_name||e.title||e.firstLineDisplay||(a.displayAs?e[a.displayAs]:""))+" "+P.showMessage("lup.typeahead.selected_item")),a.cleanQuery&&(a.inputValue="");{y()?(x.scrollActiveOption(i[0],i.find("li")[a.selectedItemIndex]),e=L("filter")(a.suggestionsArr,a.alreadyAddedValues),!p&&angular.isArray(e)&&e.length<=9&&(A.debug("Load more!"),h())):(a.isHover=!1,a.isFocused=!1)}},a.alreadyAddedValues=function(e){return!S(a.modelArr,e)},a.removeAddedValues=function(e){{var t;a.disableOnFocus=!0,null!==a.modelArr&&""!==a.modelArr&&-1!=(t=a.modelArr.indexOf(e))&&(a.beforeRemoveItem&&angular.isFunction(a.beforeRemoveItem)&&a.beforeRemoveItem(e),a.modelArr.splice(t,1),a.customOutFn&&angular.isFunction(a.customOutFn)&&angular.isArray(a.customOutArr)&&a.customOutArr.splice(t,1),a.afterRemoveItem&&angular.isFunction(a.afterRemoveItem)&&a.afterRemoveItem(e),C(P.showMessage("lup.typeahead.remove_chip")+" "+(e.display_name||e.title||(a.displayAs?e[a.displayAs]:""))))}},a.mouseEnterOnItem=function(e,t){!0===a.isFocused&&(a.selectedItemIndex=angular.isUndefined(t)?a.customElementIndex:t,a.isCustomOptionActive=a.isActive(a.customElementIndex),a.$digest())},a.isNoResultsSetter=b,a.isNoResultsGetter=t,a.inputValue="",a.addNewOption=!1,a.isCustomOptionActive=!1,a.itemTracker=function(e,t){return a.matchTrackerFn&&angular.isFunction(a.matchTrackerFn)?a.matchTrackerFn(e,t,a.itemIsAnObject()):a.itemIsAnObject()?e.id:t},a.translations={close_list:P.showMessage("lup.typeahead.close_list"),delete_item:P.showMessage("lup.typeahead.delete_item"),go_up:P.showMessage("lup.typeahead.go_up"),go_down:P.showMessage("lup.typeahead.go_down"),add_item:P.showMessage("lup.typeahead.add_item"),loading:P.showMessage("lup.typeahead.loading"),no_results_found:P.showMessage("lup.typeahead.no_results_found"),refine_your_search:P.showMessage("lup.typeahead.refine_your_search"),chips_list_number:function(e){return P.showMessage("lup.typeahead.chips.list_description",{chip_index:e,chips_length:a.modelArr.length})},remove:P.showMessage("remove"),guidance:P.showMessage("lup.typeahead.guidance")},angular.isDefined(e.useInfiniteScroll)&&(a.useInfiniteScroll=!0===a.$eval(e.useInfiniteScroll));angular.isDefined(e.hidePowerUserTips)&&(a.hidePowerUserTips=!0===a.$eval(e.hidePowerUserTips));a.useInfiniteScroll&&(a.loadMoreEvent="typeahead::loadMore");a.$on(a.loadMoreEvent,function(){h()}),angular.isString(a.identifier)&&a.$on(a.identifier+":CLEAN_QUERY",function(){m=!0,a.inputValue=""});a.$watch("initFocus",function(e){"true"===e&&T(function(){o.focus()})}),angular.isDefined(a.tabIndex)&&o.attr("tabindex",a.tabIndex);e=x.bindFocusBlur(n,o);a.$on("$destroy",e),null!==a.suggestionsArr&&""!==a.suggestionsArr||!a.isAlwaysOpen||(null!==a.apiUrl&&""!==a.apiUrl||a.apiMethod&&angular.isFunction(a.apiMethod)?g(a.inputValue):A.warn("Please provide suggestion array list, url or method"));null!==a.modelArr&&""!==a.modelArr&&!angular.isUndefined(a.modelArr)||(a.modelArr=[],a.customOutFn&&angular.isFunction(a.customOutFn)&&(a.customOutArr=[]));a.$watch("isFocused",function(e,t){angular.isDefined(e)&&!0===e&&!a.isAlwaysOpen?(a.queryPage=1,angular.isArray(a.modelArr)&&a.modelArr.length<a.maxSelections&&g(a.inputValue,a.queryPage)):angular.isDefined(e)&&!1===e&&!a.isAlwaysOpen&&(a.showLoader=!1,a.suggestionsArr.length=0,f())});var f=function(){r&&T.cancel(r)};function g(t,o){t=t&&k.trimAndReplaceMultipleSpacesWithSingle(t),a.isEmptyList=!1,a.showLoader=!0,angular.isDefined(o)&&angular.isNumber(o)&&d<o&&(a.showInfiniteLoader=!0),r&&l&&f();var n=[];try{n=a.sendOnSearchFn&&angular.isFunction(a.sendOnSearchFn)?a.sendOnSearchFn(a.modelArr):_.map(a.modelArr,function(e){return a.itemIsAnObject()?e.id:e})}catch(e){A.debug("Error on preparing selected data to pass to server. ex: "+e.message),n=[]}return r=T(function(){var e=u({$query:t||"",$page:o||d,$selected:n||[]})||"";return(e.$promise&&!e.$resolved||angular.isFunction(e.then))&&(l=c),z.when(e.$promise||e).then(function(e){var t,n;return a.addNewOption=(n=e,t=k.trimAndReplaceMultipleSpacesWithSingle(a.inputValue),a.addOptionsDynamically&&""!=t&&M(a.inputValue)&&(0==n.length||t!=n[0][a.displayAs])),e&&0<e.length?(angular.isNumber(o)&&d<o?angular.forEach(e,function(e){S(a.suggestionsArr,e)||a.suggestionsArr.push(e)}):(a.suggestionsArr=e,n=L("filter")(a.suggestionsArr,a.alreadyAddedValues),a.selectedItemIndex=!n.length&&a.addNewOption?a.customElementIndex:0),b(!1)):angular.isNumber(o)&&d<o&&a.suggestionsArr.length||(a.suggestionsArr=[],a.selectedItemIndex=a.addOptionsDynamically?a.customElementIndex:0,b(!0)),a.isCustomOptionActive=v(a.customElementIndex),a.preloadingData=!1,o+=1,e}).finally(function(){a.showLoader=!1,a.showInfiniteLoader=!1})},l)}function h(){a.itemIsAnObject()&&(a.queryPage+=1),l=0,f(),g(a.inputValue,a.queryPage)}function b(e){angular.isDefined(e)&&(p=e)}function t(){return p}function v(e){var t=a.selectedItemIndex==e,e=angular.element(n).find(".autocomplete-list li:nth-child("+(e+1)+")");return t&&a.isFocused?e.attr("aria-live","polite"):e.attr("aria-live","off"),t}function w(){var e=a.placeholder||"";o.attr("placeholder",e),o.attr("size",o.attr("placeholder").length)}function y(){return a.maxSelections===1/0||!(angular.isArray(a.modelArr)&&a.modelArr.length>=a.maxSelections)}function M(e){var t={firstLineDisplay:e=k.trimAndReplaceMultipleSpacesWithSingle(e),id:null,secondLineDisplay:""};if(t[a.displayAs]=e,!S(a.modelArr,t,!0))return t}function S(e,t,n){n=n||!1;var o=!1;if(null===e||""===e)return o;for(var r=0;r<e.length&&!(o=n?function(e,t,n){if(angular.isDefined(e)&&angular.isDefined(e[n])&&angular.isDefined(t)&&angular.isDefined(t[n]))return k.trimAndReplaceMultipleSpacesWithSingle(e[n])===k.trimAndReplaceMultipleSpacesWithSingle(t[n]);return!1}(e[r],t,a.displayAs):a.compareItemsFn&&angular.isFunction(a.compareItemsFn)?a.compareItemsFn(e[r],t):angular.equals(e[r],t));r++);return o}function C(e){a.liveAnnouncer=e,T(function(){a.liveAnnouncer=null},2e3)}a.$watch("inputValue",function(e,t){var n;a.addNewOption=!1,w(),e?(n=angular.isDefined(e)?e:o.val(),s.text(n),n=Math.ceil(s.width()+1),o.css("width",n)):o.css("width","auto"),e!==t&&angular.isDefined(e)&&(a.suggestionsArr=[],a.selectedItemIndex=0,a.queryPage=1,f(),!angular.isUndefined(m)&&!1!==m||(a.isFocused||(a.isFocused=!0),g(a.inputValue)),m=!1)}),a.$watch("placeholder",function(e){w()}),a.$watch("apiMethod",function(e){u=a.apiMethod,g()}),a.canAddMore=y},post:angular.noop}}}angular.module("lu.typeahead").directive("luTypeahead",e),e.$inject=["$log","$filter","$http","$parse","$timeout","$q","lutaUtils","$interpolate","LupHelper","LupService"]}(),function(){"use strict";angular.module("lu.ludash",["lu.ludash.provider"]).value("rowTemplate",'<lu-dashboard-row row="row" ludash-model="ludashModel" options="options" edit-mode="editMode" ng-repeat="row in column.rows" />').value("columnTemplate",'<lu-dashboard-column column="column" ludash-model="ludashModel" options="options" edit-mode="editMode" ng-repeat="column in row.columns" />').value("ludashTemplatePath","/tc/lu-dashboard/")}(),function(){"use strict";function e(e,t,n,o,r){return{restrict:"E",templateUrl:"/tc/dashboard_banner/component.html",scope:{},controller:"CatalogBannerComponentController",controllerAs:"vm"}}function t(e){e=e.getKey("catalog_banner");e&&e.default_banner_interval&&(this.bannerInterval=e.default_banner_interval),this.bannerSlides=[],e&&(this.bannerSlides=e.slides,this.bannerInterval=angular.isUndefined(e.banner_interval)||null===e.banner_interval?1e3*e.default_banner_interval:1e3*e.banner_interval,this.bannerSlides&&this.bannerSlides[0]&&"ContentSlide"===this.bannerSlides[0].type&&(this.contentSlide=this.bannerSlides[0]))}angular.module("lu").directive("catalogBannerComponent",e).controller("CatalogBannerComponentController",t),e.$inject=["$rootScope","$modal","LupHelper","StorageFactory","LupThemer"],t.$inject=["StorageFactory"]}(),function(){"use strict";function e(e,t,n,o,r){return{restrict:"E",templateUrl:"/tc/dashboard_banner/content_slide_component.html",scope:{bannerSlide:"=",lastUpdated:"@",preview:"@?"},controller:"ContentSlideComponentController",controllerAs:"vm",compile:function(e,t){return{pre:function(e,t,n,o){r.themeInit(t,e.bannerSlide.props)}}}}}function t(e,t,n,o){var r=this;r.helper=n,r.bannerSlide=e.bannerSlide,r.props=e.bannerSlide.props,r.config=e.bannerSlide.config,e.preview?r.lastUpdated=o.getKey("slide_last_updated"):r.lastUpdated=e.bannerSlide.last_updated_at,r.retro=!!r.props.retro,r.showLatestNews=!0,r.hideLatestNews=function(){r.showLatestNews=!1,(new t).hideLatestNews()}}angular.module("lu").directive("contentSlideComponent",e).controller("ContentSlideComponentController",t),e.$inject=["$rootScope","$modal","LupHelper","StorageFactory","LupThemer"],t.$inject=["$scope","UsersFactory","LupHelper","StorageFactory"]}(),function(){"use strict";function e(e,t,n,o,r){return{restrict:"E",templateUrl:"/tc/dashboard_banner/component.html",scope:{},controller:"DashboardBannerComponentController",controllerAs:"vm"}}function t(e,t,n,o,r){this.bannerInterval=7e3,this.bannerSlides=[],this.LupHelper=n;o=o.getKey("dashboard_banner");o&&(this.bannerSlides=o.slides,this.bannerSlides&&this.bannerSlides[0]&&"ContentSlide"===this.bannerSlides[0].type&&(this.contentSlide=this.bannerSlides[0]))}angular.module("lu").directive("dashboardBannerComponent",e).controller("DashboardBannerComponentController",t),e.$inject=["$rootScope","$modal","LupHelper","StorageFactory","LupThemer"],t.$inject=["$scope","UsersFactory","LupHelper","StorageFactory","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;i.ckeditorInstance="content_slide_wysi",i.imageType=t.fileUploads.types.portal_banner_slide_content,i.helper=t,i.bannerSlide=e.bannerSlide,i.props=e.bannerSlide.props,i.config=e.bannerSlide.config,i.bannerType=e.bannerType,i.save=function(t){t.$setPristine();var e={id:i.bannerSlide.id,type_of:i.helper.portalBannerSlideTypes.content_slide,config:i.config,props:i.props};o.updateSlide(i.bannerSlide.id,e).then(function(e){n.$broadcast("portal-banner-slide:updated"),i.props.retro&&location.reload()}).catch(function(e){t.$setDirty()})},i.cancel=function(e){location.reload()},i.displayAdvancedOptions="DashboardBanner"===i.bannerType,i.ckOpts={show_source:!0,add_embedded_media:!0,add_image_upload_via_dj:!0},e.$watch("bannerSlide",function(e,t){n.$emit("theme-preview-prop-changed",e.props)},!0),r.executeDjImageUpload=function(){a.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return i.bannerSlide.id},ckeditorInstance:function(){return i.ckeditorInstance},imageType:function(){return i.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})}}angular.module("lu").directive("editContentSlide",function(){return{replace:!1,restrict:"E",templateUrl:"/tc/dashboard_banner/edit_content_slide.html",controller:"EditContentSlideController",controllerAs:"vm",scope:{bannerSlide:"=",bannerType:"@"},link:function(e,t,n){}}}).controller("EditContentSlideController",e),e.$inject=["$scope","LupHelper","$rootScope","PortalBannerFactory","$window","$modal"]}(),function(){"use strict";function e(e,n,o,r,a,t,i,s,l,c,u){var d=this;function p(){var e="/download_jobs/"+d.banner_image_reference+"/status.json";return l.get(e,{}).then(function(e){e.data.job.status_id!==d.helper.lupJobStatuses.completed?d.timeoutPromise=o(function(){p()},2e3):(d.processingJobReference=null,d.uploadingInProcess=!1,i.location.reload())})}d.helper=n,d.bannerSlide=e.bannerSlide,d.props=e.bannerSlide.props,d.config=e.bannerSlide.config,d.banner_image_reference=t.getKey("banner_image_reference"),d.acceptedFilesArray=n.image_upload_settings.file_types,d.maxFileSize=n.image_upload_settings.file_size_5_mb+"MB",d.openCropper=function(e){{e&&u.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return null},cropperImageSize:function(){return{w:1540,h:320}}}}).result.then(function(e){e&&e.image_for_upload&&(d.alt_tag=e.alt_tag,function(n){if(!n)return;d.banner_image_reference="1",s.getData(d.helper.fileUploads.types.banners,function(t){o(function(){var e=t.data.signature_data.attributes;d.errorMsg=null,function(t,n){if(!t)return;d.errorMsg=null,s.uploadFiles(t,n,function(e){return o(function(){t.result=e.data}),a.uuid=n.guid,a.image_file_name=t.name,a.output_url=n.folder_path+t.name,a.banner_slide_id=d.bannerSlide.id,a.portal_id=d.bannerSlide.portal_id,a.slide_type=d.helper.portalBannerSlideTypes.image_slide,a.image_type="hero",a.alt_tag=d.alt_tag,a.uploadSlideImage().then(function(e){try{return d.banner_image_reference=a.data.banner_image_reference,void p()}catch(e){return void(d.banner_image_reference=null)}})},function(e){0<e.status&&(d.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(n,e)})},function(e){})}(e.image_for_upload))})}},d.alt_tag=null,r.image_upload_in_progress=!1,d.banner_image_reference&&p(),d.save=function(t){t.$setPristine();var e={id:d.bannerSlide.id,type_of:"ImageSlide",link_enabled:d.config.link_enabled,link:d.config.link};a.updateSlide(d.bannerSlide.id,e).then(function(e){r.$broadcast("portal-banner-slide:updated")}).catch(function(e){t.$setDirty()})},d.cancel=function(e){location.reload()},d.acceptedFiles=function(){return d.acceptedFilesArray.join(",")},e.$watch("invalidFile",function(e,t){angular.isArray(e)&&e.length&&c.errorDialog(n.showMessage("lup.users.invalid_profile_image",{fileName:e[0],acceptedFiles:d.acceptedFilesArray.join(", "),maxFileSize:d.maxFileSize}))})}angular.module("lu").directive("editImageSlide",function(){return{replace:!1,restrict:"E",templateUrl:"/tc/dashboard_banner/edit_image_slide.html",controller:"EditImageSlideController",controllerAs:"vm",scope:{bannerSlide:"="},link:function(e,t,n){}}}).controller("EditImageSlideController",e),e.$inject=["$scope","LupHelper","$timeout","$rootScope","PortalBannerFactory","StorageFactory","$window","s3HelperFactory","$http","ImageUploadService","$modal"]}(),function(){"use strict";function e(e,o,t,n,r,a,i,s,l,c,u,d,p){var _=this;function m(n,e){angular.isArray(e)&&e.length?d.errorDialog(o.showMessage("lup.users.invalid_profile_image",{fileName:e[0].name,acceptedFiles:_.acceptedFilesArray.join(", "),maxFileSize:_.maxFileSize})):n&&(_.banner_image_reference="1",s.getData(_.helper.fileUploads.types.banners,function(t){c(function(){var e=t.data.signature_data.attributes;_.errorMsg=null,function(t,n){if(!t)return;_.errorMsg=null,s.uploadFiles(t,n,function(e){return c(function(){t.result=e.data}),r.uuid=n.guid,r.image_file_name=t.name,r.output_url=n.folder_path+t.name,r.banner_slide_id=_.bannerSlide.id,r.portal_id=_.bannerSlide.portal_id,r.slide_type=_.helper.portalBannerSlideTypes.multimedia_slide,r.image_type="multimedia_slide",r.alt_tag=_.alt_tag,r.uploadSlideImage().then(function(e){try{return _.banner_image_reference=r.data.banner_image_reference,void f()}catch(e){return void(_.banner_image_reference=null)}})},function(e){0<e.status&&(_.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(n,e)})},function(e){}))}function f(){var e="/download_jobs/"+_.banner_image_reference+"/status.json";return l.get(e,{}).then(function(e){e.data.job.status_id!==_.helper.lupJobStatuses.completed?_.timeoutPromise=c(function(){f()},2e3):(_.processingJobReference=null,_.uploadingInProcess=!1,i.location.reload())})}_.ckeditorInstance="multimedia_slide_wysi",_.imageType=o.fileUploads.types.portal_banner_slide_content,_.helper=o,_.bannerSlide=e.bannerSlide,_.props=e.bannerSlide.props,_.config=e.bannerSlide.config,_.acceptedFilesArray=o.image_upload_settings.file_types,_.maxFileSize=o.image_upload_settings.file_size_5_mb+"MB",_.openCropper=function(e,t){t[0]&&"maxSize"===t[0].$error&&p.error(o.showMessage("lup.file_size_exceeds_max_limit"),o.showMessage("lup.certificates.image_upload_error"),null);{e&&u.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return _.learner_dashboard_feature_flag?2:null},cropperImageSize:function(){return o.uiCropperConfig.imageSize}}}).result.then(function(e){e&&e.image_for_upload&&(_.alt_tag=e.alt_tag,m(e.image_for_upload,t))})}},_.alt_tag=null,_.learner_dashboard_feature_flag=t.getKey("learner_dashboard_feature_flag"),_.props.button&&void 0===_.props.button.enabled&&(_.props.button.enabled=void 0===_.props.button.enabled||_.props.button.enabled,_.props.button.action=_.props.button.action?_.props.button.action:{},_.props.button.action.type=_.props.button.action.type?_.props.button.action.type:"modal"),_.props.wrap&&(_.props.wrap.styles=_.props.wrap.styles?_.props.wrap.styles:{},_.props.wrap.styles.backgroundColor=_.props.wrap.styles.backgroundColor?_.props.wrap.styles.backgroundColor:"#cacaca",_.props.wrap.styles.color=_.props.wrap.styles.color?_.props.wrap.styles.color:"#ffffff"),_.banner_image_reference=t.getKey("banner_image_reference"),n.image_upload_in_progress=!1,_.banner_image_reference&&f(),_.save=function(t){{var e;(function(e){"video"===_.config.media?e.$setValidity("invalidEmbedVideoUrl",r.validEmbedVideoUrl(_.config.media_video_url,!0)):"image"===_.config.media&&(e.$setValidity("invalidEmbedVideoUrl",!0),r.validEmbedVideoUrl(_.config.media_video_url,!0)||(_.config.media_video_url=""))})(t),t.$valid&&(t.$setPristine(),e={id:_.bannerSlide.id,type_of:"MultimediaSlide",config:_.config,props:_.props},r.updateSlide(_.bannerSlide.id,e).then(function(e){n.$broadcast("portal-banner-slide:updated")}).catch(function(e){t.$setDirty()}))}},_.cancel=function(e){location.reload()},_.upload=m,_.charLeft=function(e,t){return t&&t.length&&0<t.length?e-t.length:e},_.acceptedFiles=function(){return _.acceptedFilesArray.join(",")},e.$watch(function(){return _.props},function(e,t){n.$emit("theme-preview-prop-changed",_.props)},!0),_.ckOpts={show_source:!0,add_image_upload_via_dj:!0},i.executeDjImageUpload=function(){u.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return _.bannerSlide.id},ckeditorInstance:function(){return _.ckeditorInstance},imageType:function(){return _.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})}}angular.module("lu").directive("editMultimediaSlide",function(){return{replace:!1,restrict:"E",templateUrl:"/tc/dashboard_banner/edit_multimedia_slide.html",controller:"EditMultimediaSlideController",controllerAs:"vm",scope:{bannerSlide:"="}}}).controller("EditMultimediaSlideController",e),e.$inject=["$scope","LupHelper","StorageFactory","$rootScope","PortalBannerFactory","Upload","$window","s3HelperFactory","$http","$timeout","$modal","ImageUploadService","toastr"]}(),function(){"use strict";function e(e,t,n,o){return{restrict:"E",templateUrl:"/tc/dashboard_banner/image_slide_component.html",scope:{bannerSlide:"=",preview:"@?"},controller:"ImageSlideComponentController",controllerAs:"vm",link:function(e,t,n){o.themeInit(t,e.bannerSlide.props)}}}function t(e,t){var n=this;n.bannerSlide=e.bannerSlide,n.props=e.bannerSlide.props,n.config=e.bannerSlide.config,n.placeholderImage=t.cdn_path+"images/image-slide-placeholder.png",n.goToUrl=function(e){e&&n.config.link_enabled&&window.open(e,"_blank")}}angular.module("lu").controller("ImageSlideComponentController",t).directive("imageSlideComponent",e),e.$inject=["$rootScope","LupHelper","StorageFactory","LupThemer"],t.$inject=["$scope","$rootScope"]}(),function(){"use strict";function e(o,e){function t(e){return{styles:function(e){var t=e.element,e=e.binding;angular.extend(t.style,e)},action:function(e){var t=e.element,n=e.binding,t=angular.element(t);"false"!==n.type?(t.css({cursor:"pointer"}),t.unbind("click"),t.bind("click",function(e){"href"===n.type?n.href&&window.open(n.href,"_blank"):"modal"===n.type&&o.open({size:"md",resolve:{action:function(){return n}},controller:"CustomModalController",templateUrl:"/tc/dashboard_banner/custom_modal.html"})})):t.css({cursor:"initial"})},display:function(e){var t=e.element,n=e.binding,t=angular.element(t);angular.forEach(t.children(),function(e){e=angular.element(e);e.attr("prop-display-if")&&(e.attr("prop-display-if")==n?e.css({display:"block"}):e.css({display:"none"}))})},embedSrc:function(e){var t=e.element,e=e.binding;t.src!=e&&(t.src=e)},image_src:function(e){var t=e.element,e=e.binding;"IMG"===t.tagName&&e&&(t.src=e)}}}return{themeInit:function(e,r){var e=e.find("[prop-name]"),a=new t;angular.forEach(e,function(e){var n,t,o;n=e,t=r,o=a,e=angular.element(n).attr("prop-name"),(e=t[e])&&("string"==typeof e?o.inner_html({binding:e,element:n}):_.each(e,function(e,t){try{o[t]({binding:e,element:n})}catch(e){}}))})}}}function t(e,t,n,o){o.helper=e,o.modalBody=n.modal,o.cancel=function(){t.dismiss()}}angular.module("lu").service("LupThemer",e).controller("CustomModalController",t),e.$inject=["$modal","$timeout"],t.$inject=["LupHelper","$modalInstance","action","$scope"]}(),function(){"use strict";function e(n){return function(e,t){return e||n.showMessage(t)}}function t(t,e,n,o,i){return{restrict:"E",replace:!0,templateUrl:"/tc/dashboard_banner/multimedia_slide_component.html",scope:{bannerSlide:"=",sliderIndex:"=",preview:"@?"},controller:"MultimediaSlideComponentController",controllerAs:"vm",link:function(r,a,e){i.themeInit(a,r.bannerSlide.props),t.$on("slideChanged",function(e,t){var n,o;n=t,o=a.find("iframe")[0]&&a.find("iframe")[0].contentWindow,t="video"===r.vm.config.media&&/(youtube.com|youtu.be)/i.test(r.vm.config.media_video_url),o&&n!==r.vm.sliderIndex&&(t=t?'{"event":"command","func":"pauseVideo","args":""}':'{"method":"pause"}',o.postMessage(t,"*"))})}}}function n(e,t,n,o){var r=this;r.helper=t,r.config=e.bannerSlide.config,r.props=e.bannerSlide.props,r.sliderIndex=e.sliderIndex,r.showEmbedVideo=function(){return n.validEmbedVideoUrl(r.config.media_video_url,!1)},r.learner_dashboard_feature_flag=o.getKey("learner_dashboard_feature_flag")}angular.module("lu").directive("multimediaSlideComponent",t).controller("MultimediaSlideComponentController",n).filter("luPlaceholder",e),e.$inject=["LupHelper"],t.$inject=["$rootScope","$modal","LupHelper","StorageFactory","LupThemer"],n.$inject=["$scope","LupHelper","PortalBannerFactory","StorageFactory"]}(),function(){"use strict";function e(o,e,t,r){return{restrict:"E",templateUrl:"/tc/dashboard_banner/slide_preview_component.html",scope:{bannerSlide:"=",type:"@"},link:function(e,n,t){o.$on("theme-preview-prop-changed",function(e,t){r.themeInit(n,t)})},controller:"SlidePreviewComponentController",controllerAs:"vm"}}function t(e){this.learner_dashboard_feature_flag=e.getKey("learner_dashboard_feature_flag")}angular.module("lu").directive("slidePreviewComponent",e).controller("SlidePreviewComponentController",t),e.$inject=["$rootScope","LupHelper","StorageFactory","LupThemer"],t.$inject=["StorageFactory"]}(),function(){"use strict";function e(n,o,e,t,r,a){var i=new r;function s(){n.current_password="",n.user.password="",n.user.password_confirmation=""}n.LupHelper=a,n.user=e,n.show_ssl_warning=t,n.modal_title=n.profile_page?a.showMessage("lup.users.password_modal.title_change"):a.showMessage("lup.users.password_modal.title"),n.save=function(e){var t={current_password:n.current_password,password:n.user.password,password_confirmation:n.user.password_confirmation};e.$valid&&i.changePassword(t).then(function(){s(),o.close()})},n.cancel=function(){s(),o.close()}}window.angular.module("lu").controller("AccountChangePasswordController",e),e.$inject=["$scope","$modalInstance","user","show_ssl_warning","AccountFactory","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a){e.LupHelper=a,e.user=n,e.timezone=e.user.timezone,e.timeZones=r,e.save=function(){t.close({timezone:e.user.timezone,timezoneLabel:l(e.timeZones,e.user.timezone)})},e.cancel=function(){e.user.timezone=i,e.user_timezone=s,t.close()},e.getTimezoneLabel=l;var i=n.timezone,s=o;function l(e,t){if(!angular.isArray(e)||angular.isUndefined(t))return null;for(var n=0;n<e.length;n++)if(e[n].id===t)return e[n].name;return null}}angular.module("lu").controller("AccountSetTimezoneController",e),e.$inject=["$scope","$modalInstance","user","user_timezone","time_zones","LupHelper"]}(),function(){"use strict";function e(r,e,t,o,n,a,i,s,l,c,u){var d,t=t.get(),p=new i,m=new s;r.user=t.user.attributes,r.user.send_messages_externally||(r.user.send_messages_externally="-1"),r.show_ssl_warning=t.show_ssl_warning,r.portal_membership_types=t.portal_membership_types.data,r.portal_membership=t.portal_membership.attributes,r.association_membership_types=t.association_membership_types,r.admin_can_access_portal_settings=t.admin_can_access_portal_settings,r.login_with_usernames=t.login_with_usernames,r.allow_email_opt_out=t.allow_email_opt_out,r.time_zones=t.time_zones,r.user_timezone=t.user_timezone,r.portal=t.portal.cached_hash.portal,r.portalDateFormat=r.portal.date_format,r.ereq=t.ereq,r.custom_data_definitions=t.custom_data_definitions,r.custom_data=JSON.parse(t.custom_data),r.show_review_terms_buttons=t.show_review_terms_buttons,r.two_factor_authentication_allowed=t.two_factor_authentication_allowed,r.two_factor_authentication_enabled=t.two_factor_authentication_enabled,r.two_factor_authentication_activated=t.two_factor_authentication_activated,r.two_factor_authentication_mandatory=t.two_factor_authentication_mandatory,r.two_factor_authentication_backup_codes=t.two_factor_authentication_backup_codes,r.two_factor_authentication_standard_error=t.two_factor_authentication_standard_error,r.show2FADisableConfirmationModal=function(){a.open({templateUrl:"/tc/two_factor_authentication/account_disable_confirmation.html",controller:"TwoFactorAuthenticationDisableForAccountController as vm",backdrop:"static",size:"md",resolve:{user:function(){return r.user}}})},r.Helper=o,r.save=function(e){var t={user:r.user,ereq:r.ereq,custom_data:JSON.stringify(r.custom_data),is_mandatory:function(){var t={};return _.each(r.custom_data_definitions,function(e){t[e.id]=e.is_mandatory}),t}()};e.$dirty&&p.updateAccountSettings(t).then(function(e){r.account_form.$setPristine(),1==r.ereq&&(n.location="/store")})},r.cancel=function(){n.location="/my-profile"},r.setUserPassword=function(e){a.open({templateUrl:"/tc/account/change_password_modal.html",controller:"AccountChangePasswordController",backdrop:"static",size:"md",resolve:{show_ssl_warning:function(){return r.show_ssl_warning},user:function(){return e}}})},r.disableEmail=function(){return!r.login_with_usernames||r.portal.readonly_login_field||r.portal.readonly_profile},r.showCustomData=function(){return r.custom_data_definitions&&0<r.custom_data_definitions.length&&!r.ereq},n.accountFormDirty=!1,r.messagesAreSent=((d=[]).push(g("-1",o.showMessage("lup.portals_default"))),d.push(g(o.messages_type.internal,o.showMessage("portalsettings.internal"))),d.push(g(o.messages_type.both,o.showMessage("portalsettings.both"))),d),r.profile_message=t.profile_message,r.profileImage=t.profile_image,r.acceptedFiles=function(){return o.image_upload_settings.file_types.join(",")},r.maxFileSize=function(){return o.image_upload_settings.file_size_mb+"MB"},r.onImageLoad=function(e){if(!angular.isObject(e))return void c.debug("Image is blank!");l.upload({resolve:{params:function(){return{accountPage:!0,userID:r.user.id}},image:function(){return e},config:function(){return{options:{areaType:"circle"},labels:{title:o.showMessage("lup.certifications.upload_image"),btnBrowseOther:o.showMessage("lup.courses.browse_other"),btnBrowseImage:o.showMessage("certificates.select_image"),blankStateTitle:o.showMessage("lup.courses.upload_image.blank_state_titile"),blankStateBlurb:o.showMessage("lup.courses.upload_image.blank_state_blurb")}}},paramsFn:function(){return function(e){return{url:"/account-profile-image-update.json",data:{pm_id:r.portal_membership.id}}}},callbacks:function(){return{onSuccess:function(e,t){r.uploadingInProcess=!1;var n=e.data.profile_image,e=o.currentTimestamp();angular.isObject(n)&&(r.profileImage={id:n.id,small_url:n.small_url+"?timestamp="+e,large_url:n.large_url+"?timestamp="+e}),angular.isObject(t)&&t.close()},onError:function(e,t){r.uploadingInProcess=!1,angular.isObject(t)&&t.close()},onProgress:angular.noop}}}})},r.removeProfileImage=function(e){l.remove({url:"/account-profile-image-remove/:pm_id.json".replace(/:pm_id/,e)},{onSuccess:function(){r.profileImage=null}})},r.setTimezone=function(){a.open({templateUrl:"/tc/account/set_timezone_modal.html",controller:"AccountSetTimezoneController",size:"md",resolve:{user:function(){return r.user},time_zones:function(){return r.time_zones},user_timezone:function(){return r.user_timezone}}}).result.then(function(e){angular.isDefined(e)&&angular.isDefined(e.timezone)&&(r.user.timezone=e.timezone?e.timezone:null,r.user_timezone=e.timezoneLabel?e.timezoneLabel:null,r.theForm.$setDirty())})},r.setForm=function(e){r.theForm=e},r.requestDeletion=function(){a.open({templateUrl:"/tc/user_deletion_request/confirm_deletion.html",controller:"UserDeletionRequestConfirmDeletion as vm",windowClass:"tos-modal center-cont-modal",size:"md",resolve:{selfDeletion:function(){return!0},reviewTerms:function(){return!1}}}).result.then(function(e){m.requestDeletion(r.user.id).then(function(e){n.location="/user_terms_of_services"})})},r.getAssociationMembershipType=function(){if(r.association_membership_types&&r.association_membership_types.length){return r.association_membership_types.filter(function(e){return e[1]===r.portal_membership.association_member_type})[0][0]}},r.readOnlyFields=t.read_only_fields,r.adminView=!1,r.ignoreMandatory=!1,r.addValueToCustomData=function(e){var t=r.custom_data_definitions[e].id;r.custom_data[t]&&!r.custom_data[t].invalid||f(e);var n=r.choiceSelectPlaceholder.value;r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?r.custom_data[t].values=n:r.custom_data[t].values.push(n);r.choiceSelectPlaceholder.value="",function(e,t){var n=r.custom_data_definitions[t].predefined_values.indexOf(e);u(function(){r.custom_data_definitions[t].predefined_values.splice(n,1)},0)}(n,e)},r.removeValueFromCustomDataList=function(e,t,n){n&&n.preventDefault();var o=r.custom_data_definitions[t].id,n=r.custom_data[o].values[e];r.custom_data[o].values.splice(e,1),r.custom_data_definitions[t].predefined_values.push(n),r.theForm.$setDirty()},r.resetCustomDataValue=function(e,t){t&&t.preventDefault();t=r.custom_data_definitions[e].id;r.custom_data_definitions[e].predefined_values.push(r.custom_data[t].values),r.custom_data[t].values=null,r.theForm.$setDirty()},r.addAllToCustomData=function(e,t){t&&t.preventDefault();t=r.custom_data_definitions[e].id;r.custom_data[t]||f(e);r.custom_data[t].values=r.custom_data[t].values.concat(r.custom_data_definitions[e].predefined_values),r.custom_data_definitions[e].predefined_values=[],r.theForm.$setDirty()},r.choiceSelectPlaceholder={value:""},r.ariaLabel=o.showMessage("lup.breadcrumbs.account.my_profile"),r.ariaLabelSide=o.showMessage("lup.users.my_summary"),r.custom_data_definitions&&r.custom_data_definitions.length&&r.custom_data_definitions.forEach(function(e){var t=e.predefined_values?e.predefined_values.split(","):[];e.predefined_values=t});t=[{title:o.showMessage("lup.breadcrumbs.account.my_profile"),url:"/my-profile"}];function f(e){var t=r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?null:[];r.custom_data[r.custom_data_definitions[e].id]={values:t,type:r.custom_data_definitions[e].field_type,invalid:!1}}function g(e,t){return{value:e,label:t}}e.breadcrumbs=t,r.$watch("user.email_opt_out",function(e,t){e!=t&&r.account_form.$setDirty()}),r.$watch(function(){return n.accountFormDirty},function(e,t){e&&(r.account_form.$setDirty(),n.accountFormDirty=!1)}),r.$watch("invalidFile",function(e,t){angular.isArray(e)&&e.length&&l.errorDialog(o.showMessage("lup.users.invalid_profile_image",{fileName:e[0].name,acceptedFiles:o.image_upload_settings.file_types.join(","),maxFileSize:o.image_upload_settings.file_size_mb+"MB"}))})}angular.module("lu").controller("AccountShowController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","$modal","AccountFactory","UsersFactory","ImageUploadService","$log","$timeout"]}(),function(){"use strict";function e(t,e,n,o,r,a,i){var o=o.get(),s=this,l=new i;s.LupHelper=n,s.badge_activities=o.badge_activities,s.activity_badges=o.activity_badges,s.editActivity=function(t){var e=_.find(s.activity_badges.data,function(e){return e.id===t.badge_id});a.open({templateUrl:"/tc/badge_activities/edit_activity.html",controller:"EditBadgeActivityController",controllerAs:"vm",size:"md",resolve:{badgeActivity:function(){return t},badges:function(){return s.activity_badges},activityBadge:function(){return[e]}}}).result.then(function(e){e&&"save"===e.action&&s.loadData()})},s.loadData=function(){var e={};e.params=r.get(),l.getBadgeActivities(e).then(function(){s.badge_activities=l.data.badge_activities})},s.showActivity=function(e){{if(e.activity_type_id==n.badge_activity_types.purchase&&!t.ecommerce_enabled)return!1;if(e.activity_type_id==n.badge_activity_types.self_enroll&&!t.catalog_enabled)return!1}return!0}}angular.module("lu").controller("BadgeActivitiesIndexController",e),e.$inject=["$rootScope","$scope","LupHelper","StorageFactory","paramsService","$modal","BadgeActivitiesFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l){var c=this,u=new s;c.LupHelper=n,c.badgeActivity=angular.copy(r),c.badges=a,c.selected_badges=i,c.activityTooltip=function(){var e="test";switch(c.badgeActivity.activity_type_id){case n.badge_activity_types.daily_learning:e=n.showMessage("lup.gamification.activities_tooltip.daily_learning");break;case n.badge_activity_types.purchase:e=n.showMessage("lup.gamification.activities_tooltip.purchase");break;case n.badge_activity_types.views_resource:e=n.showMessage("lup.gamification.activities_tooltip.view_a_resource");break;case n.badge_activity_types.self_enroll:e=n.showMessage("lup.gamification.activities_tooltip.self_enroll");break;case n.badge_activity_types.approve_ext_credit:e=n.showMessage("lup.gamification.activities_tooltip.external_credit")}return e},c.validationErrors={},c.fetchBadges=function(t){return _.filter(angular.copy(a.data),function(e){return-1<e.name.toLowerCase().indexOf(t.$query.toLowerCase())})},c.save=function(e){e.$setValidity("badgeNotSelected",0<c.selected_badges.length),e.$valid&&(l.show("badge-activity-spinner"),c.badgeActivity.badge_id=c.selected_badges[0].id,u.update(c.badgeActivity).then(function(){o.close({action:"save"})}))},c.cancel=function(){o.close()}}angular.module("lu").controller("EditBadgeActivityController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance","badgeActivity","badges","activityBadge","BadgeActivitiesFactory","spinnerService"]}(),function(){"use strict";function e(t,e,n,o,r){this.lupHelper=e;var a=new n;this.goToDashboard=function(){a.enable_dynamic_rules().then(function(e){e.error?o.error(e.error):(r.location="/dashboard?dr=true",t.dismiss())})},this.cancel=function(){t.dismiss()}}angular.module("lu").controller("AutoAssignRulesDisableController",e),e.$inject=["$modalInstance","LupHelper","AutoAssignRulesFactory","toastr","$window"]}(),function(){"use strict";function e(e,t,n){this.lupHelper=t,this.disableAAR=function(){e.dismiss(),n()},this.cancel=function(){e.dismiss()}}angular.module("lu").controller("AutoAssignRulesDisableSecondStepController",e),e.$inject=["$modalInstance","LupHelper","disableAAR"]}(),function(){"use strict";function e(e,t,n,o,r){var a=this;a.lupHelper=t,a.nextStep=!0;function i(){a.nextStep=!1}var s=new o,t={typeId:t.lupJobTypes.exportAutoAssignRulesPdf};s.create(t).then(function(){s.pingForProgressWithAutoDownload(s.data.job.job_reference,i)}),a.disableAARSecondStep=function(){e.dismiss(),r()}}angular.module("lu").controller("AutoAssignRulesDownloadController",e),e.$inject=["$modalInstance","LupHelper","$http","LupJobFactory","disableAARSecondStep"]}(),function(){"use strict";function e(e,t,n){this.lupHelper=t,this.downloadAAR=function(){e.dismiss(),n()},this.cancel=function(){e.dismiss()}}angular.module("lu").controller("AutoAssignRulesDrInfoController",e),e.$inject=["$modalInstance","LupHelper","downloadAAR"]}(),function(h){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=new s,p=this;function m(){p.showWaiting=!0,p.rule.id?d.updateRule({rule:p.rule,target:p.rule_target}).then(function(e){e=JSON.parse(e.json_service).rule.attributes;n.close({action:"updated",rule:e})},function(){p.showWaiting=!1}):d.createRule({rule:p.rule,target:p.rule_target}).then(function(e){n.close({action:"saved"})},function(){p.showWaiting=!1})}function f(){p.showCudPredefinedValues=!1,p.selected_cud_values=[]}function g(){p.showCudFreeTextValues=!1,p.cud_free_text_values=[],p.cud_free_text_variant=o.free_text_match_types.contains}p.lupHelper=o,p.showWaiting=!1,p.rule_data_types=[{id:o.rule_data_types.custom_user_data,title:o.showMessage("lup.auto_assign_rules.data_types.custom_user_data")},{id:o.rule_data_types.email_domain,title:o.showMessage("lup.auto_assign_rules.data_types.email_domain")},{id:o.rule_data_types.all_users,title:o.showMessage("lup.auto_assign_rules.data_types.all_users")}],i&&p.rule_data_types.push({id:o.rule_data_types.membership_type,title:o.showMessage("lup.auto_assign_rules.data_types.membership_type")}),p.rule_targets=[{value:o.rules_apply_types.new,text:o.showMessage("lup.auto_assign_rules.targets.new")},{value:o.rules_apply_types.all,text:o.showMessage("lup.auto_assign_rules.targets.all")}],p.free_text_variants=[{value:o.free_text_match_types.contains,text:o.showMessage("lup.auto_assign_rules.contains_value")},{value:o.free_text_match_types.matches,text:o.showMessage("lup.auto_assign_rules.matches_value")}],p.cud_free_text_variant=a&&a.free_text_match_type?a.free_text_match_type:o.free_text_match_types.contains,p.rule_target=o.rules_apply_types.new,p.save_button=o.showMessage("save"),p.selected_groups=a&&a.group?[a.group]:[],p.selected_membership_types=a&&a.membership_type?[a.membership_type]:[],p.selected_cud_definition=a&&a.custom_user_data_definition?[a.custom_user_data_definition]:[],a&&a.email_domain?p.email_domains=-1<a.email_domain.indexOf(",")?a.email_domain.split(","):[a.email_domain]:p.email_domains=[],0<p.selected_cud_definition.length&&a&&a.custom_user_data_values?p.selected_cud_definition[0].predefined_values?(p.selected_cud_values=a.custom_user_data_values,p.showCudPredefinedValues=!0):(p.showCudFreeTextValues=!0,p.cud_free_text_values=a.custom_user_data_values):(p.selected_cud_values=[],p.cud_free_text_values=[]),p.email_domain_regex=new RegExp(e.domain_regex),p.rule=r?h.copy(r):{rule_type_id:o.rule_types.group,rule_data_type_id:o.rule_data_types.custom_user_data},p.save=function(e){(function(t){_.each(["emptyRuleName","emptyMembershipType","emptyCudDefinition","emptyCudValue","emptyCudKeywords","emptyEmailDomains","longEmailDomains","emptyGroup"],function(e){t.$setValidity(e,!0)}),p.rule.custom_user_data_definition_id=null,p.rule.custom_user_data_values=null,p.rule.membership_type_id=null,p.rule.email_domain=null})(e),e.$setValidity("emptyRuleName",!!p.rule.name),e.$setValidity("emptyGroup",0<p.selected_groups.length),p.rule.rule_data_type_id===o.rule_data_types.custom_user_data?function(e){var t=0<p.selected_cud_definition.length;{var n;e.$setValidity("emptyCudDefinition",t),t&&(p.rule.custom_user_data_definition_id=p.selected_cud_definition[0].id,p.showCudPredefinedValues?(n=0<p.selected_cud_values.length,e.$setValidity("emptyCudDefinition",n),n&&(p.rule.custom_user_data_values=p.selected_cud_values.join(","))):p.showCudPredefinedValues||(n=0<p.cud_free_text_values.length,e.$setValidity("emptyCudKeywords",n),n&&(p.rule.custom_user_data_values=p.cud_free_text_values.join(",")),p.rule.free_text_match_type=p.cud_free_text_variant))}}(e):p.rule.rule_data_type_id===o.rule_data_types.email_domain?function(e){var t=0<p.email_domains.length;{e.$setValidity("emptyEmailDomains",t),t&&(p.rule.email_domain=p.email_domains.join(","),t=p.rule.email_domain.length<255,e.$setValidity("longEmailDomains",t))}}(e):p.rule.rule_data_type_id===o.rule_data_types.membership_type&&function(e){var t=0<p.selected_membership_types.length;e.$setValidity("emptyMembershipType",t),t&&(p.rule.membership_type_id=p.selected_membership_types[0].id)}(e);0<p.selected_groups.length&&(p.rule.group_id=p.selected_groups[0].id);e.$valid&&(p.rule_target==o.rules_apply_types.all?u.confirm(o.showMessage("lup.auto_assign_rules.apply_confirmation.title"),o.showMessage("lup.auto_assign_rules.apply_confirmation.text")).then(function(e){m()}):m())},p.cancel=function(){n.close()},p.fetchGroups=function(e){var t=c.defer();return l.get("/groups.json",{params:{search:e.$query,page:e.$page}}).success(function(e){t.resolve(e.groups.data)}).error(function(){t.reject("Failed to get question pools")}),t.promise},p.fetchMembershipTypes=function(e){var t=c.defer();return l.get("/settings/users/auto_assign_rules/membership_types.json",{params:{search:e.$query,page:e.$page}}).success(function(e){t.resolve(e.membership_types.data)}).error(function(){t.reject("Failed to get question pools")}),t.promise},p.fetchCustomUserData=function(e){var t=c.defer();return l.get("/settings/users/auto_assign_rules/cud_definitions.json",{params:{search:e.$query,page:e.$page}}).success(function(e){t.resolve(e.cud_definitions.data)}).error(function(){t.reject("Failed to get question pools")}),t.promise},p.fetchCudValues=function(t){var e=p.selected_cud_definition[0].predefined_values.split(",");return _.filter(e,function(e){return-1<e.toLowerCase().indexOf(t.$query.toLowerCase())})},p.afterSelectCudDefinitionItem=function(){p.selected_cud_definition[0].predefined_values?(g(),p.showCudPredefinedValues=!0):(f(),p.showCudFreeTextValues=!0)},p.hideCudValueItems=function(){g(),f()},p.validateFreeTextValues=function(e){var t={items:e,result:!0};{var n;0<p.selected_cud_definition.length&&(p.selected_cud_definition[0].field_type===o.custom_data_field_types.decimal||p.selected_cud_definition[0].field_type===o.custom_data_field_types.integer)&&(n=/^\d+(\.\d+)?$/,_.filter(e,function(e){return e.match(n)}).length<e.length&&(t={result:!1,message:o.showMessage("lup.auto_assign_rules.validation_msgs.number")}))}return t},t.$watch("vm.rule_target",function(e,t){e!=t&&(p.save_button=e==o.rules_apply_types.new?o.showMessage("save"):o.showMessage("lup.auto_assign_rules.save_and_apply"))})}h.module("lu").controller("AutoAssignRulesEditController",e),e.$inject=["$rootScope","$scope","$modalInstance","LupHelper","rule","ruleData","membershipTypesEnabled","AutoAssignRulesFactory","$http","$q","$luPopover"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this;function c(){return!angular.equals(l.rulesFactory.defaultFilterValues(),l.filterData)}l.lupHelper=t,l.filterParams=r,l.rulesFactory=new n,l.save=function(){e.close({data:l.filterData,excluded_keys:"selectedGroup",isFilterApplied:c(),fetchData:!angular.equals(l.initState,l.filterData)})},l.cancel=function(){l.filterData=l.initState,e.close({data:l.filterData,isFilterApplied:c(),fetchData:!1})},l.clear=function(){l.filterData=l.rulesFactory.defaultFilterValues(),l.filterData.filterType=l.initState.filterType},l.isFilterApplied=!1,l.fetchGroups=function(e){var t=a.defer();return i.get("/groups.json",{params:{search:e.$query,page:e.$page}}).success(function(e){t.resolve(e.groups.data)}).error(function(){t.reject("Failed to get question pools")}),t.promise},l.customSelectFn=s.groupCustomSelectFn,l.sFselectOptions=[{value:0,title:l.lupHelper.showMessage("lup.salesforce.show_all")},{value:l.lupHelper.salesForceAssignRules.objectTypes.user,title:l.lupHelper.showMessage("lup.salesforce.salesforce_users")},{value:l.lupHelper.salesForceAssignRules.objectTypes.contact,title:l.lupHelper.showMessage("lup.salesforce.sf_tip_title")}],l.aaRselectOptions=[{value:0,title:l.lupHelper.showMessage("lup.salesforce.show_all")},{value:l.lupHelper.rule_data_types.custom_user_data,title:l.lupHelper.showMessage("lup.auto_assign_rules.data_types.custom_user_data")},{value:l.lupHelper.rule_data_types.all_users,title:l.lupHelper.showMessage("lup.auto_assign_rules.data_types.all_users")},{value:l.lupHelper.rule_data_types.email_domain,title:l.lupHelper.showMessage("lup.settings.email")},{value:l.lupHelper.rule_data_types.membership_type,title:l.lupHelper.showMessage("lup.auto_assign_rules.data_types.membership_type")}],o?(l.filterData=o,l.initState=angular.copy(o)):(l.initState=l.rulesFactory.defaultFilterValues(),l.filterData=l.rulesFactory.defaultFilterValues())}angular.module("lu").controller("AutoAssignRulesFilterController",e),e.$inject=["$modalInstance","LupHelper","AutoAssignRulesFactory","filterData","filterParams","$q","$http","usersFilteringOptionsService"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p,m){var f=new l,g=new c,h=this,b=t.get();function v(){var e={};e.params=n.get(),f.getRules(e).then(function(e){h.rules=e.data.rules,h.maxRules=e.data.max_rules})}function w(t){h.filterType===h.lupHelper.autoAssignRules.filterType.autoAssignRules?!t&&h.aarCounter>=h.maxRules?i.notify("",s.showMessage("lup.auto_assign_rules.max_rules_reached",{max_rules:h.maxRules})):y(t).then(function(e){a.open({templateUrl:"/tc/auto_assign_rules/edit.html",controller:"AutoAssignRulesEditController as vm",size:"md",resolve:{rule:function(){return t},ruleData:function(){return e},membershipTypesEnabled:function(){return h.membershipTypesEnabled}}}).result.then(function(t){var e;t&&"updated"===t.action?(e=_.indexOf(h.rules.data,_.find(h.rules.data,function(e){return e.id==t.rule.id})),h.rules.data[e]=t.rule):t&&"saved"===t.action&&(h.aarCounter+=1,v())})}):!t&&h.sfaarCounter>=h.maxSFRules?i.notify("",s.showMessage("lup.auto_assign_rules.max_rules_reached",{max_rules:h.maxSFRules})):y(t).then(function(e){a.open({templateUrl:"/tc/sales_force_assign_rules/edit.html",controller:"SalesForceAssignRulesEditController as vm",size:"md",resolve:{rule:function(){return t},sfDefinitions:function(){return h.sfDefinitions}}}).result.then(function(e){e&&(h.exposedFunction.fetch(),"created"===e.action&&(h.sfaarCounter+=1),a.open({templateUrl:"/tc/sales_force_assign_rules/sync_rule_modal.html",controller:"SalesForceAssignRuleSync as vm",size:"sm"}).result.then(function(){g.sync(e.rule_id)}))})})}function y(e){var t=d.defer();return e?h.filterType===h.lupHelper.autoAssignRules.filterType.autoAssignRules?f.getRuleData(e.id).then(function(e){t.resolve(e.data.rule_data.attributes)},function(){t.reject("Failed to retrieve rule data"),u.error("Failed to retrieve rule data")}):h.lupService.getSFDefinitions(h.sfDefinitions,e.sf_object_type_id,e.attribute_type,null,null,g,!1).then(function(e){t.resolve(e)},function(){t.reject("Failed to retrieve rule data"),u.error("Failed to retrieve rule data")}):t.resolve(null),t.promise}function M(){h.filterType===h.lupHelper.autoAssignRules.filterType.autoAssignRules?(h.rules=b.rules,h.stateMessages={null_state_title:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.null_state.title",{name:h.lupHelper.showMessage("lup.auto_assign_rules.title")}),null_state_text:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.null_state.text",{name:h.lupHelper.showMessage("lup.auto_assign_rules.new_rule")}),empty_state_title:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.empty_state.title",{name:h.lupHelper.showMessage("lup.auto_assign_rules.new_rule")}),empty_state_text:h.lupHelper.showMessage("lup.forums.all_posts.empty_state_text"),new_rule_button_text:h.lupHelper.showMessage("lup.auto_assign_rules.new_rule")}):h.stateMessages={null_state_title:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.null_state.title",{name:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.null_state.name")}),null_state_text:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.null_state.text",{name:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.new_salesforce_rule")}),empty_state_title:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.empty_state.title",{name:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.null_state.name")}),empty_state_text:h.lupHelper.showMessage("lup.forums.all_posts.empty_state_text"),new_rule_button_text:h.lupHelper.showMessage("lup.salesforce.sales_force_rules.new_salesforce_rule")}}function S(){a.open({templateUrl:"/tc/auto_assign_rules/dynamic-rules-steps.html",size:"md",controller:"AutoAssignRulesDrInfoController",controllerAs:"vm",resolve:{downloadAAR:function(){return h.downloadAAR}}})}function C(){h.dynamicRulesAllowed&&!h.dynamicRulesEnabled&&S()}h.lupHelper=s,h.lupService=p,h.rules=b.rules,h.maxRules=b.max_rules,h.maxSFRules=b.max_sf_rules,h.aarCounter=b.total_rules_number,h.membershipTypesEnabled=b.membership_types_enabled,h.salesForceEnabled=b.sales_force_enabled,h.salesForceApiEnabled=b.sales_force_api_enabled,h.dynamicRulesEnabled=b.dynamic_rules_enabled,h.dynamicRulesAllowed=b.dynamic_rules_allowed,h.autoAssignRulesEnabled=b.auto_assign_rules_enabled,h.filterType=h.autoAssignRulesEnabled?h.lupHelper.autoAssignRules.filterType.autoAssignRules:h.lupHelper.autoAssignRules.filterType.salesForceRules,h.sfDefinitions=[],h.filterURL="/settings/users/auto_assign_rules.json",h.filterController="AutoAssignRulesFilterController as vm",h.filterTemplate="/tc/auto_assign_rules/auto-assign-rules-filter.html",h.sfaarCounter=b.total_sf_rules_number,h.ruleTypeName=function(e){return h.filterType===h.lupHelper.autoAssignRules.filterType.autoAssignRules?function(e){var t=s.showMessage("lup.auto_assign_rules.data_types.custom_user_data");switch(e){case s.rule_data_types.custom_user_data:t=s.showMessage("lup.auto_assign_rules.data_types.custom_user_data");break;case s.rule_data_types.all_users:t=s.showMessage("lup.auto_assign_rules.data_types.all_users");break;case s.rule_data_types.email_domain:t=s.showMessage("lup.auto_assign_rules.data_types.email_domain");break;case s.rule_data_types.membership_type:t=s.showMessage("lup.auto_assign_rules.data_types.membership_type")}return t}(e.rule_data_type_id):function(e){var t=s.showMessage("lup.salesforce.rule_data_types.standard_and_custom_fields");switch(e){case h.lupHelper.salesForceAssignRules.objectAttributeTypes.roles:t=s.showMessage("lup.salesforce.rule_data_types.role_hierarchy");break;case h.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields:t=s.showMessage("lup.salesforce.rule_data_types.standard_and_custom_fields")}return t}(e.attribute_type)},h.disableAAR=function(){a.open({templateUrl:"/tc/auto_assign_rules/auto-assign-rules-deactivate.html",size:"md",controller:"AutoAssignRulesDisableController",controllerAs:"vm"})},h.drSteps=S,h.show_drSteps=C,h.createEditRule=w,h.syncRule=function(e){i.confirm(h.lupHelper.showMessage("lup.salesforce.sales_force_rules.sync_confirm_modal.title",{rule_name:e.name}),h.lupHelper.showMessage("lup.salesforce.sales_force_rules.sync_confirm_modal.text")).then(function(){g.sync(e.id)})},h.deleteRule=function(t,n){i.confirm(s.showMessage("lup.auto_assign_rules.delete_rule.title",{rule_name:t.name}),s.showMessage("lup.auto_assign_rules.delete_rule.text")).then(function(e){h.filterType===s.autoAssignRules.filterType.autoAssignRules?f.deleteRule(t.id).then(function(){h.aarCounter--,h.rules.meta.next_page?h.exposedFunction.fetch():h.rules.data.splice(n,1)}):g.deleteRule(t.id).then(function(){h.sfaarCounter--,h.rules.meta.next_page?h.exposedFunction.fetch():h.rules.data.splice(n,1)})})},h.loadData=v,h.filterByType=function(e){h.filterType=e,M(),h.filterType=h.filterType;var t=f.defaultFilterValues();t.filterType=e,h.exposedFunction.changeFilterData(t,!1,!0,1).then(function(e){h.rules=e})},h.downloadAAR=function(){a.open({templateUrl:"/tc/auto_assign_rules/auto-assign-rules-download.html",size:"md",controller:"AutoAssignRulesDownloadController",controllerAs:"vm",resolve:{disableAARSecondStep:function(){return h.disableAARSecondStep}}})},h.disableAARSecondStep=function(){a.open({templateUrl:"/tc/auto_assign_rules/auto-assign-rules-disable-second-step.html",size:"md",controller:"AutoAssignRulesDisableSecondStepController",controllerAs:"vm",resolve:{disableAAR:function(){return h.disableAAR}}})},h.sortOptions=[{label:s.showMessage("lup.filters.created_at"),value:"created_at.desc",default:!0,class:"select--ico-latest-first"},{label:s.showMessage("lup.filters.oldest_first"),value:"created_at.asc",class:"select--ico-oldest-first"},{label:s.showMessage("lup.filters.rule_name_az"),value:"name.asc",class:"select--ico-abc-asc"},{label:s.showMessage("lup.filters.rule_name_za"),value:"name.desc",class:"select--ico-abc-desc"},{label:s.showMessage("lup.filters.group_name_asc"),value:"group_title.asc",class:"select--ico-abc-asc"},{label:s.showMessage("lup.filters.group_name_desc"),value:"group_title.desc",class:"select--ico-abc-desc"}],h.exposedFunction={clearFiltersImplementation:function(){var e={filterData:f.defaultFilterValues(),clearFiltersIndicator:!0,updateFilterData:!0};e.filterData.filterType=h.filterType,h.exposedFunction.fetchDataByCustomParams(e).then(function(e){h.rules=e})},isFilterApplied:function(e){if(!e)return!1;var t=f.defaultFilterValues();return t.filterType=h.filterType,!angular.equals(t,e)}},C(),h.autoAssignRulesEnabled||(h.exposedFunction=angular.extend({},{defaultFilterValues:function(){return{filterCreatedAfter:"",filterCreatedBefore:"",filterType:h.filterType,selectedGroup:[],groups:[],selectedOption:0}}},h.exposedFunction)),o.breadcrumbs=[{title:s.showMessage("lup.tabs.settings"),url:"/settings"},{title:s.showMessage("lup.tabs.users")+"/"+(h.autoAssignRulesEnabled?s.showMessage("lup.auto_assign_rules.title"):s.showMessage("lup.sales_force_rules.title")),url:"/settings/users/auto_assign_rules"}],M(),e.$on("newRule",function(){h.filterType=h.lupHelper.autoAssignRules.filterType.autoAssignRules,w()}),e.$on("newSFRule",function(){h.filterType=h.lupHelper.autoAssignRules.filterType.salesForceRules,w()})}angular.module("lu").controller("AutoAssignRulesIndexController",e),e.$inject=["$scope","StorageFactory","paramsService","$rootScope","$window","$modal","$luPopover","LupHelper","AutoAssignRulesFactory","SalesForceAssignRulesFactory","$log","$q","LupService","toastr"]}(),function(d){"use strict";function e(e,t,n,o,r,a,i,s,l){var c=new l,u=this;u.lupHelper=s,u.showWaiting=!1,u.badges=o,u.learning_path=r,u.selected_badges=i||[],u.save=function(e){e.$setValidity("noBadgeSelected",0<u.selected_badges.length),u.award.on_completion?(e.$setValidity("invalidAchievedOverValue",!0),e.$setValidity("percentageNotUnique",!0),u.greater_than_or_equal=null):(e.$setValidity("invalidAchievedOverValue",s.checkPercentageValidity(u.award.greater_than_or_equal)),s.checkPercentageValidity(u.award.greater_than_or_equal)&&e.$setValidity("percentageNotUnique",function(){var e=_.select(a,function(e){return!u.award.id||u.award.id!=e.id});return _.every(e,function(e){return u.award.greater_than_or_equal!=e.greater_than_or_equal})}()));e.$valid&&(u.award.badge_id=u.selected_badges[0].id,u.award.name=u.selected_badges[0].name,u.award.points=u.selected_badges[0].points,u.award.image_url=u.selected_badges[0].image_url,u.showWaiting=!0,u.award.id?c.editBadgeLearningPath({award:u.award},u.learning_path.id).then(function(){t.close({action:"updated",award:u.award})},function(){u.showWaiting=!1}):c.createBadgeLearningPath({award:u.award},u.learning_path.id).then(function(e){e=JSON.parse(e.json_service).learning_path_badge.attributes;t.close({action:"saved",award:e})},function(){u.showWaiting=!1}))},u.cancel=function(){t.close()},u.fetchBadges=function(t){return _.filter(d.copy(o),function(e){return-1<e.name.toLowerCase().indexOf(t.$query.toLowerCase())})},u.award=n?d.copy(n):{id:null,is_enabled:!1,badge_id:null,on_completion:0===u.learning_path.number_scoreables,greater_than_or_equal:null}}d.module("lu").controller("BadgeLearningPathsEditController",e),e.$inject=["$scope","$modalInstance","award","badges","learning_path","lp_badges","lpBadge","LupHelper","BadgeLearningPathsFactory"]}(window.angular),function(){"use strict";function e(n,t,e,r,a,i,o,s,l){var c=new o,u=this;u.learning_path=t.getKey("learning_path").attributes,u.badges=t.getKey("badges"),u.lp_badges=t.getKey("lp_badges").data,u.lupHelper=i,u.showEditAward=function(n,t){if(!n&&u.lp_badges.length===i.gamification_limitations.max_learnign_awards)return void a.notify("",i.showMessage("lup.gamification.learning_awards.max_awards_reached"));var e=null;{var o;n&&(o=_.find(u.badges.data,function(e){return e.id===n.badge_id}),e=[o])}r.open({templateUrl:"/tc/badge_learning_paths/edit.html",controller:"BadgeLearningPathsEditController as vm",size:"md",resolve:{award:function(){return n},badges:function(){return e=u.badges.data,t=n,_.reject(e,function(e){return _.contains(_.map(u.lp_badges,function(e){return e.badge_id}),e.id)&&(!t||e.id!=t.badge_id)});var e,t},learning_path:function(){return u.learning_path},lp_badges:function(){return u.lp_badges},lpBadge:function(){return e}}}).result.then(function(e){e&&"updated"===e.action?u.lp_badges[t]=e.award:e&&"saved"===e.action&&u.lp_badges.push(e.award)})},u.award_badge=function(t){return _.find(u.badges.data,function(e){return e.id==t})},u.deleteAward=function(t,e){a.confirm(i.showMessage("lup.confirm"),i.showMessage("lup.gamification.learning_awards.delete_confirmation")).then(function(e){c.deleteBadgeLearningPath(u.learning_path.id,t.id).then(function(){u.lp_badges=_.without(u.lp_badges,_.findWhere(u.lp_badges,{id:t.id}))})})},u.save=function(e){var t={id:u.learning_path.id,data:{learning_path_form:{do_course_badges:u.learning_path.do_course_badges}}};s.doUpdateLP(t).then(function(){e.$setPristine()})},u.cancel=function(e){u.learning_path=t.getKey("learning_path").attributes,e.$setPristine()},u.learningPath=t.getKey("learning_path").attributes,u.courses=t.getKey("courses_for_view"),u.selectedCourses=u.courses.data,u.showAction=!!u.learningPath.id,n.ariaLabel=i.showMessage("lup.a11y.learning_badges_main"),n.ariaLabelSide=i.showMessage("lup.a11y.learning_badges_info_crd"),n.activeBadgeDDM={},n.toggled=function(e,t){n.activeBadgeDDM[t]=e},e.breadcrumbs=[{title:i.showMessage("learningpaths.learning_paths"),url:"/learning_paths"},{title:u.learning_path.name,url:"/learning_paths/"+u.learning_path.id},{title:i.showMessage("lup.gamification.learning_awards.title"),url:"/learning_paths/"+u.learning_path.id+"/learning_awards"}],e.$on("publishPath",function(){l.publishPath(u)}),e.$on("deletePath",function(){l.deletePath(u)}),e.$on("addNewCourseToLP",function(){l.addCourseToPath(u)}),e.$on("archivePath",function(){l.archivePath(u)})}window.angular.module("lu").controller("BadgeLearningPathsIndexController",e),e.$inject=["$scope","StorageFactory","$rootScope","$modal","$luPopover","LupHelper","BadgeLearningPathsFactory","learnUponLearningPath","LearningPathActionsFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a){this.LupHelper=n,this.badges=r,this.cancel=function(){o.close()},this.redirectToAllAchivments=function(){a.location="/my-awards"}}angular.module("lu").controller("AwardedBadgesController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance","badges","$window"]}(),function(_){"use strict";function e(e,t,n,o,r,a,i,s,l,c){var u=this,d=new s;function p(){var e={badge_id:u.award.badge_id,action_type_id:u.award.action_type_id};n&&o&&(e.user_id=n.attributes.id),d.getItemsForAward(e).then(function(){u.items=d.data.items.data})}u.award=t,u.admin_view=o,u.items=[],u.lupHelper=r,u.loadData=p,u.modalTitle=function(){switch(u.award.action_type_id){case r.badge_event_types.daily_learning:return r.showMessage("lup.gamification.award_for_titles.daily_learning");case r.badge_event_types.purchase:return r.showMessage("lup.gamification.award_items_title.purchase");case r.badge_event_types.views_resource:return r.showMessage("lup.gamification.award_items_title.views_resource");case r.badge_event_types.self_enroll:return r.showMessage("lup.gamification.award_items_title.self_enrolled");case r.badge_event_types.approve_ext_credit:return r.showMessage("lup.gamification.award_items_title.credit_approved");case r.badge_event_types.course_completion:case r.badge_event_types.learning_path_completion:return r.showMessage("lup.gamification.award_items_title.completion_action");case r.badge_event_types.level_achieved:return r.showMessage("lup.gamification.award_items_title.level_reached")}},u.formatDate=function(e){return i("displayDateTime")(e,"YYYY-MM-DD")},u.close=function(){a.close()},u.revokeAwards=function(){n&&0<u.selectedItems.length&&l.confirm(r.showMessage("lup.confirm"),r.showMessage("lup.gamification.are_you_sure_you_want_to_delete_selected_awards")).then(function(e){var t=[];_.forEach(u.selectedItems,function(e){t.push(e.id)}),d.destroyMultiple(n.attributes.id,t).then(function(){setTimeout(function(){c.location="/users/:id/achievements".replace(/:id/,n.attributes.id)},500)})})},u.toggleSelection=function(e){var t=u.selectedItems.indexOf(e);-1<t?u.selectedItems.splice(t,1):u.selectedItems.push(e)},u.selectedItems=[],p()}_.module("lu").controller("BadgeUsersListController",e),e.$inject=["$rootScope","award","user","admin_view","LupHelper","$modalInstance","$filter","BadgeUsersFactory","$luPopover","$window"]}(window.angular),function(){"use strict";function e(n,o,e,t,r,a,i,s,l,c,u){var e=e.get(),d=this,p=new a,_=new u;function m(e){s.open({templateUrl:"/tc/badges/create_edit_badge.html",controller:"ShowCreateEditBadgeController",controllerAs:"vm",size:"lg",resolve:{badge:function(){return e},defaultImages:function(){return d.defaultImages}}}).result.then(function(e){e&&"save"===e.action&&(e=JSON.parse(e.badge_data),d.loadData(!1),d.badge_id=e.currently_created_badge_id,d.badge_image_reference=e.badge_image_reference,d.badge_counts=e.badge_counts,d.badge_image_reference?function t(){var e={hideSpinner:!0};return e.url="/download_jobs/"+d.badge_image_reference+"/status.json",_.get("download_jobs",e,d.badge_image_reference).then(function(){var e=_.data.job;e&&e.status_id!==o.lupJobStatuses.completed?d.timeoutPromise=l(function(){t()},2e3):(d.loadData(!0),f(d.badge_counts))})}():(d.loadData(!0),f(d.badge_counts)))})}function f(e){d.all_badges_number=e.all_badges_number,d.learning_badges_number=e.learning_badges_number,d.activity_badges_number=e.activity_badges_number,d.level_badges_number=e.level_badges_number}d.filter_badges_by=0,e.filter_badges_by&&(d.filter_badges_by=e.filter_badges_by),d.badge_id=null,n.activeBadgeDDM={},n.toggled=function(e,t){n.activeBadgeDDM[t]=e},d.sortOptions=[{label:o.showMessage("lup.filters.created_at"),value:"created_at.desc",default:!0},{label:o.showMessage("lup.filters.oldest_first"),value:"created_at.asc"},{label:o.showMessage("lup.filters.name_az"),value:"name.asc"},{label:o.showMessage("lup.filters.name_za"),value:"name.desc"},{label:o.showMessage("lup.filters.points_asc"),value:"points.asc"},{label:o.showMessage("lup.filters.points_desc"),value:"points.desc"}],d.LupHelper=o,d.badges=e.badges,d.all_badges_number=e.badge_counts.attributes.all_badges_number,d.learning_badges_number=e.badge_counts.attributes.learning_badges_number,d.activity_badges_number=e.badge_counts.attributes.activity_badges_number,d.level_badges_number=e.badge_counts.attributes.level_badges_number,d.create_new=e.create_new,d.defaultImages=e.defaultImages,d.filterBadgesList=function(e){n.triggerFocusOnMain=!1,n.$$postDigest(function(){n.triggerFocusOnMain=!0,n.$digest()}),r.merge({filter_by:e}),d.filter_badges_by=e,d.loadData(!1)},d.loadData=function(e){r.merge({filter_by:d.filter_badges_by});var t={};t.params=r.get(),p.getBadges(t).then(function(){d.badges=p.data.badges,e&&(d.badge_id=null),n.triggerFocusOnMain=!0})},d.showCreateEditBadge=m,d.delete=function(e){p.destroy(e).then(function(e){d.loadData()})},d.onFocusTrapDeactivate=function(){n.triggerFocusOnMain=!1,n.$digest()},i.$on("newBadge",function(){d.showCreateEditBadge(null)}),d.create_new&&m(null)}angular.module("lu").controller("BadgesIndexController",e),e.$inject=["$scope","LupHelper","StorageFactory","$window","paramsService","BadgesFactory","$rootScope","$modal","$timeout","Upload","learnUponApi"]}(),function(){"use strict";function e(r,e,t,a,n,o,i,s,l,c,u,d){var p=this,_=new i,m="";function f(n){s.show("badge-spinner");var e=null;"update"==n&&(e={data:{resource_id:p.badge.id}}),c.getData(p.LupHelper.fileUploads.types.badge,function(t){u(function(){var e=t.data.signature_data.attributes;p.errorMsg=null,function(t,n,o){if(!t&&!p.badge)return;if(r.errorMsg=null,!t&&p.badge)return"update"===o?_.update(p.badge,t).then(function(e){a.close({action:"save",badge_data:e.data.json_service})}):"create"===o&&_.create(p.badge,t).then(function(e){a.close({action:"save",badge_data:e.data.json_service})});c.uploadFiles(t,n,function(e){u(function(){t.result=e.data}),p.badge.uuid=n.guid,p.badge.image_file_name=t.name,p.badge.output_url=n.folder_path+t.name,p.badge.alt_tag=p.alt_tag,"update"===o?_.update(p.badge,t).then(function(e){a.close({action:"save",badge_data:e.data.json_service})}):"create"===o&&_.create(p.badge,t).then(function(e){a.close({action:"save",badge_data:e.data.json_service})})},function(e){0<e.status&&(p.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(p.badgeImage,e,n)})},function(e){},e)}p.choosen_image="",p.LupHelper=t,p.saveButtonLabel=function(){var e=t.showMessage("components.add");p.badge.id&&(e=t.showMessage("billing.update"));return e},p.validateBadge=function(){var e=!0;p.badge.points||p.badge.badge_type_id==p.LupHelper.badge_types.level?p.badge.badge_type_id==p.LupHelper.badge_types.level||t.checkPositiveIntegerExistence(p.badge.points)?p.badge.badge_type_id==p.LupHelper.badge_types.level||t.numberInRange(p.badge.points,1,t.gamification_limitations.badge_max_points)?p.validationErrors.points_error=null:(p.validationErrors.points_error=t.showMessage("lup.coupons.max_usage_count_value",{max_value:t.gamification_limitations.badge_max_points}),e=!1):(p.validationErrors.points_error=t.showMessage("lup.badges.validation.points_can_only_be_a_whole_number"),e=!1):(p.validationErrors.points_error=t.showMessage("lup.badges.validation.points_cannot_be_blank"),e=!1);p.badge.name?p.badge.name.length>t.gamification_limitations.badge_name_length?(p.validationErrors.name_length_error=t.showMessage("lup.badges.validation.badge_name_too_long",{limit:t.gamification_limitations.badge_name_length}),p.validationErrors.no_name_error=null,e=!1):(p.validationErrors.no_name_error=null,p.validationErrors.name_length_error=null):(p.validationErrors.no_name_error=t.showMessage("lup.badges.validation.name_cannot_be_blank"),p.validationErrors.name_length_error=null,e=!1);p.badgeImage||p.badge.default_image_path||p.badge.image_file_name?p.validationErrors.image_error=null:(p.validationErrors.image_error=t.showMessage("lup.badges.validation.badge_image_cannot_be_blank"),e=!1);return e},p.save=function(){p.validateBadge()&&(p.badge.id?p.badge.name!==n.name||p.badge.image_url!==n.image_url||p.badgeImage&&p.badgeImage.name!==n.image_name?l.confirm(t.showMessage("lup.confirm"),t.showMessage("lup.badges.changing_name_or_points_warning")).then(function(e){f("update")}):f("update"):f("create"))},p.cancel=function(){a.close()},p.badge=angular.copy(n),p.defaultImages=o,p.validationErrors={},p.cancelChooseImageGrid=function(){p.badge.default_image_path=m,p.showGrid=!1},p.showChooseImageGrid=function(){p.showGrid=!0},p.chooseImage=function(){p.badge.default_image_path=p.choosen_image,p.badge.image_url=p.choosen_image,p.badgeImage=null,p.showGrid=!1},p.preChooseImage=function(e){p.choosen_image=e},p.showGrid=!1,p.maxFileSize=function(){return"5MB"},p.acceptedFiles=function(){return".jpg,.jpeg,.png"},p.clearBadgeImage=function(){p.badgeImage=null},p.openCropper=function(e){{e&&d.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 1},cropperImageSize:function(){return t.uiCropperConfig.imageSize}}}).result.then(function(e){e&&e.image_for_upload&&(p.alt_tag=e.alt_tag,(e=e.image_for_upload)&&(p.badgeImage=e))})}},p.alt_tag=null,p.badge?(m=n.default_image_path,p.choosen_image=n.default_image_path):(p.badge={},p.badge.badge_type_id=t.badge_types.activity),p.badge_types=[],p.badge_types.push({id:t.badge_types.activity,title:t.translateBadgeType(t.badge_types.activity)}),p.badge_types.push({id:t.badge_types.learning,title:t.translateBadgeType(t.badge_types.learning)}),p.badge_types.push({id:t.badge_types.level,title:t.translateBadgeType(t.badge_types.level)})}angular.module("lu").controller("ShowCreateEditBadgeController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance","badge","defaultImages","BadgesFactory","spinnerService","$luPopover","s3HelperFactory","$timeout","$modal"]}(),function(d){"use strict";function e(e,t,n,o,r,a,i,s,l){var c=new l,u=this;u.lupHelper=s,u.showWaiting=!1,u.badges=o,u.course=r,u.selected_badges=i||[],u.save=function(e){e.$setValidity("noBadgeSelected",0<u.selected_badges.length),u.award.on_completion?(e.$setValidity("invalidAchievedOverValue",!0),e.$setValidity("percentageNotUnique",!0),u.greater_than_or_equal=null):(e.$setValidity("invalidAchievedOverValue",s.checkPercentageValidity(u.award.greater_than_or_equal)),s.checkPercentageValidity(u.award.greater_than_or_equal)&&e.$setValidity("percentageNotUnique",function(){var e=_.select(a,function(e){return!u.award.id||u.award.id!=e.id});return _.every(e,function(e){return u.award.greater_than_or_equal!=e.greater_than_or_equal})}()));e.$valid&&(u.award.badge_id=u.selected_badges[0].id,u.award.name=u.selected_badges[0].name,u.award.points=u.selected_badges[0].points,u.award.image_url=u.selected_badges[0].image_url,u.showWaiting=!0,u.award.id?c.editBadgeCourse({award:u.award},u.course.id).then(function(){t.close({action:"updated",award:u.award})},function(){u.showWaiting=!1}):c.createBadgeCourse({award:u.award},u.course.id).then(function(e){e=JSON.parse(e.json_service).course_badge.attributes;t.close({action:"saved",award:e})},function(){u.showWaiting=!1}))},u.cancel=function(){t.close()},u.fetchBadges=function(t){return _.filter(d.copy(o),function(e){return-1<e.name.toLowerCase().indexOf(t.$query.toLowerCase())})},u.award=n?d.copy(n):{id:null,is_enabled:!1,badge_id:null,on_completion:0===u.course.number_scoreables,greater_than_or_equal:null}}d.module("lu").controller("BadgeCoursesEditController",e),e.$inject=["$scope","$modalInstance","award","badges","course","course_badges","courseBadge","LupHelper","BadgeCoursesFactory"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c){var u,d=new s,p=new c,m=this;m.course=t.getKey("course").attributes,m.badges=t.getKey("badges"),m.course_badges=t.getKey("course_badges").data,m.is_admin=t.getKey("is_admin"),m.enrollment_approvals_enabled=t.getKey("enrollment_approvals_enabled"),m.lupHelper=i,m.showEditAward=function(n,t){if(!n&&m.course_badges.length===i.gamification_limitations.max_learnign_awards)return void a.notify("",i.showMessage("lup.gamification.learning_awards.max_awards_reached"));var e=null;{var o;n&&(o=_.find(m.badges.data,function(e){return e.id===n.badge_id}),e=[o])}r.open({templateUrl:"/tc/badge_courses/edit.html",controller:"BadgeCoursesEditController as vm",size:"md",resolve:{award:function(){return n},badges:function(){return e=m.badges.data,t=n,_.reject(e,function(e){return _.contains(_.map(m.course_badges,function(e){return e.badge_id}),e.id)&&(!t||e.id!=t.badge_id)});var e,t},course:function(){return m.course},course_badges:function(){return m.course_badges},courseBadge:function(){return e}}}).result.then(function(e){e&&"updated"===e.action?m.course_badges[t]=e.award:e&&"saved"===e.action&&m.course_badges.push(e.award)})},m.award_badge=function(t){return _.find(m.badges.data,function(e){return e.id==t})},m.deleteAward=function(t,e){a.confirm(I18n.t("lup.confirm"),i.showMessage("lup.gamification.learning_awards.delete_confirmation")).then(function(e){d.deleteBadgeCourse(m.course.id,t.id).then(function(){m.course_badges=_.without(m.course_badges,_.findWhere(m.course_badges,{id:t.id}))})})},o.breadcrumbs=(u=p.getBreadcrumbTitle(m.course.name,m.course.version),[{title:i.showMessage("lup.tabs.courses"),url:"/courses"},{title:u,url:"/courses/"+m.course.id},{title:i.showMessage("lup.gamification.learning_awards.title"),url:"/courses/"+m.course.id+"/learning_awards"}]),o.ariaLabel=i.showMessage("lup.a11y.learning_badges_main"),o.ariaLabelSide=i.showMessage("lup.a11y.learning_badges_info_crd"),o.$on("publishCourse",function(){l.publishCourse(m)}),o.$on("createNewCourseVersion",function(){l.createNewCourseVersion(m)}),o.$on("archiveCourse",function(){l.archiveCourse(m)}),o.$on("embedCourse",function(){l.openEmbedCourseLinkModal(m.course.id)}),o.$on("deleteCourse",function(){l.deleteCourse(m)}),o.$on("cloneCourse",function(){l.createCourseCopy(m.course.id)}),o.$on("exportSignedEsignatureModules",function(){l.exportSignedEsignatureModules(m.course.id)})}window.angular.module("lu").controller("BadgeCoursesIndexController",e),e.$inject=["$scope","StorageFactory","paramsService","$rootScope","$modal","$luPopover","LupHelper","BadgeCoursesFactory","CourseActionFactory","CourseFactory"]}(),function(){"use strict";function e(e,t){var n=this;function o(){e.$apply(function(){n.changeCardBlock=!1}),t(function(){e.$apply(function(){n.changeCardBlock=!0})},10)}n.changeCardBlock=!0,n.reloadCreditCardBox=o,e.reloadCreditCardBox=o}angular.module("lu").controller("BillingsCreditCardController",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u,d,p,_,m,f){r.get();n.helper=a,n.showBillingInfo=!0,n.showInvoicesTab=!1,n.showChangePlan=!1,n.alreadyForced=!1,n.showConfirmPaymentInfo=!1,n.activeSubnavTab={text:I18n.t("billing.billing_info")},n.setBillingInfo=function(){n.showBillingInfo=!0,n.showInvoicesTab=!1,n.showChangePlan=!1,n.activeSubnavTab.text=I18n.t("billing.billing_info")},n.setInvoices=function(){n.showBillingInfo=!1,n.showInvoicesTab=!0,n.showChangePlan=!1,n.activeSubnavTab.text=I18n.t("billing.invoices")},n.displayPaymentInfo=function(e){n.showConfirmPaymentInfo=!!e,n.$apply()},s.displayPaymentInfo=n.displayPaymentInfo,s.luPopover=c,n.vatNumberChanged=function(){s.determine_show_hide_vat_pricings()},n.downloadCertificate=function(e,t,n){var o=new _,n={typeId:a.lupJobTypes.downloadCertificate,enrollment_id:e,for_course:t,user_id:n};o.initiateJob(n)},n.scormOrTinCanExitDetected=function(e){n.loadData();var t=new m;t.checkScormTinCanShowRequired(e).then(function(){t.data.enrollment&&t.data.show_leave_review&&l.showLeaveReviewDialog(t.data.enrollment.attributes,null)})}}angular.module("lu").controller("BillingsIndexController",e),e.$inject=["$scope","$log","$rootScope","LearnerDashboardFactory","StorageFactory","LupHelper","$sce","$window","EnrollmentHelper","$luPopover","paramsService","dialogs","UsersFactory","LupJobFactory","ReviewFactory","SocialSharingFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p,_,m,f){r.get();e.helper=a}angular.module("lu").controller("BillingsTestWebhookHookController",e),e.$inject=["$scope","$log","$rootScope","LearnerDashboardFactory","StorageFactory","LupHelper","$sce","$window","EnrollmentHelper","$luPopover","paramsService","dialogs","UsersFactory","LupJobFactory","ReviewFactory","SocialSharingFactory"]}(),function(){"use strict";function e(e,t,n,o){e.description=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("bundle_description_wysi");t.close({description:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("BundleAddDescriptionController",e),e.$inject=["$scope","$modalInstance","description","LupHelper"]}(),function(){"use strict";function e(o,e,t,n,r,a,i){o.helper=r,o.bundle=n,o.courses=[],o.coursesSelectedArray=[],o.courseSearch="",o.isSearching=!1,o.courseUpdateAttempted=!1,o.canShowNullState=!1,o.showWaiting=!1,o.courseSelected=function(e,t,n){o.coursesSelectedArray.push(e),o.courseSearch=""},o.removeCourse=function(e){o.coursesSelectedArray.splice(e,1)},o.fetchCoursesFromAPI=function(e){if(!o.isSearching)return o.isSearching=!0,t.get("/bundles/"+o.bundle.id+"/available-courses.json",{params:{search:e}}).then(function(e){return o.courses=e.data.courses,o.isSearching=!1,o.canShowNullState=!0,o.courses.data})},o.save=function(){o.canShowNullState=!1,o.showWaiting=!0;var e={add_courses:_.select(o.coursesSelectedArray,function(e){return!0})};o.courseUpdateAttempted=!0,o.courses=[],o.coursesSelectedArray=[],t.post("/bundles/"+o.bundle.id+"/add-courses.json",e).success(function(e){a.$broadcast("courseWasAdded"),i.location.reload()})},o.cancel=function(){e.close()}}angular.module("lu").controller("AddCoursesToBundleController",e),e.$inject=["$scope","$modalInstance","$http","bundle","LupHelper","$rootScope","$window"]}(),function(){"use strict";function e(e,n,o,r,a,t,i,s,l,c,u){var d=this;d.helper=t,d.bundle=i.getKey("bundle").attributes,d.association_membership_types=i.getKey("association_membership_types"),d.membership_pricings=i.getKey("membership_pricings"),d.unknown_enrollments=i.getKey("unknown_enrollments"),d.selectedMembershipType=-1,d.showFooterAction=!1,d.search="",d.store_url=i.getKey("store_url"),d.groups=i.getKey("groups"),d.validCapacityOnTrainings=i.getKey("valid_capacity_on_trainings"),e.breadcrumbs=[{title:d.helper.showMessage("lup.breadcrumbs.bundles.index"),url:"/bundles"},{title:d.bundle.name,url:"/bundles/:bundle_id".replace(/:bundle_id/,d.bundle.id)},{title:d.helper.showMessage("lup.breadcrumbs.bundles.sales"),url:"/bundles/:bundle_id/bundle-sales".replace(/:bundle_id/,d.bundle.id)}],d.setForm=function(e){d.theForm=e},d.formData={bundle:{apply_sales_tax:d.bundle.apply_sales_tax,sellable:d.bundle.sellable,price:d.bundle.price},membershipPrices:{}},d.membershipTypeUpdated=function(){!function(){var e={type_id:d.selectedMembershipType};c.post("/bundles/"+d.bundle.id+"/add_association_price.json",e).success(function(e){o.location.reload()}).error(function(e){o.location.reload()})}()},d.removeAssociationPrice=function(e,t){t={price_id:t};c.post("/bundles/"+e+"/remove_association_price.json",t).success(function(e){o.location.reload()}).error(function(e){o.location.reload()})},d.submitChanges=function(){spinnerService.showGroup("luSpinnerGlobal");var e=angular.isArray(d.groups)?d.groups:[];e=e.map(function(e){return{id:e.id,title:e.title}});var t={};t.data=d.formData,t.data.store_groups=e,t.id=d.bundle.id,n.doUpdateBundle(t).then(function(e){d.showFooterAction=!1})},d.cancel=function(){o.location="/bundles/"+d.bundle.id},d.getCode=function(e){var t="-";e.is_unknown&&(t=e.code);return t},d.getPurchasedBy=function(e){return e.purchaser_first_name||e.purchaser_last_name?e.purchaser_first_name+" "+e.purchaser_last_name:e.purchaser_username?e.purchaser_username:e.purchaser_email},d.getUsedBy=function(e){return e.is_unknown||e.used_by_pm_id?e.user_first_name||e.user_last_name?e.user_first_name+" "+e.user_last_name+" ("+(e.user_username?e.user_username:e.user_email)+")":e.user_username?e.user_username:e.user_email?e.user_email:"-":e.first_name||e.last_name?e.first_name+" "+e.last_name+"("+e.email+")":e.email?e.email:"-"},d.loadData=function(e){var t={};e=e||{},t.params=a.get(),t.url="/bundles/"+d.bundle.id+"/bundle-sales.json",void 0!==e.hideSpinner&&(t.hideSpinner=e.hideSpinner);d.isLoading=!0,n.getUnknownEnrollments(t).then(function(){d.unknown_enrollments=n.data.unknown_enrollments,d.search=n.data.search,r(function(){d.isLoading=!1},1e3)})},d.fetchGroups=u.fetchGroups,d.afterSelectGroup=function(e){d.showFooterAction=!0},d.afterRemoveGroup=function(e){d.showFooterAction=!0};var p=0;s.$watch(function(){return d.formData},function(e,t){0<p&&(d.showFooterAction=!0),p++},!0)}angular.module("lu").controller("BundlesBundleSalesController",e).directive("convertToNumber",function(){return{require:"ngModel",link:function(e,t,n,o){o.$parsers.push(function(e){return parseInt(e,10)}),o.$formatters.push(function(e){return""+e})}}}),e.$inject=["$rootScope","learnUponBundle","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$http","restrictByGroupService"]}(),function(){"use strict";function e(e,o,r,t,n,a,i,s,l,c,u){var d=this,i=i.get();d.helper=a,d.bundle=i.bundle.attributes,d.courses=i.courses,e.breadcrumbs=[{title:d.helper.showMessage("lup.breadcrumbs.bundles.index"),url:"/bundles"},{title:d.bundle.name,url:"/bundles/:bundle_id".replace(/:bundle_id/,d.bundle.id)},{title:d.helper.showMessage("lup.breadcrumbs.bundles.courses"),url:"/bundles/:bundle_id/courses".replace(/:bundle_id/,d.bundle.id)}],d.removeCourseFromBundle=function(t,n){var e=a.showMessage("course_bundles.are_your_sure_you_want_to_remove_the_course_from_this_bundle");u.confirm(a.showMessage("lup.confirm"),e).then(function(e){o.doRemoveCourseFromBundle(t,n).then(function(){r.location.reload()})})},e.$on("addNewCourse",function(){c.open({templateUrl:"/tc/bundles/add_courses.html",controller:"AddCoursesToBundleController",size:"lg",resolve:{bundle:function(){return d.bundle}}}).result.then(function(){s.contentWasAdded&&r.location.reload()})}),d.dragControlListeners={orderChanged:function(e){for(var t=[],n=0;n<d.courses.data.length;n++)t.push(d.courses.data[n].id);o.doReorderCourses(t,d.bundle.id)},allowDuplicates:!1}}angular.module("lu").controller("BundlesCoursesController",e),e.$inject=["$rootScope","learnUponBundle","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$modal","$luPopover"]}(),function(){"use strict";function e(e,r,n,a,t,o,i,s,l,c,u,d,p,m){var f=this,g=i.get();f.helper=o,s.Helper=o,s._=_,s.openCropper=function(e){{e&&u.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 1.5},cropperImageSize:function(){return f.helper.uiCropperConfig.imageSize}}}).result.then(function(e){var t;e&&e.image_for_upload&&(s.alt_tag=e.alt_tag,t=e.image_for_upload,e={data:{resource_id:f.bundle.id}},t&&(s.bundleImage=t,f.bundle_image_reference="1",m.getData(f.helper.fileUploads.types.bundle_image,function(t){a(function(){var e=t.data.signature_data.attributes;s.errorMsg=null,h(s.bundleImage,e)})},function(e){},e)))})}},f.bundle=g.bundle.attributes,f.thumbnail=g.thumbnail.attributes,f.preview_image_file_url=g.preview_image_file_url,g.bundle_images&&(f.bundle_images=g.bundle_images.data),f.is_admin=!1,f.auth_token_form=g.auth_token_form,f.showAction=!!f.bundle.id,f.formData={id:f.bundle.id,name:f.bundle.name,keywords:f.bundle.keywords,description:f.bundle.description},f.bundle_image_reference=i.getKey("bundle_image_reference"),f.bundle_image_reference&&b();i=[{title:f.helper.showMessage("lup.breadcrumbs.bundles.index"),url:"/bundles"}];function h(n,o){n&&(f.errorMsg=null,m.uploadFiles(n,o,function(e){a(function(){n.result=e.data});var t=r;return t.uuid=o.guid,t.image_file_name=n.name,t.output_url=o.folder_path+n.name,t.bundle_id=f.bundle.id,t.portal_id=f.bundle.portal_id,t.uploadImage().then(function(e){try{return f.bundle_image_reference=t.data.bundle_image_reference,void b()}catch(e){return void(f.bundle_image_reference=null)}})},function(e){0<e.status&&(f.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))}function b(){var e="/download_jobs/"+f.bundle_image_reference+"/status.json";return c.get(e,{}).then(function(e){e.data.job.status_id!==f.helper.lupJobStatuses.completed?f.timeoutPromise=a(function(){b()},2e3):(f.processingJobReference=null,n.location.reload())})}f.showAction?i.push({title:f.bundle.name,url:"/bundles/"+f.bundle.id}):i.push({title:f.helper.showMessage("lup.breadcrumbs.bundles.new_bundle"),url:"/bundles/new"}),e.breadcrumbs=i,e.$on("destroyBundle",function(){p.confirm(I18n.t("lup.confirm"),I18n.t("course_bundles.are_your_sure_you_want_to_delete_this_bundle")).then(function(e){l.showGroup("luSpinnerGlobal");var t={data:{}};t.data.bundle={},t.data.bundle.published_status_id="3",f.showAction&&(t.id=f.bundle.id,r.doUpdateBundle(t).then(function(e){n.location="/bundles/"}))})}),f.save=function(){var t=f.bundle_form;{var e;t.$valid&&(l.showGroup("luSpinnerGlobal"),(e={data:{}}).data.bundle={},e.data.bundle.name=f.formData.name,e.data.bundle.description=f.formData.description,e.data.bundle.keywords=f.formData.keywords,f.showAction?(e.id=f.bundle.id,r.doUpdateBundle(e).then(function(e){t.$setPristine()})):r.doSaveBundle(e).then(function(e){t.$setPristine()}))}},f.cancel=function(){n.location="/bundles"},f.setDescription=function(){var e=u.open({templateUrl:"/tc/bundles/add-bundle-description.html",controller:"BundleAddDescriptionController",size:"lg",resolve:{description:function(){return f.formData.description}}});e.opened.then(function(){a(function(){o.renderCKEditor({clear_all_previous_instances:!1,id:"bundle_description_wysi",add_image_upload:!1,save_button_action:"save_text_button",add_embedded_media:!1,width:"100%"})},100)}),e.result.then(function(e){e&&void 0!==e.description&&(f.formData.description=e.description,f.bundle_form.$setDirty(),f.save())})},f.setImageAsThumbnail=function(e){l.showGroup("luSpinnerGlobal");var t={};t.image_id=e,r.doSetAsThumbnail(t).then(function(e){f.thumbnail=r.data.thumbnail.attributes,f.preview_image_file_url=r.data.preview_image_file_url})},f.unsetImageAsThumbnail=function(){l.showGroup("luSpinnerGlobal");var e={};e.bundle_id=f.bundle.id,r.doUnsetAsThumbnail(e).then(function(e){f.thumbnail=r.data.thumbnail.attributes,f.preview_image_file_url=r.data.preview_image_file_url})},f.removeImage=function(e){r.doDestroyImage(e).then(function(e){f.bundle_images=r.data.bundle_images})},s.maxFileSize=function(){return"5MB"},s.acceptedFiles=function(){return".jpg,.jpeg,.pjpeg,.png,.xpng,.tiff"},s.$watch("vm.bundleImage",function(e){var t={data:{resource_id:f.bundle.id}};e&&(f.bundleImage=e,f.bundle_image_reference="1",m.getData(f.helper.fileUploads.types.bundle_image,function(t){a(function(){var e=t.data.signature_data.attributes;f.errorMsg=null,h(f.bundleImage,e)})},function(e){},t))})}angular.module("lu").controller("BundlesEditController",e),e.$inject=["$rootScope","learnUponBundle","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","spinnerService","$http","$modal","Upload","$luPopover","s3HelperFactory"]}(),function(){"use strict";function e(e,o,t,n,r,a,i,s,l,c){var u=this;function d(e){var t={};e=e||{},t.params=r.get(),t.url="/bundles.json",void 0!==e.hideSpinner&&(t.hideSpinner=e.hideSpinner),u.isLoading=!0,o.getList(t).then(function(){u.bundles=o.data.bundles,n(function(){u.isLoading=!1},1e3)})}u.isLoading=!1,u.helper=a,u.bundles=i.getKey("bundles"),e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.bundles.index"),url:"/bundles"}],u.sortOptions=[{label:u.helper.showMessage("lup.filters.created_at_asc"),value:"created_at.asc"},{label:u.helper.showMessage("lup.filters.created_at_desc"),value:"created_at.desc",default:!0},{label:u.helper.showMessage("lup.filters.name_az"),value:"name.asc"},{label:u.helper.showMessage("lup.filters.name_za"),value:"name.desc"},{label:u.helper.showMessage("lup.filters.status_asc"),value:"published_status_id.asc"},{label:u.helper.showMessage("lup.filters.status_desc"),value:"published_status_id.desc"},{label:u.helper.showMessage("lup.filters.date_published_asc"),value:"date_published.asc"},{label:u.helper.showMessage("lup.filters.date_published_desc"),value:"date_published.desc"}],u.loadData=d,u.destroy=function(n){c.confirm(I18n.t("lup.confirm"),I18n.t("course_bundles.are_your_sure_you_want_to_delete_this_bundle")).then(function(e){spinnerService.showGroup("luSpinnerGlobal");var t={data:{}};t.data.bundle={},t.data.bundle.published_status_id="3",t.id=n.id,o.doUpdateBundle(t).then(function(e){d()})})},e.$on("createBundle",function(){t.location="/bundles/new"})}angular.module("lu").controller("BundlesIndexController",e),e.$inject=["$rootScope","learnUponBundle","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$luPopover"]}(),function(){"use strict";function e(n,e,o,t,r){e.get();n.LupHelper=t,n.loadShopifyProducts=function(){if("end_of_results"==n.nextPage)return;n.shopify_products&&!n.nextPage&&(n.nextPage=n.shopify_products.next_page);n.nextPage&&function(e){var t=new o;t.getShopifyProducts(e).then(function(){t.data.products&&0<t.data.products.length&&(n.nextPage=t.data.next_page,angular.forEach(t.data.products,function(e){n.shopify_products.all.push(e)}))})}(n.nextPage);return},n.selectShopifyProduct=function(e){(new o).updateBundleShopifyProductSelected(n.bundle.old_shopify_product_id,n.bundle.id,e).then(function(e){n.bundle=e.data.bundle.attributes,n.shopify_products=e.data.shopify_products})},n.removeShopifyProduct=function(){(new o).updateBundleShopifyProductSelected(n.bundle.old_shopify_product_id,n.bundle.id,null).then(function(e){n.bundle=e.data.bundle.attributes,n.shopify_products=e.data.shopify_products,n.nextPage=e.data.shopify_products.next_page})},n.shopify_products=e.getKey("shopify_products"),n.bundle=e.getKey("bundle").attributes,n.nextPage=null,r.breadcrumbs=[{title:t.showMessage("lup.breadcrumbs.bundles.index"),url:"/bundles"},{title:n.bundle.name,url:"/bundles/:bundle_id".replace(/:bundle_id/,n.bundle.id)},{title:t.showMessage("lup.breadcrumbs.bundles.sales"),url:"/bundles/:bundle_id/shopify_sales".replace(/:bundle_id/,n.bundle.id)}]}angular.module("lu").controller("BundlesShopifySalesController",e),e.$inject=["$scope","StorageFactory","ShopifyProductFactory","LupHelper","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this,s=new n,l=e.getKey("catalog_item"),n=e.getKey("ilt_sessions"),c=e.getKey("must_choose_session"),e=e.getKey("timezone");i.showEmptyBox=c,i.helper=o,i.EnrollmentHelper=a,i.course=l.attributes,i.chosenSessions=[],i.showSessionDetails=s.showSessionDetails,i.timezone=e,n&&(i.sessions=n.data),i.chooseSession=function(t,e){if(!e&&t.max_capacity<=t.number_enrolled_on_session&&1==t.enable_waitlist)r.confirm(i.helper.showMessage("lup.confirm"),i.helper.showMessage("ilts.are_you_sure_you_want_to_enroll_in_this_session_you_will_be_put_on_the_waitlist")).then(function(e){i.chooseSession(t,!0)});else{var n=0;if(t.selected){for(var o=[],n=0;n<i.chosenSessions.length;n++)i.chosenSessions[n]!=t.id&&o.push(i.chosenSessions[n]);i.chosenSessions=o}else if(c===i.helper.ilt_sessions.must_choose_one){for(n=0;n<i.sessions.length;n++)i.sessions[n].selected=!1;i.chosenSessions=[t.id]}else c===i.helper.ilt_sessions.can_choose_more_than_one&&i.chosenSessions.push(t.id);t.selected=!t.selected}},i.enroll=function(){!function(){var e=i.chosenSessions.length;switch(c){case i.helper.ilt_sessions.enroll_in_all:return 1;case i.helper.ilt_sessions.must_choose_one:return e<=1;case i.helper.ilt_sessions.can_choose_more_than_one:return 1}}()||s.courseEnroll(i.course,i.chosenSessions)}}angular.module("lu").controller("CatalogCourseEnrollController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","LupHelper","$luPopover","EnrollmentHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,c=new n,e=e.get();l.lupHelper=a,l.recommended_courses=e.recommended_courses,l.start_course_immediately=e.start_course_immediately,l.descriptionCharachterCount=200,l.vpc=i,l.preview_images=e.preview_images.data,l.enroll=function(e,t){l.triggerActivityTracking(e,t,l.positive_feedback),c.courseEnroll(e,null)},l.EnrollmentHelper=o,l.showDescription=function(e){return c.showDescription(e,l.descriptionCharachterCount)},l.getPreviewImageURL=function(e,t){if(l.preview_images)for(var n=0;n<l.preview_images.length;n++)if(l.preview_images[n].id==t)return l.preview_images[n].large_url;return e+"images/course.png"},l.goToCourseLink=function(e){return"/enrollments/"+e+"/details"},r.ariaLabel=a.showMessage("lup.catalog.recommended_courses"),r.ariaLabelSide=a.showMessage("about"),l.triggerActivityTracking=function(e,t,n){n={course_id:e.course_id,recommendation_order:t+1,feedback_type:n,feedback_source:l.lupHelper.courseRecommenderFeedbackSources.catalog};s.post("/catalog/course_recommendations_feedback",n)},l.positive_feedback=l.lupHelper.courseRecommenderFeedbackTypes.positive_feedback,r.breadcrumbs=[{title:I18n.t("lup.catalog.catalog"),url:"/catalog/courses"},{title:I18n.t("lup.catalog.subnavigation_links.recommended_courses"),url:"/catalog/recommendations"}]}angular.module("lu").controller("CatalogCourseRecommendationsController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","EnrollmentHelper","$rootScope","LupHelper","ViewPortService","$http"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,c=new n,e=e.get();l.lupHelper=a,l.recommended_courses=e.recommended_courses,l.start_course_immediately=e.start_course_immediately,l.descriptionCharachterCount=200,l.vpc=i,l.preview_images=e.preview_images.data,l.enroll=function(e,t){l.triggerActivityTracking(e,t,l.positive_feedback),c.courseEnroll(e,null)},l.EnrollmentHelper=o,l.showDescription=function(e){return c.showDescription(e,l.descriptionCharachterCount)},l.loadData=function(){var e={};e.params=t.get(),c.courses(e).then(function(){l.courses=c.data.courses,l.preview_images=c.data.preview_images.data})},l.getPreviewImageURL=function(e,t){if(l.preview_images)for(var n=0;n<l.preview_images.length;n++)if(l.preview_images[n].id==t)return l.preview_images[n].large_url;return e+"images/course-redesign.png"},l.viewType=l.lupHelper.forums.card_types.grid,l.goToCourseLink=function(e){return"/enrollments/"+e+"/details"},r.ariaLabel=a.showMessage("lup.catalog.recommended_courses"),l.triggerActivityTracking=function(e,t,n){n={course_id:e.course_id,recommendation_order:t+1,feedback_type:n,feedback_source:l.lupHelper.courseRecommenderFeedbackSources.catalog};s.post("/catalog/course_recommendations_feedback",n)},l.positive_feedback=l.lupHelper.courseRecommenderFeedbackTypes.positive_feedback,r.breadcrumbs=[{title:I18n.t("lup.catalog.catalog"),url:"/catalog/courses"},{title:I18n.t("lup.catalog.subnavigation_links.recommended_courses"),url:"/catalog/recommendations"}]}angular.module("lu").controller("CatalogCourseRecommendationsRedesignController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","EnrollmentHelper","$rootScope","LupHelper","ViewPortService","$http"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l){var c=this,u=new r,d=o.getKey("catalog_item"),p=(o.getKey("enrollment"),o.getKey("content")),_=o.getKey("timezone"),m=o.getKey("reviews"),f=o.getKey("certificate"),g=o.getKey("learning_credits"),h=o.getKey("images"),b=o.getKey("completion_badges"),v=o.getKey("percentage_badges"),w=o.getKey("catalog_redesign_enabled");c.item_type=o.getKey("item_type"),c.portal_catalog_allow_to_reenroll=o.getKey("portal_catalog_allow_to_reenroll");r=o.getKey("next_action");c.LupHelper=a,c.EnrollmentHelper=i,c.course=d.attributes,c.showSessionDetails=u.showSessionDetails,c.isSession=function(e){return e==a.componentTypes.session},c.isSessionArray=function(e){return Array.isArray(e)},c.getSessionIcon=function(e){if(0<e.max_capacity-e.number_enrolled_on_session)return"fa-calendar-check-o ilt-seats-available";return e.enable_waitlist?"fa-calendar-times-o ilt-seats-waitlist":"fa-calendar-times-o ilt-seats-full"},c.selectBadge=function(e){c.selected_badge=e},c.timezone=_,c.catalog_redesign_enabled=w,c.isRecommendedCourse=o.getKey("is_recommended_course");o="/catalog/courses/";c.isRecommendedCourse&&(o="/catalog/recommendations/"),c.contentLink="learning_path_course"!==c.item_type?o+c.course.course_id+"/content":"/catalog/learning-paths/"+c.course.learning_path_id+"/content/"+c.course.id+"/content",c.reviewsLink="learning_path_course"!==c.item_type?o+c.course.course_id+"/reviews":"/catalog/learning-paths/"+c.course.learning_path_id+"/content/"+c.course.id+"/reviews",e.ariaLabel=a.showMessage("lup.courses.course_description"),e.ariaLabelSide=a.showMessage("lup.courses.course_details"),r&&(c.next_action=r.attributes),b&&(c.completion_badges=b.data),v&&(c.percentage_badges=v.data,c.selected_badge=0),p&&(c.course.content=function(e,t){var n=[],o=-1;if(t!=a.ilt_sessions.must_choose_one)return(n=e.data).forEach(function(e){e.availability=s.calculateSessionAvailability(e,null)}),n;for(var r=0;r<e.data.length;r++)e.data[r].component_type_id==a.componentTypes.session?-1==o?(o=r,e.data[r].availability=s.calculateSessionAvailability(e.data[r],null),n[o]={},n[o].data=[e.data[r]],n[o].component_type_id=a.componentTypes.session):(e.data[r].availability=s.calculateSessionAvailability(e.data[r],null),n[o].data.push(e.data[r])):n.push(e.data[r]);return n}(p,c.course.choose_session_type),e.ariaLabel=a.showMessage("lup.courses.course_content")),h&&(c.course.images=h.data),m&&(c.reviews=m,e.ariaLabel=a.showMessage("courses.course_reviews")),f&&(c.certificate=f.attributes),g&&(c.learningCredits=g.data),c.course.enrollment&&(c.enrollmentLink="/enrollments/"+c.course.enrollment.id+"/details"),e.$on("catalogItemEnroll",function(){u.courseEnroll(c.course,null,c.catalog_redesign_enabled)}),e.$on("goToCourse",function(){t.location=c.enrollmentLink}),e.breadcrumbs=function(){var e=I18n.t("lup.catalog.subnavigation_links.courses"),t="/catalog/courses";c.isRecommendedCourse&&(e=I18n.t("lup.catalog.subnavigation_links.recommended_courses"),t="/catalog/recommendations");return[{title:I18n.t("lup.catalog.catalog"),url:"/catalog/courses"},{title:e,url:t},{title:c.course.name,url:"/catalog/courses/"+c.course.course_id}]}()}window.angular.module("lu").controller("CatalogCourseShowController",e),e.$inject=["$rootScope","$window","$filter","StorageFactory","CatalogFactory","LupHelper","EnrollmentHelper","ComponentService","paramsService"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=new n,n=e.get();s.lupHelper=a,s.courses=e.getKey("courses"),s.catname=e.getKey("cat_name"),s.default_order=e.getKey("default_order"),s.portal_catalog_allow_to_reenroll=e.getKey("portal_catalog_allow_to_reenroll"),s.start_course_immediately=e.getKey("start_course_immediately"),s.descriptionCharachterCount=200,s.vpc=i,s.preview_images=n.preview_images.data,s.getCurrentPageA11Y=function(e){return a.showMessage("lup.a11y.catalog_courses")+" "+a.showMessage("lup.a11y.page")+" "+e+" "+a.showMessage("lup.a11y.loaded")},p(),s.showFilters=s.lupHelper.catalogShowFilters;var c,n=m();function u(){var e=m();t.merge(e),d()}function d(){var e={};e.params=t.get(),l.courses(e).then(function(){s.courses=l.data.courses,s.preview_images=l.data.preview_images.data,p()})}function p(){s.category=s.courses.meta.category?s.courses.meta.category:"",s.showFilter=s.courses.meta.show_filter?s.courses.meta.show_filter:s.lupHelper.catalogShowFilters[0].value,s.filterRealisedAfter=s.courses.meta.realised_after?s.courses.meta.realised_after:"",s.filterRealisedBefore=s.courses.meta.realised_before?s.courses.meta.realised_before:""}function m(){return{category:s.category,show_filter:s.showFilter,realised_after:s.filterRealisedAfter,realised_before:s.filterRealisedBefore}}t.merge(n),s.sortOptions=[{label:I18n.t("lup.catalog.sorting.course_name_asc"),value:"name.ASC",default:s.default_order===a.store_catalog_order_by.alphabetically},{label:I18n.t("lup.catalog.sorting.course_name_desc"),value:"name.DESC"},{label:I18n.t("lup.catalog.sorting.release_date_asc"),value:"released.ASC"},{label:I18n.t("lup.catalog.sorting.release_date_desc"),value:"released.DESC",default:s.default_order===a.store_catalog_order_by.newest_first}],s.loadData=d,s.applyFilter=u,s.enroll=function(e){l.courseEnroll(e,null)},s.clearFiltering=function(){return s.category="",s.showFilter=s.lupHelper.catalogShowFilters[0].value,s.filterRealisedAfter="",s.filterRealisedBefore="",u()},s.filteringControl={},s.filterOptions=function(){return[{filterName:"category",value:s.category},{filterName:"show_filter",value:s.showFilter},{filterName:"realised_after",value:s.filterRealisedAfter},{filterName:"realised_before",value:s.filterRealisedBefore}]},s.EnrollmentHelper=o,s.showDescription=function(e){return l.showDescription(e,s.descriptionCharachterCount)},s.getPreviewImageURL=function(e,t){if(s.preview_images)for(var n=0;n<s.preview_images.length;n++)if(s.preview_images[n].id==t)return s.preview_images[n].large_url;return e+"images/course.png"},s.goToCourseLink=function(e){return"/enrollments/"+e+"/details"},s.categories={label:s.catname,options:(c=e.getKey("categories").data,_.map(c,function(e){return{id:e.id.toString(),title:e.title}}))},e.getKey("is_student")&&r.$broadcast("selectCatalogGS"),r.ariaLabel=a.showMessage("a11y.catalog_course_list"),r.ariaLabelSide=a.showMessage("lup.catalog.filter")}angular.module("lu").controller("CatalogCoursesController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","EnrollmentHelper","$rootScope","LupHelper","ViewPortService"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i,s=this;function l(){return!angular.equals(s.filterData,c())}function c(){return{realised_after:"",realised_before:"",category:"",show_filter:s.showFilters[0].value.toString()}}s.lupHelper=o,s.save=function(){n.close({data:s.filterData,excluded_keys:["selected_groups","selected_moderators"],isFilterApplied:l(),fetchData:!angular.equals(s.initState,s.filterData)})},s.cancel=function(){s.filterData=s.initState,n.close({data:s.filterData,isFilterApplied:l(),fetchData:!1})},s.clear=function(){s.filterData=c()},s.filterParams=a,s.isFilterApplied=!1,s.catname=t.getKey("cat_name"),s.showFilters=s.lupHelper.catalogShowFilters,s.categories={label:s.catname,options:(i=t.getKey("categories").data,_.map(i,function(e){return{id:e.id.toString(),title:e.title}}))},r?(s.filterData=r,s.initState=angular.copy(r)):(s.initState=c(),s.filterData=c())}angular.module("lu").controller("CatalogCoursesFilterController",e),e.$inject=["$scope","StorageFactory","$modalInstance","LupHelper","filterData","filterParams"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=new n,n=e.get();s.lupHelper=a,s.courses=e.getKey("courses"),s.catname=e.getKey("cat_name"),s.default_order=e.getKey("default_order"),s.portal_catalog_allow_to_reenroll=e.getKey("portal_catalog_allow_to_reenroll"),s.start_course_immediately=e.getKey("start_course_immediately"),s.descriptionCharachterCount=200,s.vpc=i,s.preview_images=n.preview_images.data,s.getCurrentPageA11Y=function(e){return a.showMessage("lup.a11y.catalog_courses")+" "+a.showMessage("lup.a11y.page")+" "+e+" "+a.showMessage("lup.a11y.loaded")},s.sortOptions=[{label:I18n.t("lup.catalog.sorting.course_name_asc"),value:"name.ASC",class:"select--ico-abc-asc",default:s.default_order===a.store_catalog_order_by.alphabetically},{label:I18n.t("lup.catalog.sorting.course_name_desc"),value:"name.DESC",class:"select--ico-abc-desc"},{label:I18n.t("lup.catalog.sorting.release_date_asc"),value:"released.ASC",class:"select--ico-oldest-first"},{label:I18n.t("lup.catalog.sorting.release_date_desc"),value:"released.DESC",class:"select--ico-latest-first",default:s.default_order===a.store_catalog_order_by.newest_first}],s.loadData=function(){var e={};e.params=t.get(),l.courses(e).then(function(){s.courses=l.data.courses,s.preview_images=l.data.preview_images.data})},s.enroll=function(e){l.courseEnroll(e,null)},s.EnrollmentHelper=o,s.showDescription=function(e){return l.showDescription(e,s.descriptionCharachterCount)},s.getPreviewImageURL=function(e,t){if(s.preview_images)for(var n=0;n<s.preview_images.length;n++)if(s.preview_images[n].id==t)return s.preview_images[n].large_url;return e+"images/course-redesign.png"},s.goToCourseLink=function(e){return"/enrollments/"+e+"/details"},s.filterController="CatalogCoursesFilterController as vm",s.filterTemplate="/tc/catalog/courses-filter.html",s.exposedFunction={},s.viewType=s.lupHelper.forums.card_types.grid,e.getKey("is_student")&&r.$broadcast("selectCatalogGS"),r.ariaLabel=a.showMessage("a11y.catalog_course_list"),r.ariaLabelSide=a.showMessage("lup.catalog.filter")}angular.module("lu").controller("CatalogCoursesRedesignController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","EnrollmentHelper","$rootScope","LupHelper","ViewPortService"]}(),function(){"use strict";function e(t,r,e,n,o,a,i,s,l,c,u){var d=this,p=new o,n=n.getKey("ilt_sessions"),_={},m=[];function f(){d.calendar_events.data.forEach(function(e){e.availability=i.calculateSessionAvailability(e,null)})}function g(){_={},d.calendar_events.data.forEach(function(e){_[e.session_id]=new c({id:e.session_id,course_id:e.course_id})})}d.calendar_events=n,d.loadData=function(e,t){var n={};n.params=s.get(),n.params.month=e,n.params.year=t,p.iltSessions(n).then(function(){d.calendar_events=p.data.ilt_sessions,m=[],f(),g()})},d.helper=a,d.selected="-",d.displayForSelectedDate=function(e,t,n,o){if(!t||"-"===t)return!0;t=t.format("YYYY-MM-DD"),n=r("displayDateTime")(n,"YYYY-MM-DD"),o=r("displayDateTime")(o,"YYYY-MM-DD"),o=n<=t&&t<=o;{o?-1==m.indexOf(e)&&m.push(e):-1<(e=m.indexOf(e))&&m.splice(e,1)}return o},d.showSessionDetails=p.showSessionDetails,d.viewCourse=function(t){_[t.session_id].getSessionCourses(t.component_id).then(function(e){e.data.data&&1<e.data.data.length?u.open({templateUrl:"/tc/courses/components/sessions/sessions-courses.html",controller:"SessionsCoursesController as vm",size:"md",resolve:{courses:function(){return e.data.data}}}):window.location.href=t.course_url.concat("?back_to=ilt")})},d.haveShownItems=function(){return 0<m.length},t.mainFocus=!1,t.setFocusToMain=function(e){t.mainFocus=!!e,t.$digest()},g(),l.onload=f(),t.ariaLabel=a.showMessage("lup.a11y.catalog_ilt_sessions_main"),t.ariaLabelSide=a.showMessage("lup.a11y.catalog_ilt_sessions_sidebar")}angular.module("lu").controller("CatalogIltSessionsController",e),e.$inject=["$scope","$filter","$http","StorageFactory","CatalogFactory","LupHelper","ComponentService","paramsService","$window","SessionFactory","$modal"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=new n,c=e.getKey("catalog_item"),u=e.getKey("content"),d=e.getKey("certificate"),p=e.getKey("learning_credits");s.portal_catalog_allow_to_reenroll=e.getKey("portal_catalog_allow_to_reenroll");var _=e.getKey("next_action"),m=e.getKey("images"),n=e.getKey("completion_badges"),e=e.getKey("percentage_badges");s.learningPath=c.attributes,s.LupHelper=r,s.EnrollmentHelper=a,o.ariaLabel=r.showMessage("lup.courses.course_content"),o.ariaLabelSide=r.showMessage("courses.details"),_&&(s.next_action=_.attributes),n&&(s.completion_badges=n.data),e&&(s.percentage_badges=e.data,s.selected_badge=0),s.selectBadge=function(e){s.selected_badge=e},u&&(s.learningPath.content=u.data),m&&(s.learningPath.images=m.data),d&&(s.certificate=d.attributes),p&&(s.learningCredits=p.data),s.learningPath.learning_path_user&&(s.enrollmentLink="/lpaths/"+s.learningPath.learning_path_user.id+"/details"),o.$on("catalogItemEnroll",function(){l.learningPathEnroll(s.learningPath)}),o.$on("goToCourse",function(){i.location=s.enrollmentLink}),o.breadcrumbs=[{title:I18n.t("lup.catalog.catalog"),url:"/catalog/courses"},{title:I18n.t("lup.catalog.subnavigation_links.learning_paths"),url:"/catalog/learning-paths"},{title:s.learningPath.name,url:"/catalog/learning-paths/"+s.learningPath.learning_path_id}]}angular.module("lu").controller("CatalogLearningPathShowController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","$rootScope","LupHelper","EnrollmentHelper","$window"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=new n,n=e.get();s.lupHelper=a,s.learningPaths=e.getKey("learning_paths"),s.catname=e.getKey("cat_name"),s.default_order=e.getKey("default_order"),s.portal_catalog_allow_to_reenroll=e.getKey("portal_catalog_allow_to_reenroll"),s.descriptionCharachterCount=200,s.vpc=i,r.ariaLabel=s.lupHelper.showMessage("lup.a11y.catalog_learning_paths_list"),r.ariaLabelSide=s.lupHelper.showMessage("lup.catalog.filter"),s.preview_images=n.preview_images.data,p(),s.showFilters=s.lupHelper.catalogLpShowFilters;var c,n=m();function u(){var e=m();t.merge(e),d()}function d(){var e={};e.params=t.merge({category:s.category}),l.learningPaths(e).then(function(){s.learningPaths=l.data.learning_paths,s.preview_images=l.data.preview_images.data,p()})}function p(){s.category=s.learningPaths.meta.category?s.learningPaths.meta.category:"",s.showFilter=s.learningPaths.meta.show_filter?s.learningPaths.meta.show_filter:s.lupHelper.catalogLpShowFilters[0].value,s.filterRealisedAfter=s.learningPaths.meta.realised_after?s.learningPaths.meta.realised_after:"",s.filterRealisedBefore=s.learningPaths.meta.realised_before?s.learningPaths.meta.realised_before:""}function m(){return{category:s.category,show_filter:s.showFilter,realised_after:s.filterRealisedAfter,realised_before:s.filterRealisedBefore}}t.merge(n),s.sortOptions=[{label:I18n.t("lup.catalog.sorting.learning_path_name_asc"),value:"name.ASC",default:s.default_order===a.store_catalog_order_by.alphabetically},{label:I18n.t("lup.catalog.sorting.learning_path_name_desc"),value:"name.DESC"},{label:I18n.t("lup.catalog.sorting.release_date_asc"),value:"released.ASC"},{label:I18n.t("lup.catalog.sorting.release_date_desc"),value:"released.DESC",default:s.default_order===a.store_catalog_order_by.newest_first}],s.loadData=d,s.applyFilter=u,s.enroll=function(e){l.learningPathEnroll(e)},s.clearFiltering=function(){return s.category="",s.showFilter=s.lupHelper.catalogLpShowFilters[0].value,s.filterRealisedAfter="",s.filterRealisedBefore="",u()},s.filteringControl={},s.filterOptions=function(){return[{filterName:"category",value:s.category},{filterName:"show_filter",value:s.showFilter},{filterName:"realised_after",value:s.filterRealisedAfter},{filterName:"realised_before",value:s.filterRealisedBefore}]},s.EnrollmentHelper=o,s.showDescription=function(e){return l.showDescription(e,s.descriptionCharachterCount)},s.getPreviewImageURL=function(e,t){if(s.preview_images)for(var n=0;n<s.preview_images.length;n++)if(s.preview_images[n].id==t)return s.preview_images[n].large_url;return e+"images/course.png"},s.goLPLink=function(e){return"/lpaths/"+e+"/details"},s.categories={label:s.catname,options:(c=e.getKey("categories").data,_.map(c,function(e){return{id:e.id.toString(),title:e.title}}))},s.getCurrentPageA11Y=function(e){return s.lupHelper.showMessage("learningpaths.learning_paths")+" "+s.lupHelper.showMessage("lup.a11y.page")+" "+e+" "+s.lupHelper.showMessage("lup.a11y.loaded")},e.getKey("is_student")&&r.$broadcast("selectCatalogGS")}angular.module("lu").controller("CatalogLearningPathsController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","EnrollmentHelper","$rootScope","LupHelper","ViewPortService"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i,s=this;function l(){return!angular.equals(s.filterData,c())}function c(){return{realised_after:"",realised_before:"",category:"",show_filter:s.showFilters[0].value.toString()}}s.lupHelper=o,s.save=function(){n.close({data:s.filterData,excluded_keys:["selected_groups","selected_moderators"],isFilterApplied:l(),fetchData:!angular.equals(s.initState,s.filterData)})},s.cancel=function(){s.filterData=s.initState,n.close({data:s.filterData,isFilterApplied:l(),fetchData:!1})},s.clear=function(){s.filterData=c()},s.filterParams=a,s.isFilterApplied=!1,s.catname=t.getKey("cat_name"),s.showFilters=s.lupHelper.catalogShowFilters,s.categories={label:s.catname,options:(i=t.getKey("categories").data,_.map(i,function(e){return{id:e.id.toString(),title:e.title}}))},r?(s.filterData=r,s.initState=angular.copy(r)):(s.initState=c(),s.filterData=c())}angular.module("lu").controller("CatalogLearningPathsFilterController",e),e.$inject=["$scope","StorageFactory","$modalInstance","LupHelper","filterData","filterParams"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=new n,n=e.get();s.lupHelper=a,s.learningPaths=e.getKey("learning_paths"),s.catname=e.getKey("cat_name"),s.default_order=e.getKey("default_order"),s.portal_catalog_allow_to_reenroll=e.getKey("portal_catalog_allow_to_reenroll"),s.descriptionCharachterCount=200,s.vpc=i,r.ariaLabel=s.lupHelper.showMessage("lup.a11y.catalog_learning_paths_list"),r.ariaLabelSide=s.lupHelper.showMessage("lup.catalog.filter"),s.preview_images=n.preview_images.data,s.sortOptions=[{label:I18n.t("lup.catalog.sorting.learning_path_name_asc"),value:"name.ASC",class:"select--ico-abc-asc",default:s.default_order===a.store_catalog_order_by.alphabetically},{label:I18n.t("lup.catalog.sorting.learning_path_name_desc"),value:"name.DESC",class:"select--ico-abc-desc"},{label:I18n.t("lup.catalog.sorting.release_date_asc"),value:"released.ASC",class:"select--ico-oldest-first"},{label:I18n.t("lup.catalog.sorting.release_date_desc"),value:"released.DESC",class:"select--ico-latest-first",default:s.default_order===a.store_catalog_order_by.newest_first}],s.loadData=function(){var e={};e.params=t.merge({category:s.category}),l.learningPaths(e).then(function(){s.learningPaths=l.data.learning_paths,s.preview_images=l.data.preview_images.data})},s.enroll=function(e){l.learningPathEnroll(e)},s.EnrollmentHelper=o,s.showDescription=function(e){return l.showDescription(e,s.descriptionCharachterCount)},s.getPreviewImageURL=function(e,t){if(s.preview_images)for(var n=0;n<s.preview_images.length;n++)if(s.preview_images[n].id==t)return s.preview_images[n].large_url;return e+"images/course-redesign.png"},s.goLPLink=function(e){return"/lpaths/"+e+"/details"},s.filterController="CatalogLearningPathsFilterController as vm",s.filterTemplate="/tc/catalog/learning-paths-filter.html",s.exposedFunction={},s.viewType=s.lupHelper.forums.card_types.grid,s.getCurrentPageA11Y=function(e){return s.lupHelper.showMessage("learningpaths.learning_paths")+" "+s.lupHelper.showMessage("lup.a11y.page")+" "+e+" "+s.lupHelper.showMessage("lup.a11y.loaded")},e.getKey("is_student")&&r.$broadcast("selectCatalogGS")}angular.module("lu").controller("CatalogLearningPathsRedesignController",e),e.$inject=["StorageFactory","paramsService","CatalogFactory","EnrollmentHelper","$rootScope","LupHelper","ViewPortService"]}(),function(){"use strict";function e(r,e,t,n,o,a,i,s,l,c,u,d,p,_){var m=new _;r.Helper=n,r.certification=e.getKey("certification").attributes,r.enrolments_size=e.getKey("enrolments_size"),r.cert_image_reference=e.getKey("cert_image_reference"),r.ariaLabel=n.showMessage("lup.breadcrumbs.certifications.edit"),r.ariaLabelSide=n.showMessage("lup.a11y.certificate_sidebar"),r.redesign_enabled=e.getKey("redesign_enabled"),r.cert_image_reference&&f();e=[{title:n.showMessage("lup.breadcrumbs.certifications.index"),url:r.redesign_enabled?"/certificates":"/certifications"},{title:n.showMessage("lup.breadcrumbs.certifications.edit"),url:"/certifications/"+r.certification.id+"/edit"}];function f(){var e={};return e.url="/download_jobs/"+r.cert_image_reference+"/status.json",e.hideSpinner=!0,m.get("download_jobs",e,r.cert_image_reference).then(function(){var e=m.data.job;e&&e.status_id!==n.lupJobStatuses.completed?r.timeoutPromise=d(function(){f()},2e3):o.location.reload()})}t.breadcrumbs=e,0<r.enrolments_size&&l.error(n.showMessage("certificates.users_already_attained_cert_editing_warning",{users_txt:r.enrolments_size}),null,{closeButton:!0,extendedTimeOut:15e3,toastClass:"visible-lg"}),t.$on("previewCertificate",function(){var e,t;e=new i,t={typeId:n.lupJobTypes.downloadCertificate,enrollment_id:null,certificate_id:r.certification.id,for_course:!0,user_id:null},e.initiateJob(t)}),t.$on("replace_image",function(){document.getElementById("replace_image").click()}),r.maxFileSize=function(){return"5MB"},r.acceptedFiles=function(){return".jpg,.jpeg,.png"},r.updateTitle=function(e){if(!r.certification.title)return!1;if(!r.certification.title.trim())return!1;e.preventDefault();e={url:"/certifications/update_title/"+r.certification.id+".json",data:{title:r.certification.title},hideSpinner:!1};m.put(null,e,null).then(function(){o.location.reload()})},r.$watch("certImage",function(e){var t={data:{resource_id:r.certification.id}};e&&(r.certImage=e,r.cert_image_reference="1",u.getData(r.Helper.fileUploads.types.certificate,function(t){d(function(){var e=t.data.signature_data.attributes;r.errorMsg=null,function(n,o){if(!n)return;r.errorMsg=null,u.uploadFiles(n,o,function(e){d(function(){n.result=e.data});var t=new c;return t.uuid=o.guid,t.image_file_name=n.name,t.output_url=o.folder_path+n.name,t.certification_id=r.certification.id,t.portal_id=r.certification.portal_id,t.updateImage().then(function(e){try{return r.cert_image_reference=t.data.cert_image_reference,void f()}catch(e){return void(r.cert_image_reference=null)}})},function(e){0<e.status&&(r.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(r.certImage,e)})},function(e){},t))})}angular.module("lu").controller("CertificationsEditController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","$window","Upload","LupJobFactory","spinnerService","toastr","CertificationsFactory","s3HelperFactory","$timeout","$http","learnUponApi"]}(),function(){"use strict";function e(n,t,e,o,r,a,i,s,l,c,u,d,p){var _=new o;n.certifications=e.getKey("certifications"),n.LupHelper=a,n.editCertificate=function(e){i.location=e.template_version===a.certificateTemplateVersion.first?"/certifications/"+e.id+"/edit":"/certificates/edit/"+e.id},n.previewCertificate=function(e){var t=new s,e={typeId:a.lupJobTypes.downloadCertificate,enrollment_id:null,certificate_id:e,for_course:!0,user_id:null};t.initiateJob(e)},n.deleteCertificate=function(n){var o=new l;Promise.all([_.getAwardedEnrollmentsCount(n.id),o.getRelatedLearningJourneys(n.id,2,!1)]).then(function(){var e=_.data.enrollments_count,t="";if(o.referenceFound)throw new Error(a.showMessage("lup.ljw.certificates.delete_block_single"));0<e&&(t=a.showMessage("lup.certifications.already_been_awarded")+" "),c.confirm(a.showMessage("lup.confirm"),t+a.showMessage("lup.certifications.confirm_delete_action",{cert_title:n.title})).then(function(e){d.show("certificate-delete-spinner"),u.delete("/certifications/"+n.id+".json").then(function(e){})})}).catch(function(e){var t;o.referenceFound&&(t=a.showMessage("lup.ljw.certificates.delete_block_single"),0<o.referenceWorkflows.length&&(t=a.showMessage("lup.ljw.certificates.delete_block_multi")+" "+o.referenceWorkflows.map(function(e){return e.name}).join(", ")),p.error(t))})},n.loadData=function(){var e={};e.params=t.get(),_.getList(e).then(function(){n.certifications=_.data.certifications})},n.sortOptions=[{label:a.showMessage("lup.filters.certs_title_asc"),value:"title.ASC",default:!0},{label:a.showMessage("lup.filters.certs_title_desc"),value:"title.DESC"},{label:a.showMessage("lup.filters.created_at"),value:"created_at.desc"}],n.searchText=null,n.ariaLabelSide=a.showMessage("lup.a11y.certificates_sidebar"),n.ariaLabel=a.showMessage("learningpaths.certificates"),n.activeCertDDM={},n.toggled=function(e,t){n.activeCertDDM[t]=e},n.getCurrentPageA11Y=function(e){return a.showMessage("learningpaths.certificates")+" "+a.showMessage("lup.a11y.page")+" "+e+" "+a.showMessage("lup.a11y.loaded")},r.$on("newCertificate",function(){i.location="/certifications/new"});e=[{title:a.showMessage("lup.breadcrumbs.certifications.index"),url:"/certifications"}];r.breadcrumbs=e}angular.module("lu").controller("CertificationsIndexController",e),e.$inject=["$scope","paramsService","StorageFactory","CertificationsFactory","$rootScope","LupHelper","$window","LupJobFactory","CourseFactory","$luPopover","$http","spinnerService","toastr"]}(),function(){"use strict";function e(o,e,t,n,r,a,i,s,l){o.certification=e.getKey("certification"),o.Helper=n,o.Upload=a,o.save=function(e){e.$dirty&&e.$valid&&o.certImage&&""!==o.certification.title&&(o.cert_create_form.$setPristine(),s.getData(n.fileUploads.types.certificate,function(t){l(function(){var e=t.data.signature_data.attributes;o.errorMsg=null,function(t,n){if(!t)return;o.errorMsg=null,o.cert_image_reference=!0,s.uploadFiles(t,n,function(e){l(function(){t.result=e.data}),a.upload({url:"/certifications.json",method:"POST",data:{certification:{image:o.certImage,title:o.certification.title,uuid:n.guid,image_file_name:t.name,output_url:n.folder_path+t.name},filename:o.certImage.name,"Content-Type":""!==o.certImage.type?o.certImage.type:"application/octet-stream"}})},function(e){0<e.status&&(o.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(o.certImage,e)})},function(e){}))},o.cancel=function(){r.location.href="/certifications"},o.clearCertImage=function(){o.certImage=null},o.ariaLabel=n.showMessage("lup.certifications.new"),o.ariaLabelSide=n.showMessage("lup.a11y.certificate_sidebar");e=[{title:n.showMessage("lup.breadcrumbs.certifications.index"),url:"/certifications"},{title:n.showMessage("lup.breadcrumbs.certifications.new_cert"),url:"/certifications/new"}];t.breadcrumbs=e,o.validateImage=function(){return!!o.certImage||(o.Helper.showTip("lup.courses.please_upload_cert_image"),!1)},o.maxFileSize=function(){return"5MB"},o.acceptedFiles=function(){return".jpg,.jpeg,.png"},o.$watch("certImage",function(e){e&&(o.certImage=e)})}angular.module("lu").controller("CertificationsNewController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","$window","Upload","spinnerService","s3HelperFactory","$timeout"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s){var l,e=e.get(),c="/checklists/";t.checklist_question=e.checklist_question.attributes,t.checklist=e.checklist.attributes,t.LupHelper=n,t.ariaLabelSide=n.showMessage("lup.tips.checklists.question_title"),t.cancel=function(){i.location="/checklists"},t.save=function(e){e["checklist_question[title]"].$setValidity("emptyString",n.checkStringExistence(t.checklist_question.title)),e.$valid&&e.commit()},l=[{title:n.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:n.showMessage("lup.breadcrumbs.components.checklist"),url:"/checklists"},{title:t.checklist.name,url:c+t.checklist.id},{title:n.showMessage("lup.breadcrumbs.components.new_checklist_question"),url:c+t.checklist_question.checklist_id+"/new"}],a.breadcrumbs=l}angular.module("lu").controller("ChecklistQuestionsNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","ChecklistQuestionFactory","$rootScope","$window","$luPopover"]}(),function(){"use strict";function e(n,e,o,t,r,a,i,s,l,c,u){e=e.get();n.checklist=e.checklist.attributes,n.checklist_question=e.checklist_question.attributes,n.LupHelper=o;var d,p="/checklists/";n.cancel=function(){s.location="/checklists"},n.save=function(e){e["checklist_question[title]"].$setValidity("emptyString",o.checkStringExistence(n.checklist_question.title)),e.$valid&&e.commit()},n.checklistQuestionUpdateUrl=function(){return p+n.checklist_question.checklist_id+"/checklist_questions/"+n.checklist_question.id},d=[{title:o.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:o.showMessage("lup.breadcrumbs.components.checklist"),url:"/checklists"},{title:n.checklist.name,url:p+n.checklist_question.checklist_id},{title:n.checklist_question.title,url:p+n.checklist_question.checklist_id+"/checklist_questions/"+n.checklist_question.id}],i.breadcrumbs=d,i.$on("addChecklistQuestion",function(){s.location=p+n.checklist.id+"/checklist_questions/new"}),i.$on("deleteChecklistQuestion",function(){var e=o.checklist.question.path.updateStatus(n.checklist.id,n.checklist_question.id),t={status:o.checklist.question.status.deleted};c.post(e,t).success(function(e){s.location.replace(o.checklist.path.show(n.checklist.id))})})}angular.module("lu").controller("ChecklistQuestionsShowController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","ChecklistFactory","ChecklistQuestionFactory","$rootScope","$window","$luPopover","$http","LupJobFactory"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c){e.get();var u,d=new r;n.LupHelper=t,n.checklists=e.getKey("checklists"),n.ariaLabelSide=t.showMessage("lup.tips.checklists_title"),n.loadData=function(){var e={};e.params=o.get(),d.getList(e).then(function(){n.checklists=d.data.checklists})},n.activeChecklistDDM={},n.toggled=function(e,t){n.activeChecklistDDM[t]=e},n.is_locked=function(e){return e.status===t.checklist.status.locked},n.delete=function(e){l.post("/checklists/:id/status".replace(/:id/,e),{status:t.checklist.status.deleted}).success(function(e){i.location.reload()})},u=[{title:t.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:t.showMessage("lup.breadcrumbs.components.checklist"),url:"/checklists"}],a.breadcrumbs=u,a.$on("addChecklist",function(){i.location="/checklists/new"}),n.sortOptions=[{label:t.showMessage("lup.filters.name_az"),value:"name.ASC"},{label:t.showMessage("lup.filters.name_za"),value:"name.DESC"},{label:t.showMessage("lup.filters.created_at"),value:"created_at.DESC",default:!0},{label:t.showMessage("lup.filters.oldest_first"),value:"created_at.ASC"}]}angular.module("lu").controller("ChecklistsIndexController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","ChecklistFactory","$rootScope","$window","$luPopover","$http","LupJobFactory"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s){var l,e=e.get();t.checklist=e.checklist.attributes,t.LupHelper=n,t.ariaLabelSide=n.showMessage("lup.tips.checklists_title"),t.cancel=function(){i.location="/checklists"},t.save=function(e){e["checklist[name]"].$setValidity("emptyString",n.checkStringExistence(t.checklist.name)),e.$valid&&e.commit()},l=[{title:n.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:n.showMessage("lup.breadcrumbs.components.checklist"),url:"/checklists"},{title:n.showMessage("lup.breadcrumbs.components.checklist_new"),url:"/checklists/new"}],a.breadcrumbs=l}angular.module("lu").controller("ChecklistsNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","ChecklistFactory","$rootScope","$window","$luPopover"]}(),function(){"use strict";function e(o,e,r,t,n,a,i,s,l,c,u){var e=e.get(),d=new a;o.checklist=e.checklist.attributes,o.is_locked=o.checklist.status===r.checklist.status.locked;e={};e.checklist_id=o.checklist.id,e.params=t.get(),d.getList(e).then(function(){o.questions=d});var p,_="/checklists/";o.LupHelper=r,o.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===r.keyboard_keys[e.which]){if(e.preventDefault(),null!==o.rememberReorderIndex&&n!==o.rememberReorderIndex){e=t[n];return t[n]=t[o.rememberReorderIndex],t[o.rememberReorderIndex]=e,t=t.map(function(e){return e.id}),o.savePoolReorder(t,o.checklist.id),o.rememberReorderIndex=null,void o.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}o.rememberReorderIndex=n}},o.rememberReorderIndex=null,o.activeChecklistDDM={},o.toggled=function(e,t){o.activeChecklistDDM[t]=e},o.cancel=function(){s.location=_},o.save=function(e){e["checklist[name]"].$setValidity("emptyString",r.checkStringExistence(o.checklist.name)),e.$valid&&e.commit()},o.checklistUpdateUrl=function(){return _+o.checklist.id},o.deleteChecklistQuestion=function(e){var t=r.checklist.question.path.updateStatus(o.checklist.id,e),e={status:r.checklist.question.status.deleted};c.post(t,e).success(function(e){s.location.reload()})},p=[{title:r.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:r.showMessage("lup.breadcrumbs.components.checklist"),url:"/checklists"},{title:o.checklist.name,url:_+o.checklist.id}],i.breadcrumbs=p,i.$on("addChecklistQuestion",function(){s.location=_+o.checklist.id+"/checklist_questions/new"}),o.addChecklistQuestion=function(){s.location=_+o.checklist.id+"/checklist_questions/new"},o.dragQuestionControlListeners={allowDuplicates:!1,dragMove:function(e,t,n){n&&(n.pageY<s.pageYOffset?s.scrollTo(0,n.pageY):n.pageY+e.offsetY>s.pageYOffset+s.innerHeight&&s.scrollTo(0,n.pageY+e.offsetY-s.innerHeight))},dragEnd:function(e){var t=[];angular.forEach(e.dest.sortableScope.modelValue,function(e){t.push(e.id)}),o.savePoolReorder(t,o.checklist.id)}},o.savePoolReorder=function(e,t){e={checklist_id:t,new_order:e};(new n).reorder(e).then(function(e){})},o.ariaLabelForContentSegments=function(e,t){return null!==o.rememberReorderIndex?o.rememberReorderIndex===e?r.showMessage("a11y.exam_order_list.selected",{answer_option:t}):r.showMessage("a11y.exam_order_list.swap",{answer_option:t}):r.showMessage("a11y.exam_order_list.select",{answer_option:t})},i.$on("deleteChecklist",function(){c.post("/checklists/:id/status".replace(/:id/,o.checklist.id),{status:r.checklist.status.deleted}).success(function(e){s.location.reload()})})}angular.module("lu").controller("ChecklistsShowController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","ChecklistFactory","ChecklistQuestionFactory","$rootScope","$window","$luPopover","$http","LupJobFactory"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l){var t=t.get(),c=new e;new i;function u(){var e={};e.params=o.get(),c.getList(e).then(function(){n.clients=c.data.clients})}n.clients=t.clients,n.sortOptions=[{label:I18n.t("lup.clients.sorting.client_name_asc"),value:"client_name.ASC",default:!0},{label:I18n.t("lup.clients.sorting.client_name_desc"),value:"client_name.DESC"}],n.loadData=u,n.Helper=l,n.ariaLabel=l.showMessage("lup.a11y.portal_and_licenses_main"),n.ariaLabelSide=l.showMessage("lup.a11y.portal_and_licenses_aside"),n.activeClientDDM={},n.toggled=function(e,t){n.activeClientDDM[t]=e},n.getCurrentPageA11Y=function(e){return l.showMessage("lup.pagetitles.clients")+" "+l.showMessage("lup.a11y.page")+" "+e+" "+l.showMessage("lup.a11y.loaded")},n.destroy=function(t,e){a.confirm(I18n.t("lup.confirm"),I18n.t("lup.tips.modal.are_you_sure_you_want_to_delete_cannot_be_undone",{portal_name:t.title})).then(function(e){c.destroy(t.id).then(function(){u()})})},n.deactivateUsers=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("lup.tips.modal.are_you_sure_you_want_to_deactivate")).then(function(e){c.deactivateUsers(t.id).then(function(){t.deactivated_users=1})})},n.activateUsers=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("lup.tips.modal.are_you_sure_you_want_to_reactivate")).then(function(e){c.activateUsers(t.id).then(function(){t.deactivated_users=0})})},n.linkTo=function(e,t){r.location="settings"==t?e+"settings":e}}angular.module("lu").controller("ClientsIndexController",e),e.$inject=["$scope","learnUponClient","StorageFactory","paramsService","$window","$luPopover","GroupsFactory","$timeout","LupHelper"]}(),function(){"use strict";function e(n,t,e,o){function r(e){e.commit(),e.$setPristine(),t.showGroup("luSpinnerGlobal")}n.save=function(t){var e=!!n.client.subdomain&&3<=n.client.subdomain.length;t.$setValidity("shortSubdomainName",e),t.$valid&&(n.copy_from_parent?o.confirm(I18n.t("lup.confirm"),I18n.t("lup.clients.are_you_sure_copy")).then(function(e){r(t)}):r(t))},n.copy_from_parent=!1,n.LupHelper=e,n.ariaLabel=e.showMessage("lup.a11y.creating_new_portal_main"),n.ariaLabelSide=e.showMessage("lup.a11y.portal_and_licenses_aside")}angular.module("lu").controller("ClientsNewController",e),e.$inject=["$scope","spinnerService","LupHelper","$luPopover"]}(),function(){"use strict";function e(a,e,t,n,o,r,i,s,l,c,u,d,p,_,m){angular.extend(this,n("BasePageController as base",{$scope:a}));var f=this;a.ckeditorInstance="session_description_wysi",a.imageType=u.fileUploads.types.component_description,a.LupHelper=u,a.processingUpload=!1,a.Upload=r,a.autoCorrectDetail=null,a.assignment_handouts?a.handoutFiles=a.assignment_handouts:a.handoutFiles=[],a.assignmentQuestionTextOpts={clear_all_previous_instances:!0,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%"},a.maxAllowedToUpload=function(){return 5},a.acceptedFiles=function(){return"*.*"},a.setAutoCorrectDetails=function(){if(a.component.id)return a.autoCorrectDetail=new m,a.autoCorrectDetail.get(a.component.id).then(function(){t.open({templateUrl:"/tc/courses/auto_correct_assignment_details.html",controller:"AutoCorrectAssignmentDetailsController",size:"lg",resolve:{component:function(){return a.component},autoCorrectDetail:function(){return a.autoCorrectDetail.data}}}).opened.then(function(){i(function(){u.renderCKEditor({clear_all_previous_instances:!1,id:"corrected_comments_wysi",add_image_upload:!1,save_button_action:"save_text_button",add_embedded_media:!1,width:"100%"})},100)})});u.showTip("lup.courses.default_feedback_notify")},a.removeHandout=function(o){e.confirm(I18n.t("lup.confirm"),I18n.t("course_assignments.are_you_sure_you_want_to_delete_this_upload")).then(function(e){var n=new _;return n.id=o,n.destroy().then(function(){if(null===n.id){for(var e=[],t=0;t<a.handoutFiles.length;t++)a.handoutFiles[t].id!==o&&e.push(a.handoutFiles[t]);a.handoutFiles=e}})})},a.$watch("ap.handoutUpload",function(r){a.formUpload=!1,r&&(f.handoutUpload=r,d.getData(u.fileUploads.types.assignment_handouts,function(t){i(function(){var n,o,e=t.data.signature_data.attributes;a.errorMsg=null,n=r,o=e,a.errorMsg=null,d.uploadFiles(n,o,function(e){i(function(){n.result=e.data});var t=new _;return t.uuid=o.guid,t.handout_file_name=n.name,t.component_id=a.component.id,t.handout_file_size=n.size,t.handout_content_type=n.type,t.output_url=o.folder_path+n.name,t.create().then(function(){a.handoutFiles.push(t)})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){}))}),l.executeDjImageUpload=function(){t.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return a.component.id},ckeditorInstance:function(){return a.ckeditorInstance},imageType:function(){return a.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})}}angular.module("lu").controller("AssignmentEditController",e),e.$inject=["$scope","$luPopover","$modal","$controller","$http","Upload","$timeout","$sce","$window","EnrollmentHelper","LupHelper","s3HelperFactory","spinnerService","AssignmentHandoutFactory","AutoCorrectAssignmentDetailFactory"]}(),function(){"use strict";function e(t,a,e,n,o,r,i,s,l,c,u,d,p,_,m,f,g,h,b){angular.extend(this,n("BasePageController as base",{$scope:a}));var v=this;v.LupHelper=_,v.Upload=r,v.componentElement=angular.copy(g),v.showPageSegment=S,v.showEncodingSection=C,v.cancel=function(){p.resetInterval(y),v.isUploadCanceled=!0,l.close({action:"cancel"})},v.deleteSegment=function(){l.close({action:"delete",componentElement:v.componentElement})},v.saveSegment=function(e){e&&function(e){e.$setValidity("emptyTitle",!!v.componentElement.title)}(e);angular.isDefined(e)&&!e.$valid||(y=i(function(){M()},3e3),w.save(b,v.componentElement).then(function(){return v.componentElement=w.component_element,w.readyForViewing()?l.close({action:"save",componentElement:w.component_element}):void t.$broadcast("segmentsArrayModified",w.component_element)}))},v.getModalTitle=function(e){return S(e)?v.LupHelper.showMessage("lup.component_elements.audio_settings"):v.LupHelper.showMessage("lup.components.add_audio")},v.componentElementCancelText=function(e,t){return C(e,t)?v.LupHelper.showMessage("close"):v.LupHelper.showMessage("cancel")},v.somethingWasUploaded=!1,v.processingUpload=!1,v.maxFileSize=function(){return"1500MB"},v.acceptedFiles=function(){return".3gp,.aac,.ac3,.ec3,.m4f,.mj2,.mkv,.mp3,.mp4,.mxf,.ogg,.ts,.webm,.wmv,.wav"};var w=new f;w.id=v.componentElement.id,w.component_element=v.componentElement,M();var y=i(function(){M()},3e3);function M(){w.id&&!w.readyForViewing()?w.loadSegmentIntoView().then(function(){v.componentElement=w.component_element,w.readyForViewing()&&(v.somethingWasUploaded=!1,t.$broadcast("segmentsArrayModified",v.componentElement))}):p.resetInterval(y)}function S(e){return!!e&&!!e.id&&e.encoded_state==v.LupHelper.component_element_statuses.finished}function C(e,t){return!!e&&!!e.id&&!!e.encoded_state&&e.encoded_state!=v.LupHelper.component_element_statuses.failed&&e.encoded_state!=v.LupHelper.component_element_statuses.finished||t}a.$watch("ap.audioUpload",function(r){r&&(v.audioUpload=r,m.getData(_.fileUploads.types.audio,function(o){s(function(){var t,n,e=o.data.signature_data.attributes;a.errorMsg=null,t=r,n=e,a.errorMsg=null,m.uploadFiles(t,n,function(e){if(v.processingUpload=!1,s(function(){t.result=e.data}),v.componentElement.uuid=n.guid,v.componentElement.audio_file_name=t.name,v.componentElement.audio_content_type=t.type,v.componentElement.audio_file_size=t.size,v.componentElement.output_url=n.folder_path+t.name,v.componentElement.component_element_type_id=_.componentElementTypes.audio,v.somethingWasUploaded=!0,!v.isUploadCanceled)return v.saveSegment()},function(e){v.processingUpload=!1,0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){v.processingUpload=!0,t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){v.processingUpload=!1}))})}angular.module("lu").controller("AudioEditController",e),e.$inject=["$rootScope","$scope","$luPopover","$controller","$http","Upload","$interval","$timeout","$modalInstance","$sce","$window","EnrollmentHelper","LupService","LupHelper","s3HelperFactory","ComponentElementFactory","componentElement","type","componentId"]}(),function(){"use strict";function e(r,e,t,n,o,a,i,s,l,c,u,d,p,_){angular.extend(this,n("BasePageController as base",{$scope:r}));r.LupHelper=c,r.updateVisibleByLearner=function(){var e=r.component.visible_by_learner,t=r.component.show_current_status,n=r.component.allow_learner_edit_items,o=r.component.allow_learner_submit;r.component.show_current_status=!!e&&t,r.component.allow_learner_edit_items=!!e&&n,r.component.allow_learner_submit=!!e&&o},r.updateAllowLearnerCheckItems=function(){r.component.allow_learner_submit=!!r.component.allow_learner_edit_items&&r.component.allow_learner_submit};var m=d.get(),n=m.component,d=m.course;r.component_id=n.id,r.course_id=d.id,r.base_url="/courses/:course_id/content/:component_id".replace(":course_id",d.id).replace(":component_id",n.id),m.hasOwnProperty("checklist")?(n=m.checklist.attributes,m=m.checklist_course_options,r.component.checklist_id=n.id,r.component.visible_by_learner=m.visible_by_learner,r.component.show_current_status=!!m.visible_by_learner&&m.show_current_status,r.component.allow_learner_edit_items=m.allow_learner_edit_items||!1,r.component.allow_learner_submit=m.allow_learner_submit||!1,r.questions=n.checklist_questions,n.checklist_questions.hasOwnProperty("data")?r.showEmptyState=0===n.checklist_questions.data.length:r.showEmptyState=0===n.checklist_questions.length,r.is_locked=n.status!=c.checklist.status.draft||n.source_id!=d.id):(r.showEmptyState=!1,r.is_locked=!1,r.component.checklist_id=null,r.component.visible_by_learner=!0,r.component.show_current_status=!1,r.component.allow_learner_edit_items=!1,r.component.allow_learner_submit=!1),p.$on("addModuleChecklistQuestion",function(){s.location="/courses/:course_id/content/:component_id/new-item".replace(":course_id",r.course_id).replace(":component_id",r.component_id)}),r.addModuleChecklistQuestion=function(){s.location="/courses/:course_id/content/:component_id/new-item".replace(":course_id",r.course_id).replace(":component_id",r.component_id)},r.dragQuestionControlListeners={allowDuplicates:!1,dragMove:function(e,t,n){n&&(n.pageY<s.pageYOffset?s.scrollTo(0,n.pageY):n.pageY+e.offsetY>s.pageYOffset+s.innerHeight&&s.scrollTo(0,n.pageY+e.offsetY-s.innerHeight))},dragEnd:function(e){var t=[];angular.forEach(e.dest.sortableScope.modelValue,function(e){t.push(e.id)}),r.savePoolReorder(t,r.component.checklist_id)}},r.savePoolReorder=function(e,t){e={checklist_id:t,new_order:e,visible_in_library:!1};(new _).reorder(e).then(function(e){})},r.deleteChecklistQuestion=function(e){var t="/item/:item_id/status".replace(":item_id",e),e={status:c.checklist.question.status.deleted,checklist_id:r.component.checklist_id};o.post(r.base_url+t,e).success(function(e){s.location.replace(r.base_url+"/edit")})}}angular.module("lu").controller("ChecklistEditController",e),e.$inject=["$scope","$luPopover","$modal","$controller","$http","$timeout","$sce","$window","EnrollmentHelper","LupHelper","spinnerService","StorageFactory","$rootScope","ChecklistFactory"]}(),function(){"use strict";function e(e,o,r,t,a,n,i,s,l,c){var u=this,d=o.getKey("component");u.ckeditorInstance="session_description_wysi",u.imageType=e.fileUploads.types.component_description,u.helper=e,u.course=o.getKey("course"),u.webinar=o.getKey("webinar").attributes,u.has_webinars=o.getKey("has_webinars"),u.component=function(e){u.editMode=!!e.id,u.has_webinars?e.location_id="__webinar":e.id||(e.location_id="");e.course_instructor_id=e.course_instructor_id?e.course_instructor_id:"",e.start_datetime_tz=e.start_at_for_ui||f(!1,m(e),0),e.end_datetime_tz=e.end_at_for_ui||f(!1,m(e),36e5),e.timezone||(e.timezone=e.server_ilt_sessions_timezone);return e}(d),u.displayWaitlistButton=!!u.component.enable_waitlist,u.selectedCreatedWebinar=!1,u.locationSelected=!(!u.component.location_id||"__webinar"==u.component.location_id),u.webinarsEnabled=o.getKey("webinars_enabled"),u.num_of_recipients=u.component.number_enrolled_on_session;var p=new i({id:u.component.id,course_id:u.course.id});function m(t){var e=t.ilt_sessions_timezone;if(t.location_id&&"__webinar"!==t.location_id){var n=_.find(t.locations,function(e){return e.id===t.location_id});return e=n?n.tzinfo:e}return e}function f(e,t,n){return e?a("displayDateTime")(e,"YYYY-MM-DDTHH:mm",t):a("displayDateTime")(Date.now()+n,"YYYY-MM-DDTHH:mm",t)}function g(){c.open({templateUrl:"/tc/components/sessions/send_message_to_ilt_session_attendees_modal.html",controller:"SessionsSendMessageToAttendeesController",size:"lg",resolve:{course_id:function(){return u.course.id},session_id:function(){return u.component.id},session_name:function(){return u.component.title}}})}u.tutors=_.map(d.tutors,function(e){return e.id=e.id?e.id:"",e}),u.componentHasWebinar=function(){u.has_webinars?u.component.location_id="":(u.selectedCreatedWebinar=!1,u.component.location_id="__webinar",u.locationSelected=!1)},u.saveForm=function(e,t,n){(u.editMode?function(t){t.$setPristine();var e=u.component,n=u.webinar;e.start_at=e.start_datetime_tz,e.end_at=e.end_datetime_tz,p.updateSession({component:e,webinar:n,course_id:r.course.id}).then(function(e){400!==e.status?e.data.webinar&&e.data.new_webinar&&(o.setKey("webinar",e.data.webinar),s.addWebinarToAccount(u.webinar.webinar_settings_id,e.data.new_webinar),u.webinar=o.getKey("webinar").attributes):t.$setDirty()})}:function(t){var e=u.component,n=u.webinar;t.$setPristine(),e.start_at=e.start_datetime_tz,e.end_at=e.end_datetime_tz,n.new_webinar_data&&(n.new_webinar_data.description=e.assignment_question_text);p.createSession({component:e,webinar:n,course_id:u.course.id}).then(function(e){400!==e.status?e.data.webinar&&e.data.new_webinar&&(o.setKey("webinar",e.data.webinar),s.addWebinarToAccount(u.webinar.webinar_settings_id,e.data.new_webinar),u.webinar=o.getKey("webinar").attributes):t.$setDirty()})})(e)},u.cancelForm=function(e,t,n){location.reload()},u.formatLocationLabel=function(t,e){e=_.find(e,function(e){return e.id===t.timezone});{if(e&&e.name){return":title :tz".replace(/:title/,t.title).replace(/:tz/,e.name)}return t.title}},u.displayTimezoneName=function(){var e="";if(u.component.location_id&&"__webinar"!=u.component.location_id){var t=_.find(u.component.locations,function(e){return e.id==u.component.location_id});return t&&(e=u.formatLocationLabel(t,u.component.timezone_select_values)),e}},u.isWebinarSelected=function(){return!!u.selectedCreatedWebinar&&!!u.has_webinars},u.locationChanged=function(){u.locationSelected=!!u.component.location_id&&"__webinar"!=u.component.location_id},u.disableEditingWebinar=function(){return u.course.published_status_id!=u.helper.coursePublishedStatuses.draft},u.sendMessageToAttendees=g,n.$on("cancelSession",function(){p.cancelSession(r.component,r.course,function(e){l.location="/courses/:course_id/content".replace(/:course_id/,r.course.id)})}),n.$on("deleteSession",function(){p.deleteSession(function(){l.location="/courses/:course_id/content".replace(/:course_id/,r.course.id)})}),n.$on("sendMessageToAttendees",function(){g()}),n.$on("webinarSelected",function(e,t){t?(t.timezone&&t.backend_timezone&&(u.component.timezone=t.timezone,u.component.ilt_sessions_timezone=t.backend_timezone,u.component.start_datetime_tz=f(t.start_time,m(d),0),u.component.end_datetime_tz=f(t.end_time,m(d),0)),u.selectedCreatedWebinar=!0):u.selectedCreatedWebinar=!1}),u.ckEditorOpts={clear_all_previous_instances:!0,add_embedded_media:!1,add_image_upload_via_dj:!0},l.executeDjImageUpload=function(){c.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return u.component.id},ckeditorInstance:function(){return u.ckeditorInstance},imageType:function(){return u.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})}}angular.module("lu").controller("ComponentSessionEditController",e),e.$inject=["LupHelper","StorageFactory","$scope","$http","$filter","$rootScope","SessionFactory","WebinarService","$window","$modal"]}(),function(z){"use strict";function e(t,e,n,a,o,i,r,s,l,c,u,d,p,_,m,f,g){var h,b,v=new n,w=new m,y=new g,r=r.get();function M(){var e=[{title:i.showMessage("lup.breadcrumbs.components.library"),url:"/components/"}];a.component.component_type_id==i.componentTypes.scorm&&e.push({title:i.showMessage("lup.breadcrumbs.components.scorms"),url:"/components/type/"+a.component.component_type_id}),e.push({title:a.component.title,url:"/components/type/"+a.component.component_type_id+"/"+a.component.id+"/edit"}),t.breadcrumbs=e}function S(e){var t=a.componentElements.map(function(e){return e.id}).indexOf(e.id);-1!=t?(a.componentElements[t]=f.deepExtend(a.componentElements[t],e),a.componentElements[t].caption_status==i.videoCaptionStatuses.processing&&(b=u(function(){$(a.componentElements[t].id,t)},3e3)),a.componentElements[t].caption_status==i.videoCaptionStatuses.uploaded&&(a.componentElements[t]=e)):(a.componentElements.push(e),a.numberOfVideoAndDocumentSegments=T())}function C(e){a.toggledCardId=e.id}function A(e){var t=w.getModalConfig(e);_.open({templateUrl:t.template,controller:t.controller,controllerAs:"vm",windowClass:t.windowClass,backdrop:"static",resolve:{type:function(){return e},componentElement:function(){return a.component_element},componentId:function(){return a.component.id},numberOfVideoAndDocumentSegments:function(){return a.numberOfVideoAndDocumentSegments}}}).result.then(function(e){if(e)switch(e.action){case"save":if(S(e.componentElement),C(e.componentElement),e.componentElement.component_element_type_id===i.componentElementTypes.document)return;var t=document.getElementById("component_element__"+e.componentElement.id);t&&t.scrollIntoView({behavior:"smooth"});break;case"cancel":case"close":a.component_element=null;break;case"delete":a.deleteSegment(e.componentElement.id)}})}function L(n,o,r){w.getComponentElement(n,a.componentElements,!0).then(function(e){w.component_element=a.componentElements[r],C(w.component_element);var t=w.readyForViewing();t&&f.resetInterval(h),o!==i.componentElementTypes.text||a.componentElements[r].text||(a.componentElements[r].text=e.detail),o===i.componentElementTypes.video&&t&&w.component_element.caption_status===i.videoCaptionStatuses.processing&&(b=u(function(){$(n,r)},3e3))})}function $(e,t){w.getVideoCaptionData(e,a.componentElements,!0).then(function(e){w.component_element.caption_status!=i.videoCaptionStatuses.processing&&(a.componentElements[t]=e,f.resetInterval(b))})}function T(){return a.componentElements.filter(function(e){return i.contains([i.componentElementTypes.video,i.componentElementTypes.document],e.component_element_type_id)}).length}a.component=r.component,a.componentElements=r.component_elements?r.component_elements.data:[],a.courses_linked=r.courses_linked.data,a.library_page=!0,a.showLinkedCourses=function(){_.open({templateUrl:"/tc/components/component_linked_courses.html",controller:"ComponentsLinkedCoursesController",size:"lg",resolve:{linkedCourses:function(){return a.courses_linked}}})},a.numberOfVideoAndDocumentSegments=T(),a.ui_flags={can_edit_content:!0},a.toggledCardId=null,a.dragIndex=null,a.cdnPath=CONFIG.cdnPath,a.loadedInSalesforce=r.loaded_in_salesforce,a.addCaptions=function(e){w.getComponentElement(e,a.componentElements).then(function(e){_.open({templateUrl:"/tc/component_elements/add_video_captions.html",controller:"VideoCaptionController",controllerAs:"vm",windowClass:"",backdrop:"static",resolve:{componentElement:function(){return e},componentId:function(){return a.component.id}}}).result.then(function(e){e&&"close"===e.action&&S(e.componentElement)})})},a.removeCaptions=function(t,n){d.confirm(I18n.t("lup.confirm"),I18n.t("component_elements.captions.remove_caption_popup")).then(function(e){y.removeCaption({id:t.video_id}).then(function(e){t.caption_status=i.videoCaptionStatuses.empty,t.caption_file_name="",t.caption_url="",a.componentElements[n]=z.copy(t)},function(e){})})},v.component=a.component,a.Helper=i,a.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===i.keyboard_keys[e.which]){if(e.preventDefault(),null!==a.rememberReorderIndex&&n!==a.rememberReorderIndex){e=t[n];return t[n]=t[a.rememberReorderIndex],t[a.rememberReorderIndex]=e,a.dragSegmentControlListeners.orderChanged(),a.rememberReorderIndex=null,void a.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}a.rememberReorderIndex=n}},a.rememberReorderIndex=null,a.ariaLabel=i.showMessage("lup.tips.course_edit_module"),a.ariaLabelSide=i.showMessage("a11y.library_add_edit_sidebar"),a.ariaLabelForContentSegments=function(e,t){return null!==a.rememberReorderIndex?a.rememberReorderIndex===e?i.showMessage("a11y.exam_order_list.selected",{answer_option:t}):i.showMessage("a11y.exam_order_list.swap",{answer_option:t}):i.showMessage("a11y.exam_order_list.select",{answer_option:t})},a.pingScormForProgress=function(){a.component.s3_scorm_status===i.s3ScormStatuses.pending&&v.pingScormForProgress().then(function(){a.component=v.component,c(function(){a.pingScormForProgress()},3e3)})},a.component.component_type_id===i.componentTypes.scorm&&a.pingScormForProgress(),M(),t.$on("segmentsArrayModified",function(e,t){S(t)}),a.manageSegment=function(t,e){e?w.getComponentElement(e,a.componentElements).then(function(e){a.component_element=e,A(a.component_element.component_element_type_id)}):w.getInitObject(null,a.component.id,t).then(function(e){a.component_element=e,A(t)})},a.saveComponent=function(){return v.component=a.component,v.save().then(function(){M()})},a.deleteSegment=function(n){d.confirm(I18n.t("lup.confirm"),I18n.t("librarypg.are_you_sure_you_want_to_delete_the_element_from_this_page")).then(function(e){return(new m).destroy(n).then(function(){for(var e=[],t=0;t<a.componentElements.length;t++)a.componentElements[t].id!==n&&e.push(a.componentElements[t]);a.componentElements=e,a.numberOfVideoAndDocumentSegments=T()})})},a.downloadVideo=function(e){w.downloadVideo(e)},t.$on("addAudioSegment",function(){a.manageSegment(i.componentElementTypes.audio)}),t.$on("addVideoSegment",function(){a.manageSegment(i.componentElementTypes.video)}),t.$on("addDocumentSegment",function(){a.manageSegment(i.componentElementTypes.document)}),t.$on("addTextSegment",function(){a.manageSegment(i.componentElementTypes.text)}),a.toggleCard=function(e,t,n){f.resetInterval(h),f.resetInterval(b),a.toggledCardId!==e?(L(e,t,n),h=u(function(){L(e,t,n)},3e3)):a.toggledCardId=null},a.activeCard=function(e){return a.toggledCardId===e},t.$on("deleteComponent",function(){a.deleteComponent()}),a.deleteComponent=function(){d.confirm(I18n.t("lup.confirm"),I18n.t("librarypg.are_you_sure_you_want_to_delete_this_page")).then(function(e){return v.destroy(a.component.id).then(function(){p.document.location.href="/components/type/"+a.component.component_type_id})})},a.cancelCreate=function(){p.document.location.href="/components/type/"+a.component.component_type_id},a.dragSegmentControlListeners={orderChanged:function(e){for(var t=[],n=0;n<a.componentElements.length;n++)t.push(a.componentElements[n].id);v.id=a.component.id,v.reorderContent(t).then(function(){})},dragStart:function(e){a.dragIndex=e.dest.index},dragEnd:function(e){a.dragIndex=null},allowDuplicates:!1},t.$on("cloneComponent",function(){a.createCopy(a.component.id)}),a.createCopy=function(e){_.open({templateUrl:"/tc/courses/clone_course_component.html",controller:"CoursesComponentsCloneController",size:"md",resolve:{courseComponentCloneData:function(){return o.get("/components/initiate_clone/:component_id.json".replace(/:component_id/,e))},preselectCourse:function(){return null}}}).result.then(function(e){e.action&&e.action})}}z.module("lu").controller("ComponentsEditController",e),e.$inject=["$rootScope","$compile","ComponentFactory","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","$interval","$luPopover","$window","$modal","ComponentElementFactory","LupService","VideoFactory"]}(window.angular),function(f){"use strict";function e(e,n,o,r,t,a,i,s,l,c,u,d,p){i=i.get();r.component=i.component,r.component_element=i.component_element,r.Helper=a;var _,m=new o;m.id=r.component_element.id,m.component_element=r.component_element,r.canChangeThumbnail=function(){return r.component_element.id&&r.component_element.component_element_type_id==a.componentElementTypes.video&&"finished"==r.component_element.encoded_state},r.hide_delete=!r.canChangeThumbnail(),r.hide_save=!r.canChangeThumbnail(),r.loadSegmentIntoView=function(){m.readyForViewing()||m.failedToProcess()||m.loadSegmentIntoView().then(function(){r.component_element=m.component_element,r.hide_delete=!r.canChangeThumbnail(),r.hide_save=!r.canChangeThumbnail(),c(function(){r.loadSegmentIntoView()},3e3)})},r.component_element.component_element_type_id===a.componentElementTypes.text?(r.ckeditorInstance="segment_text_wysi",r.imageType=a.fileUploads.types.component_element_image,a.renderCKEditor({clear_all_previous_instances:!1,id:r.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0,editorTextChangeEvent:function(){r.forceShowSave=!0,r.$apply()}})):r.loadSegmentIntoView(),d.executeDjImageUpload=function(){p.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return r.component_element.id},ckeditorInstance:function(){return r.ckeditorInstance},imageType:function(){return r.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},r.closeSegment=function(){d.document.location.href="/components/type/"+r.component.component_type_id+"/"+r.component.id+"/edit"},_=[{title:I18n.t("lup.breadcrumbs.components.library"),url:"/components/type/"+r.component.component_type_id},{title:r.component.title,url:"/components/type/"+r.component.component_type_id+"/"+r.component.id+"/edit"},{title:a.segmentBreadCrumbTitle(r.component_element.component_element_type_id),url:"/components/"+r.component.id+"/content/"+r.component_element.id+"/edit"}],e.breadcrumbs=_,r.setNumberOfPagesInDocument=function(e){m.component_element=r.component_element,m.setNumberOfPagesInDocument(e)},d.setNumberOfPagesInDocument=r.setNumberOfPagesInDocument,r.loadSegment=function(e){r.segmentsForDirective=[e];var t=document.getElementById("documentViewer");t&&(f.element(t).empty(),e=n("<lup-show-page-segment segments='segmentsForDirective' admin-view='true'></lup-show-page-segment>")(r),f.element(t).append(e))},r.saveSegment=function(){return m.save(r.component.id,r.component_element).then(function(){d.location.reload()})},e.$on("deleteSegment",function(){r.deleteSegment()}),r.deleteSegment=function(){u.confirm(I18n.t("lup.confirm"),I18n.t("librarypg.are_you_sure_you_want_to_delete_the_element_from_this_page")).then(function(e){var t=new o,n=null,n=r.component_element.component_element_id?r.component_element.component_element_id:r.component_element.id;return t.destroy(n).then(function(){d.document.location.href="/components/type/"+r.component.component_type_id+"/"+r.component.id+"/edit"})})}}f.module("lu").controller("ComponentsEditSegmentController",e),e.$inject=["$rootScope","$compile","ComponentElementFactory","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","$luPopover","$window","$modal"]}(window.angular),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c){var t=t.get(),u=new i;n.components=t.components,n.type=t.type,n.Helper=o,n.editComponent=function(e){r.location="/components/type/"+e.component_type_id+"/"+e.id+"/edit"},n.deleteComponent=function(t){c.confirm(I18n.t("lup.confirm"),I18n.t("librarypg.are_you_sure_you_want_to_delete_this_page")).then(function(e){u.destroy(t.id).then(function(){n.loadData(t.component_type_id)})})},n.createCopy=function(e){s.open({templateUrl:"/tc/courses/clone_course_component.html",controller:"CoursesComponentsCloneController",size:"md",resolve:{courseComponentCloneData:function(){return l.get("/components/initiate_clone/:component_id.json".replace(/:component_id/,e))},preselectCourse:function(){return null}}}).result.then(function(e){e.action&&e.action})},n.ariaLabel=o.showMessage("a11y.library_module_main"),n.ariaLabelSide=o.showMessage("a11y.library_module_sidebar"),n.getCurrentPageA11Y=function(e){return o.showMessage("dashboard.modules")+" "+o.showMessage("lup.a11y.page")+" "+e+" "+o.showMessage("lup.a11y.loaded")},n.activeModuleDDM={},n.toggled=function(e,t){n.activeModuleDDM[t]=e};t=[{title:o.showMessage("lup.breadcrumbs.components.library"),url:"/components/"}];n.type==o.componentTypes.scorm&&(n.ariaLabel=o.showMessage("lup.a11y.scorm_and_tincan_main"),n.ariaLabelSide=o.showMessage("lup.a11y.scorm_and_tincan_aside"),t.push({title:o.showMessage("lup.breadcrumbs.components.scorms"),url:"/components/type/"+o.componentTypes.scorm})),e.breadcrumbs=t,n.loadData=function(){var e={};e.params=a.get(),n.type&&(e.params.component_type=n.type),u.getList(e).then(function(){n.components=u.data.components})},e.$on("addPage",function(){r.location="/components/type/"+o.componentTypes.page+"/new"}),e.$on("addScorm",function(){r.location="/components/type/"+o.componentTypes.scorm+"/new"}),n.sortOptions=[{label:o.showMessage("lup.filters.name_az"),value:"title.ASC",default:!0},{label:o.showMessage("lup.filters.name_za"),value:"title.DESC"},{label:o.showMessage("lup.filters.created_at"),value:"created_at.DESC"},{label:o.showMessage("lup.filters.oldest_first"),value:"created_at.ASC"}]}angular.module("lu").controller("ComponentsIndexController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","paramsService","ComponentFactory","$modal","$http","$luPopover"]}(),function(){"use strict";function e(e,t,n,o){e.lupHelper=o,e.linkedCourses=n,e.close=function(){t.close()}}angular.module("lu").controller("ComponentsLinkedCoursesController",e),e.$inject=["$scope","$modalInstance","linkedCourses","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i,r=r.get(),s=new t;n.component=r.component,n.Helper=o,n.saveComponent=function(){return s.component=n.component,s.save().then(function(){a.location="/components/type/"+s.component.component_type_id+"/"+s.component.id+"/edit"})},n.saveComponentNoRedirect=function(){return s.component=n.component,s.save()},n.is_admin=r.is_admin,n.ariaLabel=o.showMessage("a11y.new_module_main"),n.ariaLabelSide=o.showMessage("lup.components.module_info"),i=o.showMessage("lup.breadcrumbs.components.new_module"),n.component.component_type_id==o.componentTypes.scorm&&(n.ariaLabel=o.showMessage("scorm_upload.create_a_new_module"),i=o.showMessage("lup.breadcrumbs.components.new_scorm")),i=[{title:I18n.t("lup.breadcrumbs.components.library"),url:"/components/type/"+n.component.component_type_id},{title:i,url:"/components/type/"+n.component.component_type_id+"/new"}],e.breadcrumbs=i,n.cancelCreate=function(){a.document.location.href="/components/"}}window.angular.module("lu").controller("ComponentsNewController",e),e.$inject=["$rootScope","ComponentFactory","$scope","LupHelper","StorageFactory","$window"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p){var _,i=i.get();o.component=i.component,o.component_element=i.component_element,o.component_element.component_element_type_id=o.component_element.resource_type_id,delete o.component_element.resource_type_id,o.Helper=a,o.ckeditorInstance="segment_text_wysi",o.imageType=a.fileUploads.types.component_element_image,a.renderCKEditor({clear_all_previous_instances:!1,id:o.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0,editorTextChangeEvent:function(){o.forceShowSave=!0,o.$apply()}}),d.executeDjImageUpload=function(){p.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return o.component_element.id},ckeditorInstance:function(){return o.ckeditorInstance},imageType:function(){return o.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},o.closeSegment=function(){d.document.location.href="/components/type/"+o.component.component_type_id+"/"+o.component.id+"/edit"},_=[{title:I18n.t("lup.breadcrumbs.components.library"),url:"/components/type/"+o.component.component_type_id},{title:o.component.title,url:"/components/type/"+o.component.component_type_id+"/"+o.component.id+"/edit"},{title:a.newSegmentBreadCrumbTitle(o.component_element.component_element_type_id),url:"/components/"+o.component.id+"/edit/"+o.component_element.component_element_type_id+"/new"}],e.breadcrumbs=_,o.saveSegment=function(){var e=new n;return o.hide_delete=!0,e.save(o.component.id,o.component_element).then(function(){o.component_element=e.component_element,o.component_element&&o.component_element.id&&(d.location="/components/type/"+o.component.component_type_id+"/"+o.component.id+"/edit")})}}window.angular.module("lu").controller("ComponentsNewSegmentController",e),e.$inject=["$rootScope","$compile","ComponentElementFactory","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","$luPopover","$window","$modal"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l,c,u,d,p){var _=this;_.LupHelper=s,_.Upload=o,_.componentElement=angular.copy(u),_.showPageSegment=b,_.showEncodingSection=v,_.cancel=function(){i.resetInterval(f),_.isUploadCanceled=!0,n.close({action:"cancel"})},_.deleteSegment=function(){n.close({action:"delete",componentElement:_.componentElement})},_.saveSegment=g,_.getModalTitle=function(e){return b(e)?_.LupHelper.showMessage("lup.components.document_settings"):_.LupHelper.showMessage("lup.components.add_document")},_.componentElementCancelText=function(e,t){return v(e,t)?_.LupHelper.showMessage("close"):_.LupHelper.showMessage("cancel")},_.somethingWasUploaded=!1,_.processingUpload=!1,_.maxFileSize=function(){return"100MB"},_.acceptedFiles=function(){return".doc,.ppt,.pptx,.docx,.pdf,.rtf,.xls,.xlsx"};var m=new c;m.id=_.componentElement.id,m.component_element=_.componentElement,h();var f=r(function(){h()},3e3);function g(e){e&&e.$setValidity("emptyTitle",!!_.componentElement.title),angular.isDefined(e)&&!e.$valid||(f=r(function(){h()},3e3),m.save(p,_.componentElement).then(function(){return _.componentElement=m.component_element,m.readyForViewing()?n.close({action:"save",componentElement:m.component_element}):(t.$broadcast("segmentsArrayModified",m.component_element),void h())}))}function h(){m.id&&!m.readyForViewing()?m.loadSegmentIntoView().then(function(){_.componentElement=m.component_element,m.readyForViewing()&&(_.somethingWasUploaded=!1,t.$broadcast("segmentsArrayModified",_.componentElement))}):i.resetInterval(f)}function b(e){return!!e&&!!e.id&&e.document_status==s.component_element_statuses.viewable}function v(e,t){return!!e&&!!e.id&&!!e.document_status&&e.document_status!=_.LupHelper.component_element_statuses.failed&&e.document_status!=_.LupHelper.component_element_statuses.viewable||t}e.$watch("ap.documentUpload",function(e){_.formUpload=!1,e&&(_.documentUpload=e,_.invalidCharsMsg=l.validateS3Filename(e.name),_.invalidCharsMsg||l.getData(s.fileUploads.types.document,function(r){a(function(){var e,t,n,o=r.data.signature_data.attributes;_.errorMsg=null,e=_.documentUpload,t=e,n=o,_.errorMsg=null,_.isUploadCanceled=!1,l.uploadFiles(t,n,function(e){if(_.processingUpload=!1,a(function(){_.documentUpload.result=e.data}),_.componentElement.uuid=n.guid,_.componentElement.attachment_file_name=t.name,_.componentElement.attachment_file_size=t.size,_.componentElement.attachment_content_type=t.type,_.componentElement.output_url=n.folder_path+t.name,_.componentElement.component_element_type_id=s.componentElementTypes.document,_.somethingWasUploaded=!0,!_.isUploadCanceled)return g()},function(e){_.processingUpload=!1,0<e.status&&(_.errorMsg=e.status+": "+e.data)},function(e){_.processingUpload=!0,t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){_.processingUpload=!1}))})}angular.module("lu").controller("DocumentEditController",e),e.$inject=["$rootScope","$scope","$modalInstance","Upload","$interval","$timeout","LupService","LupHelper","s3HelperFactory","ComponentElementFactory","componentElement","type","componentId"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=new r;e.LupHelper=o,e.download=function(){n.open(e.url,"_blank"),t.close()},e.cancel=function(){t.close()},e.url=null,a?s.downloadOriginalFile(a,i).then(function(){e.url=s.resource_url}):t.close()}angular.module("lu").controller("DownloadResourceController",e),e.$inject=["$scope","$modalInstance","$window","LupHelper","ComponentElementFactory","ResourceId","authToken"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l,c,u){t.lupHelper=n,t.openUploadModal=function(){e.dismiss(),i(t.file).then(function(e){e.uploadLocation&&(s(t.file,l(e.uploadLocation)),c())})},t.file=a,t.component=u,t.component.cleared_suspend_data=!1}angular.module("lu").controller("ResetSuspendDataScormModalController",e),e.$inject=["$scope","$modalInstance","LupHelper","$http","LupJobFactory","file","openUploadScormTincanModal","buildScormTincanComponent","parseFolderNameFromUploadLocation","saveScormTinCanComponent","component"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l,c,u){t.lupHelper=n,t.openUploadModal=function(){e.dismiss(),i(t.file).then(function(e){e.uploadLocation&&(s(t.file,l(e.uploadLocation)),c())})},t.closeModal=function(){e.dismiss()},t.file=a,t.component=u,t.component.cleared_suspend_data=!1}angular.module("lu").controller("ResetSuspendDataTincanModalController",e),e.$inject=["$scope","$modalInstance","LupHelper","$http","LupJobFactory","file","openUploadScormTincanModal","buildScormTincanComponent","parseFolderNameFromUploadLocation","saveScormTinCanComponent","component"]}(),function(){"use strict";function e(e,t,n,o){e.description=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("component_description_wysi");t.close({description:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("ScormAddDescriptionController",e),e.$inject=["$scope","$modalInstance","description","LupHelper"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s){var l=this,c=new i;l.helper=n,l.badges=r,l.enrollment=o,l.socialSharing=a,l.socialSharingEnabled=a&&(a.linkedin_is_enabled&&!!o.certification_id||a.twitter_is_enabled),l.enrollmentSuccessfullyFinished=o.status_id===n.enrollmentStatuses.completed||o.status_id===n.enrollmentStatuses.passed,l.completionTitleMsg=function(){if(l.enrollmentSuccessfullyFinished)return n.showMessage("emails.email_title_completed_course");return n.showMessage("components.failed_but_no_reattempts")}(),l.completionIcon=function(){if(l.enrollmentSuccessfullyFinished)return"fa-thumbs-o-up";return"fa-thumbs-o-down"}(),l.completionInfoMsg=function(){if(l.enrollmentSuccessfullyFinished)return o.certification_id&&l.socialSharingEnabled?n.showMessage("lup.courses.completion_messages.info.download_and_share"):!o.certification_id&&l.socialSharingEnabled?n.showMessage("lup.courses.completion_messages.info.social_share"):o.certification_id&&!l.socialSharingEnabled?n.showMessage("lup.courses.completion_messages.info.download_cert"):void 0}(),l.completionAttemptsMsg=o.has_attempts_remaining?n.showMessage("lup.courses.completion_messages.info.try_again"):n.showMessage("lup.courses.completion_messages.info.final_attempt"),l.close=function(){t.close()},l.downloadCertificate=function(e){var t=new s,e={typeId:n.lupJobTypes.downloadCertificate,enrollment_id:e,for_course:!0,user_id:null};t.initiateJob(e)},l.linkedinShare=function(e){c.shareDialog(e)}}angular.module("lu").controller("ScormTcFinishModalController",e),e.$inject=["$scope","LupHelper","$modalInstance","enrollment","badges","socialSharing","SocialSharingFactory","LupJobFactory"]}(),function(){"use strict";function e(t,o,e,n,r,a,i,s,l,c,u,d,p,_,m){angular.extend(this,n("BasePageController as base",{$scope:o})),o.LupHelper=u,o.processingUpload=!1,o.Upload=a,o.replacingContent=!1,o.forceShowSave=!1,o.isATinCanExam=o.component.is_tin_can&&o.component.mastery_score;a=parseInt(o.component.num_scorm_attempts_allowed);o.disableOvewrite=0<a,o.save=function(e){null!==o.component.mastery_score&&e.$setValidity("validMasteryScore",/^[0-9]*$/.test(o.component.mastery_score)&&o.component.mastery_score<=100),null!==o.component.num_scorm_attempts_allowed&&e.$setValidity("validScormAttempts",/^[0-9]*$/.test(o.component.num_scorm_attempts_allowed)&&0<o.component.num_scorm_attempts_allowed&&o.component.num_scorm_attempts_allowed<=1e3||!o.component.num_scorm_attempts_allowed),e.$valid&&o.saveComponent().then(function(){o.forceShowSave=!1})},o.openUploadScormTincanModal=function(e){return t.open({templateUrl:"/tc/components/upload-scorm-tincan-modal.html",controller:"UploadScormTincanModalCtrl",size:"md",backdrop:"static",keyboard:!1,windowClass:"modal-box",resolve:{file:function(){return e}}}).result},o.openConfirmTincanReplaceActionModal=function(e){return t.open({templateUrl:"/tc/components/reset-suspend-data-tincan-modal.html",controller:"ResetSuspendDataTincanModalController",size:"md",backdrop:"static",keyboard:!1,windowClass:"modal-box",resolve:{file:function(){return e},openUploadScormTincanModal:function(){return o.openUploadScormTincanModal},buildScormTincanComponent:function(){return o.buildScormTincanComponent},parseFolderNameFromUploadLocation:function(){return o.parseFolderNameFromUploadLocation},saveScormTinCanComponent:function(){return o.saveScormTinCanComponent},component:function(){return o.component}}}).result},o.openResetSuspendDataModal=function(e){return t.open({templateUrl:"/tc/components/reset-suspend-data-scorm-modal.html",controller:"ResetSuspendDataScormModalController",size:"md",backdrop:"static",keyboard:!1,windowClass:"modal-box",resolve:{file:function(){return e},openUploadScormTincanModal:function(){return o.openUploadScormTincanModal},buildScormTincanComponent:function(){return o.buildScormTincanComponent},parseFolderNameFromUploadLocation:function(){return o.parseFolderNameFromUploadLocation},saveScormTinCanComponent:function(){return o.saveScormTinCanComponent},component:function(){return o.component}}}).result},o.copyCodeSnippet=function(){var e=document.getElementById("scorm_code");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),m.info(u.showMessage("lup.scorm.copy_code_toaster_message"),null,{closeButton:!0})},o.setDescription=function(){var e=t.open({templateUrl:"/tc/components/add-scorm-description.html",controller:"ScormAddDescriptionController",size:"lg",resolve:{description:function(){return o.component.description}}});window.executeDjImageUpload=function(){t.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return o.component.id},ckeditorInstance:function(){return o.ckeditorInstance},imageType:function(){return o.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},e.opened.then(function(){o.ckeditorInstance="component_description_wysi",o.imageType=o.LupHelper.fileUploads.types.component_description,i(function(){u.renderCKEditor({clear_all_previous_instances:!1,id:o.ckeditorInstance,add_image_upload:!1,save_button_action:"save_text_button",add_embedded_media:!1,add_image_upload_via_dj:!0,show_source:!0,width:"100%"})},100)}),e.result.then(function(e){e&&void 0!==e.description&&(o.component.description!=e.description&&(o.forceShowSave=!0),o.component.description=e.description)})},o.setRetryUpload=function(){o.component.is_replacement=!0,o.component.replace_component_id=o.component.id},o.setAttemptFlags=function(){var e=parseInt(o.component.num_scorm_attempts_allowed);isNaN(e)||1!==e?(1<e?(o.component.overwrite_previous_attempt=!0,o.disableOvewrite=!0,document.getElementById("overwrite_previous_attempt").disabled=!0):(o.component.overwrite_previous_attempt=!1,o.disableOvewrite=!1,document.getElementById("overwrite_previous_attempt").disabled=!1),o.disableOverwriteBetter=!1,document.getElementById("only_overwrite_if_better").disabled=!1):(o.component.overwrite_previous_attempt=!1,o.disableOvewrite=!0,document.getElementById("overwrite_previous_attempt").disabled=!0,o.component.only_overwrite_if_better=!1,o.disableOverwriteBetter=!0,document.getElementById("only_overwrite_if_better").disabled=!0)},o.$watch(function(e){return e.isATinCanExam},function(e,t){t!==e&&(o.component.mastery_score=e?100:null)}),o.$watch(function(e){return e.component.num_scorm_attempts_allowed},function(e,t){t!==e&&o.setAttemptFlags()}),o.$watch(function(e){return e.component.overwrite_previous_attempt},function(e,t){t&&!e&&(e||(o.component.only_overwrite_if_better=!1))}),o.$watch(function(e){return e.component.only_overwrite_if_better},function(e,t){!t&&e&&(o.component.overwrite_previous_attempt=!0)}),o.$watch(function(){return o.component.mastery_score},function(e,t){o.component.is_tin_can&&!0===e&&(o.component.mastery_score=100),o.isATinCanExam=!!o.component.is_tin_can&&!!o.component.mastery_score}),o.showUpdatedBy=function(){var e=_("displayDateTime")(o.component.updated_at,"dddd, MMMM Do YYYY, @ h:mm a");return u.showMessage("components.last_published",{edit_time:e})},o.displayType=function(){return o.component.is_tin_can?"TinCan":"SCORM"},o.scormErrorMsg=function(){return o.component.s3_scorm_status===u.s3ScormStatuses.version_not_supported?u.showMessage("lup.failed_to_upload_version_not_supported_unknown_version"):o.component.s3_scorm_status===u.s3ScormStatuses.no_launchables?o.component.is_tin_can?u.showMessage("tc_failed_to_upload_no_launchables_in_the_manifest"):u.showMessage("failed_to_upload_no_launchables_in_the_manifest"):o.component.s3_scorm_status===u.s3ScormStatuses.no_default_org?u.showMessage("failed_to_upload_no_default_org_in_manifest"):o.component.s3_scorm_status===u.s3ScormStatuses.no_manifest_found?u.showMessage("failed_to_upload_no_manifest_in_zip"):o.component.s3_scorm_status===u.s3ScormStatuses.cannot_swap_types?u.showMessage("cannot_swap_types"):u.showMessage("scorm_upload.scorm_upload_errors")},o.maxFileSize=function(){return"2500MB"},o.acceptedFiles=function(){return".zip"},o.beginUpload=function(e){var t;e&&0!==e.length&&(1<e.length?o.bulkBeginUpload(e):(t=e[0],o.replacingContent&&!o.component.is_tin_can?o.openResetSuspendDataModal(t):o.replacingContent&&o.component.is_tin_can?o.openConfirmTincanReplaceActionModal(t):o.openUploadScormTincanModal(t).then(function(e){e.uploadLocation&&(o.buildScormTincanComponent(t,o.parseFolderNameFromUploadLocation(e.uploadLocation)),o.saveScormTinCanComponent())})))},o.parseFolderNameFromUploadLocation=function(e){var t=e.split("/"),e="s3"===t[2].split(".")[1]?3:4;return t.slice(e,t.length-1).join("/")},o.buildScormTincanComponent=function(e,t){o.component.file_name=e.name,o.component.content_type=e.type,o.component.file_size=e.size,o.component.output_url=t+"/"+e.name,o.component.component_type_id=u.componentTypes.scorm,o.replacingContent&&(o.component.is_replacement=!0,o.component.replace_component_id=o.component.id)},o.saveScormTinCanComponent=function(){return o.saveComponent().then(function(){(o.replacingContent||o.component.retry_permitted||o.component.s3_scorm_status>u.s3ScormStatuses.completed)&&(o.replacingContent=!1,l.location.reload())})},o.cancelReplacement=function(e){e.stopPropagation(),o.replacingContent=!1},o.bulkBeginUpload=function(n){if(n&&0!==n.length){for(var e=0,t=0;t<n.length;t++)e+=n[t].size;25e8<e?m.error(u.showMessage("lup.scorm.bulk.error.total_size_over_max")):100<n.length?m.error(u.showMessage("lup.scorm.bulk.error.total_file_count_over_max")):o.bulkOpenUploadScormTincanModal(n).then(function(e){for(var t=0;t<n.length;t++)o.bulkBuildScormTincanComponent(n[t],o.parseFolderNameFromUploadLocation(e.uploadLocations[n[t].name]));o.bulkSaveScormTinCanComponent().then(function(){l.location="/task-tracking"})})}},o.bulkBuildScormTincanComponent=function(e,t){e={file_name:e.name,content_type:e.type,file_size:e.size,output_url:t+"/"+e.name};o.component.scorms?o.component.scorms.push(e):o.component.scorms=[e],o.component.component_type_id=u.componentTypes.scorm,o.component.bulk=!0},o.bulkSaveScormTinCanComponent=function(){return o.saveComponentNoRedirect().then(function(e){return e})},o.bulkOpenUploadScormTincanModal=function(e){return t.open({templateUrl:"/tc/components/upload-bulk-scorm-tincan-modal.html",controller:"UploadBulkScormTincanModalCtrl",size:"md",backdrop:"static",keyboard:!1,windowClass:"modal-box",resolve:{files:function(){return e}}}).result}}angular.module("lu").controller("ScormTinCanEditController",e),e.$inject=["$modal","$scope","$luPopover","$controller","$http","Upload","$timeout","$sce","$window","EnrollmentHelper","LupHelper","s3HelperFactory","spinnerService","$filter","toastr"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this;l.LupHelper=r,l.cancel=function(){t.close({action:"cancel"})},l.saveSegment=function(e){(function(e){e.$setValidity("emptyContent",!!l.LupHelper.getHTMLFromCKEditor("segment_text_wysi"))})(e),e.$valid&&(l.componentElement.detail=l.LupHelper.getHTMLFromCKEditor("segment_text_wysi"),u.save(s,l.componentElement).then(function(){u.component_element.text=l.componentElement.detail,t.close({action:"save",componentElement:u.component_element})}))},l.deleteSegment=function(){t.close({action:"delete",componentElement:l.componentElement})},l.componentElement=i,l.hide_delete=!0;var c=l.LupHelper.fileUploads.types.component_element_image,u=new o;u.id=l.componentElement.id,u.component_element=l.componentElement,n(function(){l.LupHelper.renderCKEditor({clear_all_previous_instances:!0,id:"segment_text_wysi",add_image_upload_via_dj:!0,image_type:c,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",height:"45vh",show_source:!0})})}angular.module("lu").controller("TextSegmentEditController",e),e.$inject=["$scope","$modalInstance","$timeout","ComponentElementFactory","LupHelper","type","componentElement","componentId"]}(),function(){"use strict";function e(t,n,e,s,l,o,r,a){var c=this;t.files=r,t.uploadProgress={},t.isDisplayingCancelPrompt=!1,t.confirmCancelUpload=function(){c.cancelUpload(),c.closeModal({})},t.lupHelper=s,c.init=function(){o.enable(),c.uploadFilesToS3().then(function(e){c.closeModal({uploadLocations:e})},function(e){c.handleIncompleteUpload(e)})},c.uploadFilesToS3=function(){var r=0,a=[].concat(t.files),i={};return new Promise(function(n,o){!function e(){if(0!==a.length||0!==r)for(;r<4&&0<a.length;){var t=a.shift();r++,function(t,n,o,r){l.uploadToS3(t,s.fileUploads.types.scorm_or_tincan,c.updateProgressBarCallback).then(function(e){n[t.name]=l.getS3UploadLocation(e),o()}).catch(function(e){r(e)})}(t,i,function(){r--,e()},o)}else n(i)}()})},c.updateProgressBarCallback=function(e){t.uploadProgress[e.config.data.file.name]=e.progress},c.cancelUpload=function(){c.isCancelled=!0,t.files.forEach(function(e){e.upload&&e.upload.abort()})},c.handleIncompleteUpload=function(e){c.isCancelled||a.onError({error:s.showMessage("error_occured_please_try_again")});c.closeModal({})},c.closeModal=function(e){o.disable(),n.close(e)},c.isCancelled=!1,c.init()}angular.module("lu").controller("UploadBulkScormTincanModalCtrl",e),e.$inject=["$scope","$modalInstance","$luPopover","LupHelper","UploadService","LeavePageWithUnsavedChangesWarning","files","notifyFactory"]}(),function(){"use strict";function e(t,n,e,o,r,a,i,s){var l=this;t.file=i,t.uploadProgress=0,t.isDisplayingCancelPrompt=!1,t.confirmCancelUpload=function(){l.cancelUpload(),l.closeModal({})},t.lupHelper=o,l.init=function(){a.enable(),l.uploadFileToS3().then(function(e){l.closeModal({uploadLocation:r.getS3UploadLocation(e)})},function(e){l.handleIncompleteUpload(e)})},l.uploadFileToS3=function(){return r.uploadToS3(t.file,o.fileUploads.types.scorm_or_tincan,l.updateProgressBarCallback)},l.updateProgressBarCallback=function(e){t.uploadProgress=e.progress},l.cancelUpload=function(){if(l.isCancelled=!0,!t.file.upload)return;t.file.upload.abort()},l.handleIncompleteUpload=function(e){l.isCancelled||s.onError({error:o.showMessage("error_occured_please_try_again")});l.closeModal({})},l.closeModal=function(e){a.disable(),n.close(e)},l.isCancelled=!1,l.init()}angular.module("lu").controller("UploadScormTincanModalCtrl",e),e.$inject=["$scope","$modalInstance","$luPopover","LupHelper","UploadService","LeavePageWithUnsavedChangesWarning","file","notifyFactory"]}(),function(){"use strict";function e(a,e,t,i,n,s,l,o,r,c,u){var d=this;d.lupHelper=n,d.componentElement=angular.copy(u),d.cancel=function(){l.resetInterval(p),d.isUploadCanceled=!0,e.close({action:"close",componentElement:m.component_element})},d.componentElementCancelText=function(e){return e.caption_status==d.lupHelper.videoCaptionStatuses.empty||d.fileUploadInProgress?d.lupHelper.showMessage("cancel"):d.lupHelper.showMessage("close")},d.fileUploadInProgress=!1;var p,_=new o,m=new r;m.id=d.componentElement.id,m.component_element=d.componentElement,d.maxFileSize=function(){return"5MB"},d.acceptedFiles=function(){return".vtt"},a.$watch("vm.captionUpload",function(r){r&&s.getData(n.fileUploads.types.video_caption,function(o){t(function(){var t,n,e=o.data.signature_data.attributes;a.errorMsg=null,t=r,n=e,a.errorMsg=null,s.uploadFiles(t,n,function(e){t.result=e.data,d.isUploadCanceled||_.procesCaption({id:d.componentElement.video_id,output_url:n.folder_path+t.name}).then(function(e){d.componentElement.caption_status=d.lupHelper.videoCaptionStatuses.processing,d.fileUploadInProgress=!1,p=i(function(){m.id&&d.componentElement.caption_status==d.lupHelper.videoCaptionStatuses.processing?m.loadSegmentIntoView().then(function(){d.componentElement=m.component_element}):l.resetInterval(p)},3e3)},function(e){})},function(e){d.fileUploadInProgress=!1,0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){d.fileUploadInProgress=!0,t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){},{data:{resource_id:d.componentElement.id}})})}angular.module("lu").controller("VideoCaptionController",e),e.$inject=["$scope","$modalInstance","$timeout","$interval","LupHelper","s3HelperFactory","LupService","VideoFactory","ComponentElementFactory","componentId","componentElement"]}(),function(){"use strict";function e(a,i,e,t,n,o,r,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y,M,S){angular.extend(this,t("BasePageController as base",{$scope:i}));var C=this;C.LupHelper=m,C.Upload=o,C.componentElement=angular.copy(w),C.showPageSegment=T,C.showEncodingSection=z,C.cancel=function(){p.resetInterval(L),C.isUploadCanceled=!0,s.close({action:"cancel"})},C.deleteSegment=function(){s.close({action:"delete",componentElement:C.componentElement})},C.saveSegment=function(e){e&&function(e){e.$setValidity("emptyTitle",!!C.componentElement.title)}(e);angular.isDefined(e)&&!e.$valid||(L=l(function(){$()},3e3),A.save(M,C.componentElement).then(function(){return C.componentElement=A.component_element,A.readyForViewing()?(C.image_for_upload&&f.getData(C.LupHelper.fileUploads.types.video_thumbnail_image,function(t){c(function(){var e=t.data.signature_data.attributes;i.errorMsg=null,function(n,o){if(!n)return;i.errorMsg=null,C.componentElement.thumbnail=!1,a.$broadcast("segmentsArrayModified",C.componentElement),f.uploadFiles(n,o,function(e){c(function(){n.result=e.data}),function(e){e=(new DOMParser).parseFromString(e,"text/xml");e.getElementsByTagName("Location")[0]&&(C.componentElement.thumbnail=e.getElementsByTagName("Location")[0].textContent,a.$broadcast("segmentsArrayModified",C.componentElement))}(e.data);var t=new b;return t.uuid=o.guid,t.image_file_name=n.name,t.output_url=o.folder_path+n.name,t.component_element_type_id=m.componentElementTypes.video,t.id=C.componentElement.component_element_id,t.video_id=C.componentElement.video_id,t.portal_id=C.componentElement.portal_id,t.uploadImage()},function(e){0<e.status&&(i.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(C.image_for_upload,e)})},function(e){},{data:{resource_id:C.componentElement.id}}),s.close({action:"save",componentElement:A.component_element})):(C.numberOfVideoAndDocumentSegments++,void a.$broadcast("segmentsArrayModified",A.component_element))}))},C.getModalTitle=function(e){return T(e)?C.LupHelper.showMessage("lup.component_elements.video_settings"):C.LupHelper.showMessage("lup.components.add_video")},C.componentElementCancelText=function(e,t){return z(e,t)?C.LupHelper.showMessage("close"):C.LupHelper.showMessage("cancel")},C.openCropper=function(e){{e&&r.open({templateUrl:"/tc/component_elements/thumbnail-cropper.html",controller:"PostCoverCropperController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e}}}).result.then(function(e){e&&e.image_for_upload&&e.image_for_preview&&(C.image=e.image_for_preview,C.image_for_upload=e.image_for_upload)})}},C.canChangeThumbnail=function(){return C.componentElement.id&&C.componentElement.component_element_type_id==C.LupHelper.componentElementTypes.video&&"finished"==C.componentElement.encoded_state},C.enabledVideoTracking=function(){return C.numberOfVideoAndDocumentSegments<2},C.processingUpload=!1,C.numberOfVideoAndDocumentSegments=S,C.somethingWasUploaded=!1,C.maxThumbnailSize=C.LupHelper.image_upload_settings.file_size_5_mb+"MB",C.acceptedThumbnails=function(){return C.LupHelper.image_upload_settings.file_types.join(",")},C.validateThumbnailFileName=function(e){if(e.name.length>C.LupHelper.videoThumbnail.maxFileNameLength)return"maxFileNameLength";return null};var A=new b;A.id=C.componentElement.id,A.component_element=C.componentElement,$();var L=l(function(){$()},3e3);function $(){A.id&&!A.readyForViewing()?A.loadSegmentIntoView().then(function(){C.componentElement=A.component_element,A.readyForViewing()?(C.somethingWasUploaded=!1,a.$broadcast("segmentsArrayModified",C.componentElement)):A.failedToProcess()&&(C.somethingWasUploaded=!1,p.resetInterval(L))}):p.resetInterval(L)}function T(e){return!!e&&!!e.id&&e.encoded_state==C.LupHelper.component_element_statuses.finished}function z(e,t){return!!e&&!!e.id&&!!e.encoded_state&&e.encoded_state!=C.LupHelper.component_element_statuses.failed&&e.encoded_state!=C.LupHelper.component_element_statuses.finished||t}C.maxFileSize=function(){return"3500MB"},C.acceptedFiles=function(){return".ogg,.oga,.ogv,.ogx,.3gp,.3gp2,.3g2,.3gpp,.3gpp2,.mp4,.m4a,.m4v,.f4v,.f4a,.m4b,.m4r,.f4b,.mov,.flv,.mpg,.mpeg,.avi,.wmv"},i.$watch("ap.videoUpload",function(r){a.video_thumbnail_image_reference=!1,i.formUpload=!1,r&&(C.videoUpload=r,f.getData(m.fileUploads.types.video,function(o){c(function(){var t,n,e=o.data.signature_data.attributes;i.errorMsg=null,t=r,n=e,i.errorMsg=null,f.uploadFiles(t,n,function(e){if(c(function(){t.result=e.data}),C.componentElement.uuid=n.guid,C.componentElement.video_file_name=t.name,C.componentElement.video_content_type=t.type,C.componentElement.video_file_size=t.size,C.componentElement.output_url=n.folder_path+t.name,C.componentElement.component_element_type_id=m.componentElementTypes.video,C.somethingWasUploaded=!0,!C.isUploadCanceled)return C.saveSegment()},function(e){C.processingUpload=!1,0<e.status&&(i.errorMsg=e.status+": "+e.data)},function(e){C.processingUpload=!0,t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){}))})}angular.module("lu").controller("VideoEditController",e),e.$inject=["$rootScope","$scope","$luPopover","$controller","$http","Upload","$modal","$modalInstance","$interval","$timeout","$sce","$window","LupService","EnrollmentHelper","LupHelper","s3HelperFactory","spinnerService","StorageFactory","ComponentElementFactory","ImageUploadService","componentElement","type","componentId","numberOfVideoAndDocumentSegments"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this;s.couponEdit=angular.copy(o),s.couponEdit.expiry_date=s.couponEdit.expiry_date?i("displayDateTime")(s.couponEdit.expiry_date,"YYYY-MM-DD"):null,s.helper=t,s.discountTypeChange=function(){1==s.couponEdit.discount_type?s.toggle=1:s.toggle=0},s.toggle=s.couponEdit.discount_type,s.save=function(e){{var t;e.$setValidity("validCouponCode",s.helper.couponCodeValidation(s.couponEdit.code)),e.$setValidity("validCouponCodeLength",s.helper.couponCodeLengthValidation(s.couponEdit.code)),e.$setValidity("validDiscount",!!s.couponEdit.discount),e.$setValidity("validUsageLimitsValue",s.helper.couponUsageLimitsValueValidation(s.couponEdit.usage_count)),s.couponEdit.discount_type=String(s.couponEdit.discount_type),"0"===s.couponEdit.discount_type?(t=!!s.couponEdit.discount&&1<=s.couponEdit.discount&&s.couponEdit.discount<=100,e.$setValidity("validDiscountFormat",t)):e.$setValidity("validDiscountFormat",!0)}e.$valid&&n.close(s.couponEdit)},s.cancel=function(){n.dismiss()},!s.couponEdit.discount_type&&0!==s.couponEdit.discount_type||(s.couponEdit.discount_type=String(s.couponEdit.discount_type)),s.couponEdit.portal_coupon_type&&(s.couponEdit.portal_coupon_type=String(s.couponEdit.portal_coupon_type)),s.discount_types={0:s.helper.showMessage("lup.coupons.dicount_percentage"),1:s.helper.showMessage("lup.coupons.discount_money",{currency:a.currency_symbol})},s.portal_coupon_types={1:s.helper.showMessage("coupons.apply_to_whole_basket"),2:s.helper.showMessage("coupons.apply_to_cheapest_course"),3:s.helper.showMessage("coupons.apply_to_most_expensive_course")},r(function(){$("body").updatePolyfill()})}angular.module("lu").controller("CouponsUpdateController",e),e.$inject=["StorageFactory","LupHelper","$modalInstance","coupon","$timeout","$rootScope","$filter"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;i.couponType=o,i.couponCreate={discount_type:"0",portal_coupon_type:String(t.coupons.portal_coupon_type.apply_to_whole_basket)},i.helper=t,i.save=function(e){{var t;e.$setValidity("validCouponCode",i.helper.couponCodeValidation(i.couponCreate.code)),e.$setValidity("validCouponCodeLength",i.helper.couponCodeLengthValidation(i.couponCreate.code)),e.$setValidity("validDiscount",!!i.couponCreate.discount),e.$setValidity("validUsageLimitsValue",i.helper.couponUsageLimitsValueValidation(i.couponCreate.usage_count)),i.couponCreate.discount_type=String(i.couponCreate.discount_type),"0"===i.couponCreate.discount_type?(t=!!i.couponCreate.discount&&1<=i.couponCreate.discount&&i.couponCreate.discount<=100,e.$setValidity("validDiscountFormat",t)):e.$setValidity("validDiscountFormat",!0)}e.$valid&&n.close(i.couponCreate)},i.cancel=function(){n.dismiss()},i.discount_types={0:i.helper.showMessage("lup.coupons.dicount_percentage"),1:i.helper.showMessage("lup.coupons.discount_money",{currency:a.currency_symbol})},i.portal_coupon_types={1:i.helper.showMessage("coupons.apply_to_whole_basket"),2:i.helper.showMessage("coupons.apply_to_cheapest_course"),3:i.helper.showMessage("coupons.apply_to_most_expensive_course")},r(function(){$("body").updatePolyfill()})}angular.module("lu").controller("CouponsCreateController",e),e.$inject=["StorageFactory","LupHelper","$modalInstance","couponType","$timeout","$rootScope"]}(),function(){"use strict";function e(n,o,e,r,a,i,t,s,l,c){n.LupHelper=t,n.save=function(){var e={course_question_id:r.id,course_question_answer:{body:n.formData.body}},t={method:"POST",url:"/course_question_answers.json",data:e};"edit"===i&&(t={method:"PUT",url:"/course_question_answers/:answer_id.json".replace(/:answer_id/,a.id),data:e});s(t).success(function(e){o.close({action:"reload"})}).error(function(e){o.close({action:"close"})})},n.cancel=function(){o.close({action:"close"})},n.formData={body:""},n.formType=i,n.setForm=function(e){n.theForm=e},n.labels={title:t.showMessage("lup.courses.questions.add_answer"),button:t.showMessage("lup.courses.questions.submit_answer")},"edit"===i&&(n.labels.title=t.showMessage("lup.courses.questions.edit_answer"),n.labels.button=t.showMessage("save"),n.formData={body:a.body})}angular.module("lu").controller("AddEditCourseQuestionAnswerController",e),e.$inject=["$scope","$modalInstance","course","question","answer","formType","LupHelper","$http","$filter","$timeout"]}(),function(){"use strict";function e(n,o,r,a,i,e,s){n.LupHelper=e,n.save=function(){var e={id:r.course_id||null,course_question:{body:n.formData.body,title:n.formData.title}},t={method:"POST",url:"/course_questions.json",data:e};"edit"===i&&(t={method:"PUT",url:"/course_questions/:question_id.json".replace(/:question_id/,a.id),data:e});s(t).success(function(e){o.close({action:"reload"})}).error(function(e){o.close({action:"close"})})},n.cancel=function(){o.close({action:"close"})},n.formData={title:"",body:""},n.formType=i,n.setForm=function(e){n.theForm=e},n.labels={title:e.showMessage("lup.courses.questions.add_question"),button:e.showMessage("lup.courses.questions.post_question")},"edit"===i&&(n.labels.title=e.showMessage("lup.courses.questions.edit_question"),n.labels.button=e.showMessage("save"),n.formData={title:a.title,body:a.body})}angular.module("lu").controller("AddEditCourseQuestionController",e),e.$inject=["$scope","$modalInstance","course","question","formType","LupHelper","$http"]}(),function(){"use strict";function e(n,o,t,r,a,e,i,s,l,c,u,d){var p=this;function _(e){"all"===e&&(n.ariaLabel=p.helper.showMessage("lup.courses.questions.total_questions")),"opened"===e&&(n.ariaLabel=p.helper.showMessage("lup.courses.questions.opened_questions")),"closed"===e&&(n.ariaLabel=p.helper.showMessage("lup.courses.questions.closed_questions"))}function m(e){var t={};t.params=a.get(),t.course_id=p.course.id,p.isLoading=!0,o.getList(t).then(function(e){var t={};t.meta=o.data.questions.meta,p.filter=e.data.filter,t.data=o.data.questions.data,p.questionCounts=e.data.question_counts,p.questions=t,r(function(){p.isLoading=!1},1e3),p.triggerFocusOnMain=!0})}p.isLoading=!1,p.helper=e,p.course=i.getKey("course").attributes,p.questions=i.getKey("questions"),p.enrollment_approvals_enabled=i.getKey("enrollment_approvals_enabled"),p.questionCounts=i.getKey("question_counts"),p.filter=i.getKey("filter"),p.is_admin=i.getKey("is_admin"),p.triggerFocusOnMain=!1,p.onFocusTrapDeactivate=function(){p.triggerFocusOnMain=!1},n.ariaLabelSide=p.helper.showMessage("lup.a11y.course_question_filter_options"),_("all"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:p.course.name,url:"/courses/"+p.course.id},{title:I18n.t("lup.breadcrumbs.courses.questions"),url:"/courses/"+p.course.id+"/questions"}],n.mergeSearch=!0,p.loadData=m,p.openQuestion=function(e){e&&(t.location="/courses/"+p.course.id+"/questions/"+e.id)},p.filterQuestions=function(e){p.triggerFocusOnMain=!1,n.$broadcast("clearListHeaderSearch"),a.set({filter:e}),_(e),m()},p.deleteQuestion=function(t){c.confirm(I18n.t("lup.confirm"),I18n.t("lup.courses.questions.are_you_sure_you_want_to_delete_this_question")).then(function(e){o.destroy(t.id).then(function(){a.merge({page:1}),m()})})},s.activeCourseDDM={},s.toggled=function(e,t){s.activeCourseDDM[t]=e},n.getA11Ytranslation=function(){var e=" "+p.helper.showMessage("lup.a11y.page");return p.questions.meta&&p.questions.meta.page&&(e+=" "+p.questions.meta.page),e+=" "+p.helper.showMessage("lup.a11y.loaded"),"all"===p.filter?p.helper.showMessage("lup.courses.questions.total_questions")+e:"opened"===p.filter?p.helper.showMessage("lup.courses.questions.opened_questions")+e:"closed"===p.filter?p.helper.showMessage("lup.courses.questions.closed_questions")+e:""},n.$on("publishCourse",function(){d.publishCourse(p)}),n.$on("createNewCourseVersion",function(){d.createNewCourseVersion(p)}),n.$on("archiveCourse",function(){d.archiveCourse(p)}),n.$on("embedCourse",function(){d.openEmbedCourseLinkModal(p.course.id)}),n.$on("deleteCourse",function(){d.deleteCourse(p)}),n.$on("cloneCourse",function(){d.createCourseCopy(p.course.id)}),n.$on("exportSignedEsignatureModules",function(){d.exportSignedEsignatureModules(p.course.id)})}angular.module("lu").controller("CourseQuestionsIndexController",e),e.$inject=["$rootScope","CourseQuestionsFactory","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$luPopover","$modal","CourseActionFactory"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c,u,d){var p=this;function _(e){var t={};t.params=r.get(),t.course_id=p.course.id,t.question_id=p.question.id,p.isLoading=!0,n.getQuestionDetails(t).then(function(e){p.answers.data=n.data.answers.data,p.answers.meta=n.data.answers.meta,p.course=e.data.course.attributes,p.question=e.data.question.attributes,p.is_admin=e.data.is_admin,o(function(){p.isLoading=!1},1e3)})}function m(t){p.answers&&t&&angular.forEach(p.answers.data,function(e){t!=e.id?e.selected=!1:e.selected=!0})}p.isLoading=!1,p.helper=a,p.course=i.getKey("course").attributes,p.question=i.getKey("question").attributes,p.answers=i.getKey("answers"),p.is_admin=i.getKey("is_admin"),p.currentUserId=i.getKey("current_user_id"),p.parentPage=i.getKey("parent"),e.ariaLabel=a.showMessage("lup.a11y.single_question_main"),e.ariaLabelSide=a.showMessage("lup.a11y.single_question_aside"),e.breadcrumbs=[],"course"===p.parentPage?e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:p.course.name,url:"/courses/"+p.course.id},{title:I18n.t("lup.breadcrumbs.courses.questions"),url:"/courses/"+p.course.id+"/questions"},{title:l("truncate")(p.question.title,30,"..."),url:"/courses/"+p.course.id+"/questions/"+p.question.id}]:e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.dashboard"),url:"/dashboard"},{title:I18n.t("lup.breadcrumbs.courses.questions"),url:"/dashboard/questions"},{title:l("truncate")(p.question.title,30,"..."),url:"/courses/"+p.course.id+"/questions/"+p.question.id}],p.loadData=_,p.editQuestion=function(){u.open({templateUrl:"/tc/course_questions/course-questions-add-edit-question.html",controller:"AddEditCourseQuestionController",size:"md",resolve:{course:function(){return p.course},question:function(){return p.question},formType:function(){return"edit"}}}).result.then(function(e){e.action&&"close"!=e.action&&_()})},p.editAnswer=function(e){u.open({templateUrl:"/tc/course_questions/course-questions-add-edit-answer.html",controller:"AddEditCourseQuestionAnswerController",size:"md",resolve:{course:function(){return p.course},question:function(){return p.question},answer:function(){return e},formType:function(){return"edit"}}}).result.then(function(e){e.action&&"close"!=e.action&&_()})},p.addAnswer=function(){u.open({templateUrl:"/tc/course_questions/course-questions-add-edit-answer.html",controller:"AddEditCourseQuestionAnswerController",size:"md",resolve:{course:function(){return p.course},question:function(){return p.question},answer:function(){return d.get("/course_question_answers/new.json",{params:{question_id:p.question.id}})},formType:function(){return"new"}}}).result.then(function(e){e.action&&"close"!=e.action&&_()})},p.selectAnswer=function(n){c.confirm(I18n.t("lup.confirm"),I18n.t("lup.courses.questions.are_you_sure_you_want_to_select_this_answer")).then(function(e){var t=null;angular.forEach(p.answers.data,function(e){e.selected&&(t=e.id)}),m(n.id),d.put("/course_question_answers/select/:id.json".replace(/:id/,n.id),{}).success(function(e){}).error(function(e){m(t)})})}}angular.module("lu").controller("CourseQuestionsShowController",e),e.$inject=["$rootScope","CourseQuestionsFactory","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$luPopover","$modal","$http"]}(),function(){"use strict";function e(e,t,n,o,r){r=r.get();e.forceShowSave=!1,e.submitDisabled=!1,e.LupHelper=n,e.custom_course_data_definition=r.custom_course_data_definition.attributes,e.use_new_enrollment_wizard=r.use_new_enrollment_wizard,e.save=function(e){e.$valid&&(o.showGroup("luSpinnerGlobal"),e.commit())},e.disableSubmit=function(){e.submitDisabled=!0,e.$apply()}}window.angular.module("lu").controller("CustomCourseDatasNewController",e),e.$inject=["$scope","$http","LupHelper","spinnerService","StorageFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a){r=r.get();e.forceShowSave=!1,e.submitDisabled=!1,e.LupHelper=n,e.custom_course_data_definition=r.custom_course_data_definition.attributes,e.use_new_enrollment_wizard=r.use_new_enrollment_wizard,e.save=function(e){e.$valid&&(o.showGroup("luSpinnerGlobal"),e.commit())},e.cancel=function(){a.location="/custom_course_datas/"+e.custom_course_data_definition.id},e.disableSubmit=function(){e.submitDisabled=!0,e.$apply()}}window.angular.module("lu").controller("CustomCourseDatasShowController",e),e.$inject=["$scope","$http","LupHelper","spinnerService","StorageFactory","$window"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s){t.helper=r,t.course=o,t.components=[],t.componentsSelectedArray=[],t.componentSearch="",t.showWaiting=!1,t.formData={components:[]},t.fetchComponents=function(e){var t=s.defer();return n.get("/components.json",{params:{search:e.$query,no_exams:1,page:e.$page}}).success(function(e){t.resolve(e.components.data)}).error(function(){t.reject("Failed to get components")}),t.promise},t.save=function(){var e;0<t.componentsSelectedArray.length&&(t.showWaiting=!0,e={add_components:_.select(t.componentsSelectedArray,function(e){return!0})},t.contentUpdateAttempted=!0,n.post("/courses/"+t.course.id+"/content.json",e).success(function(e){a.$broadcast("contentWasAdded"),i.location.reload()}))},t.cancel=function(){e.close()}}window.angular.module("lu").controller("AddFromLibraryController",e),e.$inject=["$scope","$modalInstance","$http","course","LupHelper","$rootScope","$window","$q"]}(),function(){"use strict";function e(o,t,n,e,r,a,i,s){o.helper=a,o.course=e,o.instructor=r,o.learners=[],o.learnersSelectedArray=[],o.learnerSearch="",o.isSearching=!1,o.learnerUpdateAttempted=!1,o.canShowNullState=!1,o.showWaiting=!1,o.learnerSelected=function(e,t,n){o.learnersSelectedArray.push(e),o.learnerSearch=""},o.removeLearner=function(e){o.learnersSelectedArray.splice(e,1)},o.fetchTutorsFromAPI=function(e){if(!o.isSearching)return o.isSearching=!0,n.get("/courses/"+o.course+"/possible_learners.json",{params:{search:e,exclude_tutor_assigned:!0,include_pending:!0}}).then(function(e){o.isSearching=!1,o.canShowNullState=!0;e=e.data.enrollments.data;return o.learners=_.reject(e,function(e){return _.contains((t="id",_.map(o.learnersSelectedArray,function(e){return e[t]})),e.id);var t}),o.learners})},o.add=function(){o.canShowNullState=!1,o.showWaiting=!0;var e={el:_.map(o.learnersSelectedArray,function(e){return 0===parseInt(e.status_id)?"P"+e.id:e.id}).toString(),i:o.instructor};o.learnerUpdateAttempted=!0,o.learners=[],o.learnersSelectedArray=[],n.post("/courses/"+o.course+"/assign_instructors.json",e).success(function(e){i.$broadcast("learnerWasAdded"),t.close(),s.location.reload()})},o.cancel=function(){t.close()}}angular.module("lu").controller("AddLearnersController",e),e.$inject=["$scope","$modalInstance","$http","course","instructor","LupHelper","$rootScope","$window"]}(),function(){"use strict";function e(o,e,r,t,n,a,i,s,l){o.helper=a,o.course=t,o.selectedComponents=n,o.trainings=[],o.trainingsSelectedArray=[],o.trainingSearch="",o.showWaiting=!1,o.formData={trainings:[]},o.fetchTrainings=function(e){var t=l.defer(),n=_.map(o.selectedComponents,function(e){return e.id});return r.get("/angie/trainings.json",{params:{search:e.$query,exclude:n.join(","),page:e.$page}}).success(function(e){t.resolve(e.data)}).error(function(){t.reject("Failed to get trainings")}),t.promise},o.save=function(){var e;0<o.trainingsSelectedArray.length&&(o.showWaiting=!0,e={add_trainings:_.select(o.trainingsSelectedArray,function(e){return!0})},o.contentUpdateAttempted=!0,r.post("/courses/"+o.course.id+"/content.json",e).success(function(e){i.$broadcast("contentWasAdded"),s.location.reload()}))},o.cancel=function(){e.close()}}window.angular.module("lu").controller("AddTrainingFromEventCentarController",e),e.$inject=["$scope","$modalInstance","$http","course","selectedComponents","LupHelper","$rootScope","$window","$q"]}(),function(){"use strict";function e(o,t,r,e,a,i,n,s){o.helper=i,o.course=e,o.instructorsSelectedArray=[],o.fetchInstructors=function(e){var t=s.defer(),n="";angular.isArray(a)||(a=[]);try{n=(angular.isArray(e.$selected)?e.$selected.concat(a):a).join(",")}catch(e){$log.debug("fetchCoursesApi: Unable to convert selected courses to string!"),n=""}return r.get("/courses/"+o.course.id+"/possible_instructors.json",{params:{search:e.$query,page:e.$page,page_size:i.pagination_sizes.typeadhead_default,except:n}}).success(function(e){angular.forEach(e.tutors,function(e,t){e.display_name=o.helper.displayName(e)}),t.resolve(e.tutors)}).error(function(){t.reject("Failed to get instructors")}),t.promise},o.selectedInstructorIds=a,o.assign=function(){var e={add_instructors:_.map(o.instructorsSelectedArray,function(e){return e.id})};o.instructorsSelectedArray=[],r.post("/courses/"+o.course.id+"/add_instructors.json",e).success(function(e){n.$broadcast("instructorWasAdded"),t.close()})},o.cancel=function(){t.close()}}angular.module("lu").controller("AssignInstructorsController",e),e.$inject=["$scope","$modalInstance","$http","course","selectedInstructorIds","LupHelper","$rootScope","$q"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){n.close()}t.Helper=o,t.message=r,t.automatically=function(){e.$broadcast("submitAutomatically"),a()},t.manually=function(){e.$broadcast("submitManually"),a()},t.cancel=a}window.angular.module("lu").controller("AssignmentSubmitTypeController",e),e.$inject=["$rootScope","$scope","$modalInstance","LupHelper","message"]}(),function(){"use strict";function e(t,n,e,o,r,a,i,s,l){new a;t.component=o,t.autoCorrectDetail=r,t.LupHelper=i,t.save=function(){var e=new l;e.data.id=r.id,e.data.corrected_comments=i.getHTMLFromCKEditor("corrected_comments_wysi"),e.data.email_tutors=t.autoCorrectDetail.email_tutors,e.data.email_learners=t.autoCorrectDetail.email_learners,e.data.percentage=t.autoCorrectDetail.percentage,e.save().then(function(){n.close()})},t.cancel=function(){n.close()}}window.angular.module("lu").controller("AutoCorrectAssignmentDetailsController",e),e.$inject=["$scope","$modalInstance","$http","component","autoCorrectDetail","ComponentFactory","LupHelper","$filter","AutoCorrectAssignmentDetailFactory"]}(),function(){"use strict";function e(e,t,n,o){e.description=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("course_description_wysi");t.close({description:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("CourseAddDescriptionController",e),e.$inject=["$scope","$modalInstance","description","LupHelper"]}(),function(){"use strict";function e(n,e,t,o,r,a,i){n.formData={question_pools:[]},n.LupHelper=e,n.questionPoolsSelectedArray=[],n.fetchQuestionPools=function(e){var t=i.defer();return o.get("/question_pools.json",{params:{search:e.$query,pool_type_id:n.poolType,page:e.$page,include_empty_qps:!1}}).success(function(e){t.resolve(e.question_pools.data)}).error(function(){t.reject("Failed to get question pools")}),t.promise},n.save=function(){n.saveInProgress=!0;var e={exam_question_pool:{question_pool_ids:_.map(n.questionPoolsSelectedArray,function(e){return e.id})},component_id:r.id,exam_id:a.id};o.post("/exam_question_pools.json",e).success(function(e){t.close(),n.saveInProgress=!1}).error(function(e){t.close(),n.saveInProgress=!1})},n.cancel=function(){t.close(),n.saveInProgress=!1},n.saveInProgress=!1,n.poolType=e.questionPoolTypes.exam,a&&a.is_survey&&(n.poolType=e.questionPoolTypes.survey)}angular.module("lu").controller("CoursesAddExamQuestionPoolController",e),e.$inject=["$scope","LupHelper","$modalInstance","$http","component","exam","$q"]}(),function(){"use strict";function e(e,t,n,o){e.objectives=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("course_objectives_wysi");t.close({objectives:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("CourseAddObjectivesController",e),e.$inject=["$scope","$modalInstance","objectives","LupHelper"]}(),function(p){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=new u,r=r.get();n.courseOriginal=p.copy(r.course.attributes),n.course=r.course.attributes,n.tutors=r.tutors,n.difficulty_levels=r.difficulty_levels.data,n.length_units=r.length_units.data,n.enrollment_approvals_enabled=r.enrollment_approvals_enabled,n.formData={},n.helper=o,n.ssl_enabled=r.ssl_enabled,n.on_trial=r.on_trial,n.show_course_owner_setting=r.show_course_owner_setting,n.show_self_enroll_via_scorm=r.show_self_enroll_via_scorm,n.show_allowed_in_public_frame=r.show_allowed_in_public_frame,n.allowed_in_public_frame=r.allowed_in_public_frame,n.selectedCourseOwner=[{id:n.course.tutor_pm_id,full_name:n.course.tutor_display_name}],n.afterSelectOwner=function(){n.course.tutor_pm_id=n.selectedCourseOwner[0].pm_id,p.isDefined(n.course_form)&&n.course_form.$setDirty();n.course_form.$setValidity("validCourseOwner",!0)},n.getCourseOwners=function(e){var t=a.defer(),e={url:"/angie/courses/possible-course-owners.json",params:{page:e.$page,search:e.$query}};return d.get("course-owners",e).then(function(e){e=e.data.data,e=_.map(e,function(e){return e.id=e.pm_id,e});t.resolve(e)}),t.promise},n.afterRemoveOwner=function(){n.course.tutor_pm_id=null,p.isDefined(n.course_form)&&n.course_form.$setDirty()},n.ariaLabel=o.showMessage("lup.a11y.additional_settings_main"),n.ariaLabelSide=o.showMessage("lup.a11y.additional_settings_sidebar"),e.$on("publishCourse",function(){c.publishCourse(n)}),e.$on("createNewCourseVersion",function(){c.createNewCourseVersion(n)}),e.$on("archiveCourse",function(){c.archiveCourse(n)}),e.$on("embedCourse",function(){c.openEmbedCourseLinkModal(n.course.id)}),e.$on("deleteCourse",function(){c.deleteCourse(n)}),e.$on("cloneCourse",function(){c.createCourseCopy(n.course.id)}),e.$on("exportSignedEsignatureModules",function(){c.exportSignedEsignatureModules(n.course.id)}),n.save=function(e){n.course.tutor_pm_id||e.$setValidity("validCourseOwner",!1);null!==n.course.minute_length&&e.$setValidity("validCourseLength",/^\d+(\.\d+)?$/.test(n.course.minute_length));e.$valid&&(s.showGroup("luSpinnerGlobal"),e.commit())}}p.module("lu").controller("CoursesAdditionalSettingsController",e),e.$inject=["$rootScope","$window","$scope","LupHelper","StorageFactory","$q","$filter","spinnerService","$timeout","CourseActionFactory","learnUponApi"]}(window.angular),function(){"use strict";function e(t,n,e,o,r,a,i,s,l,c){var u=this,d=new e;u.LupHelper=o,u.course=a,u.numberOfLearningPaths=i,u.namesOfLearningPaths=s,u.referenceFound=l,u.referenceWorkflows=c,u.archive=function(){var e={course:u.course};d.archiveCourse(e).then(function(){n.close(),t.document.location.href="/courses"})},u.cancel=function(){n.close()}}window.angular.module("lu").controller("CoursesArchiveController",e),e.$inject=["$window","$modalInstance","CourseFactory","LupHelper","$luPopover","course","numberOfLearningPaths","namesOfLearningPaths","referenceFound","referenceWorkflows"]}(),function(){"use strict";function e(r,e,t,o,a,i,s,n,l,c,u){var e=e.get(),d=new l;r.course=e.course.attributes,r.assignment=e.assignment.attributes,r.student=e.student.attributes,r.tutor=e.tutor.attributes,r.assignment_answer_upload_feedbacks=e.assignment_answer_upload_feedbacks,r.handouts=e.handouts,r.virus_scanning_allowed=e.virus_scanning_allowed,r.Helper=o,r.sidebarNav=1,r.processingUpload=!1,r.manualSubmit=!1,r.currentTab=2,r.answer_options={was_submitted:"0",submit_final_feedback:"0",lup_to_set_enrollment_status:"1",pass_mark:e.pass_mark,sum_of_percentages:e.sum_of_percentages,number_of_scoring_modules:e.number_of_scoring_modules,current_score:angular.isNumber(e.current_score)?e.current_score:0},r.manualStatuses=[{value:o.enrollmentStatuses.passed,text:o.showMessage("dashboard.passed")},{value:o.enrollmentStatuses.failed,text:o.showMessage("dashboard.failed")}],r.manuallySelectedStatus=r.manualStatuses[0].value,r.submitManually=!1,r.submitAutomatically=!1,r.assignmentPendingReview=function(){return r.assignment.assignment_answer_status_id==o.enrollmentStatuses.pending_review},r.saveAssignment=function(e){if(e)if("1"==r.answer_options.count_of_pending_assignments_to_correct){var t=o.showMessage("dashboard.completed");if(r.answer_options.invoke_course_pass_mark){if(m())return void c.notify("",o.showMessage("course_assignments.please_enter_a_valid_score_for_assignment"));var n=parseInt(r.answer_options.sum_of_percentages)-parseInt(r.answer_options.current_score)+parseInt(r.assignment.percentage),n=Math.round(parseFloat(n)/parseFloat(r.answer_options.number_of_scoring_modules));t=parseInt(n)<parseInt(r.answer_options.pass_mark)?o.showMessage("dashboard.failed"):o.showMessage("dashboard.passed")}else if(r.answer_options.contains_failed_items)t=o.showMessage("dashboard.failed");else if(r.answer_options.display_passing_percentage){if(m())return void c.notify("",o.showMessage("course_assignments.please_enter_a_valid_score_for_assignment"));t=parseInt(r.assignment.percentage)<parseInt(r.answer_options.assignment_answer_passing_percentage)?o.showMessage("dashboard.failed"):o.showMessage("dashboard.passed")}else r.answer_options.contains_passed_items&&(t=o.showMessage("dashboard.passed"));r.answer_options.display_passing_percentage?r.chooseSubmitType(t):(r.answer_options.submit_final_feedback="1",d.save_feedback(r.assignment,e,r.answer_options))}else{if(r.answer_options.display_passing_percentage&&m())return void c.notify("",o.showMessage("course_assignments.please_enter_a_valid_score_for_assignment"));r.answer_options.submit_final_feedback="1",d.save_feedback(r.assignment,e,r.answer_options)}else d.save_feedback(r.assignment,e,r.answer_options);return},r.chooseSubmitType=function(e){n.open({templateUrl:"/tc/courses/assignment_submit_type.html",controller:"AssignmentSubmitTypeController",size:"md",resolve:{message:function(){return e}}}).result.then(function(){r.submitAutomatically?(r.answer_options.submit_final_feedback="1",d.save_feedback(r.assignment,!0,r.answer_options)):r.submitManually&&(r.manualSubmit=!0)})},r.manuallySubmitAssignment=function(){{var e;3!=parseInt(r.manuallySelectedStatus)?(e=!1,!r.overallScore||parseInt(r.overallScore)<0||100<parseInt(r.overallScore)?(c.notify("",o.showMessage("course_assignments.please_enter_a_valid_score_for_assignment")),e=!0):""!==r.answer_options.assignment_answer_passing_percentage&&m()&&!e?(c.notify("",o.showMessage("course_assignments.please_enter_a_valid_score_for_assignment")),e=!1):(r.answer_options.manually_set_score=r.overallScore,r.answer_options.lup_to_set_enrollment_status="0",r.answer_options.assignment_answer_status_id=r.manuallySelectedStatus,r.answer_options.submit_final_feedback="1",d.save_feedback(r.assignment,!0,r.answer_options))):m()&&""!==r.answer_options.assignment_answer_passing_percentage?c.notify("",o.showMessage("course_assignments.please_enter_a_valid_score_for_assignment")):(r.answer_options.submit_final_feedback="1",d.save_feedback(r.assignment,!0,r.answer_options))}},r.rejectAssignment=function(){d.reject_assignment(r.course.id,r.assignment.id)},r.s3LearnerUploadCount=0,r.s3LearnerUploadFilesAvailable=0;var p,e=[{title:o.showMessage("lup.breadcrumbs.courses.index"),url:"/courses"},{title:r.course.name,url:"/courses/"+r.course.id},{title:o.showMessage("lup.breadcrumbs.courses.assignments"),url:"/courses/"+r.course.id+"/assignments"},{title:o.showMessage("lup.breadcrumbs.courses.assignment_review"),url:"/courses/"+r.course.id+"/assignments/"+r.assignment.id}];function _(){if(r.s3LearnerUploadCount!==r.s3LearnerUploadFilesAvailable)for(var e=0;e<r.s3LearnerUploadCount;e++){var t=document.getElementById("assignment_upload_file_"+(e+1));t.classList.contains("is-disabled")&&function(t){s.assignmentAnswerUrlAvailable(t.children[1].href).then(function(e){e&&(t.classList.remove("is-disabled"),t.style["pointer-events"]=null,t.children[1].style["padding-left"]=null,t.removeChild(t.children[0]),r.s3LearnerUploadFilesAvailable++)})}(t)}else window.clearInterval(p)}function m(){return r.answer_options.display_passing_percentage&&(!r.assignment.percentage||isNaN(parseInt(r.assignment.percentage))||parseInt(r.assignment.percentage)<0||100<parseInt(r.assignment.percentage))}t.breadcrumbs=e,r.ariaLabelSide=o.showMessage("lup.courses.assignment_content"),r.ariaLabel=o.showMessage("course_assignments.your_response_notes"),r.virus_scanning_allowed&&(function(){r.s3LearnerUploadCount=document.querySelectorAll("[id*=assignment_upload_file]").length;for(var e=0;e<r.s3LearnerUploadCount;e++)r["assignment_upload_file_"+(e+1)]=document.getElementById("assignment_upload_file_"+(e+1)).children[1].getAttribute("href")}(),_(),p=window.setInterval(_,5e3)),t.$on("submitAutomatically",function(){r.submitManually=!1,r.submitAutomatically=!0}),t.$on("submitManually",function(){r.submitAutomatically=!1,r.submitManually=!0}),t.$on("downloadAsPdf",function(){var e=new u,t={typeId:o.lupJobTypes.downloadAssignment,id:r.assignment.id,is_learner:!1};e.initiateJob(t)}),r.$watch("files",function(e){if(r.formUpload=!1,null!=e){if(angular.isArray(e))return r.assignment_answer_upload_feedbacks.data.length>=o.fileUploads.max_assignment_uploads?(r.processingUpload=!1,o.showTip("course_assignments.maximun_uploads_reached"),!1):void s.getData(o.fileUploads.types.assignment_answer_upload_feedbacks,function(n){i(function(){for(var e=n.data.signature_data.attributes,t=0;t<r.files.length;t++)r.errorMsg=null,function(n,o){r.errorMsg=null,s.uploadFiles(n,o,function(e){i(function(){n.result=e.data});var t=new a;return t.uuid=o.guid,t.assignment_file_name=n.name,t.assignment_answer_id=r.assignment.id,t.assignment_file_size=n.size,t.assignment_content_type=n.type,t.output_url=o.folder_path+n.name,t.create().then(function(){r.processingUpload=!1,r.assignment_answer_upload_feedbacks.data.push(t)}).catch(function(){r.processingUpload=!1})},function(e){0<e.status&&(r.errorMsg=e.status+": "+e.data),r.processingUpload=!1},function(e){r.processingUpload=!0,n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(r.files[t],e)})},function(e){r.processingUpload=!1});i(function(){r.files=e=[e]})}}),r.deleteFile=function(o){c.confirm(I18n.t("lup.confirm"),I18n.t("course_assignments.are_you_sure_you_want_to_delete_this_upload")).then(function(e){var n=new a;return n.id=o,n.destroy().then(function(){if(null===n.id){for(var e=[],t=0;t<r.assignment_answer_upload_feedbacks.data.length;t++)r.assignment_answer_upload_feedbacks.data[t].id!==o&&e.push(r.assignment_answer_upload_feedbacks.data[t]);r.assignment_answer_upload_feedbacks.data=e}})})},setTimeout(function(){o.renderCKEditor({clear_all_previous_instances:!0,id:"answer_text",add_image_upload:!1,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",add_insert_symbols:!0,add_math_jax:!0})},0)}angular.module("lu").controller("CoursesAssignmentReviewController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","AssignmentAnswerUploadFeedbackFactory","$timeout","s3HelperFactory","$modal","AssignmentAnswerFactory","$luPopover","LupJobFactory"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l,c,u,d,p,_){var e=e.get(),m=new a;t.course=e.course.attributes,t.assignments_for_select=e.assignments_for_select,t.enrollment_approvals_enabled=e.enrollment_approvals_enabled,t.Helper=o,t.window=i,t.filteringControl={},t.filterAssignmentName=0,t.filterAssignmentStatus=0,t.search=null,t.clearFiltering=function(){t.filterAssignmentName=0,t.filterAssignmentStatus=0;var e={filter_select_assignment_status:t.filterAssignmentStatus,filter_select_assignment:t.filterAssignmentName,sort:t.sort};r.set(e),n.$broadcast("filterStatus",{status:!1}),g()},t.filterOptions=function(){return[{filterName:"filter_select_assignment",value:t.filterAssignmentName},{filterName:"filter_select_assignment_status",value:t.filterAssignmentStatus}]},t.loadData=g,t.openAssignment=function(e){i.location="/courses/"+t.course.id+"/assignments/"+e.id},t.ariaLabel=o.showMessage("lup.a11y.assignments_main_list"),t.ariaLabelSide=o.showMessage("lup.a11y.assignments_sidebar_filtering"),t.cookieExists=c.cookieExists("lu_filters","assignments_filters");var f=c.getJsonFromCookie("lu_filters","assignments_filters");!function(){if(t.cookieExists){for(var e in f)void 0!==f[e]&&(t[e]=f[e]);r.set(f)}t.assignments||setTimeout(function(){_.showGroup("luSpinnerGlobal"),g()},0)}();e=[{label:l.showMessage("lup.filters.date_submitted_newest"),value:"date_submitted.desc",default:!0},{label:l.showMessage("lup.filters.date_submitted_oldest"),value:"date_submitted.asc"},{label:l.showMessage("lup.filters.assignments_date_completed_newest"),value:"date_corrected.desc"},{label:l.showMessage("lup.filters.assignments_date_completed_oldest"),value:"date_corrected.asc"},{label:l.showMessage("lup.filters.name_az"),value:"name.asc"},{label:l.showMessage("lup.filters.name_za"),value:"name.desc"}];t.sortOptions=e;o=[{title:o.showMessage("lup.breadcrumbs.courses.index"),url:"/courses"},{title:t.course.name,url:"/courses/"+t.course.id},{title:o.showMessage("lup.breadcrumbs.courses.assignments"),url:"/courses/"+t.course.id+"/assignments"}];function g(){var e={};e.params=r.get(),t.filterAssignmentName=parseInt(e.params.filter_select_assignment,10),isNaN(t.filterAssignmentName)&&(t.filterAssignmentName=0),t.filterAssignmentStatus=parseInt(e.params.filter_select_assignment_status,10),isNaN(t.filterAssignmentStatus)&&(t.filterAssignmentStatus=0),n.$broadcast("filterStatus",{status:0!==t.filterAssignmentName||0!==t.filterAssignmentStatus}),c.setCookieValue("lu_filters","assignments_filters",e.params,l.session.duration,!0),m.getAssignments(t.course.id,e).then(function(){t.assignments=m.data.assignments})}n.breadcrumbs=o,n.$on("publishCourse",function(){s.publishCourse(t)}),n.$on("createNewCourseVersion",function(){s.createNewCourseVersion(t)}),n.$on("deleteCourse",function(){s.deleteCourse(t)}),n.$on("cloneCourse",function(){s.createCourseCopy(t.course.id)}),n.$on("exportSignedEsignatureModules",function(){s.exportSignedEsignatureModules(t.course.id)})}angular.module("lu").controller("CoursesAssignmentsController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","paramsService","CourseFactory","$window","CourseActionFactory","LupHelper","CookiesService","LupJobFactory","$luPopover","$http","spinnerService"]}(),function(){"use strict";function e(o,t,e,n,r,a,i,s,l){function c(t){return t?_.find(o.portals,function(e){return e[1]===t}):null}o.LupHelper=r,o.courseCloneData=angular.copy(e).data,o.courses=o.courseCloneData.courses.data,o.portals=o.courseCloneData.portals,o.errors=[],o.jobReference=o.courseCloneData.job_code,o.statuses=r.returnPublishedStatusesForCopiedCourse(),o.validatingInProgress=!0,o.disableClone=!1,o.jobReference?function t(){var e={};var n="/download_jobs/"+o.jobReference+"/status.json";return a.get(n,e).then(function(e){var e=e.data.job;e.status_id!==o.LupHelper.lupJobStatuses.completed?o.timeoutPromise=l(function(){t()},2e3):(!0===e.has_errors&&e.flash_msg&&(o.errors=e.flash_msg.split("|")),o.jobReference=null,o.validatingInProgress=!1)})}():o.validatingInProgress=!1,o.formData={clone_to_portal_id:s.current_portal_id,cloned_course_status:o.statuses[0][1],ids:n},o.clone=function(){o.disableClone=!0;var e=o.formData;a.post("/courses/bulk_clone/0.json",e).success(function(e){t.close({action:"save"})}).error(function(e){t.close({action:"error"})})},o.cancel=function(){t.close({action:"close"})},o.setForm=function(e){o.theForm=e},o.showDocumentWarning=function(){var e=c(s.current_portal_id),t=c(parseInt(o.formData.clone_to_portal_id));return e[2]!=t[2]},o.isCloningDisabled=function(e){return o.validatingInProgress||0<e.length||o.disableClone}}angular.module("lu").controller("CoursesBulkCloneController",e),e.$inject=["$scope","$modalInstance","courseCloneData","selectedIds","LupHelper","$http","$filter","$rootScope","$timeout"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s){var l=this,c=(new o,new a);l.setForm=function(e){l.theForm=e},l.portalCategories=n.getKey("portal_categories").data,l.courseCatalogSettings=n.getKey("course_catalog_settings").attributes,l.enrollment_approvals_enabled=n.getKey("enrollment_approvals_enabled"),l.fetchGroups=s.fetchGroups,l.afterSelectGroup=function(e){angular.isDefined(l.theForm)&&l.theForm.$setDirty()},l.afterRemoveGroup=function(e){angular.isDefined(l.theForm)&&l.theForm.$setDirty()},l.markFormDirty=function(){l.theForm.$setDirty()},l.course=n.getKey("course").attributes,l.helper=t,l.cancel=function(e){l.courseCatalogSettings=n.getKey("course_catalog_settings").attributes,e.$setPristine()},l.save=function(e){"/courses/:course_id/catalog.json".replace(/:course_id/,l.course.id);var t=angular.isArray(l.courseCatalogSettings.groups)?l.courseCatalogSettings.groups:[];t=t.map(function(e){return{id:e.id,title:e.title}});t={course_catalog_form:{is_cataloged:l.courseCatalogSettings.is_cataloged,is_public:l.courseCatalogSettings.is_public,enrollment_approval_required:l.courseCatalogSettings.enrollment_approval_required,enable_enrollment_request_emails:l.courseCatalogSettings.enable_enrollment_request_emails,categories:l.courseCatalogSettings.categories,groups:t}};e.$dirty&&(e.$setPristine(),c.updateCatalogSettings(l.course.id,t).then(function(e){n.setKey("course_catalog_settings",e.data.course_catalog_settings),l.courseCatalogSettings=n.getKey("course_catalog_settings").attributes}).catch(function(e){n.setKey("course_catalog_settings",e.data.course_catalog_settings),l.courseCatalogSettings=n.getKey("course_catalog_settings").attributes}))},l.fetchCategories=function(t){var n=_.map(l.courseCatalogSettings.categories,function(e){return e.id}),e=_.reject(l.portalCategories,function(e){return _.contains(n,e.id)});return _.filter(e,function(e){return-1!==e.title.toLowerCase().indexOf(t.$query.toLowerCase())})},e.ariaLabel=l.helper.showMessage("lup.a11y.catalog_course_main_content"),e.ariaLabelSide=l.helper.showMessage("lup.a11y.catalog_course_aside_content"),l.setForm=function(e){l.theForm=e},e.$on("publishCourse",function(){i.publishCourse(l)}),e.$on("createNewCourseVersion",function(){i.createNewCourseVersion(l)}),e.$on("archiveCourse",function(){i.archiveCourse(l)}),e.$on("embedCourse",function(){i.openEmbedCourseLinkModal(l.course.id)}),e.$on("deleteCourse",function(){i.deleteCourse(l)}),e.$on("cloneCourse",function(){i.createCourseCopy(l.course.id)}),e.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(l.course.id)})}angular.module("lu").controller("CoursesCatalogController",e),e.$inject=["StorageFactory","$rootScope","LupHelper","GroupsFactory","$http","CourseFactory","CourseActionFactory","restrictByGroupService"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u,d,p,_){e=e.get();n.course=e.course.attributes,n.checklist_questions=e.checklist_questions,n.checklist_owner=e.checklist_owner.attributes,n.enrollment_component_data=e.enrollment_component_data.attributes,n.Helper=o,n.window=i,n.changeQuestionStatus=function(e,t){e.status=!t;e={id:e.id};u.post("/enrollment_component_checklist_questions/change_status.json",e).success(function(){}).error(function(e){})},n.updateChecklistStatus=function(e){var t={enrollment_component_checklist_id:e.enrollment_component_checklist_id,status:o.checklist.enrollment_component_checklist_status.completed,redirect_url:"/courses/"+n.course.id+"/checklists_observation"};_.open({templateUrl:"/tc/enrollments/review_checklist.html",controller:"ReviewChecklistController",size:"sm",resolve:{data:function(){return t}}})},n.showApproveButton=n.enrollment_component_data.status==o.checklist.enrollment_component_checklist_status.pending_review,n.searchText=null;i=[{title:o.showMessage("lup.breadcrumbs.courses.index"),url:"/courses"},{title:n.course.name,url:"/courses/"+n.course.id},{title:o.showMessage("lup.breadcrumbs.components.checklist"),url:"/courses/"+n.course.id+"/checklists_observation"}];t.breadcrumbs=i}angular.module("lu").controller("CoursesChecklistReviewController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","paramsService","CourseFactory","$window","CourseActionFactory","LupJobFactory","$luPopover","$http","spinnerService","notifyFactory","$modal"]}(),function(){"use strict";function e(n,t,e,o,r,a,i){function s(t){return t?_.find(n.portals,function(e){return e[1]===t}):null}n.LupHelper=o,n.courseCloneData=angular.copy(e).data,n.course=n.courseCloneData.course,n.portals=n.courseCloneData.portals,n.errors=n.courseCloneData.errors,n.statuses=o.returnPublishedStatusesForCopiedCourse(),n.disableClone=!1,n.not_allowed_on_multiple_courses=n.courseCloneData.not_allowed_on_multiple_courses,n.formData={clone_to_portal_id:i.current_portal_id,cloned_course_status:n.statuses[0][1]},n.clone=function(){n.disableClone=!0;var e=n.formData;r.post("/courses/clone/:course_id.json".replace(/:course_id/,n.course.id),e).success(function(e){t.close({action:"save"})}).error(function(e){t.close({action:"error"})})},n.cancel=function(){t.close({action:"close"})},n.setForm=function(e){n.theForm=e},n.showDocumentWarning=function(){if(i.user_allowed_to_copy_courses||n.course.contains_trainings)return!1;var e=s(i.current_portal_id),t=s(n.formData.clone_to_portal_id);return e[2]!=t[2]},n.isCloningDisabled=function(e){return n.disableClone||0<e.length&&(-1!==e.indexOf(n.LupHelper.showMessage("coursez.warning_scorm_mark"))||-1!==e.indexOf(n.LupHelper.showMessage("coursez.warning_video_mark")))}}angular.module("lu").controller("CoursesCloneController",e),e.$inject=["$scope","$modalInstance","courseCloneData","LupHelper","$http","$filter","$rootScope"]}(),function(){"use strict";function e(t,n,e,o,r,a,i,s){t.LupHelper=r,t.courseComponentCloneData=angular.copy(e).data,t.uploadInProgressError=!!t.courseComponentCloneData.error,t.component=t.courseComponentCloneData.component,t.courses=t.courseComponentCloneData.courses.data,t.formData={course_id_to_clone_to:o?o.id:0<t.courses.length?t.courses[0].id:""},t.clone=function(){var e=t.formData;a.post("/components/clone_to_course/:component_id.json".replace(/:component_id/,t.component.id),e).success(function(e){t.courseId==t.formData.course_id_to_clone_to?n.close({action:"reload"}):n.close({action:"save"})}).error(function(e){n.close({action:"error"})})},t.cancel=function(){n.close({action:"close"})},t.setForm=function(e){t.theForm=e}}angular.module("lu").controller("CoursesComponentsCloneController",e),e.$inject=["$scope","$modalInstance","courseComponentCloneData","preselectCourse","LupHelper","$http","$filter","$rootScope"]}(),function(C){"use strict";function e(e,t,n,l,o,c,r,a,i,s,u,d,p,m,f,g,h){var b,v=new n,r=r.get();function w(){l.course.published_status_id===c.coursePublishedStatuses.draft?p.open({templateUrl:"/tc/courses/add_from_library.html",controller:"AddFromLibraryController",size:"lg",resolve:{course:function(){return l.course}}}).result.then(function(){l.contentWasAdded&&d.location.reload()}):M()}function y(){l.course.contains_sessions?u.notify("",c.showMessage("events.course_cannot_contain_events_and_legacy_ilts")):l.course.published_status_id===c.coursePublishedStatuses.draft?p.open({templateUrl:"/tc/courses/add_training_from_event_centar.html",controller:"AddTrainingFromEventCentarController",size:"lg",resolve:{course:function(){return l.course},selectedComponents:function(){return _.filter(C.copy(l.contents.data),function(e){return e.component_type_id==c.componentTypes.training})}}}).result.then(function(){l.contentWasAdded&&d.location.reload()}):M()}function M(){var e=c.showMessage("courses.you_are_trying_to_edit_a_published_course");e+="<br/><br/>"+c.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),e+="<br/><br/>"+c.showMessage("courses.are_you_sure_new_version"),u.confirm(c.showMessage("lup.attention"),e).then(function(e){document.location.href="/courses/"+l.course.id+"?newver=1"})}function S(){l.showContentOptions=1<l.course.number_scoreables&&!l.can_only_manage_ilts||0<l.course.course_components_count&&(!l.course.contains_trainings&&!l.course.only_contains_sessions||!l.course.contains_sessions&&!l.course.contains_only_trainings)&&!l.can_only_manage_ilts||l.course.enable_sequencing&&l.course.contains_assignments&&!l.can_only_manage_ilts||1<l.course.number_of_sessions||l.course.enable_sequencing&&l.course.contains_checklists&&!l.can_only_manage_ilts}l.course=r.course,v.id=l.course.id,l.componentElements=[],l.onSpaceRearrange=function(e,t){if("space"===c.keyboard_keys[e.which]){if(e.preventDefault(),null!==l.rememberReorderIndex&&t!==l.rememberReorderIndex){e=l.contents.data[t];return l.contents.data[t]=l.contents.data[l.rememberReorderIndex],l.contents.data[l.rememberReorderIndex]=e,l.dragControlListeners.orderChanged(),l.rememberReorderIndex=null,void s(function(){!function(e){e=document.querySelector(".crse-mod__wrapper:nth-child("+e+")");e&&e.focus()}(t+1)})}l.rememberReorderIndex=t}},l.rememberReorderIndex=null,l.contents=r.contents,l.ui_flags=r.ui_flags.attributes,l.ilt_choices=r.ilt_choices.data,l.is_instructor=r.is_instructor,l.can_edit=r.can_edit,l.is_license=r.is_license,l.is_instructor_course_creator=r.is_instructor_course_creator,l.enrollment_approvals_enabled=r.enrollment_approvals_enabled,l.can_only_manage_ilts=r.can_only_manage_ilts,l.helper=c,l.EnrollmentHelper=h,l.saveWaitlistForm=function(t){var e={enable_waitlist:l.course.enable_waitlist,waitlist_type:l.course.waitlist_type};t.$valid&&v.updateWaitlistSettings(l.course.id,e).then(function(e){t.$setPristine()})},l.manageAttendees=function(e){e="/courses/:course_id/content/:component_id/manage-attendees".replace(/:course_id/,l.course.id).replace(/:component_id/,e);d.location=e},l.addFromLibrary=w,l.addTrainingFromEventCentar=y,l.ariaLabel=c.showMessage("lup.a11y.course_content_main"),l.ariaLabelSide=c.showMessage("lup.a11y.course_content_leftside"),l.isTraining=function(e){return e.component_type_id==c.componentTypes.training},l.isChecklist=function(e){return e.component_type_id==c.componentTypes.checklist},S(),l.activeCourseDDM={},l.toggled=function(e,t){l.activeCourseDDM[t]=e},l.disableDragDrop=function(){return l.course.published_status_id!=c.coursePublishedStatuses.draft||l.contents.data.length<2||l.is_instructor&&!l.is_instructor_course_creator||!!l.is_license||!!l.can_only_manage_ilts},l.show_actions_emp=function(){return!l.can_only_manage_ilts||l.course.published_status_id!=c.coursePublishedStatuses.published},l.ariaLabelForContent=function(e,t){return null!==l.rememberReorderIndex?l.rememberReorderIndex===e?c.showMessage("a11y.exam_order_list.selected",{answer_option:t}):c.showMessage("a11y.exam_order_list.swap",{answer_option:t}):c.showMessage("a11y.exam_order_list.select",{answer_option:t})},b=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:l.course.name,url:"/courses/"+l.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+l.course.id+"/content"}],e.breadcrumbs=b,l.getIconClass=function(e){return e.component_type_id==c.componentTypes.exam?e.is_survey?"survey":"exam":e.component_type_id==c.componentTypes.page?"module":e.component_type_id==c.componentTypes.scorm?"scorm":e.component_type_id==c.componentTypes.assignment?"assignment":e.component_type_id==c.componentTypes.session?"ilt-session":"module"},e.$on("publishCourse",function(){m.publishCourse(l)}),e.$on("createNewCourseVersion",function(){m.createNewCourseVersion(l)}),e.$on("archiveCourse",function(){m.archiveCourse(l)}),e.$on("embedCourse",function(){m.openEmbedCourseLinkModal(l.course.id)}),e.$on("deleteCourse",function(){m.deleteCourse(l)}),e.$on("cloneCourse",function(){m.createCourseCopy(l.course.id)}),e.$on("exportSignedEsignatureModules",function(){m.exportSignedEsignatureModules(l.course.id)}),l.contentWasAdded=!1,e.$on("contentWasAdded",function(){l.contentWasAdded=!0}),e.$on("addFromLibrary",function(){w()}),e.$on("addTrainingFromEventCentar",function(){y()}),e.$on("addNewContent",function(e,t){-1<t.url.indexOf("content/"+c.componentTypes.session+"/new")&&l.course.contains_trainings?u.notify("",c.showMessage("events.course_cannot_contain_events_and_legacy_ilts")):l.addNewContent(t.url)}),l.buildUrlAndAddContent=function(e,t){var n;e==c.componentTypes.session&&l.course.contains_trainings?u.notify("",c.showMessage("events.course_cannot_contain_events_and_legacy_ilts")):(n="/courses/:course_id/content/:type/new".replace(/:course_id/,l.course.id).replace(/:type/,e),C.isObject(t)&&C.forEach(t,function(e,t){n.indexOf("?")<0?n+="?"+t+"="+e:n+="&"+t+"="+e}),l.addNewContent(n))},l.addNewContent=function(e){l.course.published_status_id===c.coursePublishedStatuses.draft?d.document.location.href=e:M()},l.setReleaseDate=function(e){p.open({templateUrl:"/tc/courses/set_component_release_date.html",controller:"SetComponentReleaseDateController",size:"lg",resolve:{component:function(){return e}}})},l.deleteComponent=function(e){var s=e.id,t="",t=e.component_type_id==c.componentTypes.session?I18n.t("courses.are_you_sure_you_want_to_remove_this_session_from_this_course"):I18n.t("librarypg.are_you_sure_you_want_to_delete_this_page");u.confirm(I18n.t("lup.confirm"),t).then(function(e){return v.deleteComponent(s).then(function(){if(v.deletedComponent){for(var e=[],t=!1,n=!1,o=!0,r=!0,a=!1,i=0;i<l.contents.data.length;i++)l.contents.data[i].id!==s&&(e.push(l.contents.data[i]),l.contents.data[i].component_type_id==c.componentTypes.session?t=!0:l.contents.data[i].component_type_id==c.componentTypes.training?n=!0:(r=o=!1,l.contents.data[i].component_type_id==c.componentTypes.assignment&&(a=!0)));l.contents.data=e,l.editingCourse=!1,0===e.length?d.location.reload():(l.course.contains_sessions=t,l.course.contains_trainings=n,l.course.only_contains_sessions=o,l.course.contains_only_trainings=r,l.course.contains_assignments=a),S()}})})},l.exportExamAsCSV=function(e){var t;e&&(t=new g,e={typeId:c.lupJobTypes.exportExam,component_id:e.id,is_survey:1==e.is_survey},t.initiateJob(e))},l.linkTo=function(e,t){l.ui_flags.can_edit_content&&"edit"===t&&(d.document.location.href="/courses/"+l.course.id+"/content/"+e+"/edit")},l.dragControlListeners={orderChanged:function(e){for(var t=[],n=0;n<l.contents.data.length;n++)t.push(l.contents.data[n].course_component_id);v.reorderContent(t)},allowDuplicates:!1},l.dragSegmentControlListeners={orderChanged:function(e){for(var t=[],n=0;n<l.componentElements.length;n++)t.push(l.componentElements[n].id);v.reorderComponentContent(t)},allowDuplicates:!1},l.save=function(e){m.save(e)},l.canCreateCopy=function(e){return!(!e||e.component_type_id!=c.componentTypes.exam&&e.component_type_id!=c.componentTypes.page&&e.component_type_id!=c.componentTypes.e_signature&&e.component_type_id!=c.componentTypes.assignment&&e.component_type_id!=c.componentTypes.session||l.can_only_manage_ilts&&e.component_type_id==c.componentTypes.session)},l.createCopy=function(e){var t=null;l.course&&l.course.published_status_id===c.coursePublishedStatuses.draft&&(t=l.course);p.open({templateUrl:"/tc/courses/clone_course_component.html",controller:"CoursesComponentsCloneController",size:"md",resolve:{courseComponentCloneData:function(){return o.get("/components/initiate_clone/:component_id.json".replace(/:component_id/,e))},preselectCourse:function(){return t}}})}}C.module("lu").controller("CoursesContentController",e),e.$inject=["$rootScope","$compile","CourseFactory","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","$luPopover","$window","$modal","CourseActionFactory","ComponentElementFactory","LupJobFactory","EnrollmentHelper"]}(window.angular),function(){"use strict";window.angular.module("lu").controller("CoursesCreditsController",["$scope","$log","$http","$rootScope","CourseFactory","StorageFactory","LupHelper","EnrollmentHelper","$window","$luPopover","paramsService","spinnerService","CourseActionFactory","$filter",function(o,e,n,t,r,a,i,s,l,c,u,d,p,_){var a=a.get(),m=new r;o.course=a.course.attributes,m.id=o.course.id,o.credits=a.credits,o.certificate=a.certificate,o.certificates=a.certificates,o.credits_link=a.credits_link,o.enrollment_approvals_enabled=a.enrollment_approvals_enabled,o.is_admin=a.is_admin,o.enrollmentHelper=s,o.selectedCertificates=o.certificate?[o.certificate]:[],o.formData={},o.helper=i,o.ariaLabel=i.showMessage("lup.a11y.cred_and_certs_main_aria_label"),o.ariaLabelSide=i.showMessage("lup.a11y.cred_and_certs_side_aria_label"),o.save=function(e){var t=function(){var n={award_credits_per_session:o.course.award_credits_per_session};o.credits.data.map(function(e){var t="credits_"+e.id;n[t]=e.number_credits});var e={certification_id:o.course.certification_id,expires_days:o.course.expires_days,recertify_days_before_expires:o.course.recertify_days_before_expires,recertify_when_expires:o.course.recertify_when_expires};return angular.extend(n,e)}();n.post("/courses/"+m.id+"/credits",{course_form:t}).success(function(e){l.location.reload()}).error(function(e){})},o.fetchCertificates=function(e){var t=angular.copy(o.certificates.data);return""===e.$query?t:_("filter")(t,{title:e.$query},!1)},o.course&&null===o.course.recertify_when_expires&&(o.course.recertify_when_expires=0),t.$on("publishCourse",function(){p.publishCourse(o)}),t.$on("createNewCourseVersion",function(){p.createNewCourseVersion(o)}),t.$on("archiveCourse",function(){p.archiveCourse(o)}),t.$on("embedCourse",function(){p.openEmbedCourseLinkModal(o.course.id)}),t.$on("deleteCourse",function(){p.deleteCourse(o)}),t.$on("cloneCourse",function(){p.createCourseCopy(o.course.id)}),t.$on("exportSignedEsignatureModules",function(){p.exportSignedEsignatureModules(o.course.id)}),o.showCreditPerSessionTip=function(){var e=o.minimumCreditsForCourse();return i.showMessage("association_membership_types.learner_can_earn_min_max",{min_credits:e,max_credits:e*o.course.number_of_sessions})},o.minimumCreditsForCourse=function(){for(var e=0,t=0;t<o.credits.data.length;t++){var n=parseFloat(o.credits.data[t].number_credits);0<n&&(e+=n)}return e},o.showAwardCreditsPerSession=function(){return t.enable_associations_mode&&1<o.course.number_of_sessions&&o.course.must_choose_session!=i.ilt_sessions.must_choose_one&&0<o.minimumCreditsForCourse()},o.chooseCertificate=function(){o.course_form.$setDirty(),o.certificate=o.selectedCertificates[0],o.course.certification_id=o.certificate.id},o.removeCertificate=function(){o.course_form.$setDirty(),o.certificate=null,o.course.certification_id=0}}])}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u){n.course=e.getKey("course").attributes,n.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),r.courseMetaDataForm=!1,r.showLoader=!1,r.courseCustomMetaFormDirty=!1,n.showActionButtons=!1,n.cancel=function(){r.location="/courses/"+n.course.id+"/custom_meta_data"},n.ariaLabel=o.showMessage("lup.a11y.custom_course_data_main"),n.ariaLabelSide=o.showMessage("lup.a11y.custom_course_data_sidebar"),r.hideActionButtons=function(){n.showActionButtons=!1},n.$watch(function(){return r.courseCustomMetaFormDirty},function(e,t){e&&(n.showActionButtons=!0,r.courseCustomMetaFormDirty=!1)}),n.$watch(function(){return r.showLoader},function(e,t){e&&(l.show("save-data-spinner"),r.showLoader=!1)}),n.$watch(function(){return r.courseMetaDataForm},function(e,t){e&&(l.hide("save-data-spinner"),(e=r.courseMetaDataResponse)?e.error?c.error(e.error,null,{closeButton:!0}):c.info(e.success,null,{closeButton:!0}):c.info(o.showMessage("custom_course_data.custom_course_data_successfully_saved"),null,{closeButton:!0}),r.courseMetaDataResponse=!1,r.courseMetaDataForm=!1)}),t.$on("publishCourse",function(){u.publishCourse(n)}),t.$on("createNewCourseVersion",function(){u.createNewCourseVersion(n)}),t.$on("archiveCourse",function(){u.archiveCourse(n)}),t.$on("embedCourse",function(){u.openEmbedCourseLinkModal(n.course.id)}),t.$on("deleteCourse",function(){u.deleteCourse(n)}),t.$on("cloneCourse",function(){u.createCourseCopy(n.course.id)}),t.$on("exportSignedEsignatureModules",function(){u.exportSignedEsignatureModules(n.course.id)})}angular.module("lu").controller("CoursesCustomMetaDataController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","$window","LupJobFactory","$luPopover","$http","spinnerService","toastr","CourseActionFactory"]}(),function(){"use strict";function e(a,e,i,t,n,o,r,s,l,c,u,d,p,m,f){var g=new c,h=o.get();i.course=h.course.attributes,i.formData={},i.helper=n,i.Helper=n,i._=_,i.thumbnail=h.thumbnail.attributes,i.preview_image_file_url=h.preview_image_file_url,i.course_images=h.course_images.data,i.enrollment_approvals_enabled=h.enrollment_approvals_enabled,i.setImageAsThumbnail=function(e){s.showGroup("luSpinnerGlobal");var t={};t.image_id=e,g.doSetAsThumbnail(t).then(function(e){i.thumbnail=g.data.thumbnail.attributes,i.preview_image_file_url=g.data.preview_image_file_url})},i.unsetImageAsThumbnail=function(){s.showGroup("luSpinnerGlobal");var e={};e.course_id=i.course.id,g.doUnsetAsThumbnail(e).then(function(e){i.thumbnail=g.data.thumbnail.attributes,i.preview_image_file_url=g.data.preview_image_file_url})},i.removeImage=function(e){g.doDestroyImage(e).then(function(){i.course_images=g.data.course_images})},i.uploadingInProcess=!1,i.openCropper=function(e){{e&&d.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 1.5},cropperImageSize:function(){return n.uiCropperConfig.imageSize}}}).result.then(function(e){var t;e&&e.image_for_upload&&(i.alt_tag=e.alt_tag,t=e.image_for_upload,e={data:{resource_id:i.course.id}},t&&(i.courseImage=t,i.course_image_reference="1",f.getData(n.fileUploads.types.course_image,function(r){a(function(){var e,n,o,t=r.data.signature_data.attributes;i.errorMsg=null,e=i.courseImage,n=e,o=t,i.errorMsg=null,f.uploadFiles(n,o,function(e){a(function(){n.result=e.data});var t=new c;return t.uuid=o.guid,t.image_file_name=n.name,t.output_url=o.folder_path+n.name,t.course_id=i.course.id,t.portal_id=i.course.portal_id,t.alt_tag=i.alt_tag,t.uploadImage().then(function(e){try{return i.course_image_reference=t.data.course_image_reference,void v()}catch(e){return i.uploadingInProcess=!1,void(i.course_image_reference=null)}})},function(e){0<e.status&&(i.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){},e)))})}},i.alt_tag=null,i.forceShowSave=!1,i.editingDescription=!1,i.editingObjectives=!1,i.ariaLabel=n.showMessage("lup.a11y.details_main_label"),i.ariaLabelSide=n.showMessage("lup.a11y.details_sidebar_label"),i.course_image_reference=o.getKey("course_image_reference"),i.course_image_reference&&v();o=g.getBreadcrumbTitle(i.course.name,i.course.version);function b(e){p.save(e)}function v(){var e="/download_jobs/"+i.course_image_reference+"/status.json";return t.get(e,{}).then(function(e){e.data.job.status_id!==n.lupJobStatuses.completed?i.timeoutPromise=a(function(){v()},2e3):(i.processingJobReference=null,i.uploadingInProcess=!1,u.location.reload())})}e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:o,url:"/courses/"+i.course.id},{title:I18n.t("lup.breadcrumbs.courses.details"),url:"/courses/"+i.course.id+"/details"}],i.save=b,e.$on("publishCourse",function(){p.publishCourse(i)}),e.$on("createNewCourseVersion",function(){p.createNewCourseVersion(i)}),e.$on("archiveCourse",function(){p.archiveCourse(i)}),e.$on("embedCourse",function(){p.openEmbedCourseLinkModal(i.course.id)}),e.$on("deleteCourse",function(){p.deleteCourse(i)}),e.$on("cloneCourse",function(){p.createCourseCopy(i.course.id)}),e.$on("exportSignedEsignatureModules",function(){p.exportSignedEsignatureModules(i.course.id)}),i.setDescription=function(){var e=d.open({templateUrl:"/tc/courses/add-course-description.html",controller:"CourseAddDescriptionController",size:"lg",resolve:{description:function(){return i.course.description}}});e.opened.then(function(){i.ckeditorInstance="course_description_wysi",i.imageType=i.helper.fileUploads.types.course_description_image,a(function(){n.renderCKEditor({clear_all_previous_instances:!1,id:i.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0})},100)}),e.result.then(function(e){e&&void 0!==e.description&&(i.course.description=e.description,i.forceShowSave=!0,b(i.course_form))})},u.executeDjImageUpload=function(){d.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return i.course.id},ckeditorInstance:function(){return i.ckeditorInstance},imageType:function(){return i.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},i.setObjectives=function(){var e=d.open({templateUrl:"/tc/courses/add-course-objectives.html",controller:"CourseAddObjectivesController",size:"lg",resolve:{objectives:function(){return i.course.objectives}}});e.opened.then(function(){i.ckeditorInstance="course_objectives_wysi",i.imageType=i.helper.fileUploads.types.course_objectives_image,a(function(){n.renderCKEditor({clear_all_previous_instances:!1,id:i.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0})},100)}),e.result.then(function(e){e&&void 0!==e.objectives&&(i.course.objectives=e.objectives,i.forceShowSave=!0,b(i.course_form))})},i.maxFileSize=function(){return"5MB"},i.acceptedFiles=function(){return".jpg,.jpeg,.pjpeg,.png,.xpng,.tiff"}}window.angular.module("lu").controller("CoursesDetailsController",e),e.$inject=["$timeout","$rootScope","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$luPopover","CourseFactory","$window","$modal","CourseActionFactory","Upload","s3HelperFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l){r=r.get();e.course=r.course.attributes,e.course.due_date_after_enrollment=null===e.course.due_date_after_enrollment?"":a("displayDateTime")(e.course.due_date_after_enrollment,"YYYY-MM-DD"),e.course.date_after_enrollment=null===e.course.date_after_enrollment?"":a("displayDateTime")(e.course.date_after_enrollment,"YYYY-MM-DD"),e.enrollment_approvals_enabled=r.enrollment_approvals_enabled,e.formData={},e.helper=o,e.ariaLabel=o.showMessage("lup.a11y.courses_duedate_main"),e.ariaLabelSide=o.showMessage("lup.a11y.courses_duedate_sidebar"),e.save=function(e){e.$valid&&(i.showGroup("luSpinnerGlobal"),e.commit())},t.$on("publishCourse",function(){l.publishCourse(e)}),t.$on("createNewCourseVersion",function(){l.createNewCourseVersion(e)}),t.$on("archiveCourse",function(){l.archiveCourse(e)}),t.$on("embedCourse",function(){l.openEmbedCourseLinkModal(e.course.id)}),t.$on("deleteCourse",function(){l.deleteCourse(e)}),t.$on("cloneCourse",function(){l.createCourseCopy(e.course.id)}),t.$on("exportSignedEsignatureModules",function(){l.exportSignedEsignatureModules(e.course.id)})}window.angular.module("lu").controller("CoursesDuedateController",e),e.$inject=["$scope","$rootScope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","CourseActionFactory"]}(),function(){"use strict";function e(n,o,r,e,t,a,i){n.Helper=r;var s,e=e.get();n.course=e.course,n.component=e.component,n.component=e.component,n.checklist_question=e.checklist_question.attributes,n.componentUrl="/courses/:course_id/content/:component_id".replace(":course_id",n.course.id).replace(":component_id",n.component.id),n.componentEditItemUrl=n.componentUrl+"/item/:item_id".replace(":item_id",n.checklist_question.id),n.save=function(){o.post(n.componentEditItemUrl,n.checklist_question).success(function(e){window.location=n.componentEditItemUrl}).error(function(e){window.location=n.componentUrl+"/edit"})},n.cancel=function(){window.location=n.componentUrl+"/edit"},t.$on("addNewContent",function(e,t){-1<t.url.indexOf("content/"+r.componentTypes.session+"/new")&&n.course.contains_trainings?$luPopover.notify("",r.showMessage("events.course_cannot_contain_events_and_legacy_ilts")):n.addNewContent(t.url)}),t.$on("deleteChecklistQuestion",function(){var e=":item_id/status".replace(":item_id",n.checklist_question.id),t={status:i.checklist.question.status.deleted,checklist_id:n.checklist_question.checklist_id};o.post(e,t).success(function(e){window.location=n.componentUrl+"/edit"}).error(function(e){window.location=n.componentUrl+"/edit"})}),n.addNewContent=function(e){n.course.published_status_id===r.coursePublishedStatuses.draft?a.document.location="/courses/126542/content/:url/new".replace(":url",e):(e=r.showMessage("courses.you_are_trying_to_edit_a_published_course"),e+="<br/><br/>"+r.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),e+="<br/><br/>"+r.showMessage("courses.are_you_sure_new_version"),$luPopover.confirm(r.showMessage("lup.attention"),e).then(function(e){document.location.href="/courses/"+n.course.id+"?newver=1"}))},s=n.course.name,1<n.course.version&&(s=s+" ("+r.showMessage("courses.version")+" "+n.course.version+")"),s=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:s,url:"/courses/"+n.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+n.course.id+"/content"},{title:n.component.title,url:"/courses/"+n.course.id+"/content/"+n.component.id+"/edit"},{title:r.showMessage("lup.checklists.questions.question_label"),url:n.componentEditItemUrl}],t.breadcrumbs=s}window.angular.module("lu").controller("CoursesEditItemController",e),e.$inject=["$scope","$http","LupHelper","StorageFactory","$rootScope","$window","LupHelper"]}(),function(q){"use strict";function e(t,e,n,o,a,r,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y,M){var S,C,A=new o,L=new n,$=new v,T=new b,z=0,x=new g,P=new M,l=l.get();function k(n,o,r){x.getComponentElement(n,a.componentElements,!0).then(function(e){x.component_element=a.componentElements[r],D(x.component_element);var t=x.readyForViewing();t&&y.resetInterval(S),o!==i.componentElementTypes.text||a.componentElements[r].text||(a.componentElements[r].text=e.detail),o===i.componentElementTypes.video&&t&&x.component_element.caption_status===i.videoCaptionStatuses.processing&&(C=p(function(){E(n,r)},3e3))})}function E(e,t){x.getVideoCaptionData(e,a.componentElements,!0).then(function(e){x.component_element.caption_status!=i.videoCaptionStatuses.processing&&(a.componentElements[t]=e,y.resetInterval(C))})}function O(){var e=a.course.name;1<a.course.version&&(e=e+" ("+i.showMessage("courses.version")+" "+a.course.version+")");e=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:e,url:"/courses/"+a.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+a.course.id+"/content"},{title:a.component.title,url:"/courses/"+a.course.id+"/content/"+a.component.id+"/edit"}];t.breadcrumbs=e}function I(e){var t=a.componentElements.map(function(e){return e.id}).indexOf(e.id);-1!=t?(a.componentElements[t]=y.deepExtend(a.componentElements[t],e),a.componentElements[t].caption_status==i.videoCaptionStatuses.processing&&(C=p(function(){E(a.componentElements[t].id,t)},3e3)),a.componentElements[t].caption_status==i.videoCaptionStatuses.uploaded&&(a.componentElements[t]=e)):(a.componentElements.push(e),a.numberOfVideoAndDocumentSegments=F())}function D(e){a.toggledCardId=e.id}function N(e){var t=x.getModalConfig(e);f.open({templateUrl:t.template,controller:t.controller,controllerAs:"vm",windowClass:t.windowClass,backdrop:"static",resolve:{type:function(){return e},componentElement:function(){return a.component_element},componentId:function(){return a.component.id},numberOfVideoAndDocumentSegments:function(){return a.numberOfVideoAndDocumentSegments}}}).result.then(function(e){if(e)switch(e.action){case"save":if(I(e.componentElement),D(e.componentElement),e.componentElement.component_element_type_id===i.componentElementTypes.document)return;var t=document.getElementById("component_element__"+e.componentElement.id);t&&t.scrollIntoView({behavior:"smooth"});break;case"cancel":case"close":a.component_element=null;break;case"delete":a.deleteSegment(e.componentElement.id)}})}function F(){var e=a.componentElements.filter(function(e){return i.contains([i.componentElementTypes.video,i.componentElementTypes.document],e.component_element_type_id)}).length;return 1<e&&a.componentElements.forEach(function(e){e.enable_video_tracking=!1,e.required_percentage_to_be_seen=100}),e}a.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===i.keyboard_keys[e.which]){if(e.preventDefault(),null!==a.rememberReorderIndex&&n!==a.rememberReorderIndex){e=t[n];return t[n]=t[a.rememberReorderIndex],t[a.rememberReorderIndex]=e,a.dragSegmentControlListeners.orderChanged(),a.rememberReorderIndex=null,void a.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}a.rememberReorderIndex=n}},a.rememberReorderIndex=null,a.showSaveButton=!1,a.setShowSaveButtons=function(){a.showSaveButton=!0},a.EnrollmentHelper=s,a.course=l.course,a.component=l.component,a.componentElements=l.component_elements?l.component_elements.data:[],a.numberOfVideoAndDocumentSegments=F(),a.courses_linked=l.courses_linked.data,a.enrollment_approvals_enabled=l.enrollment_approvals_enabled,a.showLinkedCourses=function(){f.open({templateUrl:"/tc/components/component_linked_courses.html",controller:"ComponentsLinkedCoursesController",size:"lg",resolve:{linkedCourses:function(){return a.courses_linked}}})},a.openPage=function(e,t){e&&t&&(m.location.href="/courses/"+e.id+"/content/"+t.id+"/edit")},a.toggledCardId=null,a.dragIndex=null,a.cdnPath=CONFIG.cdnPath,a.loadedInSalesforce=l.loaded_in_salesforce,a.addCaptions=function(e){x.getComponentElement(e,a.componentElements).then(function(e){f.open({templateUrl:"/tc/component_elements/add_video_captions.html",controller:"VideoCaptionController",controllerAs:"vm",windowClass:"",backdrop:"static",resolve:{componentElement:function(){return e},componentId:function(){return a.component.id}}}).result.then(function(e){e&&"close"===e.action&&I(e.componentElement)})})},a.removeCaptions=function(t,n){_.confirm(I18n.t("lup.confirm"),I18n.t("component_elements.captions.remove_caption_popup")).then(function(e){P.removeCaption({id:t.video_id}).then(function(e){t.caption_status=i.videoCaptionStatuses.empty,t.caption_file_name="",t.caption_url="",a.componentElements[n]=q.copy(t)},function(e){})})},a.can_only_manage_ilts=l.can_only_manage_ilts,a.scorm_in_scorm_allowed=l.scorm_in_scorm_allowed,a.self_enroll_via_scorm=l.self_enroll_via_scorm,a.scorm_in_scorm_code_snippet=l.scorm_in_scorm_code_snippet,a.question_pool_generator=l.question_pool_generator,a.activeCourseDDM={},a.toggled=function(e,t){a.activeCourseDDM[t]=e},a.ariaLabel=i.showMessage("lup.a11y.assignment_main_label"),a.ariaLabelSide=i.showMessage("lup.a11y.course_content_add_module_sidebar"),l.exam&&(a.exam=l.exam.attributes),a.assignment_handouts=[],l.assignment_handouts&&(a.assignment_handouts=l.assignment_handouts),A.id=a.course.id,L.component=a.component,a.contents=l.contents,a.ui_flags=l.ui_flags.attributes,a.Helper=i,a.ariaLabel=i.showMessage("lup.a11y.assignment_main_label"),a.ariaLabelSide=i.showMessage("lup.a11y.course_content_add_module_sidebar"),t.$on("publishCourse",function(){h.publishCourse(a)}),t.$on("createNewCourseVersion",function(){h.createNewCourseVersion(a)}),t.$on("deleteCourse",function(){h.deleteCourse(a)}),t.$on("cloneCourse",function(){h.createCourseCopy(a.course.id)}),t.$on("exportSignedEsignatureModules",function(){h.exportSignedEsignatureModules(a.course.id)}),t.$on("exportExamAsCSV",function(){var e=new w,t={typeId:i.lupJobTypes.exportExam,component_id:a.component.id,is_survey:a.exam.is_survey};e.initiateJob(t)}),a.toggleCard=function(e,t,n,o){32===o.keyCode&&o.preventDefault(),y.resetInterval(S),y.resetInterval(C),a.toggledCardId!==e?(k(e,t,n),S=p(function(){k(e,t,n)},3e3)):a.toggledCardId=null},a.activeCard=function(e){return a.toggledCardId===e},a.pingScormForProgress=function(){a.component.retry_permitted?a.component.s3_scorm_status=i.s3ScormStatuses.timed_out:a.component.s3_scorm_status!==i.s3ScormStatuses.pending&&0!==a.component.s3_number_of_files_to_upload||L.pingScormForProgress().then(function(){a.component=L.component,d(function(){a.pingScormForProgress()},3e3)})},a.component.component_type_id===i.componentTypes.scorm&&a.pingScormForProgress(),O(),a.saveComponent=function(e){return A.component=a.component,A.saveComponent().then(function(){O(),a.showSaveButton=!1,e&&e.$setPristine()})},a.downloadVideo=function(e){x.downloadVideo(e)},a.deleteSegment=function(o){_.confirm(I18n.t("lup.confirm"),I18n.t("librarypg.are_you_sure_you_want_to_delete_the_element_from_this_page")).then(function(e){return x.destroy(o).then(function(e){if(200==e.status){for(var t=[],n=0;n<a.componentElements.length;n++)a.componentElements[n].id!==o&&t.push(a.componentElements[n]);a.componentElements=t,a.numberOfVideoAndDocumentSegments=F()}})})},t.$on("addQuestionPool",function(){a.addExamQuestionPool()}),t.$on("examOptions",function(){a.openExamOptions()}),t.$on("addNewSegment",function(e,t){a.manageSegment(t.segment_type_id)}),t.$on("previewModule",function(e,t){m.document.location.href="/courses/"+a.course.id+"/content/"+a.component.id+"/preview-module"}),t.$on("segmentsArrayModified",function(e,t){I(t)}),a.manageSegment=function(t,e){e?x.getComponentElement(e,a.componentElements).then(function(e){a.component_element=e,N(a.component_element.component_element_type_id)}):x.getInitObject(a.course.id,a.component.id,t).then(function(e){a.component_element=e,N(t)})},a.ariaLabelForContentSegments=function(e,t){return null!==a.rememberReorderIndex?a.rememberReorderIndex===e?i.showMessage("a11y.exam_order_list.selected",{answer_option:t}):i.showMessage("a11y.exam_order_list.swap",{answer_option:t}):i.showMessage("a11y.exam_order_list.select",{answer_option:t})},a.deleteComponent=function(t){_.confirm(I18n.t("lup.confirm"),I18n.t("librarypg.are_you_sure_you_want_to_delete_this_page")).then(function(e){return A.deleteComponent(t).then(function(){m.document.location.href="/courses/"+a.course.id+"/content"})})},a.cancelCreate=function(){m.document.location.href="/courses/"+a.course.id+"/content"},a.linkTo=function(e,t){if(a.ui_flags.can_edit_content){if("edit"===t)return A.editComponent(e,a).then(function(){a.refreshScopeAfterComponentUpdate()});"delete"===t&&a.deleteComponent(e)}},a.dragSegmentControlListeners={orderChanged:function(e){for(var t=[],n=0;n<a.componentElements.length;n++)t.push(a.componentElements[n].id);L.id=a.component.id,L.reorderContent(t).then(function(){})},dragStart:function(e){a.dragIndex=e.dest.index},dragEnd:function(e){a.dragIndex=null},allowDuplicates:!1},a.openExamOptions=function(){var e="0";a.exam.is_survey&&(e="1"),m.location="/courses/"+a.course.id+"/components/"+a.component.id+"/exams/"+a.exam.id+"/edit/"+e},a.examDeleteQuestionPool=function(t){var e=i.showMessage("courses.are_you_sure_you_want_to_delete_this_qpool_from_this_exam");a.exam&&a.exam.is_survey&&(e=i.showMessage("lup.surveys.are_you_sure_you_want_to_delete_this_qpool_from_this_survey")),_.confirm(I18n.t("lup.confirm"),e).then(function(e){T.destroy(t).then(function(){m.location="/courses/"+a.course.id+"/content/"+a.component.id+"/edit"})})},a.returnExamQuestionUpdateUrl=function(e){return"/exam_question_pool_questions/"+e},a.returnExamQuestionPoolUpdateUrl=function(e){return"/exam_question_pools/"+e},a.showPoolRandomisationWarning=function(e){var t=!1;return e.questions[0].enable_pool_randomisation&&q.forEach(e.questions,function(e){1<e.points&&(t=!0)}),t},a.enableDisableRandomisation=function(t){var e="true";t.enable_pool_randomisation&&(e="false");var n=0;t.num_questions&&(n=t.num_questions);e={exam_question_pool:{id:t.exam_question_pool_id,num_questions:n,enable_pool_randomisation:e}};T.enableDisable(t.exam_question_pool_id,e).then(function(e){t.num_questions=T.data.num_questions})},a.setInitialNumberOfQUestins=function(e){z=e},a.changeNumberOfQuestions=function(e){var t,n=e.questions[0],o=(e=e,t=0,q.forEach(e.questions,function(e){e.enabled&&(t+=1)}),t);if(z!=n.num_questions)try{var r,a=parseInt(n.num_questions);0<a&&a<=o?(r="true",n.enable_pool_randomisation||(r="false"),r={exam_question_pool:{id:n.exam_question_pool_id,num_questions:a,enable_pool_randomisation:r}},T.enableDisable(n.exam_question_pool_id,r).then(function(e){})):_.notify("",I18n.t("exam_question_pool.please_enter_a_valid_number_between_one_and_x",{counter:o}))}catch(e){_.notify("",I18n.t("exam_question_pool.please_enter_a_valid_number_between_one_and_x",{counter:o}))}},a.enableDisableQuestionPoolQuestion=function(e,t){var n="true";e.enabled&&(n="false");n={exam_question_pool_question:{id:e.exam_question_pool_question_id,enabled:n}};$.enableDisable(e.exam_question_pool_question_id,n).then(function(e){t.num_questions=$.data.num_questions})},a.saveExamPoolReorder=function(e,t,n){e={exam_question_pool_id:t,new_order:e};$.saveReorder(e,n).then(function(e){})},a.getNumberOfPossibleQuestionsToAsk=function(){var t=0;return a.componentElements&&a.componentElements&&q.forEach(a.componentElements,function(e){e.questions[0].enable_pool_randomisation?t+=parseInt(e.questions[0].num_questions):q.forEach(e.questions,function(e){e.enabled&&(t+=1)})}),t},a.addExamQuestionPool=function(){f.open({templateUrl:"/tc/courses/add_exam_question_pool_modal.html",controller:"CoursesAddExamQuestionPoolController",size:"lg",resolve:{component:function(){return a.component},exam:function(){return a.exam}}}).result.then(function(){m.location="/courses/"+a.course.id+"/content/"+a.component.id+"/edit"})},a.dragControlListeners={accept:function(e,t){return e.modelValue.exam_question_pool_id==t.modelValue[0].exam_question_pool_id},allowDuplicates:!1,dragMove:function(e,t,n){n&&(n.pageY<m.pageYOffset?m.scrollTo(0,n.pageY):n.pageY+e.offsetY>m.pageYOffset+m.innerHeight&&m.scrollTo(0,n.pageY+e.offsetY-m.innerHeight))},dragEnd:function(e){var t=[];q.forEach(e.dest.sortableScope.modelValue,function(e){t.push(e.exam_question_pool_question_id)}),a.saveExamPoolReorder(t,e.dest.sortableScope.modelValue[0].exam_question_pool_id,e.source.itemScope.modelValue.exam_question_pool_question_id)}},a.contentWasAdded=!1,t.$on("contentWasAdded",function(){a.contentWasAdded=!0}),a.addFromLibrary=function(){var e;a.course.published_status_id===i.coursePublishedStatuses.draft?f.open({templateUrl:"/tc/courses/add_from_library.html",controller:"AddFromLibraryController",size:"lg",resolve:{course:function(){return a.course}}}).result.then(function(){a.contentWasAdded&&(m.document.location.href="/courses/"+a.course.id+"/content")}):(e=i.showMessage("courses.you_are_trying_to_edit_a_published_course"),e+="<br/><br/>"+i.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),e+="<br/><br/>"+i.showMessage("courses.are_you_sure_new_version"),_.confirm(i.showMessage("lup.attention"),e).then(function(e){document.location.href="/courses/"+a.course.id+"?newver=1"}))},a.addNewContent=function(e,t){a.course.published_status_id===i.coursePublishedStatuses.draft?m.document.location.href=function(e,t){var n="/courses/:course_id/content/:type/new".replace(/:course_id/,a.course.id).replace(/:type/,e);q.isObject(t)&&q.forEach(t,function(e,t){n.indexOf("?")<0?n+="?"+t+"="+e:n+="&"+t+"="+e});return n}(e,t):(t=i.showMessage("courses.you_are_trying_to_edit_a_published_course"),t+="<br/><br/>"+i.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),t+="<br/><br/>"+i.showMessage("courses.are_you_sure_new_version"),_.confirm(i.showMessage("lup.attention"),t).then(function(e){document.location.href="/courses/"+a.course.id+"?newver=1"}))},t.$on("cloneContent",function(e,t){a.createCopy(a.component.id)}),a.createCopy=function(e){var t=null;a.course&&a.course.published_status_id===i.coursePublishedStatuses.draft&&(t=a.course),f.open({templateUrl:"/tc/courses/clone_course_component.html",controller:"CoursesComponentsCloneController",size:"md",resolve:{courseComponentCloneData:function(){return r.get("/components/initiate_clone/:component_id.json".replace(/:component_id/,e))},preselectCourse:function(){return t}}}).result.then(function(e){e.action&&e.action})},t.$on("deleteModule",function(e,t){a.deleteModule(a.component)}),a.deleteModule=function(e){var t=e.id,e="",e=i.showMessage("librarypg.are_you_sure_you_want_to_delete_this_page");_.confirm(i.showMessage("lup.confirm"),e).then(function(e){return A.deleteComponent(t).then(function(){A.deletedComponent&&(m.document.location.href="/courses/"+a.course.id+"/content")})})},a.publishedOrUnderRevision=function(){var e=!1;return a.course.published_status_id!==i.coursePublishedStatuses.published&&a.course.published_status_id!==i.coursePublishedStatuses.under_revision||(e=!0),e},a.showPoints=function(){var t=!1;return q.forEach(a.componentElements,function(e){e.questions[0].enable_pool_randomisation&&q.forEach(e.questions,function(e){1<e.points&&(t=!0)})}),t},a.getTypeText=function(e){var t=i.showMessage("question_pools.rating");return e===i.questionTypes.choice?t=i.showMessage("question_pools.choice"):e===i.questionTypes.feedback&&(t=i.showMessage("question_pools.feedback")),t}}q.module("lu").controller("CoursesEditModuleController",e),e.$inject=["$rootScope","$compile","ComponentFactory","CourseFactory","$scope","$http","LupHelper","EnrollmentHelper","StorageFactory","$filter","spinnerService","$timeout","$interval","$luPopover","$window","$modal","ComponentElementFactory","CourseActionFactory","ExamQuestionPoolFactory","ExamQuestionPoolQuestionFactory","LupJobFactory","LupService","VideoFactory"]}(window.angular),function(g){"use strict";function e(e,n,o,r,t,a,i,s,l,c,u,d,p,_){i=i.get();e.$on("resetVideoThumbnailImageReference",function(){e.video_thumbnail_image_reference=!1}),i.course.attributes?r.course=i.course.attributes:r.course=i.course,r.component=i.component,r.component_element=i.component_element,r.enrollment_approvals_enabled=i.enrollment_approvals_enabled,r.Helper=a,r.forceShowSave=!1;var m,f=new o;f.id=r.component_element.id,f.component_element=r.component_element,r.canChangeThumbnail=function(){return r.component_element.id&&r.component_element.component_element_type_id==a.componentElementTypes.video&&"finished"==r.component_element.encoded_state},r.hide_delete=!r.canChangeThumbnail(),r.hide_save=!r.canChangeThumbnail(),r.loadSegmentIntoView=function(){f.readyForViewing()||f.loadSegmentIntoView().then(function(){r.component_element=f.component_element,r.hide_delete=!r.canChangeThumbnail(),r.hide_save=!r.canChangeThumbnail(),c(function(){r.loadSegmentIntoView()},3e3)})},e.$on("publishCourse",function(){_.publishCourse(r)}),e.$on("createNewCourseVersion",function(){_.createNewCourseVersion(r)}),e.$on("deleteCourse",function(){_.deleteCourse(r)}),e.$on("cloneCourse",function(){_.createCourseCopy(r.course.id)}),e.$on("exportSignedEsignatureModules",function(){_.exportSignedEsignatureModules(r.course.id)}),r.ckeditorInstance="segment_text_wysi",r.imageType=a.fileUploads.types.component_element_image,r.component_element.component_element_type_id===a.componentElementTypes.text?(a.renderCKEditor({clear_all_previous_instances:!0,id:r.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0,editorTextChangeEvent:function(){r.forceShowSave=!0,r.$apply()}}),d.executeDjImageUpload=function(){p.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return r.component_element.id},ckeditorInstance:function(){return r.ckeditorInstance},imageType:function(){return r.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})}):r.loadSegmentIntoView(),r.closeSegment=function(){d.document.location.href="/courses/"+r.course.id+"/content/"+r.component.id+"/edit"},m=r.course.name,1<r.course.version&&(m=m+" ("+a.showMessage("courses.version")+" "+r.course.version+")"),m=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:m,url:"/courses/"+r.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+r.course.id+"/content"},{title:r.component.title,url:"/courses/"+r.course.id+"/content/"+r.component.id+"/edit"},{title:a.segmentBreadCrumbTitle(r.component_element.component_element_type_id),url:"/courses/"+r.course.id+"/content/"+r.component.id+"/edit/"+r.component_element.id}],e.breadcrumbs=m,r.setNumberOfPagesInDocument=function(e){f.component_element=r.component_element,f.setNumberOfPagesInDocument(e)},d.setNumberOfPagesInDocument=r.setNumberOfPagesInDocument,r.loadSegment=function(e){r.segmentsForDirective=[e];var t=document.getElementById("documentViewer");t&&(g.element(t).empty(),e=n("<lup-show-page-segment segments='segmentsForDirective' admin-view='true'></lup-show-page-segment>")(r),g.element(t).append(e))},r.saveSegment=function(){return f.save(r.component.id,r.component_element).then(function(){e.$broadcast("CoursesEditSegmentController::segmentSaved"),r.component_element=f.component_element})},e.$on("deleteSegment",function(){r.deleteSegment()}),r.deleteSegment=function(){u.confirm(I18n.t("lup.confirm"),I18n.t("librarypg.are_you_sure_you_want_to_delete_the_element_from_this_page")).then(function(e){var t=new o,n=null,n=r.component_element.component_element_id?r.component_element.component_element_id:r.component_element.id;return t.destroy(n).then(function(){d.document.location.href="/courses/"+r.course.id+"/content/"+r.component.id+"/edit"})})},r.contentWasAdded=!1,e.$on("contentWasAdded",function(){r.contentWasAdded=!0}),e.$on("addFromLibrary",function(){p.open({templateUrl:"/tc/courses/add_from_library.html",controller:"AddFromLibraryController",size:"lg",resolve:{course:function(){return r.course}}}).result.then(function(){r.contentWasAdded&&(d.document.location.href="/courses/"+r.course.id+"/content")})}),e.$on("addNewContent",function(e,t){r.addNewContent(t.url)}),r.addNewContent=function(e){r.course.published_status_id===a.coursePublishedStatuses.draft?d.document.location.href=e:(e=a.showMessage("courses.you_are_trying_to_edit_a_published_course"),e+="<br/><br/>"+a.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),e+="<br/><br/>"+a.showMessage("courses.are_you_sure_new_version"),u.confirm(a.showMessage("lup.attention"),e).then(function(e){document.location.href="/courses/"+r.course.id+"?newver=1"}))}}g.module("lu").controller("CoursesEditSegmentController",e),e.$inject=["$rootScope","$compile","ComponentElementFactory","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","$luPopover","$window","$modal","CourseActionFactory"]}(window.angular),function(){"use strict";function e(o,n,e,t,r,a,i,s,l,c,u,d,p){var _=new s,t=t.get();n.EnrollmentHelper=r,n.EnrollmentComponentHelper=a,n.review=null,t.review&&(n.review=t.review.attributes),n.showDetails=!0,n.LupHelper=i,n.sidebarNav=1,n.enrollment=t.enrollment.attributes,n.enrollment_components=t.enrollment_components.data,n.can_mark_complete=t.can_mark_complete,n.allows_score_updates=t.allows_score_updates,n.is_admin=t.is_admin,n.is_instructor=t.is_instructor,n.is_manager_with_instructors_permissions=t.is_manager_with_instructors_permissions,n.can_view_enrollment_details=t.can_view_enrollment_details,n.editScore=function(e){u.open({templateUrl:"/tc/courses/edit-enrollment-component-score.html",controller:"EditEnrollmentComponentScoreController",size:"md",resolve:{user_label:function(){return i.displayName(e)},module_label:function(){return e.title},enrollment_component:function(){return d.get("/enrollment_components/:enrollment_component_id/edit.json".replace(/:enrollment_component_id/,e.id))}}}).result.then(function(e){e.action&&"close"!=e.action&&o.location.reload()})},n.resetAttempts=function(e){var t={enrollment_component_id:e.id,enrollment_id:e.enrollment_id};l.confirm(I18n.t("lup.confirm"),I18n.t("courses.are_you_sure_you_want_to_reset_attempts")).then(function(e){d.post("/enrollment_components/reset_attempts.json",t).success(function(e){o.location.reload()}).error(function(e){o.location.reload()})})},n.markComplete=function(n){{n.component_type_id!=i.componentTypes.scorm||n.mastery_score?u.open({templateUrl:"/tc/courses/mark-enrollment-component-complete.html",controller:"MarkEnrollmentComponentCompleteController",size:"md",resolve:{enrollment_component:function(){return n},user_label:function(){return i.displayName(n)},module_label:function(){return n.title},markCompleteData:function(){return d.get("/markcompletes/new_ec.json",{params:{ecid:n.id}})}}}).result.then(function(e){e.action&&"close"!=e.action&&o.location.reload()}):l.confirm(i.showMessage("lup.confirm"),i.showMessage("markcompletes.are_you_sure")).then(function(e){var t={ecid:n.id};d.post("/markcompletes/create_ec.json",t).success(function(e){o.location.reload()}).error(function(e){})})}},n.canMarkCompleted=m,n.canEditScore=f,n.canResetAttempts=g,n.showModuleActions=function(e){return m(e)||f(e)||g(e)},n.enrollmentStatuses=n.LupHelper.enrollmentStatuses,n.componentTypes=n.LupHelper.componentTypes,o.enrollmentComponentListFormDirty=!1,n.save=function(e){p.saveBypassSequenceSettings(n.changedComponentsArray)},n.cancel=function(){o.location.reload()},n.changeBypassSequencing=function(e){var t=!e.override_sequencing,t={id:e.id,override_sequencing:t};n.changedComponentsArray.push(t)},n.changedComponentsArray=[],n.showBypassSequencing=t.showBypassSequencing;t=[{title:i.showMessage("lup.breadcrumbs.courses.index"),url:"/courses/"},{title:n.enrollment.name,url:"/courses/"+n.enrollment.course_id+"/enrollments"},{title:i.showMessage("lup.breadcrumbs.courses.content"),url:"/courses/"+n.enrollment.course_id+"/enrollments/"+n.enrollment.id+"?user_id="+n.enrollment.user_id}];function m(e){return n.EnrollmentComponentHelper.canMarkCompleted(e,n.can_mark_complete)}function f(e){return n.EnrollmentComponentHelper.canEditScore(e,n.allows_score_updates,n.is_admin)}function g(e){return n.EnrollmentComponentHelper.canResetAttempts(e,n.is_admin,n.is_instructor,n.is_manager_with_instructors_permissions)}e.breadcrumbs=t,n.messagingEnabled=function(){return!1},e.$on("destroyEnrollment",function(){n.enrollment.learning_path_id&&0<n.enrollment.learning_path_id?i.showTip("learningpaths.unenroll_warning_user_was_enrolled_via_lp",{lp_name:n.enrollment.learning_path_name}):l.confirm(I18n.t("lup.confirm"),I18n.t("enrollments.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){_.unenroll(n.enrollment.id).then(function(){o.location="/courses/"+n.enrollment.course_id+"/enrollments"})})}),e.$on("downloadCertificate",function(){var e=new c,t={typeId:i.lupJobTypes.downloadCertificate,enrollment_id:n.enrollment.id,for_course:!0,user_id:n.enrollment.user_id};e.initiateJob(t)})}angular.module("lu").controller("CoursesEnrollmentContentController",e),e.$inject=["$window","$scope","$rootScope","StorageFactory","EnrollmentHelper","EnrollmentComponentHelper","LupHelper","EnrollmentFactory","$luPopover","LupJobFactory","$modal","$http","EnrollmentComponentSettingsFactory"]}(),function(F){"use strict";function e(o,e,n,t,r,a,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y,M){var a=a.get(),S=new r,C=new p,A=new v;S.id=a.course.id,o.course=a.course;var L=y.getJsonFromCookie("lu_filters","enrollment_filters");o.cookieExists=y.cookieExists("lu_filters","enrollment_filters");var $,T=a.ssl_enabled,z=!1;if(!function(){o.cookieExists&&(L.page&&L.course_id&&S.id!=L.course_id&&(L.page=1),u.set(L));o.enrollments||setTimeout(function(){M.showGroup("luSpinnerGlobal"),P()},0)}(),o.number_enrolled=a.counts.attributes.number_enrolled,o.number_pending=a.counts.attributes.number_pending,o.number_of_requests=a.counts.attributes.number_of_requests,o.can_destroy=a.can_destroy,o.allows_score_updates=a.allows_score_updates,o.is_admin=a.is_admin,o.is_instructor=a.is_instructor,o.isManagerWithInstructorPermissions=a.is_manager_with_instructor_permissions,o.enrollment_approvals=a.enrollment_approvals,o.show_requests_filter=a.show_requests_filter,o.approval_reference=a.approval_reference,o.enrollment_approvals_enabled=a.enrollment_approvals_enabled,o.learning_credits=a.learning_credits,o.Helper=i,o.enrollmentHelper=s,o.displayEnrollmentDate=function(e){var t={label:i.showMessage("lup.courses.due_date"),value:i.showMessage("lup.set_date"),link:0};e.calculated_expiry_date?(t.label=i.showMessage("lup.courses.expiry_date"),t.value=e.calculated_expiry_date,t.link=1):e.calculated_due_date?(t.label=i.showMessage("lup.courses.due_date"),t.value=e.calculated_due_date,t.link=2):e.date_lastaccessed&&(t.label=i.showMessage("lup.dashboard.last_entered"),t.value=e.date_lastaccessed,t.link=-1);return t},o.displayStartEndDate=function(e){var t={label:i.showMessage("enrolled"),value:e.created_at};e.date_completed&&(t.label=i.showMessage("lup.dashboard.date_completed"),t.value=e.date_completed);return t},o.clearFiltering=function(){o.filterStatus="",o.filterCreatedAfter="",o.userFilterStatus="",o.userFilterGroups=[],o.userFilterGroupIds=[],o.userFilterType="",o.userFilterMembershipType="";var e={search:o.search,advancedSearch:o.advancedSearch,sort:o.sort};t.$broadcast(o.groupTaIdentifier+":CLEAN_QUERY"),t.$broadcast("filterStatus",{status:!1}),u.set(e),P()},o.filterOptions=function(){var e=[{filterName:"filterStatus",value:o.filterStatus},{filterName:"filterCreatedAfter",value:o.filterCreatedAfter},{filterName:"userFilterStatus",value:o.userFilterStatus},{filterName:"userFilterGroups",value:o.userFilterGroupIds.join(",")},{filterName:"userFilterType",value:o.userFilterType}];t.have_membership_types_enabled&&e.push({filterName:"userFilterMembershipType",value:o.userFilterMembershipType});return e},o.loadData=P,o.filterList=function(e){k(!1),o.filter_by===e&&o.$$postDigest(function(){k(!0),o.$digest()});o.filter_by=e},o.manuallySendInvite=function(e){i.showTip("lup.users.tooltip_invite_link",{auth_code:e.auth_code,domain_for_url:location.host})},o.viewEnrollmentDetails=function(e){l.location="/courses/"+o.course.id+"/enrollments/"+e.id+"?user_id="+e.user_id},o.destroyEnrollment=function(t){t.learning_path_id&&0<t.learning_path_id&&t.learning_path_status!==i.publishedStatuses.deleted?i.showTip("learningpaths.unenroll_warning_user_was_enrolled_via_lp",{lp_name:t.learning_path_name}):c.confirm(I18n.t("lup.confirm"),I18n.t("enrollments.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){t.user_id?C.unenroll(t.id).then(function(){var e;1==o.enrollments.data.length&&(e=i.returnPreviousPage(o.enrollments.meta.page),u.merge({page:e})),P()}):C.unenrollPending(t.id,!1).then(function(){P()})})},o.downloadCertificate=function(e){var t=new _,e={typeId:i.lupJobTypes.downloadCertificate,enrollment_id:e.id,for_course:!0,user_id:e.user_id};t.initiateJob(e)},o.viewCredits=function(e,t,n){t={enrollment_id:e,user_id:n,for_course:t};i.viewLearnersCredits(t)},o.showScore=function(e){return(e.status_id==i.enrollmentStatuses.completed||e.status_id==i.enrollmentStatuses.passed||e.status_id==i.enrollmentStatuses.failed)&&!!e.percentage},o.canEditScore=function(e){if(o.is_instructor)return!1;return o.enrollmentHelper.canEditScore(e,o.allows_score_updates,o.is_admin)},o.canMarkComplete=function(e){return o.enrollmentHelper.canMarkCompleted(e,o.can_mark_complete)},o.showExpiryText=function(e){return e.calculated_expiry_date?i.showMessage("lup.courses.edit_expiry_date"):i.showMessage("lup.courses.set_expiry_date")},o.showDueDateText=function(e){return e.calculated_due_date?i.showMessage("lup.courses.edit_due_date"):i.showMessage("lup.courses.set_due_date")},o.setExpiryDate=function(e,t){m.open({templateUrl:"/tc/users/set_enrollment_expiry_date_modal.html",controller:"UsersSetEnrollmentExpiryController",size:"lg",resolve:{enrollment:function(){return e},date_format:function(){return t},user:function(){return i.displayName(e)}}})},o.setDueDate=function(e,t){m.open({templateUrl:"/tc/users/set_enrollment_due_date_modal.html",controller:"UsersSetEnrollmentDueDateController",size:"lg",resolve:{enrollment:function(){return e},date_format:function(){return t},user:function(){return i.displayName(e)}}})},o.markComplete=function(e){var t=m.open({templateUrl:"/tc/courses/mark-enrollment-complete.html",controller:"MarkEnrollmentCompleteController",size:"md",resolve:{enrollment:function(){return e},user_label:function(){return i.displayName(e)},course_label:function(){return e.name},learning_credits:function(){return o.learning_credits},markCompleteData:function(){return n.get("/markcompletes/new.json",{params:{erid:e.id}})}}});t.opened.then(function(){f(function(){},100)}),t.result.then(function(e){e.action&&"close"!=e.action&&o.loadData()})},o.editScore=function(e){m.open({templateUrl:"/tc/courses/edit-enrollment-score.html",controller:"EditEnrollmentScoreController",size:"md",resolve:{user_label:function(){return i.displayName(e)},course_label:function(){return e.name},enrollment:function(){return n.get("/enrollments/:enrollment_id/edit.json".replace(/:enrollment_id/,e.id))}}}).result.then(function(e){e.action&&"close"!=e.action&&o.loadData()})},o.isCourseInProgress=function(e){return e.status_id===i.enrollmentStatuses.in_progress||e.status_id===i.enrollmentStatuses.pending_review},o.toggleSelection=function(e){var t=o.selection.indexOf(e),n=w("filter")(o.enrollment_approvals.data,{id:e},!0)[0];-1<t?o.selection.splice(t,1):o.selection.push(e);o.$broadcast("itemSelect",{message:n,action:-1<t?"deselect":"select"})},o.approveRequest=function(t){c.confirm(E,O).then(function(e){b.approveEnrollmentRequest(t.id).then(function(e){P()})})},o.rejectRequest=function(t){c.confirm(I,D).then(function(e){b.rejectEnrollmentRequest(t.id).then(function(e){P()})})},o.approveRequests=function(){c.confirm(E,O).then(function(e){b.approveEnrollmentRequests(o.selection).then(function(e){o.approval_reference=e.data.job_reference,o.selection=[],N()})})},o.rejectRequests=function(){c.confirm(I,D).then(function(e){b.rejectEnrollmentRequests(o.selection).then(function(e){o.approval_reference=e.data.job_reference,o.selection=[],N()})})},o.cancel=function(){t.$broadcast("selectAll:deSelectAll")},o.onFocusTrapDeactivate=function(){k(!1)},o.groupTaIdentifier="taGroupFilter",o.userStatuses=g.userStatuses,o.userTypes=g.userTypes,o.association_membership_types=h.getKey("association_membership_types"),o.fetchGroups=g.fetchGroups,o.groupCustomSelectFn=g.groupCustomSelectFn,o.ariaLabelSide=i.showMessage("lup.courses.filter_enrollments"),o.activeCourseDDM={},o.toggled=function(e,t){o.activeCourseDDM[t]=e},o.filter_by=i.dashboard_filters.enrolled_courses,a.filter_by&&(o.filter_by=a.filter_by),o.cookieExists)for(var x in L)void 0!==L[x]&&"userFilterGroups"!=x&&(o[x]=L[x]);else o.filterStatus=0,o.filterCreatedAfter="",o.userFilterStatus="",o.userFilterGroups=[],o.userFilterGroupIds=[],o.userFilterType="",o.userFilterMembershipType="",o.search=null,o.sort=null;function P(){var e={};e.params=u.get(),e.params.filter_by=o.filter_by,o.search=e.params.search,o.advancedSearch=e.params.advancedSearch;var t=function(e){e=F.copy(e);return delete e.filter_by,e.course_id=S.id,e}(e.params);y.setCookieValue("lu_filters","enrollment_filters",t,i.session.duration,T),S.getEnrollmentList(e).then(function(){if(o.enrollments=S.enrollments,o.enrollment_approvals=S.enrollment_approvals,o.number_enrolled=S.counts.attributes.number_enrolled,o.number_pending=S.counts.attributes.number_pending,o.number_of_requests=S.counts.attributes.number_of_requests,o.can_mark_complete=S.can_mark_complete,S.groups){o.userFilterGroups=S.groups,o.userFilterGroupIds=[];for(var e=0;e<S.groups.length;e++)o.userFilterGroupIds.push(S.groups[e].id)}var t=l.document.getElementById("exportPending");t&&(o.filter_by==i.dashboard_filters.pending_enrollments?t.removeAttribute("style"):t.style.display="none"),k(!0),z=!0})}function k(e){z&&(o.triggerFocusOnMain=e)}o.filteringControl={},o.selection=[],o.courseEnrollmentTitles=(($={})[i.dashboard_filters.enrolled_courses]=i.showMessage("lup.dashboard.enrolled_users"),$[i.dashboard_filters.pending_enrollments]=i.showMessage("lup.dashboard.pending_enrollments"),$[i.dashboard_filters.enrollment_requests]=i.showMessage("lup.enrollment_approvals.enrollment_requests"),$),o.approval_reference&&N(),t.$on("publishCourse",function(){d.publishCourse(o)}),t.$on("createNewCourseVersion",function(){d.createNewCourseVersion(o)}),t.$on("archiveCourse",function(){d.archiveCourse(o)}),t.$on("embedCourse",function(){d.openEmbedCourseLinkModal(o.course.id)}),t.$on("deleteCourse",function(){d.deleteCourse(o)}),t.$on("cloneCourse",function(){d.createCourseCopy(o.course.id)}),t.$on("exportSignedEsignatureModules",function(){d.exportSignedEsignatureModules(o.course.id)}),o.sortOptions=[{label:i.showMessage("lup.filters.enrolled_asc"),value:"created_at.desc",default:!0},{label:i.showMessage("lup.filters.enrolled_desc"),value:"created_at.asc"},{label:i.showMessage("lup.filters.date_completed_newest"),value:"date_completed.desc"},{label:i.showMessage("lup.filters.date_completed_oldest"),value:"date_completed.asc"},{label:i.showMessage("lup.filters.name_az"),value:"display_name.asc"},{label:i.showMessage("lup.filters.name_za"),value:"display_name.desc"}],o.requestsSortOptions=[{label:i.showMessage("lup.filters.request_date_asc"),value:"request_date.asc",default:!0},{label:i.showMessage("lup.filters.request_date_desc"),value:"request_date.desc"},{label:i.showMessage("lup.filters.user_name_az"),value:"user_name.asc"},{label:i.showMessage("lup.filters.user_name_za"),value:"user_name.desc"},{label:i.showMessage("lup.filters.course_name_az"),value:"course_name.asc"},{label:i.showMessage("lup.filters.course_name_za"),value:"course_name.desc"}],o.enrollmentStatuses=function(){var e=[{id:i.enrollmentStatuses.not_started,title:i.showMessage("dashboard.not_started")},{id:i.enrollmentStatuses.in_progress,title:i.showMessage("dashboard.in_progress")},{id:i.enrollmentStatuses.completed,title:i.showMessage("dashboard.completed")},{id:i.enrollmentStatuses.passed,title:i.showMessage("dashboard.passed")},{id:i.enrollmentStatuses.failed,title:i.showMessage("dashboard.failed")}];t.can_create_assignments&&e.push({id:i.enrollmentStatuses.pending_review,title:i.showMessage("course_assignments.pending_review")});return e}(),o.linkTo=function(e,t){l.location="create_enrollment"==t?"/enrollments/new?course_id="+e:"/courses/"+e+"/"+t},o.$watch("filter_by",function(e,t){e&&(o.ariaLabel=o.courseEnrollmentTitles[e],e!==t&&(o.enrollments.meta.page=1,setTimeout(function(){o.loadData()},0)))}),o.$watch("enrollments.meta.page",function(e,t){e!==t&&void 0!==t&&(e=y.setPageNumberOnCookie("lu_filters","enrollment_filters",e,i.session.duration,T),u.set(e))}),o.getA11Ytranslation=function(){var e=" "+i.showMessage("lup.a11y.page");return o.enrollments&&o.enrollments.meta.page&&(e+=" "+o.enrollments.meta.page),e+=" "+i.showMessage("lup.a11y.loaded"),o.filter_by===i.dashboard_filters.enrolled_courses?i.showMessage("lup.dashboard.enrolled_users")+e:o.filter_by===i.dashboard_filters.pending_enrollments?i.showMessage("lup.dashboard.pending_enrollments")+e:o.filter_by===i.dashboard_filters.enrollment_requests?i.showMessage("lup.enrollment_approvals.enrollment_requests")+e:""};var E=i.showMessage("lup.enrollment_approvals.confirm_approve_enrollment_title"),O=i.showMessage("lup.enrollment_approvals.confirm_approve_enrollment_message"),I=i.showMessage("lup.enrollment_approvals.confirm_reject_enrollment_title"),D=i.showMessage("lup.enrollment_approvals.confirm_reject_enrollment_message");function N(){var e={hideSpinner:!0};return e.url="/download_jobs/"+o.approval_reference+"/status.json",A.get("download_jobs",e,o.approval_reference).then(function(){A.data.job.status_id!==i.lupJobStatuses.completed?o.timeoutPromise=f(function(){N()},2e3):(o.approval_reference=null,P())})}t.$on("expiryDateSaved",function(){P()}),t.$on("dueDateSaved",function(){P()}),t.$on("exportPendingEnrollments",function(){l.location="/courses/"+o.course.id+"/export-pending-enrollments.csv"})}F.module("lu").controller("CoursesEnrollmentsController",e),e.$inject=["$scope","$log","$http","$rootScope","CourseFactory","StorageFactory","LupHelper","EnrollmentHelper","$window","$luPopover","paramsService","CourseActionFactory","EnrollmentFactory","LupJobFactory","$modal","$timeout","usersFilteringOptionsService","StorageFactory","EnrollmentApprovalFactory","learnUponApi","$filter","CookiesService","spinnerService"]}(window.angular),function(f){"use strict";function e(e,t,n,o,r,a,i,s,l,c){var u,d=this,p=new a,m=new i;o.get();d.course=o.getKey("course").attributes,d.course_topic=o.getKey("course_topic").attributes,d.is_enabled=d.course_topic.status_code==n.forums.topics.status_code.published,d.selected_moderators=c.populateDisplayNames(o.getKey("course_moderators").data),d.new_moderators=d.selected_moderators.map(function(e){return e.id}),d.lupHelper=n,d.fetchModerators=function(e){var t=s.defer();return m.getList({url:"/users/non_admins.json",hideSpinner:!0,params:{search:e.$query,page:e.$page}}).then(function(){var e;m.data.users?(e=_.reject(m.data.users.data,function(e){return _.contains(d.new_moderators,e.id)}),e=c.populateDisplayNames(e),t.resolve(e)):t.reject("Failed to get Users!")}),t.promise},d.afterSelectModerator=function(){d.forum_settings_form.$setDirty()},d.save=function(t){var e=d.course_topic;e.status_code=d.is_enabled?n.forums.topics.status_code.published:n.forums.topics.status_code.draft,e.type_code=n.forums.topics.type_code.course,e.moderators=d.new_moderators,p.updateForumSettings(d.course.id,e).then(function(){var e=JSON.parse(p.data.topic_data);f.isDefined(e.forum_topic)&&(e=e.forum_topic,o.setKey("course_topic",e),o.setKey("course_moderators",{data:f.copy(d.selected_moderators)}),d.course_topic=o.getKey("course_topic").attributes),t.$setPristine()})},d.cancel=function(e){e.$setPristine(),d.course_topic=o.getKey("course_topic").attributes,d.selected_moderators=o.getKey("course_moderators").data,d.new_moderators=d.selected_moderators.map(function(e){return e.id})},d.mapModeratorIds=l.groupCustomSelectFn,e.ariaLabel=n.showMessage("lup.a11y.forum_settings_main_aria_label"),e.ariaLabelSide=n.showMessage("lup.a11y.forum_settings_side_aria_label"),t.breadcrumbs=(u=p.getBreadcrumbTitle(d.course.name,d.course.version),[{title:n.showMessage("lup.tabs.courses"),url:"/courses"},{title:u,url:"/courses/"+d.course.id},{title:n.showMessage("lup.forums.course_settings.breadcrumbs"),url:"/courses/"+d.course.id+"/forum_settings"}]),t.$on("publishCourse",function(){r.publishCourse(d)}),t.$on("createNewCourseVersion",function(){r.createNewCourseVersion(d)}),t.$on("archiveCourse",function(){r.archiveCourse(d)}),t.$on("embedCourse",function(){r.openEmbedCourseLinkModal(d.course.id)}),t.$on("deleteCourse",function(){r.deleteCourse(d)}),t.$on("cloneCourse",function(){r.createCourseCopy(d.course.id)})}f.module("lu").controller("CoursesForumSettingsController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","CourseActionFactory","CourseFactory","UsersFactory","$q","usersFilteringOptionsService","LupService"]}(window.angular),function(){"use strict";function e(e,t,r,n,o,a,i,s,l,c,u,d,p,_){var m,f=this,g=new a;new l,n.get();function h(){f.course_topic&&f.course_topic.id?i.location="/forums/my_contribution/new_post?topic_id="+f.course_topic.id+"&object_id="+f.course.id+"&type_id="+r.forums.posts.creation_type.course:f.course_topic&&null===f.course_topic.id?b(f.lupHelper.forums.topics.status_code.draft,!1).then(function(){var e=JSON.parse(g.data.topic_data);e.forum_topic.attributes&&(i.location="/forums/my_contribution/new_post?topic_id="+e.forum_topic.attributes.id+"&object_id="+f.course.id+"&type_id="+r.forums.posts.creation_type.course)}):i.location="/forums/my_contribution/new_post"}function b(e,t){var n=p.defer(),o=f.course_topic;return o.status_code=e,o.type_code=r.forums.topics.type_code.course,o.allow_posting=t,n.resolve(g.updateForumSettings(f.course.id,o)),n.promise}function v(){_.switchButtons("createPost",f.course_topic.status_code!=f.lupHelper.forums.topics.status_code.archived),_.switchButtons("unpublishTopic",f.course_topic.status_code==f.lupHelper.forums.topics.status_code.published&&null!==f.course_topic.id),_.switchButtons("publishTopic",f.course_topic.status_code==f.lupHelper.forums.topics.status_code.draft||null===f.course_topic.id),_.switchButtons("archiveTopic",!1),_.switchButtons("unarchiveTopic",!1),_.switchButtons("enablePosting",!f.course_topic.allow_posting||null===f.course_topic.id),_.switchButtons("disablePosting",f.course_topic.allow_posting&&null!==f.course_topic.id),_.switchButtons("editTopic",!1),_.switchButtons("deleteTopic",!1)}function w(e){e.topic_data&&((e=JSON.parse(e.topic_data))&&e.forum_topic&&e.forum_topic.attributes?f.course_topic=e.forum_topic.attributes:e&&(e.status_code&&(f.course_topic.status_code=e.status_code),f.course_topic.allow_posting=e.allow_posting),v())}f.course=n.getKey("course").attributes,f.course_topic=n.getKey("course_topic").attributes,f.posts=n.getKey("posts"),f.is_admin=n.getKey("is_admin"),f.forums_enabled=n.getKey("forums_enabled"),f.post_cover_reference=n.getKey("post_cover_reference"),f.exposedFunction={},f.showTopicDot=!1,f.createNewPost=h,f.currentUrl=c.absUrl(),f.currentUserPmId=n.getKey("current_user_pm_id"),f.post_cover_reference&&(f.force_refresh=!0,u(function(){return d.pingForProgress(f.post_cover_reference,f.posts.meta.prev_page,f.force_refresh,f.exposedFunction.fetch,!0)},500)),f.lupHelper=r,f.course_forum_settings_url="/courses/"+f.course.id+"/forum_settings",f.filterParams={show_topics_filter_typeahead:!1,show_courses_filter_typeahead:!1,show_lp_filter_typeahead:!1,is_admin:f.is_admin},f.orderTypes=[{label:f.lupHelper.showMessage("lup.forums.post_sort.latest_first"),value:"created_at.DESC",class:"select--ico-latest-first"},{label:f.lupHelper.showMessage("lup.forums.post_sort.oldest_first"),value:"created_at.ASC",class:"select--ico-oldest-first"},{label:f.lupHelper.showMessage("lup.forums.post_sort.most_likes"),value:"likes_count.DESC",class:"select--ico-most-popular"}],f.viewType=f.lupHelper.forums.card_types.grid,f.filterController="ForumsPostsFilterController as vm",f.filterTemplate="/tc/forums/posts-filter.html",f.filterURL="/forums/topic/"+f.course_topic.id+".json",f.show_3dm=!0,f.creationType=r.forums.posts.creation_type.course,v(),t.breadcrumbs=(m=g.getBreadcrumbTitle(f.course.name,f.course.version),[{title:r.showMessage("lup.tabs.courses"),url:"/courses"},{title:m,url:"/courses/"+f.course.id},{title:r.showMessage("lup.forums.course_forum.breadcrumbs"),url:"/courses/"+f.course.id+"/forums"}]),t.$on("publishCourse",function(){o.publishCourse(f)}),t.$on("createNewCourseVersion",function(){o.createNewCourseVersion(f)}),t.$on("archiveCourse",function(){o.archiveCourse(f)}),t.$on("embedCourse",function(){o.openEmbedCourseLinkModal(f.course.id)}),t.$on("deleteCourse",function(){o.deleteCourse(f)}),t.$on("cloneCourse",function(){o.createCourseCopy(f.course.id)}),t.$on("exportSignedEsignatureModules",function(){o.exportSignedEsignatureModules(f.course.id)}),t.$on("createPost",function(){h()}),t.$on("unpublishTopic",function(){f.course_topic&&f.course_topic.id&&_.updateTopicStatus(f.lupHelper.forums.topics.status_code.draft,null,f.course_topic.id).then(function(e){e.success&&w(e)})}),t.$on("publishTopic",function(){var e,t;f.course_topic&&null===f.course_topic.id?(e=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_publish_topic"),t=I18n.t("lup.forums.topics.topic_action.publish_topic"),s.confirm(t,e).then(function(){b(f.lupHelper.forums.topics.status_code.published).then(function(e){(e=g.data).success&&w(e)})})):f.course_topic&&f.course_topic.id&&_.updateTopicStatus(f.lupHelper.forums.topics.status_code.published,null,f.course_topic.id).then(function(e){e.success&&w(e)})}),t.$on("enablePosting",function(){var e;f.course_topic&&null===f.course_topic.id?(e=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_enable_posting"),s.confirm(I18n.t("lup.confirm"),e).then(function(){b(f.lupHelper.forums.topics.status_code.draft,!0).then(function(e){(e=g.data).success&&w(e)})})):f.course_topic&&_.enablePosting(!0,f.course_topic.id).then(function(e){e.success&&w(e)})}),t.$on("disablePosting",function(){f.course_topic&&f.course_topic.id&&_.enablePosting(!1,f.course_topic.id).then(function(e){e.success&&w(e)})}),t.$on("editTopic",function(){})}window.angular.module("lu").controller("CoursesForumsController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","CourseActionFactory","CourseFactory","$window","$luPopover","ForumTopicsFactory","$location","$timeout","LupService","$q","ForumService"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p){var _=this;_.lupHelper=n,_.forumService=u;var m,o=o.get(),f=new a,g=(new l,new d);function h(e){_.post=e}function b(){u.switchButtons("createPost",!0),u.switchButtons("editPost",!0),u.switchButtons("disableCommenting",_.post.allow_commenting),u.switchButtons("enableCommenting",!_.post.allow_commenting),u.switchButtons("archivePost",_.post.status_code!=_.lupHelper.forums.posts.status_code.archived),u.switchButtons("unarchivePost",_.post.status_code==_.lupHelper.forums.posts.status_code.archived),u.switchButtons("deletePost",!0)}function v(){s.toggleCommenting(_.post.title,_.post.allow_commenting,_.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),_.post.allow_commenting=e.allow_commenting),b()})}function w(){s.toggleArchiving(_.post.title,_.post.status_code,_.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),_.post.status_code=e.status_code),b()})}_.post=o.post.attributes,_.course=o.course.attributes,_.isCreator=o.is_creator,_.is_admin=!0,_.post_cover_reference=o.post_cover_reference,_.post_cover_reference&&_.forumService.pingForProgress(_.post_cover_reference,_.post.id,h),_.comments=o.comments,_.isLiked=_.post.is_liked,_.newLike=!1,_.likingAllowed=!0,_.likePost=function(){_.likingAllowed&&(_.likingAllowed=!1,_.isLiked&&0<_.post.likes_count?_.post.likes_count=_.post.likes_count-1:0<=_.post.likes_count&&(_.post.likes_count=_.post.likes_count+1),_.isLiked=!_.isLiked,_.newLike=_.isLiked,g.likePost(_.post.id).finally(function(){_.likingAllowed=!0}))},b(),t.breadcrumbs=(m=f.getBreadcrumbTitle(_.course.name,_.course.version),[{title:n.showMessage("lup.tabs.courses"),url:"/courses"},{title:m,url:"/courses/"+_.course.id},{title:n.showMessage("lup.forums.course_forum.breadcrumbs"),url:"/courses/"+_.course.id+"/forums"},{title:_.post.title,url:"/courses/"+_.course.id+"/forums/"+_.post.id}]),n.contains(p.location.href,"comments")&&c(function(){document.getElementById("comments").scrollIntoView({behavior:"smooth"})}),t.$on("createPost",function(){p.location="/forums/my_contribution/new_post?topic_id="+_.post.forum_topic_id+"&object_id="+_.course.id+"&type_id="+n.forums.posts.creation_type.course}),t.$on("disableCommenting",function(){v()}),t.$on("enableCommenting",function(){v()}),t.$on("editPost",function(){s.editPost(_.post.id,_.course.id,n.forums.posts.creation_type.course,_.isCreator)}),t.$on("archivePost",function(){w()}),t.$on("unarchivePost",function(){w()}),t.$on("deletePost",function(){s.deletePost(_.post.title,_.post.id,"/courses/"+_.course.id+"/forums")}),t.$on("publishCourse",function(){r.publishCourse(_)}),t.$on("createNewCourseVersion",function(){r.createNewCourseVersion(_)}),t.$on("deleteCourse",function(){r.deleteCourse(_)}),t.$on("cloneCourse",function(){r.createCourseCopy(_.course.id)})}window.angular.module("lu").controller("CoursesForumsPostShowController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","CourseActionFactory","CourseFactory","$filter","ForumPostShowActionFactory","learnUponApi","$timeout","ForumService","ForumPostsFactory","$window"]}(),function(){"use strict";function e(n,e,t,o,r,a,i){n.LupHelper=o,n.statuses=o.returnPublishedStatusesForCopiedCourse(),n.copyCode=function(){var e=document.createElement("span");e.appendChild(document.createTextNode(n.codeSnippet)),e.id="tempCopyToClipboard",angular.element(document.body.append(e));var t=document.createRange();t.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges(),e.remove(),a.info(o.showMessage("lup.content_embed.embed_iframe_snippet_in_clipboard"),null,{closeButton:!1})},n.cancel=function(){e.close({action:"close"})};var s=window.location.hostname;n.codeSnippet='<iframe src="https://'+s+"/embed/courses/"+t+'" width="100%" height="700" frameborder="0"></iframe>'}angular.module("lu").controller("CoursesGenerateEmbedLinkController",e),e.$inject=["$scope","$modalInstance","courseId","LupHelper","$http","toastr","$rootScope"]}(),function(){"use strict";function e(e,n,t,o,r,a){var i=this,s=new o,l=new r,r=e.getKey("course");i.groups=e.getKey("groups"),i.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),i.course=r.attributes,i.remove=function(e){s.removeCourse(e.group_id,e.id,function(){l.getGroups(i.course.id).then(function(){i.groups=l.data.groups})})},i.helper=t,n.ariaLabel=t.showMessage("lup.a11y.courses_groups_all_groups"),n.ariaLabelSide=t.showMessage("lup.a11y.courses_groups_additional_info"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:i.course.name,url:"/courses/"+i.course.id},{title:I18n.t("lup.breadcrumbs.courses.groups"),url:"/courses/"+i.course.id+"/groups"}],n.$on("publishCourse",function(){a.publishCourse(i)}),n.$on("createNewCourseVersion",function(){a.createNewCourseVersion(i)}),n.$on("archiveCourse",function(){a.archiveCourse(i)}),n.$on("embedCourse",function(){a.openEmbedCourseLinkModal(i.course.id)}),n.$on("deleteCourse",function(){a.deleteCourse(i)}),n.$on("cloneCourse",function(){a.createCourseCopy(i.course.id)}),n.$on("exportSignedEsignatureModules",function(){a.exportSignedEsignatureModules(i.course.id)})}angular.module("lu").controller("CoursesGroupsController",e),e.$inject=["StorageFactory","$rootScope","LupHelper","GroupsFactory","CourseFactory","CourseActionFactory"]}(),function(){"use strict";window.angular.module("lu").controller("CoursesIndexController",["$scope","$log","$http","$rootScope","CourseFactory","StorageFactory","LupHelper","$window","$luPopover","paramsService","CourseActionFactory","$modal","$filter","CookiesService","spinnerService",function(o,e,t,n,r,a,i,s,l,c,u,d,p,_,m){var a=a.get(),f=new r;o.groups=a.groups,o.enable_bulk_clone=a.enable_bulk_clone,o.can_enroll=a.can_enroll,o.is_admin=a.is_admin,o.user_allowed_to_copy_courses=n.user_allowed_to_copy_courses,o.is_gamification_enabled=a.is_gamification_enabled,o.can_edit_this_course=a.can_edit_this_course,o.ilts_enabled=a.ilts_enabled,o.courseStatuses=function(){var e=[{id:i.coursePublishedStatuses.draft,title:i.showMessage("course_status.draft")},{id:i.coursePublishedStatuses.published,title:i.showMessage("course_status.published")},{id:i.coursePublishedStatuses.under_revision,title:i.showMessage("course_status.under_revision")},{id:i.coursePublishedStatuses.archived,title:i.showMessage("course_status.archived")}];n.ecommerce_enabled&&e.push({id:"sellable",title:i.showMessage("course_status.sellable")});n.catalog_enabled&&e.push({id:"cataloged",title:i.showMessage("group_catalog.cataloged")});n.can_create_assignments&&e.push({id:"pendingreview",title:i.showMessage("course_assignments.pending_review")});return e}(),o.advancedSearchInfo=n.enable_course_ref_nums?i.showMessage("lup.courses.search_info_with_reference_code"):i.showMessage("lup.courses.search_info");var g=_.getJsonFromCookie("lu_filters","courses_filters");o.cookieExists=_.cookieExists("lu_filters","courses_filters");var h=a.ssl_enabled;if(!function(){o.cookieExists&&c.set(g);o.courses||setTimeout(function(){m.showGroup("luSpinnerGlobal"),v()},0)}(),o.can_author_courses=a.can_author_courses,o.helper=i,o.ariaLabelSide=i.showMessage("lup.courses.filter"),o.ariaLabel=i.showMessage("a11y.course_list"),o.createCopy=function(e){d.open({templateUrl:"/tc/courses/clone_course.html",controller:"CoursesCloneController",size:"md",resolve:{courseCloneData:function(){return t.get("/courses/initiate_clone/:course_id.json".replace(/:course_id/,e))},user_allowed_to_copy_courses:function(){return o.user_allowed_to_copy_courses}}}).result.then(function(e){e.action&&"close"!=e.action&&o.loadData()})},o.activeCourseDDM={},o.toggled=function(e,t){o.activeCourseDDM[t]=e},o.filteringControl={},o.previewCourse=function(e,t){f.createPreviewCourse(e).then(function(){s.location=t?"/courses/"+e+"/preview_description/"+f.data.preview_enrollment_id:"/courses/"+e+"/preview/"+f.data.preview_enrollment_id})},o.cookieExists)for(var b in g)void 0!==g[b]&&(o[b]=g[b]);else o.filterStatus="",o.filterGroup="",o.filterCreatedAfter="",o.filterPublishedAfter="",o.search=null,o.advancedSearch=null;o.unsetPublishedAfter=function(){o.filterStatus===i.publishedStatuses.draft&&(o.filterPublishedAfter="")};a=[{label:i.showMessage("lup.filters.created_at"),value:"id.desc",default:!0},{label:i.showMessage("lup.filters.name_az"),value:"name.asc"},{label:i.showMessage("lup.filters.name_za"),value:"name.desc"},{label:i.showMessage("lup.filters.modules_asc"),value:"course_components_count.asc"},{label:i.showMessage("lup.filters.modules_desc"),value:"course_components_count.desc"}];function v(){var e={};e.params=c.get(),o.search=e.params.search,o.advancedSearch=e.params.advancedSearch,_.setCookieValue("lu_filters","courses_filters",e.params,i.session.duration,h),f.getListIndex(e).then(function(){m.hideGroup("luSpinnerGlobal"),o.courses=f.data.courses,n.$broadcast("selectAll:deSelectAll")})}o.sortOptions=a,o.selection=[],o.canEnroll=function(e){return o.can_enroll&&e.published_status_id==i.coursePublishedStatuses.published},o.canEdit=function(e){return!i.courseIsCloning(e)&&(!!o.can_author_courses&&(e.portal_id==o.current_portal_id||(!(!o.is_gamification_enabled||!o.is_admin)||(!!(o.catalog_enabled||o.ecommerce_enabled&&1==e.allowed_to_sell)||!!o.can_edit_this_course))))},o.isLicense=function(e){var t=!1;return e.portal_id!==o.current_portal_id&&(t=!0),t},n.$on("exportToExcel",function(){for(var e={},t=0;t<o.filterOptions().length;t++)e[o.filterOptions()[t].filterName]=o.filterOptions()[t].value;e.search=o.searchText,u.exportToExcel(e)}),n.$on("exportAllCourseRatingsAndReviews",function(){u.exportAllCourseRatingsAndReviews()}),n.$on("batchImport",function(){s.location="/batch-upload?enroll_to_courses=true"}),o.clearFiltering=function(){o.filterStatus="",o.filterGroup="",o.filterCreatedAfter="",o.filterPublishedAfter="";var e={search:o.search,advancedSearch:o.advancedSearch,sort:o.sort};n.$broadcast("filterStatus",{status:!1}),c.set(e),v()},o.searchText=null,o.filterOptions=function(){return[{filterName:"filterStatus",value:o.filterStatus},{filterName:"filterGroup",value:o.filterGroup},{filterName:"filterCreatedAfter",value:o.filterCreatedAfter},{filterName:"filterPublishedAfter",value:o.filterPublishedAfter}]},o.loadData=v,o.toggleSelection=function(e){var t=o.selection.indexOf(e),n=p("filter")(o.courses.data,{id:e},!0)[0];-1<t?o.selection.splice(t,1):o.selection.push(e),o.$broadcast("itemSelect",{message:n,action:-1<t?"deselect":"select"})},o.$watch("courses.meta.page",function(e,t){e!==t&&void 0!==t&&(e=_.setPageNumberOnCookie("lu_filters","courses_filters",e,i.session.duration,h),c.set(e))}),o.cloneCourses=function(){var e={params:{ids:o.selection.toString()}};o.selection&&d.open({templateUrl:"/tc/courses/clone_courses_bulk.html",controller:"CoursesBulkCloneController",size:"md",resolve:{courseCloneData:function(){return t.get("/courses/initiate_bulk_clone/0.json",e)},selectedIds:function(){return o.selection.toString()}}}).result.then(function(e){e.action&&"close"!=e.action&&(o.loadData(),o.selection.length=0)})}}])}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c){var u=this,d=e.getKey("course"),p=e.getKey("instructors");function m(){var e={};e.params=n.get(),e.course_id=u.course.id,r.getList(e).then(function(){u.instructors=r.data.instructors})}u.helper=t,u.course=d,u.instructors=p,u.instructorWasAdded=!1,u.learnerWasAdded=!1,u.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),s.ariaLabel=t.showMessage("lup.a11y.courses_instructors_all_instructors"),s.ariaLabelSide=t.showMessage("lup.a11y.courses_instructors_additional_info"),s.activeCourseDDM={},s.toggled=function(e,t){s.activeCourseDDM[t]=e},u.show=function(e){a.location="/users/"+e.user_id},u.loadData=m,u.doRemove=function(t){o.confirm(I18n.t("lup.confirm"),I18n.t("course_assignments.are_you_sure_you_want_to_remove_this_instructor",{user_name:t.display_name,course_owner:u.course.owner})).then(function(e){l.post("/courses/"+u.course.id+"/remove_instructor.json",{id:t.id}).success(function(e){n.merge({page:1}),m()})})},u.viewLearners=function(e){a.location="/courses/"+u.course.id+"/instructors/"+e.id+"/learners"},u.addLearners=function(e){u.learnerWasAdded=!1,i.open({templateUrl:"/tc/courses/add_learners.html",controller:"AddLearnersController",size:"lg",resolve:{course:function(){return u.course.id},instructor:function(){return e.id}}}).result.then(function(){u.learnerWasAdded&&m()})},s.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:u.course.name,url:"/courses/"+u.course.id},{title:I18n.t("lup.breadcrumbs.courses.instructors"),url:"/courses/"+u.course.id+"/instructors"}],s.$on("instructorWasAdded",function(){u.instructorWasAdded=!0}),s.$on("assignInstructors",function(){var e=_.map(u.instructors.data,function(e){return e.user_id});i.open({templateUrl:"/tc/courses/assign_instructors.html",controller:"AssignInstructorsController",size:"lg",resolve:{course:function(){return u.course},selectedInstructorIds:function(){return e}}}).result.then(function(){u.instructorWasAdded&&m()})}),s.$on("publishCourse",function(){c.publishCourse(u)}),s.$on("createNewCourseVersion",function(){c.createNewCourseVersion(u)}),s.$on("archiveCourse",function(){c.archiveCourse(u)}),s.$on("embedCourse",function(){c.openEmbedCourseLinkModal(u.course.id)}),s.$on("deleteCourse",function(){c.deleteCourse(u)}),s.$on("cloneCourse",function(){c.createCourseCopy(u.course.id)}),s.$on("exportSignedEsignatureModules",function(){c.exportSignedEsignatureModules(u.course.id)})}angular.module("lu").controller("CoursesInstructorsController",e),e.$inject=["StorageFactory","paramsService","LupHelper","$luPopover","CourseInstructorsFactory","$window","$modal","$rootScope","$http","CourseActionFactory"]}(),function(){"use strict";function e(e,t,n,o){e.formData={name:null,description:null},e.forceShowSave=!1,e.ariaLabel=n.showMessage("lup.courses.create_new"),e.ariaLabelSide=n.showMessage("lup.a11y.info_tab"),e.save=function(e){e.$valid&&(o.showGroup("luSpinnerGlobal"),e.commit())},n.renderCKEditor({id:"course_form_description",width:"100%"}),setTimeout(function(){n.renderCKEditor({clear_all_previous_instances:!0,id:"course_form_description",add_image_upload:!1,save_button_action:"save_text_button",add_embedded_media:!1,width:"100%",editorTextChangeEvent:function(){e.forceShowSave=!0,e.$apply()}})},0)}window.angular.module("lu").controller("CoursesNewController",e),e.$inject=["$scope","$http","LupHelper","spinnerService"]}(),function(){"use strict";function e(n,e,o,t,r,a){n.Helper=o;var i,t=t.get();function s(e){window.location=n.componentUrl+"/edit"}n.checklist_question={},n.course=t.course,n.saveDisabled=!1,n.component=t.component,n.componentUrl="/courses/:course_id/content/:component_id".replace(":course_id",n.course.id).replace(":component_id",n.component.id),n.componentAddItemUrl=n.componentUrl+"/add-item",n.save=function(){n.saveDisabled=!0,e.post(n.componentAddItemUrl,n.checklist_question).success(s).error(s)},n.cancel=function(){window.location=n.componentUrl+"/edit"},r.$on("addNewContent",function(e,t){-1<t.url.indexOf("content/"+o.componentTypes.session+"/new")&&n.course.contains_trainings?$luPopover.notify("",o.showMessage("events.course_cannot_contain_events_and_legacy_ilts")):n.addNewContent(t.url)}),n.addNewContent=function(e){n.course.published_status_id===o.coursePublishedStatuses.draft?a.document.location.href=e:(e=o.showMessage("courses.you_are_trying_to_edit_a_published_course"),e+="<br/><br/>"+o.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),e+="<br/><br/>"+o.showMessage("courses.are_you_sure_new_version"),$luPopover.confirm(o.showMessage("lup.attention"),e).then(function(e){document.location.href="/courses/"+n.course.id+"?newver=1"}))},i=n.course.name,1<n.course.version&&(i=i+" ("+o.showMessage("courses.version")+" "+n.course.version+")"),i=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:i,url:"/courses/"+n.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+n.course.id+"/content"},{title:n.component.title,url:"/courses/"+n.course.id+"/content/"+n.component.id+"/edit"},{title:o.showMessage("lup.breadcrumbs.components.new_checklist_question"),url:n.componentAddItemUrl}],r.breadcrumbs=i}window.angular.module("lu").controller("CoursesNewItemController",e),e.$inject=["$scope","$http","LupHelper","StorageFactory","$rootScope","$window"]}(),function(h){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p,_,m){var f,g=new n,i=i.get();o.course=i.course,g.id=o.course.id,o.component=i.component,o.enrollment_approvals_enabled=i.enrollment_approvals_enabled,o.settingMinimalThresholdForMsTeamsEnabled=i.setting_minimal_threshold_for_ms_teams_enabled,o.can_only_manage_ilts=i.can_only_manage_ilts,i.survey&&(o.component.survey=i.survey),o.openPage=function(e,t){e&&t&&(d.location.href="/courses/"+e.id+"/content/"+t.id+"/edit")},o.EnrollmentHelper=m,o.contents=i.contents,o.showSaveButton=!1,o.setShowSaveButtons=function(){o.showSaveButton=!0},o.Helper=a,o.ariaLabel=a.showMessage("lup.a11y.assignment_main_label"),o.ariaLabelSide=a.showMessage("lup.a11y.course_content_add_module_sidebar"),e.$on("publishCourse",function(){_.publishCourse(o)}),e.$on("deleteCourse",function(){_.deleteCourse(o)}),e.$on("cloneCourse",function(){_.createCourseCopy(o.course.id)}),e.$on("exportSignedEsignatureModules",function(){_.exportSignedEsignatureModules(o.course.id)}),f=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:o.course.name,url:"/courses/"+o.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+o.course.id+"/content"},{title:a.newModuleBreadCrumbTitle(o.component.component_type_id),url:"/courses/"+o.course.id+"/content/"+o.component.component_type_id+"/new"}],e.breadcrumbs=f,o.saveComponent=function(){return g.component=o.component,g.saveComponent().then(function(){o.showSaveButton=!1,g.component.id&&(d.document.location.href="/courses/"+o.course.id+"/content/"+g.component.id+"/edit")})},o.cancelCreate=function(){d.document.location.href="/courses/"+o.course.id+"/content"},o.contentWasAdded=!1,e.$on("contentWasAdded",function(){o.contentWasAdded=!0}),o.addFromLibrary=function(){p.open({templateUrl:"/tc/courses/add_from_library.html",controller:"AddFromLibraryController",size:"lg",resolve:{course:function(){return o.course}}}).result.then(function(){o.contentWasAdded&&(d.document.location.href="/courses/"+o.course.id+"/content")})},o.addNewContent=function(e,t){o.course.published_status_id===a.coursePublishedStatuses.draft?d.document.location.href=function(e,t){var n="/courses/:course_id/content/:type/new".replace(/:course_id/,o.course.id).replace(/:type/,e);h.isObject(t)&&h.forEach(t,function(e,t){n.indexOf("?")<0?n+="?"+t+"="+e:n+="&"+t+"="+e});return n}(e,t):(t=a.showMessage("courses.you_are_trying_to_edit_a_published_course"),t+="<br/><br/>"+a.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),t+="<br/><br/>"+a.showMessage("courses.are_you_sure_new_version"),u.confirm(a.showMessage("lup.attention"),t).then(function(e){document.location.href="/courses/"+o.course.id+"?newver=1"}))}}h.module("lu").controller("CoursesNewModuleController",e),e.$inject=["$rootScope","$compile","CourseFactory","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","$luPopover","$window","$modal","CourseActionFactory","EnrollmentHelper"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p,_){var m,i=i.get();i.course.attributes?o.course=i.course.attributes:o.course=i.course,o.component=i.component,o.component_element=i.component_element,o.component_element.component_element_type_id=o.component_element.resource_type_id,delete o.component_element.resource_type_id,o.enrollment_approvals_enabled=i.enrollment_approvals_enabled,o.Helper=a,o.forceShowSave=!1,e.$on("publishCourse",function(){_.publishCourse(o)}),e.$on("deleteCourse",function(){_.deleteCourse(o)}),e.$on("cloneCourse",function(){_.createCourseCopy(o.course.id)}),e.$on("exportSignedEsignatureModules",function(){_.exportSignedEsignatureModules(o.course.id)}),o.ckeditorInstance="segment_text_wysi",o.imageType=a.fileUploads.types.component_element_image,a.renderCKEditor({clear_all_previous_instances:!0,id:o.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0,editorTextChangeEvent:function(){o.forceShowSave=!0,o.$apply()}}),d.executeDjImageUpload=function(){p.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return null},ckeditorInstance:function(){return o.ckeditorInstance},imageType:function(){return o.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},o.closeSegment=function(){d.document.location.href="/courses/"+o.course.id+"/content/"+o.component.id+"/edit"},m=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:o.course.name,url:"/courses/"+o.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+o.course.id+"/content"},{title:o.component.title,url:"/courses/"+o.course.id+"/content/"+o.component.id+"/edit"},{title:a.newSegmentBreadCrumbTitle(o.component_element.component_element_type_id),url:"/courses/"+o.course.id+"/content/"+o.component.id+"/edit/"+o.component_element.component_element_type_id+"/new"}],e.breadcrumbs=m,o.saveSegment=function(){var e=new n;return o.hide_delete=!0,e.save(o.component.id,o.component_element).then(function(){o.component_element=e.component_element,o.component_element&&o.component_element.id&&(d.document.location.href="/courses/"+o.course.id+"/content/"+o.component.id+"/edit/"+o.component_element.id)})},o.contentWasAdded=!1,e.$on("contentWasAdded",function(){o.contentWasAdded=!0}),e.$on("addFromLibrary",function(){p.open({templateUrl:"/tc/courses/add_from_library.html",controller:"AddFromLibraryController",size:"lg",resolve:{course:function(){return o.course}}}).result.then(function(){o.contentWasAdded&&(d.document.location.href="/courses/"+o.course.id+"/content")})}),e.$on("addNewContent",function(e,t){o.addNewContent(t.url)}),o.addNewContent=function(e){o.course.published_status_id===a.coursePublishedStatuses.draft?d.document.location.href=e:(e=a.showMessage("courses.you_are_trying_to_edit_a_published_course"),e+="<br/><br/>"+a.showMessage("courses.if_you_want_to_edit_then_you_have_to_make_revision"),e+="<br/><br/>"+a.showMessage("courses.are_you_sure_new_version"),u.confirm(a.showMessage("lup.attention"),e).then(function(e){document.location.href="/courses/"+o.course.id+"?newver=1"}))}}window.angular.module("lu").controller("CoursesNewSegmentController",e),e.$inject=["$rootScope","$compile","ComponentElementFactory","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$timeout","$luPopover","$window","$modal","CourseActionFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=r.get();e.course=s.course.attributes,e.completion_email_options=s.completion_email_options.data,e.email_banner_options=s.email_banner_options.data,e.custom_enroll_enabled=s.enabled_templates.attributes.custom_enroll_enabled,e.custom_reminder_enabled=s.enabled_templates.attributes.custom_reminder_enabled,e.custom_completion_enabled=s.enabled_templates.attributes.custom_completion_enabled,e.course.custom_completion=u(e.course.custom_completion),e.course.custom_reminder=u(e.course.custom_reminder),e.course.custom_enroll=u(e.course.custom_enroll),e.course.custom_footer=u(e.course.custom_footer),e.enrollment_approvals_enabled=s.enrollment_approvals_enabled,e.formData={},e.helper=o,e.ariaLabel=o.showMessage("a11y.notifications_main_content"),e.ariaLabelSide=o.showMessage("lup.a11y.notifications_aside_content"),e.helper.renderCKEditor(d("custom_enroll_text_wysi")),e.helper.renderCKEditor(d("custom_reminder_text_wysi")),e.helper.renderCKEditor(d("custom_completion_text_wysi")),e.helper.renderCKEditor(d("custom_footer_text_wysi")),e.forceShowSave=!1;var l=CKEDITOR.instances.custom_enroll_text_wysi,r=CKEDITOR.instances.custom_reminder_text_wysi,s=CKEDITOR.instances.custom_completion_text_wysi,o=CKEDITOR.instances.custom_footer_text_wysi;l.on("change",function(){c()}),r.on("change",function(){c()}),s.on("change",function(){c()}),o.on("change",function(){c()});var c=function(){e.forceShowSave=!0,e.$apply()};function u(e){return e=e&&(e=e.replace(/\\{\\{/g,"{{")).replace(/\\}\\}/g,"}}")}function d(e){return{id:e,body_class:"ck-editor-notifications-messages",include_custom_css:!0,width:"100%",add_image_upload:!0}}e.save=function(e){e.$valid&&(a.showGroup("luSpinnerGlobal"),e.commit())},t.$on("publishCourse",function(){i.publishCourse(e)}),t.$on("createNewCourseVersion",function(){i.createNewCourseVersion(e)}),t.$on("archiveCourse",function(){i.archiveCourse(e)}),t.$on("embedCourse",function(){i.openEmbedCourseLinkModal(e.course.id)}),t.$on("deleteCourse",function(){i.deleteCourse(e)}),t.$on("cloneCourse",function(){i.createCourseCopy(e.course.id)}),t.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(e.course.id)})}window.angular.module("lu").controller("CoursesNotificationsController",e),e.$inject=["$scope","$rootScope","$filter","LupHelper","StorageFactory","spinnerService","CourseActionFactory"]}(),window.angular.module("lu").controller("CoursesPreviewEnrollmentController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$sce","$window","EnrollmentHelper","$filter","EnrollmentComponentFactory","EnrollmentFactory","EnrollmentComponentElementFactory","$luPopover","$sanitize","LupJobFactory","spinnerService","$location","LuaFactory",function(i,e,t,n,s,o,r,a,l,c,u,d,p,_,m,f,g,h){var n=n.get(),b=(new u,new c),v=new d,m=new m;r.luPopover=p,r.spinnerService=f,i.EnrollmentHelper=a,i.helper=s,i.enrollment=n.enrollment.attributes,i.was_just_completed=n.was_just_completed,i.showNavigation=!0,i.is_preview=!0,i.can_author_courses=n.can_author_courses,i.on_description_page=n.on_description_page,i.is_license=n.is_license,i.loadedInSalesforce=n.loaded_in_salesforce,i.settingMinimalThresholdForMsTeamsEnabled=n.setting_minimal_threshold_for_ms_teams_enabled,i.courseProgressionUiRedesign=n.course_progression_ui_redesign,i.concurrentAndSeriesSessions=n.concurrent_and_series_sessions,i.web_components_redesign_enabled=n.web_components_redesign_enabled,i.courseImages=n.course_images,i.courseImagePlaceholder=CONFIG.cdnPath+"images/blank-state/no-course-img.png",i.completedBannerIcon=CONFIG.cdnPath+"images/course-progression/completed-course.png",i.failedBannerIcon=CONFIG.cdnPath+"images/course-progression/failed-course.png",i.badgeBannerIcon=CONFIG.cdnPath+"images/course-progression/course-badge.png",i.startBannerIcon=CONFIG.cdnPath+"images/course-progression/start-banner.png",i.drawerState=840<window.innerWidth,i.toggleOpenDrawer=function(e){i.drawerState=e},i.tincan_completion_tracking=n.tincan_completion_tracking,t.tincan_completion_tracking=i.tincan_completion_tracking,i.windowWidth=window.innerWidth,i.wasBelowTabletWidth=r.innerWidth<=840;function w(){i.$apply(function(){var e=angular.element(document.getElementById("drawer-toggle"));i.windowWidth=r.innerWidth,i.windowWidth<=840&&!i.wasBelowTabletWidth?(e[0].checked=!0,i.wasBelowTabletWidth=!0):840<i.windowWidth&&i.wasBelowTabletWidth&&(e[0].checked=!1,i.wasBelowTabletWidth=!1)})}function y(e){for(var t=0;t<i.enrollment_components.length;t++)i.enrollment_components[t].id===i.enrollment_component.id&&(e?i.enrollment_components[t-1]&&i.loadPage(i.enrollment_components[t-1],0):i.enrollment_components[t+1]&&i.loadPage(i.enrollment_components[t+1],0))}angular.element(r).on("resize",w),i.$on("$destroy",function(){angular.element(r).off("resize",w)}),i.social_sharing_enabled=function(e){return!1},i.enrollment_components=[],n.enrollment_components&&(i.enrollment_components=n.enrollment_components.data),i.enrollment_component_elements=[],n.elements&&(i.enrollment_component_elements=n.elements.data),i.enrollment_component=n.enrollment_component,i.enrollment_component&&i.enrollment_component.attributes&&(i.enrollment_component=i.enrollment_component.attributes),i.updateEnrollmentComponentStatus=function(e){},r.updateEnrollmentComponentStatus=i.updateEnrollmentComponentStatus,i.enrollment_component.assignment_upload_feedbacks=[],i.enrollment_component.assignment_handouts=n.assignment_handouts||[],i.enrollment_component.assignment_uploads=[],i.enrollment_component.tutors=n.tutors||[],i.enrollment_component.question_to_render=null,n.question_to_render&&(i.enrollment_component.question_to_render=n.question_to_render.attributes,i.enrollment_component.question_to_render_answers=n.question_to_render_answers),i.enrollment_component.answer_options=n.answer_options||[],i.enrollment_component.column_option_choices=n.column_option_choices||[],i.enrollment_component.question_index=n.question_index,i.enrollment_component.available_match_answers=n.available_match_answers||[],i.show_course_completion_button=!1,i.show_sign_button_immediately=!1,i.show_page_data=i.enrollment_component&&0<=[s.componentTypes.page,s.componentTypes.e_signature].indexOf(i.enrollment_component.component_type_id),i.enrollmentCompletedPassedOrFailed=function(){return i.enrollment.status_id==s.enrollmentStatuses.completed||i.enrollment.status_id==s.enrollmentStatuses.passed||i.enrollment.status_id==s.enrollmentStatuses.failed},i.openCourseDescription=function(e,t){t&&e&&(r.location.href="/courses/"+e+"/preview_description/"+t)},i.catalogEnabled=function(){return t.catalog_enabled},i.storeEnabled=function(){return t.ecommerce_enabled},i.completionMsgStyle=function(){return i.enrollment.status_id!==s.enrollmentStatuses.completed&&i.enrollment.status_id!==s.enrollmentStatuses.passed&&1==i.enrollment.show_passfail_to_learners?"alert-danger":"alert-success"},i.completionMsgThumbUpOrDown=function(){return i.enrollment.status_id===s.enrollmentStatuses.completed||i.enrollment.status_id===s.enrollmentStatuses.passed?"fa-check":"fa-times"},i.completionMsgIconRedesign=function(){return i.enrollment.status_id===s.enrollmentStatuses.completed||i.enrollment.status_id===s.enrollmentStatuses.passed?i.completedBannerIcon:i.failedBannerIcon},i.completionMsg=function(){return i.enrollment.status_id===s.enrollmentStatuses.completed||i.enrollment.status_id===s.enrollmentStatuses.passed?s.showMessage("emails.email_title_completed_course"):s.showMessage("components.failed_but_no_reattempts")},i.showProgressBar=function(){return 0<i.enrollment_components.length},i.reloadCourseContent=function(){i.loadPage(i.enrollment_component,0)},r.reloadCourseContent=i.reloadCourseContent,i.wasJustCompletedAfterExam=function(e){i.was_just_completed=e},r.wasJustCompletedAfterExam=i.wasJustCompletedAfterExam,i.trackPageClick=function(e,t,n,o){var r=s.setupConfig(i);r.params.current_page=e,r.params.num_pages=t,r.params.show_complete=n,r.params.component_element_type_id=o,r.params.enrollment_component_id=i.enrollment_component.id,r.params.enrollment_id=i.enrollment.id,r.hideSpinner=!0,v.trackPageClick(r).then(function(){i.enrollment=v.enrollment})},r.trackPageClick=i.trackPageClick,i.trackVideoDuration=function(e,t,n,o,r){var a=s.setupConfig(i);a.params.video_duration=e,a.params.video_duration_viewed=t,a.params.video_last_position=n,a.params.show_complete=o,a.params.component_element_type_id=r,a.params.enrollment_component_id=i.enrollment_component.id,a.params.enrollment_id=i.enrollment.id,a.hideSpinner=!0,v.trackVideoDuration(a).then(function(){i.enrollment=v.enrollment})},r.trackVideoDuration=i.trackVideoDuration,i.showConfirmCompletion=function(){return i.enrollment.status_id<s.enrollmentStatuses.completed},i.refreshProgressBar=function(e){i.enrollment=e},r.refreshProgressBar=i.refreshProgressBar,i.loadPage=function(e,t){return i.enrollment&&1==i.enrollment.auto_launch_scorm?f.hideGroup("luSpinnerGlobal",0):(b.show_course_completion_button=!1,b.show_sign_button_immediately=!1,r.location.href="/courses/"+i.enrollment.course_id+"/preview/"+i.enrollment.id+"/page/"+e.id),!1},i.messagingEnabled=function(){return!1},t.$on("previousPage",function(){y(!0)}),t.$on("nextPage",function(){y(!1)}),i.hidePreviewFooterAction=function(){return t.hidePreviewFooterAction||!i.can_author_courses},i.enrollment&&1==i.enrollment.auto_launch_scorm&&(t.hidePreviewFooterAction=!0,1==i.enrollment.contains_tincans?launch_tincan_course(i.enrollment_components[0].component_id,i.enrollment.id,m,i.tincan_completion_tracking):launch_scorm_course(i.enrollment_components[0].component_id,i.enrollment.id)),h.setup({scope:i}),h.addLuaCoursePlayerEventListeners()}]),window.angular.module("lu").controller("CoursesPreviewEnrollmentDescriptionController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$sce","$window","EnrollmentHelper","$filter","EnrollmentComponentFactory","EnrollmentFactory","EnrollmentComponentElementFactory","$luPopover","$sanitize","LupJobFactory","spinnerService","$location","LuaFactory",function(n,e,t,o,r,a,i,s,l,c,u,d,p,_,m,f,g,h){var o=o.get(),b=(new u,new c);new d;i.luPopover=p,i.spinnerService=f,n.EnrollmentHelper=s,n.helper=r,n.enrollment=o.enrollment.attributes,n.on_description_page=o.on_description_page,n.showNavigation=!0,n.can_author_courses=o.can_author_courses,n.courseProgressionUiRedesign=o.course_progression_ui_redesign,n.courseImages=o.course_images,n.courseImagePlaceholder=CONFIG.cdnPath+"images/blank-state/no-course-img.png",n.enrollment_components=[],o.enrollment_components&&(n.enrollment_components=o.enrollment_components.data),n.enrollment_component_elements=[],o.elements&&(n.enrollment_component_elements=o.elements.data),n.enrollment_component=o.enrollment_component,n.enrollment_component&&n.enrollment_component.attributes&&(n.enrollment_component=n.enrollment_component.attributes),o.question_to_render&&(n.enrollment_component.question_to_render=o.question_to_render.attributes),n.show_course_completion_button=!1,n.show_sign_button_immediately=!1,n.loadPage=function(e,t){return b.show_course_completion_button=!1,b.show_sign_button_immediately=!1,i.location.href="/courses/"+n.enrollment.course_id+"/preview/"+n.enrollment.id+"/page/"+e.id,!1},n.hidePreviewFooterAction=function(){return t.hidePreviewFooterAction||!n.can_author_courses},h.setup({scope:n}),h.addLuaCoursePlayerEventListeners()}]),function(){"use strict";function e(e,t,n,o,r,a){var i,s=this,r=r.get();s.lupHelper=o,s.course=r.course,s.enrollment_approvals_enabled=r.enrollment_approvals_enabled,s.component=r.component,s.component_elements=r.elements.data,i=s.course.name,1<s.course.version&&(i=i+" ("+o.showMessage("courses.version")+" "+s.course.version+")"),i=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:i,url:"/courses/"+s.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+s.course.id+"/content"},{title:s.component.title,url:"/courses/"+s.course.id+"/content/"+s.component.id+"/edit"},{title:I18n.t("lup.breadcrumbs.courses.module_preview"),url:"/courses/"+s.course.id+"/content/"+s.component.id+"/preview-module"}],e.breadcrumbs=i,e.$on("publishCourse",function(){a.publishCourse(s)}),e.$on("createNewCourseVersion",function(){a.createNewCourseVersion(s)}),e.$on("deleteCourse",function(){a.deleteCourse(s)}),e.$on("cloneCourse",function(){a.createCourseCopy(s.course.id)}),e.$on("exportSignedEsignatureModules",function(){a.exportSignedEsignatureModules(s.course.id)}),e.$on("editModule",function(){n.document.location.href="/courses/"+s.course.id+"/content/"+s.component.id+"/edit"})}window.angular.module("lu").controller("CoursesPreviewModuleController",e),e.$inject=["$rootScope","$scope","$window","LupHelper","StorageFactory","CourseActionFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,c=t.getKey("course"),u=t.getKey("reviews");l.helper=o,l.course=c.attributes,l.reviews=u,l.enrollment_approvals_enabled=t.getKey("enrollment_approvals_enabled"),l.course_data={rating:t.getKey("rating"),reviews_count:t.getKey("reviews_count")},l.doReviewDelete=function(t){r.confirm(I18n.t("lup.confirm"),I18n.t("reviews.are_you_sure_you_want_to_delete_this_review")).then(function(e){a.doDelete(t.id).then(function(){var e;n.merge({page:1}),(e={}).params=n.get(),e.url="/courses/"+l.course.id+"/reviews.json",a.getList(e).then(function(){l.reviews=a.data.reviews})})})},l.exportToExcel=function(e){{var t;e&&(t=new s,e={typeId:o.lupJobTypes.exportCourseReviews,course_id:e},t.initiateJob(e))}},e.ariaLabel=l.helper.showMessage("lup.a11y.reviews_main_content"),e.ariaLabelSide=l.helper.showMessage("lup.a11y.reviews_aside_content"),e.$on("publishCourse",function(){i.publishCourse(l)}),e.$on("createNewCourseVersion",function(){i.createNewCourseVersion(l)}),e.$on("archiveCourse",function(){i.archiveCourse(l)}),e.$on("embedCourse",function(){i.openEmbedCourseLinkModal(l.course.id)}),e.$on("deleteCourse",function(){i.deleteCourse(l)}),e.$on("cloneCourse",function(){i.createCourseCopy(l.course.id)}),e.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(l.course.id)})}angular.module("lu").controller("CoursesReviewsController",e),e.$inject=["$rootScope","StorageFactory","paramsService","LupHelper","$luPopover","CourseReviewFactory","CourseActionFactory","LupJobFactory"]}(),function(){"use strict";function e(e,o,r,a,t,n,i,s){var l=this;l.helper=t,l.course=n.getKey("course").attributes,l.unknown_enrollments=n.getKey("unknown_enrollments"),l.enrollment_approvals_enabled=n.getKey("enrollment_approvals_enabled"),l.getCode=function(e){var t="-";t=e.is_unknown?e.code:function(e){return e.is_unknown||e.used_by_pm_id?e.user_first_name||e.user_last_name?e.user_first_name+" "+e.user_last_name+" ("+(e.user_username?e.user_username:e.user_email)+")":e.user_username?e.user_username:e.user_email?e.user_email:"-":e.first_name||e.last_name?e.first_name+" "+e.last_name+"("+e.email+")":e.email?e.email:"-"}(e);return t},l.getPurchasedBy=function(e){return e.purchaser_first_name||e.purchaser_last_name?e.purchaser_first_name+" "+e.purchaser_last_name:e.purchaser_username?e.purchaser_username:e.purchaser_email},l.loadData=function(e){var t={};e=e||{},t.params=a.get(),t.url="/courses/:course_id/sales/bulk-purchase.json".replace(/:course_id/,l.course.id),void 0!==e.hideSpinner&&(t.hideSpinner=e.hideSpinner);l.isLoading=!0;var n=new o;n.getUnknownEnrollments(t).then(function(){l.unknown_enrollments=n.data.unknown_enrollments,l.search=n.data.search,r(function(){l.isLoading=!1},1e3)})},l.getIconClass=function(e){return e.used_at?"fa-check completed-module":"fa-hourglass-half"},l.formatDateUsedAt=function(e){var t="N/A";e.used_at&&(t=s("displayDateTime")(e.used_at,"DD/MM/YYYY"));return t},e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:l.course.name,url:"/courses/:course_id".replace(/:course_id/,l.course.id)},{title:I18n.t("lup.breadcrumbs.courses.sales"),url:"/courses/:course_id/sales".replace(/:course_id/,l.course.id)},{title:I18n.t("lup.courses.sales_tab.subtabs.bulk_purchase"),url:"/courses/:course_id/sales/bulk-purchase".replace(/:course_id/,l.course.id)}],e.$on("publishCourse",function(){i.publishCourse(l)}),e.$on("createNewCourseVersion",function(){i.createNewCourseVersion(l)}),e.$on("deleteCourse",function(){i.deleteCourse(l)}),e.$on("cloneCourse",function(){i.createCourseCopy(l.course.id)}),e.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(l.course.id)})}angular.module("lu").controller("CoursesSalesBulkPurchaseController",e),e.$inject=["$rootScope","CourseFactory","$timeout","paramsService","LupHelper","StorageFactory","CourseActionFactory","$filter"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s){var l=this,c=new o,u=n.getKey("portal_categories").data;l.courseSalesSettings=n.getKey("course_sales_settings").attributes,l.startingSellableAttribute=l.courseSalesSettings.sellable,l.course=n.getKey("course").attributes,l.store_url=n.getKey("store_url"),l.enrollment_approvals_enabled=n.getKey("enrollment_approvals_enabled"),l.license_full_or_expired=n.getKey("license_full_or_expired"),l.validCapacityOnTrainings=n.getKey("valid_capacity_on_trainings"),l.selectedMembershipType=-1,l.association_membership_types=n.getKey("association_membership_types"),l.membershipTypeUpdated=function(){l.hideFooter=!0,function(){var e={type_id:l.selectedMembershipType};c.addAssociationPrice(l.course.id,e,!0).then(function(e){a.location.reload()})}()},l.removeAssociationPrice=function(e){e={price_id:e.id};c.removeAssociationPrice(l.course.id,e,!0).then(function(e){a.location.reload()})},l.helper=t,l.cancel=function(e){d(),l.courseSalesSettings=n.getKey("course_sales_settings").attributes,e.$setPristine()},l.save=function(e){var t=angular.isArray(l.courseSalesSettings.store_groups)?l.courseSalesSettings.store_groups:[];t=t.map(function(e){return{id:e.id,title:e.title}});t={course_sales_form:{sellable:l.courseSalesSettings.sellable,apply_sales_tax:l.courseSalesSettings.apply_sales_tax,require_coupon_to_purchase_free_course:l.courseSalesSettings.require_coupon_to_purchase_free_course,categories:l.courseSalesSettings.categories,store_groups:t,membership_pricing:l.courseSalesSettings.membership_pricing,price:l.courseSalesSettings.price}};d(),e.$dirty&&(e.$setPristine(),c.updateSalesSettings(l.course.id,t).then(function(e){n.setKey("course_sales_settings",e.data.course_sales_settings),l.courseSalesSettings=n.getKey("course_sales_settings").attributes,l.startingSellableAttribute=l.courseSalesSettings.sellable}).catch(function(e){n.setKey("course_sales_settings",e.data.course_sales_settings),l.courseSalesSettings=n.getKey("course_sales_settings").attributes,l.startingSellableAttribute=l.courseSalesSettings.sellable}))},l.price=0,l.fetchCategories=function(){return _.reject(u,function(e){return _.contains(_.map(l.courseSalesSettings.categories,function(e){return e.id}),e.id)})},l.removeFromSelectedCategory=function(t,e){l.courseSalesSettings.categories=_.reject(l.courseSalesSettings.categories,function(e){return e.id==t.id}),e.$setDirty()},l.categorySelected=function(e,t,n){l.courseSalesSettings.categories.push(e),l.categoryAutocompleteText=""},l.fetchGroups=s.fetchGroups,l.afterSelectGroup=function(e){angular.isDefined(l.theForm)&&l.theForm.$setDirty()},l.afterRemoveGroup=function(e){angular.isDefined(l.theForm)&&l.theForm.$setDirty()};s=c.getBreadcrumbTitle(l.course.name,l.course.version);function d(){l.categoryAutocompleteText=""}e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:s,url:"/courses/:course_id".replace(/:course_id/,l.course.id)},{title:I18n.t("lup.breadcrumbs.courses.sales"),url:"/courses/:course_id/sales".replace(/:course_id/,l.course.id)}],e.ariaLabel=t.showMessage("lup.a11y.sales.main_aria_label"),e.ariaLabelSide=t.showMessage("lup.a11y.sales.side_aria_label"),l.setForm=function(e){l.theForm=e},e.$on("publishCourse",function(){i.publishCourse(l)}),e.$on("createNewCourseVersion",function(){i.createNewCourseVersion(l)}),e.$on("archiveCourse",function(){i.archiveCourse(l)}),e.$on("embedCourse",function(){i.openEmbedCourseLinkModal(l.course.id)}),e.$on("deleteCourse",function(){i.deleteCourse(l)}),e.$on("cloneCourse",function(){i.createCourseCopy(l.course.id)}),e.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(l.course.id)})}angular.module("lu").controller("CoursesSalesController",e),e.$inject=["StorageFactory","$rootScope","LupHelper","CourseFactory","$http","$window","CourseActionFactory","restrictByGroupService"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=new o,c=new a("course");function u(){var e={};e.params=r.get(),l.getCoupons(s.course.id,e).then(function(e){s.coupons=e.data.coupons})}s.course=e.getKey("course").attributes,s.coupons=e.getKey("coupons"),s.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),s.getDiscount=function(e){{if(0===e.discount_type)return e.discount+"%";if(1===e.discount_type)return t.currency_symbol+e.discount}},s.loadData=u,s.destroy=function(e){c.destroy(e.id).then(function(e){u()})},s.edit=function(t){c.edit(t,function(e){e.course_id=s.course.id,c.update(t.id,e).then(function(e){u()}).catch(function(e){u()})})},t.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:s.course.name,url:"/courses/:course_id".replace(/:course_id/,s.course.id)},{title:I18n.t("lup.breadcrumbs.courses.sales"),url:"/courses/:course_id/sales".replace(/:course_id/,s.course.id)},{title:I18n.t("lup.courses.sales_tab.subtabs.coupons"),url:"/courses/:course_id/sales/coupons".replace(/:course_id/,s.course.id)}],t.$on("createCoupon",function(){c.new(function(e){e.course_id=s.course.id,c.create(e).then(function(e){u()}).catch(function(e){u()})})}),t.$on("publishCourse",function(){i.publishCourse(s)}),t.$on("createNewCourseVersion",function(){i.createNewCourseVersion(s)}),t.$on("deleteCourse",function(){i.deleteCourse(s)}),t.$on("cloneCourse",function(){i.createCourseCopy(s.course.id)}),t.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(s.course.id)})}angular.module("lu").controller("CoursesSalesCouponsController",e),e.$inject=["StorageFactory","$rootScope","LupHelper","CourseFactory","paramsService","CouponFactory","CourseActionFactory"]}(),function(){"use strict";function e(n,e,o,t,r,a,i,s){e.get();n.LupHelper=t,n.loadShopifyProducts=function(){if("end_of_results"==n.nextPage)return;n.shopify_products&&!n.nextPage&&(n.nextPage=n.shopify_products.next_page);n.nextPage&&function(e){var t=new o;t.getShopifyProducts(e).then(function(){t.data.products&&0<t.data.products.length&&(n.nextPage=t.data.next_page,angular.forEach(t.data.products,function(e){n.shopify_products.all.push(e)}))})}(n.nextPage);return},n.selectShopifyProduct=function(e){(new o).updateCourseShopifyProductSelected(n.course_setting.old_shopify_product_id,n.course_setting.course_id,e).then(function(e){n.course_setting=e.data.course_setting.attributes,n.shopify_products=e.data.shopify_products})},n.removeShopifyProduct=function(){(new o).updateCourseShopifyProductSelected(n.course_setting.old_shopify_product_id,n.course_setting.course_id,null).then(function(e){n.course_setting=e.data.course_setting.attributes,n.shopify_products=e.data.shopify_products,n.nextPage=e.data.shopify_products.next_page})},n.shopify_products=e.getKey("shopify_products"),n.course_setting=e.getKey("course_setting").attributes,n.course=e.getKey("course").attributes,n.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),n.nextPage=null,r.breadcrumbs=[{title:t.showMessage("lup.breadcrumbs.courses.index"),url:"/courses"},{title:n.course.name,url:"/courses/:course_id".replace(/:course_id/,n.course.id)},{title:t.showMessage("lup.breadcrumbs.courses.sales"),url:"/courses/:course_id/shopify_sales".replace(/:course_id/,n.course.id)}],r.$on("publishCourse",function(){a.publishCourse(n)}),r.$on("createNewCourseVersion",function(){a.createNewCourseVersion(n)}),r.$on("deleteCourse",function(){a.deleteCourse(n)}),r.$on("cloneCourse",function(){a.createCourseCopy(n.course.id)}),r.$on("exportSignedEsignatureModules",function(){a.exportSignedEsignatureModules(n.course.id)})}angular.module("lu").controller("CoursesShopifySalesController",e),e.$inject=["$scope","StorageFactory","ShopifyProductFactory","LupHelper","$rootScope","CourseActionFactory","$modal","$http"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p,_){a=a.get();n.course=a.course.attributes,n.is_license=a.is_license,n.use_custom_data_field_types=a.use_custom_data_field_types,n.enrollment_approvals_enabled=a.enrollment_approvals_enabled,n.formData={},n.helper=r,n.forceShowSave=!1,n.ariaLabel=r.showMessage("lup.a11y.course_editing_main_card"),n.ariaLabelSide=r.showMessage("lup.a11y.course_editing_info_card"),n.editingDescription=!1,n.editingObjectives=!1,n.save=function(e){p.save(e)},t.$on("publishCourse",function(){p.publishCourse(n)}),t.$on("createNewCourseVersion",function(){p.createNewCourseVersion(n)}),t.$on("archiveCourse",function(){p.archiveCourse(n)}),t.$on("embedCourse",function(){p.openEmbedCourseLinkModal(n.course.id)}),t.$on("deleteCourse",function(){p.deleteCourse(n)}),t.$on("cloneCourse",function(){p.createCourseCopy(n.course.id)}),t.$on("exportSignedEsignatureModules",function(){p.exportSignedEsignatureModules(n.course.id)})}window.angular.module("lu").controller("CoursesShowController",e),e.$inject=["$timeout","$rootScope","$scope","$http","LupHelper","StorageFactory","$filter","spinnerService","$luPopover","CourseFactory","$window","$modal","CourseActionFactory","LupJobFactory"]}(),function(){"use strict";function e(t,n,e,o,r,a,i,s,l,c){var u=new i;t.course=o,t.LupHelper=s,t.save=function(){var e={id:t.course.id,not_started:t.not_started,in_progress:t.in_progress,completed:t.completed,pending_approvals:t.pending_approvals};u.updateStatus(e).then(function(){n.close(),c.document.location.href="/courses"})},t.cancel=function(){n.close()},t.numberOfLearningPaths=r,t.numberOfEnrollmentRequests=a,t.not_started=2,t.in_progress=2,t.completed=2,t.pending_approvals=2}window.angular.module("lu").controller("DeleteCourseChoiceController",e),e.$inject=["$scope","$modalInstance","$http","course","numberOfLearningPaths","numberOfEnrollmentRequests","CourseFactory","LupHelper","$filter","$window"]}(),function(){"use strict";function e(t,n,e,o,r,a,i,s,l){t.enrollment_component=e.data.enrollment_component.attributes,t.user_label=o,t.module_label=r,t.learingCreditsAwarded=_.select(t.credits,function(e){return 0<e.number_credits}),t.LupHelper=a,t.enrollmentStatuses=[{id:a.enrollmentStatuses.passed,title:a.showMessage("reports.passed"),order:1},{id:a.enrollmentStatuses.failed,title:a.showMessage("reports.failed"),order:2}],t.formData={id:t.enrollment_component.id,enrollment_component_status_id:t.enrollment_component.enrollment_component_status_id,enrollment_component:{percentage:l.returnEnrollmentComponentScore(t.enrollment_component)}},t.save=function(){var e=t.formData;i.put("/enrollment_components/:enrollment_component_id.json".replace(/:enrollment_component_id/,t.enrollment_component.id),e).success(function(e){n.close({action:"save"})}).error(function(e){n.close({action:"error"})})},t.cancel=function(){n.close({action:"close"})},t.setForm=function(e){t.theForm=e}}angular.module("lu").controller("EditEnrollmentComponentScoreController",e),e.$inject=["$scope","$modalInstance","enrollment_component","user_label","module_label","LupHelper","$http","$filter","EnrollmentHelper"]}(),function(){"use strict";function e(n,o,e,t,r,a,i,s){n.enrollment=e.data.enrollment.attributes,n.user_label=t,n.course_label=r,n.learingCreditsAwarded=_.select(n.credits,function(e){return 0<e.number_credits}),n.LupHelper=a,n.enrollmentStatuses=[{id:a.enrollmentStatuses.passed,title:a.showMessage("reports.passed"),order:1},{id:a.enrollmentStatuses.failed,title:a.showMessage("reports.failed"),order:2}],n.formData={id:n.enrollment.id,enrollment_status_id:n.enrollment.status_id,enrollment:{percentage:n.enrollment.percentage}},n.save=function(e){var t=n.formData;parseInt(t.enrollment_status_id,10)!==a.enrollmentStatuses.completed&&e.$setValidity("validScore",""!==t.enrollment.percentage&&0<=parseInt(t.enrollment.percentage)&&parseInt(t.enrollment.percentage)<=100);e.$valid&&i.put("/enrollments/:enrollment_id.json".replace(/:enrollment_id/,n.enrollment.id),t).success(function(e){o.close({action:"save"})}).error(function(e){o.close({action:"error"})})},n.cancel=function(){o.close({action:"close"})},n.awardMessage=function(e){return 1===e.awards_certification&&0===e.awards_credits||0===e.awards_certification&&e.awards_credits,a.showMessage("dashboard.award_if_not_already_achieved_tip")},n.setForm=function(e){n.theForm=e}}angular.module("lu").controller("EditEnrollmentScoreController",e),e.$inject=["$scope","$modalInstance","enrollment","user_label","course_label","LupHelper","$http","$filter"]}(),function(){"use strict";function e(e,o,t,r,n,a,i,s,l){var c=this,u=e.getKey("enrollments"),d=e.getKey("course"),e=e.getKey("instructor");function p(){var e={};e.params=o.get(),e.course_id=c.course_id,e.instructor_id=c.instructor_id,n.getList(e).then(function(){c.learners=n.data.enrollments})}c.helper=t,c.course=d,c.course_id=c.course.id,c.instructor=e.attributes,c.instructor_id=c.instructor.id,c.learners=u,c.learnerWasAdded=!1,c.show=function(e){e&&e.user_id&&(a.location="/users/"+e.user_id)},c.loadData=p,c.doRemove=function(n){r.confirm(I18n.t("lup.confirm"),I18n.t("course_assignments.are_you_sure_you_want_to_remove_this_user")).then(function(e){var t=0===parseInt(n.status_id)?"P"+n.id.toString():n.id.toString();l.post("/courses/"+c.course_id+"/unassign_instructor.json",{e:t,i:c.instructor_id}).success(function(e){o.merge({page:1}),p()})})},s.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:c.course.name,url:"/courses/"+c.course.id},{title:I18n.t("lup.breadcrumbs.courses.instructors"),url:"/courses/"+c.course.id+"/instructors"},{title:c.instructor.display_name,url:"/courses/"+c.course.id+"/instructors/"+c.instructor.id+"/learners"}],s.$on("learnerWasAdded",function(){c.learnerWasAdded=!0}),s.$on("addLearners",function(){i.open({templateUrl:"/tc/courses/add_learners.html",controller:"AddLearnersController",size:"lg",resolve:{course:function(){return c.course_id},instructor:function(){return c.instructor_id}}}).result.then(function(){c.learnerWasAdded&&p()})})}angular.module("lu").controller("CoursesInstructorLearnersController",e),e.$inject=["StorageFactory","paramsService","LupHelper","$luPopover","CourseInstructorLearnersFactory","$window","$modal","$rootScope","$http"]}(),function(){"use strict";function e(n,o,e,t,r,a,i,s,l,c,u){n.markCompleteData=angular.copy(a).data,n.enrollment=e,n.user_label=t,n.course_label=r,n.credits=n.markCompleteData.credits.data,n.certification=n.markCompleteData.certification,n.learingCreditsAwarded=_.select(n.credits,function(e){return 0<e.number_credits}),n.learning_credits=u,n.lockSaveButton=!1,n.LupHelper=i,n.enrollmentStatuses=[{id:i.enrollmentStatuses.passed,title:i.showMessage("reports.passed"),order:1},{id:i.enrollmentStatuses.failed,title:i.showMessage("reports.failed"),order:2}],n.markCompleteData.needs_to_be_passed||n.enrollmentStatuses.unshift({id:i.enrollmentStatuses.completed,title:i.showMessage("reports.disp_completed"),order:0}),n.formData={erid:n.enrollment.id,enrollment_status_id:n.enrollmentStatuses[0].id+"",gamification_enabled:n.markCompleteData.gamification_enabled,markcomplete:{percentage:"",date_completed:"",notes:"",award_badges:!1}},c(function(){$("body").updatePolyfill()}),n.save=function(e){if(n.lockSaveButton)return;n.lockSaveButton=!0,n.formData.enrollment_status_id==i.enrollmentStatuses.failed&&(n.formData.markcomplete.award_badges=!1);var t=n.formData;e.$setValidity("hasDate",!!t.markcomplete.date_completed),3!==parseInt(t.enrollment_status_id,10)&&e.$setValidity("validScore",""!==t.markcomplete.percentage&&0<=parseInt(t.markcomplete.percentage)&&parseInt(t.markcomplete.percentage)<=100);e.$valid?s.post("/markcompletes.json",t).success(function(e){n.lockSaveButton=!1,o.close({action:"save"})}).error(function(e){n.lockSaveButton=!1,o.close({action:"error"})}):n.lockSaveButton=!1},n.cancel=function(){o.close({action:"close"})},n.setForm=function(e){n.theForm=e}}angular.module("lu").controller("MarkEnrollmentCompleteController",e),e.$inject=["$scope","$modalInstance","enrollment","user_label","course_label","markCompleteData","LupHelper","$http","$filter","$timeout","learning_credits"]}(),function(){"use strict";function e(n,o,e,t,r,a,i,s,l,c){n.markCompleteData=angular.copy(a).data,n.ec=e,n.user_label=t,n.module_label=r,n.LupHelper=i,n.enrollmentStatuses=[],n.ec.component_type_id==i.componentTypes.exam&&1!=n.ec.is_survey||n.ec.component_type_id==i.componentTypes.scorm&&n.ec.mastery_score?(n.enrollmentStatuses.push({id:i.enrollmentStatuses.passed,title:i.showMessage("reports.passed")}),n.enrollmentStatuses.push({id:i.enrollmentStatuses.failed,title:i.showMessage("reports.failed")})):n.enrollmentStatuses.push({id:i.enrollmentStatuses.completed,title:i.showMessage("reports.disp_completed")}),n.formData={ecid:n.ec.id,enrollment_component_status_id:n.enrollmentStatuses[0].id,markcomplete:{percentage:"",date_completed:"",notes:""}},c(function(){$("body").updatePolyfill()}),n.save=function(e){var t=n.formData;3!==parseInt(t.enrollment_status_id,10)&&e.$setValidity("validScore",""!==t.markcomplete.percentage&&0<=parseInt(t.markcomplete.percentage)&&parseInt(t.markcomplete.percentage)<=100);e.$valid&&s.post("/markcompletes/create_ec.json",t).success(function(e){o.close({action:"save"})}).error(function(e){o.close({action:"error"})})},n.cancel=function(){o.close({action:"close"})},n.setForm=function(e){n.theForm=e}}angular.module("lu").controller("MarkEnrollmentComponentCompleteController",e),e.$inject=["$scope","$modalInstance","enrollment_component","user_label","module_label","markCompleteData","LupHelper","$http","$filter","$timeout"]}(),function(){"use strict";function e(n,o,e,r,t,a,i,s,l,c,u,d,p){var _=new c,m=new e;n.course=a,n.course.reversioning=!1,n.LupHelper=u,n.save=function(){n.disable_publish=!0;var e={id:n.course.id,not_started_logic:n.not_started?n.LupHelper.courseReversioning.not_started_logic.unenroll:n.LupHelper.courseReversioning.not_started_logic.leave_on_course,in_progress_logic:n.in_progress?n.LupHelper.courseReversioning.in_progress_logic.unenroll:n.LupHelper.courseReversioning.in_progress_logic.leave_on_course,lp_logic:n.please_choose_path_logic?n.LupHelper.courseReversioning.lp_logic.replace_on_path:n.LupHelper.courseReversioning.lp_logic.leave_on_path,published_status_id:u.coursePublishedStatuses.published};_.publishNewVersion(e).then(function(){n.course=_.data.course,function e(){{if(n.course.reversioning){var t={hideSpinner:!0};return t.url="/courses/"+n.course.id+"/reversion_status.json",m.get("courses",t,n.course.id).then(function(){n.course=m.data.course,n.course.reversioning?o(function(){e()},2e3):(n.course.reversioning=!0,n.course.reversioned=!0,o(function(){p.document.location.href="/courses/"+n.course.id},2e3))})}n.course.reversioning=!1,n.course.reversioned=!1,n.disable_publish=!1,r.close(),o(function(){p.document.location.href="/courses/"+n.course.id},2e3)}}()})},n.cancel=function(){r.close()},n.numberOfLearningPaths=i,n.referenceFound=s,n.referenceWorkflows=l,n.please_choose_path_logic=!1,n.not_started=!1,n.in_progress=!1,n.pending_approvals=!1,n.disable_publish=!1}window.angular.module("lu").controller("PublishCourseChoiceController",e),e.$inject=["$scope","$timeout","learnUponApi","$modalInstance","$http","course","numberOfLearningPaths","referenceFound","referenceWorkflows","CourseFactory","LupHelper","$filter","$window"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=new r;e.component=o,e.LupHelper=a,e.save=function(){l.setReleaseDate(o).then(function(){t.close()})},e.cancel=function(){e.component.release_at=c,t.close()},e.current_release_at="",o.release_at&&(e.component.release_at=i("displayDateTime")(o.release_at,"YYYY-MM-DDTHH:mm"),e.current_release_at=i("displayDateTime")(o.release_at,"MMMM Do YYYY @ HH:mm a"));var c=o.release_at;s(function(){$("body").updatePolyfill()})}window.angular.module("lu").controller("SetComponentReleaseDateController",e),e.$inject=["$scope","$modalInstance","$http","component","ComponentFactory","LupHelper","$filter","$timeout"]}(),function(){"use strict";function e(s,r,l,c,e,t,n,u,a,o,i,d,p,m,f,g){var h={options:{aspectRatio:void 0,areaType:"square",initMaxArea:!0,resultImageSize:1e3,resultImageQuality:1,maxImageSize:l.image_upload_settings.file_size_mb+"MB",acceptedFileTypes:l.image_upload_settings.file_types.join(",")},labels:{title:l.showMessage("lup.certifications.upload_image"),btnBrowseOther:l.showMessage("lup.courses.browse_other"),btnBrowseImage:l.showMessage("certificates.select_image"),blankStateTitle:l.showMessage("lup.courses.upload_image.blank_state_titile"),blankStateBlurb:l.showMessage("lup.courses.upload_image.blank_state_blurb")}};function b(e){angular.isObject(e)?angular.equals(s.picFile,e)?t.debug("Image is the same as current one!"):s.picFile=e:t.debug("Image is blank!")}c.deepExtend(h,o),s.config=h,s.LupHelper=l,s.croppedDataUrl="",s.resImageDataURI="",s.resBlob="",s.urlBlob="",s.picFile=void 0,s.uploadProgress=0,s.invalidFile=[],s.processingInProgress=!1,s.processingJobReference=null,s.cancel=function(){r.close()},s.setImage=b,s.alt_tag=null,s.onImgLoadDone=function(){s.invalidFile=[],setTimeout(function(){s.loadDone=!1,s.$digest()},s.uiCropperTimeout)},s.uiCropperTimeout=l.uiCropperConfig.uploadTimeout,s.loadDone=!0,angular.isObject(n)&&b(n),s.upload=function(e,t){w(e,t)};var v=_.throttle(function(e){if(e.target&&"INPUT"===e.target.nodeName)return;e=e.which||e.keyCode;13===e&&(s.resBlob||s.picFile||s.picFile.name?w(s.resBlob,s.picFile.name):t.debug("No file attached"));8!==e&&46!==e||s.$apply(function(e){e.picFile=void 0})},500);function w(e,t){var o=c.blobToFile(e,t),t={data:{}};u.accountPage||(t.data.resource_id=u.userID),d.getData(l.fileUploads.types.profile_image,null,null,t).then(function(e){var t=e.data.signature_data.attributes,e=t.folder_path+o.name,n={hideSpinner:!0,method:"POST",data:{profile_image:{uuid:t.guid,file_name:o.name,file_size:o.size,file_type:o.type,alt_tag:s.alt_tag,s3_url:e}}};d.uploadFiles(o,t,function(e){p(c.deepExtend(n,a(o))).then(function(e){s.processingInProgress=!0,s.uploadProgress=null,s.processingJobReference=e.data.job_reference,function n(o,r,e,a){var t={};var i="/download_jobs/"+o+"/status.json";return p.get(i,t).then(function(e){var t=e.data.job;t.status_id!==l.lupJobStatuses.completed?s.timeoutPromise=f(function(){n(o,r,e,a)},2e3):(s.processingJobReference=null,y(e),u.userID?p.get("/portal-membership-profile-image/:user_id.json".replace(/:user_id/,u.userID)).then(function(e){c.getCallback(r,"onSuccess")(e,a)},function(e){c.getCallback(r,"onError")(e,a)}):c.getCallback(r,"onError")(null,a))})}(s.processingJobReference,i,0,r)},function(e){s.uploadProgress=null,e.errorType="failedImageProcessing",c.getCallback(i,"onError")(e,r)})},function(e){e.errorType="failedUpload",c.getCallback(i,"onError")(e,r)},function(e){s.uploadProgress=parseInt(100*e.loaded/e.total),c.getCallback(i,"onProgress")(e,r)})}).catch(function(e){e.errorType="getData",c.getCallback(i,"onError")(e,r)})}function y(e){angular.isUndefined(e)||angular.isUndefined(e.data)||angular.isUndefined(e.data.job)||(s.processingInProgress=!1,e.data.job.has_errors?g.onError({error:l.showMessage("lup.portal_membership_profile_image.util.update.error")}):g.onSuccess({success:l.showMessage("lup.portal_membership_profile_image.util.update.success")}))}e.bind("keydown",v),m.angular.element(m).on("beforeunload",function(e){return!0}),s.$on("$destroy",function(){e.unbind("keydown",v),m.angular.element(m).off("beforeunload")})}angular.module("lu").controller("UploadImageController",e),e.$inject=["$scope","$modalInstance","LupHelper","ImageUploadService","$document","$log","image","params","paramsFn","config","callbacks","s3HelperFactory","$http","$window","$timeout","notifyFactory"]}(),function(d){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=r.get(),c=new a;function u(){return s.custom_user_data_definition.field_type==s.lupHelper.custom_data_field_types.string_choice||s.custom_user_data_definition.field_type==s.lupHelper.custom_data_field_types.decimal_choice||s.custom_user_data_definition.field_type==s.lupHelper.custom_data_field_types.integer_choice}s.lupHelper=n,s.custom_user_data_definition={field_type:s.lupHelper.custom_data_field_types.string.toString(),choice_select_type:s.lupHelper.custom_data_choice_select_types.single_select},s.use_new_enrollment_wizard=d.copy(l.use_new_enrollment_wizard),s.use_custom_data_field_types=l.use_custom_data_field_types,s.availableCustomDataFieldTypes=l.available_custom_data_field_types,s.save=function(e){(function(e){if(s.custom_user_data_definition.predefined_values){var n=s.custom_user_data_definition.predefined_values.split(",");n=(n=n.map(function(e){return e.trim()})).filter(function(e,t){return n.indexOf(e)==t&&""!=e});for(var t,o=0;o<n.length&&(e.$setValidity("predifinedValueTooLong",n[o].length<s.lupHelper.validations.length.custom_user_data.field_value),!(n[o].length>s.lupHelper.validations.length.custom_user_data.field_value));o++)if(s.custom_user_data_definition.field_type==s.lupHelper.custom_data_field_types.decimal_choice){var r=new RegExp(/^\d+(\.\d+)?$/);if(e.$setValidity("invalidDecimals",r.test(n[o])),!r.test(n[o]))break;new RegExp(/^\d+$/).test(n[o])&&(n[o]=parseFloat(n[o]).toFixed(1))}s.custom_user_data_definition.predefined_values=n.join(","),s.custom_user_data_definition.field_type==s.lupHelper.custom_data_field_types.integer_choice&&(t=new RegExp(/^[0-9,]*$/),e.$setValidity("invalidIntegers",t.test(s.custom_user_data_definition.predefined_values)))}e.$setPristine()})(e),s.custom_user_data_definition.id||(s.custom_user_data_definition.added_values=s.custom_user_data_definition.predefined_values);{e.$valid&&(e={url:"/custom_user_datas.json",data:{custom_user_data_definition:s.custom_user_data_definition},hideSpinner:!1},c.post(null,e,null).then(function(e){e&&200==e.status&&e.data.custom_user_data_definition.attributes.id?i.location="/custom_user_datas/"+e.data.custom_user_data_definition.attributes.id:i.location.reload()}))}},s.setMandatory=function(){s.custom_user_data_definition.learner_can_edit&&(s.custom_user_data_definition.is_mandatory=!1);return},s.fieldTypeSelected=function(){s.custom_user_data_definition.field_type==s.lupHelper.custom_data_field_types.date?(s.use_new_enrollment_wizard=!1,s.custom_user_data_definition.use_in_enrollment_wizard=!1):s.use_new_enrollment_wizard=d.copy(l.use_new_enrollment_wizard);u()||(s.custom_user_data_definition.predefined_values="",s.custom_user_data_definition.choice_select_type=s.lupHelper.custom_data_choice_select_types.single_select)},s.isChoiceType=u,s.customDataChoiceSelectTypeValues=[{value:s.lupHelper.custom_data_choice_select_types.single_select,name:s.lupHelper.showMessage("portalsettings.single_select")},{value:s.lupHelper.custom_data_choice_select_types.multi_select,name:s.lupHelper.showMessage("portalsettings.multi_select")}]}d.module("lu").controller("CustomUserDatasNewController",e),e.$inject=["$scope","$http","LupHelper","spinnerService","StorageFactory","learnUponApi","$window"]}(window.angular),function(m){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,c=o.get(),u=new a,d=new r;function p(){l.custom_user_data_definition.field_type==l.lupHelper.custom_data_field_types.date?(l.use_new_enrollment_wizard=!1,l.custom_user_data_definition.use_in_enrollment_wizard=!1):l.use_new_enrollment_wizard=m.copy(c.use_new_enrollment_wizard),_()||(l.custom_user_data_definition.predefined_values="",l.custom_user_data_definition.added_values="",l.custom_user_data_definition.choice_select_type=l.lupHelper.custom_data_choice_select_types.single_select)}function _(){return l.custom_user_data_definition.field_type==l.lupHelper.custom_data_field_types.string_choice||l.custom_user_data_definition.field_type==l.lupHelper.custom_data_field_types.decimal_choice||l.custom_user_data_definition.field_type==l.lupHelper.custom_data_field_types.integer_choice}l.lupHelper=n,l.CourseFactory=r,l.custom_user_data_definition=c.custom_user_data_definition.attributes,l.cudd_group_hash=c.cudd_group_hash,l.custom_user_data_definition.field_type=l.custom_user_data_definition.field_type.toString(),l.use_new_enrollment_wizard=m.copy(c.use_new_enrollment_wizard),l.use_custom_data_field_types=c.use_custom_data_field_types,l.availableCustomDataFieldTypes=c.available_custom_data_field_types,l.viewLinkedRules=function(){return void s.open({controller:"DeleteCustomuserDatasContainRuleController",templateUrl:"/tc/custom_user_data/delete-cud-containing-rule.html",windowClass:"modal-box",resolve:{options:function(){return{title:n.showMessage("lup.customdata.contain_rule.delete.list_title"),content:n.showMessage("lup.customdata.contain_rule.delete.content"),cuddGroupIdsHash:l.cudd_group_hash[l.custom_user_data_definition.id]}}}})},l.viewLinkedLearningJourneys=function(){return void s.open({controller:"DeleteCustomuserDatasContainLJController",templateUrl:"/tc/custom_user_data/delete-cud-containing-learning-journey.html",windowClass:"modal-box",resolve:{options:function(){return{title:n.showMessage("lup.customdata.contain_lj.delete.list_title"),content:n.showMessage("lup.customdata.contain_lj.delete.content"),relatedLearningJourneys:l.reference_workflows}}}})},setTimeout(function(){d.getRelatedLearningJourneys(l.custom_user_data_definition.id,3,!1).then(function(){l.reference_found=d.referenceFound,l.reference_workflows=d.referenceWorkflows})},0),l.save=function(e){if(l.cudd_group_hash[l.custom_user_data_definition])return;var t=m.copy(l.custom_user_data_definition);l.custom_user_data_definition.added_values&&(t.predefined_values+=",",t.predefined_values+=l.custom_user_data_definition.added_values);{(function(e,t){if(t.predefined_values){var n=t.predefined_values.split(",");n=(n=n.map(function(e){return e.trim()})).filter(function(e,t){return n.indexOf(e)==t&&""!=e});for(var o,r=0;r<n.length&&(e.$setValidity("predifinedValueTooLong",n[r].length<l.lupHelper.validations.length.custom_user_data.field_value),!(n[r].length>l.lupHelper.validations.length.custom_user_data.field_value));r++)if(t.field_type==l.lupHelper.custom_data_field_types.decimal_choice){var a=new RegExp(/^\d+(\.\d+)?$/);if(e.$setValidity("invalidDecimals",a.test(n[r])),!a.test(n[r]))break;new RegExp(/^\d+$/).test(n[r])&&(n[r]=parseFloat(n[r]).toFixed(1))}n=n.filter(function(e,t){return n.indexOf(e)==t&&""!=e}),t.predefined_values=n.join(","),t.field_type==l.lupHelper.custom_data_field_types.integer_choice&&(o=new RegExp(/^[0-9,]*$/),e.$setValidity("invalidIntegers",o.test(t.predefined_values)))}e.$setPristine()})(e,t),e.$valid&&(t={url:"/custom_user_datas/"+l.custom_user_data_definition.id+".json",data:{custom_user_data_definition:t},hideSpinner:!1},u.put(null,t,null).then(function(e){e&&i.location.reload()}))}},l.setMandatory=function(){l.custom_user_data_definition.learner_can_edit&&(l.custom_user_data_definition.is_mandatory=!1);return},l.fieldTypeSelected=p,l.isChoiceType=_,p(),l.customDataChoiceSelectTypeValues=[{value:l.lupHelper.custom_data_choice_select_types.single_select,name:l.lupHelper.showMessage("portalsettings.single_select")},{value:l.lupHelper.custom_data_choice_select_types.multi_select,name:l.lupHelper.showMessage("portalsettings.multi_select")}]}m.module("lu").controller("CustomUserDatasShowController",e),e.$inject=["$scope","$http","LupHelper","StorageFactory","CourseFactory","learnUponApi","$window","$modal"]}(window.angular),function(){"use strict";function e(e,t,n,o){e.options=t,e.LupHelper=o,e.closeModal=function(){n.close()}}angular.module("lu").controller("DeleteCustomuserDatasContainLJController",e),e.$inject=["$scope","options","$modalInstance","LupHelper"]}(),function(){"use strict";function e(e,t,n,o){e.options=t,e.LupHelper=o,e.closeModal=function(){n.close()}}angular.module("lu").controller("DeleteCustomuserDatasContainRuleController",e),e.$inject=["$scope","options","$modalInstance","LupHelper"]}(),function(){"use strict";function e(e,o,t,n,r,a){var i="admin_dashboard",s=o.getKey(i);this.name=i,this.model=s,this.collapsible=!1,(this.lupHelper=r).contains(n.location.search,"dr=true")&&t.open({templateUrl:"/tc/lu-dashboard/dynamic-rules-info/dynamic-rules-info.html",size:"md",controller:"DashboardDrInfoController",controllerAs:"vm"}),e.$on("adfDashboardChanged",function(e,t,n){o.setKey(t,n)})}angular.module("lu").controller("AdminDashboardController",e),e.$inject=["$scope","StorageFactory","$modal","$window","LupHelper","$http"]}(),function(){"use strict";function e(e,t,n){this.lupHelper=n,this.goToGroups=function(){e.dismiss(),t.location="/groups"},this.cancel=function(){e.dismiss()}}angular.module("lu").controller("DashboardDrInfoController",e),e.$inject=["$modalInstance","$window","LupHelper"]}(),function(){"use strict";function e(o,e,t,n,r,a,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y,M){var S=r.get(),C=new w,A=new y;o.helper=a,o.vpc=M;var L=new n,$=new m;s.luPopover=c,o.social_sharing=S.social_sharing?S.social_sharing.attributes:null,o.social_sharing_enabled=function(e){return o.social_sharing&&(o.social_sharing.linkedin_is_enabled&&!!e.certification_id&&0<e.certification_id||o.social_sharing.twitter_is_enabled)};var T;if(o.filter_by=1,S.filter_by&&(o.filter_by=S.filter_by),o.number_enrollment_requests=S.counts.attributes.number_enrollment_requests,o.number_enrolled=S.counts.attributes.number_enrolled,o.number_completed=S.counts.attributes.number_completed,o.number_learning_paths=S.counts.attributes.number_learning_paths,o.number_learning_journeys=S.counts.attributes.number_learning_journeys,o.number_pending_review=S.counts.attributes.number_pending_review,o.number_external_trainings=S.counts.attributes.number_external_trainings,o.number_course_questions=S.counts.attributes.number_course_questions,o.credits_panel_name=S.credits_panel_name,o.show_select_group_type_dialog=S.show_select_group_type_dialog,o.show_course_questions=S.show_course_questions,o.awards=S.awards,o.auto_assign_reference=S.auto_assign_reference,o.dynamic_rules_reference=S.dynamic_rules_reference,o.activity_feed=S.activity_feed,o.content_details_redesign_enabled=S.content_details_redesign_enabled,o.timeoutPromise=null,o.relaunchBtnClasses=function(){return o.filter_by!=o.helper.dashboard_filters.completed_courses?["col-sm-5","col-md-3"]:["col-sm-4","col-md-3"]},o.onFocusTrapDeactivate=function(){o.triggerFocusOnMain=!1,o.$digest()},o.redirectToCourseDetails=function(e){l.launchDetails(e,o.content_details_redesign_enabled)},o.redirectToLPDetails=function(e){l.launchPath(e,o.content_details_redesign_enabled)},o.dashboardFilterTitles=((T={})[a.dashboard_filters.enrolled_courses]=a.showMessage("lup.dashboard.enrolled_courses"),T[a.dashboard_filters.completed_courses]=a.showMessage("lup.dashboard.completed_courses"),T[a.dashboard_filters.learning_paths]=a.showMessage("reports.learning_paths"),T[a.dashboard_filters.pending_review_courses]=a.showMessage("course_assignments.pending_review"),T[a.dashboard_filters.external_trainings]=o.credits_panel_name,T[a.dashboard_filters.course_questions]=a.showMessage("lup.dashboard.course_questions"),T[a.dashboard_filters.enrollment_requests]=a.showMessage("lup.enrollment_approvals.enrollment_requests"),T[a.dashboard_filters.learning_journeys]=a.showMessage("lup.ljw.wokrflows"),T),S.just_logged_in)try{history.pushState(null,"","/")}catch(e){}function z(){var e={};e.params=u.get(),e.params.filter_by=o.filter_by,L.getList(e).then(function(){o.preview_images=L.data.preview_images.data,o.social_sharing=L.data.social_sharing?L.data.social_sharing.attributes:null,o.courses=L.data.courses,o.number_enrolled=L.data.counts.attributes.number_enrolled,o.number_completed=L.data.counts.attributes.number_completed,o.number_enrollment_requests=L.number_enrollment_requests,o.triggerFocusOnMain=!0})}o.auto_assign_reference&&g(function(){!function t(){var e={};e.hideSpinner=!0;e.url="/download_jobs/"+o.auto_assign_reference+"/status.json";return C.get("download_jobs",e,o.auto_assign_reference).then(function(){var e=C.data.job;e.status_id!==a.lupJobStatuses.completed?o.timeoutPromise=g(function(){t()},5e3):s.location.reload()})}()},5e3),o.dynamic_rules_reference&&g(function(){!function t(){var e={};e.hideSpinner=!0;e.url="/angie/download-jobs/"+a.statusJobs.userWaitingDrEnrollments+"/progression.json?pm_id="+o.dynamic_rules_reference;return C.get(null,e,null).then(function(){var e=C.data.data;e.status_id===a.lupJobStatuses.in_progress||e.status_id===a.lupJobStatuses.not_started?o.timeoutPromise=g(function(){t()},2e4):s.location.reload()})}()},2e4),o.canSeeNullStateTypeMessage=function(){return 1===o.filter_by&&0===o.number_enrolled||(2===o.filter_by&&0===o.number_completed||(3===o.filter_by&&0===o.number_learning_paths||(4===o.filter_by&&0===o.number_pending_review||!(5!==o.filter_by||o.number_external_trainings&&0!==o.number_external_trainings))))},o.getA11Ytranslation=function(){var e=" "+a.showMessage("lup.a11y.page");return o.courses.meta&&o.courses.meta.page&&(e+=" "+o.courses.meta.page),e+=" "+a.showMessage("lup.a11y.loaded"),1===o.filter_by?a.showMessage("lup.dashboard.enrolled_courses")+e:2===o.filter_by?a.showMessage("lup.dashboard.completed_courses")+e:3===o.filter_by?a.showMessage("reports.learning_paths")+e:4===o.filter_by?a.showMessage("course_assignments.pending_review")+e:5===o.filter_by?o.credits_panel_name+e:""},S.rating_enrollment&&l.showLeaveReviewDialog(S.rating_enrollment.attributes,null),o.EnrollmentHelper=l,o.courses=S.courses,o.preview_images=S.preview_images.data,o.getPreviewImageURL=function(e,t){if(o.preview_images)for(var n=0;n<o.preview_images.length;n++)if(o.preview_images[n].id==t)return o.preview_images[n].large_url;return e+"images/course.png"},o.canReverse=!1,o.canSearch=!0,o.search={searchQuery:null},o.searchShown=!1,t.$on("trainingHistoryExport",function(){f.open({templateUrl:"/tc/training_history/training_history_export.modal.html",controller:"TrainingHistoryExportController",backdrop:"static",size:"lg",resolve:{}})}),t.$on("downloadTrainingHistory",function(e,t){var n=new p,o={typeId:a.lupJobTypes.downloadTrainingHistory};t&&Object.assign(o,t),n.initiateJob(o)}),t.$on("addExternalTraining",function(){s.location="/external_training_records/new.html"}),o.show_select_group_type_dialog&&g(function(){f.open({templateUrl:"/tc/groups/select-group-type.html",controller:"GroupsSelectTypeController",size:"md",backdrop:"static",keyboard:!1})},1001),o.downloadCertificate=function(e,t,n){var o=new p,n={typeId:a.lupJobTypes.downloadCertificate,enrollment_id:e,for_course:t,user_id:n};o.initiateJob(n)},o.noDataToDisplay=function(){if(!o.searchShown){if(1===o.filter_by)return o.catalogEnabled()&&!o.storeEnabled()?i.trustAsHtml(I18n.t("lup.dashboard.no_current_training_catalog")):!o.catalogEnabled()&&o.storeEnabled()?i.trustAsHtml(I18n.t("lup.dashboard.no_current_training_store")):o.catalogEnabled()&&o.storeEnabled()?i.trustAsHtml(I18n.t("lup.dashboard.no_current_training_catalog_and_store")):I18n.t("dashboard.no_current_training");if(2===o.filter_by)return I18n.t("dashboard.no_completed_training")}return I18n.t("lup.no_data")},o.catalogEnabled=function(){return t.catalog_enabled},o.storeEnabled=function(){return t.ecommerce_enabled},o.filterList=function(e){o.triggerFocusOnMain=!1,o.filter_by!=e?o.courses=[]:o.$$postDigest(function(){o.triggerFocusOnMain=!0,o.$digest()}),S.is_student&&e==a.dashboard_filters.learning_paths?t.$broadcast("selectLearningPathsGS"):t.$broadcast("selectCoursesGS"),o.filter_by=e},o.loadData=z,s.reloadDashboardCourses=z,o.scormOrTinCanExitDetected=function(e){o.loadData(),l.scormOrTinCanExitDetected(e)},s.scormOrTinCanExitDetected=o.scormOrTinCanExitDetected,s.showScormOrTinCanFinishPopup=function(e,t,n){l.showScormOrTinCanFinishPopup(e,t,n)},o.rateMyCourse=function(e){l.showLeaveReviewDialog(e,null)},o.$watch("filter_by",function(e,t){e&&e!==t&&(o.page=1,o.loadData())}),o.showLastAccessed=function(e){return e.status_id==a.enrollmentStatuses.in_progress&&1!==e.only_contains_sessions&&!!e.date_lastaccessed},o.getPercentageComplete=function(e){return 3==o.filter_by?parseInt(l.lpPercentageComplete(e)):null!==e.percentage_complete?parseInt(e.percentage_complete):0},o.showProgressPercentage=function(e){return 3==o.filter_by||1<e.num_modules&&0<e.percentage_complete},o.linkedinShare=function(e){$.shareDialog(e)},o.returnStatusLabel=function(e){return e==a.external_training_record_statuses.pending_review?a.showMessage("dashboard.external_training_pending_review"):e==a.external_training_record_statuses.approved?a.showMessage("dashboard.external_training_approved"):e==a.external_training_record_statuses.rejected?a.showMessage("dashboard.external_training_rejected"):void 0},o.returnExternalTrainingImageClass=function(e){return e==a.external_training_record_statuses.pending_review?"pending":e==a.external_training_record_statuses.approved?"approved":e==a.external_training_record_statuses.rejected?"rejected":void 0},o.returnValueOrNa=function(e){return e?(e%1==0&&(e=parseInt(e)),e):a.showMessage("external_training_record.na")},o.goToQuestions=function(){s.location="/questions"},o.openQuestion=function(e){s.location="/dashboard/questions/:question_id".replace(/:question_id/,e.id)},o.deleteQuestion=function(t){c.confirm(I18n.t("lup.confirm"),I18n.t("lup.courses.questions.are_you_sure_you_want_to_delete_this_question")).then(function(e){h.destroy(t.id).then(function(){u.merge({page:1}),o.loadData()})})},o.showDescription=function(e,t){var n,o,r="";return e&&(r=e.description?String(e.description).replace(/<[^>]+>/gm,""):"",o=200-(n=a.showMessage("lup.dashboard.read_more")).length-5,r.length>o&&(r=t?r.substring(0,o)+' ... <a ng-click="EnrollmentHelper.launchPath( course )"> '+n+"</a>":r.substring(0,o)+' ... <a href="/enrollments/'+e.id+'/details"> '+n+"</a>")),angular.isString(r)?r.trim():""},o.showEADescription=function(e){return A.showDescription(e,200)},o.cancelEnrollmentRequest=function(e){A.cancelEnrollmentRequestFromDashboard(e,function(e,t){t.dismiss(),o.loadData()})},o.displayNotification=function(e){c.notify("",e)}}angular.module("lu").controller("DashboardIndexController",e),e.$inject=["$scope","$log","$rootScope","LearnerDashboardFactory","StorageFactory","LupHelper","$sce","$window","EnrollmentHelper","$luPopover","paramsService","UsersFactory","LupJobFactory","ReviewFactory","SocialSharingFactory","$modal","$timeout","CourseQuestionsFactory","notifyFactory","BadgesFactory","learnUponApi","CatalogFactory","ViewPortService"]}(),function(){"use strict";function e(n,e,o,t,r,a,i,s,l,c,u,d,p,m,f){var g=this,h=new s,b=(new u,new m),v=new f;function w(){n.triggerFocusOnLeaderboard=!1,n.$$postDigest(function(){n.triggerFocusOnLeaderboard=!0,n.$digest()})}function y(){b.pingForRulesProgress(g.auto_assign_reference).then(function(e){e!==a.lupJobStatuses.completed?l(function(){y()},2e3):g.auto_assign_reference=null})}function M(){c.confirm(g.lupHelper.showMessage("lup.salesforce.sales_force_rules.apply_process.action"),g.lupHelper.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.are_you_sure")).then(function(e){v.runSFRules(g.user.attributes.id).then(function(e){g.sfar_reference=e.data.job_reference})})}g.awards=e.getKey("awards"),g.award_counts=e.getKey("award_counts"),g.my_leaderboard=e.getKey("my_leaderboard"),g.user_points=e.getKey("user_points").attributes,g.top_5=e.getKey("top_5"),g.levels=e.getKey("levels"),g.top_3_awards=e.getKey("top_3_awards"),g.upcoming_awards=e.getKey("upcoming_awards"),g.user_groups=e.getKey("user_groups"),g.user=e.getKey("user"),g.portal_has_children=e.getKey("portal_has_children"),g.group_membership_id=e.getKey("group_membership_id"),g.anonymous_leaderboards=e.getKey("anonymous_leaderboards"),g.admin_view=e.getKey("admin_view"),g.leaderboard_disabled=e.getKey("leaderboard_disabled"),g.groups_leaderboard_disabled=e.getKey("groups_leaderboard_disabled"),g.lupHelper=a,g.searchText=null,g.filter_awards_by=0,g.loadData=function(){o.merge({filter:g.filter_awards_by});var e={};e.params=o.get(),g.admin_view&&(e.params.user_id=g.user.attributes.id);spinnerService.showGroup("achievementsFilter"),h.getList(e).then(function(){g.awards=h.data.awards,spinnerService.hideGroup("achievementsFilter"),n.triggerFocusOnMain=!0})},g.awardForText=function(e){switch(e){case a.badge_event_types.daily_learning:return a.showMessage("lup.gamification.award_for_titles.daily_learning");case a.badge_event_types.purchase:return a.showMessage("lup.gamification.award_for_titles.purchase");case a.badge_event_types.views_resource:return a.showMessage("lup.gamification.award_for_titles.views_resource");case a.badge_event_types.self_enroll:return a.showMessage("lup.gamification.award_for_titles.self_enrolled");case a.badge_event_types.approve_ext_credit:return a.showMessage("lup.gamification.award_for_titles.credit_approved");case a.badge_event_types.course_completion:case a.badge_event_types.learning_path_completion:return a.showMessage("lup.gamification.award_for_titles.completion_action");case a.badge_event_types.level_achieved:return a.showMessage("lup.gamification.award_for_titles.level_reached")}},g.filterAwardList=function(e,t){t.preventDefault(),n.triggerFocusOnMain=!1,n.$$postDigest(function(){n.triggerFocusOnMain=!0,n.$digest()}),o.merge({filter:e}),g.filter_awards_by=e,g.loadData()},g.showItemsModal=function(e){r.open({templateUrl:"/tc/badges/badge_users_modal.html",controller:"BadgeUsersListController as vm",size:"lg",resolve:{award:function(){return e},user:function(){return g.user},admin_view:function(){return g.admin_view}}})},g.calculateCount=function(t){{if(0===parseInt(t)){var n=0;return _.each(g.award_counts.data,function(e){n+=e.award_count}),n}var e=_.find(g.award_counts.data,function(e){return e.badge_type_id===parseInt(t)});return e?e.award_count:0}},g.levelProgressData=function(){var t=parseInt(g.user_points.total_points);t<0&&(t=0);var n=null;_.each(g.levels.data,function(e){return!(t<e.achieved_over)&&void(n=e)});var e=_.find(g.levels.data,function(e){return t<e.achieved_over}),o=100,r="",a=null;e&&(o=100*(t-parseInt(n.achieved_over))/parseInt(e.achieved_over),r=e.name,a=e.achieved_over);return{current_level:n.name,next_level:r,next_level_points:a,percentage:o}},g.hide_groups_filter=function(){return 0===g.user_groups.data.length||!!g.groups_leaderboard_disabled},g.onFocusTrapDeactivate=function(){n.triggerFocusOnMain=!1,n.$digest()},g.toggleFocusLeaderboard=w,g.filterLeaderboard=function(e,t){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),g.leaderboard_filters.by_month=t,w())},g.getA11YtranslationLeaderboard=function(e){return null!=g.leaderboard_filters.by_month?"current_month"!=g.leaderboard_filters.by_month?"last_month"!=g.leaderboard_filters.by_month?"":a.showMessage("lup.gamification.points_in")+" "+g.user_points.last_month+" "+a.showMessage("lup.a11y.loaded"):a.showMessage("lup.gamification.points_in")+" "+g.user_points.current_month+" "+a.showMessage("lup.a11y.loaded"):a.showMessage("lup.gamification.overall_points")+" "+a.showMessage("lup.a11y.loaded")},g.getCurrentPageA11Y=function(e){return a.showMessage("lup.gamification.my_awards")+" "+a.showMessage("lup.a11y.page")+" "+e+" "+a.showMessage("lup.a11y.loaded")},g.auto_assign_reference=e.getKey("auto_assign_reference"),g.auto_assign_reference&&y(),g.top_badges_filter=0<g.top_3_awards.data.length?1:0,l(function(){g.animate_badges_filter=g.top_badges_filter}),g.leaderboard_filters={by_group:null,by_month:null},g.sortOptions=[{label:a.showMessage("lup.filters.created_at"),value:"last_date.desc",default:!0},{label:a.showMessage("lup.filters.oldest_first"),value:"last_date.asc"},{label:a.showMessage("lup.filters.name_az"),value:"badge_name.asc"},{label:a.showMessage("lup.filters.name_za"),value:"badge_name.desc"},{label:a.showMessage("lup.filters.total_points_desc"),value:"total_points.desc"},{label:a.showMessage("lup.filters.total_points_asc"),value:"total_points.asc"}],g.admin_view&&(t.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:a.displayName(g.user.attributes),url:"/users/"+g.user.attributes.id},{title:I18n.t("lup.gamification.achievements"),url:"/users/"+g.user.attributes.id+"/achievements"}]),t.$on("sendMessage",function(){d.location="/messages/new"}),t.$on("changeMembershipType",function(){d.location="/users/"+g.user.attributes.id+"/user-settings"}),t.$on("enrollUser",function(){d.location="/enrollments/new?user_id=:user_id".replace(/:user_id/,g.user.attributes.id)}),t.$on("deleteUser",function(){p.deleteUser({id:g.user.attributes.id,gm:g.user.attributes.portal_membership_id},g.portal_has_children,function(){d.location="/users"})}),n.$watch("vm.leaderboard_filters",function(e,t){e!==t&&(e={params:{leaderboard_filters:g.leaderboard_spinner=!0,group:e.by_group,month:e.by_month}},g.admin_view&&(e.params.user_id=g.user.attributes.id),h.getLeaderboard(e).then(function(){g.my_leaderboard=h.data.my_leaderboard,g.top_5=h.data.top_5,g.leaderboard_spinner=!1}))},!0),n.$watch("vm.top_badges_filter",function(e,t){e!=t&&(g.animate_badges_filter=e)}),n.$on("runTheRules",function(){g.auto_assign_reference?c.notify("",a.showMessage("lup.auto_assign_rules.apply_process.in_progress")):c.confirm(a.showMessage("lup.auto_assign_rules.apply_process.action"),a.showMessage("lup.auto_assign_rules.apply_process.are_you_sure")).then(function(e){b.runTheRules(g.user.attributes.id).then(function(e){g.auto_assign_reference=e.data.job_reference,y()})})}),n.$on("runSFRules",function(){g.sfar_reference?v.pingForProgress(g.sfar_reference).then(function(e){return e==g.lupHelper.lupJobStatuses.completed?(g.sfar_reference=null,void M()):void c.notify("",g.lupHelper.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.in_progress"))}):M()})}window.angular.module("lu").controller("DashboardMyAchievementsController",e),e.$inject=["$scope","StorageFactory","paramsService","$rootScope","$modal","LupHelper","$filter","BadgeUsersFactory","$timeout","$luPopover","UsersFactory","$window","UserActionService","AutoAssignRulesFactory","SalesForceAssignRulesFactory"]}(),function(){"use strict";function e(o,e,t,r,n,a,i,s){var l=t.get(),c=l.user.attributes,t=t.getKey("calendar_events"),u=new a,d=[];o.user=c,o.calendar_events=t,o.loadData=function(e,t){var n={};n.params=r.get(),n.params.month=e,n.params.year=t,u.getCalendarEvents(c.id,n,!0).then(function(){o.calendar_events=u.data.calendar_events,d=[]})},o.LupHelper=n,o.selected="-",o.displayForSelectedDate=function(e,t,n,o){{if(t&&"-"!==t){t=t.format("YYYY-MM-DD"),n=i("displayDateTime")(n,"YYYY-MM-DD"),o=i("displayDateTime")(o,"YYYY-MM-DD"),t=n<=t&&t<=o;return t?-1==d.indexOf(e)&&d.push(e):-1<(o=d.indexOf(e))&&d.splice(o,1),t}return-1==d.indexOf(e)&&d.push(e),!0}},o.showSessionDetails=function(t){var e={};e.params=r.get(),e.params.learnerView=!0,e.params.cal_type_id=t.cal_type_id,e.params.attendee_id=t.attendee_id,e.params.session_detail_id=t.session_detail_id,u.getDetailsForSession(c.id,t.url,e,t.is_training).then(function(){var e=u.data;s.open({templateUrl:"/tc/users/show_session_details.html",controller:"UsersShowSessionDetailsController",windowClass:"modal-box modal-box--lg",resolve:{event:function(){return e.session_details.attributes},instructor:function(){return e.instructor},has_enrollment:function(){return!!e.session_details.attributes.id},show_view_course:function(){return!0},showingOnPage:function(){return"dashboard"},status:function(){return t.description},num_on_waitlist:function(){return e.num_on_waitlist},waitlist_count:function(){return null},course_enable_waitlist:function(){return null},course_waitlist_type:function(){return null},course_settings:function(){return e.course_settings},settingMinimalThresholdForMsTeamsEnabled:function(){return e.setting_minimal_threshold_for_ms_teams_enabled},forceHideViewCourse:function(){return!0},showCloseBtn:function(){return!0},sessionCourses:function(){return e.session_courses||[]},showVisitSessionBtn:function(){return!0}}})})},o.haveShownItems=function(){return 0<d.length},o.mainFocus=!1,o.setFocusToMain=function(e){o.mainFocus=!!e,o.$digest()},o.timezone=l.timezone,o.ariaLabel=n.showMessage("lup.a11y.dashboard_training_sessions_main"),o.ariaLabelSide=n.showMessage("lup.a11y.dashboard_training_sessions_sidebar")}angular.module("lu").controller("DashboardTrainingCalendarController",e),e.$inject=["$scope","$rootScope","StorageFactory","paramsService","LupHelper","UsersFactory","$filter","$modal"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,o=o.get();l.documentSrc=r.trustAsResourceUrl(o.documentSrc+"?showDownload=true"),l.LupHelper=n,a.executeDjImageUpload=function(){s.open({templateUrl:"openImageUpload.html",controller:"OpenImageUploadController",controllerAs:"vm",size:"lg"}).result.then(function(e){e&&"save"===e.action&&(e=e.image_url,CKEDITOR.instances.test_wysi.insertHtml('<img src="'+e+'">'))})},l.LupHelper.renderCKEditor({clear_all_previous_instances:!1,id:"test_wysi",add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,show_source:!0,body_class:"ck-editor-post",format_tags:"p;h2",include_custom_css:!0,toolbar_for_forums:!0,width:"100%"}),l.tabIndex=function(e){return e?0:-1},l.isActive=!1,l.createNewTopic=function(){s.open({templateUrl:"showCreateNewTopic.html",controller:"CreateNewTopicController",controllerAs:"vm",windowClass:"modal-box modal-box--lg"}).result.then(function(){})}}angular.module("lu").controller("DevPlaygroundLegoController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","$sce","$window","$luPopover","$modal"]}(),function(){"use strict";function e(e,t,n,o){var r=this;r.cancel=function(){o.close()},r.save=function(){o.close({action:"save",image_url:r.image_url})}}angular.module("lu").controller("OpenImageUploadController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance"]}(),function(){"use strict";function e(e,t,n,o){this.LupHelper=n,this.save=function(){},this.cancel=function(){o.close()}}angular.module("lu").controller("CreateNewTopicController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance"]}(),function(){"use strict";function e(i,e){i.shopArr=[],i.shopArrTmp=[{id:0,name:"sneakers",category:"shoes",disabled:!0},{id:1,name:"shoes",category:"shoes"},{id:2,name:"slippers",category:"shoes"},{id:3,name:"boots",category:"shoes",disabled:!0},{id:4,name:"shirt",category:"clothes",disabled:!0},{id:5,name:"jacket",category:"clothes"},{id:6,name:"T-shirt",category:"clothes"},{id:7,name:"pants",category:"clothes"},{id:8,name:"jeans",category:"clothes"}],i.shopArrFn=function(e,t,n,o){return i.shopArr},i.c=0,i.loadMore=function(e,t,n){if("a3"===e)return i.c=0,[{id:234,name:"Puppy a3",category:"clothes"}];if(10===i.c)return[];if(i.c+=1,angular.isDefined(n)&&angular.isNumber(n)){for(var o=i.shopArrTmp[i.shopArrTmp.length-1],r=1;r<=30;r++){var a=angular.copy(o);a.id=a.id+1,i.shopArr.push(a)}return i.shopArr}return i.shopArr=i.shopArrTmp,i.shopArr},i.shopObjShort={0:{name:"sneakers",category:"shoes",disabled:!0},1:{name:"shoes",category:"shoes"},2:{name:"slippers",category:"shoes"},3:{name:"boots",category:"shoes",disabled:!0},4:{name:"shirt",category:"clothes",disabled:!0},5:{name:"jacket",category:"clothes"},6:{name:"T-shirt",category:"clothes"},7:{name:"pants",category:"clothes"},8:{name:"jeans",category:"clothes"},9:{name:"cap"},10:{name:"belt"}},i.bundle=["1"],i.bundle2=[{id:5,name:"shirt",category:"clothes"},{id:2,name:"shoes",category:"shoes"}],i.bundle3=[],i.skills=[{id:13,name:"default(13)"},{id:14,name:"default(14)"}],i.skillsList=[{id:1,name:"Java"},{id:2,name:"C"},{id:3,name:"C++"},{id:4,name:"Core Java"},{id:5,name:"JavaScript"},{id:6,name:"PHP"},{id:7,name:"HTML"},{id:8,name:"CSS"},{id:9,name:"Angular Js"},{id:10,name:"Bootstrap"}],i.getSkillsList=function(e,t){for(var n=[],o=i.skillsList[i.skillsList.length-1],r=1;r<=30;r++){var a=angular.copy(o);a.id=a.id+r,a.name="default("+a.id+") #"+Math.random(),n.push(a)}return n},i.selectItemCallback=function(e){i.selectedItem=e},i.removeItemCallback=function(e){i.removedItem=e}}angular.module("lu").controller("DevPlaygroundSandBoxController",e),e.$inject=["$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,a=a.get();s.orderTypes=[{label:"Latest First",value:"created_at.DESC"},{label:"Newest First",value:"created_at.ASC"}],s.randomURL="/playground/testing_search",s.viewType=0,s.pageNumber=1,s.filterController="ForumsPostsFilterController as vm",s.filterTemplate="/tc/forums/posts-filter.html",s.videoUuid=a.video_uuid,s.pathOnly="/hls/"+s.videoUuid+"/manifest.m3u8";window.jwplayer("jwplayer").setup({key:"9jP4PMLcSgokPFzf/ynXrjviGdh6qx3tu+5IPCO2my0=",playlist:[{sources:[{file:s.pathOnly}]}]})}angular.module("lu").controller("DevPlaygroundSearchDirectoryController",e),e.$inject=["$scope","$rootScope","LupHelper","$modal","$luPopover","StorageFactory","$window"]}(),function(){"use strict";function e(e,t,n,o){this.LupHelper=n,this.save=function(){},this.cancel=function(){o.close()}}angular.module("lu").controller("ShowNewCourseBadgeController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance"]}(),function(){"use strict";function e(r,e,t,n,o,a,i,s){var l=this;l.LupHelper=t,l.destPage=3,l.video_state=0,l.video_content=null,l.processingUpload=!1,l.startVideo=function(){l.video_state=1},l.stopVideo=function(){l.video_state=0},l.onPageLoad=function(e){o.notify("",e)},r.$watch("vm.video_content",function(n){n&&i.getData(t.fileUploads.types.assignment_upload_answers,function(t){s(function(){var e=t.data.signature_data.attributes;!function(e,n){r.errorMsg=null;var o=new File([e],"my_video.mp4",{type:"video/mp4"});i.uploadFiles(o,n,function(e){s(function(){o.result=e.data});var t=new a;return t.uuid=n.guid,t.assignment_file_name=o.name,t.assignment_answer_id=64825,t.assignment_file_size=o.size,t.assignment_content_type=o.type,t.output_url=n.folder_path+o.name,t.create().then(function(){l.processingUpload=!1}).catch(function(){l.processingUpload=!1})},function(e){e.status,l.processingUpload=!1},function(e){l.processingUpload=!0,o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(n,e)})},function(e){l.processingUpload=!1})})}angular.module("lu").controller("DevPlaygroundSeesawController",e),e.$inject=["$scope","$rootScope","LupHelper","$modal","$luPopover","AssignmentAnswerUploadFactory","s3HelperFactory","$timeout"]}(),function(){"use strict";function e(e,t,n,o){e.save=function(){},e.LupHelper=n,e.cancel=function(){o.close()}}angular.module("lu").controller("ShowRequestEnrollmentController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance"]}(),function(){"use strict";function e(e,t,n,o){e.save=function(){},e.cancel=function(){o.close()}}angular.module("lu").controller("ShowAchievementsLevelsController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance"]}(),function(){"use strict";function e(e,t,n,o){t.helper=n,t.translate=n.showMessage,this.LupHelper=n,this.showActivity=function(){o.open({templateUrl:"showActivityTemplate.html",controller:"ShowActivityController",size:"md",resolve:{}}).result.then(function(){})},this.showRequestEnrollment=function(){o.open({templateUrl:"showRequestEnrollment.html",controller:"ShowRequestEnrollmentController",size:"sm",resolve:{}}).result.then(function(){})}}angular.module("lu").controller("DevPlaygroundSlideController",e),e.$inject=["$scope","$rootScope","LupHelper","$modal"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){o=o.get();this.documentSrc=r.trustAsResourceUrl(o.documentSrc+"?showDownload=true"),this.LupHelper=n,a.executeDjImageUpload=function(){s.open({templateUrl:"openImageUpload.html",controller:"OpenImageUploadController",controllerAs:"vm",size:"lg"}).result.then(function(e){e&&"save"===e.action&&(e=e.image_url,CKEDITOR.instances.test_wysi.insertHtml('<img src="'+e+'">'))})},this.LupHelper.renderCKEditor({clear_all_previous_instances:!1,id:"test_wysi",add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,show_source:!0,body_class:"zoe custom-icon",format_tags:"p;h2;h3",include_custom_css:!0,toolbar_for_forums:!0,width:"100%"})}angular.module("lu").controller("DevPlaygroundSpringRiderController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","$sce","$window","$luPopover","$modal"]}(),function(){"use strict";function e(e,t,n,o){var r=this;r.cancel=function(){o.close()},r.save=function(){o.close({action:"save",image_url:r.image_url})}}angular.module("lu").controller("OpenImageUploadController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance"]}(),function(){"use strict";function e(n,e,t,o,r,a,i){var s=this,t=t.get(),l=new a;s.emailBanners=t.email_banners.data,s.lupHelper=o,s.deleteBanner=function(e,t){i.confirm(s.lupHelper.showMessage("lup.email_banners.delete_banner"),s.lupHelper.showMessage("lup.email_banners.delete_banner_msg")).then(function(){l.delete(e).then(function(e){s.emailBanners.splice(t,1)},function(e){})})},s.setAsDefault=function(e,t){l.setDefault(e).then(function(e){s.emailBanners.forEach(function(e){e.is_default&&(e.is_default=!1)}),s.emailBanners[t].is_default=!0},function(e){})},n.activeBannerDDM={},n.toggled=function(e,t){n.activeBannerDDM[t]=e},e.$on("addEmailBanner",function(){10<=s.emailBanners.length?i.notify("",I18n.t("lup.email_banners.max_number")):r.location="/email_banners/new"})}angular.module("lu").controller("EmailBannersIndexController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","EmailBannerFactory","$luPopover"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d){var p=this,o=o.get(),_=new l;function m(){var e="/download_jobs/"+p.banner_image_reference+"/status.json";return t.get(e,{}).then(function(e){e.data.job.status_id!==p.lupHelper.lupJobStatuses.completed?p.timeoutPromise=s(function(){m()},2e3):a.location="/email_banners/"+p.banner.id+"/edit"})}p.lupHelper=r,p.nameLength=120,p.edit=!1,p.banner={name:"",is_default:!1},p.image=null,p.invalidFile=[],p.currentRequest=!1,p.cancel=function(){if(p.currentRequest)return;a.location="/email_banners"},p.save=function(e){if(p.currentRequest)return;(function(e){e.$setValidity("emptyName",!!p.banner.name),p.banner.name&&e.$setValidity("invalidName",p.banner.name.length<=p.nameLength);e.$setValidity("invalidFile",0==p.invalidFile.length),p.edit||e.$setValidity("emptyFile",!!p.image)})(e),e.$valid&&(p.currentRequest=!0,p.image?(p.banner_image_reference="1",i.getData(p.lupHelper.fileUploads.types.email_banner_image,function(e){s(function(){var t=e.data.signature_data.attributes;i.uploadFiles(p.image,t,function(e){p.banner.output_url=t.folder_path+p.image.name,p.banner.image_file_name=p.image.name,p.banner.alt_tag=p.alt_tag;(p.edit?_.update(p.banner.id,p.banner):_.create(p.banner)).then(function(e){p.banner_image_reference=e.banner_image_reference,e.banner_id&&(p.banner.id=e.banner_id),m()},function(e){p.currentRequest=!1,p.banner_image_reference=null})},function(e){p.currentRequest=!1,p.banner_image_reference=null,u.error(r.showMessage("lup.email_banners.errors.failed_to_upload"))})})},function(e){p.currentRequest=!1,p.banner_image_reference=null},null)):p.edit?_.update(p.banner.id,p.banner).then(function(e){a.location.reload()},function(e){p.currentRequest=!1}):p.currentRequest=!1)},p.openCropper=function(e,t){{e&&d.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 3},cropperImageSize:function(){return"selection"}}}).result.then(function(e){e&&e.image_for_upload&&(p.alt_tag=e.alt_tag,p.image=e.image_for_upload)})}},p.alt_tag=null,p.banner_image_reference=o.banner_image_reference,p.banner_image_reference&&m(),o.email_banner&&(p.edit=!0,p.banner=o.email_banner.attributes),n.$on("deleteEmailBanner",function(){c.confirm(p.lupHelper.showMessage("lup.email_banners.delete_banner"),p.lupHelper.showMessage("lup.email_banners.delete_banner_msg")).then(function(){_.delete(p.banner.id).then(function(e){a.location="/email_banners"},function(e){})})})}angular.module("lu").controller("EmailBannersNewController",e),e.$inject=["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","s3HelperFactory","$timeout","EmailBannerFactory","$luPopover","toastr","$modal"]}(window.angular),function(){"use strict";window.angular.module("lu").controller("EmailTemplatesShowController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(t,e,n,o,r,a,i,s,l){o=o.get(),new s;t.parent_title=o.parent_title,t.email_template=o.email_template,t.LupHelper=r,t.cancel=function(){a.location="/email_templates/"+t.email_template.email_template_type_id},a.portalSettingFormDirty=!1,t.forceShowSave=!1,t.$on("sendToSelf",function(){a.location="/email_templates/"+t.email_template.email_template_type_id+"?s=1"}),t.$on("resetToDefault",function(){i.confirm(I18n.t("lup.confirm"),I18n.t("custom_email_templates.are_you_sure_you_want_to_reset_this_notification_template")).then(function(e){a.location="/email_templates/"+t.email_template.email_template_type_id+"?r=1"})}),t.$on("copyFromParent",function(){i.confirm(I18n.t("lup.confirm"),I18n.t("custom_email_templates.are_you_sure_you_want_to_copy_this_notification_template",{title:t.parent_title})).then(function(e){a.location="/email_templates/"+t.email_template.email_template_type_id+"?c=1"})}),a.ckEditorChanged=function(){t.forceShowSave=!0,t.$apply()}}])}(),function(){"use strict";function e(t,n,o,r,a,i,s,l,e,c,u,d){var p=this,_=new e;function m(){p.triggerFocusOnMain=!1;var e=0<p.filter_users.length?p.filter_users[0].user_id:null,t=0<p.filter_groups.length?p.filter_groups[0].id:null,n=0<p.enrollment_items.length?p.enrollment_items[0].id:null,n={status_type:p.approvalStatusFilter,user_id:e,group_id:t,course_id:n};o.merge(n),i.$emit("resetSort"),f()}function f(){var e=o.merge({approval_type:p.type,status_type:p.approvalStatusFilter});a.index(e).then(function(e){t.set(e.data),p.counts=t.getKey("counts"),p.approvalStatus=t.getKey("enrollment_approvals").meta.status_type,p.enrollment_approvals=t.getKey("enrollment_approvals"),p.triggerFocusOnMain=!0})}function g(){return p.type===p.lupHelper.enrollment_approvals.approval_types.course?[{label:n.showMessage("lup.filters.request_date_asc"),value:"request_date.desc",default:!0},{label:n.showMessage("lup.filters.request_date_desc"),value:"request_date.asc"},{label:n.showMessage("lup.filters.user_name_az"),value:"user_name.asc"},{label:n.showMessage("lup.filters.user_name_za"),value:"user_name.desc"},{label:n.showMessage("lup.filters.course_name_az"),value:"course_name.asc"},{label:n.showMessage("lup.filters.course_name_za"),value:"course_name.desc"}]:p.type===p.lupHelper.enrollment_approvals.approval_types.learning_path?[{label:n.showMessage("lup.filters.request_date_asc"),value:"request_date.asc",default:!0},{label:n.showMessage("lup.filters.request_date_desc"),value:"request_date.desc"},{label:n.showMessage("lup.filters.user_name_az"),value:"user_name.asc"},{label:n.showMessage("lup.filters.user_name_za"),value:"user_name.desc"},{label:n.showMessage("lup.catalog.sorting.learning_path_name_asc"),value:"learning_path_name.asc"},{label:n.showMessage("lup.catalog.sorting.learning_path_name_desc"),value:"learning_path_name.desc"}]:void 0}function h(){var e={hideSpinner:!0};return e.url="/download_jobs/"+p.approval_reference+"/status.json",_.get("download_jobs",e,p.approval_reference).then(function(){var e=_.data.job;e&&e.status_id!==n.lupJobStatuses.completed?p.timeoutPromise=c(function(){h()},2e3):(p.approval_reference=null,f())})}function b(e,t){!angular.isUndefined(t)&&!1!==t||(p.selected.enrollment_items=[]),(e=parseInt(e))===p.lupHelper.enrollment_approvals.approval_types.learning_path?(p.loadEnrollmentsFn=p.fetchLearningPathsApi,p.enrollmentsPlaceholder=p.lupHelper.showMessage("lup.enrollment_approvals.filters.by_learning_path")):e===p.lupHelper.enrollment_approvals.approval_types.course&&(p.loadEnrollmentsFn=p.fetchCoursesApi,p.enrollmentsPlaceholder=p.lupHelper.showMessage("lup.enrollment_approvals.filters.by_course"))}p.lupHelper=n,p.enrollment_approvals=t.getKey("enrollment_approvals"),p.approvalStatus=t.getKey("enrollment_approvals").meta.status_type,p.type=t.getKey("enrollment_approvals").meta.approval_type,p.approval_reference=t.getKey("approval_reference"),p.is_admin=t.getKey("is_admin"),p.show_learning_paths=t.getKey("show_learning_paths"),p.emptyStateMessage=function(){var e="";if(parseInt(p.type)===p.lupHelper.enrollment_approvals.approval_types.course)switch(p.approvalStatus){case 1:e=n.showMessage("lup.enrollment_approvals.empty_state.course_approved");break;case 2:e=n.showMessage("lup.enrollment_approvals.empty_state.course_rejected");break;default:e=n.showMessage("lup.enrollment_approvals.empty_state.course_pending")}else if(parseInt(p.type)===p.lupHelper.enrollment_approvals.approval_types.learning_path)switch(p.approvalStatus){case 1:e=n.showMessage("lup.enrollment_approvals.empty_state.learning_path_approved");break;case 2:e=n.showMessage("lup.enrollment_approvals.empty_state.learning_path_rejected");break;default:e=n.showMessage("lup.enrollment_approvals.empty_state.learning_path_pending")}return e},p.loadData=f,i.breadcrumbs=[{title:I18n.t("lup.pagetitles.enrollment_approvals"),url:"/enrollment-approvals"}],p.selection=[],p.toggleSelection=function(e){var t=p.selection.indexOf(e),n=l("filter")(p.enrollment_approvals.data,{id:e},!0)[0];-1<t?p.selection.splice(t,1):p.selection.push(e);r.$broadcast("itemSelect",{message:n,action:-1<t?"deselect":"select"})},p.onSelectStateChange=function(){},p.approveRequest=function(t){var e=I18n.t("lup.enrollment_approvals.confirm_approve_enrollment_title"),n=I18n.t("lup.enrollment_approvals.confirm_approve_enrollment_message");s.confirm(e,n).then(function(e){a.approveEnrollmentRequest(t.id).then(function(e){f()})})},p.rejectRequest=function(t){var e=I18n.t("lup.enrollment_approvals.confirm_reject_enrollment_title"),n=I18n.t("lup.enrollment_approvals.confirm_reject_enrollment_message");s.confirm(e,n).then(function(e){a.rejectEnrollmentRequest(t.id).then(function(e){f()})})},p.approveRequests=function(){var e=I18n.t("lup.enrollment_approvals.confirm_approve_enrollment_title"),t=I18n.t("lup.enrollment_approvals.confirm_approve_enrollment_message");s.confirm(e,t).then(function(e){a.approveEnrollmentRequests(p.selection).then(function(e){p.approval_reference=e.data.job_reference,p.selection=[],h()})})},p.rejectRequests=function(){var e=I18n.t("lup.enrollment_approvals.confirm_reject_enrollment_title"),t=I18n.t("lup.enrollment_approvals.confirm_reject_enrollment_message");s.confirm(e,t).then(function(e){a.rejectEnrollmentRequests(p.selection).then(function(e){p.approval_reference=e.data.job_reference,p.selection=[],h()})})},p.cancel=function(){i.$broadcast("selectAll:deSelectAll")},p.fetchUsers=function(e){var t=u.defer();return d.get("/all_users.json",{params:{search:e.$query,include_pending:!1,exclude_disabled:!0,include_top_admins:!0,page:e.$page}}).success(function(e){t.resolve(e.users.data)}).error(function(){t.reject("Failed to get users")}),t.promise},p.fetchGroups=function(e){var t=u.defer();return d.get("/groups.json",{params:{search:e.$query,page:e.$page}}).success(function(e){t.resolve(e.groups.data)}).error(function(){t.reject("Failed to get groups")}),t.promise},p.fetchCoursesApi=function(e){var t=u.defer();return d.get("/all_courses.json",{params:{search:e.$query,for_enrollment:!0,page:e.$page,includeallversions:0,include_draft:0}}).success(function(e){e=e.courses.data;t.resolve(e)}).error(function(){t.reject("Failed to get courses")}),t.promise},p.fetchLearningPathsApi=function(e){var t=u.defer();return d.get("/learning_paths.json",{params:{search:e.$query,published:!0,page:e.$page}}).success(function(e){e=e.learning_paths.data;t.resolve(e)}).error(function(){t.reject("Failed to get learning paths")}),t.promise},p.filter_users=t.getKey("selected").users,p.filter_groups=t.getKey("selected").groups,p.enrollment_items=t.getKey("selected").enrollment_items,p.filteringControl={},p.applyFilter=m,r.ariaLabelSide=n.showMessage("lup.a11y.enrollment_requests_aside"),p.triggerFocusOnMain=!1,p.onFocusTrapDeactivate=function(){p.triggerFocusOnMain=!1},p.onFilterSelect=function(e){e===p.type&&(p.triggerFocusOnMain=!1,r.$$postDigest(function(){p.triggerFocusOnMain=!0,r.$digest()}))},p.getCurrentPageA11Y=function(e){return n.showMessage("lup.pagetitles.enrollment_approvals")+" "+n.showMessage("lup.a11y.page")+" "+e+" "+n.showMessage("lup.a11y.loaded")},r.getA11Ytranslation=function(){var e=" "+n.showMessage("lup.a11y.page");return p.enrollment_approvals.meta&&p.enrollment_approvals.meta.page&&(e+=" "+p.enrollment_approvals.meta.page),e+=" "+n.showMessage("lup.a11y.loaded"),p.type==p.lupHelper.enrollment_approvals.approval_types.course?(r.ariaLabel=n.showMessage("lup.manager_approval.course_requests"),n.showMessage("lup.manager_approval.course_requests")+e):p.type==p.lupHelper.enrollment_approvals.approval_types.learning_path?(r.ariaLabel=n.showMessage("lup.manager_approval.learning_path_requests"),n.showMessage("lup.manager_approval.learning_path_requests")+e):""},r.singleCardDescription=function(e){return 0===e?n.showMessage("lup.manager_approval.pending_requests"):1===e?n.showMessage("lup.enrollment_approvals.accepted_requests"):2===e?n.showMessage("lup.enrollment_approvals.rejected_requests"):void 0},p.approvalStatusFilter=p.approvalStatus,p.approvalStatusFilterOptions=[{label:p.lupHelper.showMessage("lup.enrollment_approvals.pending_requests"),value:p.lupHelper.enrollment_approvals.status_types.pending},{label:p.lupHelper.showMessage("lup.enrollment_approvals.accepted_requests"),value:p.lupHelper.enrollment_approvals.status_types.accepted},{label:p.lupHelper.showMessage("lup.enrollment_approvals.rejected_requests"),value:p.lupHelper.enrollment_approvals.status_types.rejected}],p.applyFilter=m,p.setStatusType=function(e){p.approvalStatusFilter="approved"===e?p.lupHelper.enrollment_approvals.status_types.accepted:"rejected"===e?p.lupHelper.enrollment_approvals.status_types.rejected:p.lupHelper.enrollment_approvals.status_types.pending,m()},p.approval_reference&&h(),p.counts=t.getKey("counts"),p.sortOptions=g(),r.$watch(function(){return p.type},function(e,t){e!==t&&(p.enrollment_items=[],b(e,!0),p.sortOptions=g(),i.$emit("resetSort"),m())}),b(p.type,!0)}angular.module("lu").controller("EnrollmentApprovalsIndexController",e),e.$inject=["StorageFactory","LupHelper","paramsService","$scope","EnrollmentApprovalFactory","$rootScope","$luPopover","$filter","learnUponApi","$timeout","$q","$http"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=new i;this.helper=n,this.save=function(){o.close();var e={url:function(e,t){{if("Course"===t)return"/catalog/courses/:course_id/request_approval.json".replace(/:course_id/,e.course_id);if("LearningPath"===t)return"/catalog/learning-paths/:lp_id/request_approval.json".replace(/:lp_id/,e.learning_path_id)}}(r,a)};return s.post("EnrollmentApproval",e).then(function(e){return window.location.reload(),e})},this.cancel=function(){o.close()}}angular.module("lu").controller("ShowApproveEnrollmentController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance","item","type","learnUponApi"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=new i;e.save=function(){var e={url:"/catalog/enrollment_approvals/:enrollment_approval_id/reject.json".replace(/:enrollment_approval_id/,r.enrollment_approval_id),data:{type:a}};return l.post("EnrollmentApproval",e).then(function(e){return s?s(e,o):(window.location.reload(),e)})},e.LupHelper=n,e.cancel=function(){o.close()}}angular.module("lu").controller("ShowRejectEnrollmentController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance","item","type","learnUponApi","callback"]}(),function(){"use strict";function e(a,t,e,n,o,r,i,s,l,c,u,d,p,_,m){angular.extend(this,e("BasePageController as base",{$scope:a}));var f=this;a.LupHelper=c,a.EnrollmentHelper=l,a.uploadedFiles=a.pageToShow.assignment_uploads,a.displayResponseTab=!1,a.displayFeedbackTab=!1,a.displayDetailTab=!0,a.web_components_redesign_enabled=m.web_components_redesign_enabled,a.cdn_path=CONFIG.cdnPath,f.video_state=0,f.video_content=null,f.processingUpload=!1,f.startVideo=function(){f.video_state=1},f.stopVideo=function(){f.displayControls=!1,f.video_state=0,f.isVideoStarted=!1},f.uploadVideo=function(){f.video_content&&p.getData(c.fileUploads.types.assignment_upload_answers,function(t){r(function(){var e=t.data.signature_data.attributes;h(f.video_content,e,!0)})},function(e){f.processingUpload=!1})},f.removeVideo=function(e){{e?m.getWebcomponentsFlag()?m.openModal('<p class="p-large">'+c.showMessage("lup_assignment_remove_body_modal")+'</p><div slot="footer" class="o-flex o-flex--justify-end"><luds-button id="deleteVideoCancelButton" variant="secondary" class="mr-12">'+c.showMessage("lup.wc_survey_summary.no")+'</luds-button><luds-button id="deleteVideoConfirmButton" variant="primary">'+c.showMessage("lup.wc_survey_summary.yes")+"</luds-button></div>",{showCloseIcon:!0,width:"sm",height:"sm",title:c.showMessage("lup_assignment_remove_heading_modal"),animation:!0},{close:{selector:"#deleteVideoCancelButton",handler:function(){var e=document.querySelector("luds-modal");e&&e.close()}},submit:{selector:"#deleteVideoConfirmButton",handler:function(){var e=document.getElementById("video_preview");e&&(f.displayControls=!0,e.remove());e=document.querySelector("luds-modal");e&&e.close()}}}):t.confirm(I18n.t("lup_assignment_remove_heading_modal"),I18n.t("lup_assignment_remove_body_modal")).then(function(e){var t=document.getElementById("video_preview");t&&(f.displayControls=!0,t.remove())}):(e=document.getElementById("video_preview"))&&(f.displayControls=!0,e.remove())}},f.displayControls=!0,f.isVideoStarted=!1,f.video_feature_enabled=a.pageToShow.video_recorder_enabled;var g=new u;function h(n,o,e){f.processingUpload=!0,a.errorMsg=null,e&&(n=new File([n],f.videoName?f.videoName+".mp4":"video_"+Date.now()+".mp4",{type:"video/mp4"})),p.uploadFiles(n,o,function(e){r(function(){n.result=e.data});var t=new d;return t.uuid=o.guid,t.assignment_file_name=n.name,t.assignment_answer_id=a.pageToShow.assignment_answer_id,t.assignment_file_size=n.size,t.assignment_content_type=n.type,t.output_url=o.folder_path+n.name,t.create().then(function(){f.processingUpload=!1,f.videoName="",a.uploadedFiles.data.push(t),f.removeVideo(!1)}).catch(function(){f.processingUpload=!1})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data),f.processingUpload=!1},function(e){f.processingUpload=!0,n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}a.showResponseTab=function(){a.displayResponseTab=!0,a.displayDetailTab=!1,a.displayFeedbackTab=!1},a.$on("isVideoStarted",function(e,t){a.$apply(function(){f.isVideoStarted=t})}),a.$on("videoEnded",function(e,t){a.$apply(function(){f.stopVideo()})}),a.showFeedbackTab=function(){a.displayFeedbackTab=!0,a.displayResponseTab=!1,a.displayDetailTab=!1},a.showDetailTab=function(){a.displayFeedbackTab=!1,a.displayResponseTab=!1,a.displayDetailTab=!0},a.canSeeAssignmentDetails=function(){return!(1==a.pageToShow.prevent_question_viewing&&!a.assignmentInProgress())},a.renderCKEditor=function(){var e;o.isUploadInProgress()||void 0!==(e=angular.element(document.querySelector("#answer_text"))).attr("id")&&(e.attr("id","answer_text"),(a.assignmentInProgress()||a.isPreview)&&c.renderCKEditor({clear_all_previous_instances:!0,id:e.attr("id"),add_image_upload:!1,save_button_action:"save_assignment_button",add_embedded_media:!0,width:"100%"}))},a.applyMathJax=function(){c.applyMathJax()},a.showAssignmentDetail=function(){return!(!a.assignmentInProgress()&&0!==a.pageToShow.prevent_question_viewing)},a.showScore=function(){return!a.rejected()&&!a.pendingReview()&&!a.assignmentInProgress()&&a.pageToShow.percentage},a.allowLearnerToSeeFeedback=function(){return 1==a.pageToShow.was_rejected||!a.assignmentInProgress()&&!a.pendingReview()},a.rejected=function(){return 1==a.pageToShow.was_rejected},a.pendingReview=function(){return a.pageToShow.assignment_answer_status_id==c.enrollmentStatuses.pending_review},a.assignmentInProgress=function(){return a.pageToShow.assignment_answer_status_id==c.enrollmentStatuses.in_progress},a.saveAssignment=function(e){g.save(a.showChooseTutor(),a.pageToShow,e,a.pageToShow.assignment_answer_id)},a.launchButtonText=function(e){e={status_id:e};return l.launchButtonText(e,!1,!1,!1)},a.launchCourse=function(e){return e.is_tin_can?s.launch_tincan_course(e.component_id,e.enrollment_id,nil,!1):s.launch_scorm_course(e.component_id,e.enrollment_id)},a.trustSrc=function(e){return i.trustAsResourceUrl(e)},a.hasCourseTutor=function(){return 0!==a.pageToShow.tutor_pm_id},a.showChooseTutor=function(){return!(!a.assignmentInProgress()&&!a.isPreview||a.pageToShow.personal_tutor_id||!(0<a.pageToShow.tutors.length))},a.$watch("ap.files",function(e){if(a.formUpload=!1,e){if(angular.isArray(e))return a.uploadedFiles.data.length>=c.fileUploads.max_assignment_uploads?(c.showTip("course_assignments.maximun_uploads_reached"),!1):void p.getData(c.fileUploads.types.assignment_upload_answers,function(n){r(function(){for(var e=n.data.signature_data.attributes,t=0;t<f.files.length;t++)a.errorMsg=null,h(f.files[t],e)})},function(e){a.processingUpload=!1});r(function(){f.files=e=[e]})}}),a.deleteFile=function(r){m.getWebcomponentsFlag()?m.openModal('<p class="p-large">'+c.showMessage("course_assignments.are_you_sure_you_want_to_delete_this_upload")+'</p><div slot="footer" class="o-flex o-flex--justify-end"><luds-button id="deleteFileCancelButton" variant="secondary" class="mr-12">'+c.showMessage("lup.wc_survey_summary.no")+'</luds-button><luds-button id="deleteFileConfirmButton" variant="primary">'+c.showMessage("lup.wc_survey_summary.yes")+"</luds-button></div>",{showCloseIcon:!0,width:"sm",height:"sm",title:c.showMessage("delete"),animation:!0},{close:{selector:"#deleteFileCancelButton",handler:function(){var e=document.querySelector("luds-modal");e&&e.close()}},submit:{selector:"#deleteFileConfirmButton",handler:function(){var o=new d;return o.id=r,o.destroy().then(function(){if(null===o.id){for(var e=[],t=0;t<a.uploadedFiles.data.length;t++)a.uploadedFiles.data[t].id!==r&&e.push(a.uploadedFiles.data[t]);a.uploadedFiles.data=e}var n=document.querySelector("luds-modal");n&&n.close()})}}}):t.confirm(I18n.t("lup.confirm"),I18n.t("course_assignments.are_you_sure_you_want_to_delete_this_upload")).then(function(e){var n=new d;return n.id=r,n.destroy().then(function(){if(null===n.id){for(var e=[],t=0;t<a.uploadedFiles.data.length;t++)a.uploadedFiles.data[t].id!==r&&e.push(a.uploadedFiles.data[t]);a.uploadedFiles.data=e}})})},a.displayDownloadPdf=function(e){return e.assignment_answer_status_id==c.enrollmentStatuses.completed||e.assignment_answer_status_id==c.enrollmentStatuses.passed||e.assignment_answer_status_id==c.enrollmentStatuses.failed||e.assignment_answer_status_id==c.enrollmentStatuses.in_progress&&!!e.was_rejected},a.downloadPdf=function(e){var t=new _,e={typeId:c.lupJobTypes.downloadAssignment,id:e.assignment_answer_id,is_learner:!0};a.web_components_redesign_enabled?t.startJob(e):t.initiateJob(e)},a.canSeeAssignmentDetails()||a.showResponseTab(),r(function(){a.renderCKEditor()},300),a.mimeTypeIcon=function(e){if(e.startsWith("text/"))return"resources";if(e.startsWith("image/"))return"image";if(e.startsWith("audio/"))return"audio";if(e.startsWith("video/"))return"video";if(e.startsWith("application/")){return{"application/pdf":"file","application/zip":"file_zip","application/x-zip-compressed":"file_zip"}[e]||"file"}return"file"}}angular.module("lu").controller("AssignmentPageController",e),e.$inject=["$scope","$luPopover","$controller","$http","Upload","$timeout","$sce","$window","EnrollmentHelper","LupHelper","AssignmentAnswerFactory","AssignmentAnswerUploadFactory","s3HelperFactory","LupJobFactory","LuaFactory"]}(),function(){"use strict";function e(t,e,n,o){this.lupHelper=o,this.answerOption=e,this.availableAnswers=n,this.save=function(e){t.close({chosen_answer:e})},this.cancel=function(){t.close()}}window.angular.module("lu").controller("AvailableMatchAnswersController",e),e.$inject=["$modalInstance","answerOption","availableAnswers","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){e.answer=n,e.LupHelper=i,e.show_feedback=r,e.show_correct_answers=a,e.close=function(){t.close()},o==i.questionTypes.order_list?n.id===n.correct_id?e.answer.correctness=i.showMessage("lup.components.answer_on_the_correct_position"):e.answer.correctness=i.showMessage("lup.components.answer_should_be_on_the_position",{position:n.correct_sequence+1}):o==i.questionTypes.match_list?n.for_matching_id===n.answer_id?e.answer.correctness=i.showMessage("lup.components.this_is_correct_answer"):e.answer.correctness=i.showMessage("lup.components.correct_answer_is",{correct:n.correct_answer}):e.show_correct_answers=!1,o==i.questionTypes.fill_the_blanks&&(e.answer={},e.answer.feedback=n)}window.angular.module("lu").controller("EnrollmentsShowModalFeedbackController",e),e.$inject=["$scope","$modalInstance","answer","question_type_id","show_feedback","show_correct_answers","LupHelper"]}(),window.angular.module("lu").controller("EnrollmentsChooseSessionController",["$scope","paramsService","StorageFactory","LupHelper","EnrollmentHelper","$luPopover","UsersFactory","EnrollmentFactory","$modal","$rootScope",function(r,a,e,i,t,s,l,n,c,o){var e=e.get(),u=new n;r.EnrollmentHelper=t,r.helper=i,r.successEnrollment=!1,r.enrollment=e.enrollment.attributes,r.enrollment_components=[],e.enrollment_components&&(r.enrollment_components=e.enrollment_components.data),r.chosenSessions=[],r.choosing_for_learner=e.choosing_for_learner,r.showAvailableSeats=function(e){var t=e.max_capacity-e.number_enrolled_on_session;return 0<t?i.showMessage("lup.courses.seats",{seats:t}):1==e.enable_waitlist?i.showMessage("lup.courses.waitlist_open"):i.showMessage("lup.courses.full")},r.showSessionDetails=function(t){var n=new l,e={};e.params=a.get(),e.params.learnerView=!0,e.params.cal_type_id=i.groupMembershipTypes.member;var o=!0;r.choosing_for_learner&&(o=!1),n.getDetailsForSession(null,t.id,e,!1).then(function(){var e=n.data;c.open({templateUrl:"/tc/users/show_session_details.html",controller:"UsersShowSessionDetailsController",size:"lg",resolve:{event:function(){return e.session_details.attributes},instructor:function(){return e.instructor},has_enrollment:function(){return!0},show_view_course:function(){return o},showingOnPage:function(){return"enrollments-choose-session"},status:function(){return t.description},num_on_waitlist:function(){return null},waitlist_count:function(){return e.waitlist_count},course_enable_waitlist:function(){return e.course_enable_waitlist},course_waitlist_type:function(){return e.course_waitlist_type},course_settings:function(){return null},settingMinimalThresholdForMsTeamsEnabled:function(){return e.setting_minimal_threshold_for_ms_teams_enabled},forceHideViewCourse:function(){return!1},showCloseBtn:function(){return!1},sessionCourses:function(){return[]},showVisitSessionBtn:function(){return!1}}})})},r.enrollOnSessions=function(){0<r.chosenSessions.length&&s.confirm(i.showMessage("lup.confirm"),i.showMessage("ilts.are_you_sure_you_want_to_enroll_in_these_sessions")).then(function(e){u.enrollOnSessions(r.enrollment.id,r.chosenSessions,r.choosing_for_learner).then(function(){u.data.success&&(r.successEnrollment=!0)})})},r.chooseSession=function(t,e){if(!e&&t.max_capacity<=t.number_enrolled_on_session&&1==t.enable_waitlist)s.confirm(i.showMessage("lup.confirm"),i.showMessage("ilts.are_you_sure_you_want_to_enroll_in_this_session_you_will_be_put_on_the_waitlist")).then(function(e){r.chooseSession(t,!0)});else{var n=0;if(t.selected){for(var o=[],n=0;n<r.chosenSessions.length;n++)r.chosenSessions[n]!=t.id&&o.push(r.chosenSessions[n]);r.chosenSessions=o}else if(r.enrollment.cr_must_choose_session===i.ilt_sessions.must_choose_one){for(n=0;n<r.enrollment_components.length;n++)r.enrollment_components[n].selected=!1;r.chosenSessions=[t.id]}else r.enrollment.cr_must_choose_session===i.ilt_sessions.can_choose_more_than_one&&r.chosenSessions.push(t.id);t.selected=!t.selected}},r.messagingEnabled=function(){return 1!==r.enrollment.disable_message_author&&!o.disable_messaging&&r.enrollment.portal_id===o.current_portal_id}}]),window.angular.module("lu").controller("EnrollmentsContentController",["$window","$scope","$rootScope","StorageFactory","$sce","EnrollmentHelper","$luPopover","$filter","$sanitize","LupHelper","$timeout","$modal","$http","ComponentService",function(t,i,e,n,o,r,a,s,l,c,u,d,p,_){n=n.get();i.EnrollmentHelper=r,i.review=null,n.review&&(i.review=n.review.attributes),i.course_settings=n.course_settings,i.can_mark_complete=n.can_mark_complete,i.can_self_unenroll=n.can_self_unenroll,i.can_change_session=n.can_change_session,i.showDetails=!0,i.LupHelper=c,i.sidebarNav=1,t.luPopover=a,i.enrollment=n.enrollment.attributes,i.enrollment_components=n.enrollment_components.data,i.timezone=n.timezone,i.courseProgressionUiRedesign=n.course_progression_ui_redesign,i.rateMyCourse=function(e){r.showLeaveReviewDialog(i.enrollment,i.review,null,i.courseProgressionUiRedesign)},i.reloadAfterReview=function(){window.location.reload()},t.reloadAfterReview=i.reloadAfterReview,t.scormOrTinCanExitDetected=r.scormOrTinCanExitDetected,i.canMarkCompleted=function(e){return i.can_mark_complete&&e.component_type_id<c.componentTypes.assignment&&(e.enrollment_component_status_id==c.enrollmentStatuses.failed||e.enrollment_component_status_id<c.enrollmentStatuses.completed)},i.changeTab=function(e){i.sidebarNav=e.id},i.markComplete=function(e){d.open({templateUrl:"/tc/courses/mark-enrollment-component-complete.html",controller:"MarkEnrollmentComponentCompleteController",size:"md",resolve:{enrollment_component:function(){return e},user_label:function(){return c.displayName(e)},module_label:function(){return e.title},markCompleteData:function(){return p.get("/markcompletes/new_ec.json",{params:{ecid:e.id}})}}}).result.then(function(e){t.location.reload()})},i.messagingEnabled=r.messagingEnabled(i.enrollment),i.ariaLabel=c.showMessage("lup.courses.course_content"),i.ariaLabelSide=c.showMessage("lup.courses.course_details"),i.unenrollMe=function(){r.unenrollMe(i.can_self_unenroll,i.enrollment)},i.navTabs=[],i.navTabs.push({id:1,icon:"fa-book",ariaLabel:c.showMessage("lup.a11y.details_tab")}),i.navTabs.push({id:2,icon:"fa-info-circle",ariaLabel:c.showMessage("lup.a11y.info_tab")}),i.messagingEnabled&&i.navTabs.push({id:3,icon:"fa-envelope",ariaLabel:c.showMessage("lup.a11y.message_tab")}),i.loadPage=function(e,t){if(!r.launchPermitted(i.enrollment))return a.notify("",c.showMessage("course_access.access_denied_error_closed")),!1;if(!r.moduleReleased(e)){var n=s("displayDateTime")(e.release_at,"dddd, MMMM Do YYYY, @ h:mm a");return a.notify("",I18n.t("courses.this_module_will_be_released",{time:n})),!1}if(0<t&&r.sequenceBlocked(i.enrollment,e,i.enrollment_components))return a.notify("",I18n.t("courses.course_is_sequenced_html")),!1;window.document.location="/enrollments/"+i.enrollment.id+"/page/"+e.id},i.allowChangeSession=function(e,t,n,o,r){var a=o==c.enrollment_statuses.waitlisted;return(new Date(e).getTime()>Date.now()||a&&i.can_change_session)&&t==c.componentTypes.session&&(n==c.ilt_sessions.must_choose_one||n==c.ilt_sessions.can_choose_more_than_one)&&(o==c.enrollment_statuses.not_started||a)&&!!r},e.$on("launchTheCourse",function(){r.launchCourse(i.enrollment)})}]),window.angular.module("lu").controller("EnrollmentsCreditsController",["$window","$scope","$rootScope","StorageFactory","$sce","EnrollmentHelper","$luPopover","$filter","$sanitize","LupHelper","LupJobFactory",function(e,n,t,o,r,a,i,s,l,c,u){o=o.get();n.enrollment=o.enrollment.attributes,n.can_self_unenroll=o.can_self_unenroll,n.certificate=o.certificate,n.review=null,o.review&&(n.review=o.review.attributes),n.showDetails=!0,n.credits=o.credits.data,n.earned_credits=o.earned_credits.data,n.EnrollmentHelper=a,n.LupHelper=c,n.sidebarNav=1,n.changeTab=function(e){n.sidebarNav=e.id},n.messagingEnabled=a.messagingEnabled(n.enrollment),n.courseProgressionUiRedesign=o.course_progression_ui_redesign,n.unenrollMe=function(){a.unenrollMe(n.can_self_unenroll,n.enrollment)},n.rateMyCourse=function(e){a.showLeaveReviewDialog(n.enrollment,n.review,null,n.courseProgressionUiRedesign)},n.reloadAfterReview=function(){window.location.reload()},e.reloadAfterReview=n.reloadAfterReview,e.scormOrTinCanExitDetected=a.scormOrTinCanExitDetected,n.navTabs=[],n.navTabs.push({id:1,icon:"fa-book",ariaLabel:c.showMessage("lup.a11y.details_tab")}),n.navTabs.push({id:2,icon:"fa-info-circle",ariaLabel:c.showMessage("lup.a11y.info_tab")}),n.messagingEnabled&&n.navTabs.push({id:3,icon:"fa-envelope",ariaLabel:c.showMessage("lup.a11y.message_tab")}),n.downloadCertificate=function(){var e=new u,t={typeId:c.lupJobTypes.downloadCertificate,enrollment_id:n.enrollment.id,for_course:!0};e.initiateJob(t)},t.$on("launchTheCourse",function(){a.launchCourse(n.enrollment)})}]),window.angular.module("lu").controller("EnrollmentsDescriptionController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$sce","$window","EnrollmentHelper","$filter","EnrollmentComponentFactory","EnrollmentFactory","EnrollmentComponentElementFactory","$luPopover","$sanitize","LupJobFactory","spinnerService","SocialSharingFactory","$location","$modal","BadgesFactory","notifyFactory","LuaFactory",function(n,e,t,o,r,a,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y){var o=o.get(),M=(new u,new c);new d,new g;i.luPopover=p,i.spinnerService=f,n.EnrollmentHelper=s,n.helper=r,n.enrollment=o.enrollment.attributes,n.showNavigation=!0,n.is_preview=!1,n.on_description_page=o.on_description_page,n.component_list=[],n.courseImages=o.course_images,n.courseImagePlaceholder=CONFIG.cdnPath+"images/blank-state/no-course-img.png",n.wasBelowTabletWidth=i.innerWidth<=840;function S(){n.$apply(function(){var e=angular.element(document.getElementById("drawer-toggle"));n.windowWidth=i.innerWidth,n.windowWidth<=840&&!n.wasBelowTabletWidth?(e[0].checked=!0,n.wasBelowTabletWidth=!0):840<n.windowWidth&&n.wasBelowTabletWidth&&(e[0].checked=!1,n.wasBelowTabletWidth=!1)})}angular.element(i).on("resize",S),n.$on("$destroy",function(){angular.element(i).off("resize",S)}),n.enrollment_components=[],o.enrollment_components&&(n.enrollment_components=o.enrollment_components.data),n.enrollment_component=o.enrollment_component,n.enrollment_component&&n.enrollment_component.attributes&&(n.enrollment_component=n.enrollment_component.attributes),n.showProgressBar=function(){return 0<n.enrollment_components.length},n.refreshProgressBar=function(e){n.enrollment=e},i.refreshProgressBar=n.refreshProgressBar,n.loadPage=function(e,t){return M.show_course_completion_button=!1,M.show_sign_button_immediately=!1,s.moduleReleased(e)?0<t&&!n.tracking_complete&&!n.is_previous_exam_passed&&s.sequenceBlocked(n.enrollment,e,n.enrollment_components)?p.notify("",I18n.t("courses.course_is_sequenced_html")):i.location.href="/enrollments/"+n.enrollment.id+"/page/"+e.id:(e=l("displayDateTime")(e.release_at,"dddd, MMMM Do YYYY, @ h:mm a"),p.notify("",I18n.t("courses.this_module_will_be_released",{time:e}))),!1},y.setup({scope:n}),y.addLuaCoursePlayerEventListeners()}]),window.angular.module("lu").controller("EnrollmentsDetailsController",["$window","$rootScope","$scope","StorageFactory","$sce","EnrollmentHelper","$sanitize","LupHelper","$luPopover","LupJobFactory",function(e,n,t,o,r,a,i,s,l,c){o=o.get();n.enrollment=o.enrollment.attributes,n.can_self_unenroll=o.can_self_unenroll,n.enrollment_images=o.enrollment_images.data,n.certificate=o.certificate,n.review=null,o.review&&(n.review=o.review.attributes),o.completion_badges&&(n.completion_badges=o.completion_badges.data),o.percentage_badges&&(n.percentage_badges=o.percentage_badges.data,n.selected_badge=0),n.EnrollmentHelper=a,n.LupHelper=s,n.LupJobFactory=c,n.showDetails=!0,n.credits=o.credits.data,n.earned_credits=o.earned_credits.data,n.sidebarNav=1,n.changeTab=function(e){n.sidebarNav=e.id},n.messagingEnabled=a.messagingEnabled(n.enrollment),n.unenrollMe=function(){a.unenrollMe(n.can_self_unenroll,n.enrollment)},n.ariaLabel=s.showMessage("lup.courses.course_description"),n.ariaLabelSide=s.showMessage("lup.courses.course_details"),n.navTabs=[],n.navTabs.push({id:1,icon:"fa-book",ariaLabel:s.showMessage("lup.a11y.details_tab")}),n.navTabs.push({id:2,icon:"fa-info-circle",ariaLabel:s.showMessage("lup.a11y.info_tab")}),n.courseProgressionUiRedesign=o.course_progression_ui_redesign,n.downloadCertificate=function(){var e=new c,t={typeId:s.lupJobTypes.downloadCertificate,enrollment_id:n.enrollment.id,for_course:!0};e.initiateJob(t)},n.messagingEnabled&&n.navTabs.push({id:3,icon:"fa-envelope",ariaLabel:s.showMessage("lup.a11y.message_tab")}),n.reloadAfterReview=function(){window.location.reload()},e.reloadAfterReview=n.reloadAfterReview,e.luPopover=l,n.scormOrTinCanExitDetected=function(e){a.scormOrTinCanExitDetected(e)},e.showScormOrTinCanFinishPopup=function(e,t,n){a.showScormOrTinCanFinishPopup(e,t,n)},e.scormOrTinCanExitDetected=n.scormOrTinCanExitDetected,n.rateMyCourse=function(e){a.showLeaveReviewDialog(n.enrollment,n.review,null,n.courseProgressionUiRedesign)},t.$on("launchTheCourse",function(){a.launchCourse(n.enrollment)}),n.selectBadge=function(e){n.selected_badge=e}}]),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,o=o.get(),c=new r;l.lupHelper=n,l.createNewPost=function(){l.forum_topic.id?i.location="/forums/my_contribution/new_post?topic_id="+l.forum_topic.id+"&object_id="+l.enrollment.id+"&type_id="+n.forums.posts.creation_type.enrollment:i.location="/forums/my_contribution/new_post"},l.enrollment=o.enrollment.attributes,l.forum_topic=o.forum_topic.attributes,l.allow_posting=l.forum_topic.allow_posting,l.exposedFunction={},l.currentUrl=s.absUrl(),l.post_cover_reference=o.post_cover_reference,l.post_cover_reference&&$timeout(function(){return LupService.pingForProgress(l.post_cover_reference,l.posts.meta.prev_page,l.force_refresh,l.exposedFunction.fetch,!0)},500),l.filterParams={show_topics_filter_typeahead:!1,show_courses_filter_typeahead:!1,show_lp_filter_typeahead:!1,is_admin:!1},l.orderTypes=[{label:l.lupHelper.showMessage("lup.forums.post_sort.latest_first"),value:"created_at.DESC",class:"select--ico-latest-first"},{label:l.lupHelper.showMessage("lup.forums.post_sort.oldest_first"),value:"created_at.ASC",class:"select--ico-oldest-first"},{label:l.lupHelper.showMessage("lup.forums.post_sort.most_likes"),value:"likes_count.DESC",class:"select--ico-most-popular"}],l.viewType=n.forums.card_types.grid,l.filterController="ForumsPostsFilterController as vm",l.filterTemplate="/tc/forums/posts-filter.html",l.filterURL="/forums/topic/"+l.forum_topic.id+".json",c.getPostsForTopic(l.forum_topic.id,{}).then(function(){c.data&&c.meta?l.posts=c:l.posts=[]}),i.scormOrTinCanExitDetected=a.scormOrTinCanExitDetected,t.$on("launchTheCourse",function(){a.launchCourse(l.enrollment,!0)})}window.angular.module("lu").controller("EnrollmentsForumsController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","ForumPostsFactory","EnrollmentHelper","$window","$location"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d){var p=this;p.lupHelper=n,p.forumService=d;new l;var o=o.get(),_=new u;function m(e){p.post=e}function f(){d.switchButtons("createPost",!0),d.switchButtons("editPost",p.is_admin||p.is_moderator||p.is_creator&&p.post.status_code!=p.lupHelper.forums.posts.status_code.archived),d.switchButtons("disableCommenting",(p.is_admin||p.is_moderator)&&p.post.allow_commenting),d.switchButtons("enableCommenting",(p.is_admin||p.is_moderator)&&!p.post.allow_commenting),d.switchButtons("archivePost",(p.is_admin||p.is_moderator)&&p.post.status_code!=p.lupHelper.forums.posts.status_code.archived),d.switchButtons("unarchivePost",(p.is_admin||p.is_moderator)&&p.post.status_code==p.lupHelper.forums.posts.status_code.archived),d.switchButtons("deletePost",p.is_admin||p.is_moderator||p.is_creator)}function g(){a.toggleCommenting(p.post.title,p.post.allow_commenting,p.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),p.post.allow_commenting=e.allow_commenting),f()})}function h(){a.toggleArchiving(p.post.title,p.post.status_code,p.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),p.post.status_code=e.status_code),f()})}p.post=o.post.attributes,p.enrollment=o.enrollment.attributes,p.forum_topic=o.forum_topic.attributes,p.is_admin=o.is_admin,p.is_moderator=o.is_moderator,p.currentUserPmId=o.current_user_pm_id,p.post_cover_reference=o.post_cover_reference,p.post_cover_reference&&p.forumService.pingForProgress(p.post_cover_reference,p.post.id,m),p.is_creator=o.is_creator,p.comments=o.comments,p.isLiked=p.post.is_liked,p.newLike=!1,p.likingAllowed=!0,p.likePost=function(){p.likingAllowed&&(p.likingAllowed=!1,p.isLiked&&0<p.post.likes_count?p.post.likes_count=p.post.likes_count-1:0<=p.post.likes_count&&(p.post.likes_count=p.post.likes_count+1),p.isLiked=!p.isLiked,p.newLike=p.isLiked,_.likePost(p.post.id).finally(function(){p.likingAllowed=!0}))},f(),n.contains(s.location.href,"comments")&&c(function(){document.getElementById("comments").scrollIntoView({behavior:"smooth"})}),t.$on("disableCommenting",function(){g()}),t.$on("enableCommenting",function(){g()}),t.$on("editPost",function(){a.editPost(p.post.id,p.enrollment.id,n.forums.posts.creation_type.enrollment,p.is_creator)}),t.$on("archivePost",function(){h()}),t.$on("unarchivePost",function(){h()}),t.$on("deletePost",function(){p.is_admin||p.is_moderator||!(0<p.post.likes_count||0<p.post.comments_count)?a.deletePost(p.post.title,p.post.id,"/forums/all_posts/"):i.notify("",p.lupHelper.showMessage("lup.forums.forum_post.deletion_restricted"))}),t.$on("createPost",function(){s.location="/forums/my_contribution/new_post?topic_id="+p.forum_topic.id+"&object_id="+p.enrollment.id+"&type_id="+n.forums.posts.creation_type.enrollment})}window.angular.module("lu").controller("EnrollmentsForumsPostShowController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","$filter","ForumPostShowActionFactory","$luPopover","$window","learnUponApi","$timeout","ForumPostsFactory","ForumService"]}(),window.angular.module("lu").controller("EnrollmentsLpDetailsController",["$scope","$rootScope","StorageFactory","$sce","EnrollmentHelper","$luPopover","$filter","$sanitize","LupHelper","$window","LearningPathFactory","learnUponLearningPath","LupJobFactory",function(e,t,n,o,r,a,i,s,l,c,u,d,p){n=n.get();e.EnrollmentHelper=r,e.LupHelper=l,e.showDetails=!0,e.enrollment=n.enrollment.attributes,e.courses=n.courses.data,t.breadcrumbs=[{title:l.showMessage("lup.breadcrumbs.users.index"),url:"/users/"},{title:l.displayName(e.enrollment),url:"/users/"+e.enrollment.user_id+"/enrollments?filter_by=3"},{title:l.showMessage("lup.breadcrumbs.courses.content"),url:"/users/"+e.enrollment.user_id+"/enrollments/"+e.enrollment.id+"/lp-details"}]}]),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d){var p=this,m=new a,f=new s;function g(e,t){!angular.isUndefined(t)&&!1!==t||(p.selected.enrollment_items=[]),"learning_path"===(p.selectType=e)?(p.overrideDueDate=!1,p.loadEnrollmentsFn=p.fetchLearningPathsApi):"course"===e?(p.loadEnrollmentsFn=p.fetchCoursesApi,p.overrideDueDate=!1):"learning_journey"===e&&(p.loadEnrollmentsFn=p.fetchLearningJourneysApi,h("group",!0)),"course"===(t=e)?p.enrollmentsPlaceholder=p.helper.showMessage("lup.enrollments.search_courses_placeholder"):"learning_path"===t?p.enrollmentsPlaceholder=p.helper.showMessage("lup.enrollments.search_learning_paths_placeholder"):"learning_journey"===t&&(p.enrollmentsPlaceholder=p.helper.showMessage("lup.enrollments.search_learning_journeys_placeholder")),"learning_path"===(e=e)?p.resultItemUrl="/tc/enrollments/learning-paths-result-item-template.html":"course"===e?p.resultItemUrl="/tc/enrollments/courses-result-item-template.html":"learning_journey"===e&&(p.resultItemUrl="/tc/enrollments/learning-journeys-result-item-template.html")}function h(e,t){!angular.isUndefined(t)&&!1!==t||(p.selected.enrollees=[]),"group"===e?(p.displayGroupSearch=!0,p.enrolleesTrackerFn=void 0,p.loadEnrolleesFn=p.fetchGroupsApi,w("group"),p.sendOnSearchFn=void 0):"user"===e&&(p.overrideDueDate=!1,p.displayGroupSearch=!1,p.enrolleesTrackerFn=v,p.loadEnrolleesFn=p.fetchUsersApi,w("user"),p.sendOnSearchFn=b)}function b(e){var t=_.select(e,function(e){return!e.invite_id}),e=_.select(e,function(e){return!!e.invite_id}),t=_.map(t,function(e){return e.id}),e=_.map(e,function(e){return"p"+e.invite_id});return t.concat(e)}function v(e,t,n){return e.user_id}function w(e){"group"===e?p.enrolleesPlaceholder=p.helper.showMessage("lup.enrollments.search_groups_placeholder"):"user"===e&&(p.enrolleesPlaceholder=p.helper.showMessage("lup.enrollments.search_users_placeholder"))}p.helper=n,p.suggestionsArr=[],p.selected=t.getKey("selected"),p.config=t.getKey("config"),p.enrollment_items=[],p.enrollees=[],p.is_admin=t.getKey("is_admin"),p.isManager=t.getKey("is_manager"),p.clearFilter=!0,p.isInitView=!1,p.enrollments=[],p.processingProgress=0,p.cancel=function(e){p.enrollments_form.$setPristine(),p.selected=t.getKey("selected"),g(p.selectType,!0),h(p.displayGroupSearch?"group":"user",!0)},p.enroll=function(e){{var t;p.enrollments=function(){var n=[],e=!!p.selected.enrollment_items.length,t=!!p.selected.enrollees.length;e&&t&&_.forEach(p.selected.enrollees,function(t){_.forEach(p.selected.enrollment_items,function(e){n.push(function(e,t){var n={};"course"==e.type?n.course_id=e.id:"learning_path"==e.type?n.learning_path_id=e.id:"learning_journey"==e.type&&(n.external_workflow_id=e.external_workflow_id);n.pending=!1,"user"==t.type?(n.user_id=t.user_id,n.pm_id=t.id,n.pending=t.pending):"group"==t.type&&(n.group_id=t.id);return n}(e,t))})});return n}(),p.enrollments.length&&(t={enrollment_form:{re_enroll_completed:p.reEnrollCompleted,enrollments:p.enrollments}},p.overrideDueDate&&p.dueDate&&(t.enrollment_form.due_date=p.dueDate),p.overrideDueDate&&p.dueDays&&(t.enrollment_form.due_days=p.dueDays),e.$setPristine(),m.create(t).then(function(e){p.jobResponse=null,p.jobTitle="",p.jobErrors=[],p.enrollments=[],p.selected={enrollment_items:[],enrollees:[]},g(p.selectType,!0),h(p.displayGroupSearch?"group":"user",!0),e.data.delayed&&(e=e.data.delayed.job_reference,p.processingProgress=0,p.processingEnrollments=!0,f.pingForProgress(e,function(e){p.processingProgress=e},function(e){p.processingEnrollments=!1,p.jobTitle=e.flash_msg,p.jobErrors=JSON.parse(e.job_errors),(p.jobResponse=e).has_errors||c.onSuccess({success:e.flash_msg})}))}))}},p.enrollmentItemPlaceholder=p.helper.showMessage("lup.enrollments.search_courses_placeholder"),p.enrolleesPlaceholder=p.helper.showMessage("lup.enrollments.search_users_placeholder"),p.resultItemUrl="",p.displayMembershipCount=function(e){var t="";e&&(t=1===e?String(e)+" "+n.showMessage("user.one"):String(e)+" "+n.showMessage("user.other"));return t},e.ariaLabel=n.showMessage("lup.a11y.enrollments_main"),e.ariaLabelSide=n.showMessage("lup.a11y.enrollments_aside"),p.fetchCoursesApi=function(e){var t=d.defer(),n="",o=p.helper.urlParam("course_id");p.clearFilter&&o&&p.isInitView&&(e.$selected=e.$selected.filter(function(e){return e!==parseInt(o)}),p.isInitView=!1);try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){$log.debug("fetchCoursesApi: Unable to convert selected courses to string!"),n=""}return r.get("/all_courses.json",{params:{search:e.$query,for_enrollment:!0,page:e.$page,includeallversions:0,include_draft:0,except:n}}).success(function(e){e=e.courses.data,e=_.map(e,function(e){return e.firstLineDisplay=angular.isDefined(e.name)?e.name:"",e.secondLineDisplay=angular.isDefined(e)?p.helper.showMessage("courses.version")+" "+e.version:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get courses")}),t.promise},p.fetchLearningPathsApi=function(e){var t=d.defer(),n="",o=p.helper.urlParam("learning_path_id");p.clearFilter&&o&&p.isInitView&&(e.$selected=e.$selected.filter(function(e){return e!==parseInt(o)}),p.isInitView=!1);try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){$log.debug("fetchLearningPathsApi: Unable to convert selected learning paths to string!"),n=""}return r.get("/learning_paths.json",{params:{search:e.$query,published:!0,page:e.$page,except:n}}).success(function(e){e=e.learning_paths.data,e=_.map(e,function(e){return e.firstLineDisplay=angular.isDefined(e.name)?e.name:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get learning paths")}),t.promise},p.fetchLearningJourneysApi=function(e){var t=d.defer(),n="",o=p.helper.urlParam("external_workflow_id");p.clearFilter&&o&&p.isInitView&&(e.$selected=e.$selected.filter(function(e){return e!==parseInt(o)}),p.isInitView=!1);try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){$log.debug("fetchLearningJourneysApi: Unable to convert selected learning journeys to string!"),n=""}return r.get("/angie/learning-journeys/dashboard.json",{params:{search:e.$query,status:"published",page:e.$page,except:n}}).success(function(e){e=e.data,e=_.map(e,function(e){return e.id=e.external_workflow_id,e.firstLineDisplay=angular.isDefined(e.name)?e.name:"",e.secondLineDisplay=angular.isDefined(e)?p.helper.showMessage("courses.version")+" "+e.external_version_id:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get learning journeys")}),t.promise},p.fetchGroupsApi=function(e){var t=d.defer(),n="",o=p.helper.urlParam("group_id");p.clearFilter&&o&&p.isInitView&&(e.$selected=e.$selected.filter(function(e){return e!==parseInt(o)}),p.isInitView=!1);try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){$log.debug("fetchGroupsApi: Unable to convert selected groups to string!"),n=""}return r.get("/groups.json",{params:{search:e.$query,for_enrollments:!0,page:e.$page,except:n}}).success(function(e){e=e.groups.data,e=angular.isUndefined(e)?[]:_.map(e,function(e){return e.firstLineDisplay=angular.isDefined(e.title)?e.title:"",e.secondLineDisplay=angular.isDefined(e.member_count)?p.displayMembershipCount(e.member_count):"",e});t.resolve(e)}).error(function(){t.reject("Failed to get groups")}),t.promise},p.fetchUsersApi=function(e){var t=d.defer(),n="",o=p.helper.urlParam("user_id");p.clearFilter&&o&&p.isInitView&&(e.$selected=e.$selected.filter(function(e){return e!==parseInt(o)}),p.isInitView=!1);try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){$log.debug("fetchUsersApi: Unable to convert selected users to string!"),n=""}return r.get("/all_users.json",{params:{search:e.$query,include_pending:!0,exclude_disabled:!0,include_top_admins:!0,page:e.$page,except:n}}).success(function(e){e=e.users.data,e=_.map(e,function(e){return(e=new l(e)).pending?(e.display_name=p.helper.showMessage("lup.enrollments.selected_pending_user",{email:e.email}),e.user_id=e.invite_id):e.user_id=e.user_id,e.pending=!!e.pending,e.firstLineDisplay=angular.isDefined(e.display_name)?e.display_name:"",e.secondLineDisplay=angular.isDefined(e.email)?e.email:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get users")}),t.promise},p.compareItemsById=function(e,t){return!!(angular.isDefined(e)&&angular.isDefined(e.id)&&angular.isDefined(t)&&angular.isDefined(t.id))&&e.id==t.id},p.compareEnrolleesItems=function(e,t){return p.displayGroupSearch?!!(angular.isDefined(e)&&angular.isDefined(e.id)&&angular.isDefined(t)&&angular.isDefined(t.id))&&e.id==t.id:!!(angular.isDefined(e)&&angular.isDefined(e.user_id)&&angular.isDefined(t)&&angular.isDefined(t.user_id))&&e.user_id==t.user_id},p.enrolleesTrackerFn=void 0,p.sendOnSearchFn=void 0,function(){p.learningPathsEnabled=p.config.display_learning_paths,p.learningJourneysEnabled=p.config.display_learning_journeys,p.groupsEnabled=p.config.display_groups,p.learningPathsEnabled?(p.enrollmentItemHeading=p.helper.showMessage("lup.enrollments.select_courses_learning_paths"),p.enrollmentItemBlurb=p.helper.showMessage("lup.enrollments.select_courses_learning_paths_blurb")):(p.enrollmentItemHeading=p.helper.showMessage("lup.enrollments.select_courses"),p.enrollmentItemBlurb=p.helper.showMessage("lup.enrollments.select_courses_blurb"));p.groupsEnabled?(p.enrolleeHeading=p.helper.showMessage("lup.enrollments.select_users_groups"),p.enrolleeBlurb=p.helper.showMessage("lup.enrollments.select_users_groups_blurb")):(p.enrolleeHeading=p.helper.showMessage("lup.enrollments.select_users"),p.enrolleeBlurb=p.helper.showMessage("lup.enrollments.select_users_blurb"));p.displayGroupSearch=!1,p.selectType="course",t.getKey("set_lp_search")&&(p.selectType="learning_path");p.isInitView=!0,g(p.selectType,!0),h(p.displayGroupSearch?"group":"user",!0)}(),p.setEnrollmentsView=g,p.setEnrolleesView=h,p.afterSelectEnrollmentItem=function(e){e.type=p.selectType,p.enrollments_form.$setDirty()},p.afterSelectEnrolleesItem=function(e){p.displayGroupSearch?e.type="group":e.type="user";p.enrollments_form.$setDirty()}}angular.module("lu").controller("EnrollmentsNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","$http","EnrollmentFactory","$timeout","LupJobFactory","GroupUserVM","notifyFactory","$document","$q"]}(),function(){"use strict";function e(n,o,t,r,a,e,i,s,l,c){var u=this;function d(){var e={};e.params=a.get(),e.course_id=u.enrollment.course_id;var t="/enrollments/"+u.enrollment.id+"/questions.json";e.url=t,u.isLoading=!0,o.getList(e).then(function(e){var t={};t.meta=o.data.questions.meta,u.filter=e.data.filter,t.data=o.data.questions.data,u.questionCounts=e.data.question_counts,u.questions=t,r(function(){u.isLoading=!1},1e3)})}u.isLoading=!1,u.helper=e,u.enrollment=i.getKey("enrollment").attributes,u.questions=i.getKey("questions"),u.questionCounts=i.getKey("question_counts"),u.filter=i.getKey("filter"),u.is_admin=i.getKey("is_admin"),n.mergeSearch=!0,n.ariaLabel=e.showMessage("lup.dashboard.course_questions"),n.ariaLabelSide=e.showMessage("lup.courses.questions.total_number_of_questions"),u.loadData=d,u.openQuestion=function(e){e&&(t.location="/enrollments/:enrollment_id/questions/:id".replace(/:enrollment_id/,u.enrollment.id).replace(/:id/,e.id))},u.filterQuestions=function(e){n.$broadcast("clearListHeaderSearch"),a.set({filter:e}),d()},u.deleteQuestion=function(t){c.confirm(I18n.t("lup.confirm"),I18n.t("lup.courses.questions.are_you_sure_you_want_to_delete_this_question")).then(function(e){o.destroy(t.id).then(function(){a.merge({page:1}),d()})})},u.addQuestion=function(){l.open({templateUrl:"/tc/course_questions/course-questions-add-edit-question.html",controller:"AddEditCourseQuestionController",size:"md",resolve:{course:function(){return u.enrollment},question:function(){return null},formType:function(){return"add"}}}).result.then(function(e){e.action&&"close"!=e.action&&d()})},t.luPopover=c,n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},t.scormOrTinCanExitDetected=s.scormOrTinCanExitDetected,n.$on("launchTheCourse",function(){s.launchCourse(u.enrollment)})}angular.module("lu").controller("EnrollmentsQuestionsController",e),e.$inject=["$rootScope","CourseQuestionsFactory","$window","$timeout","paramsService","LupHelper","StorageFactory","EnrollmentHelper","$modal","$luPopover"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=this;function p(){var e={};e.params=r.get(),e.course_id=d.enrollment.course_id,e.question_id=d.question.id,d.isLoading=!0,n.getQuestionDetails(e).then(function(e){d.answers.data=n.data.answers.data,d.answers.meta=n.data.answers.meta,d.question=e.data.question.attributes,d.is_admin=e.data.is_admin,o(function(){d.isLoading=!1},1e3)})}function _(t){d.answers&&t&&angular.forEach(d.answers.data,function(e){t!==e.id?e.selected=!1:e.selected=!0})}d.isLoading=!1,d.helper=a,d.enrollment=i.getKey("enrollment").attributes,d.question=i.getKey("question").attributes,d.answers=i.getKey("answers"),d.is_admin=i.getKey("is_admin"),d.currentUserId=i.getKey("current_user_id"),d.parentPage=i.getKey("parent"),e.breadcrumbs=[],d.loadData=p,d.editQuestion=function(){l.open({templateUrl:"/tc/course_questions/course-questions-add-edit-question.html",controller:"AddEditCourseQuestionController",size:"md",resolve:{course:function(){return d.enrollment},question:function(){return d.question},formType:function(){return"edit"}}}).result.then(function(e){e.action&&"close"!=e.action&&p()})},d.editAnswer=function(e){l.open({templateUrl:"/tc/course_questions/course-questions-add-edit-answer.html",controller:"AddEditCourseQuestionAnswerController",size:"md",resolve:{course:function(){return d.enrollment},question:function(){return d.question},answer:function(){return e},formType:function(){return"edit"}}}).result.then(function(e){e.action&&"close"!=e.action&&p()})},d.addAnswer=function(){l.open({templateUrl:"/tc/course_questions/course-questions-add-edit-answer.html",controller:"AddEditCourseQuestionAnswerController",size:"md",resolve:{course:function(){return d.course},question:function(){return d.question},answer:function(){return c.get("/course_question_answers/new.json",{params:{question_id:d.question.id}})},formType:function(){return"new"}}}).result.then(function(e){e.action&&"close"!=e.action&&p()})},d.selectAnswer=function(n){s.confirm(I18n.t("lup.confirm"),I18n.t("lup.courses.questions.are_you_sure_you_want_to_select_this_answer")).then(function(e){var t=null;angular.forEach(d.answers.data,function(e){e.selected&&(t=e.id)}),_(n.id),c.put("/course_question_answers/select/:id.json".replace(/:id/,n.id),{}).success(function(e){}).error(function(e){_(t)})})},t.scormOrTinCanExitDetected=u.scormOrTinCanExitDetected,e.$on("launchTheCourse",function(){u.launchCourse(d.enrollment)})}angular.module("lu").controller("EnrollmentsQuestionsShowController",e),e.$inject=["$rootScope","$window","CourseQuestionsFactory","$timeout","paramsService","LupHelper","StorageFactory","$luPopover","$modal","$http","EnrollmentHelper"]}(),window.angular.module("lu").controller("EnrollmentsReviewsController",["$window","$scope","$rootScope","StorageFactory","$sce","EnrollmentHelper","$luPopover","$filter","LupHelper",function(e,t,n,o,r,a,i,s,l){o=o.get();t.enrollment=o.enrollment.attributes,t.can_self_unenroll=o.can_self_unenroll,t.reviews=o.reviews,t.review=null,o.review&&(t.review=o.review.attributes),t.EnrollmentHelper=a,t.LupHelper=l,t.showDetails=!0,t.sidebarNav=1,t.changeTab=function(e){t.sidebarNav=e.id},t.messagingEnabled=a.messagingEnabled(t.enrollment),e.luPopover=i,t.ariaLabel=l.showMessage("courses.course_reviews"),t.ariaLabelSide=l.showMessage("lup.courses.course_details"),t.courseProgressionUiRedesign=o.course_progression_ui_redesign,t.unenrollMe=function(){a.unenrollMe(t.can_self_unenroll,t.enrollment)},t.rateMyCourse=function(e){a.showLeaveReviewDialog(t.enrollment,t.review,null,t.courseProgressionUiRedesign)},t.reloadAfterReview=function(){window.location.reload()},e.reloadAfterReview=t.reloadAfterReview,e.scormOrTinCanExitDetected=a.scormOrTinCanExitDetected,t.navTabs=[],t.navTabs.push({id:1,icon:"fa-book",ariaLabel:l.showMessage("lup.a11y.details_tab")}),t.navTabs.push({id:2,icon:"fa-info-circle",ariaLabel:l.showMessage("lup.a11y.info_tab")}),t.messagingEnabled&&t.navTabs.push({id:3,icon:"fa-envelope",ariaLabel:l.showMessage("lup.a11y.message_tab")}),t.showName=function(e){return e.is_anonymous?l.showMessage("reviews.anonymous"):e.display_name&&0!==e.display_name.length?e.display_name:"-"},n.$on("launchTheCourse",function(){a.launchCourse(t.enrollment)})}]),window.angular.module("lu").controller("EnrollmentsShowChangeSessionController",["$scope","$rootScope","StorageFactory","LupHelper","EnrollmentHelper","$modal","learnUponApi","$q","$window","$luPopover",function(n,e,t,o,r,a,i,s,l,c){n.LupHelper=o;var t=t.get(),u=t.enrollment_id,d=t.session_id,p=!1,_=!1,m=new i,f=t.is_multy_ilt_session;n.sessions=t.sessions.data||[];var g=n.sessions.length;n.EnrollmentHelper=r,n.isMultyIltSession=f,n.sellectSessionMulti=function(e){if(1==g)return;_=!1,p=!0,e.already_enrolled=!e.already_enrolled},n.sellectSessionSingle=function(e){e.already_enrolled=!0,p=!0,_=!1,function(t){angular.forEach(n.sessions,function(e){e.id!=t&&(e.already_enrolled=!1)})}(e.id)},n.cancel=function(){l.location="/enrollments/"+u+"/content"},n.save=function(){if(_)return;_=!0;var o={};if(o.component_list=function(){var t=[];return angular.forEach(n.sessions,function(e){1==e.already_enrolled&&t.push(e.id)}),t}(),0==o.component_list.length)return _=!1,void c.notify("",I18n.t("lup.courses.change_session_info_message"));var e=f?I18n.t("lup.courses.change_session_popup_multi_text"):I18n.t("lup.courses.change_session_popup_single_text"),t=f?I18n.t("lup.courses.change_session_popup_multi_title"):I18n.t("lup.courses.change_session_popup_single_title");c.confirm(t,e).then(function(e){var t,n;t={url:"/enrollments/"+u+"/change_session/"+d+".json",data:t=o,hideSpinner:!1},n=s.defer(),m.post(null,t,null).then(function(){n.resolve(m.data)}),n.promise.then(function(e){e.error||(l.location="/enrollments/"+u+"/content")})},function(e){_=!1})},n.isDirty=function(){return p},n.noResourcesToChange=1==n.sessions.length&&n.sessions[0].already_enrolled,n.timezone=t.timezone}]),window.angular.module("lu").controller("EnrollmentsShowController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$sce","$window","EnrollmentHelper","$filter","EnrollmentComponentFactory","EnrollmentFactory","EnrollmentComponentElementFactory","$luPopover","$sanitize","LupJobFactory","spinnerService","SocialSharingFactory","$location","$modal","BadgesFactory","notifyFactory","$q","LuaFactory",function(a,n,e,t,i,o,s,r,l,c,u,d,p,m,f,g,h,b,v,w,y,M,S){var C,t=t.get(),A=new u,L=new c,$=new d,T=new h,h=new f;s.luPopover=p,s.spinnerService=g,a.course_settings=t.course_settings,a.EnrollmentHelper=r,a.helper=i,a.enrollment=t.enrollment.attributes,a.show_leave_review=t.show_leave_review,a.was_just_completed=t.was_just_completed,a.showNavigation=!0,a.showCompletionButton=!1,a.social_sharing=t.social_sharing?t.social_sharing.attributes:null,a.is_preview=!1,a.next_course_on_path=t.next_course_on_path_id,a.next_enrollment_l2d=0,a.fetchNextEnrollmentL2D=function(e){var t=M.defer();e?n.get("/enrollments/launch_to_description.json",{params:{next_enrollment_id:e}}).success(function(e){a.next_enrollment_l2d=e,t.resolve(e)}).error(function(){t.reject("Failed to get data")}):t.reject("Failed to get data");return t.promise},a.lp_completed=t.lp_completed,a.awarded_badges=t.awarded_badges,a.badges_for_notification=t.badges_for_notification,a.certificate_id=t.cert_awarded,a.certificate_type=t.cert_awarded_type,a.noCertOrNextCourse=function(){var e=!1;a.next_course_on_path||a.certificate_id||a.enrollment.certification_id||(e=!0);return e},a.showCertOrNextCourse=function(){var e="";a.certificate_id&&a.certificate_type?e="lpCert":a.enrollment.certification_id&&(e="enrollmentCert");return e},a.numberOfAwardedBadges=function(){var e=0;a.awarded_badges&&a.awarded_badges.data&&(e=a.awarded_badges.data.length);return e},a.showAwardedBadges=function(){v.open({templateUrl:"/tc/badges/awarded_badges_modal.html",controller:"AwardedBadgesController",controllerAs:"vm",size:"lg",windowClass:"badge-modal",resolve:{badges:function(){return a.awarded_badges}}})},a.displayBadgesForNotification=function(){{var t,n;a.badges_for_notification&&(t=[],n=new w,_.each(a.badges_for_notification.data,function(e){t.push(n.formatBadgeDataForToastr(e))}),0<t.length&&y.onBadgeAwarded(t))}},a.on_description_page=t.on_description_page,a.loadedInSalesforce=t.loaded_in_salesforce,a.shouldShowLinkedInButtonWhenSocialSettingsAreEnabled=!0,a.settingMinimalThresholdForMsTeamsEnabled=t.setting_minimal_threshold_for_ms_teams_enabled,a.timezone=t.timezone,a.courseProgressionUiRedesign=t.course_progression_ui_redesign,a.courseImages=t.course_images,a.courseImagePlaceholder=CONFIG.cdnPath+"images/blank-state/no-course-img.png",a.completedBannerIcon=CONFIG.cdnPath+"images/course-progression/completed-course.png",a.failedBannerIcon=CONFIG.cdnPath+"images/course-progression/failed-course.png",a.badgeBannerIcon=CONFIG.cdnPath+"images/course-progression/course-badge.png",a.startBannerIcon=CONFIG.cdnPath+"images/course-progression/start-banner.png",a.embedded_content=t.embedded_content,a.hide_module_sidebar=t.hide_module_sidebar,a.showSidebarContent=!(1==a.embedded_content&&1==a.hide_module_sidebar),a.autoLaunched=0,a.drawerState=840<window.innerWidth,a.toggleOpenDrawer=function(e){var t=angular.element(document.getElementById("drawer-toggle-label"));t[0].classList.contains("drawer-toggle-label--flash-message")&&!e?840<window.innerWidth?t[0].style.top="68px":t[0].style.top="105px":t[0].style.top="12px";a.drawerState=e},a.embedded_content_autoplay=t.embedded_content_autoplay,a.tincan_completion_tracking=t.tincan_completion_tracking,a.rawTimezone=t.raw_timezone,C=t.referrer_page||"/",/^\/(learner-dashboard|catalog|my-learning|dashboard|content-details\/\d+\/(0|1)|enrollments\/\d+\/details)$/.test(C)&&localStorage.setItem("back_to_last_page",C),e.tincan_completion_tracking=a.tincan_completion_tracking,a.concurrentAndSeriesSessions=t.concurrent_and_series_sessions,a.redirectToContentDetails=function(e){e=e.id;document.location.href=a.content_details_redesign_enabled?"/content-details/"+e+"/2":"/enrollments/"+e+"/details"},a.redirectLearnerOnDashboard=function(){if(a.learner_dashboard_enabled)return void(document.location.href="/learner-dashboard");a.is_admin?document.location.href="/dashboard?display=my_courses":document.location.href="/dashboard"},a.learner_dashboard_enabled=t.learner_dashboard_enabled,a.content_details_redesign_enabled=t.content_details_redesign_enabled,a.web_components_redesign_enabled=t.web_components_redesign_enabled,a.learner_dashboard_enabled=t.learner_dashboard_enabled,a.is_admin=t.is_admin,a.windowWidth=window.innerWidth,a.wasBelowTabletWidth=s.innerWidth<=840;function z(){a.$apply(function(){var e=angular.element(document.getElementById("drawer-toggle"));a.windowWidth=s.innerWidth,a.windowWidth<=840&&!a.wasBelowTabletWidth?(e[0].checked=!0,a.wasBelowTabletWidth=!0):840<a.windowWidth&&a.wasBelowTabletWidth&&(e[0].checked=!1,a.wasBelowTabletWidth=!1)})}function x(e){for(var t=0;t<a.enrollment_components.length;t++)a.enrollment_components[t].id===a.enrollment_component.id&&(e?a.enrollment_components[t-1]&&a.loadPage(a.enrollment_components[t-1],t-1):a.enrollment_components[t+1]&&a.loadPage(a.enrollment_components[t+1],t+1))}function P(e){a.enrollment_components[e]&&"locked"==a.enrollment_components[e].class?a.enrollment_components[e].class="not-started":a.enrollment_components.length>=e+1&&"completed"===a.enrollment_components[e].class&&P(e+=1)}angular.element(s).on("resize",z),a.$on("$destroy",function(){angular.element(s).off("resize",z)}),a.displayBadgesForNotification(),a.component_list=[],a.show_leave_review&&a.was_just_completed&&r.showLeaveReviewDialog(a.enrollment,null,null,a.courseProgressionUiRedesign),a.social_sharing_enabled=function(e){return a.social_sharing&&(a.social_sharing.linkedin_is_enabled&&!!e.certification_id&&0<e.certification_id||a.social_sharing.twitter_is_enabled)},a.linkedinShare=function(e){T.shareDialog(e)},a.enrollment_components=[],t.enrollment_components&&(a.enrollment_components=t.enrollment_components.data),a.downloadCertificate=function(e,t,n){var o=new f,n={typeId:i.lupJobTypes.downloadCertificate,enrollment_id:e,for_course:t,user_id:n};o.initiateJob(n)},a.enrollment_component_elements=[],t.elements&&(a.enrollment_component_elements=t.elements.data),a.enrollment_component=t.enrollment_component,a.enrollment_component&&a.enrollment_component.attributes&&(a.enrollment_component=a.enrollment_component.attributes),a.enrollment_component.assignment_upload_feedbacks=t.assignment_upload_feedbacks||[],a.enrollment_component.assignment_handouts=t.assignment_handouts||[],a.enrollment_component.assignment_uploads=t.assignment_uploads||[],a.enrollment_component.tutors=t.tutors||[],a.enrollment_component.video_recorder_enabled=t.video_recorder_enabled||!1,a.enrollment_component.question_to_render=null,t.question_to_render&&(a.enrollment_component.question_to_render=t.question_to_render.attributes,a.enrollment_component.question_to_render_answers=t.question_to_render_answers),a.enrollment_component.answer_options=t.answer_options||[],a.enrollment_component.column_option_choices=t.column_option_choices||[],a.enrollment_component.question_index=t.question_index,a.enrollment_component.available_match_answers=t.available_match_answers||[],a.enrollment_component.number_of_questions=t.number_of_questions,a.enrollment_component.num_on_waitlist=t.flags.attributes.num_on_waitlist,a.flags=t.flags.attributes,a.show_course_completion_button=a.flags.show_course_completion_button||!1,a.show_sign_button_immediately=a.flags.show_sign_button_immediately||!1,a.esignatureTrackingComplete=!1,a.show_page_data=a.enrollment_component&&0<=[i.componentTypes.page,i.componentTypes.e_signature].indexOf(a.enrollment_component.component_type_id)&&!a.enrollment_component.not_released_yet,a.enrollmentCompletedPassedOrFailed=function(){return a.enrollment.status_id===i.enrollmentStatuses.completed||a.enrollment.status_id===i.enrollmentStatuses.passed||a.enrollment.status_id===i.enrollmentStatuses.failed},a.catalogEnabled=function(){return e.catalog_enabled},a.storeEnabled=function(){return e.ecommerce_enabled},a.completionMsgStyle=function(){return a.enrollment.status_id!==i.enrollmentStatuses.completed&&a.enrollment.status_id!==i.enrollmentStatuses.passed&&0!=a.enrollment.show_passfail_to_learners&&(!a.enrollment.has_attempts_remaining||1==a.enrollment.show_passfail_to_learners)?"card-danger":"card-success"},a.completionMsgThumbUpOrDown=function(){return a.enrollment.status_id===i.enrollmentStatuses.completed||a.enrollment.status_id===i.enrollmentStatuses.passed||0==a.enrollment.show_passfail_to_learners?"fa-check":"fa-times"},a.completionMsgIconRedesign=function(){return a.enrollment.status_id===i.enrollmentStatuses.completed||a.enrollment.status_id===i.enrollmentStatuses.passed||0==a.enrollment.show_passfail_to_learners?a.completedBannerIcon:a.failedBannerIcon},a.completionMsg=function(){return a.enrollment.status_id===i.enrollmentStatuses.completed||a.enrollment.status_id===i.enrollmentStatuses.passed||0==a.enrollment.show_passfail_to_learners?i.showMessage("emails.email_title_completed_course"):i.showMessage("components.failed_but_no_reattempts")},a.completionInfoMsg=function(){return a.enrollment.status_id===i.enrollmentStatuses.completed||a.enrollment.status_id===i.enrollmentStatuses.passed||0==a.enrollment.show_passfail_to_learners?a.social_sharing_enabled(a.enrollment)?i.showMessage("lup.courses.completion_messages.info.social_share"):a.next_course_on_path?i.showMessage("lup.courses.completion_messages.info.new_course_assigned",{enrollment_id:a.next_course_on_path}):a.lp_completed?i.showMessage("learningpaths.congrats_completed_learning_path",{path_name:a.enrollment.learning_path_name}):a.embedded_content?"":a.catalogEnabled()&&!a.storeEnabled()?i.showMessage("lup.courses.completion_messages.info.no_more_training_catalog"):!a.catalogEnabled()&&a.storeEnabled()?i.showMessage("lup.courses.completion_messages.info.no_more_training_store"):a.catalogEnabled()&&a.storeEnabled()?i.showMessage("lup.courses.completion_messages.info.no_more_training_catalog_and_store"):i.showMessage("lup.courses.completion_messages.info.back_to_dash"):a.enrollment.has_attempts_remaining?i.showMessage("lup.courses.completion_messages.info.try_again"):i.showMessage("lup.courses.completion_messages.info.final_attempt")},a.certificationInfoMsg=function(e){if(a.enrollment.status_id===i.enrollmentStatuses.completed||a.enrollment.status_id===i.enrollmentStatuses.passed)return e&&!a.social_sharing_enabled(a.enrollment)?i.showMessage("lup.courses.completion_messages.info.focus_on_the_next"):e&&a.social_sharing_enabled(a.enrollment)?i.showMessage("lup.courses.completion_messages.info.social_share"):e||a.social_sharing_enabled(a.enrollment)?i.showMessage("lup.courses.completion_messages.info.download_and_share"):i.showMessage("lup.courses.completion_messages.info.download_cert")},a.showProgressBar=function(){return 0<a.enrollment_components.length},a.reloadCourseContent=function(){a.loadPage(a.enrollment_component,0)},a.reloadCourseData=function(){a.loadData(a.enrollment_component)},s.reloadCourseData=a.reloadCourseData,s.reloadCourseContent=a.reloadCourseContent,a.wasJustCompletedAfterExam=function(e){a.was_just_completed=e},s.wasJustCompletedAfterExam=a.wasJustCompletedAfterExam,a.setSocialSharingSettingsOnEnrollmentsShowController=function(e){a.social_sharing=e,a.shouldShowLinkedInButtonWhenSocialSettingsAreEnabled=e.was_just_passed},s.setSocialSharingSettingsOnEnrollmentsShowController=a.setSocialSharingSettingsOnEnrollmentsShowController,a.setNextCourseOnPath=function(e){a.next_course_on_path=e},s.setNextCourseOnPath=a.setNextCourseOnPath,a.setLpCompleted=function(e){a.lp_completed=e},s.setLpCompleted=a.setLpCompleted,a.setCertificateId=function(e){a.certificate_id=e},s.setCertificateId=a.setCertificateId,a.setCertificateType=function(e){a.certificate_type=e},s.setCertificateType=a.setCertificateType,a.setAwardedBadges=function(e){a.awarded_badges=e},s.setAwardedBadges=a.setAwardedBadges,a.setBadgesForNotification=function(e){a.badges_for_notification=e,a.displayBadgesForNotification()},s.setBadgesForNotification=a.setBadgesForNotification,a.overrideSequencing=function(e){a.enrollment_component.override_sequencing=!!e;for(var t=0;t<a.enrollment_components.length;t++)a.enrollment_components[t].id===a.enrollment_component.id&&(a.enrollment_components[t].override_sequencing=a.enrollment_component.override_sequencing)},s.overrideSequencing=a.overrideSequencing,a.showCertificateAfterExam=function(){return!!a.certificate_id},a.certificateForLearningPath=function(){return!!a.lp_completed&&!!a.enrollment.learning_path_id&&!a.certificate_type},a.updateEnrollmentComponentStatus=function(e){a.enrollment_component.enrollment_component_status_id=e;for(var t=0;t<a.enrollment_components.length;t++)a.enrollment_components[t].id===a.enrollment_component.id&&(a.enrollment_components[t].enrollment_component_status_id=a.enrollment_component.enrollment_component_status_id)},s.updateEnrollmentComponentStatus=a.updateEnrollmentComponentStatus,a.trackPageClick=function(e,t,n,o){var r=i.setupConfig(a);r.params.current_page=e,r.params.num_pages=t,r.params.component_element_type_id=o,r.params.enrollment_component_id=a.enrollment_component.id,r.params.enrollment_id=a.enrollment.id,r.hideSpinner=!0,$.trackPageClick(r).then(function(){a.enrollment=$.enrollment,e===t&&(a.tracking_complete=!0,a.enrollment_component.component_type_id===i.componentTypes.e_signature&&(a.esignatureTrackingComplete=!0),s.document.getElementById("confirmCourseCompletion")?a.enrollment_component.component_type_id!==i.componentTypes.e_signature&&(a.showCompletionButton=!0,_.each(a.enrollment_components,function(e){e.id===a.enrollment_component.id&&e.component_type_id===i.componentTypes.page&&(e.enrollment_component_status_id=i.enrollmentStatuses.completed)})):(a.enrollment_component.enrollment_component_status_id=i.enrollmentStatuses.completed,_.each(a.enrollment_components,function(e){e.id!==a.enrollment_component.id||e.component_type_id===i.componentTypes.e_signature&&null===e.enrollment_component.esignature_data.signature||(e.enrollment_component_status_id=i.enrollmentStatuses.completed)})),P(_.indexOf(_.map(a.enrollment_components,function(e){return e.id}),a.enrollment_component.id)+1))})},s.trackPageClick=a.trackPageClick,a.showConfirmCompletion=function(){return a.enrollment.status_id<i.enrollmentStatuses.completed},a.refreshProgressBar=function(e){a.enrollment=e},s.refreshProgressBar=a.refreshProgressBar,a.loadPage=function(e,t){L.show_course_completion_button=!1,L.show_sign_button_immediately=!1,r.moduleReleased(e)?0<t&&r.sequenceBlocked(a.enrollment,e,a.enrollment_components)?p.notify("",I18n.t("courses.course_is_sequenced_html")):a.embedded_content&&a.embedded_content_autoplay?(t=0===a.autoLaunched?"":"?autolaunched="+e.id,s.location.href="/enrollments/"+a.enrollment.id+"/page/"+e.id+t):s.location.href="/enrollments/"+a.enrollment.id+"/page/"+e.id:(e=l("displayDateTime")(e.release_at,"dddd, MMMM Do YYYY, @ h:mm a"),p.notify("",I18n.t("courses.this_module_will_be_released",{time:e})))},a.loadData=function(e){var t={};t.url="/enrollments/"+a.enrollment.id+"/page/"+e.id+".json",t.hideSpinner=!0,A.get(t).then(function(){a.enrollment_components=A.data.enrollment_components.data,a.enrollment=A.data.enrollment.attributes,a.show_leave_review=A.data.show_leave_review,a.was_just_completed=A.data.was_just_completed,a.courseProgressionUiRedesign=A.data.course_progression_ui_redesign,a.social_sharing=A.data.social_sharing?A.data.social_sharing.attributes:null,a.awarded_badges=A.data.awarded_badges,a.next_course_on_path=A.data.next_course_on_path_id,a.certificate_id=A.data.cert_awarded,a.certificate_type=A.data.cert_awarded_type,a.lp_completed=A.data.lp_completed,a.autoLaunched=0,a.badges_for_notification=A.data.badges_for_notification,a.displayBadgesForNotification(),a.show_leave_review&&a.was_just_completed&&r.showLeaveReviewDialog(a.enrollment,null,null,a.courseProgressionUiRedesign)})},a.messagingEnabled=function(){return!a.enrollment.license_id&&1!==a.enrollment.disable_message_author&&!e.disable_messaging&&a.enrollment.portal_id===e.current_portal_id},a.openEnrollmentDescription=function(e){a.web_components_redesign_enabled||e&&(s.location.href="/enrollments/"+e+"/description")},a.backToLastPage=function(){return localStorage.getItem("back_to_last_page")},e.$on("previousPage",function(){a.web_components_redesign_enabled||x(!0)}),e.$on("nextPage",function(){a.web_components_redesign_enabled||x(!1)}),e.$on("confirmCompletion",function(){a.web_components_redesign_enabled||a.showConfirmCompletion()&&(s.document.location.href="/enrollments/"+a.enrollment.id+"/page/"+a.enrollment_component.id+"?confirm_course_completion=true")}),a.$watch("enrollment_component.show_results",function(e,t){e&&e!=t&&(a.is_previous_exam_passed=a.enrollment_component.is_knowledge_test||a.enrollment_component.is_survey?e:a.enrollment_component.enrollment_component_status_id===i.enrollmentStatuses.passed,a.is_previous_exam_passed&&P(_.indexOf(_.map(a.enrollment_components,function(e){return e.id}),a.enrollment_component.id)+1))});g=a.embedded_content&&a.embedded_content_autoplay&&!!a.enrollment&&!!a.enrollment_component&&a.enrollment_component.enrollment_component_status_id<i.enrollmentStatuses.completed&&2==a.enrollment_component.component_type_id&&!(a.show_leave_review||a.was_just_completed)&&!function(){var e=s.location.search.split("?")[1],t=new RegExp("autolaunched="+a.enrollment_component.id);if(e){e=e.split("&").filter(function(e){return e.match(t)})[0];return(e?parseInt(e.split("=").pop()):0)===a.enrollment_component.id}a.autoLaunched=0}(),t=!!a.enrollment&&!!a.enrollment_component&&1==a.enrollment.auto_launch_scorm&&a.enrollment_component.enrollment_component_status_id==i.enrollmentStatuses.not_started;g?a.enrollment_component.is_tin_can?(launch_tincan_course(a.enrollment_component.component_id,a.enrollment.id,h,a.tincan_completion_tracking),a.autoLaunched=a.enrollment_component.id):(launch_scorm_course(a.enrollment_component.component_id,a.enrollment.id),a.autoLaunched=a.enrollment_component_id):t&&(1==a.enrollment.contains_tincans?launch_tincan_course(a.enrollment_components[0].component_id,a.enrollment.id,h,a.tincan_completion_tracking):launch_scorm_course(a.enrollment_components[0].component_id,a.enrollment.id)),S.setup({scope:a}),S.addLuaCoursePlayerEventListeners()}]),function(){"use strict";function e(e,t,n,o,r,a,i){t.helper=n,t.displayNotifications=function(e){if(angular.isUndefined(e))return;e=JSON.parse(e.replace(/&quot;/g,'"'));e&&o.onFlash(e)},t.deleteFilter=function(e){i.debug("EVENT: removeFilter"),r.confirm(I18n.t("lup.confirm"),I18n.t("enrollment_wizard_filter.delete_selected_filter_question")).then(function(){e()})},t.removeFilter=function(){i.debug("EVENT: removeFilter"),r.confirm(I18n.t("lup.confirm"),I18n.t("enrollment_wizard_filter.remove_selected_filter_question")).then(function(){a.location.reload()})},t.runNotifyDialog=function(e){if(angular.isUndefined(e))return;r.notify("",e)},e.breadcrumbs=[{title:I18n.t("lup.enrollments.subnavigation_links.new_enrollment"),url:"/enrollments/new"},{title:I18n.t("lup.enrollments.subnavigation_links.enrollment_wizard"),url:"/enrollments/start-enrollments-wizard"}]}angular.module("lu").controller("EnrollmentsWizardController",e),e.$inject=["$rootScope","$scope","LupHelper","notifyFactory","$luPopover","$window","$log"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u,d){new s,new t;n.enrollment=a,n.review=i,n.LupHelper=l,n.cancel=function(){o.close()},n.isReadonly=!1,n.ratingCreated=!1,n.is_anonymous=!1,n.rating=5,n.ratingMessage={style:"alert-success",text:l.showMessage("student.excellent_course")},n.feedback="",n.review?(n.rating=n.enrollment.my_star_rating,n.is_anonymous=n.review.is_anonymous,n.feedback=n.review.comment):n.review={},n.$watch("rating",function(e,t){5==n.rating?n.ratingMessage={style:"alert-success",text:l.showMessage("student.excellent_course")}:4==n.rating?n.ratingMessage={style:"alert-info",text:l.showMessage("student.good_course")}:3==n.rating?n.ratingMessage={style:"alert-warning",text:l.showMessage("student.average_course")}:2==n.rating?n.ratingMessage={style:"alert-warning",text:l.showMessage("student.bad_course")}:1==n.rating&&(n.ratingMessage={style:"alert-danger",text:l.showMessage("student.hate_this_course")})},!0),n.save=function(){var e;n.enrollment.review_is_mandatory&&0===n.feedback.length?l.showTip("coursez.please_enter_feedback_for_your_review"):(e=new d,n.review.course_id=n.enrollment.course_id,n.review.stars=n.rating,n.review.dimension=null,n.review.enrollment_id=n.enrollment_id,n.review.is_anonymous=n.is_anonymous,n.review.comment=n.feedback,e.save(n.review).then(function(){n.isReadonly=!0,n.ratingCreated=!0,"function"==typeof window.reloadDashboardCourses?window.reloadDashboardCourses():"function"==typeof window.reloadAfterReview&&window.reloadAfterReview()}))},n.rateFunction=function(e){}}window.angular.module("lu").controller("LeaveReviewController",e),e.$inject=["$scope","$timeout","learnUponApi","$modalInstance","$http","enrollment","review","LupJobFactory","LupHelper","$filter","$window","ReviewFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l){e.LupHelper=o,e.approve=function(){n.post("/enrollment_component_checklists/update_status.json",i).success(function(){s.onSuccess({success:o.showMessage("lup.checklists.successfully_submitted_observation")}),l.location=i.redirect_url}).error(function(e){})},e.cancel=function(){t.close({action:"cancel"})}}angular.module("lu").controller("ReviewChecklistController",e),e.$inject=["$scope","$modalInstance","$http","LupHelper","$q","$log","data","notifyFactory","$window"]}(),function(){"use strict";function e(o,e,t,n,r,a){e=e.get();o.LupHelper=t,o.exam=e.exam.attributes,o.course=e.course.attributes,o.component=e.component.attributes,o.send_email_on_exam_submit_when=e.send_email_on_exam_submit_when,o.show_correct_answer_options_select=e.show_correct_answer_options_select,o.show_answer_feedback_select=e.show_answer_feedback_select,o.have_question_pools_with_randomisation_and_weight=e.have_question_pools_with_randomisation_and_weight,o.possible_total_points=e.possible_total_points,o.save=function(e){(function(e){var t=!!o.exam.unlimited||!!o.exam.attempts&&1<=o.exam.attempts;e.$setValidity("no_attempts",t);t=!o.exam.is_timed_exam||!!o.exam.is_timed_exam&&!!o.exam.time_for_exam&&1<=o.exam.time_for_exam;e.$setValidity("invalid_time_for_exam",t);t=!o.exam.is_timed_exam||!!o.exam.is_timed_exam&&0<=o.exam.mins_warning_before_submit;e.$setValidity("invalid_mins_warning_before_submit",t);t=!!o.exam.pass_mark||!!o.exam.pass_percentage;e.$setValidity("invalid_pass_percentage",t);t=!t||!!o.exam.pass_mark||!!o.exam.pass_percentage&&o.exam.pass_percentage<=100&&1<=o.exam.pass_percentage;e.$setValidity("pass_percentage_not_in_range",t);t=!!o.exam.pass_mark||!!o.exam.pass_percentage;e.$setValidity("invalid_pass_mark",t);t=!t||!!o.exam.pass_percentage||!!o.exam.pass_mark&&o.exam.pass_mark<=o.possible_total_points&&1<=o.exam.pass_mark;e.$setValidity("pass_mark_not_in_range",t)})(e),e.$valid&&e.commit()},o.saveSurvey=function(e){e.commit()},o.ariaLabel=t.showMessage("lup.a11y.exam_options_main"),o.ariaLabelSide=t.showMessage("lup.a11y.exam_options_aside");var i="0";o.exam.is_survey&&(i="1");var s,l=o.exam.is_survey?t.showMessage("components.survey_options"):t.showMessage("lup.breadcrumbs.courses.exam_options");s=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:o.course.name,url:"/courses/"+o.course.id},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/"+o.course.id+"/content"},{title:o.component.title,url:"/courses/"+o.course.id+"/content/"+o.component.id+"/edit"},{title:l,url:"/courses/"+o.course.id+"/components/"+o.component.id+"/exams/"+o.exam.id+"/edit/"+i}],r.breadcrumbs=s,o.returnFormAction=function(){return"/courses/"+o.course.id+"/components/"+o.component.id+"/exams/"+o.exam.id},o.showTooltip=function(e){n.notify("",e)},o.clearPassMark=function(){o.exam.pass_percentage&&(o.exam.pass_mark=null)},o.clearPassPercentage=function(){o.exam.pass_mark&&(o.exam.pass_percentage=null)},o.cancel=function(){a.location="/courses/"+o.course.id+"/content/"+o.component.id+"/edit"},o.disabledByNumberFoAttempts=function(e,t){t||0!==t&&(t=1);var n=!1;return o.exam.unlimited||o.exam.attempts&&!(o.exam.attempts<=t)||(n=!0,o.exam[e]=!1),n},o.disabledByAllowReattempt=function(e){var t=!1;return o.exam.allow_reattempt_after_pass||(t=!0,o.exam[e]=!1),t},o.displayOverrideExamSequencingFinalAttempt=function(){var e=!1;return!o.exam.is_knowledge_test&&!o.exam.unlimited&&o.exam.attempts&&1<=o.exam.attempts&&o.course.enable_sequencing&&(e=!0),e},o.disabledByShowGivenAnswersAfterSubmit=function(e){var t=!1;return o.exam.show_answers_given_after_submit||(t=!0,o.exam[e]=!1),t},o.$watch(function(){return o.exam.show_answers_given_after_submit},function(e){e||(o.exam.show_question_correctness=!1)})}angular.module("lu").controller("ExamsEditController",e),e.$inject=["$scope","StorageFactory","LupHelper","$luPopover","$rootScope","$window"]}(),function(){"use strict";function e(a,e,t,n,o,i,s,l,r,c,u){e=e.get();a.LupHelper=t,a.external_training_record=e.external_training_record.attributes,a.associations_setting=e.associations_setting.attributes,a.learning_credits=e.learning_credits.data,a.isNotRejected=function(){return a.external_training_record.status_id!=t.external_training_record_statuses.rejected},a.Upload=o,a.supporting_documents=e.supporting_documents,a.feedback_documents=e.feedback_documents,a.user=e.user.attributes,a.pre_approved_self_award_events_for_dropdown=e.pre_approved_self_award_events_for_dropdown;e=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:a.user.display_name,url:"/users/"+a.user.id},{title:I18n.t("lup.breadcrumbs.external_trainings.index"),url:"/users/"+a.user.id+"/external_training_records"},{title:a.external_training_record.activity_name,url:"/users/"+a.user.id+"/external_training_records/"+a.external_training_record.id}];c.breadcrumbs=e,!a.external_training_record.credit_type&&a.learning_credits&&a.learning_credits[0]&&(a.external_training_record.credit_type=a.learning_credits[0].id),a.supporting_documents?a.supportingDocumentFiles=a.supporting_documents:a.supportingDocumentFiles=[],a.feedback_documents?a.feedbackDocumentFiles=a.feedback_documents:a.feedbackDocumentFiles=[],a.acceptedFiles=function(){return"*.*"},a.maxAllowedToUpload=function(){return 5},a.showIfOther=function(e){var t=!1;return a.pre_approved_self_award_events_for_dropdown&&(t=e==a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1]),t},a.removeSupportingDocument=function(o){r.confirm(I18n.t("lup.confirm"),I18n.t("dashboard.are_you_sure_you_want_to_delete_this_external_training_supporting_document")).then(function(e){var n=new s;return n.id=o,n.destroy().then(function(){if(null===n.id){for(var e=[],t=0;t<a.supportingDocumentFiles.length;t++)a.supportingDocumentFiles[t].id!==o&&e.push(a.supportingDocumentFiles[t]);a.supportingDocumentFiles=e}})})},a.$watch("supportingDocumentUpload",function(r){a.formUpload=!1,null!==r&&i.getData(t.fileUploads.types.supporting_documents,function(t){l(function(){var n,o,e=t.data.signature_data.attributes;a.errorMsg=null,r&&(n=r,o=e,a.errorMsg=null,i.uploadFiles(n,o,function(e){l(function(){n.result=e.data});var t=new s;return t.uuid=o.guid,t.supporting_document_file_name=n.name,t.external_training_record_id=a.external_training_record.id,t.supporting_document_file_size=n.size,t.supporting_document_content_type=n.type,t.output_url=o.folder_path+n.name,t.create().then(function(){a.supportingDocumentFiles.push(t)})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))})},function(e){})})}angular.module("lu").controller("ExternalTrainingRecordsAdminEditController",e),e.$inject=["$scope","StorageFactory","LupHelper","$window","Upload","s3HelperFactory","ExternalTrainingSupportingDocumentFactory","$timeout","$luPopover","$rootScope","ExternalTrainingRecordFactory"]}(),function(){"use strict";function e(a,e,t,n,o){e=e.get();a.LupHelper=t,a.external_training_record=e.external_training_record.attributes,a.associations_setting=e.associations_setting.attributes,a.learning_credits=e.learning_credits.data,a.admin_creating=e.admin_creating,a.user=e.user.attributes,a.save=function(e){(function(e){var t=!!a.external_training_record.credit_type;e.$setValidity("no_credit_type",t);var n=!!a.external_training_record.number_of_credits;e.$setValidity("no_number_of_credits",n);var o=!0;n&&isNaN(a.external_training_record.number_of_credits)&&(o=!1);e.$setValidity("number_of_credits_is_nan",o);t=!0;n&&o&&a.external_training_record.number_of_credits<=0&&(t=!1);e.$setValidity("number_of_credits_greater_than_0",t);n=!!a.external_training_record.description;e.$setValidity("no_description",n);o=!!a.external_training_record.activity_name;e.$setValidity("no_activity_name",o);t=!0;a.external_training_record.score&&isNaN(a.external_training_record.score)&&(t=!1);e.$setValidity("score_is_nan",t);n=!0;!a.external_training_record.score&&a.associations_setting.score_is_required&&(n=!1);e.$setValidity("score_is_empty",n);o=!0;a.external_training_record.score&&t&&a.external_training_record.score<=0&&(o=!1);e.$setValidity("score_greater_than_0",o);n=!!a.external_training_record.date_completed;e.$setValidity("no_date_completed",n);t=!0,o=(new Date).valueOf();n&&(r=new Date(a.external_training_record.date_completed).valueOf(),o<r&&(t=!1));e.$setValidity("date_completed_cant_be_in_the_future",t);var t=!0,r=null;{n&&a.external_training_record.expiry_date&&(r=new Date(a.external_training_record.date_completed).valueOf(),new Date(a.external_training_record.expiry_date).valueOf()<r&&(t=!1))}e.$setValidity("date_completed_cant_be_after_expiry_date",t);t=!0;!a.external_training_record.expiry_date&&a.associations_setting.expiry_date_is_required&&(t=!1);e.$setValidity("expiry_date_is_empty",t)})(e),e.$valid&&e.commit()},a.cancel=function(){n.location="/users/"+a.user.id+"/external_training_records/admin_new"},o.breadcrumbs=[{title:t.showMessage("lup.breadcrumbs.users.index"),url:"/users"},{title:a.user.display_name,url:"/users/"+a.user.id},{title:t.showMessage("lup.breadcrumbs.external_trainings.index"),url:"/users/"+a.user.id+"/external_training_records"},{title:t.showMessage("lup.breadcrumbs.external_trainings.new"),url:"/users/"+a.user.id+"/external_training_records/admin_new"}],a.pre_approved_self_award_events_for_dropdown=e.pre_approved_self_award_events_for_dropdown,a.pre_approved_self_award_events_for_dropdown&&(a.dropdown_event=a.pre_approved_self_award_events_for_dropdown[0],a.activity_name_for_dropdown=a.pre_approved_self_award_events_for_dropdown[0],a.external_training_record.activity_name=a.pre_approved_self_award_events_for_dropdown[0]),!a.external_training_record.credit_type&&a.learning_credits&&a.learning_credits[0]&&(a.external_training_record.credit_type=a.learning_credits[0].id),a.showIfOther=function(e){var t=!1;return a.pre_approved_self_award_events_for_dropdown&&(t=e==a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1]),t},a.passValue=function(e){a.pre_approved_self_award_events_for_dropdown&&(e==a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1]?a.external_training_record.activity_name="":a.external_training_record.activity_name=e)}}angular.module("lu").controller("ExternalTrainingRecordsAdminNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","$window","$rootScope"]}(),function(){"use strict";function e(a,e,t,n,o,r,i,s,l,c,u){var d=t.get();a.LupHelper=n,a.external_training_record=d.external_training_record.attributes,a.associations_setting=d.associations_setting.attributes,a.learning_credits=d.learning_credits.data,a.save=function(e){e&&(a.external_training_record_form_action="/external_training_records/"+a.external_training_record.id+"/admin_update",e.commit())},a.approve=function(t){c.confirm(n.showMessage("lup.confirm"),n.showMessage("external_training_record.are_you_sure_you_want_to_approve_this_training_record")).then(function(e){t&&(a.external_training_record_form_action="/external_training_records/"+a.external_training_record.id+"/approve_external_training_record",t.commit())})},a.reject=function(t){c.confirm(n.showMessage("lup.confirm"),n.showMessage("external_training_record.are_you_sure_you_want_to_reject_this_training_record")).then(function(e){t&&(a.external_training_record_form_action="/external_training_records/"+a.external_training_record.id+"/reject_external_training_record",t.commit())})},a.delete=function(){c.confirm(n.showMessage("lup.confirm"),n.showMessage("external_training_record.are_you_sure_you_want_to_delete",{label:a.associations_setting.credits_panel_name})).then(function(e){var t=new u;t.id=a.external_training_record.id,t.destroy().then(function(){o.location="/users/"+a.external_training_record.user_id+"/enrollments?filter_by="+n.dashboard_filters.external_trainings})})},a.isNotRejected=function(){return a.external_training_record.status_id!=n.external_training_record_statuses.rejected},a.Upload=r,a.supporting_documents=d.supporting_documents,a.submitted_by=d.submitted_by,a.reviewer=d.reviewer,a.review_date=d.review_date,a.feedback_documents=d.feedback_documents,a.user=d.user.attributes,a.displayActivityDetailsTab=!0,a.displayReviewersFeedbackTab=!1,a.external_training_record_form_action="/external_training_records/"+a.external_training_record.id+"/admin_update",e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:a.user.display_name,url:"/users/"+a.user.id},{title:I18n.t("lup.breadcrumbs.external_trainings.index"),url:"/users/"+a.user.id+"/external_training_records"},{title:a.external_training_record.activity_name,url:"/external_training_records/"+a.external_training_record.id+"/admin_show"}],a.external_training_record.score||(a.external_training_record.score="-"),a.feedback_documents?a.feedbackDocumentFiles=a.feedback_documents:a.feedbackDocumentFiles=[],a.canEdit=function(){return a.external_training_record.status_id==n.external_training_record_statuses.pending_review&&!!d.can_aprove},a.canDelete=function(){return!!d.can_aprove},a.loadCk=function(){n.renderCKEditor({id:"external_training_record_form_corrected_comments",width:"100%"})},a.external_training_record.credit_title="/";for(var p=0;p<a.learning_credits.length;p++)a.external_training_record.credit_type==a.learning_credits[p].id&&(a.external_training_record.credit_title=a.learning_credits[p].title);a.supporting_documents?a.supportingDocumentFiles=a.supporting_documents:a.supportingDocumentFiles=[],a.acceptedFiles=function(){return"*.*"},a.maxAllowedToUpload=function(){return 5},a.removeFeedbackDocument=function(o){c.confirm(n.showMessage("lup.confirm"),n.showMessage("dashboard.are_you_sure_you_want_to_delete_this_external_training_supporting_document")).then(function(e){var n=new s;return n.id=o,n.destroy().then(function(){if(null===n.id){for(var e=[],t=0;t<a.feedbackDocumentFiles.length;t++)a.feedbackDocumentFiles[t].id!==o&&e.push(a.feedbackDocumentFiles[t]);a.feedbackDocumentFiles=e}})})},a.$watch("feedbackDocumentUpload",function(r){a.formUpload=!1,null!==r&&i.getData(n.fileUploads.types.feedback_documents,function(t){l(function(){var n,o,e=t.data.signature_data.attributes;a.errorMsg=null,r&&(n=r,o=e,a.errorMsg=null,i.uploadFiles(n,o,function(e){l(function(){n.result=e.data});var t=new s;return t.uuid=o.guid,t.supporting_document_file_name=n.name,t.external_training_record_id=a.external_training_record.id,t.supporting_document_file_size=n.size,t.supporting_document_content_type=n.type,t.output_url=o.folder_path+n.name,t.create().then(function(){try{t.url=t.data.external_training_feedback_document.url}catch(e){}a.feedbackDocumentFiles.push(t)})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))})},function(e){})}),a.returnStatusLabel=function(e){return e==n.external_training_record_statuses.pending_review?n.showMessage("dashboard.external_training_pending_review"):e==n.external_training_record_statuses.approved?n.showMessage("dashboard.external_training_approved"):e==n.external_training_record_statuses.rejected?n.showMessage("dashboard.external_training_rejected"):void 0},a.showActivityDetailsTab=function(){a.displayActivityDetailsTab=!0,a.displayReviewersFeedbackTab=!1},a.showReviewersFeedbackTab=function(){a.displayReviewersFeedbackTab=!0,a.displayActivityDetailsTab=!1}}angular.module("lu").controller("ExternalTrainingRecordsAdminShowController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","Upload","s3HelperFactory","ExternalTrainingFeedbackDocumentFactory","$timeout","$luPopover","ExternalTrainingRecordFactory"]}(),function(){"use strict";function e(a,e,t,n){e=e.get();a.LupHelper=t,a.external_training_record=e.external_training_record.attributes,a.associations_setting=e.associations_setting.attributes,a.learning_credits=e.learning_credits.data,a.save=function(e){(function(e){var t=!!a.external_training_record.credit_type;e.$setValidity("no_credit_type",t);var n=!!a.external_training_record.number_of_credits;e.$setValidity("no_number_of_credits",n);var o=!0;n&&isNaN(a.external_training_record.number_of_credits)&&(o=!1);e.$setValidity("number_of_credits_is_nan",o);t=!0;n&&o&&a.external_training_record.number_of_credits<=0&&(t=!1);e.$setValidity("number_of_credits_greater_than_0",t);n=!!a.external_training_record.description;e.$setValidity("no_description",n);o=!!a.external_training_record.activity_name;e.$setValidity("no_activity_name",o);t=!0;a.external_training_record.score&&isNaN(a.external_training_record.score)&&(t=!1);e.$setValidity("score_is_nan",t);n=!0;!a.external_training_record.score&&a.associations_setting.score_is_required&&(n=!1);e.$setValidity("score_is_empty",n);o=!0;a.external_training_record.score&&t&&a.external_training_record.score<=0&&(o=!1);e.$setValidity("score_greater_than_0",o);n=!!a.external_training_record.date_completed;e.$setValidity("no_date_completed",n);t=!0,o=(new Date).valueOf();n&&(r=new Date(a.external_training_record.date_completed).valueOf(),o<r&&(t=!1));e.$setValidity("date_completed_cant_be_in_the_future",t);var t=!0,r=null;{n&&a.external_training_record.expiry_date&&(r=new Date(a.external_training_record.date_completed).valueOf(),new Date(a.external_training_record.expiry_date).valueOf()<r&&(t=!1))}e.$setValidity("date_completed_cant_be_after_expiry_date",t);t=!0;!a.external_training_record.expiry_date&&a.associations_setting.expiry_date_is_required&&(t=!1);e.$setValidity("expiry_date_is_empty",t)})(e),e.$valid&&e.commit()},a.cancel=function(){n.location="/external_training_records/new"},a.pre_approved_self_award_events_for_dropdown=e.pre_approved_self_award_events_for_dropdown,a.pre_approved_self_award_events_for_dropdown&&(a.dropdown_event=a.pre_approved_self_award_events_for_dropdown[0],a.activity_name_for_dropdown=a.pre_approved_self_award_events_for_dropdown[0],a.external_training_record.activity_name=a.pre_approved_self_award_events_for_dropdown[0]),!a.external_training_record.credit_type&&a.learning_credits&&a.learning_credits[0]&&(a.external_training_record.credit_type=a.learning_credits[0].id),a.showIfOther=function(e){var t=!1;return a.pre_approved_self_award_events_for_dropdown&&(t=e==a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1]),t},a.passValue=function(e){a.pre_approved_self_award_events_for_dropdown&&(e==a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1]?a.external_training_record.activity_name="":a.external_training_record.activity_name=e)}}angular.module("lu").controller("ExternalTrainingRecordsNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","$window"]}(),function(){"use strict";function e(a,e,n,o,t,i,s,l,r,c,u){e=e.get();function d(){return a.external_training_record.status_id!=n.external_training_record_statuses.rejected}function p(){return!d()}a.LupHelper=n,a.external_training_record=e.external_training_record.attributes,a.associations_setting=e.associations_setting.attributes,a.learning_credits=e.learning_credits.data,a.save=function(e){(function(e){var t=!!a.external_training_record.credit_type;e.$setValidity("no_credit_type",t);var n=!!a.external_training_record.number_of_credits;e.$setValidity("no_number_of_credits",n);var o=!0;n&&isNaN(a.external_training_record.number_of_credits)&&(o=!1);e.$setValidity("number_of_credits_is_nan",o);var r=!0;n&&o&&a.external_training_record.number_of_credits<=0&&(r=!1);e.$setValidity("number_of_credits_greater_than_0",r);t=!!a.external_training_record.description;e.$setValidity("no_description",t);n=!!a.external_training_record.activity_name;e.$setValidity("no_activity_name",n);o=!0;a.external_training_record.score&&isNaN(a.external_training_record.score)&&(o=!1);e.$setValidity("score_is_nan",o);r=!0;!a.external_training_record.score&&a.associations_setting.score_is_required&&(r=!1);e.$setValidity("score_is_empty",r);t=!0;a.external_training_record.score&&o&&a.external_training_record.score<=0&&(t=!1);e.$setValidity("score_greater_than_0",t);n=!!a.external_training_record.date_completed;e.$setValidity("no_date_completed",n);r=!0,o=(new Date).valueOf(),t=null;n&&(t=new Date(a.external_training_record.date_completed).valueOf(),o<t&&(r=!1));e.$setValidity("date_completed_cant_be_in_the_future",r);r=!0;{n&&a.external_training_record.expiry_date&&(t=new Date(a.external_training_record.date_completed).valueOf(),new Date(a.external_training_record.expiry_date).valueOf()<t&&(r=!1))}e.$setValidity("date_completed_cant_be_after_expiry_date",r);r=!0;!a.external_training_record.expiry_date&&a.associations_setting.expiry_date_is_required&&(r=!1);e.$setValidity("expiry_date_is_empty",r)})(e),e.$valid&&e.commit()},a.cancel=function(){o.location="/external_training_records/"+a.external_training_record.id},a.isNotRejected=d,a.isRejected=p,a.Upload=t,a.supporting_documents=e.supporting_documents,a.feedback_documents=e.feedback_documents,a.external_training_record_form_action="/external_training_records/"+a.external_training_record.id,a.pre_approved_self_award_events_for_dropdown=e.pre_approved_self_award_events_for_dropdown,a.pre_approved_self_award_events_for_dropdown&&(a.dropdown_event=a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1],a.activity_name_for_dropdown=a.external_training_record.activity_name,a.external_training_record.activity_name&&function(e,t){for(var n=0;n<e.length;n++){if(e[n]==t)return!0}return!1}(a.pre_approved_self_award_events_for_dropdown,a.external_training_record.activity_name)?a.dropdown_event=a.external_training_record.activity_name:a.external_training_record.activity_name&&(a.activity_name_for_dropdown=a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1])),!a.external_training_record.credit_type&&a.learning_credits&&a.learning_credits[0]&&(a.external_training_record.credit_type=a.learning_credits[0].id),!a.learning_credits.some(function(e){return e.id===a.external_training_record.credit_type})&&p()&&(a.external_training_record.credit_type=a.learning_credits[0].id),a.supporting_documents?a.supportingDocumentFiles=a.supporting_documents:a.supportingDocumentFiles=[],a.feedback_documents?a.feedbackDocumentFiles=a.feedback_documents:a.feedbackDocumentFiles=[],a.acceptedFiles=function(){return"*.*"},a.maxAllowedToUpload=function(){return 5},a.showIfOther=function(e){var t=!1;return a.pre_approved_self_award_events_for_dropdown&&(t=e==a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1]),t},a.removeSupportingDocument=function(o){r.confirm(I18n.t("lup.confirm"),I18n.t("dashboard.are_you_sure_you_want_to_delete_this_external_training_supporting_document")).then(function(e){var n=new s;return n.id=o,n.destroy().then(function(){if(null===n.id){for(var e=[],t=0;t<a.supportingDocumentFiles.length;t++)a.supportingDocumentFiles[t].id!==o&&e.push(a.supportingDocumentFiles[t]);a.supportingDocumentFiles=e}})})},a.$watch("supportingDocumentUpload",function(r){a.formUpload=!1,null!==r&&i.getData(n.fileUploads.types.supporting_documents,function(t){l(function(){var n,o,e=t.data.signature_data.attributes;a.errorMsg=null,r&&(n=r,o=e,a.errorMsg=null,i.uploadFiles(n,o,function(e){l(function(){n.result=e.data});var t=new s;return t.uuid=o.guid,t.supporting_document_file_name=n.name,t.external_training_record_id=a.external_training_record.id,t.supporting_document_file_size=n.size,t.supporting_document_content_type=n.type,t.output_url=o.folder_path+n.name,t.create().then(function(){a.supportingDocumentFiles.push(t)})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))})},function(e){})}),a.passValue=function(e){a.pre_approved_self_award_events_for_dropdown&&(e==a.pre_approved_self_award_events_for_dropdown[a.pre_approved_self_award_events_for_dropdown.length-1]?a.external_training_record.activity_name="":a.external_training_record.activity_name=e)},c.$on("deleteExternalTrainingRecord",function(){r.confirm(n.showMessage("lup.confirm"),n.showMessage("external_training_record.are_you_sure_you_want_to_delete",{label:a.associations_setting.credits_panel_name})).then(function(e){var t=new u;t.id=a.external_training_record.id,t.destroy().then(function(){o.location="/dashboard?filter_by="+n.dashboard_filters.external_trainings})})})}angular.module("lu").controller("ExternalTrainingRecordsShowController",e),e.$inject=["$scope","StorageFactory","LupHelper","$window","Upload","s3HelperFactory","ExternalTrainingSupportingDocumentFactory","$timeout","$luPopover","$rootScope","ExternalTrainingRecordFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p,_){var m=this,f=o.get(),g=new p;function h(e,t){m.edit?b(m.post.id):t!=n.forums.posts.status_code.draft?f.selected_topic&&m.post.topics[0]!=f.selected_topic.id?l.location="/forums/posts/"+e.forum_post_id:e&&e.forum_post_id?(m.currentRequest=!1,m.object_id&&m.type_id&&t==n.forums.posts.status_code.published?b(e.forum_post_id):l.location="/forums/posts/"+e.forum_post_id):e.success&&m.post&&m.post.id?l.location="/forums/posts/"+m.post.id:m.currentRequest=!1:l.location="/forums/my_contribution?selectedStatus="+m.lupHelper.forums.posts.filter_status.draft_only}function b(e){switch(parseInt(m.type_id)){case n.forums.posts.creation_type.course:return void(l.location="/courses/"+m.object_id+"/forums/"+e);case n.forums.posts.creation_type.learning_path:return void(l.location="/learning_paths/"+m.object_id+"/forums/"+e);case n.forums.posts.creation_type.topic:var t="/forums/posts/"+e+"?bc=topics";return n.contains(l.location.href,"topics_by_type")&&(t+="&topics_by_type="+n.urlParam("topics_by_type")),void(l.location=t);case n.forums.posts.creation_type.enrollment:return void(l.location="/enrollments/"+m.object_id+"/forums/"+e);default:return void(l.location="/forums/posts/"+e)}}function v(){m.image=null,m.post.cover_url=null,m.image_for_upload=null,m.alt_tag=null}m.lupHelper=n,m.lupService=r,m.rootScope=t,m.postsFactory=new a,m.selected_topic_type=m.lupHelper.forums.topics.type_code.portal,m.is_admin=f.is_admin,m.user=f.user,m.create_at=f.create_at,m.image_root_path=f.image_root_path,m.moderated_topics=f.moderated_topics,m.object_id=f.object_id,m.type_id=f.type_id,m.title_length=120,m.invalidFile=[],m.fetchTopicsApi=function(e){var t="";try{t=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){s.debug("fetchCoursesApi: Unable to convert selected topic to string!"),t=""}var n=i.defer(),o={url:"/forums/topics/select.json",params:{search:e.$query,page:e.$page,except:t,topic_type:m.selected_topic_type,for_new_post:!0},hideSpinner:!0};return g.get(null,o,null).then(function(e){e.data.topics?(e=e.data.topics.data,n.resolve(e)):n.reject("Failed to get topics")}),n.promise},m.changeTopicType=function(e){m.selected_topic_type!==e&&(m.selected_topic_type=e,m.topic_objects=[],m.post.topics=[])},m.save=function(e,n){if(m.currentRequest)return;{m.post.content=m.lupHelper.getHTMLFromCKEditor("post_wysi"),m.post.status_code=n,function(e){e.$setValidity("emptyTitle",!!m.post.title),m.post.title&&e.$setValidity("invalidTitle",m.post.title.length<=m.title_length);e.$setValidity("emptyTopics",1==m.post.topics.length),e.$setValidity("emptyContent",!!m.post.content),e.$setValidity("invalidFile",0==m.invalidFile.length)}(e),e.$valid&&(m.currentRequest=n,m.image_for_upload?u.getData(m.lupHelper.fileUploads.types.post_cover_image,function(e){d(function(){var t=e.data.signature_data.attributes;u.uploadFiles(m.image_for_upload,t,function(e){m.post.output_url=t.folder_path+m.image_for_upload.name,m.post.image_file_name=m.image_for_upload.name,m.post.alt_tag=m.alt_tag;(m.edit?(m.post.update_tags=!0,m.postsFactory.updatePost(m.post.id,m.post)):m.postsFactory.createPost(m.post)).then(function(e){h(e,n)})},function(e){m.currentRequest=!1})})},function(e){m.currentRequest=!1},null):(m.edit?(m.post.update_tags=!0,m.postsFactory.updatePost(m.post.id,m.post)):m.postsFactory.createPost(m.post)).then(function(e){h(e,n)},function(e){h(e,n)}))}},m.cancel=function(){if(m.currentRequest)return;var e=r.redirectBack("/forums/all_posts");l.location=e},m.clearCoverImage=v,m.openCropper=function(e){{e&&c.open({templateUrl:"/tc/forums/post-cover-cropper.html",controller:"PostCoverCropperController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e}}}).result.then(function(e){e&&e.image_for_upload&&e.image_for_preview?(m.image=e.image_for_preview,m.image_for_upload=e.image_for_upload,m.alt_tag=e.alt_tag):m.image_for_upload||v()})}},m.canChangeAllowComenting=function(){if(m.is_admin)return!0;if(!m.post||!m.post.topics||0==m.post.topics.length||!m.moderated_topics||0==m.moderated_topics.length)return!1;var e=m.post.topics[0];return n.contains(m.moderated_topics,e)},m.deletePost=function(){if(m.currentRequest)return;if(!m.canChangeAllowComenting()&&(0<m.post.likes_count||0<m.post.comments_count))return void _.notify("",m.lupHelper.showMessage("lup.forums.forum_post.deletion_restricted"));_.confirm(I18n.t("lup.forums.all_posts.delete_post"),I18n.t("lup.forums.posts.post_action.are_your_sure_you_want_to_delete_post",{post_title:m.original_title})).then(function(){var e={status_code:m.lupHelper.forums.posts.status_code.deleted};m.postsFactory.updatePost(m.post.id,e).then(function(){switch(parseInt(m.type_id)){case n.forums.posts.creation_type.course:return void(l.location="/courses/"+m.object_id+"/forums/");case n.forums.posts.creation_type.learning_path:return void(l.location="/learning_paths/"+m.object_id+"/forums/");case n.forums.posts.creation_type.enrollment:return void(l.location="/enrollments/"+m.object_id+"/forums")}var e;n.contains(l.location.href,"my_contribution")?l.location="/forums/my_contribution/":n.contains(l.location.href,"moderation")?l.location="/forums/moderation":n.contains(l.location.search,"bc=topics")?l.location="/forums/topic/"+m.object_id:n.contains(l.location.href,"topics_by_type")?(e=n.urlParam("topics_by_type"),l.location="/forums/topic/"+m.object_id+"?topics_by_type="+e):l.location="/forums/all_posts"})})},m.currentRequest=!1,m.publish_button_label=m.lupHelper.showMessage("lup.terms_of_service.publish_modal.publish_now"),m.status_label=m.lupHelper.showMessage("lup.forums.post_statuses.draft"),m.buttonIcon="fa-bullhorn",m.alt_tag=null,f.post?(m.post=f.post.attributes,m.original_title=f.post.attributes.title,m.edit=!0,m.post.status_code==m.lupHelper.forums.posts.status_code.published&&(m.publish_button_label=m.lupHelper.showMessage("save"),m.buttonIcon="fa-save",m.status_label=m.lupHelper.showMessage("lup.forums.post_statuses.published"))):m.post={allow_commenting:!0,uuid:f.post_uuid},f.selected_topic&&(m.post.topics=[f.selected_topic.id],m.topic_objects=[{title:f.selected_topic.title,id:f.selected_topic.id}],m.selected_topic_type=f.selected_topic.type,m.topicId=f.selected_topic.id,m.topicTitle=f.selected_topic.title),f.selected_tags&&(m.post.tags=f.selected_tags),m.edit?t.breadcrumbs=m.postsFactory.buildPostBreadcrumbs(m.post,m.topicId,m.topicTitle):t.breadcrumbs=[{title:m.lupHelper.showMessage("lup.tabs.forums"),url:"/forums"},{title:m.lupHelper.showMessage("lup.subnav.lup_my_contribution"),url:"/forums/my_contribution"},{title:m.lupHelper.showMessage("lup.forums.forum_post.unnamed_draft")}],m.lupHelper.renderCKEditor({clear_all_previous_instances:!1,id:"post_wysi",add_image_upload_via_dj:!0,disable_image_properties:!0,save_button_action:"save_text_button",add_embedded_media:!0,show_source:!0,body_class:"ck-editor-post",format_tags:"p;h2",include_custom_css:!0,toolbar_for_forums:!0,width:"100%"}),l.executeDjImageUpload=function(){c.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"OpenImageUploadController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{post_uuid:function(){return m.post.uuid}}}).result.then(function(e){e&&"save"===e.action&&CKEDITOR.instances.post_wysi.insertHtml('<img src="'+e.image_url+'">')})}}angular.module("lu").controller("ForumPostsNewController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","LupService","ForumPostsFactory","$q","$log","$window","$modal","s3HelperFactory","$timeout","learnUponApi","$luPopover"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d,p){var _=this;_.lupHelper=o,_.forumService=u;var r=r.get(),m=(new i,new d);function f(e){_.post=e}function g(){u.switchButtons("createPost",!0),u.switchButtons("editPost",_.is_admin||_.is_moderator||_.is_creator&&_.post.status_code!=_.lupHelper.forums.posts.status_code.archived),u.switchButtons("disableCommenting",(_.is_admin||_.is_moderator)&&_.post.allow_commenting),u.switchButtons("enableCommenting",(_.is_admin||_.is_moderator)&&!_.post.allow_commenting),u.switchButtons("archivePost",(_.is_admin||_.is_moderator)&&_.post.status_code!=_.lupHelper.forums.posts.status_code.archived),u.switchButtons("unarchivePost",(_.is_admin||_.is_moderator)&&_.post.status_code==_.lupHelper.forums.posts.status_code.archived),u.switchButtons("deletePost",_.is_admin||_.is_moderator||_.is_creator)}function h(){l.toggleCommenting(_.post.title,_.post.allow_commenting,_.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),_.post.allow_commenting=e.allow_commenting),g()})}function b(){l.toggleArchiving(_.post.title,_.post.status_code,_.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),_.post.status_code=e.status_code),g()})}_.is_admin=r.is_admin,_.is_moderator=r.is_moderator,_.currentUserPmId=r.current_user_pm_id,_.post=r.post.attributes,_.post_cover_reference=r.post_cover_reference,_.post_cover_reference&&_.forumService.pingForProgress(_.post_cover_reference,_.post.id,f),_.comments=r.comments,_.topicTitle=_.post.topic_title,_.topicId=_.post.forum_topic_id,_.is_creator=r.is_creator,g(),t.breadcrumbs=[{title:o.showMessage("lup.tabs.forums"),url:"/forums"}],t.breadcrumbs=m.buildPostBreadcrumbs(_.post,_.topicId,_.topicTitle),_.isLiked=_.post.is_liked,_.newLike=!1,_.likingAllowed=!0,_.likePost=function(){_.likingAllowed&&(_.likingAllowed=!1,_.isLiked&&0<_.post.likes_count?_.post.likes_count=_.post.likes_count-1:0<=_.post.likes_count&&(_.post.likes_count=_.post.likes_count+1),_.isLiked=!_.isLiked,_.newLike=_.isLiked,m.likePost(_.post.id).finally(function(){_.likingAllowed=!0}))},o.contains(s.location.href,"comments")&&a(function(){document.getElementById("comments").scrollIntoView({behavior:"smooth"})}),t.$on("disableCommenting",function(){h()}),t.$on("enableCommenting",function(){h()}),t.$on("editPost",function(){l.editPost(_.post.id,_.topicId,o.forums.posts.creation_type.topic,_.is_creator)}),t.$on("archivePost",function(){b()}),t.$on("unarchivePost",function(){b()}),t.$on("deletePost",function(){var e;_.is_admin||_.is_moderator||!(0<_.post.likes_count||0<_.post.comments_count)?(e="/forums/all_posts",1<t.breadcrumbs.length&&(e=t.breadcrumbs[t.breadcrumbs.length-2].url),l.deletePost(_.post.title,_.post.id,e)):c.notify("",_.lupHelper.showMessage("lup.forums.forum_post.deletion_restricted"))}),t.$on("createPost",function(){s.location="/forums/my_contribution/new_post"})}angular.module("lu").controller("ForumPostsShowController",e),e.$inject=["$scope","$rootScope","$filter","LupHelper","StorageFactory","$timeout","learnUponApi","$window","ForumPostShowActionFactory","$luPopover","ForumService","ForumPostsFactory","LupService"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c,u,d){var p=this,o=o.get();new s;function _(){r.location="/forums/my_contribution/new_post?topic_id="+p.topic.id+"&object_id="+p.topic.id+"&type_id="+t.forums.posts.creation_type.topic}function m(){d.switchButtons("createPost",!(p.topic.status_code==p.lupHelper.forums.topics.status_code.archived||!p.topic.allow_posting)||(p.is_admin||p.is_moderator)&&!p.topic.allow_posting&&p.topic.status_code!=p.lupHelper.forums.topics.status_code.archived),d.switchButtons("unpublishTopic",(p.is_admin||p.is_moderator)&&p.topic.status_code==p.lupHelper.forums.topics.status_code.published),d.switchButtons("publishTopic",(p.is_admin||p.is_moderator)&&p.topic.status_code==p.lupHelper.forums.topics.status_code.draft),d.switchButtons("archiveTopic",(p.is_admin||p.is_moderator)&&p.topic.type_code<=p.lupHelper.forums.topics.type_code.group&&p.topic.status_code!=p.lupHelper.forums.topics.status_code.archived),d.switchButtons("unarchiveTopic",(p.is_admin||p.is_moderator)&&p.topic.type_code<=p.lupHelper.forums.topics.type_code.group&&p.topic.status_code==p.lupHelper.forums.topics.status_code.archived),d.switchButtons("enablePosting",(p.is_admin||p.is_moderator)&&!(p.topic.allow_posting||p.topic.status_code==p.lupHelper.forums.topics.status_code.archived)),d.switchButtons("disablePosting",(p.is_admin||p.is_moderator)&&p.topic.allow_posting&&p.topic.status_code!=p.lupHelper.forums.topics.status_code.archived),d.switchButtons("editTopic",(p.is_admin||p.is_moderator)&&p.topic.type_code<=p.lupHelper.forums.topics.type_code.group),d.switchButtons("deleteTopic",p.is_admin&&p.topic.type_code<=p.lupHelper.forums.topics.type_code.group)}function f(e){var t;e.topic_data&&(!(t=JSON.parse(e.topic_data)).topic_title||(e=n.breadcrumbs[n.breadcrumbs.length-1])&&(e.title=t.topic_title),t.status_code&&(p.topic.status_code=t.status_code),p.topic.allow_posting=t.allow_posting,m())}p.lupHelper=t,p.posts=o.posts,p.createNewPost=_,p.skip_topics_page=o.skip_topics_page,p.is_admin=o.is_admin,p.forums_enabled=o.forums_enabled,p.topics_by_type=o.topics_by_type,p.post_cover_reference=o.post_cover_reference,p.hide_write_post_button=o.hide_write_post_button,p.show_3dm=o.show_3dm,p.topic=o.topic.attributes,p.is_moderator=o.is_moderator,p.creationType=t.forums.posts.creation_type.topic,p.currentUserPmId=o.current_user_pm_id,p.filterParams={show_topics_filter_typeahead:!1,show_courses_filter_typeahead:!1,show_lp_filter_typeahead:!1,is_admin:p.is_admin},p.orderTypes=[{label:p.lupHelper.showMessage("lup.forums.post_sort.latest_first"),value:"created_at.DESC",class:"select--ico-latest-first"},{label:p.lupHelper.showMessage("lup.forums.post_sort.oldest_first"),value:"created_at.ASC",class:"select--ico-oldest-first"},{label:p.lupHelper.showMessage("lup.forums.post_sort.most_likes"),value:"likes_count.DESC",class:"select--ico-most-popular"}],p.viewType=t.forums.card_types.grid,p.filterController="ForumsPostsFilterController as vm",p.filterTemplate="/tc/forums/posts-filter.html",p.filterURL="/forums/topic/"+p.topic.id+".json",m(),p.skip_topics_page?n.breadcrumbs=[{title:t.showMessage("lup.tabs.forums"),url:"/forums/all_posts"},{title:p.topic.title,url:"/forums/topic/"+p.topic.id}]:(o=[{title:t.showMessage("lup.tabs.forums"),url:"/forums"}],p.topics_by_type==t.forums.topics.type_code.course?(o.push({title:t.showMessage("lup.forums.topics.topics_by_course"),url:"/forums/topics_by_type/"+p.topics_by_type}),o.push({title:p.topic.title,url:"/forums/topic/"+p.topic.id+"?topics_by_type="+p.topics_by_type})):p.topics_by_type==t.forums.topics.type_code.learning_path?(o.push({title:t.showMessage("lup.forums.topics.topics_by_lp"),url:"/forums/topics_by_type/"+p.topics_by_type}),o.push({title:p.topic.title,url:"/forums/topic/"+p.topic.id+"?topics_by_type="+p.topics_by_type})):t.contains(r.location.pathname,"forums/moderation")?(o.push({title:t.showMessage("lup.subnav.lup_moderation"),url:"/forums/moderation"}),o.push({title:p.topic.title,url:"/forums/moderation/"+p.topic.id})):o.push({title:p.topic.title,url:"/forums/topic/"+p.topic.id}),n.breadcrumbs=o),p.post_cover_reference&&(p.force_refresh=!0,i(function(){return a.pingForProgress(p.post_cover_reference,p.posts.meta.prev_page,p.force_refresh,p.exposedFunction.fetch,!0)},500)),n.$on("createPost",function(){_()}),n.$on("unpublishTopic",function(){d.updateTopicStatus(p.lupHelper.forums.topics.status_code.draft,p.topic.status_code,p.topic.id).then(function(e){e.success&&f(e)})}),n.$on("publishTopic",function(){d.updateTopicStatus(p.lupHelper.forums.topics.status_code.published,p.topic.status_code,p.topic.id).then(function(e){e.success&&f(e)})}),n.$on("archiveTopic",function(){d.updateTopicStatus(p.lupHelper.forums.topics.status_code.archived,p.topic.status_code,p.topic.id).then(function(e){e.success&&(f(e),p.hide_write_post_button=!0)})}),n.$on("unarchiveTopic",function(){d.updateTopicStatus(p.lupHelper.forums.topics.status_code.draft,p.topic.status_code,p.topic.id).then(function(e){e.success&&(f(e),p.hide_write_post_button=!1)})}),n.$on("enablePosting",function(){d.enablePosting(!0,p.topic.id).then(function(e){e.success&&f(e)})}),n.$on("disablePosting",function(){d.enablePosting(!1,p.topic.id).then(function(e){e.success&&f(e)})}),n.$on("editTopic",function(){p.topics_by_type||u.open({templateUrl:"/tc/forums/topics_new.html",controller:"TopicsNewController",controllerAs:"vm",backdrop:"static",windowClass:"modal-box modal-box--lg",resolve:{topicId:function(){return p.topic.id}}}).result.then(function(e){f(e),p.topic.status_code==p.lupHelper.forums.topics.status_code.archived?p.hide_write_post_button=!0:p.hide_write_post_button=!1})}),n.$on("deleteTopic",function(){d.updateTopicStatus(p.lupHelper.forums.topics.status_code.deleted,p.topic.status_code,p.topic.id).then(function(e){r.location="/forums"})})}angular.module("lu").controller("ForumTopicsShowController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","$window","LupService","$timeout","ForumTopicsFactory","$luPopover","$q","$modal","ForumService"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,o=o.get();s.lupHelper=n,s.posts=o.posts,s.exposedFunction={},s.createNewPost=function(){r.location="/forums/my_contribution/new_post"},s.skip_topics_page=o.skip_topics_page,s.forums_enabled=o.forums_enabled,s.post_cover_reference=o.post_cover_reference,s.show_3dm=o.show_3dm,s.currentUserPmId=o.current_user_pm_id,s.filterParams={show_topics_filter_typeahead:o.show_topics_filter_typeahead,show_courses_filter_typeahead:o.show_courses_filter_typeahead,show_lp_filter_typeahead:o.show_lp_filter_typeahead,is_admin:o.is_admin},s.viewType=s.lupHelper.forums.card_types.grid,s.orderTypes=[{label:s.lupHelper.showMessage("lup.forums.post_sort.latest_first"),value:"created_at.DESC",class:"select--ico-latest-first"},{label:s.lupHelper.showMessage("lup.forums.post_sort.oldest_first"),value:"created_at.ASC",class:"select--ico-oldest-first"},{label:s.lupHelper.showMessage("lup.forums.post_sort.most_likes"),value:"likes_count.DESC",class:"select--ico-most-popular"}],s.filterController="ForumsPostsFilterController as vm",s.filterTemplate="/tc/forums/posts-filter.html",s.filterURL="/forums/all_posts.json",s.showTopicDot=!0,s.post_cover_reference&&(s.force_refresh=!0,i(function(){return a.pingForProgress(s.post_cover_reference,s.posts.meta.prev_page,s.force_refresh,s.exposedFunction.fetch,!0)},500)),s.skip_topics_page?t.breadcrumbs=[{title:s.lupHelper.showMessage("lup.forums.topics.all_posts"),url:"/forums/all_posts"}]:t.breadcrumbs=[{title:s.lupHelper.showMessage("lup.tabs.forums"),url:"/forums"},{title:s.lupHelper.showMessage("lup.forums.topics.all_posts"),url:"/forums/all_posts"}]}angular.module("lu").controller("ForumsAllPostsController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","$window","LupService","$timeout"]}(window.angular),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u){var d=this,r=r.get(),p=new i;function _(){u(function(){return c.pingForProgress(d.topic_icon_reference,d.all_topics.meta.prev_page,d.force_refresh,d.exposedFunction.fetch,!0)},500)}function m(){o.open({templateUrl:"/tc/forums/topics_new.html",controller:"TopicsNewController",controllerAs:"vm",backdrop:"static",windowClass:"modal-box modal-box--lg",resolve:{topicId:function(){return d.topic_id}}}).result.then(function(e){e.topic_data?(d.exposedFunction.fetch(),e=JSON.parse(e.topic_data),d.topic_icon_reference=e.topic_icon_reference,d.topic_icon_reference&&_()):d.exposedFunction.fetch()})}d.lupHelper=t,d.is_admin=r.is_admin,d.skip_topics_page=r.skip_topics_page,d.can_see_topics_by_lp=r.can_see_topics_by_lp,d.forums_enabled=r.forums_enabled,d.all_topics=r.all_topics,d.course_posts_colour=r.course_posts_colour,d.lp_posts_colour=r.lp_posts_colour,d.topic_icon_reference=r.topic_icon_reference,d.enablePosting=function(e,t){var n=t?I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_enable_posting"):I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_disable_posting"),o={allow_posting:t};a.confirm(I18n.t("lup.confirm"),n).then(function(){p.updateTopic(e,o).then(function(){d.exposedFunction.fetch()})})},d.updateTopicStatus=function(e,t){var n="",o="";t==d.lupHelper.forums.topics.status_code.deleted?(n=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_delete_topic"),o=I18n.t("lup.forums.topics.topic_action.delete_topic")):t==d.lupHelper.forums.topics.status_code.draft?(n=e.status_code==d.lupHelper.forums.topics.status_code.archived?I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_unarchive_topic"):I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_unpublish_topic"),o=e.status_code==d.lupHelper.forums.topics.status_code.archived?I18n.t("lup.forums.topics.topic_action.unarchive_topic"):I18n.t("lup.forums.topics.topic_action.unpublish_topic")):t==d.lupHelper.forums.topics.status_code.archived?(n=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_archive_topic"),o=I18n.t("lup.forums.topics.topic_action.archive_topic")):t==d.lupHelper.forums.topics.status_code.published&&(n=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_publish_topic"),o=I18n.t("lup.forums.topics.topic_action.publish_topic"));var r={status_code:t};a.confirm(o,n).then(function(){p.updateTopic(e.id,r).then(function(){d.exposedFunction.fetch()})})},d.linkToShowTopicsByType=function(e){l.location="/forums/topics_by_type/"+e},d.createNewPost=function(e){l.location=e?"/forums/my_contribution/new_post?topic_id="+e:"/forums/my_contribution/new_post"},d.exposedFunction={},d.createNewTopic=m,n.activeForumTopicDDM={},n.toggled=function(e,t){n.activeForumTopicDDM[t]=e},d.topic_icon_reference&&(d.force_refresh=!0,_()),d.topic_id=null,d.editTopic=function(n){o.open({templateUrl:"/tc/forums/topics_new.html",controller:"TopicsNewController",controllerAs:"vm",backdrop:"static",windowClass:"modal-box modal-box--lg",resolve:{topicId:function(){return n}}}).result.then(function(e){var t;e.topic_data?(d.exposedFunction.fetch(),!(t=JSON.parse(e.topic_data)).icon_url||(e=d.all_topics.data.find(function(e){return e.id==n}))&&(e.icon_url=t.icon_url),d.force_refresh=!0,d.exposedFunction.fetch(),d.topic_icon_reference=t.topic_icon_reference,_()):d.exposedFunction.fetch()})},d.viewType=d.lupHelper.forums.card_types.grid,d.is_admin&&(d.filterController="ForumsTopicsFilterController as vm",d.filterTemplate="/tc/forums/topics-filter.html"),e.$on("createTopic",function(){m()})}angular.module("lu").controller("ForumsIndexController",e),e.$inject=["$scope","$rootScope","LupHelper","$modal","StorageFactory","$luPopover","ForumTopicsFactory","paramsService","$window","LupService","$timeout"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,o=o.get(),c=new r;function u(){i(function(){return s.pingForProgress(l.topic_icon_reference,l.all_topics.meta.prev_page,l.force_refresh,l.exposedFunction.fetch,!0)},500)}l.lupHelper=n,l.all_topics=o.topics,l.viewType=l.lupHelper.forums.card_types.grid,l.filterController="ForumsTopicsFilterController as vm",l.filterTemplate="/tc/forums/topics-filter.html",l.filterParams={moderatorTypeaheadHidden:!0,groupTypeaheadHidden:!0},l.topic_icon_reference=o.topic_icon_reference,l.topic_icon_reference&&(l.force_refresh=!0,u()),t.breadcrumbs=[{title:l.lupHelper.showMessage("lup.tabs.forums"),url:"/forums"},{title:l.lupHelper.showMessage("lup.subnav.lup_moderation"),url:"/forums/moderation"}],l.exposedFunction={},l.updateTopicStatus=function(e,t){c.updateTopicStatus(e,t).then(function(e){l.exposedFunction.fetch()})},l.updateAllowPosting=function(e,t){c.updateAllowPosting(e,t).then(function(e){l.exposedFunction.fetch()})},l.editTopic=function(n){a.open({templateUrl:"/tc/forums/topics_new.html",controller:"TopicsNewController",controllerAs:"vm",backdrop:"static",windowClass:"modal-box modal-box--lg",resolve:{topicId:function(){return n}}}).result.then(function(e){var t;e.topic_data?(l.exposedFunction.fetch(),!(t=JSON.parse(e.topic_data)).icon_url||(e=l.all_topics.data.find(function(e){return e.id==n}))&&(e.icon_url=t.icon_url),l.force_refresh=!0,l.exposedFunction.fetch(),l.topic_icon_reference=t.topic_icon_reference,u()):l.exposedFunction.fetch()})}}angular.module("lu").controller("ForumsModerationController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","ForumTopicsFactory","$modal","$timeout","LupService"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,o=o.get(),c=new r;l.lupHelper=n,l.filterByStatus=function(e){l.filterStatus=e;var t=c.defaultFilterValues();t.selectedStatus=e,l.exposedFunction.changeFilterData(t,!1,!0,1).then(function(e){l.posts=e})},l.updatePostCounters=function(e,t){switch(e){case l.lupHelper.forums.posts.status_code.published:!function(e){switch(e){case l.lupHelper.forums.posts.action.deleting:case l.lupHelper.forums.posts.action.archiving:l.publishedCounter--}e={filterData:{selectedStatus:l.lupHelper.forums.posts.filter_status.published_only}};l.exposedFunction.fetchDataByCustomParams(e).then(function(e){l.posts=e})}(t);break;case l.lupHelper.forums.posts.status_code.draft:!function(e){switch(e){case l.lupHelper.forums.posts.action.deleting:case l.lupHelper.forums.posts.action.archiving:l.draftCounter--}e={filterData:{selectedStatus:l.lupHelper.forums.posts.filter_status.draft_only}};l.exposedFunction.fetchDataByCustomParams(e).then(function(e){l.posts=e})}(t)}},l.createNewPost=function(){s.location="/forums/my_contribution/new_post"},l.exposedFunction={clearFiltersImplementation:function(){var e={filterData:c.defaultFilterValues(),clearFiltersIndicator:!0,updateFilterData:!0};e.filterData.selectedStatus=l.filterStatus,e.topicType=l.lupHelper.forums.topics.type_code.portal,l.exposedFunction.fetchDataByCustomParams(e).then(function(e){l.posts=e})},isFilterApplied:function(e){if(!e)return!1;var t=c.defaultFilterValues();return t.selectedStatus=l.filterStatus,!angular.equals(t,e)}},l.post_cover_reference=o.post_cover_reference,l.forums_enabled=o.forums_enabled,l.filterParams={show_topics_filter_typeahead:o.show_topics_filter_typeahead,show_courses_filter_typeahead:o.show_courses_filter_typeahead,show_lp_filter_typeahead:o.show_lp_filter_typeahead,show_status_select:!1,is_admin:o.is_admin,for_contribution:!0},l.orderTypes=[{label:l.lupHelper.showMessage("lup.forums.post_sort.latest_first"),value:"created_at.DESC",class:"select--ico-latest-first"},{label:l.lupHelper.showMessage("lup.forums.post_sort.oldest_first"),value:"created_at.ASC",class:"select--ico-oldest-first"},{label:l.lupHelper.showMessage("lup.forums.post_sort.most_likes"),value:"likes_count.DESC",class:"select--ico-most-popular"}],l.publishedCounter=o.published_counter,l.draftCounter=o.draft_counter,l.viewType=l.lupHelper.forums.card_types.grid,l.filterController="ForumsPostsFilterController as vm",l.filterTemplate="/tc/forums/posts-filter.html",l.filterURL="/forums/my_contribution.json",l.currentUserPmId=o.current_user_pm_id,l.posting_is_enabled_for_learners=o.posting_is_enabled_for_learners,l.status=l.lupHelper.urlParam("selectedStatus"),l.status==l.lupHelper.forums.posts.filter_status.draft_only?l.filterStatus=l.lupHelper.forums.posts.filter_status.draft_only:l.filterStatus=l.lupHelper.forums.posts.filter_status.published_only,l.posts=o.posts,l.showTopicDot=!0,l.show_3dm=!0,t.breadcrumbs=[{title:l.lupHelper.showMessage("lup.tabs.forums"),url:"/forums"},{title:l.lupHelper.showMessage("lup.subnav.lup_my_contribution"),url:"/forums/my_contribution"}],l.post_cover_reference&&(l.force_refresh=!0,a(function(){var e=l.exposedFunction.returnFilterData(),t=!0;return e||(t=!1,e=c.defaultFilterValues()),e.selectedStatus=l.status,l.exposedFunction.changeFilterData(e,t,!1,1),i.pingForProgress(l.post_cover_reference,l.posts.meta.prev_page,l.force_refresh,l.exposedFunction.fetch,!0)},500))}angular.module("lu").controller("ForumsMyContributionController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","ForumPostsFactory","$timeout","LupService","$window"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a){var i=this;i.cancel=function(){n.close()},i.save=function(){i.image?o.getData(i.lupHelper.fileUploads.types.post_content_image,function(t){r(function(){var e=t.data.signature_data.attributes;o.uploadFiles(i.image,e,function(e){e=(new DOMParser).parseFromString(e.data,"text/xml").getElementsByTagName("Location")[0].childNodes[0].nodeValue;n.close({action:"save",image_url:e})},function(e){n.close({})})})},function(e){n.close({})},{params:{resource_id:i.post_uuid}}):n.close()},i.lupHelper=t,i.setImage=function(e){angular.isObject(e)&&(angular.equals(i.image,e)||(i.image=e))},i.post_uuid=a}angular.module("lu").controller("OpenImageUploadController",e),e.$inject=["$scope","LupHelper","$modalInstance","s3HelperFactory","$timeout","post_uuid"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;i.cancel=function(){n.close()},i.save=function(){i.blobImage&&i.croppedData&&(i.blobImage.name=i.image.name,n.close({image_for_upload:i.blobImage,image_for_preview:i.croppedData,alt_tag:i.altTag}))},i.lupHelper=t,i.setImage=function(e){angular.isObject(e)&&(angular.equals(i.image,e)||(i.image=e))},i.image=a,i.imageType=a.type?a.type:"image/jpeg",e.altTag=null,i.loadDone=!0,i.onLoadBegin=function(){setTimeout(function(){i.loadDone=!1,e.$digest()},i.uiCropperTimeout)},i.uiCropperTimeout=t.uiCropperConfig.uploadTimeout}angular.module("lu").controller("PostCoverCropperController",e),e.$inject=["$scope","LupHelper","$modalInstance","s3HelperFactory","$timeout","image"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=this;function p(){return!angular.equals(d.postsFactory.defaultFilterValues(),d.filterData)}d.lupHelper=n,d.lupService=s,d.filterParams=c,d.postsFactory=new i,d.save=function(){t.close({data:d.filterData,topicType:d.topicType,excluded_keys:["selected_topics","selected_tags"],isFilterApplied:p(),fetchData:!angular.equals(d.initState,d.filterData)})},d.cancel=function(){d.filterData=d.initState,d.topicType=d.initTopicType,t.close({data:d.filterData,topicType:d.topicType,excluded_keys:["selected_topics","selected_tags"],isFilterApplied:p(),fetchData:!1})},d.clear=function(){d.filterData=d.postsFactory.defaultFilterValues(),d.topicType=u},d.showTopicsTypeahead=function(){return!(!d.filterParams||!d.filterParams.show_topics_filter_typeahead&&!d.filterParams.show_courses_filter_typeahead&&!d.filterParams.show_lp_filter_typeahead)},d.showTopicsSwitchButton=function(){return!!(d.filterParams.show_topics_filter_typeahead&&(d.filterParams.show_courses_filter_typeahead||d.learning_paths_enabled&&d.filterParams.show_lp_filter_typeahead))},d.showStatusSelect=function(){return!!d.filterParams&&(d.filterParams.is_admin&&angular.isUndefined(d.filterParams.show_status_select)||d.filterParams.show_status_select)},d.isFilterApplied=!1,d.fetchTopicsApi=function(e){var t=o.defer();return r.get("/forums/topics/select.json",{params:{search:e.$query,page:e.$page,topic_type:d.topicType,selectedStatus:d.lupHelper.forums.topics.status_code.published,for_contribution:d.filterParams.for_contribution}}).success(function(e){e=e.topics.data;t.resolve(e)}).error(function(){t.reject("Failed to get topics")}),t.promise},d.changeTopicType=function(e){d.topicType!==e&&(d.topicType=e,d.filterData.selected_topics=[],d.filterData.topics=[])},d.postStatuses=[{id:d.lupHelper.forums.posts.filter_status.published_only,title:d.lupHelper.showMessage("lup.forums.post_statuses.published_only")},{id:d.lupHelper.forums.posts.filter_status.archived_only,title:d.lupHelper.showMessage("lup.forums.post_statuses.archived_only")},{id:d.lupHelper.forums.posts.filter_status.all_posts,title:d.lupHelper.showMessage("lup.forums.topics.all_posts")}],d.customSelectFn=a.groupCustomSelectFn,d.learning_paths_enabled=e.learning_paths_enabled,d.topicType=u,l?(d.filterData=l,d.initState=angular.copy(l)):(d.initState=d.postsFactory.defaultFilterValues(),d.filterData=d.postsFactory.defaultFilterValues()),d.initTopicType=d.topicType}angular.module("lu").controller("ForumsPostsFilterController",e),e.$inject=["$scope","$modalInstance","LupHelper","$q","$http","usersFilteringOptionsService","ForumPostsFactory","LupService","filterData","filterParams","topicType"]}(),function(){"use strict";function e(o,e,r,t,n,a,i,s,l,c,u,d){var p=this,n=n.get(),_=new i,m=new d;function f(e){var t=[];return angular.forEach(e,function(e){t.push(e.id)}),t}function g(){for(var e=0;e<p.originalOrder.length;e++)if(p.originalOrder[e]!=p.all_topics[e].id)return;return 1}function h(){m.get(null,{url:"/forums/show_reorder_topics.json",hideSpinner:!0},null).then(function(e){p.all_topics=e.data.all_topics.data,p.originalOrder=f(p.all_topics),p.reoder_in_progress_reference=!1})}function b(e){u(function(){return c.pingForProgress(e,!1,!1,h,!1)},500)}p.lupHelper=r,p.is_admin=n.is_admin,p.all_topics=n.all_topics.data,p.showSaveMenu=!1,p.originalOrder=f(n.all_topics.data),p.reoder_in_progress_reference=n.reoder_in_progress_reference,p.reorderTopics=function(){var e={new_order:f(p.all_topics)};p.showSaveMenu=!1,_.updateTopicsOrder(e).then(function(e){p.reoder_in_progress_reference=e.reordering_reference,b(e.reordering_reference)})},p.cancel=function(){l.location="/forums"},o.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===r.keyboard_keys[e.which]){if(e.preventDefault(),null!==o.rememberReorderIndex&&n!==o.rememberReorderIndex){e=t[n];return t[n]=t[o.rememberReorderIndex],t[o.rememberReorderIndex]=e,t=t.map(function(e){return e.id}),p.showSaveMenu=!g(),o.rememberReorderIndex=null,void o.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}o.rememberReorderIndex=n}},o.rememberReorderIndex=null,o.ariaLabelForContentSegments=function(e,t){return null!==o.rememberReorderIndex?o.rememberReorderIndex===e?r.showMessage("a11y.exam_order_list.selected",{answer_option:t}):r.showMessage("a11y.exam_order_list.swap",{answer_option:t}):r.showMessage("a11y.exam_order_list.select",{answer_option:t})},p.dragTopicListeners={allowDuplicates:!1,orderChanged:function(e){p.showSaveMenu=!g()}},e.breadcrumbs=[{title:p.lupHelper.showMessage("lup.tabs.forums"),url:"/forums"},{title:p.lupHelper.showMessage("lup.forums.index_action.reorder_topics"),url:"/forums/show_reorder_topics"}],p.reoder_in_progress_reference&&b(p.reoder_in_progress_reference)}angular.module("lu").controller("ForumsReorderTopicsController",e),e.$inject=["$scope","$rootScope","LupHelper","$modal","StorageFactory","$luPopover","ForumTopicsFactory","paramsService","$window","LupService","$timeout","learnUponApi"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,r=r.get(),c=new i;l.lupHelper=n,l.topics_by_type=r.topics_by_type,l.type_id=r.type_id,l.forums_enabled=r.forums_enabled,l.enablePosting=function(e,t){var n=t?I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_enable_posting"):I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_disable_posting"),o={allow_posting:t};a.confirm(I18n.t("lup.confirm"),n).then(function(){c.updateTopic(e,o).then(function(){l.exposedFunction.fetch()})})},l.createNewPost=function(e){s.location=e?"/forums/my_contribution/new_post?topic_id="+e:"/forums/my_contribution/new_post"},l.exposedFunction={},l.showTopicDot=!1,l.activeTopicDDM={},l.toggled=function(e,t){l.activeTopicDDM[t]=e},l.filterParams={topicStatuses:[{id:0,title:l.lupHelper.showMessage("lup.forums.topic_statuses.all_topics")},{id:l.lupHelper.forums.topics.status_code.published,title:l.lupHelper.showMessage("course_status.published")},{id:l.lupHelper.forums.topics.status_code.draft,title:l.lupHelper.showMessage("course_status.draft")}]},t.breadcrumbs=[{title:l.lupHelper.showMessage("lup.tabs.forums"),url:"/forums"}],l.type_id==l.lupHelper.forums.topics.type_code.course?t.breadcrumbs.push({title:l.lupHelper.showMessage("lup.forums.topics.topics_by_course"),url:"/forums/topics_by_type/"+l.type_id}):t.breadcrumbs.push({title:l.lupHelper.showMessage("lup.forums.topics.topics_by_lp"),url:"/forums/topics_by_type/"+l.type_id}),l.viewType=l.lupHelper.forums.card_types.grid,l.filterController="ForumsTopicsFilterController as vm",l.filterTemplate="/tc/forums/topics-filter.html",l.updateTopicStatus=function(e,t){var n=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_delete_topic"),o=I18n.t("lup.forums.topics.topic_action.delete_topic");o=t==l.lupHelper.forums.topics.status_code.draft?(n=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_unpublish_topic"),I18n.t("lup.forums.topics.topic_action.unpublish_topic")):(n=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_publish_topic"),I18n.t("lup.forums.topics.topic_action.publish_topic"));var r={status_code:t};a.confirm(o,n).then(function(){c.updateTopic(e,r).then(function(){l.exposedFunction.fetch()})})}}angular.module("lu").controller("ForumsTopicsByTypeController",e),e.$inject=["$scope","$rootScope","LupHelper","$modal","StorageFactory","$luPopover","ForumTopicsFactory","$window"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c){var u=this;function d(){return!angular.equals(u.filterData,p())}function p(){return{filterCreatedAfter:"",filterCreatedBefore:"",selectedStatus:u.topicStatuses[0].id,groups:[],moderators:[],selected_groups:[],selected_moderators:[]}}u.lupHelper=n,u.lupService=s,u.topicsFactory=new i,u.save=function(){t.close({data:u.filterData,excluded_keys:["selected_groups","selected_moderators"],isFilterApplied:d(),fetchData:!angular.equals(u.initState,u.filterData)})},u.cancel=function(){u.filterData=u.initState,t.close({data:u.filterData,excluded_keys:["selected_groups","selected_moderators"],isFilterApplied:d(),fetchData:!1})},u.clear=function(){u.filterData=p()},u.filterParams=c,u.isFilterApplied=!1,u.filterParams&&u.filterParams.topicStatuses?u.topicStatuses=u.filterParams.topicStatuses:u.topicStatuses=[{id:0,title:u.lupHelper.showMessage("lup.forums.topic_statuses.all_topics")},{id:u.lupHelper.forums.topics.status_code.published,title:u.lupHelper.showMessage("course_status.published")},{id:u.lupHelper.forums.topics.status_code.draft,title:u.lupHelper.showMessage("course_status.draft")},{id:u.lupHelper.forums.topics.status_code.archived,title:u.lupHelper.showMessage("course_status.archived")}],u.customSelectFn=a.groupCustomSelectFn,l?(u.filterData=l,u.initState=angular.copy(l)):(u.initState=p(),u.filterData=p())}angular.module("lu").controller("ForumsTopicsFilterController",e),e.$inject=["$scope","$modalInstance","LupHelper","$q","$http","usersFilteringOptionsService","ForumTopicsFactory","LupService","filterData","filterParams"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u,d,p,m,f,g){var h=this,b=new s,v=new c,c=r.get();function w(){h.choose_icon=!h.choose_icon,n.triggerFocusOnModalFooter=!1}function y(){h.topic.graphic=null,h.topic.topicImage=null,h.topic.icon_url=null}function M(e){e.$setValidity("emptyTitle",!!h.topic.title&&0<h.topic.title.trim().length),e.$setValidity("emptyIcon",!!h.topic.graphic||!!h.topic.topicImage||!!h.topic.icon_url),h.is_admin&&h.topic.type_code==t.forums.topics.type_code.group?e.$setValidity("emptyGroups",0<h.topic.groups.length):e.$setValidity("emptyGroups",!0)}h.lupHelper=t,h.type_code_select_values=[{value:t.forums.topics.type_code.portal,name:t.showMessage("lup.forums.create_topic.all_portal_users")},{value:t.forums.topics.type_code.group,name:t.showMessage("lup.forums.create_topic.group_restricted")}],h.allow_posting_select_values=[{value:t.forums.topics.create_post_permission.everyone,name:t.showMessage("lup.forums.create_topic.unrestricted_posting")},{value:t.forums.topics.create_post_permission.admins_and_moderators,name:t.showMessage("lup.forums.create_topic.restricted_posting")}],h.status_code_select_values=[{value:t.forums.topics.status_code.published,name:t.showMessage("course_status.published")},{value:t.forums.topics.status_code.draft,name:t.showMessage("course_status.draft")}],h.is_admin=!0,h.choose_icon=!1,h.topic={},h.topic.is_enabled=0,h.topic.type_code=h.type_code_select_values[0].value,h.topic.allow_posting=t.forums.topics.create_post_permission.everyone,h.topic.status_code=h.status_code_select_values[1].value,h.topic.color=r.getKey("default_topic_colour"),h.topic.groups=[],h.topic.moderators=[],h.selected_moderators=[],h.selected_groups=[],h.showSpinner=!1,h.openCropper=function(e){{e&&g.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 1},cropperImageSize:function(){return t.uiCropperConfig.imageSize}}}).result.then(function(e){e&&e.image_for_upload&&e.image_for_preview?(h.topic.topicImage=e.image_for_upload,h.alt_tag=e.alt_tag):h.image_for_upload||y()})}},h.alt_tag=null,h.topicId=m,h.is_moderator=c.is_moderator,h.editModal=!1,h.topicId&&(h.editModal=!0),h.filterLeaderboard=function(e,t){32!==e.keyCode&&13!==e.keyCode||(n.triggerFocusOnModalFooter=!0)},h.exitFocusTrap=function(e){27===e.keyCode&&(e.stopPropagation(),n.triggerFocusOnModalFooter=!1)},h.editModal&&(h.status_code_select_values.push({value:h.lupHelper.forums.topics.status_code.archived,name:t.showMessage("course_status.archived")}),v.getTopic(h.topicId).then(function(e){h.is_admin=e.is_admin,h.topic=e.topic.attributes,h.is_admin?(h.selected_moderators=f.populateDisplayNames(e.moderators.data),h.selected_groups=e.groups.data,h.topic.moderators=h.selected_moderators.map(function(e){return e.id}),h.topic.groups=h.selected_groups.map(function(e){return e.id})):delete h.topic.type_code,h.topic.allow_posting=h.topic.allow_posting?1:0}).catch(function(){})),h.fetchNonAdmins=function(e){var t=i.defer();return h.is_moderator?void 0:(b.getNonAdmins({search:e.$query,page:e.$page}).then(function(){var e;b.data.users?(e=_.reject(b.data.users.data,function(e){return _.contains(h.topic.moderators,e.id)}),e=f.populateDisplayNames(e),t.resolve(e)):t.reject("Failed to get Users!")}),t.promise)},h.fetchGroups=l.fetchGroups,h.customSelectFn=l.groupCustomSelectFn,h.isRestricted=function(){return h.topic.type_code==t.forums.topics.type_code.group},h.restrictedChanged=function(){h.topic.type_code==t.forums.topics.type_code.portal&&(h.topic.groups=[])},h.graphicSelection=w,h.chooseIcon=function(e){h.topic.graphic=e,h.topic.icon_url=null},h.cancelGraphicSelection=function(){n.triggerFocusOnModalFooter=!1,y(),w()},h.clearIconImage=y,h.maxFileSize=function(){return"5MB"},h.acceptedFiles=function(){return".jpg,.png,.jpeg"},h.save=function(e){if(h.showSpinner)return;M(e),e.$valid&&(h.showSpinner=!0,h.topic.title=h.topic.title.trim(),h.topic.description&&(h.topic.description=h.topic.description.trim()),h.topic.graphic&&!h.topic.topicImage?v.createTopic(h.topic).then(function(e){o.close({topic_data:e.topic_data})}):h.topic.topicImage&&u.getData(h.lupHelper.fileUploads.types.topic_image,function(e){d(function(){var t=e.data.signature_data.attributes;h.errorMsg=null,u.uploadFiles(h.topic.topicImage,t,function(e){h.topic.uuid=t.guid,h.topic.icon_file_name=h.topic.topicImage.name,h.topic.output_url=t.folder_path+h.topic.topicImage.name,h.topic.alt_tag=h.alt_tag,v.createTopic(h.topic).then(function(e){o.close({topic_data:e.topic_data})})},function(e){0<e.status&&(h.showSpinner=!1,h.errorMsg=e.status+": "+e.data)})})},function(e){},h.topic.id))},h.cancel=function(){if(h.showSpinner)return;o.dismiss()},h.icons=p.icons,h.update=function(e){if(h.showSpinner)return;M(e),e.$valid&&(h.showSpinner=!0,h.topic.title=h.topic.title.trim(),h.topic.description&&(h.topic.description=h.topic.description.trim()),h.topic.topicImage?h.topic.topicImage&&u.getData(h.lupHelper.fileUploads.types.topic_image,function(e){d(function(){var t=e.data.signature_data.attributes;h.errorMsg=null,u.uploadFiles(h.topic.topicImage,t,function(e){h.topic.uuid=t.guid,h.topic.icon_file_name=h.topic.topicImage.name,h.topic.output_url=t.folder_path+h.topic.topicImage.name,h.topic.alt_tag=h.alt_tag,v.updateTopic(h.topicId,h.topic).then(function(e){o.close({topic_data:e.topic_data})})},function(e){0<e.status&&(h.showSpinner=!1,h.errorMsg=e.status+": "+e.data)})})},function(e){},h.topic.id):(h.topic.icon_url||(h.topic.icon_file_name=null,h.topic.output_url=null),v.updateTopic(h.topicId,h.topic).then(function(e){o.close({topic_data:e.topic_data})})))}}angular.module("lu").controller("TopicsNewController",e),e.$inject=["$scope","$rootScope","LupHelper","$modalInstance","StorageFactory","$http","$q","UsersFactory","usersFilteringOptionsService","ForumTopicsFactory","s3HelperFactory","$timeout","IconsHelper","topicId","LupService","$modal"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=new a,s=this;s.settings=t.getKey("settings").attributes,s.lupHelper=r,s.save=function(e){e.$setPristine(),i.editConfigurations(s.settings).then(function(){})},s.cancel=function(e){s.settings=t.getKey("settings").attributes,e.$setPristine()},e.$watch("vm.settings.show_portal_leaderboards",function(e,t){e==t||e||(s.settings.show_group_leaderboards=!1)})}window.angular.module("lu").controller("GamificationConfigurationsIndexController",e),e.$inject=["$scope","StorageFactory","paramsService","$rootScope","LupHelper","GamificationConfigurationsFactory"]}(),function(u){"use strict";function e(e,t,n,o,r,a,i,s){var l=new i,c=this;c.lupHelper=s,c.level=u.copy(n),c.index=o,c.showWaiting=!1,c.selected_badges=a,c.save=function(e){e.$setValidity("emptyLevelName",s.checkStringExistence(c.level.name)),e.$setValidity("badgeNotSelected",0<c.selected_badges.length),c.level.name&&e.$setValidity("levelNameTooLong",c.level.name.length<=s.gamification_limitations.level_name_length);0===c.index?e.$setValidity("emptyPointsValue",0===c.level.achieved_over):e.$setValidity("emptyPointsValue",s.checkPositiveIntegerExistence(c.level.achieved_over));e.$valid&&(c.showWaiting=!0,c.level.badge_id=c.selected_badges[0].id,l.editLevel(c.level).then(function(e){t.close({action:"save",level:c.level})}))},c.cancel=function(){t.close()},c.fetchBadges=function(t){return _.filter(u.copy(r.data),function(e){return-1<e.name.toLowerCase().indexOf(t.$query.toLowerCase())})}}u.module("lu").controller("GamificationLevelsEditController",e),e.$inject=["$scope","$modalInstance","level","index","badges","levelBadge","GamificationLevelsFactory","LupHelper"]}(window.angular),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=new i,c=this;c.levels=t.getKey("levels"),c.badges=t.getKey("badges"),c.lupHelper=a,c.loadData=function(){var e={};e.params=n.get(),l.getList(e).then(function(){c.levels=l.data.levels})},c.showAchievementsLevels=function(t,n){var e=_.find(c.badges.data,function(e){return e.id===t.badge_id});r.open({templateUrl:"/tc/gamification_levels/edit_level.html",controller:"GamificationLevelsEditController as vm",size:"md",resolve:{level:function(){return t},index:function(){return n},badges:function(){return c.badges},levelBadge:function(){return[e]}}}).result.then(function(e){e&&"save"===e.action&&(c.levels.data[n]=e.level)})},c.level_badge=function(t){return _.find(c.badges.data,function(e){return e.id==t})},e.ariaLabel=a.showMessage("lup.gamification.achievements_levels"),e.ariaLabelSide=a.showMessage("lup.tips.side.gamification_achievements_levels.title")}window.angular.module("lu").controller("GamificationLevelsIndexController",e),e.$inject=["$scope","StorageFactory","paramsService","$rootScope","$modal","LupHelper","GamificationLevelsFactory","$timeout"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i,s=this;s.helper=a;var l=s.helper.search.waitTime;s.minimumChars=s.helper.search.minCharacters,s.searchQuery="",s.results=[],s.dialogOpen=!1,s.inputFocused=!1,s.SearchOptions={COURSES:1,USERS:2,GROUPS:3,LEARNING_PATHS:4,CATALOG:5,RESOURCES:6},s.currentPage=0,s.pageSize=10,s.hasMore=!0,s.isLoading=!1,s.focused=!1,s.is_student_search=!1,s.showNotFound=!1,s.minimumCharsRequired=!1,s.optionVisible={courses:!1,users:!1,groups:!1,catalog:!1},s.searchBy=s.SearchOptions.COURSES,s.toggleDetail=function(e){s.activePosition=s.activePosition==e?-1:e},s.isOptionSelected=function(e){return e===s.searchBy},s.searchPlaceholder=function(e){var t="";switch(s.searchBy){case s.SearchOptions.COURSES:t=e?s.helper.showMessage("lup.enrollments.search_enrollments"):s.helper.showMessage("lup.licenses.search_for_courses");break;case s.SearchOptions.USERS:t=s.helper.showMessage("lup.enrollments.search_users");break;case s.SearchOptions.GROUPS:t=s.helper.showMessage("lup.enrollments.search_groups");break;case s.SearchOptions.LEARNING_PATHS:t=s.helper.showMessage("lup.enrollments.search_learning_paths");break;case s.SearchOptions.CATALOG:t=s.helper.showMessage("lup.catalog.search_catalog");break;case s.SearchOptions.RESOURCES:t=s.helper.showMessage("lup.learner_resources.search_resources");break;default:t=s.helper.showMessage("search")}return t},s.loadMore=b,s.search=w,s.setSearchByOption=function(e){e&&s.searchBy!=e&&(s.searchBy=e,y());a.isIE&&m();p()},s.onSearchChange=y,s.tileProperty=function(e){switch(s.searchBy){case s.SearchOptions.GROUPS:case s.SearchOptions.RESOURCES:return e.title;case s.SearchOptions.USERS:return e.display_name;default:return e.name}},s.openDialog=f,s.closeDialog=g,s.isDialogOpen=h,s.getOptionNameByValue=function(e){try{return _.invert(s.SearchOptions)[e].toLowerCase()}catch(e){return"other"}},s.setDefaultSearchOption=function(){s.current_controller==s.gsControllersList.users?s.optionVisible.users&&(s.searchBy=s.SearchOptions.USERS):s.current_controller==s.gsControllersList.groups?s.optionVisible.groups&&(s.searchBy=s.SearchOptions.GROUPS):s.current_controller==s.gsControllersList.catalog?s.optionVisible.catalog&&(s.searchBy=s.SearchOptions.CATALOG):s.searchBy=s.optionVisible.courses?s.SearchOptions.COURSES:-1;-1===s.searchBy&&(s.searchBy=s.SearchOptions.COURSES)},s.gsControllersList={users:"lup/users",groups:"lup/groups",catalog:"lup/catalog"},s.current_controller=t.current_controller;var c,u=angular.element(r[0].body),d=angular.element("#search-wrap");function p(){angular.element("#header-search").focus()}function m(){angular.element("#header-search").blur()}function f(){s.dialogOpen=!0,p(),d.addClass("is-active"),u.addClass("overlay-visible"),u.addClass("hide-body-scroll"),u.addClass("blur-body")}function g(){s.dialogOpen=!1,s.searchQuery="",s.showNotFound=!1,s.minimumCharsRequired=!1,s.results.length=0,m(),d.removeClass("is-active"),u.removeClass("overlay-visible"),u.removeClass("hide-body-scroll"),u.removeClass("blur-body")}function h(){return!!s.dialogOpen}function b(t){s.currentPage++,s.isLoading=!0,o.search({page:s.currentPage,search:s.searchQuery,search_by:s.searchBy,is_student_search:s.is_student_search}).then(function(e){t&&(s.results.length=0),n(function(){s.isLoading=!1},300),s.searchBy==s.SearchOptions.COURSES?(!1===e.data.courses.meta.next_page&&(s.hasMore=!1),s.pageSize=e.data.courses.meta.page_size,angular.forEach(e.data.courses.data,function(e,t){s.results.push(e)})):s.searchBy==s.SearchOptions.USERS?(!1===e.data.users.meta.next_page&&(s.hasMore=!1),s.pageSize=e.data.users.meta.page_size,angular.forEach(e.data.users.data,function(e,t){s.results.push(e)})):s.searchBy==s.SearchOptions.GROUPS?(!1===e.data.groups.meta.next_page&&(s.hasMore=!1),s.pageSize=e.data.groups.meta.page_size,angular.forEach(e.data.groups.data,function(e,t){s.results.push(e)})):s.searchBy==s.SearchOptions.LEARNING_PATHS?(!1===e.data.learning_paths.meta.next_page&&(s.hasMore=!1),s.pageSize=e.data.learning_paths.meta.page_size,angular.forEach(e.data.learning_paths.data,function(e,t){s.results.push(e)})):s.searchBy==s.SearchOptions.CATALOG?(!1===e.data.catalog_results.meta.next_page&&(s.hasMore=!1),s.pageSize=e.data.catalog_results.meta.page_size,angular.forEach(e.data.catalog_results.data,function(e,t){s.results.push(e)})):s.searchBy==s.SearchOptions.RESOURCES?(!1===e.data.resources.meta.next_page&&(s.hasMore=!1),s.pageSize=e.data.resources.meta.page_size,angular.forEach(e.data.resources.data,function(e,t){s.results.push(e)})):s.showNotFound=!0,s.results.length<=0&&0<s.searchQuery.length?s.showNotFound||(s.showNotFound=!0):(s.showNotFound=!1,s.minimumCharsRequired=!1),v()})}function v(){clearTimeout(c),c=n(function(){e.ariaLiveToggle="assertive"},2e3)}function w(e){s.searchQuery&&s.searchQuery.length>=s.minimumChars?(s.is_student_search=e,h()||f(),s.currentPage=0,s.hasMore=!0,b(!0)):v()}function y(){f(),s.searchQuery||angular.element("#header-search")[0]===document.activeElement||(g(),s.results.length=0),i&&n.cancel(i),i=n(function(){w(s.is_student_search),i=null},l),0<s.searchQuery.length&&s.searchQuery.length<s.minimumChars?(s.minimumCharsRequired=!0,s.showNotFound=!1,s.results.length=0):s.minimumCharsRequired=!1}e.$watch("gs.inputFocused",function(e,t){}),e.$watch("gs.searchBy",function(e,t){s.results.length=0,s.currentPage=0}),t.$on("global-search-btn-open",function(){f()}),t.$on("global-search-btn-close",function(){g()}),t.$on("selectCoursesGS",function(){s.searchBy=s.SearchOptions.COURSES}),t.$on("selectLearningPathsGS",function(){s.searchBy=s.SearchOptions.LEARNING_PATHS}),t.$on("selectCatalogGS",function(){s.searchBy=s.SearchOptions.CATALOG}),t.$on("selectResourceGS",function(){s.searchBy=s.SearchOptions.RESOURCES})}angular.module("lu").controller("GlobalSearchController",e),e.$inject=["$scope","$rootScope","$timeout","globalSearchFactory","$document","LupHelper"]}(),function(){"use strict";function e(n,e,t,o){var r=this;r.linkTo=function(e,t){"create_enrollment"==t?n.location="/enrollments/new?course_id="+e:"preview"==t?function(e){a.createPreviewCourse(e).then(function(){n.location="/courses/"+e+"/preview/"+a.data.preview_enrollment_id})}(e):"enrollment_details"==t?n.location="/enrollments/"+e+"/details":t&&0<t.length?n.location="/courses/"+e+"/"+t:n.location="/courses/"+e;return},r.canEdit=function(e){{if(r.luHelper.courseIsCloning(e))return!1;if(e.portal_id==t.current_portal_id)return!0;if(t.catalog_enabled||t.ecommerce_enabled&&1==e.allowed_to_sell)return!0;if(!t.can_author_courses)return!1}return!1},r.luHelper=e;var a=new o}angular.module("lu").controller("GSCoursesController",e),e.$inject=["$window","LupHelper","$scope","CourseFactory"]}(),function(){"use strict";function e(n,e,t){new e;this.linkTo=function(e,t){t&&"view_users"==t?n.location="/groups/:group_id/users".replace(/:group_id/,e):t&&"batch_upload"==t?n.location="/batch-upload?add_to_groups=true&group_id=:group_id".replace(/:group_id/,e):t&&"view_courses"==t?n.location="/groups/:group_id/courses".replace(/:group_id/,e):t&&0<t.length?n.location="/groups/"+e+"/"+t:n.location="/groups/"+e;return}}angular.module("lu").controller("GSGroupsController",e),e.$inject=["$window","GroupsFactory","$modal"]}(),function(){"use strict";function e(t,e){this.helper=e,this.viewDescription=function(e){t.open({templateUrl:"/tc/resources/description_modal.html",controller:"ResourceDescriptionModalController",size:"lg",resolve:{resource:function(){return e}}})}}angular.module("lu").controller("GSResourcesController",e),e.$inject=["$modal","LupHelper"]}(),function(){"use strict";function e(n,e,t,o){this.haveMembershipTypesEnabled=e.have_membership_types_enabled,this.linkTo=function(e,t){"create_enrollment"==t?n.location="/enrollments/new?user_id="+e:"enrollments"==t?n.location="/users/"+e+"/enrollments":"user-settings"==t?n.location="/users/"+e+"/user-settings":t&&0<t.length?n.location="/users/"+e+"/"+t:n.location="/users/"+e;return}}angular.module("lu").controller("GSUsersController",e),e.$inject=["$window","$rootScope","LupHelper","$luPopover"]}(),function(){"use strict";function e(e,t,n){this.options=e,this.LupHelper=n,this.closeModal=function(){t.close()}}angular.module("lu").controller("DeleteGroupUsedAsAnOriginGroupController",e),e.$inject=["options","$modalInstance","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){e.LupHelper=r,e.group=o,e.cancel=function(){t.close()},e.save=function(){n.post("/angie/groups/"+e.group.id+"/automate-group-memberships.json").success(function(e){t.close(),a.location.reload()}).error(function(e){t.close()})},e.has_users=i}angular.module("lu").controller("GroupsAutomateGmsController",e),e.$inject=["$scope","$modalInstance","$http","group","LupHelper","$window","has_users"]}(),function(){"use strict";function e(t,n,e,o,r,a){t.LupHelper=e,t.save=function(e){e.$valid&&n.close({due_date:t.due_date,due_days:t.due_days,form_dirty:e.$dirty})},t.cancel=function(){n.dismiss("cancel")},t.due_date=null===r?"":o("displayDateTime")(r,"YYYY-MM-DD"),t.due_days=a}angular.module("lu").controller("GroupsCourseDueDate",e),e.$inject=["$scope","$modalInstance","LupHelper","$filter","due_date","due_days"]}(),function(){"use strict";function e(t,n,e){t.LupHelper=e,t.save=function(e){e.$setValidity("mustSelectOne",!!t.deleteEnrollments),e.$valid&&n.close(t.deleteEnrollments)},t.cancel=function(){n.dismiss("cancel")},t.deleteEnrollments="0"}angular.module("lu").controller("GroupsCourseRemove",e),e.$inject=["$scope","$modalInstance","LupHelper"]}(),function(){"use strict";function e(e,n,t,o,r,a){var i=this,s=new o;function l(){var e={};e.params=r.get(),s.getCourses(i.group.id,e).then(function(){i.courses=s.data.courses})}i.helper=a,i.courses=e.getKey("courses"),i.group=e.getKey("group").attributes,i.remove=function(e){s.removeCourse(i.group.id,e,function(){l()})},i.view=function(e){window.location="/courses/:course_id".replace(/:course_id/,e)},i.loadData=l,i.editDueDates=function(e,t,n){s.editDueDates(i.group.id,e,t,n,function(){l()})},n.ariaLabel=a.showMessage("learningpaths.course_list"),n.ariaLabelSide=a.showMessage("lup.a11y.groups_aside_content"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.breadcrumbs=[{title:i.helper.showMessage("lup.breadcrumbs.groups.index"),url:"/groups"},{title:i.group.title,url:"/groups/:group_id".replace(/:group_id/,i.group.id)},{title:i.helper.showMessage("lup.breadcrumbs.groups.courses"),url:"/groups/:group_id/courses".replace(/:group_id/,i.group.id)}]}angular.module("lu").controller("GroupsCoursesController",e),e.$inject=["StorageFactory","$rootScope","$modal","GroupsFactory","paramsService","LupHelper"]}(),function(){"use strict";function e(t,e,n,o,r){var a=new o;t.form={delete_enrollments:void 0},t.group=e,t.close=function(){n.close(!1)},t.save=function(){var e=t.form;a.destroy(t.group.id,e).then(function(){n.close(!0)}).catch(function(){n.close(!1)})},t.LupHelper=r,t.form.delete_enrollments=r.delete_group_enrollment_options.leave_enrollments}window.angular.module("lu").controller("GroupsDeleteController",e),e.$inject=["$scope","group","$modalInstance","GroupsFactory","LupHelper"]}(),function(){"use strict";function e(n,e,o,t,r,a,i,s,l){var c=new t;a.breadcrumbs=[{title:"Groups",url:"/groups"}],n.sortOptions=[{label:s.showMessage("lup.filters.group_name_asc"),value:"group_name.ASC",default:!0},{label:s.showMessage("lup.filters.group_name_desc"),value:"group_name.DESC"}],n.groups=e.getKey("groups"),n.loadData=function(){var e={};e.params=o.get(),e.params.dr_status=n.drStatus,c.getList(e).then(function(){n.groups=c.data.groups})},n.destroy=function(e){if(e.origin_group_used_in)return void i.open({controller:"DeleteGroupUsedAsAnOriginGroupController",templateUrl:"/tc/groups/delete-group-used-as-an-origin-group.html",windowClass:"modal-box",controllerAs:"vm",resolve:{options:function(){return{title:s.showMessage("lup.groups.used_as_origin_group.delete.title"),intro:s.showMessage("lup.groups.used_as_origin_group.delete.intro",{rules_number:e.origin_group_used_in.length}),content:s.showMessage("lup.groups.used_as_origin_group.delete.content"),listTitle:s.showMessage("lup.groups.used_as_origin_group.delete.list_title"),groupIdsHash:e.origin_group_used_in}}}});i.open({templateUrl:"/tc/groups/delete_group_modal.html",controller:"GroupsDeleteController",size:"lg",resolve:{group:function(){return e}}}).result.then(function(e){e&&n.loadData()})},n.helper=s,n.drStatus=null,n.ariaLabel=s.showMessage("lup.a11y.groups_main_list"),n.ariaLabelSide=s.showMessage("lup.a11y.groups_main_filter"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.groupFilter=[{id:s.dynamicRuleStatuses.enabled,title:s.showMessage("lup.dynamic_rules.user_settings.dynamic_rules")}],n.getCurrentPageA11Y=function(e){return s.showMessage("courses.groups")+" "+s.showMessage("lup.a11y.page")+" "+e+" "+s.showMessage("lup.a11y.loaded")},a.$on("exportToExcel",function(){!function(){var e={},t=new l;e.typeId=s.lupJobTypes.exportGroupsToExcel;var n=o.get();n.hasOwnProperty("search")&&(e.search=n.search);t.initiateJob(e)}()})}window.angular.module("lu").controller("GroupsIndexController",e),e.$inject=["$scope","StorageFactory","paramsService","GroupsFactory","$window","$rootScope","$modal","LupHelper","LupJobFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,c=new a;function u(){var e={};e.params=n.get(),c.getLeaderboard(l.group.id,e).then(function(){l.users=c.data.users})}l.users=t.getKey("users"),l.levels=t.getKey("levels"),l.group=t.getKey("group").attributes,l.lupHelper=r,l.userPosition=function(e,t){return e.position||10*(l.users.meta.page-1)+t+1},l.filterOptions=function(){return[{filterName:"filterPointsOver",value:l.filter_points_over},{filterName:"filterPointsUnder",value:l.filter_points_under},{filterName:"filterLevel",value:l.filter_level},{filterName:"filterNextLevel",value:l.filter_next_level},{filterName:"filterDateFrom",value:l.filter_date_from},{filterName:"filterDateTo",value:l.filter_date_to}]},l.clearFiltering=function(){l.filter_points_over="",l.filter_points_under="",l.filter_level="",l.filter_next_level="",l.filter_date_from="",l.filter_date_to="",u()},l.replaceEmptyNames=function(e){return e&&e.trim()?e:r.showMessage("lup.users.na")},l.loadData=u,l.filter_points_over="",l.filter_points_under="",l.filter_level="",l.filter_next_level="",l.filter_date_from="",l.filter_date_to="",l.filteringControl={},e.ariaLabel=l.group.title+" "+l.lupHelper.showMessage("lup.subnav.lup_portal_leaderboard"),e.ariaLabelSide=l.lupHelper.showMessage("lup.gamification.filter_leaderbord"),o.breadcrumbs=[{title:r.showMessage("lup.breadcrumbs.groups.index"),url:"/groups"},{title:l.group.title,url:"/groups/:group_id".replace(/:group_id/,l.group.id)},{title:r.showMessage("lup.gamification.portal_leaderbord"),url:"/groups/:group_id/leaderboard".replace(/:group_id/,l.group.id)}],o.$watch(function(){return l.filter_level},function(e,t){e!==t&&(l.filter_next_level=function(t){if("number"!=typeof t)return"";var e=_.indexOf(l.levels.data,_.find(l.levels.data,function(e){return e.achieved_over===t}));return l.levels.data[e+1]?l.levels.data[e+1].achieved_over:""}(e))})}window.angular.module("lu").controller("GroupsLeaderboardController",e),e.$inject=["$scope","StorageFactory","paramsService","$rootScope","LupHelper","GroupsFactory","$q","$http"]}(),function(){"use strict";function e(e,t,n){e.LupHelper=n,e.save=function(){t.close("remove")},e.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("GroupsLearningJourneyRemove",e),e.$inject=["$scope","$modalInstance","LupHelper"]}(),function(){"use strict";function e(e,n,t,o,r,s,a,l,i,c,u){var d=this;function p(e){var t=l.get(),n=s.protocol()+"://"+s.host()+"/angie/learning-journeys/assignment-triggers/groups.json";d.currentPage=e.page;function o(e){return e=n+"?group_id="+d.group.id+"&page="+e+"&page_size="+r,t.search&&(e+="&search="+encodeURIComponent(t.search)),e}var r=e.page_size,a=e.has_next,i=1<d.currentPage;return{data:e.data,meta:{page:d.currentPage,page_size:r,prev_page:i&&o(d.currentPage-1),next_page:!!a&&o(d.currentPage+1)}}}d.helper=i,d.group=e.getKey("group").attributes,d.remove=function(e){var t=u.defer(),e="/angie/learning-journeys/assignment-triggers/groups/"+d.group.id+"/workflows/"+e+".json";return r.delete(e).success(function(){t.resolve({result:!0,message:d.helper.showMessage("lup.ljw.groups.learning_journeys.remove.success")})}).error(function(){t.reject(d.helper.showMessage("lup.ljw.groups.learning_journeys.remove.error"))}),t.promise},d.openRemoveModal=function(e){o.open({templateUrl:"/tc/groups/remove_learning_journey_modal.html",controller:"GroupsLearningJourneyRemove",size:"lg"}).result.then(function(){d.remove(e).then(function(){d.loadData(),c.success(d.helper.showMessage("lup.ljw.groups.learning_journeys.remove.success"))},function(){c.error(d.helper.showMessage("lup.ljw.groups.learning_journeys.remove.error"))})})},d.view=function(e,t){window.location.href="/learning-journey/"+e+"/"+t+"/edit"},d.loadData=function(){var e=l.get(),t=u.defer();return r.get("/angie/learning-journeys/assignment-triggers/groups.json",{params:{group_id:d.group.id,search:e.search,page:d.currentPage}}).success(function(e){d.learningJourneys=p(e),t.resolve(d.learningJourneys)}).error(function(){t.reject(d.helper.showMessage("lup.ljw.groups.learning_journeys.get.error"))}),t.promise},d.currentPage=1,d.loadData(),n.ariaLabel=i.showMessage("lup.a11y.learning_journey_list"),n.ariaLabelSide=i.showMessage("lup.a11y.groups_aside_content"),n.activeLearningJourneyDDM={},n.toggled=function(e,t){n.activeLearningJourneyDDM[t]=e},n.breadcrumbs=[{title:d.helper.showMessage("lup.breadcrumbs.groups.index"),url:"/groups"},{title:d.group.title,url:"/groups/:group_id".replace(/:group_id/,d.group.id)},{title:d.helper.showMessage("lup.breadcrumbs.groups.learning_journeys"),url:"/groups/:group_id/learning-journeys".replace(/:group_id/,d.group.id)}],t.$on("lupPagination:page-change-data",function(e,t){t.data&&(d.learningJourneys=p(t.data))})}angular.module("lu").controller("GroupsLearningJourneysController",e),e.$inject=["StorageFactory","$rootScope","$scope","$modal","$http","$location","GroupsFactory","paramsService","LupHelper","toastr","$q"]}(),function(){"use strict";function e(t,n,e){t.LupHelper=e,t.save=function(e){e.$valid&&n.close(t.allowGroupToFinish?0:1)},t.cancel=function(){n.dismiss("cancel")},t.allowGroupToFinish=!0}angular.module("lu").controller("GroupsLearningPathRemove",e),e.$inject=["$scope","$modalInstance","LupHelper"]}(),function(){"use strict";function e(o,n,r,e,t,a){o.formData={managers:[]},o.LupHelper=t,o.group=e,o.managersSelectedArray=[],o.managerSelected=function(e,t,n){o.managersSelectedArray.push(e),o.managerSearch=""},o.fetchManagers=function(e){var t=_.map(o.managersSelectedArray,function(e){return e.user_id});return r.get("/users/managers.json",{params:{search:e,group_id:o.group.id}}).then(function(e){e=_.reject(e.data.managers.data,function(e){return _.contains(t,e.user_id)});return e=e,_.map(e,function(e){return new a(e)})})},o.save=function(e){{var t;o.managersSelectedArray.length&&(t={managers_form_data:{managers:o.managersSelectedArray}},r.post("/groups/"+o.group.id+"/managers.json",t).success(function(e){n.close()}).error(function(e){n.close()}))}},o.cancel=function(){n.dismiss()},o.removeManager=function(e){o.managersSelectedArray.splice(e,1)}}window.angular.module("lu").controller("GroupsManagersAddController",e),e.$inject=["$scope","$modalInstance","$http","group","LupHelper","GroupManagerVM"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s){var l=this,c=new o;function u(){t.open({templateUrl:"/tc/groups/add_manager_modal.html",controller:"GroupsManagersAddController",size:"lg",resolve:{group:function(){return l.group}}}).result.then(function(){l.loadData()})}l.managers=e.getKey("managers"),l.group=e.getKey("group").attributes,l.helper=a,n.ariaLabel=a.showMessage("lup.a11y.group_list_of_managers"),n.ariaLabelSide=a.showMessage("lup.a11y.groups_aside_content"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.breadcrumbs=[{title:l.helper.showMessage("lup.breadcrumbs.groups.index"),url:"/groups"},{title:l.group.title,url:"/groups/:group_id".replace(/:group_id/,l.group.id)},{title:l.helper.showMessage("lup.breadcrumbs.groups.managers"),url:"/groups/:group_id/managers".replace(/:group_id/,l.group.id)}],n.$on("addGroupManager",function(){u()}),l.showAddManagerModal=u,l.loadData=function(){var e={};e.params=i.get(),c.getManagers(l.group.id,e).then(function(){l.managers=c.data.managers})},l.destroy=function(t){r.confirm(I18n.t("lup.confirm"),I18n.t("groups.are_you_sure_you_want_to_remove_this_manager",{manager_name:t.display_name})).then(function(e){c.removeManager(l.group.id,t.id).then(function(){l.loadData()})})},l.update=function(t){s(function(){var e={};e.can_create_users=t.can_create_users,c.updateManager(l.group.id,t.id,e).then(function(){}).catch(function(e){l.loadData()})})},l.renderPermissions=function(e){return e&&e.permissions.length?_.map(e.permissions,function(e){return l.helper.translateManagerPermissions(e)}).join(", "):l.helper.showMessage("lup.groups.manager_permissions.no_permissions")}}angular.module("lu").controller("GroupsManagersController",e),e.$inject=["StorageFactory","$rootScope","$modal","GroupsFactory","$luPopover","LupHelper","paramsService","$timeout"]}(),function(){"use strict";function e(e,t,n){e.group={},e.helper=n,t.breadcrumbs=[{title:I18n.t("lup.groups.breadcrumbs.index"),url:"/groups"}],e.save=function(e){e.$valid&&e.commit()},e.ariaLabel=n.showMessage("lup.a11y.groups_add_new_group"),e.ariaLabelSide=n.showMessage("lup.a11y.groups_aside_content")}window.angular.module("lu").controller("GroupsNewController",e),e.$inject=["$scope","$rootScope","LupHelper"]}(),function(){"use strict";function e(e,t,n,o){e.Helper=n,e.yes=function(){o.post("/groups/enable_client_portals.json",{}).success(function(e){t.close({action:"success"})}).error(function(e){t.close({action:"error"})})},e.no=function(){t.close({action:"close"})}}angular.module("lu").controller("GroupsSelectTypeController",e),e.$inject=["$scope","$modalInstance","LupHelper","$http"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l){var c=new o,u=new i;function d(){t.breadcrumbs=[{title:"Groups",url:"/groups"},{title:n.group.title}]}n.group=e.getKey("group").attributes,n.rules=e.getKey("rules"),n.membership_types_enabled=e.getKey("membership_types_enabled"),n.helper=r,d(),n.editMode=!1,n.editGroup=function(){n.editMode=!0},n.save=function(e){var t={group_form:n.group};e.$dirty&&c.update(n.group.id,t).then(function(e){d(),n.group_form.$setPristine()})},n.cancel=function(){n.group=e.getKey("group").attributes,n.group_form.$setPristine()},n.ruleTypeName=function(e){var t=r.showMessage("lup.auto_assign_rules.data_types.custom_user_data");switch(e){case r.rule_data_types.custom_user_data:t=r.showMessage("lup.auto_assign_rules.data_types.custom_user_data");break;case r.rule_data_types.all_users:t=r.showMessage("lup.auto_assign_rules.data_types.all_users");break;case r.rule_data_types.email_domain:t=r.showMessage("lup.auto_assign_rules.data_types.email_domain");break;case r.rule_data_types.membership_type:t=r.showMessage("lup.auto_assign_rules.data_types.membership_type")}return t},n.editRule=function(t){(function(e){var t=a.defer();e?u.getRuleData(e.id).then(function(e){t.resolve(e.data.rule_data.attributes)},function(){t.reject("Failed to retrieve rule data"),$log.error("Failed to retrieve rule data")}):t.resolve(null);return t.promise})(t).then(function(e){s.open({templateUrl:"/tc/auto_assign_rules/edit.html",controller:"AutoAssignRulesEditController as vm",size:"md",resolve:{rule:function(){return t},ruleData:function(){return e},membershipTypesEnabled:function(){return n.membership_types_enabled}}}).result.then(function(t){var e;t&&"updated"===t.action&&(e=_.indexOf(n.rules.data,_.find(n.rules.data,function(e){return e.id==t.rule.id})),t.rule.group_id===n.group.id?n.rules.data[e]=t.rule:n.rules.data.splice(e,1))})})},n.deleteRule=function(t){l.confirm(r.showMessage("lup.auto_assign_rules.delete_rule.title",{rule_name:t.name}),r.showMessage("lup.auto_assign_rules.delete_rule.text")).then(function(e){u.deleteRule(t.id).then(function(){var e=_.indexOf(n.rules.data,t);n.rules.data.splice(e,1)})})},n.ariaLabel=r.showMessage("lup.a11y.groups_add_edit_group"),n.ariaLabelSide=r.showMessage("lup.a11y.groups_aside_content"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e}}window.angular.module("lu").controller("GroupsShowController",e),e.$inject=["$scope","StorageFactory","$rootScope","GroupsFactory","LupHelper","$q","AutoAssignRulesFactory","$modal","$luPopover"]}(),function(){"use strict";function e(n,o,r,e,a,i,s){n.LupHelper=i,n.group=e,n.usersSelectedArray=[],n.fetchUsers=function(e){var t=s.defer();return r.get("/all_users.json",{params:{search:e.$query,include_pending:!0,exclude_disabled:!0,page:e.$page,page_size:i.pagination_sizes.typeadhead_default}}).success(function(e){e=e.users.data,e=_.map(e,function(e){return(e=new a(e)).pending?(e.display_name=i.showMessage("lup.enrollments.selected_pending_user",{email:e.email}),e.user_id=e.invite_id):e.user_id=e.user_id,e.pending=!!e.pending,e.firstLineDisplay=angular.isDefined(e.display_name)?e.display_name:"",e.secondLineDisplay=angular.isDefined(e.email)?e.email:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get users!")}),t.promise},n.compareUsers=function(e,t){return!!(angular.isDefined(!!e)&&angular.isDefined(e.user_id)&&angular.isDefined(!!t)&&angular.isDefined(t.user_id))&&e.user_id===t.user_id},n.usersTrackerFn=function(e,t,n){return e.user_id},n.hasSelectedUsers=function(){return 0===n.usersSelectedArray.length},n.cancel=function(){o.close()},n.save=function(e){{var t;0<n.usersSelectedArray.length&&n.users_form.$valid&&(t={users_form_data:{users:_.select(n.usersSelectedArray,function(e){return!e.pending}),pending_users:_.select(n.usersSelectedArray,function(e){return e.pending})}},r.post("/groups/"+n.group.id+"/users.json",t).success(function(e){o.close()}).error(function(e){o.close()}))}}}angular.module("lu").controller("GroupsUsersAddController",e),e.$inject=["$scope","$modalInstance","$http","group","GroupUserVM","LupHelper","$q"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s,l,c,u,d,p,m,f){var g=new n,h=new l,b=this;function v(e){"all"===e&&(o.ariaLabel=b.helper.showMessage("lup.groups.total_users")),"opened"===e&&(o.ariaLabel=b.helper.showMessage("lup.groups.active_users")),"closed"===e&&(o.ariaLabel=b.helper.showMessage("lup.groups.pending_users"))}function w(e){return{meta:e.meta,data:_.map(e.data,function(e){return new a(e)})}}function y(){var e={};e.params=r.get(),g.getUsers(b.group.id,e).then(function(e){var t={};t.meta=g.data.users.meta,b.filter=e.data.filter,b.userCounts=e.data.user_counts,t.data=_.map(g.data.users.data,function(e){return new a(e)}),b.users=t,e.data.rule_processing&&e.data.rule_pool_job_reference&&(b.ruleProcessing=e.data.rule_processing,b.ruleProcessingJobReference=e.data.rule_pool_job_reference,S()),b.triggerFocusOnMain=!0,M(b.filter)})}function M(e){o.$broadcast("hideAction","hideExport","all"===e||!!b.users&&0===b.users.data.length)}function S(){var e="/download_jobs/"+b.ruleProcessingJobReference+"/status.json";return p.get(e,{}).then(function(e){e.data.job.status_id!==b.helper.lupJobStatuses.completed?b.timeoutPromise=m(function(){S()},1e4):(b.processingJobReference=null,b.uploadingInProcess=!1,f.location.reload())})}b.rule=e.getKey("rule"),b.ruleProcessing=e.getKey("rule_processing"),b.ruleProcessingJobReference=e.getKey("rule_pool_job_reference"),b.dynamic_rules_allowed=e.getKey("dynamic_rules_allowed"),b.group=e.getKey("group").attributes,b.filter=e.getKey("filter"),b.userCounts=e.getKey("user_counts"),b.users=w(e.getKey("users")),b.users.data=_.map(b.users.data,function(e){return new a(e)}),b.ruleProcessing&&S(),b.helper=s,b.userDDMActive={},b.toggled=function(e,t,n){b.userDDMActive[t||n]=e},b.userStatuses=u.userStatuses,b.userTypes=u.userTypes,b.association_membership_types=d.getKey("association_membership_types"),b.filterStatus="",b.filterGroups=[],b.filterGroupIds=[],b.filterType="",b.filterCreatedBefore="",b.filterCreatedAfter="",b.filterMembershipType="",b.triggerFocusOnMain=!1,b.onFocusTrapDeactivate=function(){b.triggerFocusOnMain=!1},b.onEscapeDeactivates=function(){return!b.userDDMActive||!Object.keys(b.userDDMActive).filter(function(e){return b.userDDMActive[e]}).length},b.getCurrentPageA11Y=function(e){return b.helper.showMessage("courses.users")+" "+b.helper.showMessage("lup.a11y.page")+" "+e+" "+b.helper.showMessage("lup.a11y.loaded")},o.ariaLabelSide=s.showMessage("lup.a11y.single_grp_users_list"),v("all"),o.getA11Ytranslation=function(){var e=" "+b.helper.showMessage("lup.a11y.page");return b.users.meta&&b.users.meta.page&&(e+=" "+b.users.meta.page),e+=" "+b.helper.showMessage("lup.a11y.loaded"),"all"===b.filter?b.helper.showMessage("lup.groups.total_users")+e:"active"===b.filter?b.helper.showMessage("lup.groups.active_users")+e:"pending"===b.filter?b.helper.showMessage("lup.groups.pending_users")+e:""},b.filteringControl={},b.filterOptions=function(){var e=[{filterName:"filter",value:b.filter},{filterName:"filterType",value:b.filterType},{filterName:"filterCreatedBefore",value:b.filterCreatedBefore},{filterName:"filterCreatedAfter",value:b.filterCreatedAfter}];""!==b.filter&&"all"!==b.filter&&"active"!==b.filter||e.push({filterName:"filterStatus",value:b.filterStatus});o.have_membership_types_enabled&&e.push({filterName:"filterMembershipType",value:b.filterMembershipType});return e},b.clearFiltering=function(){return b.filterStatus="",b.filterType="",b.filterCreatedBefore="",b.filterCreatedAfter="",b.filterMembershipType="",void y()},b.groupCustomSelectFn=u.groupCustomSelectFn,o.breadcrumbs=[{title:b.helper.showMessage("lup.breadcrumbs.groups.index"),url:"/groups"},{title:b.group.title,url:"/groups/:group_id".replace(/:group_id/,b.group.id)},{title:b.helper.showMessage("lup.breadcrumbs.groups.users"),url:"/groups/:group_id/users".replace(/:group_id/,b.group.id)}],M(b.filter),o.$on("addGroupUser",function(){t.open({templateUrl:"/tc/groups/add_user_modal.html",controller:"GroupsUsersAddController",size:"lg",backdrop:"static",resolve:{group:function(){return b.group}}}).result.then(function(){b.loadData()})}),o.$on("inviteGroupUser",function(){t.open({templateUrl:"/tc/groups/invite_user_modal.html",controller:"GroupsUsersInviteController",size:"lg",resolve:{group_id:function(){return b.group.id}}}).result.then(function(){b.loadData()})}),o.$on("exportToExcel",function(){var e,t,n=null,o={active:s.lupJobTypes.exportUsersToExcel,pending:s.lupJobTypes.exportInvitesToExcel};"active"!=b.filter&&"pending"!=b.filter||(n=o[b.filter],e=r.get(),t={},o=new c,e&&e.search&&(t.search=e.search),t.include_pending=!1,t.typeId=n,t.filterGroup=b.group.id,o.initiateJob(t))}),o.$on("automateGroupMemberships",function(){t.open({templateUrl:"/tc/groups/automate_gm_modal.html",controller:"GroupsAutomateGmsController",size:"lg",resolve:{group:function(){return b.group},has_users:function(){return!!b.userCounts.all}}}).result.then(function(){b.loadData()})}),o.mergeSearch=!0,b.loadData=y,b.destroy=function(e){(e.pending?function(t){i.confirm(I18n.t("lup.confirm"),I18n.t("group.are_you_sure_you_want_yo_cancel_this_invitation")).then(function(e){g.removePendingUser(b.group.id,t.invite_id).then(function(){y()}).catch(function(e){y()})})}:function(t){i.confirm(I18n.t("lup.confirm"),I18n.t("group.are_your_sure_you_want_to_delete_this_user_from_this_group")).then(function(e){g.removeUser(b.group.id,t.user_id).then(function(){y()}).catch(function(e){y()})})})(e)},b.resendInvite=function(e){h.resendInvite(e.invite_id).then(function(){})},b.showInviteUrl=function(e){h.showInvite(e.invite_id).then(function(){var e=h.data.pending_user.attributes.auth_code;s.showTip("lup.users.tooltip_invite_link",{auth_code:e,domain_for_url:location.host})})},b.formatUsers=w,b.filterUsers=function(e){b.triggerFocusOnMain=!1,o.$broadcast("clearListHeaderSearch"),r.set({filter:e}),v(e),y()}}angular.module("lu").controller("GroupsUsersController",e),e.$inject=["StorageFactory","$modal","paramsService","GroupsFactory","$rootScope","GroupUserVM","$luPopover","LupHelper","UsersFactory","LupJobFactory","usersFilteringOptionsService","StorageFactory","$http","$timeout","$window"]}(),function(){"use strict";function e(n,o,r,e,t){var a=new e;n.LupHelper=r,n.save=function(e){var t={invite:{email_addresses:n.email_addresses},invite_for_group_id:n.group_id};e.$setValidity("validEmails",r.emailListValidation(n.email_addresses)),e.$valid&&a.inviteUsers(t).then(function(e){o.close({response:e})})},n.cancel=function(){o.close()},n.group_id=t}angular.module("lu").controller("GroupsUsersInviteController",e),e.$inject=["$scope","$modalInstance","LupHelper","UsersFactory","group_id"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l){e.get();n.LupHelper=t,n.questions=o.questions,n.changedInput=0;o=new Array(n.questions.length).fill("");n.answers=o,n.showSpinner=!1,n.disableButtons=!1,n.setChangedInput=function(){n.changedInput=1},n.save=function(e){var t=i.defer();n.showSpinner=!0,n.disableButtons=!0,s.post("/in_app_survey_responses_list.json",{questions_id:r,responses:n.answers}).success(function(e){n.showSpinner=!1,n.disableButtons=!1,a.close(!1),t.resolve(e)}).error(function(){t.reject("Failed to save responses."),n.showSpinner=!1,n.disableButtons=!1})},n.cancel=function(){1==n.changedInput?l.confirm(t.showMessage("lup.confirm"),"Are you sure you want to close the window and dismiss all data?").then(function(e){a.close(!0)}):a.close(!0)}}angular.module("lu").controller("InAppSurveyQuestionsShowController",e),e.$inject=["$scope","StorageFactory","LupHelper","survey","questionsId","$modalInstance","$q","$http","$luPopover"]}(),function(){"use strict";window.angular.module("lu").controller("LearnerResourceListsIndexController",["$scope","$log","$http","$rootScope","LearnerResourceListFactory","StorageFactory","LupHelper","$window","$luPopover","paramsService","$modal","notifyFactory",function(t,e,n,o,r,a,i,s,l,c,u,d){t.helper=i;var a=a.get(),p=new r;function _(){var e={};e.params=c.get(),p.getList(e).then(function(){t.resources=p.data})}t.resources=a.resources,t.hide_last_updated_resource_date=a.hide_last_updated_resource_date,t.categories=a.categories.data,t.catname=a.cat_name,t.hide_last_updated=a.hide_last_updated,t.category=0,t.filteringControl={},t.getCurrentPageA11Y=function(e){return i.showMessage("pagetitles.resources")+" "+i.showMessage("lup.a11y.page")+" "+e+" "+i.showMessage("lup.a11y.loaded")},a.is_student&&o.$broadcast("selectResourceGS"),t.getOptionName=function(e){var t=e.title;return 0<e.usage_count&&(t=t+"("+e.usage_count+")"),t},t.viewDescription=function(e){var t=new r;t.awardActivityBadge(e.id).then(function(){t.data&&angular.isArray(t.data.awarded_badges)&&0<t.data.awarded_badges.length&&d.onBadgeAwarded(t.data.awarded_badges)}),u.open({templateUrl:"/tc/resources/description_modal.html",controller:"ResourceDescriptionModalController",size:"lg",resolve:{resource:function(){return e}}})},t.clearFiltering=function(){t.category=0,_()},t.filterOptions=function(){return[{filterName:"filterCategory",value:t.category}]},t.loadData=_}])}(),function(){"use strict";function e(e,t,n,o){e.description=n,e.Helper=o,e.save=function(){var e=o.getHTMLFromCKEditor("resource_description_wysi");t.close({description:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("LearnerResourcesAddDescriptionController",e),e.$inject=["$scope","$modalInstance","description","LupHelper"]}(),function(){"use strict";function e(e,t,r,n,o,a,i,s,l,c,u){var d,p=new t;function m(){r.resource=a.getKey("resource").attributes,r.portal_categories=a.getKey("portal_categories").data,r.resource_categories=a.getKey("resource_categories").data,r.resource_groups=a.getKey("resource_groups").data,r.sharable_url=a.getKey("sharable_url")}m(),r.Helper=n,r.luPopover=o,r.cancel=function(e){m(),e.$setPristine()},r.save=function(t){p.resource=r.resource;var e={learner_resource:r.resource,resource_groups:r.resource_groups,resource_categories:r.resource_categories};return p.save(e,r.resource.id).then(function(){var e=JSON.parse(p.data.json_service);a.setKey("resource",e.resource),a.setKey("sharable_url",e.sharable_url),a.setKey("resource_categories",e.resource_categories),a.setKey("resource_groups",e.resource_groups),t.$setPristine()})},r.setDescription=function(){var e=l.open({templateUrl:"/tc/components/add-resource-description.html",controller:"LearnerResourcesAddDescriptionController",size:"lg",resolve:{description:function(){return r.resource.description}}});e.opened.then(function(){r.ckeditorInstance="resource_description_wysi",r.imageType=n.fileUploads.types.learner_resource_description,s(function(){n.renderCKEditor({clear_all_previous_instances:!1,id:r.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0})},100)}),e.result.then(function(e){e&&void 0!==e.description&&(r.resource.description=e.description,r.resource_form.$setDirty())})},r.showCategories=function(){return 0<r.portal_categories.length},r.removeFile=function(){p.deleteResource(r.resource.id).then(function(e){a.setKey("resource",p.data.resource),r.resource=a.getKey("resource")})},r.fetchGroups=u.fetchGroups,r.fetchCategories=function(t){var e=_.reject(r.portal_categories,function(e){return _.contains(_.map(r.resource_categories,function(e){return e.id}),e.id)});return _.filter(e,function(e){return-1!==e.title.toLowerCase().indexOf(t.$query.toLowerCase())})},r.markFormDirty=function(){r.resource_form.$setDirty()},r.processingUpload=!1,r.ariaLabel=n.showMessage("lup.a11y.resources_edit_resource_main"),r.ariaLabelSide=n.showMessage("lup.a11y.resources_edit_resource_aside"),d=[{title:n.showMessage("lup.breadcrumbs.components.library"),url:"/components/"},{title:n.showMessage("lup.breadcrumbs.components.resources"),url:"/learner_resources/"},{title:r.resource.title,url:"/learner_resources/"+r.resource.id+"/edit"}],e.breadcrumbs=d,r.$watch("resourceUpload",function(e){null!=e&&(r.resource_form.$setPristine(),r.resourceUpload=e,c.getData(n.fileUploads.types.learner_resources,function(t){s(function(){var n,o,e=t.data.signature_data.attributes;r.errorMsg=null,n=r.resourceUpload,o=e,r.errorMsg=null,c.uploadFiles(n,o,function(e){r.resource.content_type=n.type,r.resource.file_name=n.name,r.resource.file_size=n.size,r.resource.output_url=o.folder_path+n.name,r.resource.uuid=o.guid;var t={learner_resource:r.resource};p.uploadResource(t,r.resource.id).then(function(e){var t;r.processingUpload=!1,r.resourceUpload=null,p.data.error?(t=a.getKey("resource"),r.resource=t.attributes?t.attributes:t):(a.setKey("resource",p.data.resource),a.setKey("sharable_url",p.data.sharable_url),r.resource=a.getKey("resource"),r.sharable_url=a.getKey("sharable_url"))})},function(e){r.processingUpload=!1,0<e.status&&(r.errorMsg=e.status+": "+e.data)},function(e){r.processingUpload=!0,n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){r.processingUpload=!1}))}),e.$on("deleteResource",function(){o.confirm(I18n.t("lup.confirm"),I18n.t("tabbing.are_you_sure_you_want_to_delete_this_resource")).then(function(e){return p.destroy(r.resource.id).then(function(){i.document.location.href="/learner_resources"})})}),i.executeDjImageUpload=function(){l.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return r.resource.id},ckeditorInstance:function(){return r.ckeditorInstance},imageType:function(){return r.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})}}window.angular.module("lu").controller("LearnerResourcesEditController",e),e.$inject=["$rootScope","LearnerResourceFactory","$scope","LupHelper","$luPopover","StorageFactory","$window","$timeout","$modal","s3HelperFactory","restrictByGroupService"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l){var c,t=t.get(),u=new i;n.resources=t.resources,n.Helper=o,n.editResource=function(e){r.location="/learner_resources/"+e+"/edit"},n.deleteResource=function(t){s.confirm(I18n.t("lup.confirm"),I18n.t("tabbing.are_you_sure_you_want_to_delete_this_resource")).then(function(e){return u.destroy(t).then(function(){n.loadData()})})},n.ariaLabelSide=o.showMessage("a11y.resource_library_sidebar"),n.ariaLabel=o.showMessage("a11y.resource_library_main"),n.activeRessourceDDM={},n.toggled=function(e,t){n.activeRessourceDDM[t]=e},c=[{title:o.showMessage("lup.breadcrumbs.components.library"),url:"/components/"},{title:o.showMessage("lup.breadcrumbs.components.resources"),url:"/learner_resources/"}],e.breadcrumbs=c,n.loadData=function(){var e={};e.params=a.get(),u.getList(e).then(function(){n.resources=u.data.resources})},e.$on("addResource",function(){r.location="/learner_resources/new"}),e.$on("exportResources",function(){var e=new l,t={typeId:o.lupJobTypes.exportResourcesToExcel};e.initiateJob(t)})}angular.module("lu").controller("LearnerResourcesIndexController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","paramsService","LearnerResourceFactory","$luPopover","LupJobFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l,r=r.get(),c=new t;n.resource=r.resource.attributes,n.resource.description="",n.Helper=o,n.saveResource=function(){return c.createResource(n.resource).then(function(){a.location="/learner_resources/"+c.data.resource.id+"/edit"})},n.ariaLabel=o.showMessage("lup.a11y.resources_edit_resource_main"),n.ariaLabelSide=o.showMessage("lup.a11y.resources_complementary"),l=[{title:o.showMessage("lup.breadcrumbs.components.library"),url:"/components/"},{title:o.showMessage("lup.breadcrumbs.components.resources"),url:"/learner_resources/"},{title:o.showMessage("lup.breadcrumbs.components.new_learner_resource"),url:"/learner_resources/new"}],e.breadcrumbs=l,n.cancelCreate=function(){a.document.location.href="/learner_resources/"}}window.angular.module("lu").controller("LearnerResourcesNewController",e),e.$inject=["$rootScope","LearnerResourceFactory","$scope","LupHelper","StorageFactory","$window","$timeout","$modal"]}(),function(){"use strict";function e(t,e,n,o,r,a){t.helper=r,t.resource=o,t.download=function(){var e=window.open("angie/learner_resources/"+t.resource.id+"/download","_blank");e&&e.focus()},t.cancel=function(){e.close()}}window.angular.module("lu").controller("ResourceDescriptionModalController",e),e.$inject=["$scope","$modalInstance","$http","resource","LupHelper","$sce"]}(),function(){"use strict";function e(e,o,t,r,a,n,i,s,l){e=e.get();o.EnrollmentHelper=a,o.review=null,o.course_content_path=e.course_content_path,e.review&&(o.review=e.review.attributes),o.LupHelper=r,o.course=e.course.attributes,o.reviewsLink="/lpaths/"+o.course.lp_user_id+"/courses/"+o.course.lp_course_id+"/reviews",o.course_components=e.course_components.data,e.enrollment_components&&(o.enrollment_components=e.enrollment_components.data),e.enrollment&&(o.enrollment=e.enrollment.attributes),o.loadPage=function(e,t){if(!a.launchPermitted(o.enrollment))return l.notify("",r.showMessage("course_access.access_denied_error_closed")),!1;if(!a.moduleReleased(e)){var n=s("displayDateTime")(e.release_at,"dddd, MMMM Do YYYY, @ h:mm a");return l.notify("",r.showMessage("courses.this_module_will_be_released",{time:n})),!1}if(0<t&&a.sequenceBlocked(o.enrollment,e,o.enrollment_components))return l.notify("",r.showMessage("courses.course_is_sequenced_html")),!1;i.document.location="/enrollments/"+o.enrollment.id+"/page/"+e.id},e.item_action&&(o.item_action=e.item_action.attributes),e.enrollment&&(o.enrollment=e.enrollment.attributes),o.trustContent=function(e){return n.trustAsHtml(e)},t.$on("launchTheCourse",function(){a.launchCourse(o.enrollment)}),t.breadcrumbs=[{title:r.showMessage("lup.subnav.lup_dashboard"),url:"/dashboard?display=my_courses"},{title:r.showMessage("learningpaths.learning_paths"),url:"/dashboard?display=my_courses"},{title:o.course.lp_name,url:"/lpaths/"+o.course.lp_user_id+"/content"},{title:o.course.name,url:"/lpaths/"+o.course.lp_user_id+"/courses/"+o.course.lp_course_id+"/details"}]}angular.module("lu").controller("LearningPathCoursesContentController",e),e.$inject=["StorageFactory","$scope","$rootScope","LupHelper","EnrollmentHelper","$sce","$window","$filter","$luPopover"]}(),function(){"use strict";function e(e,t,n,r,o,a,i){e=e.get();t.course=e.course.attributes,t.certificate=e.certificate,t.review=null,e.review&&(t.review=e.review.attributes),t.credits=e.credits.data,t.earned_credits=e.earned_credits.data,t.enrollment=e.enrollment.attributes,t.EnrollmentHelper=o,t.LupHelper=r,t.downloadCertificate=function(e,t,n){var o=new i,n={typeId:r.lupJobTypes.downloadCertificate,enrollment_id:e,for_course:t,user_id:n};o.initiateJob(n)}}angular.module("lu").controller("LearningPathCoursesCreditsController",e),e.$inject=["StorageFactory","$scope","$rootScope","LupHelper","EnrollmentHelper","$window","LupJobFactory"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s){e=e.get();t.downloadCertificate=function(e,t,n){var o=new s,n={typeId:r.lupJobTypes.downloadCertificate,enrollment_id:e,for_course:t,user_id:n};o.initiateJob(n)},t.course=e.course.attributes,t.course_images=e.course_images.data,t.review=null,t.EnrollmentHelper=o,t.LupHelper=r,t.course_content_path=e.course_content_path,t.reviewsLink="/lpaths/"+t.course.lp_user_id+"/courses/"+t.course.lp_course_id+"/reviews",e.review&&(t.review=e.review.attributes),e.completion_badges&&(t.completion_badges=e.completion_badges.data),e.percentage_badges&&(t.percentage_badges=e.percentage_badges.data,t.selected_badge=0),e.credits&&(t.credits=e.credits.data),e.earned_credits&&(t.earned_credits=e.earned_credits.data),e.certificate&&(t.certificate=e.certificate.attributes),e.item_action&&(t.item_action=e.item_action.attributes),e.enrollment&&(t.enrollment=e.enrollment.attributes),n.$on("launchTheCourse",function(){o.launchCourse(t.enrollment)}),n.breadcrumbs=[{title:r.showMessage("lup.subnav.lup_dashboard"),url:"/dashboard?display=my_courses"},{title:r.showMessage("learningpaths.learning_paths"),url:"/dashboard?display=my_courses"},{title:t.course.lp_name,url:"/lpaths/"+t.course.lp_user_id+"/content"},{title:t.course.name,url:"/lpaths/"+t.course.lp_user_id+"/courses/"+t.course.lp_course_id+"/details"}],t.trustContent=function(e){return i.trustAsHtml(e)},t.selectBadge=function(e){t.selected_badge=e}}angular.module("lu").controller("LearningPathCoursesDetailsController",e),e.$inject=["StorageFactory","$scope","$rootScope","LupHelper","EnrollmentHelper","$window","$sce","LupJobFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a){e=e.get();t.course=e.course.attributes,t.reviews=e.reviews,t.review=null,t.course_content_path=e.course_content_path,t.reviewsLink="/lpaths/"+t.course.lp_user_id+"/courses/"+t.course.lp_course_id+"/reviews",e.review&&(t.review=e.review.attributes),t.EnrollmentHelper=r,t.LupHelper=o,e.item_action&&(t.item_action=e.item_action.attributes),e.enrollment&&(t.enrollment=e.enrollment.attributes),n.$on("launchTheCourse",function(){r.launchCourse(t.enrollment)}),n.breadcrumbs=[{title:o.showMessage("lup.subnav.lup_dashboard"),url:"/dashboard?display=my_courses"},{title:o.showMessage("learningpaths.learning_paths"),url:"/dashboard?display=my_courses"},{title:t.course.lp_name,url:"/lpaths/"+t.course.lp_user_id+"/content"},{title:t.course.name,url:"/lpaths/"+t.course.lp_user_id+"/courses/"+t.course.lp_course_id+"/details"}]}angular.module("lu").controller("LearningPathCoursesReviewsController",e),e.$inject=["StorageFactory","$scope","$rootScope","LupHelper","EnrollmentHelper","$window"]}(),window.angular.module("lu").controller("LearningPathUsersContentController",["LupHelper","$scope","StorageFactory","$sce","EnrollmentHelper","$luPopover","$filter","$sanitize","LupHelper","LearningPathFactory",function(e,o,t,n,r,a,i,s,l,c){t=t.get();o.EnrollmentHelper=r,o.LupHelper=l,o.showDetails=!0,o.enrollment=t.enrollment.attributes,o.enrolInLPCourse=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("store.are_you_sure_you_want_to_enroll_in_this_course")).then(function(e){(new c).enrollInCourse(t).then(function(){document.location.reload()})})},o.loadPage=function(e,t){if(!r.moduleReleased(e)){var n=i("displayDateTime")(e.release_at,"dddd, MMMM Do YYYY, @ h:mm a");return a.notify("",I18n.t("courses.this_module_will_be_released",{time:n})),!1}if(0<t&&r.sequenceBlocked(o.enrollment,e,o.enrollment_components))return a.notify("",I18n.t("courses.course_is_sequenced_html")),!1;window.document.location="/enrollments/"+o.enrollment.id+"/page/"+e.id},o.launchTheCourse=function(){a.notify("",e.showMessage("course_access.access_denied_error_closed"))}}]),window.angular.module("lu").controller("LearningPathUsersCreditsController",["$scope","StorageFactory","$sce","EnrollmentHelper","$luPopover","$filter","$sanitize","LupHelper","LupJobFactory",function(n,e,t,o,r,a,i,s,l){e=e.get();n.enrollment=e.enrollment.attributes,n.certificate=e.certificate,n.certificate&&n.certificate.title&&(n.enrollment.certification_title=n.certificate.title),n.credits=e.credits.data,n.earned_credits=e.earned_credits.data,n.EnrollmentHelper=o,n.LupHelper=s,n.showDetails=!0,n.downloadCertificate=function(){var e=new l,t={typeId:s.lupJobTypes.downloadCertificate,enrollment_id:n.enrollment.id,for_course:!1,user_id:n.enrollment.user_id};e.initiateJob(t)}}]),window.angular.module("lu").controller("LearningPathUsersDetailsController",["$scope","StorageFactory","$sce","EnrollmentHelper","$sanitize","LupHelper","LupJobFactory",function(n,e,t,o,r,a,i){e=e.get();n.enrollment=e.enrollment.attributes,n.enrollment_images=e.enrollment_images.data,n.credits=e.credits.data,n.earned_credits=e.earned_credits.data,n.EnrollmentHelper=o,n.LupHelper=a,n.showDetails=!0,e.completion_badges&&(n.completion_badges=e.completion_badges.data),e.percentage_badges&&(n.percentage_badges=e.percentage_badges.data,n.selected_badge=0),n.certificate=e.certificate,n.certificate&&n.certificate.title&&(n.enrollment.certification_title=n.certificate.title),n.selectBadge=function(e){n.selected_badge=e},n.downloadCertificate=function(){var e=new i,t={typeId:a.lupJobTypes.downloadCertificate,enrollment_id:n.enrollment.id,for_course:!1,user_id:n.enrollment.user_id};e.initiateJob(t)}}]),function(){"use strict";function e(o,t,r,e,n,a,i,s,l){o.courseSearch="",o.helper=n,o.learningPath=e,o.coursesSelectedArray=[],o.selectedCourses=s.data,o.selectedCourseIds=[],o.fetchCourses=function(e){var t=l.defer(),n="";angular.isArray(o.selectedCourseIds)||(o.selectedCourseIds=[]);try{n=(angular.isArray(e.$selected)?e.$selected.concat(o.selectedCourseIds):o.selectedCourseIds).join(",")}catch(e){$log.debug("fetchCoursesApi: Unable to convert selected courses to string!"),n=""}return r.get("/learning_paths/"+o.learningPath.id+"/available-courses.json",{params:{search:e.$query,page:e.$page,page_size:o.helper.pagination_sizes.typeadhead_default,except:n}}).success(function(e){e=e.courses.data,e=_.map(e,function(e){return e.firstLineDisplay=angular.isDefined(e.name)?e.name:"",e.secondLineDisplay=angular.isDefined(e)?o.helper.showMessage("courses.version")+" "+e.version:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get courses")}),t.promise},o.selectedCourses.forEach(function(e){o.selectedCourseIds.push(e.course_id)}),o.save=function(){var e={add_courses:_.map(o.coursesSelectedArray,function(e){return{id:e.id}})};o.coursesSelectedArray=[],r.post("/learning_paths/"+o.learningPath.id+"/add-courses.json",e).success(function(e){a.$broadcast("courseWasAdded"),t.close(),i.location="/learning_paths/"+o.learningPath.id+"/courses"})},o.cancel=function(){t.close(),i.location.reload()}}angular.module("lu").controller("AddCoursesToLPController",e),e.$inject=["$scope","$modalInstance","$http","learningPath","LupHelper","$rootScope","$window","courses","$q"]}(),function(){"use strict";function e(e,t,n,o){e.description=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("lp_description_wysi");t.close({description:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("LPAddDescriptionController",e),e.$inject=["$scope","$modalInstance","description","LupHelper"]}(),function(){"use strict";function e(n,e,t,o,r,a,i){var s=this;s.setForm=function(e){s.theForm=e},s.portalCategories=n.getKey("portal_categories").data,s.learningPathCatalogSettings=n.getKey("learning_path_catalog_settings").attributes,s.learningPath=n.getKey("learning_path").attributes,s.warningMessages=n.getKey("warning_messages"),s.helper=t,s.cancel=function(e){s.learningPathCatalogSettings=n.getKey("learning_path_catalog_settings").attributes,e.$setPristine()},s.save=function(e){"/learning_paths/:learning_path_id/catalog.json".replace(/:learning_path_id/,s.learningPath.id);var t={learning_path_catalog_form:{is_cataloged:s.learningPathCatalogSettings.is_cataloged,enrollment_approval_required:s.learningPathCatalogSettings.enrollment_approval_required,categories:s.learningPathCatalogSettings.categories,groups:s.learningPathCatalogSettings.groups,is_public:s.learningPathCatalogSettings.is_public}};e.$dirty&&(e.$setPristine(),r.updateCatalogSettings(s.learningPath.id,t).then(function(e){n.setKey("learning_path_catalog_settings",e.data.learning_path_catalog_settings),n.setKey("warning_messages",e.data.warning_messages),s.learningPathCatalogSettings=n.getKey("learning_path_catalog_settings").attributes,s.warningMessages=n.getKey("warning_messages")}).catch(function(e){n.setKey("learning_path_catalog_settings",e.data.learning_path_catalog_settings),n.setKey("warning_messages",e.data.warning_messages),s.learningPathCatalogSettings=n.getKey("learning_path_catalog_settings").attributes,s.warningMessages=n.getKey("warning_messages")}))},s.markFormDirty=function(){angular.isDefined(s.theForm)&&s.theForm.$setDirty()},s.fetchCategories=function(t){var n=_.map(s.learningPathCatalogSettings.categories,function(e){return e.id}),e=_.reject(s.portalCategories,function(e){return _.contains(n,e.id)});return _.filter(e,function(e){return-1!==e.title.toLowerCase().indexOf(t.$query.toLowerCase())})},e.ariaLabel=t.showMessage("lup.a11y.lp_catalog_main_content"),e.ariaLabelSide=t.showMessage("lup.a11y.lp_catalog_aside_content"),s.fetchGroups=i.fetchGroups,s.courses=n.getKey("courses_for_view"),s.selectedCourses=s.courses.data,s.showAction=!!s.learningPath.id,e.$on("publishPath",function(){a.publishPath(s)}),e.$on("deletePath",function(){a.deletePath(s)}),e.$on("addNewCourseToLP",function(){a.addCourseToPath(s)}),e.$on("archivePath",function(){a.archivePath(s)})}angular.module("lu").controller("LearningPathCatalogController",e),e.$inject=["StorageFactory","$rootScope","LupHelper","$http","learnUponLearningPath","LearningPathActionsFactory","restrictByGroupService"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u,d){var p=this;p.lupHelper=n,p.forumService=l;var _,o=o.get(),m=new a,f=new c;function g(e){p.post=e}function h(){l.switchButtons("createPost",!0),l.switchButtons("editPost",!0),l.switchButtons("disableCommenting",p.post.allow_commenting),l.switchButtons("enableCommenting",!p.post.allow_commenting),l.switchButtons("archivePost",p.post.status_code!=p.lupHelper.forums.posts.status_code.archived),l.switchButtons("unarchivePost",p.post.status_code==p.lupHelper.forums.posts.status_code.archived),l.switchButtons("deletePost",!0)}function b(){s.toggleCommenting(p.post.title,p.post.allow_commenting,p.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),p.post.allow_commenting=e.allow_commenting),h()})}function v(){s.toggleArchiving(p.post.title,p.post.status_code,p.post.id).then(function(e){e.success&&(e=JSON.parse(e.post_data),p.post.status_code=e.status_code),h()})}p.post=o.post.attributes,p.isCreator=o.is_creator,p.is_admin=!0,p.learningPath=o.learning_path.attributes,p.showAction=!!p.learningPath.id,p.post_cover_reference=o.post_cover_reference,p.post_cover_reference&&p.forumService.pingForProgress(p.post_cover_reference,p.post.id,g),p.comments=o.comments,p.isLiked=p.post.is_liked,p.newLike=!1,p.likingAllowed=!0,p.likePost=function(){p.likingAllowed&&(p.likingAllowed=!1,p.isLiked&&0<p.post.likes_count?p.post.likes_count=p.post.likes_count-1:0<=p.post.likes_count&&(p.post.likes_count=p.post.likes_count+1),p.isLiked=!p.isLiked,p.newLike=p.isLiked,f.likePost(p.post.id).finally(function(){p.likingAllowed=!0}))},h(),t.breadcrumbs=(_=m.getBreadcrumbTitle(p.learningPath.name,p.learningPath.version),[{title:n.showMessage("reports.learning_paths"),url:"/learning_paths"},{title:_,url:"/learning_paths/"+p.learningPath.id},{title:n.showMessage("lup.forums.course_forum.breadcrumbs"),url:"/learning_paths/"+p.learningPath.id+"/forums"},{title:p.post.title,url:"/learning_paths/"+p.learningPath.id+"/forums"+p.post.id}]),n.contains(u.location.href,"comments")&&d(function(){document.getElementById("comments").scrollIntoView({behavior:"smooth"})}),t.$on("createPost",function(){u.location="/forums/my_contribution/new_post?topic_id="+p.post.forum_topic_id+"&object_id="+p.learningPath.id+"&type_id="+n.forums.posts.creation_type.learning_path}),t.$on("disableCommenting",function(){b()}),t.$on("enableCommenting",function(){b()}),t.$on("editPost",function(){s.editPost(p.post.id,p.learningPath.id,n.forums.posts.creation_type.learning_path,p.isCreator)}),t.$on("archivePost",function(){v()}),t.$on("unarchivePost",function(){v()}),t.$on("deletePost",function(){s.deletePost(p.post.title,p.post.id,"/learning_paths/"+p.learningPath.id+"/forums")}),t.$on("publishPath",function(){r.publishPath(p)}),t.$on("deletePath",function(){r.deletePath(p)}),t.$on("addNewCourseToLP",function(){r.addCourseToPath(p)}),t.$on("archivePath",function(){r.archivePath(p)})}window.angular.module("lu").controller("LearningPathForumsPostShowController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","LearningPathActionsFactory","CourseFactory","$filter","ForumPostShowActionFactory","ForumService","ForumPostsFactory","$window","$timeout"]}(),function(){"use strict";function e(n,o,r,e,t,a,i,s,l,c,u,d){var p=this;p.helper=a,p.learningPath=i.getKey("learning_path").attributes,p.courses=i.getKey("courses_for_view"),p.lpShowMustPurchaseDropdown=i.getKey("lp_show_must_purchase_dropdown"),p.numberUsersOnPath=i.getKey("number_users_on_path"),p.auth_token_form=i.getKey("auth_token_form"),p.disableReorderingAndCourseAdd=0<p.numberUsersOnPath,p.courses.data=g(p.courses.data),p.completion_logic=p.learningPath.completion_logic,p.previous_contained_exams=!1,p.completion_logic_sequential=p.learningPath.completion_logic==a.learning_paths.completion_logic.sequential,p.showAction=!!p.learningPath.id,p.formData={completion_logic:p.learningPath.completion_logic,x_courses:p.learningPath.x_courses},p.removeCourseFromLP=function(t,n){var e=a.showMessage("learningpaths.are_your_sure_you_want_to_remove_the_course_from_this_path");u.confirm(a.showMessage("lup.confirm"),e).then(function(e){o.doRemoveCourseFromLearningPath(t,n).then(function(){r.location.reload()})})},p.getEnrollInText=function(e){var t,n="";return p.learningPath.completion_logic==a.learning_paths.completion_logic.sequential?(t=m[e.progress_requirement],n+=a.showMessage("lup.learning_paths.progress_when"),4===t.id?n+=p.linkWrapCourseProgression(a.showMessage("lup.learning_paths.on_fixed_date",{fixed_date:l("displayDateTime")(e.fixed_date,"YYYY-MM-DD")})):5===t.id?n+=p.linkWrapCourseProgression(a.showMessage("lup.learning_paths.on_fixed_days",{fixed_days:e.fixed_days})):n+='<a class="text-regular" ng-click="vm.setProgression(course, $index)" href="#">'+t.title+"</a>",1==t.id&&(n+=p.linkWrapCourseProgression(a.showMessage("lup.learning_paths.and_delay_enrollment_for_stagger_days",{stagger_days:e.stagger_days})))):(t=f[e.enrollment_option],n="",n+=a.showMessage("lup.learning_paths.progress_when"),2===t.id?n+=p.linkWrapCourseProgression(a.showMessage("lup.learning_paths.on_fixed_date",{fixed_date:l("displayDateTime")(e.fixed_date,"YYYY-MM-DD")})):3===t.id?n+=p.linkWrapCourseProgression(a.showMessage("lup.learning_paths.on_fixed_days",{fixed_days:e.fixed_days})):n+='<a class="text-regular" ng-click="vm.setProgression(course, $index)" href="#">'+t.title+"</a>"),n},p.linkWrapCourseProgression=function(e){return'<a class="text-regular" ng-click="vm.setProgression(course, $index)" href="#">'+e+"</a>"},p.setProgression=function(e,t){c.open({templateUrl:"/tc/learning_paths/set-progression.html",controller:"LPSetProgressionController",size:"md",resolve:{learningPath:function(){return p.learningPath},course:function(){return e},courses:function(){return p.courses},index:function(){return t},lpShowMustPurchaseDropdown:function(){return p.lpShowMustPurchaseDropdown},completionLogicSequential:function(){return p.completion_logic_sequential}}}).result.then(function(e){e.action&&"close"!=e.action&&r.location.reload()})},p.save=function(){var t=p.learning_path_form;{var e;t.$valid&&(spinnerService.showGroup("luSpinnerGlobal"),(e={data:{}}).data.auth_token_form=p.auth_token_form,e.data.learning_path_form={completion_logic:parseInt(p.formData.completion_logic,10)},1==p.formData.completion_logic&&(e.data.learning_path_form.x_courses=p.formData.x_courses),e.id=p.learningPath.id,o.doUpdateLP(e).then(function(e){t.$setPristine(),r.location.reload()}))}},p.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===p.helper.keyboard_keys[e.which]){if(e.preventDefault(),null!==p.rememberReorderIndex&&n!==p.rememberReorderIndex){e=t[n];return t[n]=t[p.rememberReorderIndex],t[p.rememberReorderIndex]=e,p.dragControlListeners.orderChanged(),p.rememberReorderIndex=null,void s.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}p.rememberReorderIndex=n}},p.rememberReorderIndex=null,s.ariaLabelSide=p.helper.showMessage("a11y.course_learningpath_sidebar"),s.ariaLabel=p.helper.showMessage("a11y.course_learningpath_main"),n.activeLearningPathDDM={},n.toggled=function(e,t){n.activeLearningPathDDM[t]=e},n.$on("publishPath",function(){d.publishPath(p)}),n.$on("deletePath",function(){d.deletePath(p)}),n.$on("addNewCourseToLP",function(){d.addCourseToPath(p)}),n.$on("archivePath",function(){d.archivePath(p)}),e(function(){$("body").updatePolyfill()}),p.dragControlListeners={orderChanged:function(e){for(var t=[],n=0;n<p.courses.data.length;n++)t.push(p.courses.data[n].course_id);o.doReorderCourses(t,p.learningPath.id).then(function(e){p.courses.data=g(e.courses_for_view.data)})},allowDuplicates:!1};var m=[{title:a.showMessage("learningpaths.immediately"),id:a.learning_paths.immediate},{title:a.showMessage("learningpaths.complete_to_progress"),id:a.learning_paths.previous_completed},{title:a.showMessage("learningpaths.pass_to_progress"),id:a.learning_paths.previous_passed},{title:a.showMessage("learningpaths.pass_or_fail_to_progress"),id:a.learning_paths.previous_passed_or_failed},{title:a.showMessage("learningpaths.fixed_date_enrollment"),id:a.learning_paths.fixed_date},{title:a.showMessage("learningpaths.days_after_enrollment"),id:a.learning_paths.fixed_days}],f=[{title:a.showMessage("learningpaths.learner_chooses"),id:a.learning_paths.enrollment_options.learner_chooses},{title:a.showMessage("learningpaths.must_purchase"),id:a.learning_paths.enrollment_options.must_purchase},{title:a.showMessage("learningpaths.fixed_date_enrollment"),id:a.learning_paths.enrollment_options.fixed_date},{title:a.showMessage("learningpaths.days_after_enrollment"),id:a.learning_paths.enrollment_options.fixed_days}];function g(e){return _.map(e,function(e,t){return e.fixed_date=l("displayDateTime")(e.fixed_date,"YYYY-MM-DD"),e})}s.ariaLabelForContentSegments=function(e,t){return null!==p.rememberReorderIndex?p.rememberReorderIndex===e?p.helper.showMessage("a11y.exam_order_list.selected",{answer_option:t}):p.helper.showMessage("a11y.exam_order_list.swap",{answer_option:t}):p.helper.showMessage("a11y.exam_order_list.select",{answer_option:t})}}angular.module("lu").controller("LearningPathsCoursesController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$modal","$luPopover","LearningPathActionsFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=this;d.isLoading=!1,d.helper=a,d.learningPath=i.getKey("learning_path").attributes,d.credits=i.getKey("credits"),d.certificate=i.getKey("certificate"),d.certifications=i.getKey("certifications"),d.is_admin=i.getKey("is_admin"),d.courses=i.getKey("courses_for_view"),d.selectedCourses=d.courses.data,d.showAction=!!d.learningPath.id,d.credits_link=i.getKey("credits_link"),d.save=function(e){e.$valid&&(c.showGroup("luSpinnerGlobal"),e.commit())},s.ariaLabel=a.showMessage("lup.a11y.learning_path_award_credits_main"),s.ariaLabelSide=a.showMessage("lup.a11y.learning_path_award_credits_aside"),e.$on("publishPath",function(){u.publishPath(d)}),e.$on("deletePath",function(){u.deletePath(d)}),e.$on("addNewCourseToLP",function(){u.addCourseToPath(d)}),e.$on("archivePath",function(){u.archivePath(d)})}angular.module("lu").controller("LearningPathsCreditsController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","spinnerService","LearningPathActionsFactory"]}(),function(){"use strict";function e(e,r,t,a,n,o,i,s,l,c,u,d,p,m,f,g){var h=this,b=i.get();h.helper=o,s.Helper=o,s._=_,h.learningPath=b.learning_path.attributes,h.thumbnail=b.thumbnail.attributes,h.preview_image_file_url=b.preview_image_file_url,b.lp_images&&(h.lp_images=b.lp_images.data),s.ariaLabel=o.showMessage("lup.a11y.learning_path_details_main"),s.ariaLabelSide=o.showMessage("lup.a11y.learning_path_details_aside"),h.is_admin=!1,h.showAction=!!h.learningPath.id,h.uploadingInProcess=!1,h.openCropper=function(e){{e&&u.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 1.5},cropperImageSize:function(){return o.uiCropperConfig.imageSize}}}).result.then(function(e){var t;e&&e.image_for_upload&&(s.alt_tag=e.alt_tag,t=e.image_for_upload,e={data:{resource_id:h.learningPath.id}},t&&(h.learningPathImage=t,h.uploadingInProcess=!0,h.learning_path_image_reference="1",g.getData(h.helper.fileUploads.types.learning_path_image,function(t){a(function(){var e=t.data.signature_data.attributes;h.errorMsg=null,function(n,o){if(!n)return;h.errorMsg=null,g.uploadFiles(n,o,function(e){a(function(){n.result=e.data});var t=r;return t.uuid=o.guid,t.image_file_name=n.name,t.output_url=o.folder_path+n.name,t.learning_path_id=h.learningPath.id,t.portal_id=h.learningPath.portal_id,t.alt_tag=s.alt_tag,t.uploadImage().then(function(e){try{return h.learning_path_image_reference=t.data.learning_path_image_reference,void v()}catch(e){return h.uploadingInProcess=!1,void(h.learning_path_image_reference=null)}})},function(e){0<e.status&&(h.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}(h.learningPathImage,e)})},function(e){},e)))})}},h.alt_tag=null,h.formData={name:h.learningPath.name,keywords:h.learningPath.keywords,description:h.learningPath.description,minute_length:h.learningPath.minute_length,difficulty_level:h.learningPath.difficulty_level,course_length_unit:h.learningPath.course_length_unit,due_days_after_enrollment:h.learningPath.due_days_after_enrollment,due_date_after_enrollment:p("displayDateTime")(h.learningPath.due_date_after_enrollment,"YYYY-MM-DD"),send_due_date_reminders:h.learningPath.send_due_date_reminders,due_date_reminder_days:h.learningPath.due_date_reminder_days,due_date_reminder_days_2:h.learningPath.due_date_reminder_days_2},h.courses=i.getKey("courses_for_view"),h.selectedCourses=h.courses.data,h.learning_path_image_reference=i.getKey("learning_path_image_reference"),h.learning_path_image_reference&&v();i=[{title:h.helper.showMessage("lup.breadcrumbs.learning_paths.index"),url:"/learning_paths"}];function v(){var e="/download_jobs/"+h.learning_path_image_reference+"/status.json";return c.get(e,{}).then(function(e){e.data.job.status_id!==h.helper.lupJobStatuses.completed?h.timeoutPromise=a(function(){v()},2e3):(h.processingJobReference=null,t.location.reload())})}h.showAction?i.push({title:h.helper.showMessage("lup.breadcrumbs.learning_paths.edit_learning_path"),url:"/learning_paths/"+h.learningPath.id}):i.push({title:h.helper.showMessage("lup.breadcrumbs.learning_paths.new_learning_path"),url:"/learning_paths/new"}),e.breadcrumbs=i,h.save=function(){var t=h.learning_path_form;{var e;t.$valid&&(l.showGroup("luSpinnerGlobal"),(e={data:{}}).data.learning_path_form=h.formData,h.showAction?(e.id=h.learningPath.id,r.doUpdateLP(e).then(function(e){t.$setPristine()})):r.doSaveLP(e).then(function(e){t.$setPristine()}))}},h.cancel=function(){t.location="/learning_paths"},h.setDescription=function(){var e=u.open({templateUrl:"/tc/learning_paths/add-lp-description.html",controller:"LPAddDescriptionController",size:"lg",resolve:{description:function(){return h.formData.description}}});e.opened.then(function(){s.ckeditorInstance="lp_description_wysi",s.imageType=o.fileUploads.types.learning_path_description,a(function(){o.renderCKEditor({clear_all_previous_instances:!1,id:s.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!1,width:"100%"})},100)}),e.result.then(function(e){e&&void 0!==e.description&&(h.formData.description=e.description,h.learning_path_form.$setDirty(),h.save())})},h.setImageAsThumbnail=function(e){l.showGroup("luSpinnerGlobal");var t={};t.image_id=e,r.doSetAsThumbnail(t).then(function(e){h.thumbnail=r.data.thumbnail.attributes,h.preview_image_file_url=r.data.preview_image_file_url})},h.unsetImageAsThumbnail=function(){l.showGroup("luSpinnerGlobal");var e={};e.learning_path_id=h.learningPath.id,r.doUnsetAsThumbnail(e).then(function(e){h.thumbnail=r.data.thumbnail.attributes,h.preview_image_file_url=r.data.preview_image_file_url})},h.removeImage=function(e){r.doDestroyImage(e).then(function(){h.lp_images=r.data.lp_images})},e.$on("publishPath",function(){f.publishPath(h)}),e.$on("deletePath",function(){f.deletePath(h)}),e.$on("addNewCourseToLP",function(){f.addCourseToPath(h)}),e.$on("archivePath",function(){f.archivePath(h)}),t.executeDjImageUpload=function(){u.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return h.learningPath.id},ckeditorInstance:function(){return s.ckeditorInstance},imageType:function(){return s.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},s.maxFileSize=function(){return"5MB"},s.acceptedFiles=function(){return".jpg,.jpeg,.pjpeg,.png,.xpng,.tiff"}}angular.module("lu").controller("LearningPathsDetailsController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","spinnerService","$http","$modal","Upload","$filter","$luPopover","LearningPathActionsFactory","s3HelperFactory"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c,u,d,p,m,f){var g=this,h=i.get();g.helper=a,s.Helper=a,s._=_,g.learningPath=h.learning_path.attributes,g.difficulty_levels=h.difficulty_levels,g.unit_select_options=h.unit_select_options,g.number_users_on_path=h.number_users_on_path,s.ariaLabel=a.showMessage("lup.a11y.courses_duedate_main"),s.ariaLabelSide=a.showMessage("lup.a11y.courses_duedate_sidebar"),g.is_admin=!1,g.auth_token_form=h.auth_token_form,g.showAction=!!g.learningPath.id,g.uploadingInProcess=!1,g.courses=i.getKey("courses_for_view"),g.selectedCourses=g.courses.data,g.formData={name:g.learningPath.name,keywords:g.learningPath.keywords,description:g.learningPath.description,minute_length:g.learningPath.minute_length,difficulty_level:g.learningPath.difficulty_level,course_length_unit:g.learningPath.course_length_unit,due_days_after_enrollment:g.learningPath.due_days_after_enrollment,due_date_after_enrollment:p("displayDateTime")(g.learningPath.due_date_after_enrollment,"YYYY-MM-DD"),send_due_date_reminders:g.learningPath.send_due_date_reminders,due_date_reminder_days:g.learningPath.due_date_reminder_days,due_date_reminder_days_2:g.learningPath.due_date_reminder_days_2};p=[{title:g.helper.showMessage("lup.breadcrumbs.learning_paths.index"),url:"/learning_paths"}];g.showAction?p.push({title:g.helper.showMessage("lup.breadcrumbs.learning_paths.edit_learning_path"),url:"/learning_paths/"+g.learningPath.id}):p.push({title:g.helper.showMessage("lup.breadcrumbs.learning_paths.new_learning_path"),url:"/learning_paths/new"}),e.breadcrumbs=p,g.save=function(){var t=g.learning_path_form;{var e;t.$valid&&(l.showGroup("luSpinnerGlobal"),(e={data:{}}).data.learning_path_form=g.formData,g.showAction?(e.id=g.learningPath.id,n.doUpdateLP(e).then(function(e){t.$setPristine()})):n.doSaveLP(e).then(function(e){t.$setPristine()}))}},g.cancel=function(){t.location="/learning_paths"},e.$on("publishPath",function(){f.publishPath(g)}),e.$on("deletePath",function(){f.deletePath(g)}),e.$on("addNewCourseToLP",function(){f.addCourseToPath(g)}),e.$on("archivePath",function(){f.archivePath(g)})}angular.module("lu").controller("LearningPathsDueDatesController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","spinnerService","$http","$modal","Upload","$filter","$luPopover","LearningPathActionsFactory"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c,u,d,p,m,f){var g=this,h=i.get();g.helper=a,s.Helper=a,s._=_,s.ariaLabel=a.showMessage("lup.a11y.lp_creating_lp_main"),s.ariaLabelSide=a.showMessage("lup.a11y.lp_list_aside"),g.learningPath=h.learning_path.attributes,g.number_users_on_path=h.number_users_on_path,g.is_admin=!1,g.auth_token_form=h.auth_token_form,g.showAction=!!g.learningPath.id,g.uploadingInProcess=!1,g.courses=i.getKey("courses_for_view"),g.formData={name:g.learningPath.name,keywords:g.learningPath.keywords,description:g.learningPath.description,minute_length:g.learningPath.minute_length,difficulty_level:g.learningPath.difficulty_level,course_length_unit:g.learningPath.course_length_unit,due_days_after_enrollment:g.learningPath.due_days_after_enrollment,due_date_after_enrollment:p("displayDateTime")(g.learningPath.due_date_after_enrollment,"YYYY-MM-DD"),send_due_date_reminders:g.learningPath.send_due_date_reminders,due_date_reminder_days:g.learningPath.due_date_reminder_days,due_date_reminder_days_2:g.learningPath.due_date_reminder_days_2,enrollment_approval_required:g.learningPath.enrollment_approval_required},g.save=function(){var t=g.learning_path_form;{var e;t.$valid&&(l.showGroup("luSpinnerGlobal"),(e={data:{}}).data.learning_path_form=g.formData,g.showAction?(e.id=g.learningPath.id,n.doUpdateLP(e).then(function(e){n.data&&!n.data.error&&t.$setPristine()})):n.doSaveLP(e).then(function(e){t.$setPristine()}))}},g.cancel=function(){t.location="/learning_paths"},e.$on("publishPath",function(){f.publishPath(g)}),e.$on("deletePath",function(){f.deletePath(g)}),e.$on("addNewCourseToLP",function(){f.addCourseToPath(g)}),e.$on("archivePath",function(){f.archivePath(g)})}angular.module("lu").controller("LearningPathsEditController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","spinnerService","$http","$modal","Upload","$filter","$luPopover","LearningPathActionsFactory"]}(),window.angular.module("lu").controller("LearningPathsEnrollmentContentController",["$scope","$rootScope","StorageFactory","$sce","EnrollmentHelper","$luPopover","$filter","$sanitize","LupHelper","$window","LearningPathFactory","learnUponLearningPath","LupJobFactory",function(o,e,t,n,r,a,i,s,l,c,u,d,p){t=t.get();o.EnrollmentHelper=r,o.LupHelper=l,o.showDetails=!0,o.enrollment=t.enrollment.attributes,o.courses=t.courses.data,e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.learning_paths.index"),url:"/learning_paths"},{title:o.enrollment.name,url:"/learning_paths/"+o.enrollment.learning_path_id},{title:I18n.t("lup.breadcrumbs.users.enrollments"),url:"/learning_paths/"+o.enrollment.learning_path_id+"/enrollments"},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/learning_paths/"+o.enrollment.learning_path_id+"/enrollments/"+o.enrollment.id+"?user_id="+o.enrollment.user_id}],o.enrolInLPCourse=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("store.are_you_sure_you_want_to_enroll_in_this_course")).then(function(e){(new u).enrollInCourse(t).then(function(){document.location.reload()})})},o.loadPage=function(e,t){if(!r.moduleReleased(e)){var n=i("displayDateTime")(e.release_at,"dddd, MMMM Do YYYY, @ h:mm a");return a.notify("",I18n.t("courses.this_module_will_be_released",{time:n})),!1}if(0<t&&r.sequenceBlocked(o.enrollment,e,o.enrollment_components))return a.notify("",I18n.t("courses.course_is_sequenced_html")),!1;window.document.location="/enrollments/"+o.enrollment.id+"/page/"+e.id},e.$on("destroyEnrollment",function(){a.confirm(I18n.t("lup.confirm"),I18n.t("enrollments.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){d.unassignLP(o.enrollment.id).then(function(){c.location="/learning_paths/"+o.enrollment.learning_path_id+"/enrollments"})})}),e.$on("downloadCertificate",function(){var e=new p,t={typeId:l.lupJobTypes.downloadCertificate,enrollment_id:o.enrollment.id,for_course:!1,user_id:o.enrollment.user_id};e.initiateJob(t)})}]),function(){"use strict";function e(t,n,e,o,r,a,i,s,l){var c=new i,o=o.get();n.EnrollmentHelper=r,n.review=null,o.review&&(n.review=o.review.attributes),n.showDetails=!0,n.LupHelper=a,n.sidebarNav=1,n.enrollment=Object.assign({},o.course.attributes,o.enrollment_data.attributes),n.enrollment_components=o.course_components.data,e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.learning_paths.index"),url:"/learning_paths"},{title:n.enrollment.name,url:"/learning_paths/"+n.enrollment.learning_path_id},{title:I18n.t("lup.breadcrumbs.users.enrollments"),url:"/learning_paths/"+n.enrollment.learning_path_id+"/enrollments"},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/learning_paths/"+n.enrollment.learning_path_id+"/enrollments/"+n.enrollment.lp_user_id+"?user_id="+n.enrollment.user_id},{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/learning_paths/"+n.enrollment.learning_path_id+"/enrollments/"+n.enrollment.lp_user_id+"/course_content/"+n.enrollment.lp_course_id}],n.messagingEnabled=function(){return!1},e.$on("destroyEnrollment",function(){s.confirm(I18n.t("lup.confirm"),I18n.t("enrollments.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){c.unenroll(n.enrollment.id).then(function(){t.location="/courses/"+n.enrollment.course_id+"/enrollments"})})}),e.$on("downloadCertificate",function(){var e=new l,t={typeId:a.lupJobTypes.downloadCertificate,enrollment_id:n.enrollment.id,for_course:!0,user_id:n.enrollment.user_id};e.initiateJob(t)})}angular.module("lu").controller("LearningPathsEnrollmentContentCourseController",e),e.$inject=["$window","$scope","$rootScope","StorageFactory","EnrollmentHelper","LupHelper","EnrollmentFactory","$luPopover","LupJobFactory"]}(),function(){"use strict";function e(o,e,t,n,r,a,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y){var M,S=a.get(),C=new p,A=new h;function L(){var e={};e.params=u.get(),e.params.filter_by=o.filter_by,f.enrollmentsForLp(e,o.learning_path.id).then(function(){o.enrollments=f.data.enrollments,o.enrollment_approvals=f.data.enrollment_approvals,o.number_enrolled=f.data.counts.attributes.number_enrolled,o.number_pending=f.data.counts.attributes.number_pending,o.number_of_requests=f.data.counts.attributes.number_of_requests,o.triggerFocusOnMain=!0})}o.learning_path=S.learning_path.attributes,o.enrollments=S.enrollments,o.number_enrolled=S.counts.attributes.number_enrolled,o.number_pending=S.counts.attributes.number_pending,o.number_of_requests=S.counts.attributes.number_of_requests,o.can_destroy=S.can_destroy,o.show_requests_filter=S.show_requests_filter,o.enrollment_approvals=S.enrollment_approvals,o.approval_reference=S.approval_reference,o.Helper=i,o.enrollmentHelper=s,o.clearFiltering=function(){o.filterStatus=0,o.filterCreatedAfter="",o.userFilterStatus="",o.userFilterGroups=[],o.userFilterGroupIds=[],o.userFilterType="",o.userFilterMembershipType="",n.$broadcast(o.groupTaIdentifier+":CLEAN_QUERY"),L()},o.filterOptions=function(){var e=[{filterName:"filterStatus",value:o.filterStatus},{filterName:"filterCreatedAfter",value:o.filterCreatedAfter},{filterName:"userFilterStatus",value:o.userFilterStatus},{filterName:"userFilterGroups",value:o.userFilterGroupIds.join(",")},{filterName:"userFilterType",value:o.userFilterType}];n.have_membership_types_enabled&&e.push({filterName:"userFilterMembershipType",value:o.userFilterMembershipType});return e},o.loadData=L,o.page=1,o.filterList=function(e){o.triggerFocusOnMain=!1,o.filter_by===e&&o.$$postDigest(function(){o.triggerFocusOnMain=!0,o.$digest()});o.filter_by=e},o.manuallySendInvite=function(e){i.showTip("lup.users.tooltip_invite_link",{auth_code:e.auth_code,domain_for_url:location.host})},o.viewEnrollmentDetails=function(e){l.location="/learning_paths/"+o.learning_path.id+"/enrollments/"+e.id+"?user_id="+e.user_id},o.downloadCertificate=function(e){var t=new _,e={typeId:i.lupJobTypes.downloadCertificate,enrollment_id:e.id,for_course:!1,user_id:e.user_id};t.initiateJob(e)},o.viewCredits=function(e,t,n){t={enrollment_id:e,user_id:n,for_course:t};i.viewLearnersCredits(t)},o.showDueDateText=function(e){return e.calculated_due_date?i.showMessage("lup.courses.edit_due_date"):i.showMessage("lup.courses.set_due_date")},o.setDueDate=function(e,t){m.open({templateUrl:"/tc/users/set_enrollment_due_date_modal.html",controller:"UsersSetEnrollmentDueDateController",size:"lg",resolve:{enrollment:function(){return e},date_format:function(){return t},user:function(){return i.displayName(e)}}})},o.displayEnrollmentDate=function(e){var t={label:i.showMessage("lup.courses.due_date"),value:i.showMessage("lup.set_date"),link:0};e.calculated_due_date?(t.label=i.showMessage("lup.courses.due_date"),t.value=e.calculated_due_date,t.link=1):e.date_lastaccessed&&(t.label=i.showMessage("lup.dashboard.last_entered"),t.value=e.date_lastaccessed,t.link=-1);return t},o.displayStartEndDate=function(e){var t={label:i.showMessage("lup.dashboard.assigned"),value:e.created_at};e.date_completed&&(t.label=i.showMessage("lup.dashboard.date_completed"),t.value=e.date_completed);return t},o.getPercentageCompleted=function(e){return parseInt(s.lpPercentageComplete(e))},o.unassignLearningPath=function(t){c.confirm(I18n.t("lup.confirm"),I18n.t("learningpaths.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){t.user_id?f.unassignLP(t.id).then(function(){o.number_enrolled=o.number_enrolled-1,L()}):C.unenrollPending(t.id,!0).then(function(){o.number_pending=o.number_pending-1,L()})})},o.isLPInProgress=function(e){return e.status_id===i.enrollmentStatuses.in_progress||e.status_id===i.enrollmentStatuses.pending_review},o.toggleSelection=function(e){var t=o.selection.indexOf(e),n=b("filter")(o.enrollment_approvals.data,{id:e},!0)[0];-1<t?o.selection.splice(t,1):o.selection.push(e);o.$broadcast("itemSelect",{message:n,action:-1<t?"deselect":"select"})},o.approveRequest=function(t){c.confirm($,T).then(function(e){g.approveEnrollmentRequest(t.id).then(function(e){L()})})},o.rejectRequest=function(t){c.confirm(z,x).then(function(e){g.rejectEnrollmentRequest(t.id).then(function(e){L()})})},o.approveRequests=function(){c.confirm($,T).then(function(e){g.approveEnrollmentRequests(o.selection).then(function(e){o.approval_reference=e.data.job_reference,o.selection=[],P()})})},o.rejectRequests=function(){c.confirm(z,x).then(function(e){g.rejectEnrollmentRequests(o.selection).then(function(e){o.approval_reference=e.data.job_reference,o.selection=[],P()})})},o.cancel=function(){n.$broadcast("selectAll:deSelectAll")},o.selection=[],o.approval_reference&&P(),o.learningPath=a.getKey("learning_path").attributes,o.courses=a.getKey("courses_for_view"),o.selectedCourses=o.courses.data,o.showAction=!!o.learningPath.id,o.groupTaIdentifier="taGroupFilter",o.userStatuses=y.userStatuses,o.userTypes=y.userTypes,o.association_membership_types=a.getKey("association_membership_types"),o.fetchGroups=y.fetchGroups,o.groupCustomSelectFn=y.groupCustomSelectFn,o.learningPathEnrollmentTitles=((M={})[i.dashboard_filters.enrolled_courses]=i.showMessage("lup.dashboard.enrolled_users"),M[i.dashboard_filters.pending_enrollments]=i.showMessage("lup.dashboard.pending_enrollments"),M[i.dashboard_filters.enrollment_requests]=i.showMessage("lup.enrollment_approvals.enrollment_requests"),M),o.ariaLabelSide=i.showMessage("lup.courses.filter_enrollments"),o.triggerFocusOnMain=!1,o.onFocusTrapDeactivate=function(){o.triggerFocusOnMain=!1},o.onEscapeDeactivates=function(){return!o.enrollmentDDMActive||!Object.keys(o.enrollmentDDMActive).filter(function(e){return o.enrollmentDDMActive[e]}).length},o.enrollmentDDMActive={},o.toggled=function(e,t){o.enrollmentDDMActive[t]=e},o.getA11Ytranslation=function(){var e=" "+i.showMessage("lup.a11y.page");return o.enrollments&&o.enrollments.meta.page&&(e+=" "+o.enrollments.meta.page),e+=" "+i.showMessage("lup.a11y.loaded"),o.filter_by===i.dashboard_filters.enrolled_courses?i.showMessage("lup.dashboard.enrolled_users")+e:o.filter_by===i.dashboard_filters.pending_enrollments?i.showMessage("lup.dashboard.pending_enrollments")+e:o.filter_by===i.dashboard_filters.enrollment_requests?i.showMessage("lup.enrollment_approvals.enrollment_requests")+e:""},o.filter_by=i.dashboard_filters.enrolled_courses,S.filter_by&&(o.filter_by=S.filter_by),o.filterStatus=0,o.userFilterGroups=[],o.userFilterGroupIds=[],o.userFilterType="",o.userFilterMembershipType="",o.filterCreatedAfter="",o.filteringControl={},o.sortOptions=[{label:i.showMessage("lup.filters.created_at"),value:"created_at.desc",default:!0},{label:i.showMessage("lup.filters.name_az"),value:"display_name.asc"},{label:i.showMessage("lup.filters.name_za"),value:"display_name.desc"}],o.requestsSortOptions=[{label:i.showMessage("lup.filters.request_date_asc"),value:"request_date.asc",default:!0},{label:i.showMessage("lup.filters.request_date_desc"),value:"request_date.desc"},{label:i.showMessage("lup.filters.user_name_az"),value:"user_name.asc"},{label:i.showMessage("lup.filters.user_name_za"),value:"user_name.desc"},{label:i.showMessage("lup.filters.course_name_az"),value:"course_name.asc"},{label:i.showMessage("lup.filters.course_name_za"),value:"course_name.desc"}],o.enrollmentStatuses=function(){var e=[{id:i.enrollmentStatuses.not_started,title:i.showMessage("dashboard.not_started")},{id:i.enrollmentStatuses.in_progress,title:i.showMessage("dashboard.in_progress")},{id:i.enrollmentStatuses.completed,title:i.showMessage("dashboard.completed")},{id:i.enrollmentStatuses.passed,title:i.showMessage("dashboard.passed")},{id:i.enrollmentStatuses.failed,title:i.showMessage("dashboard.failed")}];n.can_create_assignments&&e.push({id:i.enrollmentStatuses.pending_review,title:i.showMessage("course_assignments.pending_review")});return e}(),n.$on("publishPath",function(){w.publishPath(o)}),n.$on("deletePath",function(){w.deletePath(o)}),n.$on("addNewCourseToLP",function(){w.addCourseToPath(o)}),n.$on("archivePath",function(){w.archivePath(o)}),o.$watch("filter_by",function(e,t){e&&(o.ariaLabel=o.learningPathEnrollmentTitles[e],e!==t&&(o.page=1,o.loadData()))});var $=i.showMessage("lup.enrollment_approvals.confirm_approve_enrollment_title"),T=i.showMessage("lup.enrollment_approvals.confirm_approve_enrollment_message"),z=i.showMessage("lup.enrollment_approvals.confirm_reject_enrollment_title"),x=i.showMessage("lup.enrollment_approvals.confirm_reject_enrollment_message");function P(){var e={hideSpinner:!0};return e.url="/download_jobs/"+o.approval_reference+"/status.json",A.get("download_jobs",e,o.approval_reference).then(function(){A.data.job.status_id!==i.lupJobStatuses.completed?o.timeoutPromise=v(function(){P()},2e3):(o.approval_reference=null,L())})}n.$on("dueDateSaved",function(){L()})}window.angular.module("lu").controller("LearningPathsEnrollmentsController",e),e.$inject=["$scope","$log","$http","$rootScope","CourseFactory","StorageFactory","LupHelper","EnrollmentHelper","$window","$luPopover","paramsService","CourseActionFactory","EnrollmentFactory","LupJobFactory","$modal","learnUponLearningPath","EnrollmentApprovalFactory","learnUponApi","$filter","$timeout","LearningPathActionsFactory","usersFilteringOptionsService"]}(),function(f){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=this,p=new s,m=new l,l=a.get();d.learningPath=l.learning_path.attributes,d.courses=l.courses_for_view,d.showAction=!!d.learningPath.id,d.learning_path_topic=l.learning_path_topic.attributes,d.selected_moderators=u.populateDisplayNames(l.learning_path_moderators.data),d.new_moderators=d.selected_moderators.map(function(e){return e.id}),d.number_users_on_path=l.number_users_on_path,d.is_enabled=d.learning_path_topic.status_code==r.forums.topics.status_code.published,d.lupHelper=r,d.fetchModerators=function(e){var t=o.defer();return m.getList({url:"/users/non_admins.json",hideSpinner:!0,params:{search:e.$query,page:e.$page}}).then(function(){var e;m.data.users?(e=_.reject(m.data.users.data,function(e){return _.contains(d.new_moderators,e.id)}),e=u.populateDisplayNames(e),t.resolve(e)):t.reject("Failed to get Users!")}),t.promise},d.afterSelectModerator=function(){d.forum_settings_form.$setDirty()},d.save=function(t){var e=d.learning_path_topic;e.status_code=d.is_enabled?r.forums.topics.status_code.published:r.forums.topics.status_code.draft,e.type_code=r.forums.topics.type_code.learning_path,e.moderators=d.new_moderators,p.updateForumSettings(d.learningPath.id,e).then(function(){var e=JSON.parse(p.data.topic_data);f.isDefined(e.forum_topic)&&(e=e.forum_topic,a.setKey("learning_path_topic",e),a.setKey("learning_path_moderators",{data:f.copy(d.selected_moderators)}),d.learning_path_topic=a.getKey("learning_path_topic").attributes),t.$setPristine()})},d.cancel=function(e){e.$setPristine(),d.learning_path_topic=a.getKey("learning_path_topic").attributes,d.selected_moderators=a.getKey("learning_path_moderators").data,d.new_moderators=d.selected_moderators.map(function(e){return e.id})},d.mapModeratorIds=c.groupCustomSelectFn,e.ariaLabel=r.showMessage("lup.a11y.lp_forum_settings_main"),e.ariaLabelSide=r.showMessage("lup.a11y.lp_forum_settings_aside"),t.breadcrumbs=[{title:r.showMessage("learningpaths.learning_paths"),url:"/learning_paths"},{title:d.learningPath.name,url:"/learning_paths/"+d.learningPath.id},{title:r.showMessage("lup.forums.learning_path_forum_settings.breadcrumbs"),url:"/learning_paths/"+d.learningPath.id+"/forum_settings"}],t.$on("publishPath",function(){i.publishPath(d)}),t.$on("deletePath",function(){i.deletePath(d)}),t.$on("addNewCourseToLP",function(){i.addCourseToPath(d)}),t.$on("archivePath",function(){i.archivePath(d)})}f.module("lu").controller("LearningPathsForumSettingsController",e),e.$inject=["$scope","$rootScope","$filter","$q","LupHelper","StorageFactory","LearningPathActionsFactory","LearningPathFactory","UsersFactory","usersFilteringOptionsService","LupService"]}(window.angular),function(){"use strict";function e(e,t,r,n,o,a,i,s,l,c,u,d,p,_,m){var f=this,n=n.get(),g=(new l,new u);new _;function h(){f.learning_path_topic&&f.learning_path_topic.id?a.location="/forums/my_contribution/new_post?topic_id="+f.learning_path_topic.id+"&object_id="+f.learningPath.id+"&type_id="+r.forums.posts.creation_type.learning_path:f.learning_path_topic&&null===f.learning_path_topic.id?b(f.lupHelper.forums.topics.status_code.draft,!1).then(function(){var e=JSON.parse(g.data.topic_data);e.forum_topic.attributes&&(a.location="/forums/my_contribution/new_post?topic_id="+e.forum_topic.attributes.id+"&object_id="+f.learningPath.id+"&type_id="+r.forums.posts.creation_type.learning_path)}):a.location="/forums/my_contribution/new_post"}function b(e,t){var n=d.defer(),o=f.learning_path_topic;return o.status_code=e,o.type_code=r.forums.topics.type_code.learning_path,o.allow_posting=t,n.resolve(g.updateForumSettings(f.learningPath.id,o)),n.promise}function v(){m.switchButtons("createPost",f.learning_path_topic.status_code!=f.lupHelper.forums.topics.status_code.archived),m.switchButtons("unpublishTopic",f.learning_path_topic.status_code==f.lupHelper.forums.topics.status_code.published&&null!==f.learning_path_topic.id),m.switchButtons("publishTopic",f.learning_path_topic.status_code==f.lupHelper.forums.topics.status_code.draft||null===f.learning_path_topic.id),m.switchButtons("archiveTopic",!1),m.switchButtons("unarchiveTopic",!1),m.switchButtons("enablePosting",!f.learning_path_topic.allow_posting||null===f.learning_path_topic.id),m.switchButtons("disablePosting",f.learning_path_topic.allow_posting&&null!==f.learning_path_topic.id),m.switchButtons("editTopic",!1),m.switchButtons("deleteTopic",!1)}function w(e){e.topic_data&&((e=JSON.parse(e.topic_data))&&e.forum_topic&&e.forum_topic.attributes?f.learning_path_topic=e.forum_topic.attributes:e&&(e.status_code&&(f.learning_path_topic.status_code=e.status_code),f.learning_path_topic.allow_posting=e.allow_posting),v())}f.learningPath=n.learning_path.attributes,f.learning_path_topic=n.learning_path_topic.attributes,f.posts=n.posts,f.is_admin=n.is_admin,f.number_users_on_path=n.number_users_on_path,f.forums_enabled=n.forums_enabled,f.post_cover_reference=n.post_cover_reference,f.lupHelper=r,f.learning_path_forum_settings_url="/learning_paths/"+f.learningPath.id+"/forum_settings",f.exposedFunction={},f.showTopicDot=!1,f.createNewPost=h,f.showAction=!!f.learningPath.id,f.currentUrl=c.absUrl(),f.creationType=r.forums.posts.creation_type.learning_path,f.currentUserPmId=n.current_user_pm_id,v(),f.filterParams={show_topics_filter_typeahead:!1,show_courses_filter_typeahead:!1,show_lp_filter_typeahead:!1,is_admin:f.is_admin},f.orderTypes=[{label:f.lupHelper.showMessage("lup.forums.post_sort.latest_first"),value:"created_at.DESC",class:"select--ico-latest-first"},{label:f.lupHelper.showMessage("lup.forums.post_sort.oldest_first"),value:"created_at.ASC",class:"select--ico-oldest-first"},{label:f.lupHelper.showMessage("lup.forums.post_sort.most_likes"),value:"likes_count.DESC",class:"select--ico-most-popular"}],f.viewType=f.lupHelper.forums.card_types.grid,f.filterController="ForumsPostsFilterController as vm",f.filterTemplate="/tc/forums/posts-filter.html",f.filterURL="/forums/topic/"+f.learning_path_topic.id+".json",f.show_3dm=!0,f.post_cover_reference&&(f.force_refresh=!0,s(function(){return i.pingForProgress(f.post_cover_reference,f.posts.meta.prev_page,f.force_refresh,f.exposedFunction.fetch,!0)},500)),t.breadcrumbs=[{title:r.showMessage("learningpaths.learning_paths"),url:"/learning_paths"},{title:f.learningPath.name,url:"/learning_paths/"+f.learningPath.id},{title:r.showMessage("lup.forums.learning_path_forum.breadcrumbs"),url:"/learning_paths/"+f.learningPath.id+"/forums"}],t.$on("publishPath",function(){o.publishPath(f)}),t.$on("deletePath",function(){o.deletePath(f)}),t.$on("addNewCourseToLP",function(){o.addCourseToPath(f)}),t.$on("archivePath",function(){o.archivePath(f)}),t.$on("createPost",function(){h()}),t.$on("unpublishTopic",function(){f.learning_path_topic&&f.learning_path_topic.id&&m.updateTopicStatus(f.lupHelper.forums.topics.status_code.draft,null,f.learning_path_topic.id).then(function(e){e.success&&w(e)})}),t.$on("publishTopic",function(){var e,t;f.learning_path_topic&&null===f.learning_path_topic.id?(e=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_publish_topic"),t=I18n.t("lup.forums.topics.topic_action.publish_topic"),p.confirm(t,e).then(function(){b(f.lupHelper.forums.topics.status_code.published).then(function(e){(e=g.data).success&&w(e)})})):f.learning_path_topic&&m.updateTopicStatus(f.lupHelper.forums.topics.status_code.published,null,f.learning_path_topic.id).then(function(e){e.success&&w(e)})}),t.$on("enablePosting",function(){var e;f.learning_path_topic&&null===f.learning_path_topic.id?(e=I18n.t("lup.forums.topics.topic_action.are_your_sure_you_want_to_enable_posting"),p.confirm(I18n.t("lup.confirm"),e).then(function(){b(f.lupHelper.forums.topics.status_code.draft,!0).then(function(e){(e=g.data).success&&w(e)})})):f.learning_path_topic&&m.enablePosting(!0,f.learning_path_topic.id).then(function(e){e.success&&w(e)})}),t.$on("disablePosting",function(){f.learning_path_topic&&f.learning_path_topic.id&&m.enablePosting(!1,f.learning_path_topic.id).then(function(e){e.success&&w(e)})}),t.$on("editTopic",function(){})}window.angular.module("lu").controller("LearningPathForumsController",e),e.$inject=["$scope","$rootScope","LupHelper","StorageFactory","LearningPathActionsFactory","$window","LupService","$timeout","learnUponApi","$location","LearningPathFactory","$q","$luPopover","ForumTopicsFactory","ForumService"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s){var l=this,c=new t;l.groups=e.getKey("groups"),l.learningPath=e.getKey("learning_path").attributes,l.remove=function(e){c.removeLearningPath(e.group_id,e.id,function(){o.getGroups(l.learningPath.id).then(function(){l.groups=o.data.groups})})},l.helper=r,l.courses=e.getKey("courses_for_view"),l.showAction=!!l.learningPath.id,l.showAction=!!l.learningPath.id,n.ariaLabelSide=l.helper.showMessage("lup.learning_paths.info"),n.ariaLabel=l.helper.showMessage("a11y.main_lp_groups"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.$on("publishPath",function(){s.publishPath(l)}),n.$on("deletePath",function(){s.deletePath(l)}),n.$on("addNewCourseToLP",function(){s.addCourseToPath(l)}),n.$on("archivePath",function(){s.archivePath(l)})}angular.module("lu").controller("LarningPathsGroupsController",e),e.$inject=["StorageFactory","$rootScope","GroupsFactory","learnUponLearningPath","LupHelper","$luPopover","$modal","LearningPathActionsFactory"]}(),function(){"use strict";function e(e,o,t,n,r,a,i,s,l,c){var u=this;function d(e){var t={};e=e||{},t.params=r.get(),t.url="/learning_paths.json",void 0!==e.hideSpinner&&(t.hideSpinner=e.hideSpinner),u.isLoading=!0,o.getList(t).then(function(){u.learningPaths=o.data.learning_paths,n(function(){u.isLoading=!1},1e3)})}u.isLoading=!1,u.helper=a,u.learningPaths=i.getKey("learning_paths"),s.ariaLabel=a.showMessage("lup.a11y.lp_list_main"),s.ariaLabelSide=a.showMessage("lup.a11y.lp_list_aside"),s.activeLearningPathDDM={},s.toggled=function(e,t){s.activeLearningPathDDM[t]=e},e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.learning_paths.index"),url:"/learning_paths"}],u.loadData=d,u.destroy=function(n){var e=a.showMessage("learningpaths.are_your_sure_you_want_to_delete_this_path");0<n.user_count&&(e=a.showMessage("lup.learningpaths.are_your_sure_you_want_to_delete_this_path_with_enrollments"));c.confirm(a.showMessage("lup.confirm"),e).then(function(e){spinnerService.showGroup("luSpinnerGlobal");var t={data:{}};t.data.learning_path_form={},t.data.learning_path_form.id=n.id,t.data.learning_path_form.published_status_id="2",t.id=n.id,o.doUpdateLP(t).then(function(e){d()})})},u.sortOptions=[{label:u.helper.showMessage("lup.filters.name_az"),value:"name.asc",default:!0},{label:u.helper.showMessage("lup.filters.name_za"),value:"name.desc"},{label:u.helper.showMessage("lup.filters.created_at_asc"),value:"created_at.asc"},{label:u.helper.showMessage("lup.filters.created_at_desc"),value:"created_at.desc"}],e.$on("createLearningPath",function(){t.location="/learning_paths/new"})}angular.module("lu").controller("LearningPathsIndexController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$luPopover"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c,u,d,p,m,f){var g=this,h=i.get();g.helper=a,s.Helper=a,s._=_,g.learningPath=h.learning_path.attributes,g.difficulty_levels=h.difficulty_levels,g.unit_select_options=h.unit_select_options,g.number_users_on_path=h.number_users_on_path,s.ariaLabel=a.showMessage("lup.a11y.lp_additional_settings_main"),s.ariaLabelSide=a.showMessage("lup.a11y.additional_settings_sidebar"),g.is_admin=!1,g.auth_token_form=h.auth_token_form,g.showAction=!!g.learningPath.id,g.uploadingInProcess=!1,g.courses=i.getKey("courses_for_view"),g.selectedCourses=g.courses.data,g.formData={name:g.learningPath.name,keywords:g.learningPath.keywords,description:g.learningPath.description,minute_length:g.learningPath.minute_length,difficulty_level:g.learningPath.difficulty_level,course_length_unit:g.learningPath.course_length_unit,due_days_after_enrollment:g.learningPath.due_days_after_enrollment,due_date_after_enrollment:p("displayDateTime")(g.learningPath.due_date_after_enrollment,"YYYY-MM-DD"),send_due_date_reminders:g.learningPath.send_due_date_reminders,due_date_reminder_days:g.learningPath.due_date_reminder_days,due_date_reminder_days_2:g.learningPath.due_date_reminder_days_2,manager_can_enroll:g.learningPath.manager_can_enroll},e.$on("publishPath",function(){f.publishPath(g)}),e.$on("deletePath",function(){f.deletePath(g)}),e.$on("addNewCourseToLP",function(){f.addCourseToPath(g)}),e.$on("archivePath",function(){f.archivePath(g)}),g.save=function(){var t=g.learning_path_form;{var e;t.$valid&&(l.showGroup("luSpinnerGlobal"),(e={data:{}}).data.learning_path_form=g.formData,g.showAction?(e.id=g.learningPath.id,n.doUpdateLP(e).then(function(e){t.$setPristine()})):n.doSaveLP(e).then(function(e){t.$setPristine()}))}},g.cancel=function(){t.location="/learning_paths"}}angular.module("lu").controller("LearningPathsOptionsController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","spinnerService","$http","$modal","Upload","$filter","$luPopover","LearningPathActionsFactory"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c){var u=this;u.helper=a,u.learningPath=i.getKey("learning_path").attributes,u.unknown_enrollments=i.getKey("unknown_enrollments"),u.getCode=function(e){var t="-";e.is_unknown&&(t=e.code);return t},u.getPurchasedBy=function(e){return e.purchaser_first_name||e.purchaser_last_name?e.purchaser_first_name+" "+e.purchaser_last_name:e.purchaser_username?e.purchaser_username:e.purchaser_email},u.getUsedBy=function(e){return e.is_unknown||e.used_by_pm_id?e.user_first_name||e.user_last_name?e.user_first_name+" "+e.user_last_name+" ("+(e.user_username?e.user_username:e.user_email)+")":e.user_username?e.user_username:e.user_email?e.user_email:"-":e.first_name||e.last_name?e.first_name+" "+e.last_name+"("+e.email+")":e.email?e.email:"-"},u.loadData=function(e){var t={};e=e||{},t.params=r.get(),t.url="/learning_paths/:learning_path_id/sales/bulk-purchase.json".replace(/:learning_path_id/,u.learningPath.id),void 0!==e.hideSpinner&&(t.hideSpinner=e.hideSpinner);u.isLoading=!0,n.getUnknownEnrollments(t).then(function(){u.unknown_enrollments=n.data.unknown_enrollments,u.search=n.data.search,o(function(){u.isLoading=!1},1e3)})},e.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.learning_paths.index"),url:"/courses"},{title:u.learningPath.name,url:"/learning_paths/:learning_path_id".replace(/:learning_path_id/,u.learningPath.id)},{title:I18n.t("lup.breadcrumbs.learning_paths.sales"),url:"/learning_paths/:learning_path_id/sales".replace(/:learning_path_id/,u.learningPath.id)},{title:I18n.t("lup.learning_paths.sales_tab.subtabs.bulk_purchase"),url:"/learning_paths/:learning_path_id/sales/bulk-purchase".replace(/:learning_path_id/,u.learningPath.id)}]}angular.module("lu").controller("LearningPathsSalesBulkPurchaseController",e),e.$inject=["$rootScope","learnUponLearningPath","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","$filter","$http"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s){var l=this,c=n.getKey("portal_categories").data;l.learningPathSalesSettings=n.getKey("learning_path_sales_settings").attributes,l.learning_path=n.getKey("learning_path").attributes,l.store_url=n.getKey("store_url"),l.selectedMembershipType=-1,l.association_membership_types=n.getKey("association_membership_types"),l.membershipTypeUpdated=function(){l.hideFooter=!0,function(){var e={type_id:l.selectedMembershipType};o.addAssociationPrice(l.learning_path.id,e,!0).then(function(e){a.location.reload()})}()},l.removeAssociationPrice=function(e,t){32==event.keyCode&&event.preventDefault();e={price_id:e.id};o.removeAssociationPrice(l.learning_path.id,e,!0).then(function(e){a.location.reload()})},l.validCapacityOnTrainings=n.getKey("valid_capacity_on_trainings"),l.helper=t,l.cancel=function(e){l.learningPathSalesSettings=n.getKey("learning_path_sales_settings").attributes,e.$setPristine()},l.save=function(e){var t=angular.isArray(l.learningPathSalesSettings.store_groups)?l.learningPathSalesSettings.store_groups:[];t=t.map(function(e){return{id:e.id,title:e.title}});t={learning_path_sales_form:{sellable:l.learningPathSalesSettings.sellable,apply_sales_tax:l.learningPathSalesSettings.apply_sales_tax,categories:l.learningPathSalesSettings.categories,store_groups:t,membership_pricing:l.learningPathSalesSettings.membership_pricing,price:l.learningPathSalesSettings.price}};e.$dirty&&(e.$setPristine(),o.updateSalesSettings(l.learning_path.id,t).then(function(e){n.setKey("learning_path_sales_settings",e.data.learning_path_sales_settings),l.learningPathSalesSettings=n.getKey("learning_path_sales_settings").attributes}).catch(function(e){n.setKey("learning_path_sales_settings",e.data.learning_path_sales_settings),l.learningPathSalesSettings=n.getKey("learning_path_sales_settings").attributes}))},e.ariaLabel=t.showMessage("lup.a11y.learning_path_sales_main"),e.ariaLabelSide=t.showMessage("lup.a11y.learning_path_sales_aside"),l.price=0,l.fetchCategories=function(){return _.reject(c,function(e){return _.contains(_.map(l.learningPathSalesSettings.categories,function(e){return e.id}),e.id)})},l.removeFromSelectedCategory=function(t,e){l.learningPathSalesSettings.categories=_.reject(l.learningPathSalesSettings.categories,function(e){return e.id==t.id}),e.$setDirty()},l.categorySelected=function(e,t,n){l.learningPathSalesSettings.categories.push(e),l.categoryAutocompleteText=""},l.fetchGroups=i.fetchGroups,l.afterSelectGroup=function(e){angular.isDefined(l.theForm)&&l.theForm.$setDirty()},l.afterRemoveGroup=function(e){angular.isDefined(l.theForm)&&l.theForm.$setDirty()},l.learningPath=n.getKey("learning_path").attributes,l.courses=n.getKey("courses_for_view"),l.selectedCourses=l.courses.data,l.showAction=!!l.learningPath.id,e.$on("publishPath",function(){s.publishPath(l)}),e.$on("deletePath",function(){s.deletePath(l)}),e.$on("addNewCourseToLP",function(){s.addCourseToPath(l)}),e.$on("archivePath",function(){s.archivePath(l)}),l.setForm=function(e){l.theForm=e}}angular.module("lu").controller("LearningPathsSalesController",e),e.$inject=["StorageFactory","$rootScope","LupHelper","learnUponLearningPath","$http","$window","restrictByGroupService","LearningPathActionsFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this,s=new a("learning_path");function l(){var e={};e.params=r.get(),o.getCoupons(i.learningPath.id,e).then(function(e){i.coupons=e.data.coupons})}i.learningPath=e.getKey("learning_path").attributes,i.coupons=e.getKey("coupons"),i.getDiscount=function(e){{if(0===e.discount_type)return e.discount+"%";if(1===e.discount_type)return t.currency_symbol+e.discount}},i.loadData=l,i.destroy=function(e){s.destroy(e.id).then(function(e){l()})},i.edit=function(t){s.edit(t,function(e){e.learning_path_id=i.learningPath.id,s.update(t.id,e).then(function(e){l()}).catch(function(e){l()})})},t.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.learning_paths.index"),url:"/learning_paths"},{title:i.learningPath.name,url:"/learning_paths/:learning_path_id".replace(/:learning_path_id/,i.learningPath.id)},{title:I18n.t("lup.breadcrumbs.learning_paths.sales"),url:"/learning_paths/:learning_path_id/sales".replace(/:learning_path_id/,i.learningPath.id)},{title:I18n.t("lup.learning_paths.sales_tab.subtabs.coupons"),url:"/learning_paths/:learning_path_id/sales/coupons".replace(/:learning_path_id/,i.learningPath.id)}],t.$on("createCoupon",function(){s.new(function(e){e.learning_path_id=i.learningPath.id,s.create(e).then(function(e){l()}).catch(function(e){l()})})})}angular.module("lu").controller("LearningPathsSalesCouponsController",e),e.$inject=["StorageFactory","$rootScope","LupHelper","learnUponLearningPath","paramsService","CouponFactory"]}(),function(){"use strict";function e(n,e,o,t,r){e.get();n.LupHelper=t,n.loadShopifyProducts=function(){if("end_of_results"==n.nextPage)return;n.shopify_products&&!n.nextPage&&(n.nextPage=n.shopify_products.next_page);n.nextPage&&function(e){var t=new o;t.getShopifyProducts(e).then(function(){t.data.products&&0<t.data.products.length&&(n.nextPage=t.data.next_page,angular.forEach(t.data.products,function(e){n.shopify_products.all.push(e)}))})}(n.nextPage);return},n.selectShopifyProduct=function(e){(new o).updateLearningPathShopifyProductSelected(n.learning_path.old_shopify_product_id,n.learning_path.id,e).then(function(e){n.learning_path=e.data.learning_path.attributes,n.shopify_products=e.data.shopify_products})},n.removeShopifyProduct=function(){(new o).updateLearningPathShopifyProductSelected(n.learning_path.old_shopify_product_id,n.learning_path.id,null).then(function(e){n.learning_path=e.data.learning_path.attributes,n.shopify_products=e.data.shopify_products,n.nextPage=e.data.shopify_products.next_page})},n.shopify_products=e.getKey("shopify_products"),n.learning_path=e.getKey("learning_path").attributes,n.nextPage=null,r.breadcrumbs=[{title:t.showMessage("lup.breadcrumbs.learning_paths.index"),url:"/learning_paths"},{title:n.learning_path.name,url:"/learning_paths/:learning_path_id".replace(/:learning_path_id/,n.learning_path.id)},{title:t.showMessage("lup.breadcrumbs.learning_paths.sales"),url:"/learning_paths/:learning_path_id/shopify_sales".replace(/:learning_path_id/,n.learning_path.id)}]}angular.module("lu").controller("LearningPathsShopifySalesController",e),e.$inject=["$scope","StorageFactory","ShopifyProductFactory","LupHelper","$rootScope"]}(),function(){"use strict";function e(n,t,e,o,r,a,i,s,l,c,u,d){function p(e){e.fixed_date&&(e.fixed_date=u("displayDateTime")(e.fixed_date,"YYYY-MM-DD"))}n.course=angular.copy(e),n.courses=angular.copy(o),n.learningPath=angular.copy(r),n.index=a,n.lpShowMustPurchaseDropdown=i,n.completionLogicSequential=s,n.LupHelper=l,n.save=function(){var e={id:n.learningPath.id,lpc_id:n.course.id};"fixed_date"==n.prepareParams.delayField?e.fixed_date=n.course.fixed_date:"fixed_days"==n.prepareParams.delayField?e.fixed_days=n.course.fixed_days:"stagger_days"==n.prepareParams.delayField&&(e.stagger_days=n.course.stagger_days);c.post("/learning_paths/"+n.learningPath.id+"/set_lp_course_delay.json",e).success(function(e){e=e.learning_path_course.attributes;p(e),n.course=e,t.close({action:"reload"})}).error(function(e){t.close({action:"close"})})},n.cancel=function(){t.close({action:"close"})},n.enrollInList=function(){{return n.learningPath.completion_logic!=l.learning_paths.completion_logic.sequential?function(e){var t=[];e&&t.push({title:l.showMessage("learningpaths.must_purchase"),id:l.learning_paths.enrollment_options.must_purchase});return t.push({title:l.showMessage("learningpaths.learner_chooses"),id:l.learning_paths.enrollment_options.learner_chooses}),t.push({title:l.showMessage("learningpaths.fixed_date_enrollment"),id:l.learning_paths.enrollment_options.fixed_date}),t.push({title:l.showMessage("learningpaths.days_after_enrollment"),id:l.learning_paths.enrollment_options.fixed_days}),t}(function(e){return 1===e.sellable&&(1===e.require_coupon_to_purchase_free_course||0<e.price)}(e)):function(e,t){var n=[];e?n.push({title:l.showMessage("learningpaths.immediately"),id:l.learning_paths.immediate}):t||n.push({title:l.showMessage("learningpaths.complete_to_progress"),id:l.learning_paths.previous_completed});t&&(n.push({title:l.showMessage("learningpaths.pass_to_progress"),id:l.learning_paths.previous_passed}),n.push({title:l.showMessage("learningpaths.pass_or_fail_to_progress"),id:l.learning_paths.previous_passed_or_failed}));return n.push({title:l.showMessage("learningpaths.fixed_date_enrollment"),id:l.learning_paths.fixed_date}),n.push({title:l.showMessage("learningpaths.days_after_enrollment"),id:l.learning_paths.fixed_days}),n}(0===a,function(e){return 0!==e&&!!n.courses.data[e-1].need_to_be_passed}(n.index))}}(),n.isFirstCourse=0===a,n.prepareParams={},n.setForm=function(e){n.theForm=e},n.onChangeProgressField=function(e){var t={id:n.learningPath.id,lpc_id:n.course.id};"progress_requirement"==n.prepareParams.progressField?t.progress_requirement=e:"enrollment_option"==n.prepareParams.progressField&&(t.enrollment_option=e);c.post("/learning_paths/"+n.learningPath.id+"/set_progression_enrollmentoption.json",t).success(function(e){e=e.learning_path_course.attributes;p(e),n.course=e,d(function(){$("body").updatePolyfill()})}).error(function(e){})},d(function(){$("body").updatePolyfill()})}angular.module("lu").directive("formInit",function(){return{restrict:"A",scope:{init:"&formInit"},controller:["$scope","$element",function(e,t){var n=null;t[0]&&t[0].name&&(n=t[0].name);var o=e.$watch("init",function(){e[n]&&e.init&&(e.init(),o())})}]}}).controller("LPSetProgressionController",e),e.$inject=["$scope","$modalInstance","course","courses","learningPath","index","lpShowMustPurchaseDropdown","completionLogicSequential","LupHelper","$http","$filter","$timeout"]}(),function(){"use strict";function e(n,e,t,o,r,a){n.license=e.getKey("license").attributes,n.lupHelper=r,n.ariaLabel=r.showMessage("lup.a11y.edit_license"),n.ariaLabelSide=r.showMessage("lup.a11y.adding_new_licenses_aside"),a.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.licenses.index"),url:"/licenses"},{title:I18n.t("lup.breadcrumbs.licenses.edit"),url:window.location.pathname}],n.formData={id:n.license.id,number_purchased:n.license.number_purchased,allowed_to_sell:n.license.allowed_to_sell,date_expires:t("date")(n.license.date_expires,"yyyy-MM-dd"),is_perpetual:!!n.license.is_perpetual,is_unlimited:!!n.license.is_unlimited,can_manager_enroll_to_licenced_courses:!!n.license.can_manager_enroll_to_licenced_courses},n.save=function(e){{var t;(function(e){var t=!!n.formData.number_purchased||!!n.formData.is_unlimited;e.$setValidity("invalidNumberOfEnrollments",t);t=!!n.formData.date_expires||!!n.formData.is_perpetual;e.$setValidity("invalidExpiry",t)})(e),e.$valid&&(t={licenses_form:n.formData},e.$setPristine(),o.put("/licenses/"+n.formData.id+".json",t).success(function(e){}))}}}window.angular.module("lu").controller("LicensesEditController",e),e.$inject=["$scope","StorageFactory","$filter","$http","LupHelper","$rootScope"]}(),function(){"use strict";function e(o,e,t,n,r,a,i,s,l,c){var u=new n;o.ariaLabel=s.showMessage("lup.a11y.all_licenses_main"),o.ariaLabelSide=s.showMessage("lup.a11y.all_licenses_aside"),o.activeLicenseDDM={},o.toggled=function(e,t){o.activeLicenseDDM[t]=e};n=[{label:I18n.t("lup.licenses.sorting.course_name_asc"),value:"course_name.ASC",default:!0},{label:I18n.t("lup.licenses.sorting.course_name_desc"),value:"course_name.DESC"},{label:I18n.t("lup.licenses.sorting.client_name_asc"),value:"client_name.ASC"},{label:I18n.t("lup.licenses.sorting.client_name_desc"),value:"client_name.DESC"}];function d(e){var t=new Date,n=!e.date_expires,o=!!e.is_unlimited,n=!!e.date_expires&&new Date(e.date_expires)>t||n,o=e.number_purchased>e.number_used||o,e=m(e);return n&&o&&e}function p(){var e={};e.params=t.get(),u.getList(e).then(function(){o.licenses=u.data.licenses})}function m(e){return e.course_status==o.helper.coursePublishedStatuses.published||e.course_status==o.helper.coursePublishedStatuses.under_revision}o.filterStatus=s.filterLicenseStatuses[0].value,o.filterCreatedAfter="",o.filterCreatedBefore="",o.coursesSelectedArray=[],o.portalsSelectedArray=[],o.sortOptions=n,o.courses=[],o.portals=[],o.filteringControl={},o.licenses=e.getKey("licenses"),o.loadData=p,o.edit=function(e){a.location="licenses/"+e.id+"/edit"},o.destroy=function(t){r.confirm(I18n.t("lup.confirm"),I18n.t("lup.licenses.are_you_sure_you_want_to_delete_cannot_be_undone",{license_title:t.title})).then(function(e){u.destroy(t.id).then(function(){o.loadData()})})},o.licenseActive=d,o.licensePopOverMsg=function(e){return d(e)?s.showMessage("lup.licenses.active_message"):m(e)?s.showMessage("lup.licenses.expired_message"):s.showMessage("course_removed_from_group")},o.clearFiltering=function(){return o.filterStatus=s.filterLicenseStatuses[0].value,o.filterCreatedAfter="",o.filterCreatedBefore="",o.coursesSelectedArray=[],o.portalsSelectedArray=[],void p()},o.filterOptions=function(){return[{filterName:"filter[created_at][gt]",value:o.filterCreatedAfter},{filterName:"filter[created_at][lt]",value:o.filterCreatedBefore},{filterName:"filter[filterStatus]",value:o.filterStatus},{filterName:"filter[courses]",value:function(){var t=[];return _.forEach(o.coursesSelectedArray,function(e){t.push(e.id)}),t.join(",")}()},{filterName:"filter[portals]",value:function(){var t=[];return _.forEach(o.portalsSelectedArray,function(e){t.push(e.id)}),t.join(",")}()}]},o.fetchClients=function(e){return i.get("/licenses/clients.json",{params:{search:e}}).then(function(e){return e.data.clients.data})},o.showURL=function(e){return m(e)?e.course_url:""},o.courseSearch="",o.selectedCourses=[],o.selectedCourseIds=[],o.fetchCourses=function(e){var t=c.defer(),n="";angular.isArray(o.selectedCourseIds)||(o.selectedCourseIds=[]);try{n=(angular.isArray(e.$selected)?e.$selected.concat(o.selectedCourseIds):o.selectedCourseIds).join(",")}catch(e){$log.debug("fetchCoursesApi: Unable to convert selected courses to string!"),n=""}return i.get("/all_courses.json",{params:{search:e.$query,page:e.$page,page_size:o.helper.pagination_sizes.typeadhead_default,except:n,include_draft:"0"}}).success(function(e){t.resolve(e.courses.data)}).error(function(){t.reject("Failed to get courses")}),t.promise},o.selectedCourses.forEach(function(e){o.selectedCourseIds.push(e.course_id)}),o.portalSearch="",o.selectedPortals=[],o.selectedPortalIds=[],o.fetchPortals=function(e){var t=c.defer(),n="";angular.isArray(o.selectedPortalIds)||(o.selectedPortalIds=[]);try{n=(angular.isArray(e.$selected)?e.$selected.concat(o.selectedPortalIds):o.selectedPortalIds).join(",")}catch(e){$log.debug("fetchCoursesApi: Unable to convert selected courses to string!"),n=""}return i.get("/clients.json",{params:{search:e.$query,page:e.$page,page_size:o.helper.pagination_sizes.typeadhead_default,except:n}}).success(function(e){t.resolve(e.clients.data)}).error(function(){t.reject("Failed to get portals")}),t.promise},_.forEach(o.selectedPortals,function(e){o.selectedPortals.push(e.id)}),o.helper=s}angular.module("lu").controller("LicensesIndexController",e),e.$inject=["$scope","StorageFactory","paramsService","LicensesFactory","$luPopover","$window","$http","LupHelper","$filter","$q"]}(),function(){"use strict";function e(r,a,i,s,l){r.formData={courses:[],clients:[],number_of_enrollments:null,date_expires:null,is_perpetual:!1,number_purchased:0,is_unlimited:!1,allowed_to_sell:0},r.form={},r.helper=i,r.ariaLabel=i.showMessage("lup.a11y.adding_new_licenses_main"),r.ariaLabelSide=i.showMessage("lup.a11y.adding_new_licenses_aside"),r.coursesSelectedArray=[],r.clientsSelectedArray=[],r.save=function(e){var t=s.defer();{var n,o;r.selectedCourseIds=_.map(r.coursesSelectedArray,function(e){return e.id}),r.selectedClientIds=_.map(r.clientsSelectedArray,function(e){return e.id}),r.formData.courses=_.uniq(r.selectedCourseIds),r.formData.clients=_.uniq(r.selectedClientIds),function(e){var t=0<r.formData.courses.length;e.$setValidity("invalidCourses",t);t=0<r.formData.clients.length;e.$setValidity("invalidClients",t);t=!!r.formData.number_purchased||!!r.formData.is_unlimited;e.$setValidity("invalidNumberOfEnrollments",t);t=!!r.formData.date_expires||!!r.formData.is_perpetual;e.$setValidity("invalidExpiry",t)}(e),e.$valid&&(o=_.reduce(r.coursesSelectedArray,function(e,t){return e+(t.contains_assignments||t.contains_sessions?1:0)},0),n=_.reduce(r.coursesSelectedArray,function(e,t){return e+(t.contains_trainings?1:0)},0),e=_.reduce(r.coursesSelectedArray,function(e,t){return e+(t.contains_checklists?1:0)},0),n?l.notify("",i.showMessage("licenses.courses_contains_events")):e?l.notify("",i.showMessage("lup.licenses.courses_contains_checklist_modules")):o?(o=i.showMessage("licenses.courses_contains_events_or_assignments")+"<br/><b>"+i.showMessage("lup.licenses.would_you_like_to_proceed")+"</b>",l.confirm(i.showMessage("lup.confirm"),o).then(function(e){r.requestInProgress=!0,a.post("/licenses.json",{licenses_form:r.formData}).success(function(e){t.resolve(e),r.requestInProgress=!1}).error(function(){t.reject("Failed to create licenses"),r.requestInProgress=!1})})):(r.requestInProgress=!0,a.post("/licenses.json",{licenses_form:r.formData}).success(function(e){t.resolve(e),r.requestInProgress=!1}).error(function(){t.reject("Failed to create licenses"),r.requestInProgress=!1})))}},r.requestInProgress=!1,r.fetchClients=function(e){var t=s.defer();return a.get("/licenses/clients.json",{params:{search:e.$query,page:e.$page,page_size:r.helper.pagination_sizes.typeadhead_default}}).success(function(e){t.resolve(e.clients.data)}).error(function(){t.reject("Failed to get clients")}),t.promise},r.fetchCourses=function(e){var t=s.defer();return a.get("/licenses/courses.json",{params:{search:e.$query,page:e.$page,page_size:r.helper.pagination_sizes.typeadhead_default}}).success(function(e){e=e.courses.data,e=_.map(e,function(e){return e.firstLineDisplay=angular.isDefined(e.name)?e.name:"",e.secondLineDisplay=angular.isDefined(e)?r.helper.showMessage("courses.version")+" "+e.version:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get courses")}),t.promise},r.afterSelectCourse=function(e){angular.isDefined(r.form)&&r.form.$setDirty()},r.afterRemoveCourse=function(e){angular.isDefined(r.form)&&r.form.$setDirty()},r.afterSelectClient=function(e){angular.isDefined(r.form)&&r.form.$setDirty()},r.afterRemoveClient=function(e){angular.isDefined(r.form)&&r.form.$setDirty()},r.selectedCourseIds=[],r.selectedClientIds=[],r.setForm=function(e){r.form=e}}angular.module("lu").controller("LicensesNewController",e),e.$inject=["$scope","$http","LupHelper","$q","$luPopover"]}(),function(){"use strict";function e(t,e,n,o,r){r=r.get();t.LupHelper=n,t.forceShowSave=!1,t.ilt_location=r.ilt_location.attributes,t.ilt_location.timezone||(t.ilt_location.timezone="UTC"),t.ilt_location.country_code="xx",t.ilt_location.state_code="xx",t.timezones=r.timezones,t.save=function(e){(function(e){e.$setValidity("emptyTitle",!!t.ilt_location.title&&0<t.ilt_location.title.trim().length)})(e),e.$valid&&(o.showGroup("luSpinnerGlobal"),e.commit())}}window.angular.module("lu").controller("LocationsNewController",e),e.$inject=["$scope","$http","LupHelper","spinnerService","StorageFactory"]}(),function(){"use strict";function e(t,e,n,o,r,a){r=r.get();t.forceShowSave=!1,t.LupHelper=n,t.ilt_location=r.ilt_location.attributes,t.timezones=r.timezones,t.cancel=function(){a.location="/locations/"+t.ilt_location.id},t.ilt_location.country_code||(t.ilt_location.country_code="xx"),t.ilt_location.timezone||(t.ilt_location.timezone="UTC"),t.ilt_location.state_code&&"US"==t.ilt_location.country_code||(t.ilt_location.state_code="xx"),t.save=function(e){(function(e){e.$setValidity("emptyTitle",!!t.ilt_location.title&&0<t.ilt_location.title.trim().length)})(e),e.$valid&&(o.showGroup("luSpinnerGlobal"),e.commit())}}window.angular.module("lu").controller("LocationsShowController",e),e.$inject=["$scope","$http","LupHelper","spinnerService","StorageFactory","$window"]}(),function(){"use strict";function e(t,n,e,o,r){t.helper=o,t.learnUponMessage=r,t.messageIds=e,t.title=t.helper.showMessage("lup.confirm"),t.message=t.helper.showMessage("messages.are_you_sure_you_want_to_delete_this_message"),1<t.messageIds.length&&(t.message=t.helper.showMessage("messages.are_you_sure_you_want_to_delete_this_messages")),t.deleteMessage=function(){var e={};e.data={messages_for_delete:t.messageIds},r.doMultiDelete(e).then(function(){n.close()})},t.dismissModal=function(){n.dismiss()}}angular.module("lu").controller("DeleteMessageModalController",e),e.$inject=["$scope","$modalInstance","messageIds","LupHelper","learnUponMessage"]}(),function(){"use strict";function e(o,t,n,r,e,a){o.helper=a,o.messageId=r,o.formData={forward_user_readable:"",forward_user_id:"",forward_message_body:e},o.noResults=!1,o.recipientSearch="",o.recipientFocused=!0,o.save=function(){var e={message_id:r,forward_to:o.formData.forward_user_id,forward_message_body:o.formData.forward_message_body};n.post("/messages/forward-message.json",e).success(function(e){t.close(),window.location=e.redirect_url}).error(function(e){t.close(),window.location=e.redirect_url})},o.cancel=function(){t.close()},o.fetchRecipients=function(e){o.recipientSearch=e;var t=[];return n.get("/messages/find-recipients.json",{params:{search:e,type:"forward_user"}}).then(function(e){return(t=e.data.recipients.data)&&0===t.length?(o.noResults=!0,[]):(o.noResults=!1,t)})},o.userSelected=function(e,t,n){o.formData.forward_user_id=e.user_id,o.formData.forward_user_readable=e.name},o.clearRecipient=function(){o.formData.forward_user_id="",o.formData.forward_user_readable="",o.recipientSearch=""}}angular.module("lu").controller("MessageForwardController",e),e.$inject=["$scope","$modalInstance","$http","messageId","forwardContent","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this;function l(e){a.openMessage(e)}s.helper=i,s.message="",s.messages=[],s.ddmOppened=!1,s.modalClosed=!1,s.unread_messages=t.unread_messages,s.messagingEnabled=!t.disable_messaging,s.canCreateNewMessages=!1,s.keyParser=function(e,t,n){32==event.keyCode&&event.preventDefault();e=i.keyboard_keys[e.keyCode];"enter"!=e&&"space"!=e||(t===s.typeOf.message?l(n):t===s.typeOf.newMessage&&s.helper.openUrl(n))},s.a11yMessageName=function(e){if(e)return e.is_read?s.helper.showMessage("lup.a11y.read_message_from")+" "+e.first_name:s.helper.showMessage("lup.a11y.unread_message_from")+" "+e.first_name},s.a11yMessageBody=function(e){if(e)return s.helper.showMessage("lup.a11y.message_text")+" "+e.body+", "+s.helper.showMessage("lup.a11y.more_detail_space_and_enter")},s.toggled=function(e){!0===e?(s.ddmOppened=!0,s.ddmPrevouslyOpened=!0,s.isLoading=!0,n.getList({url:"/messages/inbox.json",params:{per_page:5}}).then(function(){s.messages=n.data.messages.data,s.unread_messages=n.data.number_unread_messages,t.myMessages=s.messages,r(function(){s.isLoading=!1},500)})):(s.ddmOppened=!1,1==s.ddmPrevouslyOpened&&angular.element(".mmbtn").focus())},s.openMessage=l,s.ddmPrevouslyOpened=!1,s.closeDropdown=function(){e.$broadcast("$locationChangeSuccess")},s.typeOf={message:1,newMessage:2}}angular.module("lu").controller("MessageMenuController",e),e.$inject=["$scope","$rootScope","learnUponMessage","$window","$timeout","messagesHelper","LupHelper"]}(),function(){"use strict";function e(e,n,t,o,r,a,i){var s=this;s.helper=t,s.messagesHelper=r,s.enrollment_id=o.$parent.enrollment.id,s.messageData={message:{body:"",subject:""},message_to_author:!0},s.messageData.enrollment_id=s.enrollment_id,s.send=function(t){{var e;t.$dirty&&t.$valid&&(a.show("luSpinner-msq-author"),(e={data:{}}).data=s.messageData,e.hideSpinner=!0,n.doSendMessageToAuthor(e).then(function(e){s.messageData.message.body="",s.messageData.message.subject="",t.$setPristine(),a.hide("luSpinner-msq-author")},function(e){a.hide("luSpinner-msq-author")}))}}}angular.module("lu").controller("MessagesAuthorController",e),e.$inject=["$rootScope","learnUponMessage","LupHelper","$scope","messagesHelper","spinnerService","$http"]}(),function(){"use strict";function e(t,n,o,r,e,a,i,s,l,c,u,d){var p=this;p.helper=a,p.messagesHelper=l,p.conversationMessages=[],p.messages=i.getKey("messages"),p.messageObject=i.getKey("message"),p.message=p.messageObject?p.messageObject.attributes:void 0,p.dateFormat=i.getKey("date_format"),p.currentUserId=i.getKey("current_user_id"),p.portalMembershipId=i.getKey("portal_membership_id"),p.location=i.getKey("location"),p.cu_profile_image=i.getKey("cu_profile_image");var m=i.getKey("user");function f(e,t){l.doMessageImportant(p,e,t,null),r(function(){g(p.location,e)},500)}function g(e,t){var n={important:!1,unimportant:!1,read:!1,unread:!1},o={important:!1,unimportant:!1};"inbox"==e?!0===t.recipient_important?(o.important=!1,o.unimportant=!0):(o.important=!0,o.unimportant=!1):"sent"==e?!0===t.sender_important?(o.important=!1,o.unimportant=!0):(o.important=!0,o.unimportant=!1):"important"==e&&(o.important=!1,o.unimportant=!0),_.extend(n,o);o={read:!1,unread:!1};"inbox"!=e&&"important"!=e&&"archive"!=e||(1===t.is_read?(o.read=!1,o.unread=!0):(o.read=!0,o.unread=!1)),_.extend(n,o),p.actionButtonsDecide=n}p.isAdmin=i.getKey("is_admin"),p.isManager=i.getKey("is_manager"),p.participantUserId=i.getKey("participant_user_id"),p.participantIsAdmin=i.getKey("participant_is_admin"),p.managerManagesParticipant=i.getKey("manager_manages_participant"),p.myProfileUrl="/my-profile",p.participantProfileUrl="/users/"+p.participantUserId,s.ariaLabel=a.showMessage("lup.a11y.new_messages_inbox_main"),s.ariaLabelSide=a.showMessage("lup.a11y.new_messages_inbox_aside"),p.hideProfile=null===p.participantUserId||!p.isAdmin&&!p.isManager||(!(!p.isManager||!p.participantIsAdmin)||!(!p.isManager||p.managerManagesParticipant)),p.user=m?m.attributes:void 0,p.replyMessage={sender_pm_id:null,recipient_pm_id:null,parent_message_id:null,subject:null,body:""},p.actionButtonsDecide={important:!1,unimportant:!1,read:!1,unread:!1},g(p.location,p.messages.data[0]),p.crushed=3<p.messages.data.length,p.uncrush=function(e){e&&e.preventDefault();p.crushed=!1},p.importantArchiveSender=function(e){return l.importantArchiveSender(p,e)},p.onStarClick=function(e){f(e.relatedObject.id,e.model)},p.doMessageImportant=f,p.doMessageArchive=function(){var e={};e.data={messages_for_archive:[p.messages.data[0].id]},n.doMultiArchive(e).then(function(){o.location="/messages/archive"})},p.doMessageDelete=function(){d.open({templateUrl:"/tc/messages/delete-message-modal.html",controller:"DeleteMessageModalController",size:"sm",resolve:{messageIds:function(){return[p.messages.data[0].id]}}}).result.then(function(){o.location="/messages/inbox"})},p.doMessageRead=function(e){var t={};t.data={messages_for_change:[p.messages.data[0].id],mark_as:e||null},n.doMultiRead(t).then(function(){p.messages.data[0].is_read="read"==t.data.mark_as?1:0,r(function(){g(p.location,p.messages.data[0])},300)})},p.doMessageImportantAction=function(e){var t={};t.data={messages_for_important:[p.messages.data[0].id],important:e?1:0},n.doMultiImportant(t).then(function(){"inbox"==p.location?p.messages.data[0].recipient_important=!!t.data.important:"sent"==p.location&&(p.messages.data[0].sender_important=!!t.data.important),r(function(){g(p.location,p.messages.data[0])},300)})},p.expandCollapseMessage=function(e,t){t&&t.preventDefault();1<p.messages.data.length&&(e.expanded=!e.expanded)},p.send=function(t){{var e;t.$dirty&&t.$valid&&(c.showGroup("luSpinnerGlobal"),(e={data:{}}).data.message=p.replyMessage,e.data.location="inbox",n.doMessageReply(e).then(function(e){t.$setPristine(),window.location=n.data.redirect_url}))}},p.showForwardMsgModal=function(t){d.open({templateUrl:"/tc/messages/forward_message_modal.html",controller:"MessageForwardController",size:"lg",resolve:{messageId:function(){return t},forwardContent:function(){return(e=t)?u.get("/messages/build-forward-content/"+e+".json",{}).then(function(e){return e.data.forward_content}):void 0;var e}}}).result.then(function(){})},t.$on("createMessage",function(){o.location="/messages/new"}),function(){!function(e){if(!e)return;u.get("/messages/build-reply/"+e+".json",{}).then(function(e){e=e.data.reply.attributes;p.replyMessage.sender_pm_id=e.sender_pm_id,p.replyMessage.recipient_pm_id=e.recipient_pm_id,p.replyMessage.parent_message_id=e.parent_message_id,p.replyMessage.subject=e.subject,p.replyMessage.body=""})}(p.messageObject.attributes.id);var e=[{title:p.helper.showMessage("lup.breadcrumbs.messages.index"),url:"/messages"},{title:_.unescape(p.messageObject.attributes.subject),url:"/messages/inbox/"+p.messageObject.attributes.id}];t.breadcrumbs=e}()}angular.module("lu").controller("MessagesConversationController",e),e.$inject=["$rootScope","learnUponMessage","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","messagesHelper","spinnerService","$http","$modal"]}(),function(){"use strict";function e(n,o,e,r,t,a,i,s,l,c,u){var d=this;function p(e){var t={};e=e||{},t.params=a.get(),t.url="/messages/"+function(e){var t="inbox";switch(e||""){case"sent":t="sent";break;case"drafts":t="drafts";break;case"archive":t="archive";break;case"important":t="important"}return t+".json"}(d.location),void 0!==e.hideSpinner&&(t.hideSpinner=e.hideSpinner),d.isLoading=!0,o.getList(t).then(function(){d.messages=o.data.messages,d.location=o.data.location,d.filter=o.data.filter,r(function(){d.isLoading=!1},1e3),f()})}function m(e,t,n){n=n||"important"==d.location;u.doMessageImportant(d,e,t,f,n?p:null)}function f(){(new Date).getTime();var e=_.filter(d.messages.data,function(e){if(-1<d.selection.indexOf(e.id))return e}),t=_.extend({important:0,unimportant:0},_.countBy(e,function(e){return"inbox"==d.location?!0===e.recipient_important?"important":"unimportant":"sent"==d.location?!0===e.sender_important?"important":"unimportant":"important"==d.location?"important":{}})),n={important:!1,unimportant:!1};0===t.important&&0===t.unimportant?(n.important=!1,n.unimportant=!1):0===t.important?n.important=!0:0===t.unimportant?n.unimportant=!0:n={important:!0,unimportant:!0},_.extend(d.actionButtonsDecide,n);t=_.extend({read:0,unread:0,sent:0},_.countBy(e,function(e){return"inbox"==d.location||"archive"==d.location?1===e.is_read?"read":"unread":"important"==d.location?d.portalMembershipId==e.sender_pm_id?"sent":1===e.is_read?"read":"unread":{}})),n={read:!1,unread:!1};t.sent===e.length||0===t.read&&0===t.unread?(n.read=!1,n.unread=!1):0===t.read?n.read=!0:0===t.unread?n.unread=!0:n={read:!0,unread:!0},_.extend(d.actionButtonsDecide,n);n={archive:!1};"drafts"==d.location||"archive"==d.location?n.archive=!1:n.archive=!0,_.extend(d.actionButtonsDecide,n),(new Date).getTime()}d.helper=i,d.messages=s.getKey("messages"),d.location=s.getKey("location"),d.filter=s.getKey("filter"),d.sent=s.getKey("sent"),d.draft=s.getKey("draft"),d.important=s.getKey("important"),d.archive=s.getKey("archive"),d.sort=s.getKey("sort"),d.dateFormat=s.getKey("date_format"),d.currentUserId=s.getKey("current_user_id"),d.portalMembershipId=s.getKey("portal_membership_id"),d.messagesData=d.messages?d.messages.data:[],d.selection=[],d.filterStatus="",d.msg_filters=n.message_filters,d.sortOptions=[{label:i.showMessage("lup.filters.default"),value:"",default:!0},{label:i.showMessage("lup.filters.important_first"),value:"important"},{label:i.showMessage("lup.filters.unread_first"),value:"unread"}],d.pagesImportant=[],d.actionButtonsDecide={important:!1,unimportant:!1,read:!1,unread:!1},d.loadData=p,d.applyFilter=function(){var e={filter:d.filterStatus};a.merge(e),d.selection.length=0,p({hideSpinner:!1})},d.openMessage=function(e){u.openMessage(e,d.location)},d.toggleSelection=function(e){var t=d.selection.indexOf(e),n=c("filter")(d.messages.data,{id:e},!0)[0];-1<t?d.selection.splice(t,1):d.selection.push(e);l.$broadcast("itemSelect",{message:n,action:-1<t?"deselect":"select"})},d.onSelectStateChange=function(){f()},d.doMessageDelete=function(){t.open({templateUrl:"/tc/messages/delete-message-modal.html",controller:"DeleteMessageModalController",size:"sm",resolve:{messageIds:function(){return d.selection}}}).result.then(function(){n.unread_messages=o.data.number_unread_messages,a.merge({page:1}),d.selection.length=0,p()})},d.doMessageArchive=function(){var e={};e.data={messages_for_archive:d.selection},d.selection&&o.doMultiArchive(e).then(function(){n.unread_messages=o.data.number_unread_messages,a.merge({page:1}),d.selection.length=0,p()})},d.doMessageImportant=m,d.doMessageRead=function(e){var t={};t.data={messages_for_change:d.selection,mark_as:e||null},d.selection&&o.doMultiRead(t).then(function(){n.unread_messages=o.data.number_unread_messages,angular.forEach(d.messages.data,function(e){angular.forEach(d.messages.data,function(e){_.contains(d.selection,e.id)&&(e.is_read="read"==t.data.mark_as?1:0)}),f()})})},d.inboxSender=function(e){return e.display_name?e.display_name+""+(e.group_title?" ("+e.group_title+")":""):e.username?e.username:e.email+" "+(e.group_title?" ("+e.group_title+")":"")},d.sentRecipient=function(e){return u.sentRecipient(d,e)},d.isCurrentUserRecipient=function(e){return u.isCurrentUserRecipient(d,e)},d.isCurrentUserSender=function(e){return u.isCurrentUserSender(d,e)},d.importantArchiveSender=function(e){return u.importantArchiveSender(d,e)},d.isImportant=function(e,t){{if("sender"==t)return!!e.sender_important;if("recipient"==t)return!!e.recipient_important}return!1},d.onStarClick=function(e){m(e.relatedObject.id,e.model)},n.$on("createMessage",function(){e.location="/messages/new"}),n.ariaLabel=i.showMessage("a11y.message_list"),n.ariaLabelSide=i.showMessage("lup.messages.filter")}angular.module("lu").controller("MessagesIndexController",e),e.$inject=["$rootScope","learnUponMessage","$window","$timeout","$modal","paramsService","LupHelper","StorageFactory","$scope","$filter","messagesHelper"]}(),function(){"use strict";function e(e,o,t,n,r,a,i,s,l,c){var u=this,i=i.get();u.helper=a,u.message=i.message.attributes,u.is_admin=i.is_admin,u.is_manager=i.is_manager,u.is_instructor=i.is_instructor,u.is_student=!u.is_instructor&&!u.is_manager&&!u.is_admin,u.auth_token_form=i.auth_token_form,u.is_announcement=!u.is_admin,u.type=u.is_announcement?"group":"user",u.createNewAnnouncement="group"===u.type||!!u.message.draft_recipient_id&&!!u.message.bulk_send,u.showTypeahead=!0,u.noResults=!1,u.recipientSearch="",u.recipientFocused=!0,u.saveInProgress=!1,u.formData={to:"",subject:_.unescape(u.message.subject),body:_.unescape(u.message.body),recipient_id:"",recipient_readable:"",student_to:u.message.student_to,pm_id:"",user_readable:""},u.createNewAnnouncement?(u.formData.recipient_id=u.message.draft_recipient_id,u.formData.recipient_readable=u.message.draft_recipient):(u.formData.pm_id=u.message.draft_recipient_pm_id,u.formData.user_readable=u.message.draft_recipient);i=[{title:u.helper.showMessage("lup.breadcrumbs.messages.index"),url:"/messages"},{title:u.helper.showMessage("lup.breadcrumbs.messages.new_message"),url:"/messages/new"}];function d(){u.formData.recipient_id="",u.formData.recipient_readable="",u.formData.pm_id="",u.formData.user_readable="",u.recipientSearch=""}e.breadcrumbs=i,e.ariaLabel=u.helper.showMessage("messages.new_message"),e.ariaLabelSide=u.helper.showMessage("lup.info"),u.send=function(t){var n=u.message_form;{var e;u.saveInProgress=!0,n.$valid&&(l.showGroup("luSpinnerGlobal"),(e={data:{}}).data.message={},e.data.is_draft="",u.message&&(e.data.id=u.message.id),u.createNewAnnouncement?(t&&(e.data.is_draft="1",e.data.draft_recipient=u.formData.recipient_readable),e.data.message.recipient_id=u.formData.recipient_id,e.data.message_recipient_readable=u.formData.recipient_readable):(t&&(e.data.is_draft="1",e.data.draft_recipient=u.formData.user_readable),e.data.pm_id=u.formData.pm_id,e.data.user_readable=u.formData.user_readable),e.data.message.subject=u.formData.subject,e.data.message.body=u.formData.body,o.doNewMessage(e).then(function(e){n.$setPristine(),window.location=t?"/messages/drafts/":o.data.redirect_url}))}},u.fetchRecipients=function(e){u.recipientSearch=e;var t=[];return c.get("/messages/find-recipients.json",{params:{search:e,type:u.type}}).then(function(e){return(t=e.data.recipients.data)&&0===t.length?(u.noResults=!0,[]):(u.noResults=!1,t)})},u.userSelected=function(e){u.createNewAnnouncement?(u.formData.recipient_id=e.subjectid,u.formData.recipient_readable=e.name):(u.formData.pm_id=e.recipient_pm_id,u.formData.user_readable=e.name)},u.clearRecipient=d,u.onRecipientLostFocus=function(){},s.$watch(function(){return u.is_announcement},function(e,t){e!==t&&(u.type=u.is_announcement?"group":"user",u.createNewAnnouncement="group"==u.type||!!u.message.draft_recipient_id&&!!u.message.bulk_send,d(),u.recipientFocused=!1,n(function(){u.recipientFocused=!0}))})}angular.module("lu").controller("MessagesNewController",e),e.$inject=["$rootScope","learnUponMessage","$window","$timeout","paramsService","LupHelper","StorageFactory","$scope","spinnerService","$http"]}(),function(){"use strict";function e(n,e,t,o,r,a){var i=e.get();n.client_host_url=i.client_host_url,n.client_subdomain=i.client_subdomain,n.LupHelper=t,n.save=function(e){var t=a.defer();n.formData.ssl_cert=n.ssl_cert,n.formData.private_key=n.private_key,n.formData.ca_bundle=n.ca_bundle,void 0===n.ssl_cert&&void 0===n.private_key&&void 0===n.ca_bundle?e.$setValidity("validInput",!1):(n.showSpinner=!0,n.disableButtons=!0,function(){var t=a.defer();return r.get("/retrieve_token.json").success(function(e){t.resolve(e)}).error(function(){t.reject("Failed to get token.")}),t.promise}().then(function(e){r.post("https://"+n.client_subdomain+"."+n.client_host_url+"/portal_certificates.json",{token:e,user_id:i.current_user_id,portal_id:i.portal_setting.attributes.group_id,ssl_certificate_form:n.formData}).success(function(e){n.showSpinner=!1,n.disableButtons=!1,t.resolve(e),o.close()}).error(function(){n.showSpinner=!1,n.disableButtons=!1,t.reject("Failed to create ssl certificate")})}));return t.promise},n.showSpinner=!1,n.disableButtons=!1;n.formData={ssl_cert:null,ca_bundle:null,private_key:null},n.cancel=function(){o.close()}}angular.module("lu").controller("PortalCertificatesNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","$modalInstance","$http","$q"]}(),function(){"use strict";function e(o,e,r,a,i,s,t,l){e.get();o.LupHelper=r,o.changedInput=0,o.setChangedInput=function(){o.changedInput=1},o.showSpinner=!1,o.disableButtons=!1,o.save=function(e){var t=i.defer();{var n;o.formData.new_learning_credit_name=o.learning_credit_name_to_edit,o.formData.new_learning_credit_abbr=o.learning_credit_abbr_to_edit,void 0===o.learning_credit_name_to_edit||void 0===o.learning_credit_abbr_to_edit?(e.$setValidity("validInput",!1),e.$setValidity("allowedLengthName",!0),e.$setValidity("allowedLengthAbbr",!0)):(n=!0,e.$setValidity("validInput",!0),o.learning_credit_name_to_edit.length>r.portal_learning_credits_settings.max_number_of_characters_name?(e.$setValidity("allowedLengthName",!1),n=!1):e.$setValidity("allowedLengthName",!0),o.learning_credit_abbr_to_edit.length>r.portal_learning_credits_settings.max_number_of_characters_abbr?(e.$setValidity("allowedLengthAbbr",!1),n=!1):e.$setValidity("allowedLengthAbbr",!0),n&&(o.showSpinner=!0,o.disableButtons=!0,s.post("/portal_learning_credits/edit.json",{portal_learning_credits_form:o.formData,old_learning_credit_id:l.id}).success(function(e){o.showSpinner=!1,o.disableButtons=!1,t.resolve(e),a.close()}).error(function(){o.showSpinner=!1,o.disableButtons=!1,t.reject("Failed to create new learning credit")})))}return t.promise},o.cancel=function(){1==o.changedInput?t.confirm(r.showMessage("lup.confirm"),"Are you sure you want to close the window and dismiss all data?").then(function(e){a.close()}):a.close()},o.learning_credit_name_to_edit=l.name,o.learning_credit_abbr_to_edit=l.title;o.formData={new_learning_credit_name:null,new_learning_credit_abbr:null}}angular.module("lu").controller("PortalLearningCreditsEditController",e),e.$inject=["$scope","StorageFactory","LupHelper","$modalInstance","$q","$http","$luPopover","learning_credit"]}(),function(){"use strict";function e(o,e,r,a,i,s,t,n){e.get();o.LupHelper=r,o.changedInput=0,o.learning_credit_select_options=n,o.updateSelectedLearningCredit=function(e){o.learning_credit_option?(e.$setValidity("validInput",!0),o.showNewLearningCreditFields=!1):o.showNewLearningCreditFields=!0},o.showNewLearningCreditFields=!0,o.showSpinner=!1,o.disableButtons=!1,o.save=function(e){var t=i.defer();{var n;o.formData.learning_credit_option=o.learning_credit_option,o.formData.custom_learning_credit_name=o.custom_learning_credit_name,o.formData.custom_learning_credit_abbr=o.custom_learning_credit_abbr,o.learning_credit_option||void 0!==o.custom_learning_credit_name&&void 0!==o.custom_learning_credit_abbr?(n=!0,e.$setValidity("validInput",!0),!o.learning_credit_option&&o.custom_learning_credit_name.length>r.portal_learning_credits_settings.max_number_of_characters_name?(e.$setValidity("allowedLengthName",!1),n=!1):e.$setValidity("allowedLengthName",!0),!o.learning_credit_option&&o.custom_learning_credit_abbr.length>r.portal_learning_credits_settings.max_number_of_characters_abbr?(e.$setValidity("allowedLengthAbbr",!1),n=!1):e.$setValidity("allowedLengthAbbr",!0),n&&(o.showSpinner=!0,o.disableButtons=!0,s.post("/portal_learning_credits.json",{portal_learning_credits_form:o.formData}).success(function(e){o.showSpinner=!1,o.disableButtons=!1,t.resolve(e),a.close()}).error(function(){o.showSpinner=!1,o.disableButtons=!1,t.reject("Failed to create new learning credit")}))):(e.$setValidity("validInput",!1),e.$setValidity("allowedLengthName",!0),e.$setValidity("allowedLengthAbbr",!0))}return t.promise},o.cancel=function(){1==o.changedInput?t.confirm(r.showMessage("lup.confirm"),"Are you sure you want to close the window and dismiss all data?").then(function(e){a.close()}):a.close()};o.formData={learning_credit_option:null,custom_learning_credit_name:null,custom_learning_credit_abbr:null}}angular.module("lu").controller("PortalLearningCreditsNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","$modalInstance","$q","$http","$luPopover","learning_credits"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=new r,s=this;s.policies=n.getKey("policies"),s.lupHelper=o,s.delete=function(e){a.confirm(o.showMessage("lup.privacy_policy.delete_archived_confirmation_title"),o.showMessage("lup.privacy_policy.delete_archived_confirmation_msg")).then(function(){i.deletePrivacyPolicy(e.id).then(function(){i.getArchived().then(function(e){s.policies=e.data.policies})})})},t.breadcrumbs=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.privacy_policy.policy_title"),url:"/settings/users/privacy_policies"}]}angular.module("lu").controller("PrivacyPoliciesArchivedController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","PrivacyPoliciesFactory","$luPopover"]}(),function(){"use strict";function e(e,t,n,o){var r=this;r.lupHelper=n,r.portals=o,r.selected_portals=[],r.fetchPortals=function(t){return _.filter(angular.copy(o),function(e){return-1<e.name.toLowerCase().indexOf(t.$query.toLowerCase())})},r.clone=function(e){e.$setValidity("noPortalSelected",0<r.selected_portals.length),e.$valid&&t.close({portal_id:r.selected_portals[0].id})},r.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("PrivacyPoliciesClonePp",e),e.$inject=["$scope","$modalInstance","LupHelper","portals"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=new r,c=this;function u(e){e.$setValidity("emptyPrivacyPolicyTitle",!!c.privacy_policy.policy_title),e.$setValidity("longPrivacyPolicyTitle",!!c.privacy_policy.policy_title&&c.privacy_policy.policy_title.length<=o.ppValidationValues.title_length),e.$setValidity("longReference",!c.privacy_policy.reference||!!c.privacy_policy.reference&&c.privacy_policy.reference.length<=o.ppValidationValues.reference_length)}c.privacy_policy=n.getKey("privacy_policy").attributes,n.getKey("current_pp")&&(c.current_pp=n.getKey("current_pp").attributes),c.lupHelper=o,c.showFooterActions=!0,c.savePrivacyPolicy=function(e){u(e),c.privacy_policy.policy_text=o.getHTMLFromCKEditor("pp_text_wysi"),e.$valid&&(c.showFooterActions=!1,l.savePrivacyPolicy({privacy_policy:c.privacy_policy}).then(function(e){e.error?c.showFooterActions=!0:a.location="/settings/users/privacy_policies"}))},c.publishPrivacyPolicy=function(e){{u(e),c.privacy_policy.policy_text=o.getHTMLFromCKEditor("pp_text_wysi"),e.$valid&&s.open({templateUrl:"/tc/privacy_policies/publish_pp_modal.html",controller:"PrivacyPoliciesPublishPp as vm",size:"md"}).result.then(function(){c.showFooterActions=!1,l.publishPrivacyPolicy({privacy_policy:c.privacy_policy}).then(function(e){e.error?c.showFooterActions=!0:a.location="/settings/users/privacy_policies"})})}},c.cancel=function(){a.location="/settings/users/privacy_policies"},c.delete=function(){i.confirm(o.showMessage("lup.privacy_policy.deletion_confirmation_title"),o.showMessage("lup.privacy_policy.deletion_confirmation_msg")).then(function(){c.showFooterActions=!1,l.deletePrivacyPolicy(c.privacy_policy.id).then(function(){a.location="/settings/users/privacy_policies"})})},t.breadcrumbs=function(){var e=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.privacy_policy.policy_title"),url:"/settings/users/privacy_policies"}];c.privacy_policy.id?e.push({title:c.privacy_policy.policy_title,url:"/settings/users/privacy_policies/"+c.privacy_policy.id+"/edit"}):e.push({title:o.showMessage("courses.new"),url:"/settings/users/privacy_policies/new"});return e}(),e.ariaLabel=o.showMessage("a11y.term_options_aside"),e.ariaLabelSide=o.showMessage("lup.privacy_policy.policy_options"),o.renderCKEditor({clear_all_previous_instances:!0,id:"pp_text_wysi",add_image_upload:!1,add_embedded_media:!1,show_source:!1,width:"100%",editorTextChangeEvent:function(){e.$apply()}})}angular.module("lu").controller("PrivacyPoliciesEditController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","PrivacyPoliciesFactory","$window","$luPopover","$modal"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u){var d=new r,p=(new a,this),_=!0;t.getKey("privacy_policy")&&(p.privacy_policy=t.getKey("privacy_policy").attributes),t.getKey("draft")&&(p.draft=t.getKey("draft").attributes),p.portals=t.getKey("portals"),p.privacy_policy_enabled=t.getKey("privacy_policy_enabled"),p.archived_exists=t.getKey("archived_exists"),p.lupHelper=o,p.showBlankState=function(){return!p.privacy_policy&&!p.draft},p.showReport=function(){return!!p.privacy_policy||!!p.archived_exists},p.updatePrivacyPolicy=function(){d.updatePrivacyPolicy({draft:p.draft,published:p.privacy_policy})},p.publishPrivacyPolicy=function(){s.open({templateUrl:"/tc/privacy_policies/publish_pp_modal.html",controller:"PrivacyPoliciesPublishPp as vm",size:"md"}).result.then(function(){d.publishPrivacyPolicy({privacy_policy:p.draft}).then(function(e){e=JSON.parse(e.json_service);e.privacy_policy&&(p.privacy_policy=e.privacy_policy.attributes),e.draft?p.draft=e.draft.attributes:p.draft=null})})},p.archivePrivacyPolicy=function(){i.confirm(o.showMessage("lup.privacy_policy.archive_confirmation_title"),o.showMessage("lup.privacy_policy.archive_confirmation_msg")).then(function(){d.archivePrivacyPolicy(p.privacy_policy.id).then(function(){p.privacy_policy=null})})},p.deleteDraft=function(){i.confirm(o.showMessage("lup.privacy_policy.deletion_confirmation_title"),o.showMessage("lup.privacy_policy.deletion_confirmation_msg")).then(function(){d.deletePrivacyPolicy(p.draft.id).then(function(){p.draft=null})})},p.clonePrivacyPolicy=function(){s.open({templateUrl:"/tc/privacy_policies/clone_pp_modal.html",controller:"PrivacyPoliciesClonePp as vm",size:"md",resolve:{portals:function(){return p.portals.data}}}).result.then(function(e){d.clonePrivacyPolicy({pp_id:p.privacy_policy.id,portal_id:e.portal_id})})},e.breadcrumbs=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.privacy_policy.policy_title"),url:"/settings/users/privacy_policies"}],n.ariaLabelSide=o.showMessage("a11y.general_settings_aside"),n.ariaLabel=o.showMessage("a11y.general_settings_main"),n.activePolicyDDM={},n.toggled=function(e,t){n.activePolicyDDM[t]=e},n.$watch("vm.privacy_policy_enabled",function(e,t){_?c(function(){_=!1}):e!=t&&d.togglePrivacyPolicy({privacy_policy_enabled:e})})}angular.module("lu").controller("PrivacyPoliciesIndexController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","PrivacyPoliciesFactory","learnUponApi","$luPopover","$modal","$window","$timeout","LupJobFactory"]}(),function(){"use strict";function e(e,t,n){this.lupHelper=n,this.save=function(e){t.close("save")},this.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("PrivacyPoliciesPublishPp",e),e.$inject=["$scope","$modalInstance","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=new r,c=this;n.getKey("privacy_policy")&&(c.privacy_policy=n.getKey("privacy_policy").attributes),n.getKey("draft")&&(c.draft=n.getKey("draft").attributes),c.portals=n.getKey("portals"),c.lupHelper=o,e.ariaLabel=c.privacy_policy.policy_title,e.ariaLabelSide=o.showMessage("lup.privacy_policy.policy_options"),t.breadcrumbs=function(){var e=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.privacy_policy.policy_title"),url:"/settings/users/privacy_policies"}];c.privacy_policy.status_code===o.ppStatuses.archived&&e.push({title:o.showMessage("lup.privacy_policy.archived_policies"),url:"/settings/users/privacy_policies/archived"});return e.push({title:c.privacy_policy.policy_title,url:"/settings/users/privacy_policies/"+c.privacy_policy.id}),e}(),t.$on("copyPrivacyPolicy",function(){s.open({templateUrl:"/tc/privacy_policies/clone_pp_modal.html",controller:"PrivacyPoliciesClonePp as vm",size:"md",resolve:{portals:function(){return c.portals.data}}}).result.then(function(e){l.clonePrivacyPolicy({pp_id:c.privacy_policy.id,portal_id:e.portal_id})})}),t.$on("updatePrivacyPolicy",function(){l.updatePrivacyPolicy({draft:c.draft,published:c.privacy_policy})}),t.$on("archivePrivacyPolicy",function(){i.confirm(o.showMessage("lup.privacy_policy.archive_confirmation_title"),o.showMessage("lup.privacy_policy.archive_confirmation_msg")).then(function(){l.archivePrivacyPolicy(c.privacy_policy.id).then(function(){a.location="/settings/users/privacy_policies"})})}),t.$on("deletePrivacyPolicy",function(){i.confirm(o.showMessage("lup.privacy_policy.delete_archived_confirmation_title"),o.showMessage("lup.privacy_policy.delete_archived_confirmation_msg")).then(function(){l.deletePrivacyPolicy(c.privacy_policy.id).then(function(){a.location="/settings/users/privacy_policies/archived"})})})}angular.module("lu").controller("PrivacyPoliciesShowController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","PrivacyPoliciesFactory","$window","$luPopover","$modal"]}(),function(){"use strict";function e(e,t,n,o){this.lupHelper=n,this.draftPresent=o,this.choose=function(e){t.close(e)},this.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("PrivacyPoliciesUpdateMethod",e),e.$inject=["$scope","$modalInstance","LupHelper","draftPresent"]}(),function(){"use strict";function e(o,e,r,t,a,n,i,s,l,c){e.get();var u,d=new a;o.LupHelper=r,o.question_pools=e.getKey("question_pools"),o.is_admin=e.getKey("is_admin"),o.ariaLabel=r.showMessage("tabbing.pools"),o.ariaLabelSide=r.showMessage("lup.tips.question_pool_title"),o.activeQuestionPoolDDM={},o.toggled=function(e,t){o.activeQuestionPoolDDM[t]=e},o.loadData=function(){var e={};e.params=t.get(),d.getList(e).then(function(){o.question_pools=d.data.question_pools})},n.$on("addQuestionPool",function(){i.location="/question_pools/new.html"}),n.$on("addAiQuestionPool",function(){i.location="/library/question_pools/new-ai-questions"}),u=[{title:r.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:r.showMessage("lup.breadcrumbs.question_pools.index"),url:"/question_pools"}],n.breadcrumbs=u,o.examOrSurvey=function(e){var t=r.showMessage("courses.exam");return e==r.questionPoolTypes.survey&&(t=r.showMessage("courses.survey")),t},o.deleteQuestionPool=function(n){s.confirm(r.showMessage("lup.confirm"),r.showMessage("librarypg.are_you_sure_you_want_to_delete_this_qpool_itwillnot_delete_questions_used_by_exams")).then(function(e){var t=new a;t.id=n,t.destroy().then(function(){o.loadData()})})},o.exportQuestionPool=function(e){var t;e&&(t=new c,e={typeId:r.lupJobTypes.exportQuestionPool,question_pool_id:e.id,is_survey:e.pool_type_id==r.questionPoolTypes.survey},t.initiateJob(e))},o.editQuestionPool=function(e){i.location="/question_pools/"+e},o.createCopy=function(t){s.confirm(r.showMessage("lup.confirm"),r.showMessage("are_you_sure_you_want_copy_qpool")).then(function(e){l.post("/question_pools/clone/:pool_id.json".replace(/:pool_id/,t),{}).success(function(e){o.loadData()}).error(function(e){})})},o.sortOptions=[{label:r.showMessage("lup.filters.name_az"),value:"name.ASC",default:!0},{label:r.showMessage("lup.filters.name_za"),value:"name.DESC"},{label:r.showMessage("lup.filters.created_at"),value:"created_at.DESC"},{label:r.showMessage("lup.filters.oldest_first"),value:"created_at.ASC"}]}angular.module("lu").controller("QuestionPoolsIndexController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","QuestionPoolFactory","$rootScope","$window","$luPopover","$http","LupJobFactory"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s){var l,e=e.get();t.question_pool=e.question_pool.attributes,t.question_pool_types=e.question_pool_types,t.is_survey=e.is_survey,t.LupHelper=n,t.ariaLabel=n.showMessage("lup.a11y.question_pools_new_main"),t.ariaLabelSide=n.showMessage("lup.a11y.question_pools_new_aside"),t.is_survey&&(t.question_pool.pool_type_id=n.questionPoolTypes.survey),t.cancel=function(){i.location="/question_pools"},t.save=function(e){e["question_pool[name]"].$setValidity("emptyString",n.checkStringExistence(t.question_pool.name)),e.$valid&&e.commit()},t.showTagsTooltip=function(){s.notify("",n.showMessage("question_pools.tags_tip"))},l=[{title:n.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:n.showMessage("lup.breadcrumbs.question_pools.index"),url:"/question_pools"},{title:n.showMessage("lup.breadcrumbs.question_pools.new"),url:"/question_pools/new"}],a.breadcrumbs=l}angular.module("lu").controller("QuestionPoolsNewController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","QuestionPoolFactory","$rootScope","$window","$luPopover"]}(),function(){"use strict";function e(o,e,r,t,n,a,i,s,l,c,u,d){e=e.get();o.question_pool=e.question_pool.attributes,o.questions=e.questions.data,o.question_pool_types=e.question_pool_types,o.LupHelper=r,o.qpType=function(){return _.find(o.question_pool_types,function(e){return e[1]===o.question_pool.pool_type_id})[0]},o.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===r.keyboard_keys[e.which]){if(e.preventDefault(),null!==o.rememberReorderIndex&&n!==o.rememberReorderIndex){e=t[n];return t[n]=t[o.rememberReorderIndex],t[o.rememberReorderIndex]=e,t=t.map(function(e){return e.id}),o.savePoolReorder(t,o.question_pool.id,t[n].id),o.rememberReorderIndex=null,void o.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}o.rememberReorderIndex=n}},o.rememberReorderIndex=null;var p,m=new c;o.ariaLabel=r.showMessage("lup.a11y.question_pool_main"),o.ariaLabelSide=r.showMessage("lup.a11y.question_pool_aside"),o.ariaLabelForContentSegments=function(e,t){return null!==o.rememberReorderIndex?o.rememberReorderIndex===e?r.showMessage("a11y.exam_order_list.selected",{answer_option:t}):r.showMessage("a11y.exam_order_list.swap",{answer_option:t}):r.showMessage("a11y.exam_order_list.select",{answer_option:t})},o.activeQuestionDDM={},o.toggled=function(e,t){o.activeQuestionDDM[t]=e},o.cancel=function(){s.location="/question_pools"},o.save=function(e){e["question_pool[name]"].$setValidity("emptyString",r.checkStringExistence(o.question_pool.name)),e.$valid&&e.commit()},o.showTagsTooltip=function(){l.notify("",r.showMessage("question_pools.tags_tip"))},o.qpUpdateUrl=function(){return"/question_pools/"+o.question_pool.id},o.deleteQuestion=function(n){l.confirm(r.showMessage("lup.confirm"),r.showMessage("librarypg.are_you_sure_you_want_to_delete_this_question")).then(function(e){var t=new a;t.id=n,t.destroy().then(function(){for(var e=[],t=0;t<o.questions.length;t++)o.questions[t].id!==n&&e.push(o.questions[t]);o.questions=e})})},p=[{title:r.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:r.showMessage("lup.breadcrumbs.question_pools.index"),url:"/question_pools"},{title:o.question_pool.name,url:"/question_pools/"+o.question_pool.id}],i.breadcrumbs=p,o.isExamPool=function(){return o.question_pool.pool_type_id==r.questionPoolTypes.exam},o.returnTextOrUnknown=function(e){var t=r.showMessage("question_pools.untitled_question");return e&&(t=e),t},o.dragQuestionControlListeners={allowDuplicates:!1,dragMove:function(e,t,n){n&&(n.pageY<s.pageYOffset?s.scrollTo(0,n.pageY):n.pageY+e.offsetY>s.pageYOffset+s.innerHeight&&s.scrollTo(0,n.pageY+e.offsetY-s.innerHeight))},dragEnd:function(e){var t=[];angular.forEach(e.dest.sortableScope.modelValue,function(e){t.push(e.id)}),o.savePoolReorder(t,o.question_pool.id,e.source.itemScope.modelValue.id)}},o.savePoolReorder=function(e,t,n){e={question_pool_id:t,new_order:e};m.saveReorder(e,n).then(function(e){})},o.showPoolRandomisationWarning=function(){var t=!1;return angular.forEach(o.questions,function(e){1<e.points&&(t=!0)}),t},i.$on("deleteQuestinPool",function(){l.confirm(r.showMessage("lup.confirm"),r.showMessage("librarypg.are_you_sure_you_want_to_delete_this_qpool_itwillnot_delete_questions_used_by_exams")).then(function(e){var t=new n;t.id=o.question_pool.id,t.destroy().then(function(){s.location="/question_pools"})})}),i.$on("exportQuestionPoolAsCsv",function(){var e=new d,t={typeId:r.lupJobTypes.exportQuestionPool,question_pool_id:o.question_pool.id,is_survey:o.question_pool.pool_type_id==r.questionPoolTypes.survey};e.initiateJob(t)}),i.$on("addTrueFalseQuestion",function(){o.addNewQuestion(r.questionTypes.choice,"boolean")}),i.$on("addPickOneQuestion",function(){o.addNewQuestion(r.questionTypes.choice,"p-one")}),i.$on("addMultipleChoiceQuestion",function(){o.addNewQuestion(r.questionTypes.choice,"mc")}),i.$on("addOrderListQuestion",function(){o.addNewQuestion(r.questionTypes.order_list,"order_list")}),i.$on("addMatchListQuestion",function(){o.addNewQuestion(r.questionTypes.match_list,"match_list")}),i.$on("addFillTheBlanksQuestion",function(){o.addNewQuestion(r.questionTypes.fill_the_blanks,"fill_blanks")}),i.$on("addChoiceQuestion",function(){o.addNewQuestion(r.questionTypes.choice,"choice")}),i.$on("addRatingQuestion",function(){o.addNewQuestion(r.questionTypes.rating,"rate")}),i.$on("addFeedbackQuestion",function(){o.addNewQuestion(r.questionTypes.feedback,"feedback")}),i.$on("cloneQuestinPool",function(){o.createCopy(o.question_pool.id)}),o.addNewQuestion=function(e,t){s.location="/question_pools/"+o.question_pool.id+"/"+o.question_pool.pool_type_id+"/questions/new/"+e+"/subtype/"+t},o.createCopy=function(t){l.confirm(r.showMessage("lup.confirm"),r.showMessage("are_you_sure_you_want_copy_qpool")).then(function(e){u.post("/question_pools/clone/:pool_id.json".replace(/:pool_id/,t),{}).success(function(e){}).error(function(e){})})}}angular.module("lu").controller("QuestionPoolsShowController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","QuestionPoolFactory","QuestionFactory","$rootScope","$window","$luPopover","QuestionPoolQuestionFactory","$http","LupJobFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a){e.field=o,e.field_label=r,e.LupHelper=n,e.save=function(){var e=n.getHTMLFromCKEditor("advance_edit_wysi");n.destroyCKEditor("advance_edit_wysi"),t.close({field:e})},e.cancel=function(){n.destroyCKEditor("advance_edit_wysi"),t.close()}}angular.module("lu").controller("AdvanceEditModalController",e),e.$inject=["$scope","$modalInstance","LupHelper","field","field_label","$log"]}(),function(){"use strict";function e(a,e,t,i,n,o,r,s,l,c,u,d,p,m){var f,g=new t;function h(e){var t=i.showMessage("lup.questions.question_empty_text_error");e===i.question_errors.no_correct_answer?t=i.showMessage("lup.questions.no_correct_answer_error"):e===i.question_errors.question_points_are_zero?t=i.showMessage("lup.questions.zero_points_validation"):e===i.question_errors.empty_answer?t=i.showMessage("all_answer_options_should_have_text"):e===i.question_errors.duplicate_answers&&(t=i.showMessage("questions.duplicate_matching_choice_answers")),d.error(t,null,{closeButton:!0,extendedTimeOut:6e3,toastClass:"visible-lg"})}function b(e){e=angular.element("<textarea />").html(e).text();return p.trustAsHtml(e)}a.LupHelper=i,a.forceShowSave=!1,a.ariaLabel=i.showMessage("lup.a11y.assignment_main_label"),a.ariaLabelSide=i.showMessage("lup.a11y.question_pool_aside_label"),a.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===i.keyboard_keys[e.which]){if(e.preventDefault(),null!==a.rememberReorderIndex&&n!==a.rememberReorderIndex){e=t[n];return t[n]=t[a.rememberReorderIndex],t[a.rememberReorderIndex]=e,t=t.map(function(e){return e.id}),a.forceShowSave=!0,a.rememberReorderIndex=null,void a.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}a.rememberReorderIndex=n}},a.rememberReorderIndex=null,a.ariaLabelForContentSegments=function(e,t){return null!==a.rememberReorderIndex?a.rememberReorderIndex===e?i.showMessage("a11y.exam_order_list.selected",{answer_option:t}):i.showMessage("a11y.exam_order_list.swap",{answer_option:t}):i.showMessage("a11y.exam_order_list.select",{answer_option:t})},a.question=e.getKey("question").attributes,a.questions=e.getKey("questions"),a.question_pool=e.getKey("question_pool").attributes,a.answer_options=e.getKey("answer_options"),a.column_option_choices=e.getKey("column_option_choices"),a.choice_types=e.getKey("choice_types"),a.reference_code=e.getKey("reference_code"),a.overall_feedback=e.getKey("overall_feedback"),e.getKey("question_details")&&(a.question_details=e.getKey("question_details").attributes),a.question.choice_type_id&&(a.question.choice_type_id=String(a.question.choice_type_id)),a.advanced_question_editing=e.getKey("advanced_question_editing"),_.each(a.answer_options.data,function(e){e.text=b(e.text),e.feedback=b(e.feedback),e.predefined_answers||(e.predefined_answers=b(e.predefined_answers)),e.incorrect_feedback||(e.incorrect_feedback=b(e.incorrect_feedback)),e.for_matching||(e.for_matching=b(e.for_matching))}),_.each(a.column_option_choices.data,function(e){e.text=b(e.text)}),f=[{title:i.showMessage("lup.breadcrumbs.components.library"),url:"/components"},{title:i.showMessage("lup.breadcrumbs.question_pools.index"),url:"/question_pools"},{title:a.question_pool.name,url:"/question_pools/"+a.question_pool.id},{title:i.showMessage("lup.breadcrumbs.questions.show"),url:""}],r.breadcrumbs=f,a.questionSaveUrl=function(){return"/questions/"+a.question.id},a.cancel=function(e){s.location="/question_pools/"+a.question_pool.id},a.save=function(e){var t,n=!0,o=!0,r=!0;a.question.question_type_id==i.questionTypes.choice&&a.question_pool.pool_type_id==i.questionPoolTypes.exam&&(n=!1,_(a.answer_options.data).each(function(e){e.correct&&(n=!0),e.correct&&!e.text&&(o=!1)})),a.question.question_type_id==i.questionTypes.match_list&&a.question_pool.pool_type_id==i.questionPoolTypes.exam&&(t=new Set,_(a.answer_options.data).each(function(e){e.for_matching&&e.text||(o=!1);e=p.valueOf(e.text).trim();t.has(e)&&(r=!1),t.add(e)})),i.getHTMLFromCKEditor("question_form_text")?n?a.question.points<=0?h(i.question_errors.question_points_are_zero):o?r?e.commit():h(i.question_errors.duplicate_answers):h(i.question_errors.empty_answer):h(i.question_errors.no_correct_answer):h(i.question_errors.empty_question)},a.loadCk=function(){a.ckeditorInstance="question_form_text",a.imageType=i.fileUploads.types.question_text,i.renderCKEditor({clear_all_previous_instances:!0,id:a.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_question",add_embedded_media:!0,width:"100%",show_source:!0,add_insert_symbols:!0,add_math_jax:!0,add_blank_placeholder:a.question.question_type_id==i.questionTypes.fill_the_blanks,editorTextChangeEvent:function(){a.forceShowSave=!0,a.$apply()}})},s.executeDjImageUpload=function(){m.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return a.question.id},ckeditorInstance:function(){return a.ckeditorInstance},imageType:function(){return a.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},a.returnQuestionType=function(){var e="";return a.question.question_type_id==i.questionTypes.choice?e="choice":a.question.question_type_id==i.questionTypes.order_list?e="order_list":a.question.question_type_id==i.questionTypes.match_list?e="match_list":a.question.question_type_id==i.questionTypes.fill_the_blanks?e="fill_the_blanks":a.question.question_type_id==i.questionTypes.rating?e="rate":a.question.question_type_id==i.questionTypes.feedback&&(e="feedback"),e},a.questionTypeTitle=function(){var t=i.showMessage("lup.questions.question_info");return _.each(["choice","order_list","match_list","fill_the_blanks","rate","feedback"],function(e){a.returnQuestionType()===e&&(t=i.showMessage("lup.questions.types."+e))}),t},r.$on("deleteQuestion",function(){l.confirm(i.showMessage("lup.confirm"),i.showMessage("librarypg.are_you_sure_you_want_to_delete_this_question")).then(function(e){var t=new c;t.id=a.question.id,t.destroy().then(function(){s.location="/question_pools/"+a.question_pool.id})})}),a.dragAnswerOptionsListeners={allowDuplicates:!1,dragMove:function(e,t,n){n&&(n.pageY<s.pageYOffset?s.scrollTo(0,n.pageY):n.pageY+e.offsetY>s.pageYOffset+s.innerHeight&&s.scrollTo(0,n.pageY+e.offsetY-s.innerHeight))},dragEnd:function(e){a.forceShowSave=!0}},a.addNewChoice=function(){var e={hideSpinner:!0},t="?question_count="+a.answer_options.data.length;return a.question.question_type_id==i.questionTypes.order_list?t+="&is_list=1&list_type=order":a.question.question_type_id==i.questionTypes.match_list?t+="&is_list=1&list_type=match":a.question.question_type_id==i.questionTypes.fill_the_blanks&&(t+="&is_fill_the_blanks=1"),a.question_pool.pool_type_id==i.questionPoolTypes.survey&&(t+="&survey=1"),e.url="/question_pools/"+a.question_pool.id+"/questions/"+a.question.id+"/answer_options/new.json"+t,g.get("answer_options",e,null).then(function(){g.data.answer_option&&a.answer_options.data.push(g.data.answer_option.attributes)})},a.deleteChoice=function(n){if(n.id)l.confirm(i.showMessage("lup.confirm"),i.showMessage("librarypg.are_you_sure_you_want_to_delete_this_answer")).then(function(e){var t={hideSpinner:!0};return t.url="/question_pools/"+a.question_pool.id+"/questions/"+a.question.id+"/answer_options/"+n.id+".json",g.destroy("answer_options",t,null).then(function(){if(g.data.answer_option){for(var e=[],t=0;t<a.answer_options.data.length;t++)a.answer_options.data[t].id!==n.id&&e.push(a.answer_options.data[t]);a.answer_options.data=e}})});else{for(var e=[],t=0;t<a.answer_options.data.length;t++)a.answer_options.data[t]!==n&&e.push(a.answer_options.data[t]);a.answer_options.data=e}},a.isExamPool=function(){return a.question_pool.pool_type_id==i.questionPoolTypes.exam},a.deleteColumnOptionChoice=function(n){if(n.id)l.confirm(i.showMessage("lup.confirm"),i.showMessage("question_pools.are_you_sure_you_want_to_delete_this_label")).then(function(e){var t={hideSpinner:!0};return t.url="/question_pools/"+a.question_pool.id+"/questions/"+a.question.id+"/column_option_choices/"+n.id+".json",g.destroy("column_option_choice",t,null).then(function(){if(g.data.column_option_choice){for(var e=[],t=0;t<a.column_option_choices.data.length;t++)a.column_option_choices.data[t].id!==n.id&&e.push(a.column_option_choices.data[t]);a.column_option_choices.data=e}})});else{for(var e=[],t=0;t<a.column_option_choices.data.length;t++)a.column_option_choices.data[t]!==n&&e.push(a.column_option_choices.data[t]);a.column_option_choices.data=e}},a.addNewColumnOptionChoice=function(){var e={hideSpinner:!0};return e.url="/question_pools/"+a.question_pool.id+"/questions/"+a.question.id+"/column_option_choices/new.json",g.get("column_option_choices",e,null).then(function(){g.data.column_option_choice&&a.column_option_choices.data.push(g.data.column_option_choice.attributes)})},a.showPointsTooltip=function(){l.notify("",i.showMessage("questions.number_of_points_blurb"))},a.showAdvanceEditing=function(){return!!a.advanced_question_editing&&a.question_pool.pool_type_id==i.questionPoolTypes.exam},a.strippedAndTruncated=function(e){return b(u("truncate")(e,200,"...",!0))},a.addNewQuestion=function(e,t){s.location="/question_pools/"+a.question_pool.id+"/"+a.question_pool.pool_type_id+"/questions/new/"+e+"/subtype/"+t}}angular.module("lu").controller("QuestionsShowController",e),e.$inject=["$scope","StorageFactory","learnUponApi","LupHelper","paramsService","QuestionPoolFactory","$rootScope","$window","$luPopover","QuestionFactory","$filter","toastr","$sce","$modal"]}(),function(){"use strict";function e(o,e,r,t,a,n,i,s,l){var c,u=new a;o.LupHelper=r,o.report_schedules=e.getKey("report_schedules"),o.ariaLabel=r.showMessage("lup.a11y.my_schedules_main"),o.ariaLabelSide=r.showMessage("lup.a11y.reports_aside"),o.activeReportDDM={},o.toggled=function(e,t){o.activeReportDDM[t]=e},o.loadData=function(){var e={};e.params=t.get(),u.getList(e).then(function(){o.report_schedules=u.data.report_schedules})},o.displayReportType=function(e){if(e){e="lup.reports.types."+e.split(" ").join("_");return r.showMessage(e)}return"-"},o.translateFrequency=function(e){var t="";return e==r.lupScheduledReports.daily?t=r.showMessage("scheduled_reports.daily"):e==r.lupScheduledReports.weekly?t=r.showMessage("scheduled_reports.weekly"):e==r.lupScheduledReports.monthly&&(t=r.showMessage("scheduled_reports.monthly")),t},o.deleteSchedule=function(n){l.confirm(r.showMessage("lup.confirm"),r.showMessage("scheduled_reports.are_you_sure_you_want_to_remove_this_schedule")).then(function(e){var t=new a;t.id=n,t.destroy().then(function(){for(var e=[],t=0;t<o.report_schedules.data.length;t++)o.report_schedules.data[t].id!==n&&e.push(o.report_schedules.data[t]);o.report_schedules.data=e})})},c=[{title:r.showMessage("lup.breadcrumbs.reports.index"),url:"/reports"},{title:r.showMessage("lup.breadcrumbs.report_schedules.index"),url:"/report_schedules"}],n.breadcrumbs=c,s(function(){$("body").updatePolyfill()})}angular.module("lu").controller("ReportSchedulesIndexController",e),e.$inject=["$scope","StorageFactory","LupHelper","paramsService","ReportScheduleFactory","$rootScope","$window","$timeout","$luPopover"]}(),function(){"use strict";function e(t,e,o,n,r,a,i,s){var l=e.get();t.LupHelper=o,t.display_filter=l.display_filter;var c=new s;t.ariaLabel=o.showMessage("scheduled_reports.edit_schedule"),t.ariaLabelSide=o.showMessage("lup.a11y.reports_aside"),n(function(){l&&l.auto_click_schedule&&autoClickScheduledReport()}),a.executeAjaxGetRequest=function(e,t,n){c.executeAjaxGetRequest(e,t,n).catch(function(e){403==e.status&&a.location.reload()})},a.executeAjaxComboboxGetRequest=function(e,t){return c.executeAjaxComboboxGetRequest(e,t)},a.executeAjaxPostRequest=function(e,t){c.executeAjaxPostRequest(e,t)},a.getDownloadStatus=function(e){var t=new i,e={typeId:o.lupJobTypes.exportReport,jobCode:e};t.initiateJob(e)},a.removeUserToSendToAng=function(t,n){r.confirm(o.showMessage("lup.confirm"),o.showMessage("scheduled_reports.are_you_sure_you_want_to_remove_this_user",{user_name:n})).then(function(e){removeUserToSendTo(t,n)})},a.removeCCUserToSendToAng=function(t){r.confirm(o.showMessage("lup.confirm"),o.showMessage("scheduled_reports.are_you_sure_you_want_to_remove_this_user",{user_name:t})).then(function(e){removeCCUserToSendTo(t)})},a.addCcUserAng=function(){var e=document.getElementById("external_email_address").value;e?IsEmail(e)?add_cc_user():r.notify("",o.showMessage("scheduled_reports.please_enter_a_valid_email")):r.notify("",o.showMessage("scheduled_reports.please_enter_an_email"))},t.showScheduledUpgradeMessage=function(){r.notify("",o.showMessage("lup.reports.schedule_only_on_bronze_plan"))},t.showFilters=function(e){e&&(select_report(e),t.display_filter=!0,t.report_type=e)},t.invalidTimeDifference=function(){r.notify("",o.showMessage("lup.reports.maximum_time_difference_for_gamification_reports",{diff:6}))},n(function(){$("body").updatePolyfill()})}angular.module("lu").controller("ReportsIndexController",e),e.$inject=["$scope","StorageFactory","LupHelper","$timeout","$luPopover","$window","LupJobFactory","ReportFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c){t.get();var u=new l;e.LupHelper=n,e.sendMessage=function(){u.sendMessageToUsers(o,e.message_subject,e.message_body).then(function(){s.close()})},e.cancelMessage=function(){s.close()},e.message_subject=n.showMessage("lup.reports.message_re",{course_name:a}),e.message_body=null,i(function(){$("body").updatePolyfill()})}angular.module("lu").controller("ReportsSendMessageToUsersController",e),e.$inject=["$scope","StorageFactory","LupHelper","recipients_list_string","course_id","course_name","$timeout","$modalInstance","ReportFactory","$filter"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l){e.get();var c=new s;t.LupHelper=n,t.saveDueDate=function(){var e=l("displayDateTime")(t.due_date,"YYYY-MM-DD");c.saveDueDate(e,r,o).then(function(){i.close()})},t.cancelDueDate=function(){i.close()},t.due_date=null,a(function(){$("body").updatePolyfill()})}angular.module("lu").controller("ReportsSetDueController",e),e.$inject=["$scope","StorageFactory","LupHelper","enrollment_for_due_string","course_id","$timeout","$modalInstance","ReportFactory","$filter"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l){e.get();var c=new s;t.LupHelper=n,t.saveExpiryDate=function(){var e=l("displayDateTime")(t.expiry_date,"YYYY-MM-DD");c.saveExpiryDate(e,r,o).then(function(){i.close()})},t.cancelExpiryDate=function(){i.close()},t.expiry_date=null,a(function(){$("body").updatePolyfill()})}angular.module("lu").controller("ReportsSetExpiryController",e),e.$inject=["$scope","StorageFactory","LupHelper","enrollment_for_complete_string","course_id","$timeout","$modalInstance","ReportFactory","$filter"]}(),function(){"use strict";function e(e,t,o,i,r,n,a,s,l){var c=t.get();e.setDueDate=function(t,e){var n=document.querySelectorAll("input[id^='select_user_"+t+"']:checked"),o="";e&&(o="__"+e,n=angular.element(n).closest("[session-id$="+e+"]"));var r=[],a="";0<n.length&&(angular.forEach(n,function(e){e=e.id.split("_")[3],e=document.querySelectorAll("input[id='select_enrollment_"+t+"_"+e+o+"']")[0].value;r.push(e)}),a=r.join(),i.open({templateUrl:"/tc/reports/set_due_date_modal.html",controller:"ReportsSetDueController",size:"lg",resolve:{enrollment_for_due_string:function(){return a},course_id:function(){return t}}}))},e.setExpiry=function(t,e){var n=document.querySelectorAll("input[id^='select_user_"+t+"']:checked"),o="";e&&(o="__"+e,n=angular.element(n).closest("[session-id$="+e+"]"));var r=[],a="";0<n.length&&(angular.forEach(n,function(e){e=e.id.split("_")[3],e=document.querySelectorAll("input[id='select_enrollment_"+t+"_"+e+o+"']")[0].value;r.push(e)}),a=r.join(),i.open({templateUrl:"/tc/reports/set_expiry_date_modal.html",controller:"ReportsSetExpiryController",size:"lg",resolve:{enrollment_for_complete_string:function(){return a},course_id:function(){return t}}}))},e.sendMessageToUsers=function(e,t,n){var o=document.querySelectorAll("input[id^='select_user_"+e+"']:checked");n&&(o=angular.element(o).closest("[session-id$="+n+"]"));var r=[],a="";0<o.length&&(angular.forEach(o,function(e){e=e.id.split("_")[3];r.push(e)}),a=r.join(),i.open({templateUrl:"/tc/reports/send_message_to_users_modal.html",controller:"ReportsSendMessageToUsersController",size:"lg",resolve:{recipients_list_string:function(){return a},course_id:function(){return e},course_name:function(){return t}}}))},e.LupHelper=o,e.ariaLabel=o.showMessage("lup.custom_reports.new_scheduled_report"),e.ariaLabelSide=o.showMessage("lup.a11y.reports_aside"),e.display_filter=!0;var u=new l;a(function(){c&&c.auto_click_schedule&&autoClickScheduledReport()}),r.getDownloadStatus=function(e){var t=new n,e={typeId:o.lupJobTypes.exportReport,jobCode:e};t.initiateJob(e)},r.executeAjaxGetRequest=function(e,t,n){u.executeAjaxGetRequest(e,t,n).catch(function(e){403==e.status&&r.location.reload()})},r.executeAjaxComboboxGetRequest=function(e,t){return u.executeAjaxComboboxGetRequest(e,t)},r.executeAjaxPostRequest=function(e,t){u.executeAjaxPostRequest(e,t)},r.removeUserToSendToAng=function(t,n){s.confirm(o.showMessage("lup.confirm"),o.showMessage("scheduled_reports.are_you_sure_you_want_to_remove_this_user",{user_name:n})).then(function(e){removeUserToSendTo(t,n)})},e.showScheduledUpgradeMessage=function(){s.notify("",o.showMessage("lup.reports.schedule_only_on_bronze_plan"))},r.removeCCUserToSendToAng=function(t){s.confirm(o.showMessage("lup.confirm"),o.showMessage("scheduled_reports.are_you_sure_you_want_to_remove_this_user",{user_name:t})).then(function(e){removeCCUserToSendTo(t)})},r.addCcUserAng=function(){var e=document.getElementById("external_email_address").value;e?IsEmail(e)?add_cc_user():s.notify("",o.showMessage("scheduled_reports.please_enter_a_valid_email")):s.notify("",o.showMessage("scheduled_reports.please_enter_an_email"))},e.invalidTimeDifference=function(){s.notify("",o.showMessage("lup.reports.maximum_time_difference_for_gamification_reports",{diff:6}))},a(function(){$("body").updatePolyfill()})}angular.module("lu").controller("ReportsShowController",e),e.$inject=["$scope","StorageFactory","LupHelper","$modal","$window","LupJobFactory","$timeout","$luPopover","ReportFactory"]}(),function(g){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=new i,p=this;function m(){p.initialLoad||(p.selectedObjectAttribute=[],p.rule.attirbute_values=[],p.rule.attribute_name=[],p.selectedObjectAttributeValues=null,p.selectedField=null,p.typeahedSearchValue=null,p.rule.attribute_type===p.lupHelper.salesForceAssignRules.objectAttributeTypes.roles?p.rule.free_text_match_type=p.lupHelper.free_text_match_types.matches:p.rule.free_text_match_type=p.lupHelper.free_text_match_types.contains),p.rule.sf_object_type_id===p.lupHelper.salesForceAssignRules.objectTypes.contact&&(p.rule.attribute_type=p.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields),p.initialLoad=!1}function f(e){e.$setValidity("emptyRuleName",!!p.rule.name&&0<p.rule.name.trim().length),e.$setValidity("emptyObjectAttribute",!!p.rule.attribute_name&&0<p.rule.attribute_name.length),e.$setValidity("emptyGroup",!!p.rule.group_id&&0<p.rule.group_id.length),p.rule.attribute_type===p.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields?e.$setValidity("emptyAttributeValues",!!p.rule.attirbute_values&&0<p.rule.attirbute_values.length):e.$setValidity("emptyAttributeValues",!0)}p.lupHelper=o,p.lupService=u,p.requestInProgress=!1,p.initialLoad=!0,p.cancel=function(){n.close()},p.loadData=function(){var t=s.defer();return p.lupService.getSFDefinitions(a,p.rule.sf_object_type_id,p.rule.attribute_type,p.typeahedSearchValue,p.selectedObjectAttribute,d,!0).then(function(e){t.resolve(e)}),t.promise},p.fetchGroups=c.fetchGroups,p.groupCustomSelectFn=c.groupCustomSelectFn,p.attributeNameCustomSelectFn=function(e){p.rule.attirbute_values=[],p.selectedObjectAttributeValues=null,p.rule.attribute_type===p.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields&&(p.selectedField=e);return p.rule.attribute_type===p.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields?e.name:e.id},p.aftereSelectFieldFn=function(){p.typeahedSearchValue=null,!p.selectedField||p.selectedField.options.length<1?p.rule.free_text_match_type=p.lupHelper.free_text_match_types.contains:p.rule.free_text_match_type=p.lupHelper.free_text_match_types.matches},p.objectOrAttributeChanged=m,p.save=function(e){{if(p.requestInProgress)return;p.requestInProgress=!0}{f(e),e.$valid?((e=g.copy(p.rule)).attirbute_values=e.attirbute_values.join(","),e.attribute_name=e.attribute_name.join(","),d.createRule({rule:e}).then(function(e){n.close({action:"created",rule_id:e.rule_id})},function(){p.requestInProgress=!1})):p.requestInProgress=!1}},p.update=function(e){{if(p.requestInProgress)return;p.requestInProgress=!0}{var t;f(e),e.$valid?((t=g.copy(p.rule)).attribute_name=t.attribute_name.join(","),t.attirbute_values=t.attirbute_values.join(","),d.updateRule(t).then(function(e){n.close({action:"updated",rule_id:t.id})},function(){p.requestInProgress=!1})):p.requestInProgress=!1}},p.selectedField=null,p.fetchPredefinedValues=function(){return p.selectedField&&0<p.selectedField.options.length?p.typeahedSearchValue&&0<p.typeahedSearchValue.length?g.copy(_.filter(p.selectedField.options,function(e){return 0<=e.name.toLowerCase().indexOf(p.typeahedSearchValue.toLowerCase())||0<=e.value.toLowerCase().indexOf(p.typeahedSearchValue.toLowerCase())})):g.copy(p.selectedField.options):[]},p.predefinedValueCustomSelectFn=function(e){return g.isDefined(e)?e.value:null},p.afterRemoveFieldFn=function(){p.selectedField=null,p.selectedObjectAttributeValues=null,p.rule.attirbute_values=null,p.rule.free_text_match_type=p.lupHelper.free_text_match_types.contains},r?(p.rule=g.copy(r),p.selectedGroup=[{id:p.rule.group_id,title:p.rule.group_title}],p.rule.group_id=[p.rule.group_id],p.rule.attirbute_values=p.rule.attirbute_values.split(","),p.selectedObjectAttribute=[],p.rule.attribute_type!==p.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields?(p.rule.attirbute_values.map(function(e,t){p.lupService.getSFDefinitions(a,p.rule.sf_object_type_id,p.rule.attribute_type,e,null,d,!0).then(function(e){p.selectedObjectAttribute.push(e[0])})}),p.rule.attribute_name=p.rule.attirbute_values):p.lupService.getSFDefinitions(a,p.rule.sf_object_type_id,p.rule.attribute_type,p.rule.attribute_name,null,d,!0).then(function(e){p.selectedField=e.find(function(e,t){return e.name==p.rule.attribute_name}),p.selectedObjectAttribute=[{id:1,label:p.selectedField.label}],p.rule.attribute_name=[p.rule.attribute_name],p.selectedObjectAttributeValues=p.rule.attirbute_values.map(function(t,e){return p.selectedField?p.selectedField.options.find(function(e){return e.value==t}):{id:e+1,name:t}})})):p.rule={sf_object_type_id:p.lupHelper.salesForceAssignRules.objectTypes.user,attribute_type:p.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields,free_text_match_type:p.lupHelper.free_text_match_types.contains,attribute_name:[],attirbute_values:[]},m(),p.ruleObjectTypes=[{id:p.lupHelper.salesForceAssignRules.objectTypes.user,title:p.lupHelper.showMessage("learningpaths.user")},{id:p.lupHelper.salesForceAssignRules.objectTypes.contact,title:p.lupHelper.showMessage("contact")}],p.objectAttributeTypes=[{id:p.lupHelper.salesForceAssignRules.objectAttributeTypes.roles,title:p.lupHelper.showMessage("lup.salesforce.rule_data_types.role_hierarchy")},{id:p.lupHelper.salesForceAssignRules.objectAttributeTypes.standardAndCustomFields,title:p.lupHelper.showMessage("lup.salesforce.sales_force_rules.standard_custom")}],p.freeTextVariantOptions=[{id:p.lupHelper.free_text_match_types.contains,title:p.lupHelper.showMessage("lup.auto_assign_rules.contains_value")},{id:p.lupHelper.free_text_match_types.matches,title:p.lupHelper.showMessage("lup.auto_assign_rules.matches_value")}]}g.module("lu").controller("SalesForceAssignRulesEditController",e),e.$inject=["$rootScope","$scope","$modalInstance","LupHelper","rule","sfDefinitions","SalesForceAssignRulesFactory","$q","$luPopover","usersFilteringOptionsService","LupService"]}(window.angular),function(){"use strict";function e(e,t,n){this.lupHelper=n,this.sync=function(e){t.close("sync")},this.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("SalesForceAssignRuleSync",e),e.$inject=["$scope","$modalInstance","LupHelper"]}(),function(){"use strict";window.angular.module("lu").controller("SalesForcesInvalidSessionController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService",function(e,t,n,o,r,a,i,s,l,c){o.get()}])}(),function(){"use strict";function e(e,t,n,o,r,a){new n;this.certificate=a,this.LupHelper=e,this.cancel=function(){r.close()},this.copyToClipboard=function(){var e=document.getElementById("cert-modal-text"),t=document.createRange();t.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy")}}angular.module("lu").controller("SamlCertificateCopyController",e),e.$inject=["LupHelper","$window","SamlFactory","toastr","$modalInstance","certificate"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=new n;this.portal_domain=a,this.portal_domain_with_subdomain=i,this.LupHelper=e,this.confirm=function(){s.activateHardening().then(function(e){!1!==e.error&&t.location.reload()})},this.cancel=function(){r.close()}}angular.module("lu").controller("SamlHardeningActivationController",e),e.$inject=["LupHelper","$window","SamlFactory","toastr","$modalInstance","portal_domain","portal_domain_with_subdomain"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=new n;this.portal_domain=a,this.portal_domain_with_subdomain=i,this.LupHelper=e,this.confirm=function(){s.deactivateHardening().then(function(e){!1!==e.error&&t.location.reload()})},this.cancel=function(){r.close()}}angular.module("lu").controller("SamlHardeningDeactivationController",e),e.$inject=["LupHelper","$window","SamlFactory","toastr","$modalInstance","portal_domain","portal_domain_with_subdomain"]}(),function(){"use strict";function e(e,t,n,o){t.get();e.saml_key="Paste in SAML token to test.",e.submit=function(){o.defaults.headers.post={"Content-Type":"text/xml"},o.post("/saml/consumer.html",e.saml_key).success(function(e){})}}angular.module("lu").controller("SamlTestWebhookHookController",e),e.$inject=["$scope","StorageFactory","LupHelper","$http"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l){var c=this,u=(e.get(),new l({id:r,course_id:o}));t.LupHelper=n,t.sendMessage=function(e){!function(e){if(c.showSpinner)return!1;if(function(e){e.$setValidity("emptyTitle",!!t.message_subject&&0<t.message_subject.trim().length),e.$setValidity("emptyBody",!!t.message_body&&0<t.message_body.trim().length)}(e),e.$valid)return c.showSpinner=!0,t.message_subject=t.message_subject.trim(),t.message_body=t.message_body.trim(),!0;return!1}(e)||u.sendMessageToILTSessionAttendees(o,r,t.message_subject,t.message_body).then(function(){s.close()})},t.cancelMessage=function(){s.close()},t.message_subject=null,t.message_body=null,c.showSpinner=!1,i(function(){$("body").updatePolyfill()})}angular.module("lu").controller("SessionsSendMessageToAttendeesController",e),e.$inject=["$scope","StorageFactory","LupHelper","course_id","session_id","session_name","$timeout","$modalInstance","SessionFactory"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsIndexController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","$location","$anchorScroll","spinnerService",function(t,e,n,o,r,a,i,s,l,c){o=o.get();t.settings=o.settings,t.activeTab=null,t.LupHelper=r,t.showIntegrations=!0,t.showLoading=function(){c.showGroup("luSpinnerGlobal"),c.hideGroup("luSpinnerGlobal",3e3)},t.hideIntegrations=function(){t.showIntegrations=!1},t.loadSettingsSubNav=function(e){t.activeTab!=e?(t.activeTab=e,s.hash("tab_"+e)):t.activeTab=null}}])}(),function(){"use strict";function e(e,t,n,o,r){var a=new r;e.helper=o,e.go=function(){var e={url:n.share_url+".json?share_certificate=true"};return a.get("social-sharings",e,null).then(function(){a.data.linkedin_core_url&&window.open(a.data.linkedin_core_url,"_blank")})},e.close=function(){t.close()},e.data=n}angular.module("lu").controller("SocialSharingsDialogController",e),e.$inject=["$scope","$modalInstance","data","LupHelper","learnUponApi"]}(),function(){"use strict";window.angular.module("lu").controller("StaffAccessIndexController",["$scope","$log","$http","$rootScope","StaffAccessFactory","StorageFactory","LupHelper","$window","$luPopover","paramsService","$modal","$filter","LupUtil",function(o,e,t,n,r,a,i,s,l,c,u,d,p){var _,a=a.get(),m=new r;function f(){var e={};e.params=c.get(),m.getPortals(e).then(function(e){o.portals=e.portals,o.parentPortal=e.parent_portal.attributes,o.showParentRevoke=!!o.parentPortal.sag_expires_at||0==o.parentPortal.sag_expire_type,o.showParentAllow=!(o.parentPortal.sag_expires_at||0==o.parentPortal.sag_expire_type),o.showParentRequested=1==o.parentPortal.sag_status,o.selection=[],n.$broadcast("selectAll:deSelectAll")})}function g(e){var t=o.selection.indexOf(e),n=d("filter")(o.portals,{id:e},!0)[0];-1<t?o.selection.splice(t,1):o.selection.push(e),o.$broadcast("itemSelect",{portal:n,action:-1<t?"deselect":"select"})}function h(){u.open({templateUrl:"/tc/staff_access/allow-access.html",controller:"StaffAccessModalController",size:"lg",resolve:{portals:function(){var t=[];return o.portals.data.filter(function(e){if(-1!=o.selection.indexOf(e.id))return-1<o.selection.indexOf(e.id)?(t.push(e),e):void 0}),-1<o.selection.indexOf(o.parentPortal.id)&&t.push(o.parentPortal),t},parentPortal:function(){return void 0===o.topLevelParentPortal?o.parentPortal:o.topLevelParentPortal}}}).result.then(function(e){e&&"save"===e.action&&f()})}function b(){u.open({templateUrl:"/tc/staff_access/revoke-access.html",controller:"StaffAccessModalController",size:"lg",resolve:{portals:function(){var t=[];return o.portals.data.filter(function(e){if(-1!=o.selection.indexOf(e.id))return-1<o.selection.indexOf(e.id)?(t.push(e),e):void 0}),-1<o.selection.indexOf(o.parentPortal.id)&&t.push(o.parentPortal),t},parentPortal:function(){return o.parentPortal}}}).result.then(function(e){e&&"save"===e.action&&f()})}function v(e,t,n){o.selection=e?t:t.concat(n)}o.helper=i,o.portals=a.portals,o.parentPortal=a.parent_portal.attributes,o.topLevelParentPortal=a.top_level_parent_portal.attributes,o.logStatuses=((_=[]).push(p.optionObject("",i.showMessage("lup.support_access.show_all_statuses"))),_.push(p.optionObject(2,i.showMessage("lup.support_access.access_available"))),_.push(p.optionObject(0,i.showMessage("lup.support_access.status.access_disabled"))),_.push(p.optionObject(1,i.showMessage("lup.support_access.pending_request"))),_),o.filterOptions=function(){return[{filterName:"filterStatus",value:o.selected}]},o.selected=o.logStatuses[0].value,o.sortOptions=[{label:i.showMessage("lup.support_access.filters.az_requests_first"),value:"title.asc",default:!0},{label:i.showMessage("lup.support_access.filters.za_requests_last"),value:"title.desc"}],o.showSorting=!0,o.toggleSelection=g,o.allowAccess=h,o.revokeAccess=b,o.cancelFooter=function(){n.$broadcast("selectAll:deSelectAll")},o.allowButton=function(t){var e=o.parentPortal.id==t;{var n;-1<o.selection.indexOf(t)||e?(n=o.selection.filter(function(e){if(e!=t||t===o.parentPortal.id)return e}),o.selection=[],o.selection=[t],h(),v(e,n,t)):(g(t),h(),g(t))}},o.revokeButton=function(t){var e=o.parentPortal.id==t;{var n;-1<o.selection.indexOf(t)||e?(n=o.selection.filter(function(e){if(e!=t)return e}),o.selection=[],o.selection=[t],b(),v(e,n,t)):(g(t),b(),g(t))}},o.selection=[],o.filteringControl={},o.loadData=f,o.showParentRevoke=!!o.parentPortal.sag_expires_at||0==o.parentPortal.sag_expire_type,o.showParentAllow=!(o.parentPortal.sag_expires_at||0==o.parentPortal.sag_expire_type),o.showParentRequested=1==o.parentPortal.sag_status,o.parentPortalText=function(e){return e.parent_id?i.showMessage("lup.support_access.client_portal"):i.showMessage("lup.support_access.parent_portal")},n.$on("resetFilter",function(){o.selected=o.logStatuses[0].value,f()})}])}(),function(){"use strict";window.angular.module("lu").controller("StaffAccessLogsController",["$scope","$log","$http","$rootScope","StaffAccessFactory","StorageFactory","LupHelper","$window","$luPopover","paramsService","$modal","$filter","LupUtil",function(n,e,t,o,r,a,i,s,l,c,u,d,p){var _,a=a.get(),m=new r;function f(){var e={};e.params=c.get(),m.getLogs(e,n.portal.id).then(function(e){n.portal=e.portal.attributes,n.logs=e.logs,n.showPortalRevoke=!!n.portal.sag_expires_at,n.showPortalAllow=!n.portal.sag_expires_at,n.selection=[]})}function g(e){var t=n.selection.indexOf(e);-1<t?n.selection.splice(t,1):n.selection.push(e)}function h(){u.open({templateUrl:"/tc/staff_access/allow-access.html",controller:"StaffAccessModalController",size:"lg",resolve:{portals:function(){var e=[];return-1<n.selection.indexOf(n.portal.id)&&e.push(n.portal),e},parentPortal:function(){return n.parentPortal}}}).result.then(function(e){e&&"save"===e.action&&f()})}function b(){u.open({templateUrl:"/tc/staff_access/revoke-access.html",controller:"StaffAccessModalController",size:"lg",resolve:{portals:function(){var e=[];return-1<n.selection.indexOf(n.portal.id)&&e.push(n.portal),e},parentPortal:function(){return n.parentPortal}}}).result.then(function(e){e&&"save"===e.action&&f()})}n.portal=a.portal.attributes,n.parentPortal=a.parent_portal.attributes,n.logs=a.logs,n.helper=i,n.statusObject=function(e){var t=0,n=1,o=2,r={};switch(e){case t:r={id:t,textClass:"text-danger",text:helper.showMessage("lup.certificates.enabled")};break;case n:r={id:n,textClass:"text-danger",text:i.showMessage("lup.support_access.status.requested")};break;case o:r={id:o,textClass:"text-success",text:i.showMessage("lup.support_access.status.allowed")}}return r}(n.portal.sag_status),n.timeOption=(_=n.portal.sag_expire_type,{1:i.showMessage("lup.support_access.expire_type.day"),2:i.showMessage("lup.support_access.expire_type.week"),3:i.showMessage("lup.support_access.expire_type.month"),4:i.showMessage("lup.support_access.expire_type.six_months"),5:i.showMessage("lup.support_access.expire_type.year"),0:i.showMessage("lup.support_access.expire_type.infinity")}[_]),n.showPortalRevoke=!!n.portal.sag_expires_at||0==n.portal.sag_expire_type,n.showPortalAllow=!(n.portal.sag_expires_at||0==n.portal.sag_expire_type),n.showPortalRequested=1==n.portal.sag_status,n.toggleSelection=g,n.selection=[],n.allowButton=function(t){{var e;-1<n.selection.indexOf(t)?(e=n.selection.map(function(e){if(e!=t)return e}),n.selection=[t],h(),n.selection=e.concat(t)):(g(t),h(),g(t))}},n.revokeButton=function(t){{var e;-1<n.selection.indexOf(t)?(e=n.selection.map(function(e){if(e!=t)return e}),n.selection=[t],b(),n.selection=e.concat(t)):(g(t),b(),g(t))}},n.loadData=f}])}(),function(){"use strict";window.angular.module("lu").controller("StaffAccessModalController",["$scope","$log","$http","$rootScope","StaffAccessFactory","LupHelper","$window","$luPopover","paramsService","portals","parentPortal","$modal","$filter","LupUtil","$modalInstance",function(n,e,t,o,r,a,i,s,l,c,u,d,p,_,m){n.helper=a;var f,g,h=new r;n.selectedPortals=c,n.parentPortal=u,n.timeOptions=((f=[]).push(_.optionObject(1,a.showMessage("lup.support_access.expire_type.day"))),f.push(_.optionObject(2,a.showMessage("lup.support_access.expire_type.week"))),f.push(_.optionObject(3,a.showMessage("lup.support_access.expire_type.month"))),f.push(_.optionObject(4,a.showMessage("lup.support_access.expire_type.six_months"))),f.push(_.optionObject(5,a.showMessage("lup.support_access.expire_type.year"))),f.push(_.optionObject(0,a.showMessage("lup.support_access.expire_type.infinity"))),f),n.selected=n.timeOptions[0].value,n.dismissModal=function(){m.dismiss()},n.revokeAccess=function(){var e={data:{sag_ids:n.selectedPortals.map(function(e){return e.sag_id})}};return h.revoke(e).then(function(e){m.close({action:"save"})}),null},n.allowAccess=function(){var e={data:{ids:n.selectedPortals.map(function(e){return[e.id,e.sag_id]}),expire_type:n.selected}};return h.allow(e).then(function(e){m.close({action:"save"})}),null},n.showIfSinglePortal=1==n.selectedPortals.length,n.isClientPortalSelected=(g=!1,n.selectedPortals.forEach(function(e){e.parent_id&&(g=!0)}),g),n.timeOption=function(t){return n.timeOptions.filter(function(e){return e.value==t})[0].label}}])}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;i.LupHelper=o,i.email=n,i.close=function(){t.close({action:"close"})},i.sendVerificationEmail=function(){r.post("/support_desk_users/confirmations/create.json").then(function(e){t.close(),e.data.data?a.onSuccess({success:i.LupHelper.showMessage("support_centre_confirmation.confirmation_email.successfully_sent")}):a.onError({error:i.LupHelper.showMessage("support_centre_confirmation.confirmation_email.failed_to_send")})})}}angular.module("lu").controller("EmailVerificationRequiredModalController",e),e.$inject=["$scope","$modalInstance","email","LupHelper","$http","notifyFactory"]}(),function(){"use strict";function e(e,t,n){t.get();e.LupHelper=n}angular.module("lu").controller("TermsAndConditionsIndexController",e),e.$inject=["$scope","StorageFactory","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=new r,s=this;s.terms=n.getKey("terms"),s.lupHelper=o,s.delete=function(e){0<e.agreed_count?a.notify(o.showMessage("lup.bundles.subnavigation_links.info"),o.showMessage("lup.terms_of_service.cant_delete_tos_msg")):a.confirm(o.showMessage("lup.confirm"),o.showMessage("lup.terms_of_service.delete_archived_confirmation_msg")).then(function(){i.deleteTos(e.id).then(function(){i.getArchived().then(function(e){s.terms=e.data.terms})})})},t.breadcrumbs=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.terms_of_service.tos_title"),url:"/settings/users/terms_of_services"}]}angular.module("lu").controller("TermsOfServicesArchivedController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","TermsOfServicesFactory","$luPopover"]}(),function(){"use strict";function e(e,t,n,o){var r=this;r.lupHelper=n,r.portals=o,r.selected_portals=[],r.fetchPortals=function(t){return _.filter(angular.copy(o),function(e){return-1<e.name.toLowerCase().indexOf(t.$query.toLowerCase())})},r.clone=function(e){e.$setValidity("noPortalSelected",0<r.selected_portals.length),e.$valid&&t.close({portal_id:r.selected_portals[0].id})},r.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("TermsOfServicesCloneTos",e),e.$inject=["$scope","$modalInstance","LupHelper","portals"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=new r,c=this;function u(e){e.$setValidity("emptyTosTitle",!!c.tos.terms_title),e.$setValidity("longTosTitle",!!c.tos.terms_title&&c.tos.terms_title.length<=o.tosValidationValues.title_length),e.$setValidity("longReference",!c.tos.reference||!!c.tos.reference&&c.tos.reference.length<=o.tosValidationValues.reference_length)}c.tos=n.getKey("tos").attributes,n.getKey("current_tos")&&(c.current_tos=n.getKey("current_tos").attributes),c.store_terms_exist=n.getKey("store_terms_exist"),c.lupHelper=o,c.showFooterActions=!0,c.saveTos=function(e){u(e),c.tos.terms_text=o.getHTMLFromCKEditor("tos_text_wysi"),e.$valid&&(c.showFooterActions=!1,l.saveTos({tos:c.tos}).then(function(e){e.error?c.showFooterActions=!0:a.location="/settings/users/terms_of_services"}))},c.publishTos=function(e){{u(e),c.tos.terms_text=o.getHTMLFromCKEditor("tos_text_wysi"),e.$valid&&s.open({templateUrl:"/tc/terms_of_services/publish_tos_modal.html",controller:"TermsOfServicesPublishTos as vm",size:"md",resolve:{store_terms_exist:function(){return c.store_terms_exist}}}).result.then(function(){c.showFooterActions=!1,l.publishTos({tos:c.tos}).then(function(e){e.error?c.showFooterActions=!0:a.location="/settings/users/terms_of_services"})})}},c.cancel=function(){a.location="/settings/users/terms_of_services"},c.delete=function(){i.confirm(o.showMessage("lup.confirm"),o.showMessage("lup.terms_of_service.deletion_confirmation_msg")).then(function(){c.showFooterActions=!1,l.deleteTos(c.tos.id).then(function(){a.location="/settings/users/terms_of_services"})})},t.breadcrumbs=function(){var e=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.terms_of_service.tos_title"),url:"/settings/users/terms_of_services"}];c.tos.id?e.push({title:c.tos.terms_title,url:"/settings/users/terms_of_services/"+c.tos.id+"/edit"}):e.push({title:o.showMessage("courses.new"),url:"/settings/users/terms_of_services/new"});return e}(),e.ariaLabel=o.showMessage("a11y.term_options_aside"),e.ariaLabelSide=o.showMessage("lup.terms_of_service.terms_options"),o.renderCKEditor({clear_all_previous_instances:!0,id:"tos_text_wysi",add_image_upload:!1,add_embedded_media:!1,show_source:!1,width:"100%",editorTextChangeEvent:function(){e.$apply()}})}angular.module("lu").controller("TermsOfServicesEditController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","TermsOfServicesFactory","$window","$luPopover","$modal"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u){var d=new r,p=new a,_=this,m=!0;function f(){var e={hideSpinner:!0};return e.url="/download_jobs/"+_.terms_reference+"/status.json",p.get("download_jobs",e,_.terms_reference).then(function(){var e=p.data.job;e&&e.status_id!==o.lupJobStatuses.completed?_.timeoutPromise=c(function(){f()},2e3):_.terms_reference=null})}t.getKey("tos")&&(_.tos=t.getKey("tos").attributes),t.getKey("draft")&&(_.draft=t.getKey("draft").attributes),_.portals=t.getKey("portals"),_.tos_enabled=t.getKey("tos_enabled"),_.archived_exists=t.getKey("archived_exists"),_.terms_reference=t.getKey("terms_reference"),_.show_terms_on_course_screen=t.getKey("show_terms_on_course_screen"),_.ecommerce_enabled=t.getKey("ecommerce_enabled"),_.store_terms_exist=t.getKey("store_terms_exist"),_.lupHelper=o,_.showBlankState=function(){return!_.tos&&!_.draft},_.showReport=function(){return!!_.tos||!!_.archived_exists},_.updateTos=function(){d.updateTos({draft:_.draft,published:_.tos})},_.publishTos=function(){s.open({templateUrl:"/tc/terms_of_services/publish_tos_modal.html",controller:"TermsOfServicesPublishTos as vm",size:"md",resolve:{store_terms_exist:function(){return _.store_terms_exist}}}).result.then(function(){d.publishTos({tos:_.draft}).then(function(e){e=JSON.parse(e.json_service);_.terms_reference=e.terms_reference,e.tos&&(_.tos=e.tos.attributes),e.draft?_.draft=e.draft.attributes:_.draft=null,f()})})},_.archiveTos=function(){i.confirm(o.showMessage("lup.terms_of_service.archive_confirmation_title"),o.showMessage("lup.terms_of_service.archive_confirmation_msg")).then(function(){d.archiveTos(_.tos.id).then(function(){_.tos=null})})},_.deleteDraft=function(){i.confirm(o.showMessage("lup.confirm"),o.showMessage("lup.terms_of_service.deletion_confirmation_msg")).then(function(){d.deleteTos(_.draft.id).then(function(){_.draft=null})})},_.downloadReport=function(){var e=new u,t={typeId:_.lupHelper.lupJobTypes.exportTermsData};e.initiateJob(t)},_.showTermsOnCourseSwitch=function(){return!!_.tos_enabled&&!!_.ecommerce_enabled},_.cloneTos=function(){s.open({templateUrl:"/tc/terms_of_services/clone_tos_modal.html",controller:"TermsOfServicesCloneTos as vm",size:"md",resolve:{portals:function(){return _.portals.data}}}).result.then(function(e){d.cloneTos({tos_id:_.tos.id,portal_id:e.portal_id})})},e.breadcrumbs=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.terms_of_service.tos_title"),url:"/settings/users/terms_of_services"}],n.ariaLabelSide=o.showMessage("a11y.general_settings_aside"),n.ariaLabel=o.showMessage("a11y.general_settings_main"),n.activeTermDDM={},n.toggled=function(e,t){n.activeTermDDM[t]=e},_.terms_reference&&f(),n.$watch("vm.tos_enabled",function(e,t){m?c(function(){m=!1}):e!=t&&d.toggleTos({tos_enabled:e})}),n.$watch("vm.show_terms_on_course_screen",function(e,t){m?c(function(){m=!1}):e!=t&&d.toggleTos({show_terms_on_course_screen:e})})}angular.module("lu").controller("TermsOfServicesIndexController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","TermsOfServicesFactory","learnUponApi","$luPopover","$modal","$window","$timeout","LupJobFactory"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s){var l=this,n=n.get(),c=new i;function u(e){e&&e.bottom<window.innerHeight&&(l.disable_save=!1,t.$apply())}l.lupHelper=o,n.tos&&(l.tos=n.tos.attributes),l.tos_status_code=n.tos_status_code,l.tos_enabled=n.tos_enabled,l.user=n.user.attributes,l.delete_users_enabled=n.delete_users_enabled,l.disable_save=!0,l.openTerms=function(){r.open({templateUrl:"/tc/users/user_terms_of_service_modal.html",controller:"UsersRegistrationsNewTermsOfServiceController as vm",windowClass:"terms-modal lu-modal lu-modal--fixed ",resolve:{tos:function(){return l.tos},disable_actions:function(){return!0}}})},l.acceptTerms=function(){l.tos&&l.tos_enabled&&e.post("/accept_terms_of_services/"+l.tos.id).success(function(){a.location.reload()}).error(function(){a.location.reload()})},l.rejectTerms=function(){l.tos&&l.tos_enabled&&r.open({templateUrl:"/tc/terms_of_services/reject_tos_confirmation_modal.html",controller:"TermsOfServicesRejectTosConfirmationController as vm",windowClass:"tos-modal center-cont-modal",resolve:{tos_id:function(){return l.tos.id}}})},l.deleteAccount=function(){r.open({templateUrl:"/tc/user_deletion_request/confirm_deletion.html",controller:"UserDeletionRequestConfirmDeletion as vm",windowClass:"tos-modal center-cont-modal",size:"md",resolve:{selfDeletion:function(){return!0},reviewTerms:function(){return!0}}}).result.then(function(e){l.user&&c.requestDeletion(l.user.id).then(function(e){a.location="/user_terms_of_services"})})},l.revokeDeletion=function(){r.open({templateUrl:"/tc/user_deletion_request/confirm_revoke.html",controller:"UserDeletionRequestConfirmRevoke as vm",windowClass:"tos-modal center-cont-modal",size:"md",resolve:{selfDeletion:function(){return!0}}}).result.then(function(e){c.revokeDeletion(l.user.id).then(function(e){a.location="/dashboard"})})},l.tos_status_code==l.lupHelper.tos_status_codes.delete_requested?(l.profileImage=n.profile_image,l.delete_date=n.delete_date):s(function(){var e=document.getElementById("tos-end-of-terms"),t=e.getBoundingClientRect();u(t),document.addEventListener("scroll",function(){u(e.getBoundingClientRect())},!1)},1e3)}angular.module("lu").controller("TermsOfServicesPromptTosController",e),e.$inject=["$scope","$http","StorageFactory","LupHelper","$modal","$window","UsersFactory","$timeout"]}(),function(){"use strict";function e(e,t,n,o){this.store_terms_exist=o,this.lupHelper=n,this.save=function(e){t.close("save")},this.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("TermsOfServicesPublishTos",e),e.$inject=["$scope","$modalInstance","LupHelper","store_terms_exist"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;i.lupHelper=n,i.tos_id=o,i.reject=function(){o&&t.post("/reject_terms_of_services/"+i.tos_id).success(function(){r.location.reload()}).error(function(){r.location.reload()})},i.cancel=function(){a.close()}}angular.module("lu").controller("TermsOfServicesRejectTosConfirmationController",e),e.$inject=["$scope","$http","LupHelper","tos_id","$window","$modalInstance"]}(),function(){"use strict";function e(e,t,n,o,r){var a=this,o=o.get();a.lupHelper=t,a.tos=o.tos.attributes,n.breadcrumbs=[{title:a.lupHelper.showMessage("lup.breadcrumbs.account.my_profile"),url:"/my-profile"},{title:a.lupHelper.showMessage("lup.breadcrumbs.account.review_terms"),url:"/review_terms_of_services"}],a.confirmRevoke=function(){r.open({templateUrl:"/tc/terms_of_services/reject_tos_confirmation_modal.html",controller:"TermsOfServicesRejectTosConfirmationController as vm",windowClass:"tos-modal center-cont-modal",resolve:{tos_id:function(){return a.tos.id}}})}}angular.module("lu").controller("TermsOfServicesReviewTermsController",e),e.$inject=["$scope","LupHelper","$rootScope","StorageFactory","$modal"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=new r,c=this;n.getKey("tos")&&(c.tos=n.getKey("tos").attributes),n.getKey("draft")&&(c.draft=n.getKey("draft").attributes),c.portals=n.getKey("portals"),c.lupHelper=o,e.ariaLabel=c.tos.terms_title,e.ariaLabelSide=o.showMessage("lup.terms_of_service.terms_options"),t.breadcrumbs=function(){var e=[{title:o.showMessage("lup.tabs.settings"),url:"/settings"},{title:o.showMessage("lup.tabs.users")+"/"+o.showMessage("lup.terms_of_service.tos_title"),url:"/settings/users/terms_of_services"}];c.tos.status_code===o.tosStatuses.archived&&e.push({title:o.showMessage("lup.terms_of_service.archived_terms"),url:"/settings/users/terms_of_services/archived"});return e.push({title:c.tos.terms_title,url:"/settings/users/terms_of_services/"+c.tos.id}),e}(),t.$on("copyTos",function(){s.open({templateUrl:"/tc/terms_of_services/clone_tos_modal.html",controller:"TermsOfServicesCloneTos as vm",size:"md",resolve:{portals:function(){return c.portals.data}}}).result.then(function(e){l.cloneTos({tos_id:c.tos.id,portal_id:e.portal_id})})}),t.$on("updateTos",function(){l.updateTos({draft:c.draft,published:c.tos})}),t.$on("archiveTos",function(){i.confirm(o.showMessage("lup.terms_of_service.archive_confirmation_title"),o.showMessage("lup.terms_of_service.archive_confirmation_msg")).then(function(){l.archiveTos(c.tos.id).then(function(){a.location="/settings/users/terms_of_services"})})}),t.$on("deleteTos",function(){0<c.tos.agreed_count?i.notify(o.showMessage("lup.bundles.subnavigation_links.info"),o.showMessage("lup.terms_of_service.cant_delete_tos_msg")):i.confirm(o.showMessage("lup.confirm"),o.showMessage("lup.terms_of_service.delete_archived_confirmation_msg")).then(function(){l.deleteTos(c.tos.id).then(function(){a.location="/settings/users/terms_of_services/archived"})})})}angular.module("lu").controller("TermsOfServicesShowController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","TermsOfServicesFactory","$window","$luPopover","$modal"]}(),function(){"use strict";function e(e,t,n,o){this.lupHelper=n,this.draftPresent=o,this.choose=function(e){t.close(e)},this.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("TermsOfServicesUpdateMethod",e),e.$inject=["$scope","$modalInstance","LupHelper","draftPresent"]}(),function(){"use strict";function e(n,o,e,t,r,a){var i=this,s=new e,t=t.get();function l(e,t){a.open({templateUrl:"/tc/two_factor_authentication/show_backup_codes.html",controller:"TwoFactorAuthenticationBackupCodesController as vm",backdrop:"static",size:"md",resolve:{backup_codes:function(){return e},next_redirection:function(){return t}}})}i.LupHelper=n,i.two_factor_authentication_qr_code=t.two_factor_authentication_qr_code,i.two_factor_authentication_backup_codes=t.two_factor_authentication_backup_codes,i.invalidCodeError=null,i.activationError=null,i.save=function(e){if(i.invalidCodeError=null,i.activationError=null,!i.otp_activation_pass)return void(i.activationError=I18n.t("lup.two_factor_authentication.missing_value_error"));var t={otp_activation_pass:i.otp_activation_pass};e.$valid&&s.checkActivationCode(t).then(function(e){null===e.error||"number_of_attempts_left"in e||(i.activationError=e.error),null!==e.error&&"number_of_attempts_left"in e&&(i.invalidCodeError=n.showMessage("lup.two_factor_authentication.invalid_authentication_code_attempts_v2",{number_of_attempts_left:e.number_of_attempts_left})),!0===e.refresh&&setTimeout(function(){o.location="/two-factor-authentication/activate"},3e3),null!=e.next&&l(e.two_factor_authentication_backup_codes,e.next)})},i.showPopupModalForBackupCodes=l,i.goToActivationPage=function(){var e="?next="+encodeURIComponent("/my-profile");o.location="/two-factor-authentication/activate"+e}}angular.module("lu").controller("TwoFactorAuthenticationActivationController",e),e.$inject=["LupHelper","$window","TwoFactorAuthentication","StorageFactory","toastr","$modal"]}(),function(){"use strict";function e(e,t,n,o,r){var a=this;a.LupHelper=n,a.backup_codes_arr=t,a.backup_codes_mtx=t,a.copyToClipboard=function(){var e=document.createElement("span");e.appendChild(document.createTextNode(a.backup_codes_arr)),e.id="tempCopyToClipboard",angular.element(document.body.append(e));var t=document.createRange();t.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges(),e.remove()},a.close=function(){""!==o&&(r.location=o)},a.init=function(){a.backup_codes_mtx=function(){var e,t=a.backup_codes_arr.split(","),n=[],o=-1;for(e=0;e<t.length;e++)e%3==0&&(n[++o]=[]),n[o].push(t[e]);return n}()},a.init()}angular.module("lu").controller("TwoFactorAuthenticationBackupCodesController",e),e.$inject=["$modalInstance","backup_codes","LupHelper","next_redirection","$window"]}(),function(){"use strict";function e(e,t,n,o,r){var a=new n;this.LupHelper=e,this.confirmDisableForAccount=function(){a.disable().then(function(e){null!==e.error&&o.error(e.error),!0===e.refresh&&t.location.reload()})},this.cancelDisableForAccountConfirmation=function(){t.location.reload()}}angular.module("lu").controller("TwoFactorAuthenticationDisableForAccountController",e),e.$inject=["LupHelper","$window","TwoFactorAuthentication","toastr","$modal"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this,s=new n;i.LupHelper=e,i.user=a,i.confirmDisableForAnotherUser=function(){s.disableForAnotherUser(i.user).then(function(e){null!==e.error&&o.error(e.error),!0===e.refresh&&t.location.reload()})},i.cancelDisableConfirmation=function(){t.location.reload()}}angular.module("lu").controller("TwoFactorAuthenticationDisableForAnotherUserController",e),e.$inject=["LupHelper","$window","TwoFactorAuthentication","toastr","$modal","user"]}(),function(){"use strict";function e(n,e,t){this.LupHelper=e;var o=new t;function r(e,t){n.open({templateUrl:"/tc/two_factor_authentication/show_backup_codes.html",controller:"TwoFactorAuthenticationBackupCodesController as vm",backdrop:"static",size:"md",resolve:{backup_codes:function(){return e},next_redirection:function(){return t}}})}this.showPopupModalForBackupCodes=r,this.viewBackupCodes=function(){o.generateBackupCodes().then(function(e){null!==e.two_factor_authentication_backup_codes&&r(e.two_factor_authentication_backup_codes,"/account")})}}angular.module("lu").controller("TwoFactorAuthenticationGenerateBackupCodesController",e),e.$inject=["$modal","LupHelper","TwoFactorAuthentication"]}(),function(){"use strict";function e(e,t,n,o){var r=this,a=new n;r.LupHelper=e,r.user_password="",r.confirmPassword=function(){var e={user_password:r.user_password};a.passwordVerification(e).then(function(e){null!==e.error&&o.error(e.error),null!=e.next&&(t.location=e.next)})}}angular.module("lu").controller("TwoFactorAuthenticationPasswordVerificationController",e),e.$inject=["LupHelper","$window","TwoFactorAuthentication","toastr"]}(),function(){"use strict";function e(n,o,e,t){var r=this,a=new e;r.LupHelper=n,r.invalidCodeError=null,r.verificationError=null,r.otp_verification_pass="",r.save=function(e){if(r.invalidCodeError=null,r.verificationError=null,!r.otp_verification_pass)return void(r.verificationError=I18n.t("lup.two_factor_authentication.missing_value_error"));var t={otp_verification_pass:r.otp_verification_pass};e.$valid&&a.checkVerificationCode(t).then(function(e){null===e.error||"number_of_attempts_left"in e||(r.verificationError=e.error),null!==e.error&&"number_of_attempts_left"in e&&(r.invalidCodeError=n.showMessage("lup.two_factor_authentication.invalid_authentication_code_attempts_v2",{number_of_attempts_left:e.number_of_attempts_left})),null!=e.next&&(o.location=e.next)})}}angular.module("lu").controller("TwoFactorAuthenticationVerificationController",e),e.$inject=["LupHelper","$window","TwoFactorAuthentication","toastr"]}(),function(){"use strict";function e(e,t,n,o,r){this.selfDeletion=o,this.reviewTerms=r,this.lupHelper=n,this.confirm=function(){t.close()},this.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("UserDeletionRequestConfirmDeletion",e),e.$inject=["$scope","$modalInstance","LupHelper","selfDeletion","reviewTerms"]}(),function(){"use strict";function e(e,t,n,o){this.selfDeletion=o,this.lupHelper=n,this.confirm=function(){t.close()},this.cancel=function(){t.dismiss("cancel")}}angular.module("lu").controller("UserDeletionRequestConfirmRevoke",e),e.$inject=["$scope","$modalInstance","LupHelper","selfDeletion"]}(),function(){"use strict";function e(o,n,r,a,e,t,i,s,l,c,u,d,p){var m=new u;o.helper=s,o.user=a,o.title=e,o.existAsInstructor=!!i,o.existAsClientInstructor=!!d,o.isTrainingOwner=!!p,o.messages=t||[],o.message="",o.instructorsSelectedArray=[],o.trainingOwnersSelectedArray=[],o.delete=function(){var e=_.property("id")(_.first(o.instructorsSelectedArray)),t=_.property("id")(_.first(o.trainingOwnersSelectedArray));m.destroy(a.gm,{params:{replacement_course_owner_id:e,replacement_training_owner_id:t}}).then(function(e){n.close({action:"success"})},function(e){n.close({action:"error"})}),o.instructorsSelectedArray=[],o.trainingOwnersSelectedArray=[]},o.cancel=function(){n.close({action:"cancel"})},o.deleteButtonDisabled=function(){return(!!i||!!d)&&0===o.instructorsSelectedArray.length||!!p&&0===o.trainingOwnersSelectedArray.length},o.fetchInstructors=function(e){var t=l.defer(),n="";try{n=angular.isArray(e.$selected)?e.$selected.concat(a.id).join(","):[a.id]}catch(e){c.debug("fetchInstructorsApi: Unable to convert selected users to string!"),n=""}return r.get("/users/"+o.user.gm+"/available-replacements.json",{params:{search:e.$query,page:e.$page,page_size:s.pagination_sizes.typeadhead_default,except:n,only_admins:o.existAsClientInstructor}}).then(function(e){angular.forEach(e.data.tutors.data,function(e,t){e.display_name=o.helper.displayName(e)}),t.resolve(e.data.tutors.data)},function(){t.reject("Failed to get instructors")}),t.promise},o.fetchOwnerReplacements=function(e){var t=l.defer(),n="";try{n=angular.isArray(e.$selected)?e.$selected.concat(a.id).join(","):a.id}catch(e){c.debug("_fetchOwnerReplacements: Unable to convert selected users to string!"),n=""}return r.get("/users/training-owner-replacements.json",{params:{search:e.$query,page:e.$page,page_size:s.pagination_sizes.typeadhead_default,except:n}}).then(function(e){angular.forEach(e.data.owners.data,function(e,t){e.display_name=o.helper.displayName(e)}),t.resolve(e.data.owners.data)},function(){t.reject("Failed to get owner replacements")}),t.promise},t.push(s.showMessage("group.are_your_sure_you_want_to_delete_this_user_from_this_portal")),o.existAsInstructor&&o.messages.push(s.showMessage("lup.users.warn_user_exist_as_an_instructor_on_an_course")),o.message=t.join("<br/><br/>")}angular.module("lu").controller("DeleteUserController",e),e.$inject=["$scope","$modalInstance","$http","user","title","messages","existAsInstructor","LupHelper","$q","$log","UsersFactory","existAsClientInstructor","isTrainingOwner"]}(),function(){"use strict";function e(n,o,r,e,t,a,i,s,l,c,u){var d=new t;n.LupHelper=a,n.save=function(e){var t={invite:{email_addresses:n.email_addresses},portal_membership_type_id:n.selected_type};s||(t={invite:{email_addresses:n.email_addresses},invite_for_group_id:n.selectedGroup});e.$setValidity("validEmails",n.LupHelper.emailListValidation(n.email_addresses)),e.$valid&&(n.staffAccessGrantsAllowed&&n.LupHelper.contains(n.email_addresses,n.LupHelper.supportEmail)?r.close({action:"notify_staff_access_feature",emailAddresses:n.email_addresses,selectedType:n.selected_type}):d.inviteUsers(t).then(function(e){r.close({response:e}),o.$broadcast("onUsersInvited")}))},n.cancel=function(){r.close()},n.types=i,n.is_admin=s,n.selected_type=null!=u?u:n.types[0].value,n.email_addresses=c||"",n.available_groups_list=null,n.selectedGroup=null,l&&(n.available_groups_list=l,n.selectedGroup=n.available_groups_list[0][1])}window.angular.module("lu").controller("InviteUsersController",e),e.$inject=["$scope","$rootScope","$modalInstance","$window","UsersFactory","LupHelper","types","is_admin","available_groups_list","emailAddresses","selectedType"]}(),function(){"use strict";function e(e,t,n,o){e.confirm=function(){n.location="/settings/support"},e.cancel=function(){t.close()},e.modalTitle=o.showMessage("lup.support_access.invite_reject_notification_modal.title"),e.modalBody=o.showMessage("lup.support_access.invite_reject_notification_modal.body"),e.modalConfirmBtn=o.showMessage("lup.support_access.invite_reject_notification_modal.confirm")}window.angular.module("lu").controller("InviteSupportModalController",e),e.$inject=["$scope","$modalInstance","$window","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this;new r;l.impersonationResolutionMessage=function(){n.get("/angie/my-account.json").success(function(e){e.data.portal_meta.proxy_user_notification_enabled?l.modalInstance=s.open({templateUrl:"/tc/users/impersonation_resolution_message_modal.html",controller:["$scope","$modalInstance",function(e,t){e.charsLeft=o.showMessage("lup.proxy_user.impersonation_resolution_message.modal_chars_left")+" 255",e.LupHelper=o,e.resolutionMessage=function(){this.returnRedirectClose(this.resolution?this.resolution.message:"")},e.skipResolutionMessage=function(){this.returnRedirectClose("")},e.returnRedirectClose=function(e){n.post("/users/return_to_impersonator.json",{resolution_message:e}).success(function(e){a.location="/users/sign_in",this.close()})},e.charCounter=function(){this.charsLeft=this.LupHelper.showMessage("lup.proxy_user.impersonation_resolution_message.modal_chars_left")+" "+(255-this.resolution.message.length)},e.close=function(){t.close()}}],backdrop:"static",windowClass:"modal-box"}):n.post("/users/return_to_impersonator.json",{resolution_message:""}).success(function(e){a.location="/users/sign_in"})}).error(function(){t.debug("Cannot get my account.")})}}angular.module("lu").controller("ProxyUserController",e),e.$inject=["$scope","$log","$http","LupHelper","UsersFactory","$window","$rootScope","$modal"]}(),function(){"use strict";function e(n,o,e,r,t,a,i){n.helper=t,n.delete=function(){n.inProgress=!0,a(e).then(function(e){n.processingInProgress=!0,n.uploadProgress=null,n.deletingJobReference=e.data.job_reference;var t={onSuccess:i.extendFn(i.getCallback(r,"onSuccess"),function(){o.close({action:"success"}),n.inProgress=!1}),onError:i.extendFn(i.getCallback(r,"onError"),function(){o.close({action:"error"}),n.inProgress=!1})};i.pingForRemovalProgress(n.deletingJobReference,t,e,o)},function(e){i.getCallback(r,"onError")(e),o.close({action:"error"}),n.inProgress=!1})},n.cancel=function(){o.close({action:"cancel"})},n.title=t.showMessage("lup.confirm"),n.message=t.showMessage("lup.users.are_your_sure_you_want_to_remove_profile_image"),n.inProgress=!1,n.deletingJobReference=null}angular.module("lu").controller("RemoveProfileImageController",e),e.$inject=["$scope","$modalInstance","params","callbacks","LupHelper","$http","ImageUploadService"]}(),function(){"use strict";function e(e,t,n,o){var r=this;r.LupHelper=t,r.decision=r.LupHelper.client_memberships_decisions.do_not_update_memberships,r.deleteSwitch=!1,r.save=function(){r.deleteSwitch&&(r.decision=r.LupHelper.client_memberships_decisions.delete_memberships);n.close({action:"save",decision:r.decision})},r.cancel=function(){n.close()},r.clientMembershipsDecisionsList=r.LupHelper.clientMembershipsDecisionsList(),r.child_portals_with_maxed_licenses=[],r.user_id=o,r.checkIsSaveAvailable=function(){return!!r.child_portals_with_maxed_licenses.length&&!r.deleteSwitch},e.get("/users/"+r.user_id+"/check_licenses_for_sub_portals").then(function(e){r.child_portals_with_maxed_licenses=e.data})}angular.module("lu").controller("UpdateClientMembershipsController",e),e.$inject=["$http","LupHelper","$modalInstance","user_id"]}(),function(){"use strict";function e(r,n,e,o,t,a,i,s,l,c,u,d,p){var t=t.get(),m=new l,f=new c,g=new u;r.Helper=o,r.batchfile_delimiter=o.batchfile_delimiter_options[0].value,r.Upload=a,r.add_to_groups=t.add_to_groups,r.perform_group_sync=!1,r.perform_enrollment_updates_on_sync=!1,r.perform_sync_confirmed=!1,r.enroll_to_courses=t.enroll_to_courses,r.preselected_group=t.preselected_group,r.salesforce_connected=t.salesforce_connected,r.salesforce_import=!!t.salesforce_import,r.groupsSelectedArray=[],r.coursesSelectedArray=[],r.groupSearch="",r.clearBatchUpload=function(){r.batchUpload=null},r.save=function(t){if(r.perform_group_sync&&!r.perform_sync_confirmed){var e=o.showMessage("lup.batchuserimports.perform_group_sync_warning");return r.perform_enrollment_updates_on_sync&&(e+=o.showMessage("lup.batchuserimports.perform_group_sync_warn_unenroll")),e+=o.showMessage("lup.batchuserimports.perform_group_sync_warn_sure"),void d.confirm(o.showMessage("lup.confirm"),e).then(function(e){r.perform_sync_confirmed=!0,h(t)})}return void h(t)},r.downloadSampleFile=function(){var e={sep:r.batchfile_delimiter,other_char:r.other_char,invite_users:r.invite_users,update_users:r.update_existing_users,job_type:b()},e=new URLSearchParams(e).toString();window.location="/sample-batch-file.csv?"+e},r.downloadRealFile=function(){var e={},t=new n;return e.search=r.searchText,e.include_pending=!1,e.typeId=o.lupJobTypes.batchImportSample,void t.initiateJob(e)},r.fetchGroups=function(e){return f.getList({params:{search:e}}).then(function(){return e=f.data.groups.data,_.reject(e,function(e){return _.contains((t="title",_.map(r.groupsSelectedArray,function(e){return e[t]})),e.title);var t});var e})},r.fetchCourses=function(e){return g.getList({params:{search:e,include_draft:0,includeallversions:0,for_enrollment:!0}}).then(function(){return e=g.data.courses.data,_.reject(e,function(e){return _.contains((t="name",_.map(r.coursesSelectedArray,function(e){return e[t]})),e.name);var t});var e})},r.groupSelected=function(e){r.groupSearch=null,r.groupsSelectedArray.push(e)},r.coursesSelected=function(e){r.coursesSearch=null,r.coursesSelectedArray.push(e)},r.removeGroup=function(e){r.groupsSelectedArray.splice(e,1)},r.removeCourse=function(e){r.coursesSelectedArray.splice(e,1)},r.cancel=function(){p.location.reload()},r.checkReEnroll=function(){r.enroll_to_courses&&(r.allow_re_enroll=!1)},r.ariaLabel=o.showMessage("lup.a11y.batch_upload_right_side"),r.ariaLabelSide=o.showMessage("lup.a11y.batch_upload_left_side"),r.preselected_group&&r.groupSelected(r.preselected_group);t=[{title:o.showMessage("lup.breadcrumbs.users.index"),url:"/users"},{title:o.showMessage("lup.breadcrumbs.users.batch_upload"),url:"/users/batch-upload"}];function h(e){r.batchUpload?e.$dirty&&e.$valid&&i.getData(o.fileUploads.types.batch_upload,function(t){s(function(){var n,o,e=t.data.signature_data.attributes;r.errorMsg=null,n=r.batchUpload,o=e,r.errorMsg=null,i.uploadFiles(n,o,function(e){var t={data:{}};t.data.invite_user=r.invite_users,t.data.do_user_updates=r.update_existing_users,t.data.column_delimiter_id=r.batchfile_delimiter,t.data.other_char=r.other_char,t.data.job_type=b(),t.data.userfile_name=o.file_name,t.data.original_name=r.batchUpload.name,t.data.file_size=n.size,t.data.perform_group_sync=r.perform_group_sync,t.data.perform_enrollment_updates_on_sync=r.perform_enrollment_updates_on_sync,t.data.perform_sync_confirmed=r.perform_sync_confirmed,t.data.rows_number=0,t.data.assign_to=function(){var e=null;r.add_to_groups&&""!==r.groupsSelectedValue?e=r.groupsSelectedValue:r.enroll_to_courses&&""!==r.coursesSelectedValue&&(e=r.coursesSelectedValue);return e}(),t.data.salesforce_import=r.salesforce_import,t.data.allow_re_enroll=r.allow_re_enroll,m.importUsers(t).then(function(e){r.batchUpload=null,r.bath_upload_form.$setPristine(),r.perform_sync_confirmed=!1})},function(e){0<e.status&&(r.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},function(e){}):(o.showTip("lup.users.batch_import.no_file_error"),r.perform_sync_confirmed=!1)}function b(){var e=o.batch_import_types.users;return r.add_to_groups&&""!==r.groupsSelectedValue?e=o.batch_import_types.groups:r.enroll_to_courses&&""!==r.coursesSelectedValue&&(e=o.batch_import_types.enrollments),e}function v(){r.perform_group_sync=!1,r.perform_enrollment_updates_on_sync=!1,r.perform_sync_confirmed=!1}e.breadcrumbs=t,r.maxFileSize=function(){return"10MB"},r.acceptedFiles=function(){return".csv,.txt"},r.$watch("batchUpload",function(e){e&&(r.batchUpload=e)}),r.$watchCollection("groupsSelectedArray",function(){r.groupsSelectedValue=_.map(r.groupsSelectedArray,function(e){return e.id})}),r.$watchCollection("coursesSelectedArray",function(){r.coursesSelectedValue=_.map(r.coursesSelectedArray,function(e){return e.id})}),r.$watch("add_to_groups",function(){r.add_to_groups?v():(r.groupsSelectedArray=[],r.groupsSelectedValue="")}),r.$watch("perform_group_sync",function(){r.perform_group_sync?(r.update_existing_users=!0,r.add_to_groups=!1,r.enroll_to_courses=!1):v()}),r.$watch("enroll_to_courses",function(){r.enroll_to_courses?v():(r.coursesSelectedArray=[],r.coursesSelectedValue="")}),r.showPopUpMessage=function(e){d.notify("",e)}}angular.module("lu").controller("UsersBatchUploadController",e),e.$inject=["$scope","LupJobFactory","$rootScope","LupHelper","StorageFactory","Upload","s3HelperFactory","$timeout","BatchImportFactory","GroupsFactory","CourseFactory","$luPopover","$window"]}(),function(){"use strict";function e(r,e,t,o,n,a,i){var t=t.get(),s=new a;r.user=t.user.attributes,r.custom_data_definitions=t.custom_data_definitions,r.name_is_mandatory=t.name_is_mandatory,r.username_required=t.username_is_mandatory&&!r.user.username,r.can_update_name=t.can_update_name,r.hide_skip=t.hide_skip,r.welcome_message=t.welcome_message||null,r.Helper=o,r.save=function(e){r.can_update_name||(r.user.first_name=void 0,r.user.last_name=void 0);c({user:r.user,custom_data:JSON.stringify(r.custom_data),skipped:!1})},r.cancel=function(){c({user:{id:r.user.id},skipped:!0})},n.accountFormDirty=!1,r.custom_data={},r.readOnlyFields=!1,r.adminView=!1,r.ignoreMandatory=!1,r.addValueToCustomData=function(e){var t=r.custom_data_definitions[e].id;r.custom_data[t]&&!r.custom_data[t].invalid||l(e);var n=r.choiceSelectPlaceholder.value;r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?r.custom_data[t].values=n:r.custom_data[t].values.push(n);r.choiceSelectPlaceholder.value="",function(e,t){var n=r.custom_data_definitions[t].predefined_values.indexOf(e);i(function(){r.custom_data_definitions[t].predefined_values.splice(n,1)},0)}(n,e)},r.removeValueFromCustomDataList=function(e,t){var n=r.custom_data_definitions[t].id,o=r.custom_data[n].values[e];r.custom_data[n].values.splice(e,1),r.custom_data_definitions[t].predefined_values.push(o),r.account_form.$setDirty()},r.resetCustomDataValue=function(e){var t=r.custom_data_definitions[e].id;r.custom_data_definitions[e].predefined_values.push(r.custom_data[t].values),r.custom_data[t].values=null,r.account_form.$setDirty()},r.addAllToCustomData=function(e){var t=r.custom_data_definitions[e].id;r.custom_data[t]||l(e);r.custom_data[t].values=r.custom_data[t].values.concat(r.custom_data_definitions[e].predefined_values),r.custom_data_definitions[e].predefined_values=[],r.account_form.$setDirty()},r.choiceSelectPlaceholder={value:""},r.fullWidthCustomData=!0,r.submitInProgress=!1,r.custom_data_definitions&&r.custom_data_definitions.length&&r.custom_data_definitions.forEach(function(e){var t=e.predefined_values?e.predefined_values.split(","):[];e.predefined_values=t});t=[{title:o.showMessage("lup.breadcrumbs.users.complete_your_profile"),url:"/users/"+r.user.id+"/complete-profile"}];function l(e){var t=r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?null:[];r.custom_data[r.custom_data_definitions[e].id]={values:t,type:r.custom_data_definitions[e].field_type,invalid:!1}}function c(e){!0!==r.submitInProgress&&(r.submitInProgress=!0,s.completeProfile(e).then(function(e){r.submitInProgress=!1,s.data.redirect_url&&(window.location=s.data.redirect_url)}).finally(function(){r.submitInProgress=!1}))}e.breadcrumbs=t,r.$watch(function(){return n.accountFormDirty},function(e,t){e&&(r.account_form.$setDirty(),n.accountFormDirty=!1)})}angular.module("lu").controller("UsersCompleteProfileController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","UsersFactory","$timeout"]}(),function(){"use strict";function e(r,e,t,o,n,a,i){var s=new a,t=t.get();r.user=t.user.attributes,r.custom_data_definitions=t.custom_data_definitions,r.custom_data=JSON.parse(t.custom_data),r.Helper=o,r.save=function(e){var t={custom_data:JSON.stringify(r.custom_data),is_mandatory:function(){var t={};return _.each(r.custom_data_definitions,function(e){t[e.id]=e.is_mandatory}),t}()};e.$dirty&&s.updateCustomUserData(t,r.user.id).then(function(e){n.location="/users/"+r.user.id})},r.cancel=function(){n.location="/users/"+r.user.id},n.accountFormDirty=!1,r.readOnlyFields=!1,r.adminView=!0,r.ignoreMandatory=!0,r.addValueToCustomData=function(e){var t=r.custom_data_definitions[e].id;r.custom_data[t]&&!r.custom_data[t].invalid||l(e);var n=r.choiceSelectPlaceholder.value;r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?r.custom_data[t].values=n:r.custom_data[t].values.push(n);r.choiceSelectPlaceholder.value="",function(e,t){var n=r.custom_data_definitions[t].predefined_values.indexOf(e);i(function(){r.custom_data_definitions[t].predefined_values.splice(n,1)},0)}(n,e)},r.removeValueFromCustomDataList=function(e,t){var n=r.custom_data_definitions[t].id,o=r.custom_data[n].values[e];r.custom_data[n].values.splice(e,1),r.custom_data_definitions[t].predefined_values.push(o),r.custom_data_form.$setDirty()},r.resetCustomDataValue=function(e){var t=r.custom_data_definitions[e].id;r.custom_data_definitions[e].predefined_values.push(r.custom_data[t].values),r.custom_data[t].values=null,r.custom_data_form.$setDirty()},r.addAllToCustomData=function(e){var t=r.custom_data_definitions[e].id;r.custom_data[t]||l(e);r.custom_data[t].values=r.custom_data[t].values.concat(r.custom_data_definitions[e].predefined_values),r.custom_data_definitions[e].predefined_values=[],r.custom_data_form.$setDirty()},r.choiceSelectPlaceholder={value:""},r.ariaLabel=o.showMessage("lup.sqsso.custom_data"),r.ariaLabelSide=o.showMessage("lup.a11y.users_groups_aside"),r.custom_data_definitions&&r.custom_data_definitions.length&&r.custom_data_definitions.forEach(function(e){var t=e.predefined_values?e.predefined_values.split(","):[];e.predefined_values=t});t=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:r.user.display_name,url:"/users/"+r.user.id},{title:o.showMessage("lup.breadcrumbs.users.custom_data"),url:"users/"+r.user.id+"/custom-data"}];function l(e){var t=r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?null:[];r.custom_data[r.custom_data_definitions[e].id]={values:t,type:r.custom_data_definitions[e].field_type,invalid:!1}}e.breadcrumbs=t,r.$watch(function(){return n.accountFormDirty},function(e,t){e&&(r.custom_data_form.$setDirty(),n.accountFormDirty=!1)})}angular.module("lu").controller("UsersCustomDataController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","UsersFactory","$timeout"]}(),function(){"use strict";function e(o,n,e,t,r,a,i,s,l,c,u,d,p,_){var m=new s,f=t.get();n.EnrollmentHelper=r,n.EnrollmentComponentHelper=a,n.review=null,f.review&&(n.review=f.review.attributes),n.showDetails=!0,n.LupHelper=i,n.sidebarNav=1,n.enrollment=f.enrollment.attributes,n.enrollment_components=f.enrollment_components.data,n.can_mark_complete=f.can_mark_complete,n.allows_score_updates=f.allows_score_updates,n.user=f.user.attributes,n.is_admin=f.is_admin,n.is_instructor=f.is_instructor,n.is_manager=f.is_manager,n.canMarkCompleted=g,n.markComplete=function(n){{n.component_type_id!=i.componentTypes.scorm||n.mastery_score?u.open({templateUrl:"/tc/courses/mark-enrollment-component-complete.html",controller:"MarkEnrollmentComponentCompleteController",size:"md",resolve:{enrollment_component:function(){return n},user_label:function(){return i.displayName(n)},module_label:function(){return n.title},markCompleteData:function(){return d.get("/markcompletes/new_ec.json",{params:{ecid:n.id}})}}}).result.then(function(e){e.action&&"close"!=e.action&&o.location.reload()}):l.confirm(i.showMessage("lup.confirm"),i.showMessage("markcompletes.are_you_sure")).then(function(e){var t={ecid:n.id};d.post("/markcompletes/create_ec.json",t).success(function(e){o.location.reload()}).error(function(e){})})}},n.canEditScore=h,n.canResetAttempts=b,n.editScore=function(e){u.open({templateUrl:"/tc/courses/edit-enrollment-component-score.html",controller:"EditEnrollmentComponentScoreController",size:"md",resolve:{user_label:function(){return i.displayName(e)},module_label:function(){return e.title},enrollment_component:function(){return d.get("/enrollment_components/:enrollment_component_id/edit.json".replace(/:enrollment_component_id/,e.id))}}}).result.then(function(e){e.action&&"close"!=e.action&&o.location.reload()})},n.resetAttempts=function(e){var t={enrollment_component_id:e.id,enrollment_id:e.enrollment_id};l.confirm(I18n.t("lup.confirm"),I18n.t("courses.are_you_sure_you_want_to_reset_attempts")).then(function(e){d.post("/enrollment_components/reset_attempts.json",t).success(function(e){o.location.reload()}).error(function(e){o.location.reload()})})},n.showModuleActions=function(e){return g(e)||h(e,n.allows_score_updates)||b(e)},n.enrollmentStatuses=n.LupHelper.enrollmentStatuses,n.componentTypes=n.LupHelper.componentTypes,o.enrollmentComponentListFormDirty=!1,n.save=function(e){_.saveBypassSequenceSettings(n.changedComponentsArray)},n.cancel=function(){o.location.reload()},n.changeBypassSequencing=function(e){var t=!e.override_sequencing,t={id:e.id,override_sequencing:t};n.changedComponentsArray.push(t)},n.showBypassSequencing=function(e){return f.showBypassSequencing&&e.enrollment_component_status_id==n.enrollmentStatuses.failed&&!(e.component_type_id===n.componentTypes.session||e.component_type_id===n.componentTypes.page)},n.changedComponentsArray=[],n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e};a=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:n.user.display_name,url:"/users/"+n.user.id},{title:I18n.t("lup.breadcrumbs.users.enrollments"),url:"/users/"+n.user.id+"/enrollments"},{title:n.enrollment.name,url:"/users/"+n.user.id+"/enrollments/"+n.enrollment.id}];function g(e){return n.EnrollmentComponentHelper.canMarkCompleted(e,n.can_mark_complete)}function h(e){return n.EnrollmentComponentHelper.canEditScore(e,n.allows_score_updates,n.is_admin)}function b(e){return n.EnrollmentComponentHelper.canResetAttempts(e,n.is_admin,n.is_instructor,n.is_manager_with_instructors_permissions,n.is_manager)}e.breadcrumbs=a,n.messagingEnabled=function(){return!1},e.$on("destroyEnrollment",function(){n.enrollment.learning_path_name&&n.enrollment.lp_published_status_id!==i.publishedStatuses.deleted?i.showTip("learningpaths.unenroll_warning_user_was_enrolled_via_lp",{lp_name:n.enrollment.learning_path_name}):l.confirm(I18n.t("lup.confirm"),I18n.t("enrollments.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){m.unenroll(n.enrollment.id).then(function(){o.location="/users/"+n.enrollment.user_id+"/enrollments"})})}),e.$on("downloadCertificate",function(){var e=new c,t={typeId:i.lupJobTypes.downloadCertificate,enrollment_id:n.enrollment.id,for_course:!0,user_id:n.enrollment.user_id};e.initiateJob(t)})}angular.module("lu").controller("UsersEnrollmentContentController",e),e.$inject=["$window","$scope","$rootScope","StorageFactory","EnrollmentHelper","EnrollmentComponentHelper","LupHelper","EnrollmentFactory","$luPopover","LupJobFactory","$modal","$http","$q","EnrollmentComponentSettingsFactory"]}(),function(){"use strict";function e(o,n,e,t,r,a,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y){var M=e.get(),e=M.items,S=M.user.attributes,C=new a,A=new _,L=new w,$=new g,T=new y,z=3,y=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:S.display_name,url:"/users/"+S.id},{title:I18n.t("lup.breadcrumbs.users.enrollments"),url:"/users/"+S.id+"/enrollments"}];function x(){t.merge({filter_by:o.filter_by});var e={};e.params=t.get(),C.getUserEnrollments(S.id,e).then(function(){o.items=C.data.items,o.enrollment_approvals=C.data.enrollment_approvals,o.number_enrolled=C.data.counts.attributes.number_enrolled,o.number_completed=C.data.counts.attributes.number_completed,o.number_learning_paths=C.data.counts.attributes.number_learning_paths,o.number_pending_review=C.data.counts.attributes.number_pending_review,o.number_external_trainings=C.data.counts.attributes.number_external_trainings,o.number_of_requests=C.data.counts.attributes.number_of_requests,o.triggerFocusOnMain=!0})}function P(e){return o.filter_by==z?s.lpPercentageComplete(e):e.percentage_complete?e.percentage_complete:0}n.breadcrumbs=y,o.items=e,o.user=S,o.loadData=x,o.getPercentageComplete=P,o.showDueDates=function(e){return 1===e.has_due_date_set||!!e.calculated_due_date},o.getProgressInModules=function(e){return Math.round(P(e)/100*e.num_modules)+"/"+e.num_modules},o.filter_by=1,M.filter_by&&(o.filter_by=M.filter_by),o.EnrollmentHelper=s,o.Helper=r,o.number_enrolled=M.counts.attributes.number_enrolled,o.number_completed=M.counts.attributes.number_completed,o.number_learning_paths=M.counts.attributes.number_learning_paths,o.number_pending_review=M.counts.attributes.number_pending_review,o.number_external_trainings=M.counts.attributes.number_external_trainings,o.number_of_requests=M.counts.attributes.number_of_requests,o.credits_panel_name=M.credits_panel_name,o.can_unenroll_learner_from_course=M.can_unenroll_learner_from_course,o.allows_score_updates=M.allows_score_updates,o.can_mark_complete=M.can_mark_complete,o.can_set_due_dates=M.can_set_due_dates,o.is_admin=M.is_admin,o.is_manager_and_can_enroll=M.is_manager_and_can_enroll,o.show_requests_filter=M.show_requests_filter,o.enrollment_approvals=M.enrollment_approvals,o.approval_reference=M.approval_reference,o.canMarkComplete=function(e){return o.EnrollmentHelper.canMarkCompleted(e,o.can_mark_complete)},o.canEditScore=function(e){return o.EnrollmentHelper.canEditScore(e,o.allows_score_updates,o.is_admin)},o.filterList=function(e){t.merge({filter_by:e}),o.filter_by=e,o.triggerFocusOnMain=!1,o.loadData()},o.canSetEnrollmentExpiry=function(e,t){return!e.license_date_expires&&t},o.showProgressBar=function(e){return 2==e.status_id&&1<e.num_modules},o.setDueDate=function(e,t){c.open({templateUrl:"/tc/users/set_enrollment_due_date_modal.html",controller:"UsersSetEnrollmentDueDateController",size:"md",resolve:{enrollment:function(){return e},date_format:function(){return t},user:function(){return r.displayName(S)}}})},o.setExpiry=function(e,t){c.open({templateUrl:"/tc/users/set_enrollment_expiry_date_modal.html",controller:"UsersSetEnrollmentExpiryController",size:"md",resolve:{enrollment:function(){return e},date_format:function(){return t},user:function(){return r.displayName(S)}}}).result.then(function(e){e&&"save"===e.action&&o.loadData()})},o.linkTo=function(e,t,n){i.location="/"+e+"/"+t+"/"+n},o.downloadCertificate=function(e,t){var n=new u,e={typeId:r.lupJobTypes.downloadCertificate,enrollment_id:e.id,for_course:t,user_id:e.user_id};n.initiateJob(e)},o.viewEnrollmentDetails=function(e){i.location="/users/"+o.user.id+"/enrollments/"+e.id},o.destroyEnrollment=function(t){t.learning_path_name?r.showTip("learningpaths.unenroll_warning_user_was_enrolled_via_lp",{lp_name:t.learning_path_name}):l.confirm(I18n.t("lup.confirm"),I18n.t("enrollments.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){A.unenroll(t.id).then(function(){x()})})},o.portal_has_children=M.portal_has_children,o.group_membership_id=M.group_membership_id,o.markComplete=function(n){c.open({templateUrl:"/tc/courses/mark-enrollment-complete.html",controller:"MarkEnrollmentCompleteController",size:"md",resolve:{enrollment:function(){return n},user_label:function(){return r.displayName(o.user)},course_label:function(){return n.name},markCompleteData:function(){return p.get("/markcompletes/new.json",{params:{erid:n.id}})},learning_credits:function(){return e=n.course_id,t=b.defer(),p.get("/available_credits.json",{params:{course_id:e}}).success(function(e){t.resolve(e)}).error(function(){t.reject("Failed to get credits.")}),t.promise;var e,t}}}).result.then(function(e){e.action&&"close"!=e.action&&o.loadData()})},o.editScore=function(e){c.open({templateUrl:"/tc/courses/edit-enrollment-score.html",controller:"EditEnrollmentScoreController",size:"md",resolve:{user_label:function(){return r.displayName(o.user)},course_label:function(){return e.name},enrollment:function(){return p.get("/enrollments/:enrollment_id/edit.json".replace(/:enrollment_id/,e.id))}}}).result.then(function(e){e.action&&"close"!=e.action&&o.loadData()})},o.unassignLearningPath=function(t){l.confirm(I18n.t("lup.confirm"),I18n.t("learningpaths.are_you_sure_you_want_to_unenroll_this_user")).then(function(e){m.unassignLP(t.id).then(function(){o.loadData(),o.number_learning_paths=o.number_learning_paths-1,0===o.number_learning_paths&&n.$broadcast("luSummaryFilterLayout:update")})})},o.viewLPDetails=function(e){e.is_historical?r.showTip("learningpaths.see_other_version_l"):i.location="/users/"+o.user.id+"/enrollments/"+e.id+"/lp-details"},o.showNotes=function(e){l.notify("",e||r.showMessage("markcompletes.mark_complete_window"),{windowClass:"wide-modal"})},o.displayEnrollmentDate=function(e){var t={label:r.showMessage("lup.courses.due_date"),value:r.showMessage("lup.set_date"),link:0};e.course_access_expires_at?(t.label=r.showMessage("lup.courses.expiry_date"),t.value=e.course_access_expires_at,t.link=1):e.calculated_due_date?(t.label=r.showMessage("lup.courses.due_date"),t.value=e.calculated_due_date,t.link=2):e.date_lastaccessed&&(t.label=r.showMessage("lup.dashboard.last_entered"),t.value=e.date_lastaccessed,t.link=-1);return t},o.displayStartEndDate=function(e){var t={label:r.showMessage("enrolled"),value:e.created_at};e.date_completed&&(t.label=r.showMessage("lup.dashboard.date_completed"),t.value=e.date_completed);return t},o.showExpiryText=function(e){return e.course_access_expires_at?r.showMessage("lup.courses.edit_expiry_date"):r.showMessage("lup.courses.set_expiry_date")},o.showDueDateText=function(e){return e.calculated_due_date?r.showMessage("lup.courses.edit_due_date"):r.showMessage("lup.courses.set_due_date")},o.isLPInProgress=function(e){return e.status_id===r.enrollmentStatuses.in_progress||e.status_id===r.enrollmentStatuses.pending_review},o.toggleSelection=function(e){var t=o.selection.indexOf(e),n=h("filter")(o.enrollment_approvals.data,{id:e},!0)[0];-1<t?o.selection.splice(t,1):o.selection.push(e);o.$broadcast("itemSelect",{message:n,action:-1<t?"deselect":"select"})},o.approveRequest=function(t){l.confirm(k,E).then(function(e){f.approveEnrollmentRequest(t.id).then(function(e){x()})})},o.rejectRequest=function(t){l.confirm(O,I).then(function(e){f.rejectEnrollmentRequest(t.id).then(function(e){x()})})},o.approveRequests=function(){l.confirm(k,E).then(function(e){f.approveEnrollmentRequests(o.selection).then(function(e){o.approval_reference=e.data.job_reference,o.selection=[],D()})})},o.rejectRequests=function(){l.confirm(O,I).then(function(e){f.rejectEnrollmentRequests(o.selection).then(function(e){o.approval_reference=e.data.job_reference,o.selection=[],D()})})},o.cancel=function(){n.$broadcast("selectAll:deSelectAll")},o.triggerFocusOnMain=!1,o.ariaLabel=r.showMessage("lup.a11y.users_filter_enrollments_main"),o.ariaLabelSide=r.showMessage("lup.a11y.users_filter_enrollments_aside"),o.activeCourseDDM={},o.toggled=function(e,t){o.activeCourseDDM[t]=e},o.selection=[],o.approval_reference&&D(),o.auto_assign_reference=M.auto_assign_reference,o.auto_assign_reference&&N(),o.viewCredits=function(e,t,n){t={enrollment_id:e,user_id:n,for_course:t};r.viewLearnersCredits(t)},o.requestsSortOptions=[{label:r.showMessage("lup.filters.request_date_asc"),value:"request_date.asc",default:!0},{label:r.showMessage("lup.filters.request_date_desc"),value:"request_date.desc"},{label:r.showMessage("lup.filters.user_name_az"),value:"user_name.asc"},{label:r.showMessage("lup.filters.user_name_za"),value:"user_name.desc"},{label:r.showMessage("lup.filters.course_name_az"),value:"course_name.asc"},{label:r.showMessage("lup.filters.course_name_za"),value:"course_name.desc"}],n.$on("sendMessage",function(){i.location="/messages/new"}),n.$on("changeMembershipType",function(){i.location="/users/"+o.user.id+"/user-settings"}),n.$on("enrollUser",function(){i.location="/enrollments/new?user_id=:user_id".replace(/:user_id/,o.user.id)}),n.$on("deleteUser",function(){v.deleteUser({id:o.user.id,gm:o.user.portal_membership_id},o.portal_has_children,function(){i.location="/users"})}),n.$on("addExternalTraining",function(){i.location="/users/:user_id/external_training_records/admin_new".replace(/:user_id/,o.user.id)}),o.$watch(function(){return o.filter_by},function(e,t){i.document.getElementById("addExternalCredits")&&(o.filter_by&&5===o.filter_by?i.document.getElementById("addExternalCredits").style.display="block":i.document.getElementById("addExternalCredits").style.display="none")}),o.getA11Ytranslation=function(){var e=" "+r.showMessage("lup.a11y.page");return o.items&&o.items.meta.page&&(e+=" "+o.items.meta.page),e+=" "+r.showMessage("lup.a11y.loaded"),o.filter_by==r.dashboard_filters.enrolled_courses?r.showMessage("lup.dashboard.enrolled_courses")+e:o.filter_by==r.dashboard_filters.completed_courses?r.showMessage("lup.dashboard.completed_courses")+e:o.filter_by==r.dashboard_filters.pending_review_courses?r.showMessage("reports.learning_paths")+e:o.filter_by==r.dashboard_filters.learning_paths?r.showMessage("course_assignments.pending_review")+e:o.filter_by==r.dashboard_filters.external_trainings?o.credits_panel_name+e:o.filter_by==r.dashboard_filters.enrollment_requests?r.showMessage("lup.enrollment_approvals.enrollment_requests")+e:""},o.returnStatusLabel=function(e){return e==r.external_training_record_statuses.pending_review?r.showMessage("dashboard.external_training_pending_review"):e==r.external_training_record_statuses.approved?r.showMessage("dashboard.external_training_approved"):e==r.external_training_record_statuses.rejected?r.showMessage("dashboard.external_training_rejected"):void 0},o.returnExternalTrainingImageClass=function(e){return e==r.external_training_record_statuses.pending_review?"pending":e==r.external_training_record_statuses.approved?"approved":e==r.external_training_record_statuses.rejected?"rejected":void 0},o.returnValueOrNa=function(e){return e||r.showMessage("external_training_record.na")},o.sessionChooser=function(e){i.location="/enrollments/"+e+"/admin_choose_session/"+S.id};var k=r.showMessage("lup.enrollment_approvals.confirm_approve_enrollment_title"),E=r.showMessage("lup.enrollment_approvals.confirm_approve_enrollment_message"),O=r.showMessage("lup.enrollment_approvals.confirm_reject_enrollment_title"),I=r.showMessage("lup.enrollment_approvals.confirm_reject_enrollment_message");function D(){var e={hideSpinner:!0};return e.url="/download_jobs/"+o.approval_reference+"/status.json",$.get("download_jobs",e,o.approval_reference).then(function(){$.data.job.status_id!==r.lupJobStatuses.completed?o.timeoutPromise=d(function(){D()},2e3):(o.approval_reference=null,x())})}function N(){L.pingForRulesProgress(o.auto_assign_reference).then(function(e){e!==r.lupJobStatuses.completed?d(function(){N()},2e3):o.auto_assign_reference=null})}function F(){l.confirm(r.showMessage("lup.salesforce.sales_force_rules.apply_process.action"),r.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.are_you_sure")).then(function(e){T.runSFRules(o.user.id).then(function(e){o.sfar_reference=e.data.job_reference})})}n.$on("runTheRules",function(){o.auto_assign_reference?l.notify("",r.showMessage("lup.auto_assign_rules.apply_process.in_progress")):l.confirm(r.showMessage("lup.auto_assign_rules.apply_process.action"),r.showMessage("lup.auto_assign_rules.apply_process.are_you_sure")).then(function(e){L.runTheRules(o.user.id).then(function(e){o.auto_assign_reference=e.data.job_reference,N()})})}),o.$on("runSFRules",function(){o.sfar_reference?T.pingForProgress(o.sfar_reference).then(function(e){return e==r.lupJobStatuses.completed?(o.sfar_reference=null,void F()):void l.notify("",r.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.in_progress"))}):F()})}angular.module("lu").controller("UsersUserEnrollmentsController",e),e.$inject=["$scope","$rootScope","StorageFactory","paramsService","LupHelper","UsersFactory","$window","EnrollmentHelper","$luPopover","$modal","LupJobFactory","$timeout","$http","EnrollmentFactory","learnUponLearningPath","EnrollmentApprovalFactory","learnUponApi","$filter","$q","UserActionService","AutoAssignRulesFactory","SalesForceAssignRulesFactory"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l,c,u,d,p,_){var e=e.get(),m=(new r,new l),f=new u,g=new _;t.LupHelper=n,t.groupsSelectedArray=e.users_groups.data,t.user=e.user.attributes,t.fetchGroups=p.fetchGroups,t.fetchManagedGroups=p.fetchGroups,t.groupsSearch="",t.compareGroups=function(e,t){return!!(angular.isDefined(e)&&angular.isDefined(e.id)&&angular.isDefined(t)&&angular.isDefined(t.id))&&e.id===t.id},t.groupsTrackerFn=function(e,t,n){return e.id},t.showSaveOnChange=function(){t.forceShowSave=!0},t.portalHasChildren=e.portal_has_children,t.user_is_manager=e.user_is_manager,t.current_user_is_manager=e.current_user_is_manager,t.can_move_groups=e.can_move_groups,t.isManager=function(){return!!t.user_is_manager},t.save=function(e){{e.$valid&&(e={portal_membership_id:t.user.portal_membership_id,groups:t.groupsSelectedArray,managed_groups:t.managedGroupsSelectedArray},m.updateGroups(t.user.id,e).then(function(){t.forceShowSave=!1}))}},t.cancel=function(){t.forceShowSave=!1},t.ariaLabel=n.showMessage("lup.a11y.users_groups_main"),t.ariaLabelSide=n.showMessage("lup.a11y.users_groups_aside"),t.auto_assign_reference=e.auto_assign_reference,t.auto_assign_reference&&h(),i.$on("changeMembershipType",function(){s.location="/users/"+t.user.id+"/user-settings"}),i.$on("enrollUser",function(){s.location="/enrollments/new?user_id=:user_id".replace(/:user_id/,t.user.id)}),i.$on("deleteUser",function(){c.deleteUser({id:t.user.id,gm:t.user.portal_membership_id},t.portalHasChildren,function(){s.location="/users"})}),t.managedGroupsSelectedArray=e.groups_managing.data,t.managedGroupsSearch="";e=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:t.user.display_name,url:"/users/"+t.user.id},{title:I18n.t("lup.breadcrumbs.users.groups"),url:"/users/"+t.user.id+"/groups"}];function h(){f.pingForRulesProgress(t.auto_assign_reference).then(function(e){e!==n.lupJobStatuses.completed?d(function(){h()},2e3):t.auto_assign_reference=null})}function b(){a.confirm(n.showMessage("lup.salesforce.sales_force_rules.apply_process.action"),n.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.are_you_sure")).then(function(e){g.runSFRules(t.user.id).then(function(e){t.sfar_reference=e.data.job_reference})})}i.breadcrumbs=e,i.$on("runTheRules",function(){t.auto_assign_reference?a.notify("",n.showMessage("lup.auto_assign_rules.apply_process.in_progress")):a.confirm(n.showMessage("lup.auto_assign_rules.apply_process.action"),n.showMessage("lup.auto_assign_rules.apply_process.are_you_sure")).then(function(e){f.runTheRules(t.user.id).then(function(e){t.auto_assign_reference=e.data.job_reference,h()})})}),t.$on("runSFRules",function(){t.sfar_reference?g.pingForProgress(t.sfar_reference).then(function(e){return e==n.lupJobStatuses.completed?(t.sfar_reference=null,void b()):void a.notify("",n.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.in_progress"))}):b()})}angular.module("lu").controller("UsersUserGroupsController",e),e.$inject=["$scope","StorageFactory","LupHelper","$http","GroupsFactory","$luPopover","$rootScope","$window","UsersFactory","UserActionService","AutoAssignRulesFactory","$timeout","restrictByGroupService","SalesForceAssignRulesFactory"]}(),function(){"use strict";function e(o,e,t,n,r,a,i,s,l,c,u){var d=new n,p=new r;function m(e){u.open({templateUrl:"/tc/users/set_password_for_sf_users.html",controller:"UsersSetSfPasswordController",size:"md",resolve:{users:function(){return e}}})}function f(){var t=[];return _.each(o.selection,function(e){e=e.split("&");t.push({email:e[1],id:e[0]})}),t}function g(){o.loadData(),o.selection.length=0}o.users=e.getKey("users"),o.LupHelper=s,o.searchText=null,o.selection=[],o.processingProgress=0,o.toggleSelection=function(e){var t=o.selection.indexOf(e),n=c("filter")(o.users.data,{id:e.split("&")[0]},!0)[0];-1<t?o.selection.splice(t,1):o.selection.push(e);1<o.selection.length?o.usersSelectedString=s.showMessage("lup.salesforce.multiple_users_selected"):o.usersSelectedString=s.showMessage("lup.salesforce.single_user_selected");o.$broadcast("itemSelect",{message:n,action:-1<t?"deselect":"select"})},o.createSFUsers=function(){o.selection&&(o.selection.length<=s.maxNumberOfSalesforceImports?m(f()):s.showTip("lup.salesforce.util.import_max_num",{max_num:s.maxNumberOfSalesforceImports}))},o.createSFUser=function(e){m([{email:e.email,id:e.id}])},o.inviteSFUsers=function(){o.selection&&(o.selection.length<=s.maxNumberOfSalesforceImports?d.inviteSfUsers({users:f()}).then(function(){g()},function(){g()}):s.showTip("lup.salesforce.util.import_max_num",{max_num:s.maxNumberOfSalesforceImports}))},o.inviteSFUser=function(e){d.inviteSfUsers({users:[{email:e.email,id:e.id}]}).then(function(){g()},function(){g()})},o.userNotImported=function(e){return 0==e.luUserId||!e.pm_id},o.doSelectionBy=function(e){return e.id+"&"+e.email},o.usersSelectedString=s.showMessage("lup.salesforce.single_user_selected"),o.ariaLabelSide=s.showMessage("lup.a11y.sf_contacts.salesforce_side_info"),o.ariaLabel=s.showMessage("lup.a11y.sf_contacts.contacts_list_main"),o.activeCourseDDM={},o.toggled=function(e,t){o.activeCourseDDM[t]=e},i.$on("batchUpload",function(){l.location="/batch-upload?sfc=1"}),o.loadData=function(){var e={};e.params=t.get(),d.getSFContactList(e).then(function(){o.users=d.data.users})},i.$on("createUsersFinished",function(e,t){g(),t.status.delayed&&(t=t.status.delayed.job_reference,o.processingProgress=0,o.processingEnrollments=!0,p.pingForProgress(t,function(e){o.processingProgress=e},function(e){o.processingEnrollments=!1,o.jobTitle=e.flash_msg,o.jobErrors=e.job_errors,(o.jobResponse=e).has_errors||a.onSuccess({success:e.flash_msg})}))})}angular.module("lu").controller("UsersImportSfContactsController",e),e.$inject=["$scope","StorageFactory","paramsService","UsersFactory","LupJobFactory","notifyFactory","$rootScope","LupHelper","$window","$filter","$modal"]}(),function(){"use strict";function e(n,e,o,t,r,a,i,s,l,c,u,d,p,_,m,f,g){var h=new t,b=new m;n.users=e.getKey("users"),n.portal_has_children=e.getKey("portal_has_children"),n.haveMembershipTypesEnabled=r.have_membership_types_enabled,n.is_admin=e.getKey("is_admin"),n.types=e.getKey("portal_membership_types").data,n.can_delete_users=e.getKey("can_delete_users"),n.proxy_user_enabled=e.getKey("proxy_user_enabled"),n.scheduled_upload_allowed=e.getKey("scheduled_upload_allowed"),n.scheduled_upload_activated=e.getKey("scheduled_upload_activated"),n.LupHelper=a,n.destroy=function(e,t){_.deleteUser({id:e.user_id,gm:e.id},t,function(){var e;1==n.users.data.length&&(e=a.returnPreviousPage(n.users.meta.page),o.merge({page:e})),n.loadData()})},n.impersonateUser=function(e){_.impersonateUser(e)},n.currentUserId=e.getKey("current_user_id"),n.loadData=S,n.showDeleteOption=function(e){return!a.userIsLocked(e.tos_status_code)&&n.can_delete_users&&e.user_id!==n.currentUserId&&e.portal_membership_type_id!==a.groupMembershipTypes.admin},n.showImpersonateOption=function(e){return n.proxy_user_enabled&&n.is_admin&&e.portal_membership_type_id<a.groupMembershipTypes.admin},n.getCurrentPageA11Y=function(e){return a.showMessage("courses.users")+" "+a.showMessage("lup.a11y.page")+" "+e+" "+a.showMessage("lup.a11y.loaded")};var v=f.getJsonFromCookie("lu_filters","user_filters");n.cookieExists=f.cookieExists("lu_filters","user_filters");var w=e.getKey("ssl_enabled");!function(){n.mergeSearch=!0,n.cookieExists&&o.set(v);n.users||setTimeout(function(){g.showGroup("luSpinnerGlobal"),S()},0)}(),r.staffAccessGrantsAllowed=e.getKey("staff_access_grants_allowed"),n.groupTaIdentifier="taGroupFilter";m=d.userStatuses;if(e.getKey("delete_users_enabled")&&m.push({id:2,title:a.showMessage("lup.user_deletion.account_deletion_requested")}),n.userStatuses=m,n.userTypes=d.userTypes,n.association_membership_types=e.getKey("association_membership_types"),n.fetchGroups=d.fetchGroups,n.ariaLabel=a.showMessage("lup.a11y.users_filter_options_main"),n.ariaLabelSide=a.showMessage("lup.a11y.users_filter_options_aside"),n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.cookieExists)for(var y in v)void 0!==v[y]&&"filterGroups"!=y&&(n[y]=v[y]);else n.search=null,n.advancedSearch=null,n.filterStatus="",n.filterGroups=[],n.filterGroupIds=[],n.filterType="",n.filterCreatedBefore="",n.filterCreatedAfter="",n.filterMembershipType="",n.sort=null;function M(){var e=new l,t=o.get(),t={include_pending:!1,typeId:a.lupJobTypes.exportUsersToExcel,search:t.search,advancedSearch:t.advancedSearch,sort:t.sort,filterGroups:t.filterGroups,filterCreatedAfter:t.filterCreatedAfter,filterCreatedBefore:t.filterCreatedBefore,filterType:t.filterType,filterStatus:t.filterStatus,filterMembershipType:t.filterMembershipType};e.initiateJob(t)}function S(){var e={};e.params=o.get(),f.setCookieValue("lu_filters","user_filters",e.params,a.session.duration,w),h.getList(e).then(function(){if(g.hideGroup("luSpinnerGlobal"),n.users=h.data.users,h.data.groups){n.filterGroups=h.data.groups,n.filterGroupIds=[];for(var e=0;e<h.data.groups.length;e++)n.filterGroupIds.push(h.data.groups[e].id)}})}n.filteringControl={},n.filterOptions=function(){var e=[{filterName:"filterStatus",value:n.filterStatus},{filterName:"filterGroups",value:n.filterGroupIds.join(",")},{filterName:"filterType",value:n.filterType},{filterName:"filterCreatedBefore",value:n.filterCreatedBefore},{filterName:"filterCreatedAfter",value:n.filterCreatedAfter}];r.have_membership_types_enabled&&e.push({filterName:"filterMembershipType",value:n.filterMembershipType});return e},n.clearFiltering=function(){n.filterStatus="",n.filterGroups=[],n.filterGroupIds=[],n.filterType="",n.filterCreatedBefore="",n.filterCreatedAfter="",n.filterMembershipType="";var e={search:n.search,advancedSearch:n.advancedSearch,sort:n.sort};return r.$broadcast(n.groupTaIdentifier+":CLEAN_QUERY"),r.$broadcast("filterStatus",{status:!1}),o.set(e),void S()},n.groupCustomSelectFn=d.groupCustomSelectFn,n.diplayUsernameOrEmail=function(e){return r.usernames_enabled&&e.username?e.username:e.email},n.available_groups_list=null,e.getKey("available_groups_list")&&(n.available_groups_list=e.getKey("available_groups_list")),r.$on("addUser",function(){s.location="/users/new"}),r.$on("importSFContacts",function(){s.location="/users/import_sf_contacts"}),r.$on("inviteUser",function(){b.showInviteUsersModal(n.types,n.is_admin,n.available_groups_list)}),r.$on("batchUpload",function(){s.location="/batch-upload"}),u(function(){/run=export_to_excel$/.test(s.location)&&M()}),r.$on("exportToExcel",function(){M()}),n.sortOptions=[{label:a.showMessage("lup.filters.name_az"),value:"display_name.ASC",default:!0},{label:a.showMessage("lup.filters.name_za"),value:"display_name.DESC"}],n.$watch("users.meta.page",function(e,t){e!==t&&void 0!==t&&(e=f.setPageNumberOnCookie("lu_filters","user_filters",e,a.session.duration,w),o.set(e))})}angular.module("lu").controller("UsersIndexController",e),e.$inject=["$scope","StorageFactory","paramsService","UsersFactory","$rootScope","LupHelper","$luPopover","$window","LupJobFactory","$modal","$timeout","usersFilteringOptionsService","$http","UserActionService","InviteUsersFactory","CookiesService","spinnerService"]}(),function(){"use strict";function e(n,e,o,r,t,a){var i=new t;n.LupHelper=a,n.activeCourseDDM={},n.toggled=function(e,t){n.activeCourseDDM[t]=e},n.msTeamsDisconnect=function(t,e){return t&&(e=a.showMessage("webinar.settings_ms_teams_disconnect_confirm_rebrand",{name:e}),r.confirm(a.showMessage("lup.confirm"),e).then(function(e){i.msTeamsDisconnect(t).then(function(){o.location="/my-profile/integrations/"})})),!1}}angular.module("lu").controller("Users::IntegrationsIndexController",e),e.$inject=["$scope","$rootScope","$window","$luPopover","WebinarFactory","LupHelper"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=this,p=new i,m=new n;function f(){d.filter_groups=[],d.filter_points_over="",d.filter_points_under="",d.filter_level="",d.filter_next_level="",d.filter_date_from="",d.filter_date_to=""}function g(){var e={};e.params=o.get(),p.getLeaderboard(e).then(function(){d.users=p.data.users})}r.breadcrumbs=[{title:a.showMessage("pagetitles.users"),url:"/users"},{title:a.showMessage("lup.gamification.portal_leaderbord"),url:"/users/leaderboard"}],d.users=t.getKey("users"),d.levels=t.getKey("levels"),d.portal_membership_types=t.getKey("portal_membership_types").data,d.is_admin=t.getKey("is_admin"),d.available_groups_list=null,t.getKey("available_groups_list")&&(d.available_groups_list=t.getKey("available_groups_list")),d.lupHelper=a,d.userPosition=function(e,t){return e.position||10*(d.users.meta.page-1)+t+1},d.fetchGroups=function(e){var t=s.defer();return l.get("/groups.json",{params:{search:e.$query,page:e.$page}}).success(function(e){t.resolve(e.groups.data)}).error(function(){t.reject("Failed to get question pools")}),t.promise},d.fetchUsers=function(e){var t=s.defer();return l.get("/all_users.json",{params:{search:e.$query,include_pending:!1,include_top_admins:!0,exclude_disabled:!0,page:e.$page}}).success(function(e){t.resolve(e.users.data)}).error(function(){t.reject("Failed to get users")}),t.promise},d.filterOptions=function(){return[{filterName:"filterUsers",value:d.filter_users},{filterName:"filterGroups",value:d.filter_groups},{filterName:"filterPointsOver",value:d.filter_points_over},{filterName:"filterPointsUnder",value:d.filter_points_under},{filterName:"filterLevel",value:d.filter_level},{filterName:"filterNextLevel",value:d.filter_next_level},{filterName:"filterDateFrom",value:d.filter_date_from},{filterName:"filterDateTo",value:d.filter_date_to}]},d.clearFiltering=function(){d.filter_users=[],f(),g()},d.replaceEmptyNames=function(e){return e&&e.trim()?e:a.showMessage("lup.users.na")},d.loadData=g,d.clearOtherFilters=f,e.ariaLabel=a.showMessage("lup.a11y.leaderboard_list_main"),e.ariaLabelSide=a.showMessage("lup.a11y.leaderboard_list_aside"),r.staffAccessGrantsAllowed=t.getKey("staff_access_grants_allowed"),d.filter_users=[],d.filter_groups=[],d.filter_points_over="",d.filter_points_under="",d.filter_level="",d.filter_next_level="",d.filter_date_from="",d.filter_date_to="",d.filteringControl={},r.$on("addUser",function(){c.location="/users/new"}),r.$on("importSFContacts",function(){c.location="/users/import_sf_contacts"}),r.$on("batchUpload",function(){c.location="/batch-upload"}),r.$on("inviteUser",function(){m.showInviteUsersModal(d.portal_membership_types,d.is_admin,d.available_groups_list)}),r.$watch(function(){return d.filter_level},function(e,t){e!==t&&(d.filter_next_level=function(t){if("number"!=typeof t)return"";var e=_.indexOf(d.levels.data,_.find(d.levels.data,function(e){return e.achieved_over===t}));return d.levels.data[e+1]?d.levels.data[e+1].achieved_over:""}(e))})}window.angular.module("lu").controller("UsersLeaderboardController",e),e.$inject=["$scope","StorageFactory","InviteUsersFactory","paramsService","$rootScope","LupHelper","UsersFactory","$q","$http","$window","$modal"]}(),function(){"use strict";function e(r,e,t,o,n,a,i,s){var t=t.get(),l=new i;r.LupHelper=o,r.user=t.user.attributes,r.show_ssl_warning=t.show_ssl_warning,r.portal_membership=t.portal_membership.attributes,r.portal_membership_types=t.portal_membership_types.data,r.association_membership_types=t.association_membership_types,r.portal_trust_enabled=t.portal_trust_enabled,r.login_with_usernames=t.login_with_usernames,r.extending_manager_role=t.extending_manager_role,r.trainings_enabled=t.trainings_enabled,r.save=function(e){r.disableButtons=!0,r.sendInvite?(e.$setValidity("emptyPassConfirmValue",!0),e.$setValidity("passwordsDoNotMatch",!0)):(e.$setValidity("emptyPassConfirmValue",o.checkStringExistence(r.user.password_confirmation)),o.checkStringExistence(r.user.password_confirmation)&&e.$setValidity("passwordsDoNotMatch",o.comparePasswords(r.user.password,r.user.password_confirmation)));r.login_with_usernames&&!r.user.email||e.$setValidity("validEmails",r.LupHelper.emailListValidation(r.user.email));e.$dirty&&e.$valid||(r.disableButtons=!1);{e.$dirty&&e.$valid&&(r.portal_membership.portal_membership_type_id=r.groupMembershipTypeList,(e={data:{}}).data.user_create_form=r.user,e.data.portal_membership_form=r.portal_membership,e.data.groups={},r.is_admin?e.data.groups.member=r.groupsSelectedValue:e.data.groups.member=[r.selectedGroup],r.setExpiryDate||(e.data.portal_membership_form.expires_at=null),e.data.groups.manager=r.groupsManagedValue,e.data.send_invite=r.sendInvite,e.data.custom_data=JSON.stringify(r.custom_data),l.createUser(e).then(function(e){r.user_create_form.$setPristine(),window.location=l.data.redirect_url,r.disableButtons=!1},function(e){r.disableButtons=!1}))}},r.cancel=function(){n.location="/users"},r.showPermissionsLink=function(){return!(!(parseInt(r.groupMembershipTypeList)===o.groupMembershipTypes.manager||parseInt(r.groupMembershipTypeList)===o.groupMembershipTypes.instructor||parseInt(r.groupMembershipTypeList)===o.groupMembershipTypes.admin&&parseInt(r.admin_can_access_portal_settings))||r.sendInvite)||(r.showPermissionsText=o.showMessage("lup.users.show_permissions"),r.permissionsVisible=!1)},r.showPermissions=function(){r.permissionsVisible?(r.showPermissionsText=o.showMessage("lup.users.show_permissions"),r.permissionsVisible=!1):(r.showPermissionsText=o.showMessage("lup.users.hide_permissions"),r.permissionsVisible=!0)},r.permissionsVisible=!1,r.showPermissionsText=o.showMessage("lup.users.show_permissions"),r.date=new Date,r.portal_membership.expires_at=moment().format("YYYY-MM-DD"),r.enableGroups=!1,r.groupsSelectedArray=[],r.groupsManagedArray=[],r.fetchGroups=a.fetchGroups,r.fetchManagedGroups=a.fetchGroups,r.portal_membership_types&&r.portal_membership_types[0]&&(r.groupMembershipTypeList=r.portal_membership_types[0].value),r.association_membership_types&&r.association_membership_types[0]&&(r.portal_membership.association_member_type=r.association_membership_types[0].value),r.sendInvite=!r.login_with_usernames,r.enableGroupManagement=!1,r.showManagingOption=function(){return r.managingOptionsVisible=parseInt(r.groupMembershipTypeList)===o.groupMembershipTypes.manager&&!r.sendInvite,r.managingOptionsVisible},r.custom_data_definitions=t.custom_data_definitions,r.custom_data={},r.showCustomData=function(){return r.custom_data_definitions&&0<r.custom_data_definitions.length&&!r.ereq},n.accountFormDirty=!1,r.is_admin=t.is_admin,r.admin_can_access_portal_settings=t.admin_can_access_portal_settings,r.selectedGroup=null,r.readOnlyFields=!1,r.adminView=!0,r.ignoreMandatory=!0,r.addValueToCustomData=function(e){var t=r.custom_data_definitions[e].id;r.custom_data[t]&&!r.custom_data[t].invalid||c(e);var n=r.choiceSelectPlaceholder.value;r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?r.custom_data[t].values=n:r.custom_data[t].values.push(n);r.choiceSelectPlaceholder.value="",function(e,t){var n=r.custom_data_definitions[t].predefined_values.indexOf(e);s(function(){r.custom_data_definitions[t].predefined_values.splice(n,1)},0)}(n,e)},r.removeValueFromCustomDataList=function(e,t){var n=r.custom_data_definitions[t].id,o=r.custom_data[n].values[e];r.custom_data[n].values.splice(e,1),r.custom_data_definitions[t].predefined_values.push(o)},r.resetCustomDataValue=function(e){var t=r.custom_data_definitions[e].id;r.custom_data_definitions[e].predefined_values.push(r.custom_data[t].values),r.custom_data[t].values=null},r.addAllToCustomData=function(e){var t=r.custom_data_definitions[e].id;r.custom_data[t]||c(e);r.custom_data[t].values=r.custom_data[t].values.concat(r.custom_data_definitions[e].predefined_values),r.custom_data_definitions[e].predefined_values=[]},r.choiceSelectPlaceholder={value:""},r.Helper=o,r.disableButtons=!1,r.ariaLabel=o.showMessage("lup.a11y.new_user_creation"),r.ariaLabelSide=o.showMessage("lup.a11y.users_groups_aside"),r.available_groups_list=null,t.available_groups_list&&(r.available_groups_list=t.available_groups_list,r.selectedGroup=r.available_groups_list[0][1]),r.custom_data_definitions&&r.custom_data_definitions.length&&r.custom_data_definitions.forEach(function(e){var t=e.predefined_values?e.predefined_values.split(","):[];e.predefined_values=t});t=[{title:o.showMessage("lup.breadcrumbs.users.index"),url:"/users"},{title:o.showMessage("lup.breadcrumbs.users.new_user"),url:"/users/new"}];function c(e){var t=r.custom_data_definitions[e].choice_select_type==o.custom_data_choice_select_types.single_select?null:[];r.custom_data[r.custom_data_definitions[e].id]={values:t,type:r.custom_data_definitions[e].field_type,invalid:!1}}e.breadcrumbs=t,r.portal_membership.can_enroll=!0,r.portal_membership.tutor_can_edit_their_courses=!0,r.portal_membership.admin_can_access_portal_settings=!0,r.updateMembershipTypeList=function(e){r.groupMembershipTypeList=e},r.$watch(function(){return n.accountFormDirty},function(e,t){e&&(r.user_create_form.$setDirty(),n.accountFormDirty=!1)}),r.$watchCollection("groupsSelectedArray",function(){r.groupsSelectedValue=_.map(r.groupsSelectedArray,function(e){return e.id})}),r.$watchCollection("groupsManagedArray",function(){r.groupsManagedValue=_.map(r.groupsManagedArray,function(e){return e.id})}),r.$watch("user.email",function(){!r.login_with_usernames||0<r.user.email.length?r.displayEmailInvite=!0:(r.sendInvite=!1,r.displayEmailInvite=!1)}),r.$watch("enableGroups",function(){r.enableGroups||(r.groupsSelectedArray=[],r.groupsSelectedValue="")}),r.$watch("enableGroupManagement",function(){r.enableGroupManagement?r.managingOptionsVisible=!0:r.managingOptionsVisible=!1}),r.$watch("managingOptionsVisible",function(){!1===r.managingOptionsVisible&&(r.groupsManagedArray=[],r.groupsManagedValue="")})}angular.module("lu").controller("UsersNewController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","restrictByGroupService","UsersFactory","$timeout"]}(),function(){"use strict";function e(t,e,n,o,r,a,i){var s=new o,l=n.portal_membership_type_id;t.LupHelper=r,t.portal_membership_types=a,t.user=n,t.is_confirm=!1,t.confirm_message="",t.confirm=function(){t.confirm_message=function(){var e=r.showMessage("group.are_you_sure_you_want_to_make_this_user_an_admin");parseInt(t.user.portal_membership_type_id)===r.groupMembershipTypes.member?parseInt(l)===r.groupMembershipTypes.admin?e=r.showMessage("group.are_you_sure_you_want_to_remove_admin_rights_for_this_user"):parseInt(l)===r.groupMembershipTypes.manager?e=r.showMessage("group.are_you_sure_you_want_to_remove_manager_invite_rights_for_this_user"):parseInt(l)===r.groupMembershipTypes.instructor&&(e=r.showMessage("group.are_you_sure_you_want_to_remove_instructor_invite_rights_for_this_user")):parseInt(t.user.portal_membership_type_id)===r.groupMembershipTypes.manager?e=r.showMessage("group.are_you_sure_you_want_to_make_this_user_an_manager"):parseInt(t.user.portal_membership_type_id)===r.groupMembershipTypes.instructor&&(e=r.showMessage("group.are_you_sure_you_want_to_make_this_user_an_instructor"));return e}(),t.is_confirm=!0},t.disableIfSame=function(){return parseInt(l)===parseInt(t.user.portal_membership_type_id)},t.cancelConfirm=function(){t.is_confirm=!1},t.save=function(){s.changeMembershipType(n).then(function(){e.close({portal_membership_type_id:t.user.portal_membership_type_id})})},t.cancel=function(){e.close()}}window.angular.module("lu").controller("UsersPendingUsersChangeTypeController",e),e.$inject=["$scope","$modalInstance","user","UsersFactory","LupHelper","portal_membership_types","$luPopover"]}(),function(){"use strict";function e(o,e,t,n,r,a,i,s,l,c,u,d){var p=new n,m=new d,d=[{label:r.showMessage("lup.filters.email_az"),value:"email.ASC",default:!0},{label:r.showMessage("lup.filters.email_za"),value:"email.DESC"},{label:r.showMessage("lup.filters.last_invite_sent_asc"),value:"updated_at.ASC"},{label:r.showMessage("lup.filters.last_invite_sent_desc"),value:"updated_at.DESC"}];o.users=e.getKey("users"),o.is_admin=e.getKey("is_admin"),o.is_manager=e.getKey("is_manager"),o.portal_membership_types=e.getKey("portal_membership_types").data,o.association_membership_types=e.getKey("association_membership_types"),o.sortOptions=d,o.helper=r,o.destroy=function(n){a.confirm(r.showMessage("lup.confirm"),r.showMessage("group.are_you_sure_you_want_yo_cancel_this_invitation")).then(function(e){p.cancelInvite(n.id).then(function(){var e,t;p.data.other_invites&&0<p.data.other_invites.length?a.confirm(r.showMessage("lup.confirm"),r.showMessage("group_invites.delete_user_group_invites",{list_of_groups:(e=p.data.other_invites,t="",_.each(e,function(e){t+=e.invite.title+" <br /> "}),t)})).then(function(e){p.cancelOtherSentInvites(n.id,p.data.other_invites).then(function(){o.loadData()})}):o.loadData()})})},o.resend=function(e){p.resendInvite(e.id).then(function(){o.loadData()})},o.manuallySendInvite=function(e){r.showTip("lup.users.tooltip_invite_link",{auth_code:e.auth_code,domain_for_url:location.host})},o.searchText=null,o.setUserPassword=function(t){c.open({templateUrl:"/tc/users/pending_user_change_type.html",controller:"UsersPendingUsersChangeTypeController",size:"sm",resolve:{user:function(){return angular.copy(t)},portal_membership_types:function(){return o.portal_membership_types}}}).result.then(function(e){e&&e.portal_membership_type_id&&(t.portal_membership_type_id=e.portal_membership_type_id)})},i.staffAccessGrantsAllowed=e.getKey("staff_access_grants_allowed"),o.available_groups_list=null,e.getKey("available_groups_list")&&(o.available_groups_list=e.getKey("available_groups_list")),o.ariaLabel=r.showMessage("lup.a11y.users_pending_main"),o.ariaLabelSide=r.showMessage("lup.a11y.users_filter_options_aside"),o.activeCourseDDM={},o.toggled=function(e,t){o.activeCourseDDM[t]=e},o.userStatuses=u.userStatuses,o.userTypes=u.userTypes,o.membershipTypes=e.getKey("portal_membership_types").data,o.fetchGroups=u.fetchGroups,o.filterStatus="",o.filterGroups=[],o.filterGroupIds=[],o.filterType="",o.filterCreatedBefore="",o.filterCreatedAfter="",o.filterMembershipType="",o.filteringControl={},o.filterOptions=function(){var e=[{filterName:"filterGroups",value:o.filterGroupIds.join(",")},{filterName:"filterType",value:o.filterType},{filterName:"filterCreatedBefore",value:o.filterCreatedBefore},{filterName:"filterCreatedAfter",value:o.filterCreatedAfter}];i.have_membership_types_enabled&&e.push({filterName:"filterMembershipType",value:o.filterMembershipType});return e},o.clearFiltering=function(){return o.filterGroups=[],o.filterGroupIds=[],o.filterType="",o.filterCreatedBefore="",o.filterCreatedAfter="",o.filterMembershipType="",i.$broadcast(o.groupTaIdentifier+":CLEAN_QUERY"),void o.loadData()},o.groupCustomSelectFn=u.groupCustomSelectFn,o.groupTaIdentifier="taPUGroupFilter",i.$on("addUser",function(){s.location="/users/new"}),i.$on("importSFContacts",function(){s.location="/users/import_sf_contacts"}),i.$on("inviteUser",function(){m.showInviteUsersModal(o.portal_membership_types,o.is_admin,o.available_groups_list)}),i.$on("onUsersInvited",function(){o.loadData()}),i.$on("batchUpload",function(){s.location="/batch-upload"}),i.$on("exportToExcel",function(){var e={},t=new l;e.search=o.searchText,e.include_pending=!0,e.typeId=r.lupJobTypes.exportInvitesToExcel,t.initiateJob(e)}),o.loadData=function(){var e={};e.params=t.get(),p.getPendingUsersList(e).then(function(){o.users=p.data.users})}}angular.module("lu").controller("UsersPendingUsersController",e),e.$inject=["$scope","StorageFactory","paramsService","UsersFactory","LupHelper","$luPopover","$rootScope","$window","LupJobFactory","$modal","usersFilteringOptionsService","InviteUsersFactory"]}(),function(){"use strict";function e(t,e,n,o,r,a){var i=n.get(),s=i.activity_feed,n=i.activity_feed.meta,l=i.user.attributes,c=new a,a=[{label:r.showMessage("lup.filters.activity_asc"),value:"created_at.ASC"},{label:r.showMessage("lup.filters.activity_desc"),value:"created_at.DESC",default:!0}],r=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:l.display_name,url:"/users/"+l.id},{title:I18n.t("lup.breadcrumbs.users.recent_activities"),url:"/users/"+l.id+"/recent-activities"}];e.breadcrumbs=r,t.items=s,t.meta=n,t.user=l,t.loadData=function(){var e={};e.params=o.get(),c.getRecentActivities(l.id,e).then(function(){t.items=c.data.activity_feed})},t.sortOptions=a}angular.module("lu").controller("UsersRecentActivitiesController",e),e.$inject=["$scope","$rootScope","StorageFactory","paramsService","LupHelper","UsersFactory"]}(),function(){"use strict";function e(e,t,n,o){var r=this,t=t.get();function a(e){e.commit()}r.lupHelper=n,r.tos=t.tos.attributes,r.advanced_password_is_enabled=e.password_policy_config.is_enabled,r.terms_of_services_accepted=0,r.tos_enabled=t.tos_enabled,r.login_with_usernames=t.login_with_usernames,t.invite&&(r.invite=t.invite.attributes),r.submitForm=function(t){r.user.username||r.user.email&&t.$setValidity("emailFormat",n.simpleEmailValidation(r.user.email));t.$setValidity("emptyPassValue",n.checkStringExistence(r.user.password)),t.$setValidity("emptyPassConfirmValue",n.checkStringExistence(r.user.password_confirmation)),n.checkStringExistence(r.user.password_confirmation)&&t.$setValidity("passwordsDoNotMatch",n.comparePasswords(r.user.password,r.user.password_confirmation));{var e;r.advanced_password_is_enabled||(e=!!r.user.password&&r.user.password.length>=n.password_policy_form_validations.minimum_password_length_min,t.$setValidity("passwordIsToShort",e))}{t.$valid&&(!r.tos_enabled||!r.tos||r.invite&&r.tos&&r.invite.portal_membership_type_id==r.lupHelper.groupMembershipTypes.admin&&r.tos.published_prompt==r.lupHelper.tosPublishedPrompt.admins_excluded?(a(t),r.buttonDisabled=!0):o.open({templateUrl:"/tc/users/user_terms_of_service_modal.html",controller:"UsersRegistrationsNewTermsOfServiceController as vm",windowClass:"terms-modal lu-modal lu-modal--fixed ",resolve:{tos:function(){return r.tos},disable_actions:function(){return!1}}}).result.then(function(e){e.accepted&&(r.terms_of_services_accepted=1,a(t))}))}},r.formDisabled=function(e){var t=!0;r.advanced_password_is_enabled&&(t=!!function(e){var t=e.minimum_lowercase_characters,n=e.minimum_uppercase_characters,o=e.minimum_special_characters,r=e.minimum_numerical_characters,a=e.minimum_password_length;return!(t||n||o||r||a||0!=e.required)}(e.$error));return r.invite?!!(r.user&&r.user.password&&r.user.password_confirmation&&t):!!r.user&&(r.login_with_usernames&&r.user.username?!!r.user.password&&!!r.user.password_confirmation&&!!t:!!(r.user.password&&r.user.password_confirmation&&r.user.email&&t))},r.checkEmailValidity=function(e){e.$setValidity("emailFormat",n.simpleEmailValidation(r.user.email))},r.buttonDisabled=!1}angular.module("lu").controller("UsersRegistartionsNewController",e),e.$inject=["$rootScope","StorageFactory","LupHelper","$modal"]}(),function(){"use strict";function e(t,e,n,o,r,a){var i=this;function s(e){e&&e.bottom+50<window.innerHeight&&(i.disable_save=!1,t.$apply())}i.LupHelper=n,i.tos=o,i.accept=function(){i.disable_save||e.close({accepted:!0})},i.reject=function(){e.close({accepted:!1})},i.disable_save=!0,i.disable_actions=a,r(function(){var e=document.getElementById("tos"),t=document.getElementById("tos-end-of-terms"),n=t.getBoundingClientRect();s(n),e.addEventListener("scroll",function(){s(t.getBoundingClientRect())},!1)},1e3)}angular.module("lu").controller("UsersRegistrationsNewTermsOfServiceController",e),e.$inject=["$scope","$modalInstance","LupHelper","tos","$timeout","disable_actions"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c,u){var d=new s;e.enrollment=r,e.date_format=a,e.LupHelper=l,e.user=i,e.save=function(){(r.count_on_path?d.setLearningPathDueDate(r):d.setEnrollmentDueDate(r)).then(function(){t.$broadcast("dueDateSaved"),n.close()})},e.cancel=function(){e.enrollment.calculated_due_date=p,n.close()},e.enrollment.calculated_due_date=c("displayDateTime")(r.calculated_due_date,"YYYY-MM-DD"),e.current_duedate=c("displayDateTime")(r.calculated_due_date,a);var p=r.calculated_due_date;u(function(){$("body").updatePolyfill()})}window.angular.module("lu").controller("UsersSetEnrollmentDueDateController",e),e.$inject=["$scope","$rootScope","$modalInstance","$http","enrollment","date_format","user","UsersFactory","LupHelper","$filter","$timeout"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s,l,c){var u=new i;e.enrollment=o,e.date_format=r,e.LupHelper=s,e.user=a,e.save=function(){u.setEnrollmentExpiryDate(o,e.current_expiry).then(function(){t.$broadcast("expiryDateSaved"),n.close({action:"save"})})},e.cancel=function(){n.close()},e.current_expiry=l("displayDateTime")(o.course_access_expires_at,"YYYY-MM-DD"),e.current_expiry_for_display=l("displayDateTime")(o.course_access_expires_at,r),c(function(){$("body").updatePolyfill()})}window.angular.module("lu").controller("UsersSetEnrollmentExpiryController",e),e.$inject=["$scope","$rootScope","$modalInstance","enrollment","date_format","user","UsersFactory","LupHelper","$filter","$timeout"]}(),function(){"use strict";function e(e,t,n,o,r,a){e.LupHelper=o,e.user=n,e.user.expires_at=e.user.expires_at&&"-"!=e.user.expires_at?r("displayDateTime")(e.user.expires_at,"YYYY-MM-DD",null,null):null,e.save=function(){t.close({expires_at:e.user.expires_at})},e.cancel=function(){e.user.expires_at=i,t.close()};var i=n.expires_at;a(function(){$("body").updatePolyfill()})}angular.module("lu").controller("UsersSetExpiryController",e),e.$inject=["$scope","$modalInstance","user","LupHelper","$filter","$timeout"]}(),function(){"use strict";function e(n,o,e,t,r,a){var i=new r;n.LupHelper=a,n.user=e,n.save=function(e){var t={id:n.user.id,password:n.user.password,password_confirmation:n.user.password_confirmation,must_change_pass:n.user.must_change_pass};e.$setValidity("emptyPassValue",a.checkStringExistence(t.password)),e.$setValidity("emptyPassConfirmValue",a.checkStringExistence(t.password_confirmation)),e.$valid&&i.setUserPassword(t).then(function(){o.close()});n.user.password=null,n.user.password_confirmation=null,n.user.must_change_pass=null},n.show_ssl_warning=t,n.cancel=function(){n.user.password=null,n.user.password_confirmation=null,n.user.must_change_pass=null,o.close()}}window.angular.module("lu").controller("UsersSetPasswordController",e),e.$inject=["$scope","$modalInstance","user","show_ssl_warning","UsersFactory","LupHelper"]}(),function(){"use strict";function e(t,n,o,r,e,a,i){var s=new e;t.LupHelper=i,t.users=r,t.must_change_pass=!1,t.save=function(){var e={users:r,password:t.password,password_confirmation:t.password_confirmation,must_change_pass:t.must_change_pass};s.createSfUsers(e).then(function(){n.$broadcast("createUsersFinished",{status:s.data})},function(){n.$broadcast("createUsersFinished",{status:s.data})}),o.close()},t.cancel=function(){o.close()},1<r.length&&(t.must_change_pass=!0)}window.angular.module("lu").controller("UsersSetSfPasswordController",e),e.$inject=["$scope","$rootScope","$modalInstance","users","UsersFactory","LupJobFactory","LupHelper"]}(),function(){"use strict";function e(o,e,t,r,n,a,i,s,l,c,u,d,p,_,m,f){var e=e.get(),g=new t,h=new c,b=(new u,new f);function v(){h.pingForRulesProgress(o.auto_assign_reference).then(function(e){e!==r.lupJobStatuses.completed?d(function(){v()},2e3):o.auto_assign_reference=null})}function w(){n.confirm(r.showMessage("lup.salesforce.sales_force_rules.apply_process.action"),r.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.are_you_sure")).then(function(e){b.runSFRules(o.user.id).then(function(e){o.sfar_reference=e.data.job_reference})})}o.user=e.user.attributes,o.portal_membership=e.portal_membership.attributes,o.admin_can_access_portal_settings=e.admin_can_access_portal_settings,o.show_ssl_warning=e.show_ssl_warning,o.confirmation_token=e.confirmation_token,o.md5_email=e.md5_email,o.user_timezone=e.user_timezone,o.is_eu_country=e.is_eu_country,o.can_change_access_fields=e.can_change_access_fields,o.current_user_editing_himself=e.current_user_editing_himself,o.show_password_fields=e.show_password_fields,o.allow_admins_to_change_password=e.allow_admins_to_change_password,o.ilts_enabled=e.ilts_enabled,o.portal_has_children=e.portal_has_children,o.login_with_usernames=e.login_with_usernames,o.custom_data_definitions=e.custom_data_definitions,o.readonly_profile=e.readonly_profile,o.allow_email_opt_out=e.allow_email_opt_out,o.can_edit_admin_fields=e.can_edit_admin_fields,o.user.last_sign_in_at=a("displayDateTime")(o.user.last_sign_in_at,"YYYY-MM-DD"),o.user.created_at=a("displayDateTime")(o.user.created_at,"YYYY-MM-DD"),o.user.expires_at=o.user.expires_at?a("displayDateTime")(o.user.expires_at,"YYYY-MM-DD"):null,o.showAdditionalSettings=function(){return o.is_admin||!o.is_admin&&!!o.association_membership_types},o.association_membership_types=e.association_membership_types,o.purchase_ip_blocked_option=e.purchase_ip_blocked_option,o.allow_purchase=o.user.allow_purchase,o.purchase_ip_blocked=o.user.purchase_ip_blocked,o.org_username=e.user.attributes.username,o.haveMembershipTypesEnabled=l.have_membership_types_enabled,o.is_admin=e.is_admin,o.showPurchaseBlocket=function(){return o.is_admin&&null!==o.purchase_ip_blocked&&0!==o.purchase_ip_blocked&&o.is_eu_country},o.save=function(e){var t={user_form:o.user};e.$dirty&&g.updateUser(o.user.id,t).then(function(e){var t=g.data.users_data;t&&(o.show_password_fields=t.show_password_fields,o.can_change_access_fields=t.can_change_access_fields,o.allow_admins_to_change_password=t.allow_admins_to_change_password,o.allow_purchase=o.user.allow_purchase,o.purchase_ip_blocked=o.user.purchase_ip_blocked,o.user.login_enabled=t.login_enabled,o.user.expires_at=t.expires_at,o.org_username=t.username),o.user_form.$setPristine()})},o.cancel=function(){i.location="/users"},o.setUserPassword=function(e){s.open({templateUrl:"/tc/users/set_password_modal.html",controller:"UsersSetPasswordController",backdrop:"static",size:"md",resolve:{show_ssl_warning:function(){return o.show_ssl_warning},user:function(){return e}}})},o.openResendPasswordPanel=function(){n.confirm(r.showMessage("userz.send_reset_email"),r.showMessage("userz.cannot_change_password")).then(function(e){g.sendResetEmail(o.user.id)})},o.syncSFData=function(){g.syncSFUser(o.user.id).then(function(e){e.data.hasOwnProperty("user")&&(o.user=e.data.user)})},o.LupHelper=r,o.confirmation_url=location.protocol+"//"+location.host+"/users/confirmation?confirmation_token="+o.confirmation_token,o.profileImage=e.profile_image,o.acceptedFiles=function(){return r.image_upload_settings.file_types.join(",")},o.maxFileSize=function(){return r.image_upload_settings.file_size_mb+"MB"},o.onImageLoad=function(e){if(!angular.isObject(e))return void _.debug("Image is blank!");m.upload({resolve:{params:function(){return{accountPage:!1,userID:o.user.id}},image:function(){return e},config:function(){return{options:{areaType:"circle"},labels:{title:r.showMessage("lup.certifications.upload_image"),btnBrowseOther:r.showMessage("lup.courses.browse_other"),btnBrowseImage:r.showMessage("certificates.select_image"),blankStateTitle:r.showMessage("lup.courses.upload_image.blank_state_titile"),blankStateBlurb:r.showMessage("lup.courses.upload_image.blank_state_blurb")}}},paramsFn:function(){return function(e){return{url:"/portal-membership-profile-image-update.json",data:{pm_id:o.user.portal_membership_id}}}},callbacks:function(){return{onSuccess:function(e,t){var n=e.data.profile_image,e=r.currentTimestamp();angular.isObject(n)&&(o.profileImage={id:n.id,small_url:n.small_url+"?timestamp="+e,large_url:n.large_url+"?timestamp="+e}),angular.isObject(t)&&t.close()},onError:function(e,t){angular.isObject(t)&&t.close()},onProgress:angular.noop}}}})},o.removeProfileImage=function(e){m.remove({url:"/portal-membership-profile-image-remove/:pm_id.json".replace(/:pm_id/,e)},{onSuccess:function(){o.profileImage=null}})},o.setExpiry=function(){s.open({templateUrl:"/tc/users/set_expiry_date_modal.html",controller:"UsersSetExpiryController",backdrop:"static",size:"md",resolve:{user:function(){return o.user}}}).result.then(function(e){angular.isDefined(e)&&angular.isDefined(e.expires_at)&&(o.user.expires_at=e.expires_at?e.expires_at:null,o.theForm.$setDirty())})},o.setForm=function(e){o.theForm=e},o.openUsersSettings=function(e){angular.isDefined(e)&&(i.location="/users/:user_id/user-settings".replace(/:user_id/,e))},o.requestDeletion=function(){s.open({templateUrl:"/tc/user_deletion_request/confirm_deletion.html",controller:"UserDeletionRequestConfirmDeletion as vm",windowClass:"tos-modal center-cont-modal",size:"md",resolve:{selfDeletion:function(){return!1},reviewTerms:function(){return!1}}}).result.then(function(e){g.requestDeletion(o.user.id).then(function(e){i.location="/users/"+o.user.id})})},o.revokeDeletion=function(){s.open({templateUrl:"/tc/user_deletion_request/confirm_revoke.html",controller:"UserDeletionRequestConfirmRevoke as vm",windowClass:"tos-modal center-cont-modal",size:"md",resolve:{selfDeletion:function(){return!1},reviewTerms:function(){return!1}}}).result.then(function(e){g.revokeDeletion(o.user.id).then(function(e){i.location="/users/"+o.user.id})})},o.showTooltipOnConfirmationLink=function(e){e.preventDefault(),r.showTip("userz.confirm_user_account_blurb")},o.show2FADisableConfirmationModal=function(){s.open({templateUrl:"/tc/two_factor_authentication/disable_confirmation.html",controller:"TwoFactorAuthenticationDisableForAnotherUserController as vm",backdrop:"static",size:"md",resolve:{user:function(){return o.user}}})},o.two_factor_authentication_allowed=e.two_factor_authentication_allowed,o.two_factor_authentication_enabled=e.two_factor_authentication_enabled,o.two_factor_authentication_activated=e.two_factor_authentication_activated,o.ariaLabel=r.showMessage("lup.a11y.users_info_main"),o.ariaLabelSide=r.showMessage("lup.a11y.users_info_aside"),o.auto_assign_reference=e.auto_assign_reference,o.auto_assign_reference&&v(),l.$on("sendMessage",function(){i.location="/messages/new"}),l.$on("changeMembershipType",function(){i.location="/users/"+o.user.id+"/user-settings"}),l.$on("enrollUser",function(){i.location="/enrollments/new?user_id=:user_id".replace(/:user_id/,o.user.id)}),l.$on("deleteUser",function(){p.deleteUser({id:o.user.id,gm:o.user.portal_membership_id},o.portal_has_children,function(){i.location="/users"})}),l.$on("runTheRules",function(){o.auto_assign_reference?n.notify("",r.showMessage("lup.auto_assign_rules.apply_process.in_progress")):n.confirm(r.showMessage("lup.auto_assign_rules.apply_process.action"),r.showMessage("lup.auto_assign_rules.apply_process.are_you_sure")).then(function(e){h.runTheRules(o.user.id).then(function(e){o.auto_assign_reference=e.data.job_reference,v()})})}),o.$watch("invalidFile",function(e,t){angular.isArray(e)&&e.length&&m.errorDialog(r.showMessage("lup.users.invalid_profile_image",{fileName:e[0].name,acceptedFiles:r.image_upload_settings.file_types.join(","),maxFileSize:r.image_upload_settings.file_size_mb+"MB"}))}),o.$on("runSFRules",function(){o.sfar_reference?b.pingForProgress(o.sfar_reference).then(function(e){return e==r.lupJobStatuses.completed?(o.sfar_reference=null,void w()):void n.notify("",r.showMessage("lup.salesforce.sales_force_rules.apply_process.single_user.in_progress"))}):w()})}angular.module("lu").controller("UsersShowController",e),e.$inject=["$scope","StorageFactory","UsersFactory","LupHelper","$luPopover","$filter","$window","$modal","$rootScope","AutoAssignRulesFactory","learnUponApi","$timeout","UserActionService","$log","ImageUploadService","SalesForceAssignRulesFactory"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s,l,c,u,d,p,_,m,f,g,h,b,v,w,y,M,S){var C=t.get().user.attributes;new r;if(n.LupHelper=a,n.event=c,n.instructor=u,n.has_enrollment=d,n.show_view_course=!d||p&&!!n.event.enrollment_id,n.show_join_webinar="catalog"!==_,n.viewCourse=function(){if(d)return void(e.location="/enrollments/"+n.event.enrollment_id+"/details");e.location="/catalog/courses/"+n.event.course_id+"?back_to=ilt"},n.status=m,n.num_on_waitlist=g,n.EnrollmentHelper=h,n.course_settings=b,A(d,C.portal_membership_type_id)&&(n.directWebinarLink=(new i).directJoinPath(c.component_id)),n.webinarLauncher=s.build(n.event.webinar_type,n.event.start_at,n.event.end_at),n.cancel=function(){o.close()},n.displayWebinarUrl=function(e){return!!e&&e!=n.LupHelper.component_element_statuses.pending},n.addressDetails=function(){return n.event.address_1?n.event.address_1:n.event.address_2?n.event.address_2:n.event.address_3?n.event.address_3:n.event.state_code&&"xx"!=n.event.state_code.toLowerCase()?n.LupHelper.showMessage("statelists."+n.event.state_code.toLowerCase()):n.event.country_code&&"xx"!=n.event.country_code.toLowerCase()?n.LupHelper.showMessage("countrylists."+n.event.country_code.toLowerCase()):"-"},n.settingMinimalThresholdForMsTeamsEnabled=v,n.forceHideViewCourse=!!w,n.showCloseBtn=!!y,n.showVisitSessionBtn=!!S,n.visitSessionPage=function(){return void(e.location="/trainings/"+c.training_id+"/sessions/"+c.session_id+"/overview")},n.sessionCourses=M,n.showSessionCourses=!1,n.sessionAttendeeStatus=a.getTrainingErnollmentStatusLabel(c.session_attendee_status_id),0<n.sessionCourses.length&&(n.showSessionCourses=!0),n.event){if(n.event.is_new_ilt)return;n.event.availability=d&&m?l.showSessionStatus(m,n.event,g):l.calculateSessionAvailability(n.event,f)}function A(e,t){return!e&&-1!==[a.groupMembershipTypes.admin,a.groupMembershipTypes.instructor,a.groupMembershipTypes.manager].indexOf(parseInt(t))}n.allowChangeSession=function(e,t){return!(!e.enrollment_id||!e.id||e.cr_must_choose_session!=a.ilt_sessions.must_choose_one&&e.cr_must_choose_session!=a.ilt_sessions.can_choose_more_than_one||e.enrollment_component_status_id!=a.enrollment_statuses.not_started&&e.enrollment_component_status_id!=a.enrollment_statuses.waitlisted||!t||!(new Date(e.start_at).getTime()>Date.now()))},n.webinarProviderUsesThisLauncher=function(){return n.webinarLauncher.webinarProviderUsesThisLauncher()},n.webinarProviderUsesThisLauncher()&&n.webinarLauncher.registerOnJoinStatusChanged(function(e){n.webinarJoinStatus=e;var t=C.email;if(A(d,C.portal_membership_type_id))n.webinarJoinConfig={title:a.showMessage("lup.ilts.webinar_details_tl"),body:a.showMessage("lup.ilts.webinar_details_content_on_time",{email:t})};else switch(e){case a.webinarJoinStatuses.too_early:n.webinarJoinConfig={title:a.showMessage("lup.ilts.webinar_details_tl"),body:a.showMessage("lup.ilts.webinar_details_content_too_early")};break;case a.webinarJoinStatuses.too_late:n.webinarJoinConfig={title:a.showMessage("lup.ilts.webinar_details_tl"),body:a.showMessage("lup.ilts.webinar_details_content_too_late")};break;case a.webinarJoinStatuses.in_progress:n.webinarJoinConfig={title:a.showMessage("lup.ilts.webinar_details_tl"),body:a.showMessage("lup.ilts.webinar_details_content_on_time",{email:t})}}})}window.angular.module("lu").controller("UsersShowSessionDetailsController",e),e.$inject=["$scope","$window","StorageFactory","$modalInstance","UsersFactory","LupHelper","WebinarFactory","WebinarLauncherFactory","ComponentService","event","instructor","has_enrollment","show_view_course","showingOnPage","status","waitlist_count","num_on_waitlist","EnrollmentHelper","course_settings","settingMinimalThresholdForMsTeamsEnabled","forceHideViewCourse","showCloseBtn","sessionCourses","showVisitSessionBtn"]}(),function(){"use strict";function e(o,e,t,r,n,a,i,s){var l=t.get().user.attributes,t=t.getKey("calendar_events"),c=new a,u=[],a=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:l.display_name,url:"/users/"+l.id},{title:I18n.t("lup.breadcrumbs.users.training_calendar"),url:"/users/"+l.id+"/training-calendar"}];e.breadcrumbs=a,o.user=l,o.calendar_events=t,o.loadData=function(e,t){var n={};n.params=r.get(),n.params.month=e,n.params.year=t,c.getCalendarEvents(l.id,n,!1).then(function(){o.calendar_events=c.data.calendar_events,u=[]})},o.LupHelper=n,o.selected="-",o.displayForSelectedDate=function(e,t,n,o){{if(t&&"-"!==t){t=t.format("YYYY-MM-DD"),n=i("displayDateTime")(n,"YYYY-MM-DD"),o=i("displayDateTime")(o,"YYYY-MM-DD"),t=n<=t&&t<=o;return t?-1==u.indexOf(e)&&u.push(e):-1<(o=u.indexOf(e))&&u.splice(o,1),t}return-1==u.indexOf(e)&&u.push(e),!0}},o.showSessionDetails=function(t){var e={};e.params=r.get(),e.params.cal_type_id=t.cal_type_id,e.params.attendee_id=t.attendee_id,e.params.session_detail_id=t.session_detail_id,e.params.use_sessions_timezone=!0,c.getDetailsForSession(l.id,t.component_id,e,t.is_training).then(function(){var e=c.data;s.open({templateUrl:"/tc/users/show_session_details.html",controller:"UsersShowSessionDetailsController",size:"lg",resolve:{event:function(){return e.session_details.attributes},instructor:function(){return e.instructor},has_enrollment:function(){return!!e.session_details.attributes.id},show_view_course:function(){return!1},showingOnPage:function(){return"users-training-calendar"},status:function(){return t.description},num_on_waitlist:function(){return null},waitlist_count:function(){return null},course_enable_waitlist:function(){return null},course_waitlist_type:function(){return null},course_settings:function(){return null},settingMinimalThresholdForMsTeamsEnabled:function(){return e.setting_minimal_threshold_for_ms_teams_enabled},forceHideViewCourse:function(){return!0},showCloseBtn:function(){return!0},sessionCourses:function(){return[]},showVisitSessionBtn:function(){return!1}}})})},o.haveShownItems=function(){return 0<u.length},o.ariaLabelSide=n.showMessage("ilts.your_session_calendar"),o.ariaLabel=n.showMessage("lup.users.user_sessions")}angular.module("lu").controller("UsersTrainingCalendarController",e),e.$inject=["$scope","$rootScope","StorageFactory","paramsService","LupHelper","UsersFactory","$filter","$modal"]}(),function(){"use strict";function e(a,e,t,n,o,r,i,s,l){var e=e.get(),c=new t,u=e.portal_membership.attributes.portal_membership_type_id,d=e.portal_membership.attributes.admin_can_access_portal_settings;a.user=e.user.attributes,a.portal_membership=e.portal_membership.attributes,a.portal_membership_types=e.portal_membership_types.data,a.association_membership_types=e.association_membership_types,a.extending_manager_role=e.extending_manager_role,a.can_act_as_instructor=e.can_act_as_instructor,a.can_manage_trainings=e.can_manage_trainings,a.can_manage_sessions=e.can_manage_sessions,a.can_only_manage_ilts=e.can_only_manage_ilts,a.manager_strict_ilt_permission_enabled=e.manager_strict_ilt_permission_enabled,a.trainings_enabled=e.trainings_enabled,a.admin_can_access_portal_settings=e.admin_can_access_portal_settings,a.showUserWarningMessage=!1,a.is_admin=e.is_admin,a.have_client_portals=e.have_client_portals,a.client_memberships_action=null,a.LupHelper=n,a.save=function(t){{var e;u==n.groupMembershipTypes.admin&&u!=a.portal_membership.portal_membership_type_id&&a.have_client_portals?function(t){l.open({templateUrl:"/tc/users/update_client_memberships_modal.html",controller:"UpdateClientMembershipsController",controllerAs:"vm",size:"lg",resolve:{user_id:function(){return a.user.id}}}).result.then(function(e){e&&"save"===e.action&&(a.client_memberships_action=e.decision,p(t))})}(t):u!=n.groupMembershipTypes.member&&(u!=a.portal_membership.portal_membership_type_id||u==n.groupMembershipTypes.manager&&a.portal_membership.portal_membership_type_id==n.groupMembershipTypes.manager&&a.can_act_as_instructor&&t["portal_membership_form[can_act_as_instructor]"]&&0==t["portal_membership_form[can_act_as_instructor]"].$viewValue)?(e=function(){var e="",t=a.portal_membership_form["portal_membership_form[can_act_as_instructor]"];u==n.groupMembershipTypes.admin?e=n.showMessage("group.are_you_sure_you_want_to_remove_admin_rights_for_this_user"):u==n.groupMembershipTypes.instructor&&t&&1==t.$viewValue?e=n.showMessage("lup.users.are_you_sure_you_want_to_change_user_type_to_manager_with_instructor_permissions"):u==n.groupMembershipTypes.instructor||u==n.groupMembershipTypes.manager&&a.portal_membership.portal_membership_type_id==n.groupMembershipTypes.manager&&a.can_act_as_instructor&&t&&0==t.$viewValue?e=n.showMessage("lup.users.are_you_sure_you_want_to_remove_instructor_rights_for_this_user"):u==n.groupMembershipTypes.manager&&a.can_act_as_instructor&&a.portal_membership.portal_membership_type_id==n.groupMembershipTypes.instructor?e=n.showMessage("lup.users.are_you_sure_you_want_to_change_role_to_instructor_from_manager_with_instructor_permissions"):u!=n.groupMembershipTypes.manager||!a.can_act_as_instructor||a.portal_membership.portal_membership_type_id!=n.groupMembershipTypes.admin&&a.portal_membership.portal_membership_type_id!=n.groupMembershipTypes.member?u==n.groupMembershipTypes.manager&&(e=n.showMessage("lup.users.are_you_sure_you_want_to_remove_manager_rights_for_this_user")):e=n.showMessage("lup.users.are_you_sure_you_want_to_disable_manager_and_instructor_permissions_for_manager");return e}(),o.confirm(n.showMessage("lup.users.changing_permissions"),e).then(function(e){p(t)})):p(t)}},a.cancel=function(){r.location="/users/"+a.user.id},a.ariaLabel=n.showMessage("lup.courses.additional_settings"),a.ariaLabelSide=n.showMessage("lup.a11y.users_groups_aside");e=e.group_permissions;function p(e){var t=!1,n=!1,o=!1,r=!1;e["portal_membership_form[can_act_as_instructor]"]&&(t=e["portal_membership_form[can_act_as_instructor]"].$viewValue),e["portal_membership_form[can_manage_trainings]"]&&(n=e["portal_membership_form[can_manage_trainings]"].$viewValue),e["portal_membership_form[can_manage_sessions]"]&&(o=e["portal_membership_form[can_manage_sessions]"].$viewValue),e["portal_membership_form[can_only_manage_ilts]"]&&(r=e["portal_membership_form[can_only_manage_ilts]"].$viewValue,!1===t&&(r=!1));r={portal_membership_form:a.portal_membership,group_permissions_form:{can_create_users:a.createUsersSelectedGroups,can_approve_enrollments:a.approveEnrollmentsSelectedGroups},users_form:{email_opt_out:a.user.email_opt_out},can_act_as_instructor:t,can_manage_trainings:n,can_manage_sessions:o,can_only_manage_ilts:r};a.have_client_portals&&a.client_memberships_action&&(r.client_memberships_action=a.client_memberships_action),e.$dirty&&c.updateUserSettings(a.user.id,r).then(function(e){u=a.portal_membership.portal_membership_type_id,a.portal_membership_form.$setPristine(),a.client_memberships_action=null,d=a.portal_membership.admin_can_access_portal_settings})}e&&e.attributes?(a.createUsersSelectedGroups=e.attributes.can_create_users,a.approveEnrollmentsSelectedGroups=e.attributes.can_approve_enrollments):(a.createUsersSelectedGroups=[],a.approveEnrollmentsSelectedGroups=[]),a.fetchGroups=function(e){return e.manager_user_id=a.user.id,s.fetchGroups(e)},a.afterSelectGroup=function(){angular.isDefined(a.theForm)&&a.theForm.$setDirty()},a.afterRemoveGroup=function(){angular.isDefined(a.theForm)&&a.theForm.$setDirty()},a.$watch("portal_membership.admin_can_access_portal_settings",function(e){!e&&d&&(a.showUserWarningMessage=!0)},!0),a.setForm=function(e){a.theForm=e},i.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.users.index"),url:"/users"},{title:a.user.display_name,url:"/users/"+a.user.id},{title:I18n.t("lup.breadcrumbs.users.user_settings"),url:"/users/"+a.user.id+"/user-settings"}]}angular.module("lu").controller("UsersUserSettingsController",e),e.$inject=["$scope","StorageFactory","UsersFactory","LupHelper","$luPopover","$window","$rootScope","restrictByGroupService","$modal"]}(),function(){"use strict";window.angular.module("lu").controller("WebhooksIndexController",["$scope","$log","$http","$rootScope","WebhookFactory","StorageFactory","LupHelper","$window","$luPopover","paramsService",function(t,e,n,o,r,a,i,s,l,c){var a=a.get(),u=new r;function d(){var e={};e.params=c.get(),u.getList(e).then(function(){t.webhooks=u.data.webhooks})}t.webhooks=a.webhooks,t.helper=i,t.viewDetails=function(e){e.success||e.last_error_at?s.location="/webhooks/"+e.id:i.showTip("webhooks.course_update_view_info")},t.filterStatus=2,t.filterType=100,t.filteringControl={},t.clearFiltering=function(){t.filterStatus=2,t.filterType=100,d()},t.searchText=null,t.filterOptions=function(){return[{filterName:"filterStatus",value:t.filterStatus},{filterName:"filterType",value:t.filterType}]},t.loadData=d}])}(),function(){"use strict";window.angular.module("lu").controller("WebinarCreateController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","WebinarFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){o=o.get(),new s;e.forceShowSave=!1,e.spinnerService=c,e.webinar_setting=o.webinar_setting.attributes,e.LupHelper=r,e.Helper=r,e.cancel=function(){return!(a.location="/settings/integrations/webinars")}}])}(),function(){"use strict";function e(e,t,n){this.helper=t}angular.module("lu").controller("WebinarCreateModalController",e),e.$inject=["StorageFactory","LupHelper","paramsService"]}(),function(){"use strict";function e(e,t,n,o,r,a){n=n.get();e.forceShowSave=!1,e.spinnerService=a,e.webinar_setting=n.webinar_setting.attributes,e.LupHelper=o,e.cancel=function(){return!(r.location="/settings/integrations/webinars")}}angular.module("lu").controller("WebinarNewAdobeConnectController",e),e.$inject=["$scope","$rootScope","StorageFactory","LupHelper","$window","spinnerService"]}(),function(){"use strict";window.angular.module("lu").controller("WebinarNewController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","WebinarFactory","Upload","spinnerService","$modal",function(n,e,t,o,r,a,i,s,l,c,u){o=o.get(),new s;n.forceShowSave=!1,n.spinnerService=c,n.webinar_setting=o.webinar_setting.attributes,n.webex_password_policy_config=o.webex_password_policy_config.attributes,n.password_validator_rules=o.password_validator_rules.attributes,n.LupHelper=r,n.Helper=r,n.contains_empty_char=function(){var e=new RegExp(n.password_validator_rules.regexp),t=n.webinar_setting.default_password;return!!t&&e.test(t)},n.password_too_long=function(){var e=n.webinar_setting.default_password;return!!e&&e.length>n.password_validator_rules.password_length},n.cancel=function(){return!(a.location="/settings/integrations/webinars")}}])}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){var l=this,c=n.get(),u=new r,d=new a;function p(){var e={portal_setting:l.portal_setting,custom_email_address:l.custom_email_address};l.domainTouched&&l.domain&&(e.domain=l.domain),u.update(e).then(function(e){o.location.reload()})}function _(){l.footer_action_visible=!0}l.portal_setting=c.portal_setting.attributes,l.ses_identity=c.ses_identity.attributes,l.aws_identity=c.aws_identity.attributes,l.portal_ssl_enabled=c.portal_ssl_enabled,l.has_custom_ssl_cert=c.has_custom_ssl_cert,l.is_whitelabeled=c.is_whitelabeled,l.current_domain=c.current_domain,l.ssl_certificate_enabled=c.can_update_ssl_certificate,l.lupHelper=t,l.show_example=!1,l.footer_action_visible=!1,l.dns_records_visible=!1,l.custom_email_address=l.ses_identity.email?l.ses_identity.email:l.portal_setting.white_label_reply_to_address,l.email_domain=function(){{if(l.ses_identity&&l.ses_identity.email)return l.ses_identity.email.split("@")[1];if(l.portal_setting&&l.portal_setting.white_label_reply_to_address)return l.portal_setting.white_label_reply_to_address.split("@")[1]}}(),l.domain=c.portal_white_label_domain,l.letsEncryptOrderFinalized=c.le_order_finalized,l.letsEncryptAccount=c.lets_encrypt_account,l.portal_white_label_settings=c.portal_white_label_settings,l.white_label_is_enabled=l.portal_setting.white_label_enabled,l.domainTouched=!1,l.custom_ssl_enabled=c.custom_ssl_enabled,l.save=function(){{var e;l.domainTouched&&!l.letsEncryptAccount&&l.domain?(e=I18n.t("lup.lets_encrypt.domain_change_confirmation_modal")+" "+l.domain,s.confirm(t.showMessage("lup.confirm"),e).then(function(e){p()})):l.domainTouched&&l.letsEncryptAccount&&l.domain?(e=I18n.t("lup.lets_encrypt.domain_update_confirmation_modal")+"<br><br>"+I18n.t("lup.lets_encrypt.portal_will_not_be_white_labelled")+"<br><br><b>"+I18n.t("lup.lets_encrypt.are_you_sure_you_want_to_update_url")+"</b>",s.confirm(t.showMessage("lup.confirm"),e).then(function(e){p()})):p()}},l.cancel=function(){o.location.reload()},l.cancelVerification=function(e){d.cancel(e).then(function(e){o.location.reload()})},l.retryVerification=function(){d.retry().then(function(e){o.location.reload()})},l.toggleExample=function(){l.show_example=!l.show_example},l.toggleDnsRecords=function(){l.dns_records_visible=!l.dns_records_visible},l.checkEmailPresence=function(){return l.ses_identity&&l.ses_identity.email&&!l.ses_identity.is_canceled?1:l.portal_setting&&l.portal_setting.white_label_reply_to_address?2:0},l.dkimClass=function(e){return e%2==0?"contentsRowAlt":"contentsRow"},l.showFooterAction=_,l.enableWhiteLabelUrlInput=function(){if(!l.portal_white_label_settings)return!0;if(l.portal_white_label_settings.domain_status==l.lupHelper.letsEncrypt.domainValidationStatuses.invalid||l.portal_white_label_settings.domain_status==l.lupHelper.letsEncrypt.domainValidationStatuses.canceled)return!0;if(l.portal_white_label_settings.domain_status==l.lupHelper.letsEncrypt.domainValidationStatuses.valid&&l.letsEncryptOrderFinalized&&l.portal_setting.white_label_site_url)return!0;return!1},l.domainValidationPending=function(){return!!l.portal_white_label_settings&&(l.portal_white_label_settings.domain_status==l.lupHelper.letsEncrypt.domainValidationStatuses.pending||(l.portal_white_label_settings.domain_status==l.lupHelper.letsEncrypt.domainValidationStatuses.valid&&!l.letsEncryptOrderFinalized||!(l.portal_white_label_settings.domain_status!=l.lupHelper.letsEncrypt.domainValidationStatuses.valid||!l.letsEncryptOrderFinalized||l.portal_setting.white_label_site_url)))},l.portalWhiteLabeled=function(){if(l.white_label_is_enabled)return!0;return!(!c.portal_white_label_domain||l.portal_white_label_settings)||!!(l.portal_white_label_settings&&l.letsEncryptOrderFinalized&&l.portal_white_label_settings.domain_status==l.lupHelper.letsEncrypt.domainValidationStatuses.valid&&l.portal_setting.white_label_site_url)},l.letsEncryptBetaAccessAllowed=c.lets_encrypt_beta_access_allowed,l.canCancelPendingDomain=function(){return!!l.portal_white_label_settings&&l.portal_white_label_settings.domain_status==l.lupHelper.letsEncrypt.domainValidationStatuses.pending},l.cancelPendingDomain=function(){var e=I18n.t("lup.lets_encrypt.cancel_button_confirmation");s.confirm(t.showMessage("lup.confirm"),e).then(function(e){u.cancelPendingDomain().then(function(e){o.location.reload()})})},e.ariaLabel=t.showMessage("lup.a11y.settings.general_portal_settings"),e.ariaLabelSide=t.showMessage("lup.a11y.settings.general_aside"),l.openSslModal=function(){i.open({templateUrl:"/tc/portal_certificate/add_ssl_modal.html",controller:"PortalCertificatesNewController",size:"md",resolve:{resource:function(){return"Success"}}})},e.$watch("vm.portal_setting",function(e,t){e!==t&&_()},!0),e.$watch("vm.domain",function(e,t){e!==t&&(l.domainTouched=!0,_())},!0)}window.angular.module("lu").controller("WhitelabelsIndexController",e),e.$inject=["$scope","LupHelper","StorageFactory","$window","WhitelabelsFactory","SesIdentityFactory","$modal","$luPopover"]}(),function(){"use strict";function e(u){return{link:function(i,t,e,s){var l,n,o,r,c,a;if(e=e.ngType||i.cardFieldType,!s)return;if("card_number"!==e&&"cvc"!==e)return;{if("cvc"===e)return t.on("focus",function(e){i.cvcInFocus=!0}),t.on("blur",function(e){i.cvcInFocus=!1}),t.on("blur keyup change paste",function(e){return i.$apply(function(){var e;if(e=t.val())return s.$setViewValue(e),t.val(n(s.$viewValue))})}),n=function(e){e=null!==e?e.replace(/([^\d])*/g,"").slice(0,4):void 0;return s.$setValidity("minlength",3<=e.length||s.$isEmpty(e)),e},s.$parsers.push(n);if("name_on_card"!==e&&"exp_month"!==e&&"exp_year"!==e)return i.$watch(function(){return s.$viewValue},function(e,t){i.formattedValue=e}),t.on("blur keyup change paste",function(e){return i.$apply(function(){var e;if(e=t.val())return s.$setViewValue(e),t.val(r(s.$viewValue))})}),e=function(e){var t;return a(e),i.creditCardType===u.americanExpressClass?null!==(t=e.replace(/([^\d])*/g,"").slice(0,15))?t:"":null!==(e=e.replace(/([^\d])*/g,"").slice(0,16))?e:""},s.$parsers.push(e),r=function(e){var t,n,o,r,a;if(e)return t=e.replace(/([^\d\s])*/g,""),n=new RegExp("^(34|37)"),a=new RegExp("^4"),r=new RegExp("^5[1-5]"),o=new RegExp("^60"),t.length<2&&(i.creditCardType=u.otherCardClass),2===t.length&&(i.creditCardType=function(){switch(!1){case!n.test(t):return u.americanExpressClass;case!a.test(t):return u.visaClass;case!r.test(t):return u.masterCardClass;case!o.test(t):return u.discoverCardClass;default:return u.otherCardClass}}()),(n.test(t)?l:c)(t);s.$setPristine()},c=function(e){return" "===e[14]&&18<e.length?e.slice(0,19):5!==e.length&&10!==e.length&&15!==e.length||" "===e[e.length-1]?6!==e.length&&11!==e.length&&16!==e.length||" "===e[e.length-2]?7!==e.length&&12!==e.length&&17!==e.length||" "===e[e.length-3]?8!==e.length&&13!==e.length&&18!==e.length||" "===e[e.length-4]?9!==e.length&&14!==e.length&&19!==e.length||" "===e[e.length-5]?o(e):e.slice(0,-5)+" "+e.slice(e.length-5):e.slice(0,-4)+" "+e.slice(e.length-4):e.slice(0,-3)+" "+e.slice(e.length-3):e.slice(0,-2)+" "+e.slice(e.length-2):e.slice(0,-1)+" "+e[e.length-1]},l=function(e){return 16<e.length?e.slice(0,17):5!==e.length&&12!==e.length||" "===e[e.length-1]?6!==e.length&&13!==e.length||" "===e[e.length-2]?7!==e.length&&14!==e.length||" "===e[e.length-3]?8!==e.length&&15!==e.length||" "===e[e.length-4]?9!==e.length&&16!==e.length||" "===e[e.length-5]?o(e):e.slice(0,-5)+" "+e.slice(e.length-5):e.slice(0,-4)+" "+e.slice(e.length-4):e.slice(0,-3)+" "+e.slice(e.length-3):e.slice(0,-2)+" "+e.slice(e.length-2):e.slice(0,-1)+" "+e[e.length-1]},o=function(e){return" "===e[e.length-1]?e.slice(0,-1):e},a=function(e){var o=[[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]],r=0;return e.replace(/\D+/g,"").replace(/[\d]/g,function(e,t,n){return r+=o[n.length-t&1][parseInt(e,10)]}),s.$setValidity("mod10",!!(r%10==0&&0<r)||s.$isEmpty(e))}}},require:"ngModel",restrict:"A",scope:{ngModel:"=ngModel",cardFieldType:"@cardFieldType",creditCardImage:"@creditCardImage",creditCardType:"=creditCardType",formattedValue:"=formattedValue",cvcInFocus:"=cvcInFocus"}}}angular.module("lu").directive("luCreditCard",e).provider("creditCardInput",function(){var t,n,o,r,a;return t="amex",r="visa",o="master",n="discover",a="other",this.setCardClasses=function(e){return t=e.americanExpress||"amex",r=e.visa||"visa",o=e.masterCard||"master",a=e.otherCard||"other",(n=e.discoverCard)||"discover"},this.$get=function(){return{americanExpressClass:t,visaClass:r,masterCardClass:o,discoverCardClass:n,otherCardClass:a,cardClasses:[t,r,o,n,a].join(" ")}},this}),e.$inject=["creditCardInput"]}(),function(){"use strict";function e(s,l,c){return{restrict:"A",require:"?ngModel",link:function(e,t,n,o){var r=c,a="ngCurrencyMask",i=function(e){(_.isUndefined(e)||_.isNull(e))&&(e=o.$viewValue||t[0].value);if(e)return t[0].value=l("currency")(r.clearSeparators(e),""),t[0].value};if(!o)throw new Error(a+" requires ngModel!");if(!/input/i.test(t[0].tagName))throw new Error(a+" should be binded to <input />.");return t.on("blur",function(e){return i()}),o.$parsers.unshift(r.toFloat),o.$formatters.unshift(r.toFloatString),s(i)}}}angular.module("lu").service("CurrencyMaskUtils",function(){return{clearSeparators:t,toFloat:function(e){if(e){e=Math.abs(parseFloat(t(e).toFixed(2))+0);return isNaN(e)?void 0:e}},toFloatString:function(e){if(e)return Math.abs(e).toFixed(2)}};function t(e){if(!_.isUndefined(e)&&!_.isNull(e))return angular.isNumber(e)&&(e=e.toString()),e=e.replace(/,/g,".").replace(/\.(?![^.]*$)/g,""),parseFloat(e)}}).directive("luCurrencyMask",e),e.$inject=["$timeout","$filter","CurrencyMaskUtils"]}(),function(){"use strict";function e(e){return{restrict:"A",require:"?ngModel",link:function(e,t,n,o){var r;o&&(r={prefix:"",centsSeparator:".",thousandsSeparator:""},o.$parsers.unshift(function(e){return t.priceFormat(r),t[0].value}),o.$formatters.unshift(function(e){return t[0].value=100*o.$modelValue,t.priceFormat(r),t[0].value}))}}}angular.module("lu").directive("luCurrencyInput",e),e.$inject=["$filter"]}(),function(h){h.fn.priceFormat=function(g){return g=h.extend({prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:"",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1},g),this.each(function(){var a=h(this),s=/[0-9]/,l=g.prefix,c=g.suffix,u=g.centsSeparator,d=g.thousandsSeparator,p=g.limit,_=g.centsLimit,t=g.clearPrefix,n=g.clearSuffix,m=g.allowNegative,f=g.insertPlusSign;function i(e){var t=function(e){for(;e.length<_+1;)e="0"+e;return e}(function(e){for(var t="",n=0;n<e.length;n++)char_=e.charAt(n),0===t.length&&0===char_&&(char_=!1),char_&&char_.match(s)&&(!p||t.length<p)&&(t+=char_);return t}(e)),n="",o=0;0===_&&(r=u="");var r=t.substr(t.length-_,_),a=t.substr(0,t.length-_),t=0===_?a:a+u+r;if(d||""!==h.trim(d)){for(var i=a.length;0<i;i--)char_=a.substr(i-1,1),++o%3==0&&(char_=d+char_),n=char_+n;n.substr(0,1)===d&&(n=n.substring(1,n.length)),t=0===_?n:n+u+r}return!m||0===a&&0===r||(t=-1!==e.indexOf("-")&&e.indexOf("+")<e.indexOf("-")?"-"+t:f?"+"+t:""+t),l&&(t=l+t),c&&(t+=c),t}function e(){var e=a.val(),t=i(e);e!==t&&a.val(t)}function o(){var e;""!==h.trim(l)&&t&&(e=a.val().split(l),a.val(e[1]))}function r(){var e;""!==h.trim(c)&&n&&(e=a.val().split(c),a.val(e[0]))}f&&(m=!0),h(this).bind("keydown.price_format",function(e){var t=e.keyCode?e.keyCode:e.which,n=String.fromCharCode(t),o=!1,r=a.val(),n=i(r+n);(48<=t&&t<=57||96<=t&&t<=105)&&(o=!0),8===t&&(o=!0),9===t&&(o=!0),13===t&&(o=!0),46===t&&(o=!0),37===t&&(o=!0),39===t&&(o=!0),!m||189!==t&&109!==t||(o=!0),!f||187!==t&&107!==t||(o=!0),o||(e.preventDefault(),e.stopPropagation(),r!==n&&a.val(n))}),h(this).bind("keyup.price_format",e),h(this).bind("focusout.price_format",e),t&&(h(this).bind("focusout.price_format",function(){o()}),h(this).bind("focusin.price_format",function(){var e;e=a.val(),a.val(l+e)})),n&&(h(this).bind("focusout.price_format",function(){r()}),h(this).bind("focusin.price_format",function(){var e;e=a.val(),a.val(e+c)})),0<h(this).val().length&&(e(),o(),r())})},h.fn.unpriceFormat=function(){return h(this).unbind(".price_format")},h.fn.unmask=function(){var e,t=h(this).val(),n="";for(e in t)isNaN(t[e])&&"-"!==t[e]||(n+=t[e]);return n}}(jQuery),function(){"use strict";angular.module("lu").directive("luNumbersOnly",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){o.$parsers.push(function(e){if(void 0===e)return"";var t=e.replace(/[^0-9]/g,"");return t!=e&&(o.$setViewValue(t),o.$render()),t})}}})}(),function(){"use strict";function e(e,t){return['<a href="#" ng-click="select()" class="{{btnClass}}" aria-label="{{btnAria}}" ng-class="{ \'is-active\' : (ngModel == radioValue) }">','<input type="radio" id="{{id}}" name="{{name}}" ng-model="ngModel" ng-value="{{radioValue}}" ng-style="{\'display\':\'none\'}" />',"<span ng-transclude></span>","</a>"].join("")}angular.module("lu.form",[]).directive("luRadioButton",function(){return{replace:!0,restrict:"E",transclude:!0,require:"?^form",scope:{id:"@",name:"@",ngModel:"=",radioValue:"@",btnClass:"@",btnAria:"@",selectCb:"&onSelect"},template:e,link:function(e,t,n,o){e.select=function(){o&&o.$setDirty();e.ngModel=e.radioValue,e.selectCb&&e.selectCb({value:e.radioValue})}}}})}(),function(){"use strict";function e(t,i){return{restrict:"A",require:"^ngModel",replace:!0,scope:{name:"@",form:"=",bindedModel:"=ngModel",config:"=?config"},link:{pre:angular.noop,post:function(o,e,r,a){o.helper=t,o.config=angular.isDefined(o.config)?o.config:{},o.rules=angular.isDefined(o.config.regex_validator)?o.config.regex_validator:[],o.attr=r,!0===o.config.is_enabled&&o.rules&&o.$watch("bindedModel",function(e,t){var n;n=e,e=o.rules,o.form,angular.forEach(e,function(e){var t=new RegExp(e.regex);i.debug("=========Validating========="),i.debug("Name: "+e.name),i.debug("Valid?: "+!!n&&t.test(n)),a.$setValidity(e.name,!!n&&t.test(n)),o.form[r.name].$setValidity(e.name,!!n&&t.test(n)),i.debug("=======End Validating=======")})})}},template:function(e,t){return'<div ng-show="!!config.is_enabled"><ul class="list-unstyled row password-requirements"><li class="col-sm-4" ng-repeat="rule in rules | orderBy:form_label.order" ng-class="{ completed: !form[\''+t.name+"'].$error[rule.name] }\" >{{ helper.showMessage(rule.form_label.translation_key, rule.form_label.translation_options) }}</li></ul></div>"}}}angular.module("lu").directive("passwordValidator",e),e.$inject=["LupHelper","$log"]}(),function(){"use strict";function e(r){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){o.$parsers.push(function(e){return r.get("/clients/check-subdomain.json?subdomain="+encodeURIComponent(e)).success(function(e){e.includes("shortDomainName")?o.$setValidity("shortSubdomainName",!1):o.$setValidity("shortSubdomainName",!0),e.includes("blacklisted")?o.$setValidity("validDomainName",!1):o.$setValidity("validDomainName",!0),e.includes("taken")?o.$setValidity("subdomainTaken",!1):o.$setValidity("subdomainTaken",!0),e.includes("alphaNumOnly")?o.$setValidity("alphaNumOnly",!1):o.$setValidity("alphaNumOnly",!0),e.includes("upcaseLettersInSubdomainName")?o.$setValidity("upcaseLettersInSubdomainName",!1):o.$setValidity("upcaseLettersInSubdomainName",!0),e.includes("available")&&(o.$setValidity("subdomainTaken",!0),o.$setValidity("validDomainName",!0),o.$setValidity("shortSubdomainName",!0),o.$setValidity("alphaNumOnly",!0),o.$setValidity("upcaseLettersInSubdomainName",!0))}),e})}}}window.angular.module("lu").directive("validSubdomain",e),e.$inject=["$http"]}(),function(){"use strict";function e(r,a,i){return{restrict:"EA",replace:!0,scope:{column:"=",ludashModel:"=",options:"="},link:function(e,t,n){var o=e.column;o.cid||(o.cid=r.id());angular.isDefined(o.rows)&&angular.isArray(o.rows)&&a(i)(e,function(e){t.append(e)})},templateUrl:"/tc/lu-dashboard/dashboard-column.html"}}angular.module("lu.ludash").directive("luDashboardColumn",e),e.$inject=["dashboard","$compile","rowTemplate"]}(),function(){"use strict";function e(){var n={},o={},r={},t=null,a='<div class="alert alert-danger mb-0">{}</div>',i='<div class="text-center my-48" ><i class="fa fa-spinner fa-spin"></i><span>'+I18n.t("loading")+"</span></div>";function e(){var e=0;return{id:function(){return(new Date).getTime()+"-"+ ++e},layouts:n,widgets:o,chartOptions:r,customWidgetTemplatePath:t,loadingTemplate:i,errorTemplate:a}}this.layout=function(e,t){return n[e]=t,this},this.widget=function(e,t){t=angular.extend({reload:!1},t);return o[e]=t,this},this.chartOption=function(e,t){t=angular.extend({},t);return r[e]=t,this},this.customWidgetTemplatePath=function(e){return t=e,this},(this.$get=e).$inject=[]}angular.module("lu.ludash.provider",[]).provider("dashboard",e),e.$inject=[]}(),function(){"use strict";function e(e){return{replace:!0,restrict:"EA",transclude:!1,scope:{layout:"@",name:"@",ludashModel:"="},link:function(e,t,n){var o={name:n.name,editable:!0,enableConfirmDelete:r(n.enableConfirmDelete),maximizable:r(n.maximizable),collapsible:r(n.collapsible),categories:r(n.categories)};angular.isDefined(n.editable)&&(o.editable=r(n.editable));e.options=o},controller:t,templateUrl:"/tc/lu-dashboard/dashboard.html"};function r(e){switch(angular.isDefined(e)?e.toLowerCase():null){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}}function t(n,o){var r,a,i={};n.name;n.$watch("ludashModel",function(e,t){(null!==t||null===e&&null===t)&&(i=n.ludashModel,n.ludashWidgetFilter,i&&i.rows||(a=n.layout,(r=dashboard.layouts[a])?(i?i.rows=angular.copy(r).rows:i=angular.copy(r),i.layout=a):o.error("could not find layout "+a)),i?(i.title||(i.title=I18n.t("lup.subnav.lup_admin_dashboard")),n.model=i):o.error("could not find or create model"))},!0),n.editMode=!1,n.editClass=""}angular.module("lu.ludash").directive("luDash",e),e.$inject=["dashboard"],t.$inject=["$scope","$log"]}(),function(){"use strict";angular.module("lu.ludash.layouts",["lu.ludash"]).config(["dashboardProvider",function(e){e.layout("3-3-3-3/12/6-6",{rows:[{columns:[{styleClass:"col-md-3"},{styleClass:"col-md-3"},{styleClass:"col-md-3"},{styleClass:"col-md-3"}]},{columns:[{styleClass:"col-md-12"}]},{columns:[{styleClass:"col-md-6"},{styleClass:"col-md-6"}]}]})}])}(),function(){"use strict";function e(o,r){return{restrict:"EA",replace:!0,scope:{row:"=",ludashModel:"=",options:"="},link:function(e,t,n){angular.isDefined(e.row.columns)&&angular.isArray(e.row.columns)&&r(o)(e,function(e){t.append(e)})},templateUrl:"/tc/lu-dashboard/dashboard-row.html"}}angular.module("lu.ludash").directive("luDashboardRow",e),e.$inject=["columnTemplate","$compile"]}(),function(){"use strict";angular.module("lu.ludash").config(["dashboardProvider",function(e){e.chartOption("chart-user-logins",{lang:{noData:I18n.t("loading")},title:{text:null},noData:{style:{fontSize:"12px",fontWeight:"bold",color:"#60606a"}},xAxis:{type:"datetime",tickInterval:6048e5,tickWidth:0,labels:{formatter:function(){return Highcharts.dateFormat("%a %d %b",this.value)}}},credits:{enabled:!1},yAxis:{labels:{offset:5,enabled:!0,formatter:function(){return Highcharts.numberFormat(this.value,1)}},title:{text:""}},legend:{align:"center",verticalAlign:"bottom",floating:!1,borderWidth:0},tooltip:{shared:!0,crosshairs:!0},series:[{name:I18n.t("charts.logins"),lineWidth:4,marker:{radius:4}}]}),e.chartOption("chart-enrollment-movements",{lang:{noData:I18n.t("loading")},title:{text:null},noData:{style:{fontSize:"12px",fontWeight:"bold",color:"#60606a"}},xAxis:{type:"datetime",tickInterval:2592e5,tickWidth:0,labels:{formatter:function(){return Highcharts.dateFormat("%a %d %b",this.value)}},staggerLines:2},yAxis:{labels:{offset:5,enabled:!0,formatter:function(){return Highcharts.numberFormat(this.value,1)}},title:{text:""}},legend:{align:"center",verticalAlign:"bottom",floating:!1,borderWidth:0},tooltip:{shared:!0,crosshairs:!0},credits:{enabled:!1},series:[{name:I18n.t("charts.enrolled"),lineWidth:4,marker:{radius:4}},{name:I18n.t("charts.started")},{name:I18n.t("charts.completed")}]})}])}(),function(){"use strict";function e(n,l,c,u,d,p,_){return{replace:!0,restrict:"EA",transclude:!1,scope:{model:"=",content:"="},link:function(e,t){var n=o(e,t,null);e.$on("widgetConfigChanged",function(){n=o(e,t,n)}),e.$on("widgetReload",function(){n=o(e,t,n)})}};function m(e,t){n.warn(t),e.html(_.errorTemplate.replace(/{}/g,t))}function o(e,t,n){var o=e.model,r=e.content,a=n;return o?r?a=function(e,n,t,o,r){n.html(_.loadingTemplate);var a=e.$new();o.config||(o.config={});a.config=o.config;var i={$scope:a,widget:o,config:o.config},s={};s.$tpl=c.getTemplate(r),r.resolve&&angular.forEach(r.resolve,function(e,t){angular.isString(e)?s[t]=p.get(e):s[t]=p.invoke(e,e,i)});l.all(s).then(function(e){angular.extend(e,i),r.resolveAs&&(a[r.resolveAs]=e);var t=e.$tpl;n.html(t),r.controller&&(e=d(r.controller,e),r.controllerAs&&(a[r.controllerAs]=e),n.children().data("$ngControllerController",e)),u(n.contents())(a)},function(e){var t="Could not resolve all promises";e&&(t+=": "+e),m(n,t)}),t&&t.$destroy();return a}(e,t,n,o,r):m(t,"widget content is undefined"):m(t,"model is undefined"),a}}angular.module("lu.ludash").directive("luDashboardWidgetContent",e),e.$inject=["$log","$q","widgetFactory","$compile","$controller","$injector","dashboard"]}(),function(){"use strict";function e(o,r,a,i,s){return{getTemplate:function(t){var n=r.defer();{var e;t.template?n.resolve(t.template):t.templateUrl&&((e=i.get(t.templateUrl))?n.resolve(e):(e=a.getTrustedResourceUrl(function(e){var t=e;return 0<=e.indexOf("{widgetsPath}")&&0===(t=e.replace("{widgetsPath}",s.widgetsPath).replace("//","/")).indexOf("/")&&(t=t.substring(1)),t}(t.templateUrl)),o.get(e).success(function(e){i.put(t.templateUrl,e),n.resolve(e)}).error(function(){n.reject("could not load template")})))}return n.promise}}}angular.module("lu.ludash").factory("widgetFactory",e),e.$inject=["$http","$q","$sce","$templateCache","dashboard"]}(),function(){"use strict";function e(o,r){return{replace:!0,restrict:"EA",transclude:!1,templateUrl:o.customWidgetTemplatePath?o.customWidgetTemplatePath:r+"widget.html",scope:{definition:"=",col:"=column",options:"=",widgetState:"="},controller:n,compile:function(){return{pre:e,post:t}}};function e(e){var t,n=e.definition;!n||(t=o.widgets[n.type])&&(n.title||(n.title=t.title),n.hideTitle?n.title="":n.title||(n.title=t.title),n.titleTemplateUrl||(n.titleTemplateUrl=r+"widget-title.html",t.titleTemplateUrl&&(n.titleTemplateUrl=t.titleTemplateUrl)),n.titleTemplateUrl||(n.frameless=t.frameless),n.styleClass||(n.styleClass=t.styleClass),n.wid||(n.wid=o.id()),e.widget=angular.copy(t),(n=n.config)?angular.isString(n)&&(n=angular.fromJson(n)):n={},e.config=n,e.widgetState||(e.widgetState={},e.widgetState.isCollapsed=!0===t.collapsed&&t.collapsed))}function t(e,t){e.definition&&(e.reload=function(){e.$broadcast("widgetReload")})}}function n(e){e.widgetClasses=function(e,t){t=t.styleClass||"";return e||(t+=" panel panel-default"),t}}angular.module("lu.ludash").directive("luDashboardWidget",e),e.$inject=["dashboard","ludashTemplatePath"],n.$inject=["$scope"]}(),function(){"use strict";function e(e){e.widget("high-chart",{title:"Simple chart",description:"Displays a simple chart",templateUrl:"/tc/lu-dashboard/widgets/high-chart/view.html"})}function t(u,d,p,m,f){return{restrict:"EA",replace:!0,template:"<div></div>",scope:{options:"=",data:"=",apiUrl:"=?",type:"="},link:function(n,e){var a,t=n.data?n.data:[],o=n.options?n.options:u.chartOptions[n.type];function r(e,t){angular.isDefined(e)&&angular.isFunction(t)&&d.get(e).then(function(e){angular.isDefined(e)&&angular.isDefined(e.data)&&angular.isDefined(e.data.chart_data)&&(t(e.data.chart_data)||(n.chart.hideNoData(),n.chart.showNoData(m.showMessage("reports.no_data_found"))))})}function i(e){var t=[];if(!angular.isArray(e))return t;try{for(var n=0;n<e.length;n++)a=e[n].sign_in_audit.created_date.split("-"),t.push([Date.UTC(a[0],a[1]-1,a[2]),e[n].sign_in_audit.cnt])}catch(e){f.debug("Unable to prepare data for HighCharts"+e),t=[]}return t}function s(e){e=i(e);return n.chart.series[0].setData(e),!_.isEmpty(e)}function l(e){var t={enrolled:[],started:[],completed:[]};if(!angular.isArray(e))return t;try{if(angular.isDefined(e[0]))for(var n=0;n<e[0].length;n++)a=e[0][n].enrollment.rec_date.split("-"),t.enrolled.push([Date.UTC(a[0],a[1]-1,a[2]),e[0][n].enrollment.cnt]);if(angular.isDefined(e[1]))for(var o=0;o<e[1].length;o++)a=e[1][o].enrollment.rec_date.split("-"),t.started.push([Date.UTC(a[0],a[1]-1,a[2]),e[1][o].enrollment.cnt]);if(angular.isDefined(e[2]))for(var r=0;r<e[2].length;r++)a=e[2][r].enrollment.rec_date.split("-"),t.completed.push([Date.UTC(a[0],a[1]-1,a[2]),e[2][r].enrollment.cnt])}catch(e){f.debug("Unable to prepare data for HighCharts. ex: "+e.message),t={enrolled:[],started:[],completed:[]}}return t}function c(e){e=l(e);return n.chart.series[0].setData(e.enrolled),n.chart.series[1].setData(e.started),n.chart.series[2].setData(e.completed),!(!e||_.isEmpty(e.enrolled)&&_.isEmpty(!!e.started)&&_.isEmpty(!!e.completed))}n.no_data_to_display=!1,"chart-user-logins"===n.type?angular.isUndefined(n.apiUrl)&&(o.series[0].data=i(t)):"chart-enrollment-movements"===n.type&&angular.isUndefined(n.apiUrl)&&(t=l(t),o.series[0].data=t.enrolled,o.series[1].data=t.started,o.series[2].data=t.completed),n.chart=Highcharts.chart(e[0],o),p(function(){angular.isDefined(n.apiUrl)&&("chart-user-logins"===n.type?r(n.apiUrl,s):"chart-enrollment-movements"===n.type&&r(n.apiUrl,c))})}}}e.$inject=["dashboardProvider"],angular.module("lu.ludash.widget.high-chart",["lu.ludash"]).config(e).directive("luChartWidget",t),t.$inject=["dashboard","$http","$timeout","LupHelper","$log"]}(),function(){"use strict";function e(e){e.widget("leaderboard",{title:"Leaderboard widget",description:"Displays leaderboard widget",templateUrl:"/tc/lu-dashboard/widgets/leaderboard/view.html"})}function t(e,o,t,r){return{restrict:"EA",replace:!0,templateUrl:"/tc/badges/admin_widget_leaderboard.html",scope:{apiUrl:"=?",type:"="},link:{pre:function(t,e){function n(){var e;t.current_page++,t.isLoading=!0,t.apiUrl&&(e={method:"GET",url:t.apiUrl,params:{page:t.current_page}},o(e).then(function(e){angular.isDefined(e)&&angular.isDefined(e.data)&&angular.isDefined(e.data.users)&&(_.each(e.data.users.data,function(e){t.users.push(e)}),!1===e.data.users.meta.next_page&&(t.hasMore=!1),t.isLoading=!1)}))}t.lupHelper=r,t.isLoading=!0,t.hasMore=!0,t.current_page=0,t.loadMoreEvent="leaderboard::loadMore",t.users=[],t.$on(t.loadMoreEvent,function(){n()}),n()},post:angular.noop}}}e.$inject=["dashboardProvider"],angular.module("lu.ludash.widget.leaderboard",["lu.ludash"]).config(e).directive("luLeaderboardWidget",t),t.$inject=["dashboard","$http","$timeout","LupHelper","$log","UsersFactory"]}(),function(){"use strict";function e(e){e.widget("quick-action-list",{title:"Quick Action List",description:"Displays a list of quick actions",templateUrl:"/tc/lu-dashboard/widgets/quick-action-list/view.html"})}e.$inject=["dashboardProvider"],angular.module("lu.ludash.widget.quick-action-list",["lu.ludash"]).config(e)}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l,c,u,d){var p,_,e=e.get(),m=new a;t.course=e.course.attributes,t.checklist_enrollments=e.checklist_enrollments,t.checklist_for_select=(_=[],(p=[]).push(["All",0]),angular.forEach(t.checklist_enrollments.data,function(e){_.includes(e.checklist_id)||(_.push(e.checklist_id),p.push([e.checklist_name,e.checklist_id]))}),_=null,p),t.Helper=o,t.window=i,t.filteringControl={},t.filterChecklistName=0,t.searchText=null,t.clearFiltering=function(){t.filterChecklistName=0,f()},t.filterOptions=function(){return[{filterName:"filter_select_checklist",value:t.filterChecklistName}]},t.loadData=f,t.openChecklist=function(e){i.location="/courses/"+t.course.id+"/checklists_observation/"+e.enrollment_component_id},t.ariaLabelSide=o.showMessage("lup.a11y.checklists_sidebar_filtering");o=[{title:o.showMessage("lup.breadcrumbs.courses.index"),url:"/courses"},{title:t.course.name,url:"/courses/"+t.course.id},{title:o.showMessage("lup.breadcrumbs.components.checklist"),url:"/courses/"+t.course.id+"/checklists_observation"}];function f(){var e={};e.params=r.get(),m.getChecklistForPendingObservation(t.course.id,e).then(function(){t.checklist_enrollments=m.data.checklist_enrollments})}n.breadcrumbs=o,n.$on("publishCourse",function(){s.publishCourse(t)}),n.$on("createNewCourseVersion",function(){s.createNewCourseVersion(t)}),n.$on("deleteCourse",function(){s.deleteCourse(t)})}angular.module("lu").controller("CoursesChecklistsController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","paramsService","CourseFactory","$window","CourseActionFactory","LupJobFactory","$luPopover","$http","spinnerService"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){e.memberType=o,e.association_membership_types=r;var l=new s;e.new_membership_label=e.memberType.membership_label,e.LupHelper=a,e.cancel=function(){t.close()},e.save=function(){l.saveMemberType(o.id,e.new_membership_label).then(function(){e.memberType.membership_label=e.new_membership_label,l.data.error||(o.id||e.association_membership_types.push(l.data.association_membership_type.attributes),t.close())})}}window.angular.module("lu").controller("EditMemberTypeController",e),e.$inject=["$scope","$modalInstance","$http","memberType","association_membership_types","LupHelper","$filter","PortalSettingFactory"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsAssociationsCreditsController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal","$q",function(n,o,e,t,r,a,i,s,l,c){t=t.get(),new s;n.enabled_learning_credits=t.enabled_learning_credits.data,n.disabled_learning_credits=t.disabled_learning_credits.data,n.allowed_to_add_more_credits=t.allowed_to_add_more_credits,n.LupHelper=r,n.cancel=function(){a.location="/settings/associations/credits"},a.portalSettingFormDirty=!1,n.disableLearningCredit=function(e){var t=c.defer();return o.post("/portal_learning_credits/disable.json",{learning_credit_id:e}).success(function(e){t.resolve(e),a.location.reload()}).error(function(){t.reject("Failed to disable learning credit")}),t.promise},n.deleteLearningCredit=function(t){var e=c.defer();return i.confirm(r.showMessage("lup.confirm"),r.showMessage("lup.portal_learning_credits.delete_credits_warning")).then(function(e){o.delete("/portal_learning_credits/"+t+".json").then(function(e){a.location.reload()})}),e.promise},n.activeCreditDDM={},n.toggled=function(e,t){n.activeCreditDDM[t]=e},n.openNewLearningCreditModal=function(){n.allowed_to_add_more_credits?l.open({templateUrl:"/tc/portal_learning_credits/new_learning_credit.html",controller:"PortalLearningCreditsNewController",size:"md",resolve:{learning_credits:function(){return n.disabled_learning_credits},resource:function(){return"Success"}}}).result.then(function(){a.location.reload()}):i.notify("",r.showMessage("lup.portal_learning_credits.max_credits_reached"))},n.openEditLearningCreditModal=function(t){t.is_disabled?i.confirm(r.showMessage("lup.confirm"),r.showMessage("lup.portal_learning_credits.edit_name_warning")).then(function(e){l.open({templateUrl:"/tc/portal_learning_credits/edit_learning_credit.html",controller:"PortalLearningCreditsEditController",size:"md",resolve:{learning_credit:function(){return t},resource:function(){return"Success"}}}).result.then(function(){a.location.reload()})}):l.open({templateUrl:"/tc/portal_learning_credits/edit_learning_credit.html",controller:"PortalLearningCreditsEditController",size:"md",resolve:{learning_credit:function(){return t},resource:function(){return"Success"}}}).result.then(function(){a.location.reload()})}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsAssociationsPricingController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(n,o,e,t,r,a,i,s,l){t=t.get();n.associations_settings=t.associations_settings.attributes,n.association_membership_types=t.association_membership_types.data,n.association_membership_types_dropdown=t.association_membership_types_dropdown,n.LupHelper=r,n.cancel=function(){a.location="/settings/associations/pricing"},n.save=function(e){{var t;n.theForm.$valid&&(t={associations_settings:{id:n.associations_settings.id,enable_member_pricing:n.associations_settings.enable_member_pricing,default_pricing_membership_type:n.associations_settings.default_pricing_membership_type}},o.put("/settings/associations/update.json",t).success(function(e){a.location="/settings/associations/pricing"}).error(function(e){a.location="/settings/associations/pricing"}))}},a.portalSettingFormDirty=!1,n.setForm=function(e){n.theForm=e}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsAssociationsSelfawardController",["$scope","$http","$rootScope","StorageFactory","LupHelper","GroupUserVM","$window","$luPopover","PortalSettingFactory","$modal","$timeout","$q",function(o,r,e,t,a,i,n,s,l,c,u,d){t=t.get(),new l;o.associations_settings=t.associations_settings.attributes,o.LupHelper=a,o.cancel=function(){n.location="/settings/associations/selfaward"},o.selected_admin=null,n.portalSettingFormDirty=!1,o.usersSelectedArray=t.administrators_for_approving.data,o.fetchUsers=function(e){var t=d.defer(),n=o.usersSelectedArray.map(function(e){return e.pm_id}).toString();return r.get("/all_users.json",{params:{search:e.$query,by_membership_type:a.groupMembershipTypes.admin,page:e.$page,page_size:a.pagination_sizes.typeadhead_default,except:n}}).success(function(e){e=e.users.data,e=_.map(e,function(e){return(e=new i(e)).id=e.user_id,e.firstLineDisplay=angular.isDefined(e.display_name)?e.display_name:"",e.secondLineDisplay=angular.isDefined(e.email)?e.email:"",e});t.resolve(e)}).error(function(){t.reject(a.showMessage("userz.failed_to_get_users"))}),t.promise},o.compareUsers=function(e,t){return!!(angular.isDefined(!!e)&&angular.isDefined(e.user_id)&&angular.isDefined(!!t)&&angular.isDefined(t.user_id))&&e.user_id===t.user_id},o.usersTrackerFn=function(e,t,n){return e.user_id},o.save=function(e){{var t;o.theForm.$valid&&(t={approvers:_.select(o.usersSelectedArray,function(e){return e}),associations_settings:{id:o.associations_settings.id,add_credits_button_label:o.associations_settings.add_credits_button_label,credits_panel_name:o.associations_settings.credits_panel_name,enable_self_award:o.associations_settings.enable_self_award,expiry_date_is_required:o.associations_settings.expiry_date_is_required,pre_approved_self_award_events:o.associations_settings.pre_approved_self_award_events,score_is_required:o.associations_settings.score_is_required,self_award_requires_approval:o.associations_settings.self_award_requires_approval}},r.put("/settings/associations/update.json",t).success(function(e){n.location="/settings/associations/selfaward"}).error(function(e){n.location="/settings/associations/selfaward"}))}},o.showSaveOnChange=function(){o.forceShowSave=!0},o.setForm=function(e){o.theForm=e};var p,m,f,g;u(function(){o.$watch("associations_settings.credits_panel_name",function(e,t){var n=!!o.associations_settings.credits_panel_name||""===o.associations_settings.credits_panel_name;p=!n||o.associations_settings.credits_panel_name.length<=25,f=!n||0<o.associations_settings.credits_panel_name.length,o.portal_setting_form.$setValidity("isCreditsPanelNameValid",p),o.portal_setting_form.$setValidity("isCreditsPanelNameBlank",f)}),o.$watch("associations_settings.add_credits_button_label",function(e,t){var n=!!o.associations_settings.add_credits_button_label||""===o.associations_settings.add_credits_button_label;m=!n||o.associations_settings.add_credits_button_label.length<=25,g=!n||0<o.associations_settings.add_credits_button_label.length,o.portal_setting_form.$setValidity("isCreditsButtonLabelValid",m),o.portal_setting_form.$setValidity("isCreditsButtonLabelBlank",g)})})}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsAssociationsTypesController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(n,o,e,t,r,a,i,s,l){var t=t.get(),c=new s;n.associations_settings=t.associations_settings.attributes,n.association_membership_types=t.association_membership_types.data,n.LupHelper=r,n.cancel=function(){a.location="/settings/associations/types"},a.portalSettingFormDirty=!1,n.save=function(e){{var t;n.theForm.$valid&&(t={approvers:_.select(n.usersSelectedArray,function(e){return e}),associations_settings:{id:n.associations_settings.id,enable_membership_types:n.associations_settings.enable_membership_types}},o.put("/settings/associations/update.json",t).success(function(e){a.location="/settings/associations/types"}).error(function(e){a.location="/settings/associations/types"}))}},n.activeMemTypeDDM={},n.toggled=function(e,t){n.activeMemTypeDDM[t]=e},n.setForm=function(e){n.theForm=e},n.$on("addNewType",function(){l.open({templateUrl:"/tc/settings/edit_member_type.html",controller:"EditMemberTypeController",size:"lg",resolve:{memberType:function(){return{id:null}},association_membership_types:function(){return n.association_membership_types}}})}),n.deleteType=function(t){var e=I18n.t("lup.associations.are_your_sure_you_want_to_delete_this_association_membership_type");i.confirm(I18n.t("lup.confirm"),e).then(function(e){c.destroyMemberType(n.association_membership_types[t].id).then(function(){c.data.error||n.association_membership_types.splice(t,1)})})},n.editType=function(e){l.open({templateUrl:"/tc/settings/edit_member_type.html",controller:"EditMemberTypeController",size:"lg",resolve:{memberType:function(){return n.association_membership_types[e]},association_membership_types:function(){return n.association_membership_types}}})}}])}(),function(){"use strict";function e(e,t,n,o,r){var a=this;function i(e){return{enabled:e.enabled,enabled_slide_type:e.enabled_slide_type,banner_interval:e.banner_interval,default_banner_interval:e.default_banner_interval}}function s(t,n){return _.select(a.catalogBanner.slides,function(e){return"boolean"==typeof n?e.type===t&&e.enabled===n:e.type===t})}a.helper=e,a.catalogBanner=t.getKey("catalog_banner").attributes,a.form=i(t.getKey("catalog_banner").attributes),n.ariaLabel=e.showMessage("lup.a11y.internal_course_banner_settings_main"),n.ariaLabelSide=e.showMessage("lup.a11y.internal_course_banner_settings_aside"),r.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.settings.index"),url:"/settings"},{title:I18n.t("lup.breadcrumbs.settings.catalog_banners"),url:"/settings/catalog/banners"}],a.slides=s,a.save=function(t){var e=_.map(function(e){return _.select(s(e,"any"),function(e){return!!e.touched})}(a.form.enabled_slide_type),function(e){return{id:e.id,enabled:e.enabled}});t.$setPristine(),o.updateCatalogBanner(a.form,e).then(function(e){a.form,a.catalogBanner&&a.catalogBanner.slides&&_.each(a.catalogBanner.slides,function(e){e.touched=!1})}).catch(function(e){t.$setDirty()})},a.cancel=function(e){a.form=i(t.getKey("catalog_banner").attributes),e.$setPristine()},a.editSlide=function(e){window.location="/settings/catalog/banners/:slide_id/edit/".replace(/:slide_id/,e.id)},a.touchSlide=function(e){e.touched=!e.touched},a.show_interval=function(e){if((e===a.helper.portalBannerSlideTypes.multimedia_slide||e===a.helper.portalBannerSlideTypes.image_slide)&&1<s(e,!0).length)return!0;return!1},a.selectSlideType=function(e){a.form.enabled_slide_type=e,a.form.slides=s(e,"any")},a.selectedType=function(e){return a.form.enabled_slide_type==e},a.selectedTypeHeading=function(){switch(a.form.enabled_slide_type){case a.helper.portalBannerSlideTypes.multimedia_slide:return a.helper.showMessage("lup.settings.promo_banners_settings.multimedia_banners");case a.helper.portalBannerSlideTypes.image_slide:return a.helper.showMessage("lup.settings.promo_banners_settings.image_banners");case a.helper.portalBannerSlideTypes.content_slide:return a.helper.showMessage("lup.settings.promo_banners_settings.centered_content")}},a.getSlideName=function(e,t){switch(t){case a.helper.portalBannerSlideTypes.multimedia_slide:return a.helper.showMessage("lup.settings.promo_banners_settings.multimedia_banner_counter",{counter:e+1});case a.helper.portalBannerSlideTypes.image_slide:return a.helper.showMessage("lup.settings.promo_banners_settings.image_banners_counter",{counter:e+1});case a.helper.portalBannerSlideTypes.content_slide:return a.helper.showMessage("lup.settings.promo_banners_settings.centered_content")}}}angular.module("lu").controller("SettingsCatalogBannersController",e),e.$inject=["LupHelper","StorageFactory","$scope","PortalBannerFactory","$rootScope"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsCatalogGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory",function(n,e,t,o,r,a,i,s){var o=o.get(),l=new s;n.portal_setting=o.portal_setting.attributes,n.portal_catalog=o.portal_catalog,n.public_catalog_allowed=o.public_catalog_allowed,n.catalogRedesignEnabled=o.catalog_redesign_enabled,n.LupHelper=r,n.save=function(e){setup_data_filters.collectData();var t={portal_catalog:n.portal_catalog};e.$dirty&&l.updateSettings(t,"catalog/general").then(function(e){a.location.reload()})},n.cancel=function(){a.location="/settings/catalog/general"},a.portalSettingFormDirty=!1,n.$watch(function(){return a.portalSettingFormDirty},function(e,t){e&&(n.portal_setting_form.$setDirty(),a.portalSettingFormDirty=!1)})}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsCategoriesController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","GroupsFactory",function(n,e,t,o,r,a,i,s,l){var o=o.get(),c=new s,u=new l;n.portal_setting=o.portal_setting.attributes,n.portal_cat_stats=o.portal_cat_stats,n.LupHelper=r,n.save=function(e){setup_data_filters.collectData();var t={portal_cat_stats:n.portal_cat_stats,portal_setting:{cat_name:n.portal_setting.cat_name}};e.$dirty&&c.updateSettings(t,"categories").then(function(e){n.portal_setting_form.$setPristine()})},n.cancel=function(){a.location="/settings/catalog/general"},a.portalSettingFormDirty=!1,n.dummy="",n.deleteCategory=function(t,e){i.confirm(I18n.t("lup.confirm"),I18n.t("categories.are_you_sure_you_want_to_delete_this_category_blurb",{title:e})).then(function(e){u.deleteCategory(t).then(function(){a.location.reload()})})},n.removeCategoryCourses=function(t,e){i.confirm(I18n.t("lup.confirm"),I18n.t("categories.are_you_sure_you_want_to_remove_all_courses_from_this_category")).then(function(e){u.removeCategoryCourses(t).then(function(){a.location.reload()})})},n.$watch(function(){return a.portalSettingFormDirty},function(e,t){e&&(n.portal_setting_form.$setDirty(),a.portalSettingFormDirty=!1)})}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsCoursesCreditsController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal","$q",function(e,n,t,o,r,a,i,s,l,c){o=o.get(),new s;e.enabled_learning_credits=o.enabled_learning_credits.data,e.disabled_learning_credits=o.disabled_learning_credits.data,e.allowed_to_add_more_credits=o.allowed_to_add_more_credits,e.LupHelper=r,e.cancel=function(){a.location="/settings/courses/credits"},a.portalSettingFormDirty=!1,e.disableLearningCredit=function(e){var t=c.defer();return n.post("/portal_learning_credits/disable.json",{learning_credit_id:e}).success(function(e){t.resolve(e),a.location.reload()}).error(function(){t.reject("Failed to disable learning credit")}),t.promise},e.deleteLearningCredit=function(t){var e=c.defer();return i.confirm(r.showMessage("lup.confirm"),r.showMessage("lup.portal_learning_credits.delete_credits_warning")).then(function(e){n.delete("/portal_learning_credits/"+t+".json").then(function(e){a.location.reload()})}),e.promise},e.openNewLearningCreditModal=function(){e.allowed_to_add_more_credits?l.open({templateUrl:"/tc/portal_learning_credits/new_learning_credit.html",controller:"PortalLearningCreditsNewController",size:"md",resolve:{learning_credits:function(){return e.disabled_learning_credits},resource:function(){return"Success"}}}).result.then(function(){a.location.reload()}):i.notify("",r.showMessage("lup.portal_learning_credits.max_credits_reached"))},e.openEditLearningCreditModal=function(t){t.is_disabled?i.confirm(r.showMessage("lup.confirm"),r.showMessage("lup.portal_learning_credits.edit_name_warning")).then(function(e){l.open({templateUrl:"/tc/portal_learning_credits/edit_learning_credit.html",controller:"PortalLearningCreditsEditController",size:"md",resolve:{learning_credit:function(){return t},resource:function(){return"Success"}}}).result.then(function(){a.location.reload()})}):l.open({templateUrl:"/tc/portal_learning_credits/edit_learning_credit.html",controller:"PortalLearningCreditsEditController",size:"md",resolve:{learning_credit:function(){return t},resource:function(){return"Success"}}}).result.then(function(){a.location.reload()})}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsCoursesCustomdataController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal","CustomCourseDataFactory",function(o,e,t,n,r,a,i,s,l,c){var n=n.get(),u=(new s,new c);o.portal_setting=n.portal_setting.attributes,o.custom_course_data_definitions=n.custom_course_data_definitions,o.LupHelper=r,o.cancel=function(){a.location="/settings/courses/customdata"},a.portalSettingFormDirty=!1,o.ariaLabel=r.showMessage("lup.a11y.settings_list_custom_course_data"),o.ariaLabelSide=r.showMessage("lup.a11y.settings.general_aside"),o.activeCustomFieldDDM={},o.toggled=function(e,t){o.activeCustomFieldDDM[t]=e},o.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===r.keyboard_keys[e.which]){if(e.preventDefault(),null!==o.rememberReorderIndex&&n!==o.rememberReorderIndex){e=t[n];return t[n]=t[o.rememberReorderIndex],t[o.rememberReorderIndex]=e,t=t.map(function(e){return e.id}),u.reorderContent(t),o.rememberReorderIndex=null,void o.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}o.rememberReorderIndex=n}},o.rememberReorderIndex=null,o.ariaLabelForContentSegments=function(e,t){return null!==o.rememberReorderIndex?o.rememberReorderIndex===e?r.showMessage("a11y.exam_order_list.selected",{answer_option:t}):r.showMessage("a11y.exam_order_list.swap",{answer_option:t}):r.showMessage("a11y.exam_order_list.select",{answer_option:t})},t.$on("addNewField",function(){a.location="/custom_course_datas/new"}),o.dragControlListeners={orderChanged:function(e){for(var t=[],n=0;n<o.custom_course_data_definitions.data.length;n++)t.push(o.custom_course_data_definitions.data[n].id);u.reorderContent(t)},allowDuplicates:!1},o.delete_field=function(t){var e=I18n.t("lup.customdata.sure_to_delete");i.confirm(I18n.t("lup.confirm"),e).then(function(e){u.destroy(t).then(function(){a.location="/settings/courses/customdata"})})}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsCoursesGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal","$q","GroupUserVM",function(o,r,e,t,a,n,i,s,l,c,u){var d,p=t.get();new s;o.portal_setting=p.portal_setting,o.eac=p.enrollment_approval_configuration.attributes,o.LupHelper=a,o.usersSelectedArray=null!==(d=p.administrators_for_approving.data)?d:[],o.notificationReceivers="",o.fetchUsers=function(e){var t=c.defer(),n=o.usersSelectedArray.map(function(e){return e.pm_id}).toString();return r.get("/all_users.json",{params:{search:e.$query,by_membership_type:a.groupMembershipTypes.admin,page:e.$page,page_size:a.pagination_sizes.typeadhead_default,except:n}}).success(function(e){e=e.users.data,e=_.map(e,function(e){return(e=new u(e)).id=e.user_id,e.firstLineDisplay=angular.isDefined(e.display_name)?e.display_name:"",e.secondLineDisplay=angular.isDefined(e.email)?e.email:"",e});t.resolve(e)}).error(function(){t.reject(a.showMessage("userz.failed_to_get_users"))}),t.promise},o.compareUsers=function(e,t){return!!(angular.isDefined(!!e)&&angular.isDefined(e.user_id)&&angular.isDefined(!!t)&&angular.isDefined(t.user_id))&&e.user_id===t.user_id},o.usersTrackerFn=function(e,t,n){return e.user_id},o.showSaveOnChange=function(){o.notificationReceivers=_.map(o.usersSelectedArray,function(e){return e.id}),o.forceShowSave=!0},o.cancel=function(){n.location="/settings/courses/general"},o.invalidReminderTime=function(){return!!o.portal_setting.ical_reminder_enabled&&(!angular.isNumber(o.portal_setting.ical_reminder_minutes)||(o.portal_setting.ical_reminder_minutes<o.LupHelper.icalReminderValues.min||o.portal_setting.ical_reminder_minutes>o.LupHelper.icalReminderValues.max))},o.resetReminderTime=function(){o.portal_setting.ical_reminder_enabled||(o.portal_setting.ical_reminder_minutes=o.LupHelper.icalReminderValues.default)},o.aiTosAccepted=p.ai_tos_accepted,n.portalSettingFormDirty=!1,o.portal_setting.letter_certs=o.portal_setting.letter_certs.toString(),o.eaNotificationIntervalTypes=[{value:a.enrollment_approvals.notifications.scheduled_types.instant,label:a.showMessage("lup.enrollment_approvals.settings.interval_types_select.instant")},{value:a.enrollment_approvals.notifications.scheduled_types.scheduled,label:a.showMessage("lup.enrollment_approvals.settings.interval_types_select.scheduled")}],o.$watch("portal_setting.reflections_enabled",function(e,t){e!==t&&!1!==e&&(o.aiTosAccepted||i.confirm(I18n.t("lup.question_pools.ai_questions.consent_qp_modal_title"),I18n.t("lup.question_pools.ai_questions.consent_qp_modal_content")).then(function(e){return r.post("/angie/integrations/content/openai/question_pool_generators/tos",{params:{}}).then(function(e){})}).catch(function(e){o.portal_setting.reflections_enabled=!1}))})}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsCoursesLocationsController",["$scope","$log","$http","$rootScope","LocationFactory","StorageFactory","LupHelper","$window","$luPopover","paramsService",function(n,e,t,o,r,a,i,s,l,c){var a=a.get(),u=new r;n.locations=a.locations,n.helper=i,n.searchText=null,n.ariaLabel=i.showMessage("a11y.sessions_locations_list"),n.ariaLabelSide=i.showMessage("lup.a11y.settings.general_aside"),n.activeLocationDDM={},n.toggled=function(e,t){n.activeLocationDDM[t]=e},o.$on("addNewLocation",function(){s.location="/locations/new"}),n.delete_location=function(t){var e=I18n.t("ilts.are_you_sure_you_want_to_delete_this_location",{title:t.title});0<t.number_times_used&&(e=I18n.t("ilts.are_you_sure_you_want_to_delete_this_location_times_used",{title:t.title,number_times_used:t.number_times_used})),l.confirm(I18n.t("lup.confirm"),e).then(function(e){u.destroy(t.id).then(function(){s.location="/settings/courses/iltlocations"})})},n.loadData=function(){var e={};e.params=c.get(),u.getList(e).then(function(){n.locations=u.data.locations})}}])}(),function(){"use strict";function e(o,t,e,n,r,a,i){e=e.get(),new a;function s(){o.footerVisible=!0}o.portal_setting=e.portal_setting.attributes,o.social_sharing=e.social_sharing.attributes,o.LupHelper=n,o.cancel=function(){r.location="/settings/courses/social"},o.save=function(){{o.theForm.$setPristine(),function(){o.invalidTags="";var e=o.social_sharing.twitter_hashtags,t=(e=angular.isString(e)?_.uniq(_.compact(e.replace(/#/g,"").replace(/@/g,"").split(","))):[]).filter(function(e){return!/^\w+$/.test(e)});o.invalidTags=t.join(", "),o.twitterHashtagsArray=e,o.social_sharing.twitter_hashtags=e.join(","),o.theForm.$setValidity("validHashtags",_.isEmpty(t))}(),function(){o.invalidAccounts="";var e=o.social_sharing.twitter_related_accounts,t=(e=angular.isString(e)?_.uniq(_.compact(e.replace(/[#@]/g,"").replace(/[{}]/g,"").split(","))):[]).filter(function(e){return!/^\w+$/.test(e)});o.invalidAccounts=t.join(", "),o.relatedAccountsArray=e,o.social_sharing.twitter_related_accounts=e.join(","),o.theForm.$setValidity("validRelatedAccounts",_.isEmpty(t))}(),o.theForm.$valid&&(i.showGroup("luSpinnerGlobal"),function(e){t.put("/settings/courses/social.json",e).then(function(e){i.hideGroup("luSpinnerGlobal"),o.footerVisible=!1},function(e){i.hideGroup("luSpinnerGlobal")})}({social_sharing:{enable_linkedin:o.social_sharing.enable_linkedin,enable_twitter:o.social_sharing.enable_twitter,twitter_related_accounts:o.social_sharing.twitter_related_accounts,twitter_hashtags:o.social_sharing.twitter_hashtags,override_url:o.social_sharing.override_url}}))}},o.setForm=function(e){o.theForm=e},r.portalSettingFormDirty=!1,o.footerVisible=!1,o.showFooter=s,o.twitterHashtagRegex=/^\w+$/,o.relatedAccountRegex=/^\w+$/,o.invalidTags="",o.invalidAccounts="",o.twitterHashtagsArray=angular.isString(o.social_sharing.twitter_hashtags)?_.uniq(_.compact(o.social_sharing.twitter_hashtags.split(","))):[],o.relatedAccountsArray=angular.isString(o.social_sharing.twitter_related_accounts)?_.uniq(_.compact(o.social_sharing.twitter_related_accounts.split(","))):[],o.refreshTags=function(){o.social_sharing.twitter_hashtags=o.twitterHashtagsArray.join(","),s()},o.refreshRelatedAccounts=function(){o.social_sharing.twitter_related_accounts=o.relatedAccountsArray.join(","),s()},o.hashtagsCharsLeft=0,o.twitPreviewHashtags="",o.previewTwit=function(){return[n.showMessage("social_sharing.predefined_twitter_text",{course_name:"<i>name_of_the_course</i>"}),o.social_sharing.override_url,o.twitPreviewHashtags].join(" ")},o.$watch(function(){return o.social_sharing.twitter_hashtags},function(e,t){var n;angular.isDefined(e)&&(n=0,e=o.social_sharing.twitter_hashtags,angular.isDefined(e)&&(0<e.length&&(n=e.length+e.split(",").length),e.match(/,$/)&&(n-=2),o.hashtagsCharsLeft=n,""!==(e=$.trim(e))&&(e.match(/,$/)&&(e=e.substring(0,e.length-1)),e="#"+e.replace(/\s/g,"").replace(/,/g," #")),o.twitPreviewHashtags=e))})}angular.module("lu").controller("SettingsCoursesSocialController",e),e.$inject=["$scope","$http","StorageFactory","LupHelper","$window","PortalSettingFactory","spinnerService"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s){var l=new r,c=new i("portal");if(n.helper=o,n.coupons=e.getKey("coupons"),n.getDiscount=function(e){{if(0===e.discount_type)return e.discount+"%";if(1==e.discount_type)return t.currency_symbol+e.discount}},n.loadData=u,n.destroy=function(e){c.destroy(e.id).then(function(e){u()})},n.edit=function(t){c.edit(t,function(e){c.update(t.id,e).then(function(e){u()}).catch(function(e){u()})})},n.couponIsActive=d,n.couponPopOverMsg=function(e){if(d(e))return o.showMessage("coupons.coupon_enabled");return o.showMessage("coupons.coupon_disabled")},t.dateFormat=o.rubyDateFormatToJS(e.getKey("date_format")),n.activeCouponDDM={},n.toggled=function(e,t){n.activeCouponDDM[t]=e},s.document.getElementById("subnavigation-list"))try{s.document.getElementById("subnavigation-list").classList.add("less-padding")}catch(e){s.document.getElementById("subnavigation-list").className=s.document.getElementById("subnavigation-list").className+" less-padding"}function u(){var e={};e.params=a.get(),l.getCoupons(e).then(function(e){n.coupons=e.data.coupons})}function d(e){return!(void 0===e||!e.is_enabled)}t.$on("createCoupon",function(){c.new(function(e){c.create(e).then(function(e){u()}).catch(function(e){u()})})})}angular.module("lu").controller("SettingsEcommerceCouponsController",e),e.$inject=["$scope","StorageFactory","$rootScope","LupHelper","PortalSettingFactory","paramsService","CouponFactory","$window"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsEcommerceGatewaysController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(t,n,e,o,r,a,i,s,l){var o=o.get(),c=new s;if(t.portal_setting=o.portal_setting.attributes,t.LupHelper=r,t.cancel=function(){a.location="/settings/ecommerce/gateways"},a.portalSettingFormDirty=!1,t.root_url=o.root_url,t.shopify_connect=o.shopify_connect.attributes,t.shopify_store_name=o.shopify_store_name,t.shopifyApiVersions=o.shopify_api_versions,t.latestApiVersion=o.latest_shopify_api_version,t.form_token=o.form_token,t.shopify_return_url=o.shopify_return_url,t.connectShopify=function(){var e={shop:t.shopify_store_name+".myshopify.com",client_id:t.shopify_connect.client_id,client_secret:t.shopify_connect.client_secret,api_version:t.shopify_connect.api_version?t.shopify_connect.api_version:t.latestApiVersion};c.connectShopify(e).then(function(){var e;c.data.error||(e="https://"+t.shopify_store_name+".myshopify.com/admin/oauth/authorize?client_id="+t.shopify_connect.client_id+"&scope=write_products,read_orders&redirect_uri="+t.shopify_return_url+"&state="+t.portal_setting.subdomain+"_--_"+t.form_token,a.location=e)})},t.showScript=function(e){t.shopifyScript=1==e?u:2==e?d:p},a.blankShopAlert=function(){r.showTip("shopify_connect.insert_store_name")},a.document.getElementById("subnavigation-list"))try{a.document.getElementById("subnavigation-list").classList.add("less-padding")}catch(e){a.document.getElementById("subnavigation-list").className=a.document.getElementById("subnavigation-list").className+" less-padding"}t.removeStripe=function(){i.confirm(I18n.t("lup.confirm"),I18n.t("stripe_connect.are_you_sure_remove",{title:I18n.t("stripe_connect.remove_stripe")})).then(function(e){n.post("/stripe_connects/remove").success(function(e){a.location.reload()})})},t.removeShopify=function(){i.confirm(I18n.t("lup.confirm"),I18n.t("shopify_connect.are_you_sure_remove",{title:I18n.t("stripe_connect.remove_stripe")})).then(function(e){n.post("/shopify_connects/remove").success(function(e){a.location.reload()})})};var u=["{% for line in checkout.line_items %}","\t{% assign mfields = line.product.metafields.lu_courses %}","\t{% if mfields %}","\t\t{% if mfields.lu_course and mfields.lu_course != '0' and mfields.lu_course != 0 %}","\t\t\t<script type='text/javascript' charset='utf-8'>","\t\t\t\tvar div = document.getElementById('content');","\t\t\t\tif( !div ) {","\t\t\t\t\tdiv = document.getElementById('checkout');","\t\t\t\t}","\t\t\t\tif( div ) {",'\t\t\t\t\tdiv.innerHTML = div.innerHTML + \'<p id="enroll_message">'+r.showMessage("shopify_connect.please_wait_will_we")+"</p>';","\t\t\t\t\tdocument.getElementById('enroll_message').style.fontSize='15px';","\t\t\t\t\tdocument.getElementById('enroll_message').style.color = 'red';","\t\t\t\t}","\t\t\t\twindow.location.href='"+t.root_url+"/shopify/process_order/{{ checkout.order_id }}';","\t\t\t<\/script>","\t\t{% endif %}","\t{% endif %}","{% endfor %}"].join("\n"),d=["{% for line in line_items %}","\t{% assign mfields = line.product.metafields.lu_courses %}","\t{% if mfields %}","\t\t{% if mfields.lu_course and mfields.lu_course != '0' and mfields.lu_course != 0 %}","\t\t\t<script type='text/javascript' charset='utf-8'>","\t\t\t\tvar div = document.getElementById('content');","\t\t\t\tif( !div ) {","\t\t\t\t\tdiv = document.getElementById('checkout');","\t\t\t\t}","\t\t\t\tif( div ) {",'\t\t\t\t\tdiv.innerHTML = div.innerHTML + \'<p id="enroll_message">'+r.showMessage("shopify_connect.please_wait_will_we")+"</p>';","\t\t\t\t\tdocument.getElementById('enroll_message').style.fontSize='15px';","\t\t\t\t\tdocument.getElementById('enroll_message').style.color = 'red';","\t\t\t\t}","\t\t\t\twindow.location.href='"+t.root_url+"/shopify/process_order/{{ id }}';","\t\t\t<\/script>","\t\t{% endif %}","\t{% endif %}","{% endfor %}"].join("\n"),p=["<script type='text/javascript' charset='utf-8'>","\twindow.document.addEventListener('DOMContentLoaded', () => {","\t\t{% for line in checkout.line_items %}","\t\t\t{% assign mfields = line.product.metafields.lu_courses %}","\t\t\t{% if mfields and mfields.lu_course and mfields.lu_course != '0' and mfields.lu_course != 0 %}","\t\t\t\tShopify.Checkout.OrderStatus.addContentBox(",'\t\t\t\t\t\'<p id="enroll_message" style="font-size:15px; color: red;">Please wait while we forward you to your learning dashboard.</p>\'',"\t\t\t\t);","\t\t\t\tsetTimeout(function(){","\t\t\t\t\twindow.location.href='"+t.root_url+"/shopify/process_order/{{ checkout.order_id }}';","\t\t\t\t}, 2000);","\t\t\t\t{% break %}","\t\t\t{% endif %}","\t\t{% endfor %}","\t});","<\/script>"].join("\n");t.shopifyScript=p}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsEcommerceGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(e,t,n,o,r,a,i,s,l){o=o.get(),new s;if(e.portal_setting=o.portal_setting.attributes,e.store_setting=o.store_setting.attributes,e.LupHelper=r,e.cancel=function(){a.location="/settings/ecommerce/general"},a.portalSettingFormDirty=!1,e.displayGatewayNotice=o.display_gateway_notice,e.store_setting.custom_store_url?e.customStoreUrlEnabled=!0:e.customStoreUrlEnabled=!1,a.document.getElementById("subnavigation-list"))try{a.document.getElementById("subnavigation-list").classList.add("less-padding")}catch(e){a.document.getElementById("subnavigation-list").className=a.document.getElementById("subnavigation-list").className+" less-padding"}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsEcommerceSalestaxController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal","$timeout","Upload",function(n,e,t,o,r,a,i,s,l,c,u){o=o.get(),new s;if(n.portal_setting=o.portal_setting.attributes,n.custom_ip_blocked_message=o.custom_ip_blocked_message.attributes,n.portal_tax_rates=o.portal_tax_rates,n.eu_tax_rates=o.eu_tax_rates,n.taxLabel=o.tax_label,n.eu_tax_rate_blurb=o.checklists_enabled?"ecomms_tab.eu_tax_rate_blurb_checklists_rebrand":"ecomms_tab.eu_tax_rate_blurb_rebrand",n.salesTaxLabelOptions=[{label:r.showMessage("new_store.sales_tax"),value:r.sales_tax_label.default},{label:"VAT",value:r.sales_tax_label.vat},{label:"GST",value:r.sales_tax_label.gst}],n.$watch(function(e){return e.portal_setting.sales_tax_country_code},function(e,t){t!==e&&("IE"===n.portal_setting.sales_tax_country_code||"GB"===n.portal_setting.sales_tax_country_code?n.taxLabel=r.sales_tax_label.vat:"AU"===n.portal_setting.sales_tax_country_code?n.taxLabel=r.sales_tax_label.gst:n.taxLabel=r.sales_tax_label.default)}),n.LupHelper=r,n.cancel=function(){a.location="/settings/ecommerce/salestax"},n.forceShowSave=!1,a.portalSettingFormDirty=!1,n.portal_setting.sales_tax_country_code||(n.portal_setting.sales_tax_country_code="XX"),a.document.getElementById("subnavigation-list"))try{a.document.getElementById("subnavigation-list").classList.add("less-padding")}catch(e){a.document.getElementById("subnavigation-list").className=a.document.getElementById("subnavigation-list").className+" less-padding"}n.setIpBlockedAddress=function(){var e=l.open({templateUrl:"/tc/settings/add_ip_blocked_message.html",controller:"StoreAddIpBlockedMessageController",size:"lg",resolve:{text_message:function(){return n.custom_ip_blocked_message.text_message}}});e.opened.then(function(){n.ckeditorInstance="text_message_editor",n.imageType=r.fileUploads.types.custom_ip_blocked_messages,c(function(){r.renderCKEditor({clear_all_previous_instances:!1,id:n.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%"})},100)}),e.result.then(function(e){e&&void 0!==e.text_message&&(n.custom_ip_blocked_message.text_message=e.text_message,n.forceShowSave=!0)})},a.executeDjImageUpload=function(){l.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return n.custom_ip_blocked_message.id},ckeditorInstance:function(){return n.ckeditorInstance},imageType:function(){return n.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsEcommerceSeosocialController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(e,t,n,o,r,a,i,s,l){o=o.get(),new s;if(e.portal_setting=o.portal_setting.attributes,e.LupHelper=r,e.cancel=function(){a.location="/settings/ecommerce/seosocial"},a.portalSettingFormDirty=!1,e.portal_setting.seo_title||(e.portal_setting.seo_title=""),e.portal_setting.seo_snippet||(e.portal_setting.seo_snippet=""),a.document.getElementById("subnavigation-list"))try{a.document.getElementById("subnavigation-list").classList.add("less-padding")}catch(e){a.document.getElementById("subnavigation-list").className=a.document.getElementById("subnavigation-list").className+" less-padding"}}])}(),function(){"use strict";angular.module("lu").controller("SettingsEcommerceStoreController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal","$timeout","Upload","s3HelperFactory",function(r,t,e,n,a,i,o,s,l,c,u,d){var n=n.get(),p=new s;if(r.portal_setting=n.portal_setting.attributes,r.portal_theme={},r.store_setting={},n.portal_theme&&(r.portal_theme=n.portal_theme.attributes),n.store_setting&&(r.store_setting=n.store_setting.attributes),n.store_theme&&(r.store_theme=n.store_theme.attributes),r.LupHelper=a,r.save=function(e){try{e["store_setting[header_color]"].$setValidity("validColors",m(r.store_setting.header_color)),e["store_setting[link_color]"].$setValidity("validColors",m(r.store_setting.link_color)),e["store_setting[hero_color]"].$setValidity("validColors",m(r.store_setting.hero_color)),e.$setValidity("validHeroVideoUrl",function(t){if(!t)return!0;return _.some(["youtube.com","youtu.be","vimeo.com"],function(e){return new RegExp("^https?://(www.)?"+e+"/").test(t)})}(r.store_setting.hero_video_url));var t=!0;r.store_setting.short_description&&(t=r.store_setting.short_description.length<=220),e.$setValidity("shortDescriptionTextLength",t);t=!0;r.store_setting.hero_btn_text&&(t=r.store_setting.hero_btn_text.length<=20),e.$setValidity("heroBtnTextLength",t)}catch(e){}e.$valid&&e.commit()},r.cancel=function(){i.location="/settings/ecommerce/branding"},r.forceShowSave=!1,i.portalSettingFormDirty=!1,r.authorLogo=null,r.bannerImage=null,r.storeLogo=null,r.storeSquaredLogo=null,r.storeHeroImage=null,r.uploadingLogo=0,r.uploadingLogoSquared=0,r.uploadingHeroImage=0,r.gdpr_terms_present=n.gdpr_terms_present,r.imageUploadingInProgress=!1,r.openCropper=function(e,o){{e&&l.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return null},cropperImageSize:function(){return"storeHeroImage"===o?"max":a.uiCropperConfig.imageSize}}}).result.then(function(e){if(e&&e.image_for_upload)switch(r.alt_tag=e.alt_tag,o){case"storeLogo":null!==(n=e.image_for_upload)&&(r.imageUploadingInProgress=!0,r.storeLogo=n,r.store_branding_image_reference="1",r.uploadingLogo=r.store_branding_image_reference,r.uploadingLogoSquared=0,r.uploadingHeroImage=0,d.getData(r.LupHelper.fileUploads.types.store_branding,function(t){c(function(){var e=t.data.signature_data.attributes;r.errorMsg=null,f(r.storeLogo,e,"store_logo")})},function(e){}));break;case"storeSquaredLogo":null!==(t=e.image_for_upload)&&(r.imageUploadingInProgress=!0,r.storeSquaredLogo=t,r.store_branding_image_reference="1",r.uploadingLogo=0,r.uploadingLogoSquared=r.store_branding_image_reference,r.uploadingHeroImage=0,d.getData(r.LupHelper.fileUploads.types.store_branding,function(t){c(function(){var e=t.data.signature_data.attributes;r.errorMsg=null,f(r.storeSquaredLogo,e,"store_logo_squared")})},function(e){}));break;case"storeHeroImage":null!==(t=e.image_for_upload)&&(r.imageUploadingInProgress=!0,r.storeHeroImage=t,r.store_branding_image_reference="1",r.uploadingLogo=0,r.uploadingLogoSquared=0,r.uploadingHeroImage=r.store_branding_image_reference,d.getData(r.LupHelper.fileUploads.types.store_branding,function(t){c(function(){var e=t.data.signature_data.attributes;r.errorMsg=null,f(r.storeHeroImage,e,"store_hero_image")})},function(e){}));break;case"bannerImage":null!==(e=e.image_for_upload)&&(r.imageUploadingInProgress=!0,spinnerService.showGroup("luSpinnerGlobal"),e.upload=u.upload({url:"/settings/ecommerce/branding.json",method:"POST",data:{portal_setting:{banner_store_image:r.bannerImage},filename:r.bannerImage.name,"Content-Type":""!==r.bannerImage.type?r.bannerImage.type:"application/octet-stream"}}),e.upload.then(function(e){i.location="/settings/ecommerce/branding"},function(e){}));break;default:return}var t,n})}},r.alt_tag=null,r.store_branding_image_reference=n.store_branding_image_reference,r.portal_setting.seo_title||(r.portal_setting.seo_title=""),r.portal_setting.seo_snippet||(r.portal_setting.seo_snippet=""),r.store_branding_image_reference&&g(),r.maxFileSize=function(){return"5MB"},r.acceptedFiles=function(){return".jpg,.jpeg,.png"},i.document.getElementById("subnavigation-list"))try{i.document.getElementById("subnavigation-list").classList.add("less-padding")}catch(e){i.document.getElementById("subnavigation-list").className=i.document.getElementById("subnavigation-list").className+" less-padding"}function m(e){if(!e)return!1;e=e.replace(/#/,"");return"string"==typeof e&&6===e.length&&!isNaN(parseInt(e,16))}function f(t,n,o){t&&(r.errorMsg=null,d.uploadFiles(t,n,function(e){switch(c(function(){t.result=e.data}),p.uuid=n.guid,p.image_file_name=t.name,p.output_url=n.folder_path+t.name,p.portal_id=r.portal_setting.portal_id,p.alt_tag=r.alt_tag,o){case"store_branding":p.store_logo=!0;break;case"store_logo_squared":p.store_logo_squared=!0;break;case"store_hero_image":p.store_hero_image=!0}return p.uploadImage(o).then(function(e){try{return r.store_branding_image_reference=p.data.store_branding_image_reference,void g()}catch(e){return r.store_branding_image_reference=null,r.uploadingLogo=0,r.uploadingLogoSquared=0,void(r.uploadingHeroImage=0)}})},function(e){0<e.status&&(r.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))}function g(){var e="/download_jobs/"+r.store_branding_image_reference+"/status.json";return t.get(e,{}).then(function(e){e.data.job.status_id!==r.LupHelper.lupJobStatuses.completed?r.timeoutPromise=c(function(){g()},2e3):(r.processingJobReference=null,i.location.reload())})}r.removeAuthorImage=function(){o.confirm(I18n.t("lup.confirm"),I18n.t("lup.ecommerce.are_you_sure_remove_author_image")).then(function(e){p.updateSettings({portal_setting:{author_image:null}},"ecommerce/branding").then(function(){i.location="/settings/ecommerce/branding"})})},r.removeBannerImage=function(){o.confirm(I18n.t("lup.confirm"),I18n.t("lup.ecommerce.are_you_sure_remove_banner")).then(function(e){p.updateSettings({portal_setting:{banner_store_image:null}},"ecommerce/branding").then(function(){i.location="/settings/ecommerce/branding"})})},r.removeStoreLogo=function(){o.confirm(I18n.t("lup.confirm"),I18n.t("lup.ecommerce.remove_store_logo_sure")).then(function(e){p.updateSettings({portal_image:{image_type:"store_logo"}},"ecommerce/branding").then(function(){r.store_theme=p.data.store_theme.attributes})})},r.removeStoreSquaredLogo=function(){o.confirm(I18n.t("lup.confirm"),I18n.t("lup.ecommerce.remove_store_sq_logo_sure")).then(function(e){p.updateSettings({portal_image:{image_type:"store_logo_squared"}},"ecommerce/branding").then(function(){r.store_theme=p.data.store_theme.attributes})})},r.removeStoreHeroImage=function(){o.confirm(I18n.t("lup.confirm"),I18n.t("lup.ecommerce.remove_hero_store_logo_sure")).then(function(e){p.updateSettings({portal_image:{image_type:"store_hero_image"}},"ecommerce/branding").then(function(){r.store_theme=p.data.store_theme.attributes})})},r.$watch("authorLogo",function(e){null!==e&&(r.imageUploadingInProgress=!0,spinnerService.showGroup("luSpinnerGlobal"),e.upload=u.upload({url:"/settings/ecommerce/branding.json",method:"POST",data:{portal_setting:{author_image:r.authorLogo},filename:r.authorLogo.name,"Content-Type":""!==r.authorLogo.type?r.authorLogo.type:"application/octet-stream"}}),e.upload.then(function(e){i.location="/settings/ecommerce/branding"},function(e){}))}),r.setAboutPageSidebar=function(){var e=l.open({templateUrl:"/tc/settings/set_about_page_sidebar.html",controller:"StoreSetAboutPageSidebarController",size:"lg",resolve:{about_page_sidebar:function(){return r.store_setting.about_page_sidebar}}});e.opened.then(function(){r.ckeditorInstance="about_page_sidebar",r.imageType=a.fileUploads.types.ecommerce_store_about_page_sidebar,r.resourceId=r.store_setting.id,c(function(){a.renderCKEditor({clear_all_previous_instances:!1,id:r.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0})},100)}),e.result.then(function(e){e&&void 0!==e.about_page_sidebar&&(r.store_setting.about_page_sidebar=e.about_page_sidebar,r.forceShowSave=!0)})},i.executeDjImageUpload=function(){l.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return r.resourceId},ckeditorInstance:function(){return r.ckeditorInstance},imageType:function(){return r.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},r.setDescription=function(){var e=l.open({templateUrl:"/tc/settings/add_author_description.html",controller:"StoreAddDescriptionController",size:"lg",resolve:{author_description:function(){return r.portal_setting.author_description}}});e.opened.then(function(){r.ckeditorInstance="author_descroption_editor",r.imageType=a.fileUploads.types.ecommerce_store_author_description,r.resourceId=r.portal_setting.id,c(function(){a.renderCKEditor({clear_all_previous_instances:!1,id:r.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0})},100)}),e.result.then(function(e){e&&void 0!==e.author_description&&(r.portal_setting.author_description=e.author_description,r.forceShowSave=!0)})},r.setTerms=function(){var e=l.open({templateUrl:"/tc/settings/add_store_terms.html",controller:"StoreAddTermsController",size:"lg",resolve:{author_terms_and_conditions:function(){return r.portal_setting.author_terms_and_conditions}}});e.opened.then(function(){r.ckeditorInstance="terms_editor",r.imageType=a.fileUploads.types.author_terms_and_conditions,r.resourceId=r.portal_setting.id,c(function(){a.renderCKEditor({clear_all_previous_instances:!1,id:r.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%"})},100)}),e.result.then(function(e){e&&void 0!==e.author_terms_and_conditions&&(r.portal_setting.author_terms_and_conditions=e.author_terms_and_conditions,r.forceShowSave=!0)})}}])}(),function(){"use strict";function e(e,t,n,o){e.author_description=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("author_descroption_editor");t.close({author_description:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("StoreAddDescriptionController",e),e.$inject=["$scope","$modalInstance","author_description","LupHelper"]}(),function(){"use strict";function e(e,t,n,o){e.text_message=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("text_message_editor");t.close({text_message:e})},e.cancel=function(){t.close()},e.text_message||(e.text_message=I18n.t("store.wrong_country_try_again"))}angular.module("lu").controller("StoreAddIpBlockedMessageController",e),e.$inject=["$scope","$modalInstance","text_message","LupHelper"]}(),function(){"use strict";function e(e,t,n,o){e.about_page_sidebar=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("about_page_sidebar");t.close({about_page_sidebar:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("StoreSetAboutPageSidebarController",e),e.$inject=["$scope","$modalInstance","about_page_sidebar","LupHelper"]}(),function(){"use strict";function e(e,t,n,o){e.author_terms_and_conditions=n,e.LupHelper=o,e.save=function(){var e=o.getHTMLFromCKEditor("terms_editor");t.close({author_terms_and_conditions:e})},e.cancel=function(){t.close()}}angular.module("lu").controller("StoreAddTermsController",e),e.$inject=["$scope","$modalInstance","author_terms_and_conditions","LupHelper"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsEmailGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(e,t,n,o,r,a,i,s,l){o=o.get(),new s;e.portal_setting=o.portal_setting.attributes,e.LupHelper=r,e.cancel=function(){a.location="/settings/email/general"},a.portalSettingFormDirty=!1}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsEmailTemplatesController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(e,t,n,o,r,a,i,s,l){o=o.get(),new s;e.portal_setting=o.portal_setting.attributes,e.LupHelper=r,e.cancel=function(){a.location="/settings/email/templates"},a.portalSettingFormDirty=!1}])}(),function(){"use strict";function e(t,e,n,o,r,a){var i=this,s=new a;i.saml_cert_finger_prints=n,i.LupHelper=o,i.disableSave=!1,i.save=function(){c()?s.save(i.saml_cert_finger_prints).then(function(e){i.saml_cert_finger_prints=s.data.saml_cert_finger_prints,t.close()}):i.disableSave=!0},i.destroy=function(e,t){e&&1<u()?s.destroy(e).then(function(e){null!==s.data&&(i.saml_cert_finger_prints=s.data.saml_cert_finger_prints)}):t&&i.saml_cert_finger_prints.splice(t,1);c()&&(i.disableSave=!1)},i.cancel=function(){t.close()},i.numberOfValidSavedFingerprints=u;var l=[o.samlFingerprintValidLengths.unformattedSHA1,o.samlFingerprintValidLengths.formattedSHA1,o.samlFingerprintValidLengths.unformattedSHA256,o.samlFingerprintValidLengths.formattedSHA256];function c(){for(var e=!0,t=0;t<i.saml_cert_finger_prints.length;t++)i.saml_cert_finger_prints[t].idp_cert_fingerprint?l.includes(i.saml_cert_finger_prints[t].idp_cert_fingerprint.length)?i.saml_cert_finger_prints[t].invalidInputError="":(i.saml_cert_finger_prints[t].invalidInputError=I18n.t("lup.saml.finger_print_length_error"),e=!1):(i.saml_cert_finger_prints[t].invalidInputError=I18n.t("lup.saml.blank_finger_print_error"),e=!1);return e}function u(){for(var e=0,t=0;t<i.saml_cert_finger_prints.length;t++)i.saml_cert_finger_prints[t]&&i.saml_cert_finger_prints[t].idp_cert_fingerprint&&l.includes(i.saml_cert_finger_prints[t].idp_cert_fingerprint.length)&&i.saml_cert_finger_prints[t].id&&(e+=1);return e}i.unsetOtherPrimaries=function(e){for(var t=0;t<i.saml_cert_finger_prints.length;t++)i.saml_cert_finger_prints[t].id&&i.saml_cert_finger_prints[t].id!=e&&(i.saml_cert_finger_prints[t].is_primary=!1)},i.isSetPrimaryButtonDisabled=function(e){return i.saml_cert_finger_prints[e].is_primary},i.addFingerprint=function(){i.saml_cert_finger_prints.push({id:null,idp_cert_fingerprint:"",is_primary:!1,invalidInputError:!1})},i.revalidateFingerprints=function(){var e=c();i.disableSave=!e}}window.angular.module("lu").controller("EditSamlCertFingerPrintsController",e),e.$inject=["$modalInstance","$http","saml_cert_finger_prints","LupHelper","$filter","SamlCertFingerPrintFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i,s){e.key=i,e.secret=s,e.LupHelper=o,e.cancel=function(){t.close()}}window.angular.module("lu").controller("GenerateNewApiKeysController",e),e.$inject=["$scope","$modalInstance","$http","LupHelper","$filter","$sce","key","secret"]}(),function(){"use strict";function e(e,t,n){e.LupHelper=n,e.cancel=function(){t.dismiss()},e.confirm=function(){t.close()}}window.angular.module("lu").controller("GenerateAPIKeysConfirmController",e),e.$inject=["$scope","$modalInstance","LupHelper"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsApiController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){var o=o.get(),d=new s;e.forceShowSave=!1,e.spinnerService=c,e.portal_setting=o.portal_setting.attributes,e.LupHelper=r,e.Helper=r,e.generate_new_api_keys=function(){u.open({templateUrl:"/tc/settings/generate_api_keys_confirm.html",controller:"GenerateAPIKeysConfirmController",size:"sm"}).result.then(function(){d.generateAPIKeys({}).then(function(e){u.open({templateUrl:"/tc/settings/gen_new_api_keys.html",controller:"GenerateNewApiKeysController",size:"lg",resolve:{key:function(){return e.key},secret:function(){return e.secret}}})})})}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsLicensingController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(t,e,n,o,r,a,i,s,l,c,u){o=o.get(),new s;t.forceShowSave=!1,t.spinnerService=c,t.portal_setting=o.portal_setting.attributes,t.portal_license=o.portal_license.attributes,t.LupHelper=r,t.cancel=function(){a.location.reload()},t.Helper=r,t.original_number_purchased=t.portal_license.number_purchased,t.percentage=function(){try{var e=Math.round(parseFloat(t.portal_license.number_used)/parseFloat(t.original_number_purchased)*100,2);return 0===t.portal_license.number_used&&0===t.original_number_purchased&&(e=100),e}catch(e){return $log.debug("Unable to calculate percentage!"),0}}(),t.show_user_licencing_usage=o.show_user_licencing_usage,t.allow_over=t.portal_license.allow_over_run}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsLrsController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){o=o.get(),new s;e.forceShowSave=!1,e.spinnerService=c,e.portal_setting=o.portal_setting.attributes,e.lrs_setting=o.lrs_setting,e.LupHelper=r,e.Helper=r}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsRecaptchaController",["StorageFactory","$window","$timeout","PortalSettingFactory","LupHelper",function(e,t,n,o,r){var a=this,i=new o;function s(){t.location.reload()}a.lupHelper=r,a.recaptcha_enabled=e.getKey("recaptcha_enabled"),a.cancel=s,a.save=function(e){var t={recaptcha_enabled:a.recaptcha_enabled};e.$dirty&&i.updateSettings(t,"integrations/recaptcha").then(function(e){n(function(){s()})})}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSalesforceController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService",function(n,o,e,t,r,a,i,s,l,c){t=t.get(),new s;n.forceShowSave=!1,n.spinnerService=c,n.portal_setting=t.portal_setting.attributes,n.sf_setting=t.sf_setting,n.LupHelper=r,n.Helper=r,n.cancel=function(){a.location.reload()},n.install_steps=!1,n.is_for_sandbox=!1,n.cancelInstallSteps=function(){n.install_steps=!1},n.$watch("sf_setting.create_users",function(e,t){e!==t&&(n.forceShowSave=!0)}),n.disconnect=function(){var e=n.LupHelper.showMessage("lup.salesforce.are_your_sure_disconnect"),t="/sf/disconnect.json";n.sf_setting.sandbox_mode&&(e=n.LupHelper.showMessage("salesforce.are_you_sure_disable_sandbox"),t="/sf/disable_sandbox.json"),i.confirm(n.LupHelper.showMessage("lup.confirm"),e).then(function(e){o({url:t,method:"POST"}).then(function(){a.location.reload()})})},n.modeLabel=function(){return n.sf_setting.sandbox_mode?n.LupHelper.showMessage("lup.salesforce.sandbox_mode_label"):n.LupHelper.showMessage("lup.salesforce.production_mode_label")},n.disconnectButtonText=function(){return n.sf_setting.sandbox_mode?n.LupHelper.showMessage("salesforce.disable_sandbox_mode"):n.LupHelper.showMessage("salesforce.uninstall")},n.startInstallSteps=function(e){$(".installation_chooser").hide(),$(".sandbox_install_notice").hide(),$(".prod_install_notice").hide(),(n.is_for_sandbox=e)?($(".sandbox_install_notice").show(),$(".sf-connect-btn").hide(),$(".sf-connect-sandbox").show()):($(".prod_install_notice").show(),$(".sf-connect-btn").show(),$(".sf-connect-sandbox").hide()),n.install_steps=!0},n.maxFileSize=function(){return"5MB"},n.acceptedFiles=function(){return".jpg,.jpeg,.png"}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSamlController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){o.get(),new s;e.forceShowSave=!1,e.spinnerService=c,e.LupHelper=r,e.Helper=r}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSamlGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal","SamlCertFingerPrintFactory","s3HelperFactory","$timeout","SamlFactory","learnUponApi",function(o,e,t,n,r,a,i,s,l,c,u,d,p,_,m,f){var g=this,n=n.get(),h=new d,b=new m,v=new f;o.forceShowSave=!1,o.spinnerService=c,o.saml_configuration=n.saml_configuration.attributes,o.sqsso_redirect_url=n.sqsso_redirect_url,o.LupHelper=r,o.cancel=function(){a.location.reload()},o.Helper=r,o.samlLogoImage=null,o.saml_configuration.removeImage="keep",o.uploadingImage=!1,o.openCropper=function(e,t){{e&&u.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 1},cropperImageSize:function(){return r.uiCropperConfig.imageSize}}}).result.then(function(e){e&&e.image_for_upload&&(o.alt_tag=e.alt_tag,null!==(e=e.image_for_upload)&&(o.uploadingImage=!0,o.samlLogoImage=e,p.getData(r.fileUploads.types.saml_logo_image,function(e){_(function(){var n=e.data.signature_data.attributes;p.uploadFiles(o.samlLogoImage,n,function(e){var t={saml_configuration:{output_url:n.folder_path+o.samlLogoImage.name,image_file_name:o.samlLogoImage.name,alt_tag:o.alt_tag}};b.uploadImage(t).then(function(e){e.saml_job_reference&&!function t(n){var e={};e.hideSpinner=!0;e.url="/download_jobs/"+n+"/status.json";return v.get("download_jobs",e,n).then(function(){var e=v.data.job;e&&e.status_id!==r.lupJobStatuses.completed?_(function(){t(n)},2e3):window.location=window.location})}(e.saml_job_reference)})},function(e){o.uploadingImage=!1})})},function(e){o.uploadingImage=!1},null)))})}},o.alt_tag=null,o.saml_configuration.skip_conditions=o.saml_configuration.skip_conditions.toString(),g.is_hardening_active=n.is_hardening_active,o.is_hardening_active=g.is_hardening_active,g.portal_domain=n.portal_domain,g.portal_domain_with_subdomain=n.portal_domain_with_subdomain,g.is_want_assertions_signed_active=n.saml_configuration.attributes.want_assertions_signed,g.is_check_destination_active=!n.saml_configuration.attributes.skip_destination,g.is_check_subject_confirmation_active=!n.saml_configuration.attributes.skip_subject_confirmation,g.sign_authn_requests=n.saml_configuration.attributes.sign_authn_requests,g.certificate=n.certificate,g.deactivateHardening=function(){u.open({templateUrl:"/tc/saml/deactivate_hardening_confirmation.html",controller:"SamlHardeningDeactivationController as vm",size:"md",resolve:{portal_domain:function(){return g.portal_domain},portal_domain_with_subdomain:function(){return g.portal_domain_with_subdomain}}})},g.activateHardening=function(){u.open({templateUrl:"/tc/saml/activate_hardening_confirmation.html",controller:"SamlHardeningActivationController as vm",size:"md",resolve:{portal_domain:function(){return g.portal_domain},portal_domain_with_subdomain:function(){return g.portal_domain_with_subdomain}}})},g.deactivateWantAssertionsSigned=function(){b.deactivateWantAssertionsSigned().then(function(e){!1===e.error&&(g.is_want_assertions_signed_active=!1),a.location.reload()})},g.activateWantAssertionsSigned=function(){b.activateWantAssertionsSigned().then(function(e){!1===e.error&&(g.is_want_assertions_signed_active=!0),a.location.reload()})},g.deactivateCheckDestination=function(){b.activateSkipDestination().then(function(e){!1===e.error&&(g.is_check_destination_active=!1),a.location.reload()})},g.activateCheckDestination=function(){b.deactivateSkipDestination().then(function(e){!1===e.error&&(g.is_check_destination_active=!0),a.location.reload()})},g.deactivateCheckSubjectConfirmation=function(){b.activateSkipSubjectConfirmation().then(function(e){!1===e.error&&(g.is_check_subject_confirmation_active=!1),a.location.reload()})},g.activateCheckSubjectConfirmation=function(){b.deactivateSkipSubjectConfirmation().then(function(e){!1===e.error&&(g.is_check_subject_confirmation_active=!0),a.location.reload()})},g.deactivateSignAuthnRequests=function(){b.deactivateSignAuthnRequests().then(function(e){!1===e.error&&(g.sign_authn_requests=!1),a.location.reload()})},g.activateSignAuthnRequests=function(){b.activateSignAuthnRequests().then(function(e){!1===e.error&&(g.sign_authn_requests=!0),a.location.reload()})},g.openCertModal=function(){u.open({templateUrl:"/tc/saml/certificate_modal.html",controller:"SamlCertificateCopyController as vm",size:"md",resolve:{certificate:function(){return g.certificate}}})},o.maxFileSize=function(){return"5MB"},o.acceptedFiles=function(){return".jpg,.jpeg,.png"},o.removeImage=function(){o.saml_configuration.removeImage="remove",o.saml_configuration.login_image_file_name=null,o.forceShowSave=!0},o.manageFingerPrints=function(){h.getList({}).then(function(){o.saml_cert_finger_prints=h.data.saml_cert_finger_prints,u.open({templateUrl:"/tc/settings/edit_saml_cert_finger_prints.html",controller:"EditSamlCertFingerPrintsController as vm",size:"lg",resolve:{saml_cert_finger_prints:function(){return o.saml_cert_finger_prints}}})})},o.$watch("saml_configuration.disable_login_page",function(e,t){e&&!t&&o.sqsso_redirect_url&&(i.notify("",r.showMessage("lup.tips.login_page_disabled_for_sqsso",{sqsso_redirect_url:o.sqsso_redirect_url})),o.saml_configuration.disable_login_page=!1)})}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSamlUsersController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){o=o.get(),new s;e.forceShowSave=!1,e.spinnerService=c,e.portal_setting=o.portal_setting.attributes,e.saml_configuration=o.saml_configuration.attributes,e.custom_user_data_identifier_formats=o.custom_user_data_identifier_formats.data,e.LupHelper=r,e.cancel=function(){a.location.reload()},e.Helper=r}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSqssoController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){o.get(),new s;e.forceShowSave=!1,e.spinnerService=c,e.LupHelper=r,e.Helper=r}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSqssoGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal","SqssoFactory","learnUponApi","$timeout","s3HelperFactory",function(o,e,t,n,r,a,i,s,l,c,u,d,p,_,m){var n=n.get(),f=(new s,new d),g=new p;function h(t){var e={hideSpinner:!0};return e.url="/download_jobs/"+t+"/status.json",g.get("download_jobs",e,t).then(function(){var e=g.data.job;e&&e.status_id!==r.lupJobStatuses.completed?_(function(){h(t)},2e3):window.location=window.location})}o.forceShowSave=!1,o.spinnerService=c,o.sqsso_configuration=n.sqsso_configuration.attributes,o.saml_redirect_url=n.saml_redirect_url,o.LupHelper=r,o.sqssoLogoImage=null,o.sqsso_configuration.removeImage="keep",o.cancel=function(){a.location.reload()},o.maxFileSize=function(){return"5MB"},o.acceptedFiles=function(){return".jpg,.jpeg,.png"},o.removeImage=function(){o.sqsso_configuration.removeImage="remove",o.sqsso_configuration.login_image_file_name=null,o.forceShowSave=!0},o.uploadingImage=!1,o.image_job_reference=n.sqsso_job_reference,o.openCropper=function(e,t){{e&&u.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return 1},cropperImageSize:function(){return r.uiCropperConfig.imageSize}}}).result.then(function(e){e&&e.image_for_upload&&(o.alt_tag=e.alt_tag,null!==(e=e.image_for_upload)&&(o.uploadingImage=!0,o.sqssoLogoImage=e,m.getData(r.fileUploads.types.sqsso_logo_image,function(e){_(function(){var n=e.data.signature_data.attributes;m.uploadFiles(o.sqssoLogoImage,n,function(e){var t={sqsso_configuration:{output_url:n.folder_path+o.sqssoLogoImage.name,image_file_name:o.sqssoLogoImage.name,alt_tag:o.alt_tag}};f.uploadImage(t).then(function(e){e.sqsso_job_reference&&h(e.sqsso_job_reference)})},function(e){o.uploadingImage=!1})})},function(e){o.uploadingImage=!1},null)))})}},o.alt_tag=null,o.image_job_reference&&(o.uploadingImage=!0,h(o.image_job_reference)),o.$watch("sqsso_configuration.disable_login_page",function(e,t){e&&!t&&o.saml_redirect_url&&(i.notify("",r.showMessage("lup.tips.login_page_disabled_for_saml",{saml_redirect_url:o.saml_redirect_url})),o.sqsso_configuration.disable_login_page=!1)})}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSqssoUsersController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){o=o.get(),new s;e.forceShowSave=!1,e.spinnerService=c,e.portal_setting=o.portal_setting.attributes,e.sqsso_configuration=o.sqsso_configuration.attributes,e.custom_user_data_identifier_formats=o.custom_user_data_identifier_formats.data,e.LupHelper=r,e.cancel=function(){a.location.reload()},e.Helper=r}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsWebhooksController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","spinnerService","$modal",function(e,t,n,o,r,a,i,s,l,c,u){o=o.get(),new s;e.forceShowSave=!1,e.spinnerService=c,e.portal_setting=o.portal_setting.attributes,e.webhook_setting=o.webhook_setting,e.LupHelper=r,e.Helper=r}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsWebinarsController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","WebinarFactory","Upload","spinnerService","$modal",function(n,e,t,o,r,a,i,s,l,c,u){var o=o.get(),d=new s;function p(){return!(a.location="/webinar/citrix/gotomeeting/init")}function _(){return!(a.location="/webinar/citrix/gototraining/init")}function m(){return!(a.location="/webinar/citrix/gotowebinar/init")}function f(){return!(a.location="/webinar/adobe-connect/meeting/new")}function g(){return!(a.location="/webinar/webextraining/new")}function h(){return!(a.location="/webinar/webexevent/new")}function b(){return!(a.location="/zoom/init")}function v(){return!(a.location="/lup/webinars/microsoft/teams_integrations/new")}n.forceShowSave=!1,n.spinnerService=c,n.portal_setting=o.portal_setting.attributes,n.webinar_settings_new=o.webinar_settings_new.attributes,n.wbs_types=o.wbs_types,n.webinar_types=o.webinar_types,n.LupHelper=r,n.Helper=r,n.citrixG2MConnect=p,n.citrixG2TConnect=_,n.citrixG2WConnect=m,n.reconnectGotox=function(e){switch(e){case r.webinar_types.gotowebinar:m();break;case r.webinar_types.gotomeeting:p();break;case r.webinar_types.gototraining:_()}},n.zoomConnect=b,n.msTeamsConnect=v,n.msTeamsReconnect=function(){return!(a.location="/lup/webinars/microsoft/teams_integrations/new")},n.adobeConnectMeeting=f,n.ciscoWebExTraining=g,n.ciscoWebExEvent=h,n.activeWebinarDDM={},n.toggled=function(e,t){n.activeWebinarDDM[t]=e},n.$on("citrixG2MConnectButton",function(){p()}),n.citrixG2MDisconnect=function(t,e){return t&&""!==t&&(e=I18n.t("webinar.settings_g2_disconnect_confirm",{name:e}),i.confirm(I18n.t("lup.confirm"),e).then(function(e){d.citrixG2MDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1},n.$on("citrixG2TConnectButton",function(){_()}),n.citrixG2TDisconnect=function(t,e){return t&&""!==t&&(e=I18n.t("webinar.settings_g2_disconnect_confirm",{name:e}),i.confirm(I18n.t("lup.confirm"),e).then(function(e){d.citrixG2TDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1},n.$on("citrixG2WConnectButton",function(){m()}),n.citrixG2WDisconnect=function(t,e){return t&&""!==t&&(e=I18n.t("webinar.settings_g2_disconnect_confirm",{name:e}),i.confirm(I18n.t("lup.confirm"),e).then(function(e){d.citrixG2WDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1},n.$on("adobeConnectMeetingNew",function(){f()}),n.adobeConnectDisconnect=function(t,e,n){return t&&""!==t&&(e=I18n.t("webinar.settings_adobe_meeting_disconnect_confirm",{name:e}),i.confirm(I18n.t("lup.confirm"),e).then(function(e){d.adobeDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1},n.$on("ciscoWebExTrainingNew",function(){g()}),n.ciscoWebExTrainingDisconnect=function(t,e){return t&&""!==t&&(e=I18n.t("webinar.settings_webex_training_disconnect_confirm",{name:e}),i.confirm(I18n.t("lup.confirm"),e).then(function(e){d.webexDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1},n.$on("ciscoWebExEventNew",function(){h()}),n.ciscoWebExEventDisconnect=function(t,e){return t&&""!==t&&(e=I18n.t("webinar.settings_webex_event_disconnect_confirm",{name:e}),i.confirm(I18n.t("lup.confirm"),e).then(function(e){d.webexDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1},n.$on("zoomConnectButton",function(){b()}),n.$on("msTeamsConnectButton",function(){v()}),n.zoomDisconnect=function(t,e){return t&&(e=r.showMessage("webinar.settings_webex_event_disconnect_confirm",{name:e}),i.confirm(r.showMessage("lup.confirm"),e).then(function(e){d.zoomDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1},n.msTeamsDisconnect=function(t,e){return t&&(e=r.showMessage("webinar.settings_ms_teams_disconnect_confirm_rebrand",{name:e}),i.confirm(r.showMessage("lup.confirm"),e).then(function(e){d.msTeamsDisconnect(t).then(function(){a.location="/settings/integrations/webinars"})})),!1}}])}(),function(){"use strict";window.angular.module("lu").controller("WebhooksShowController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","Upload","spinnerService","$modal","$sce","$sanitize",function(l,e,t,n,o,r,a,i,s,c,u,d){n=n.get();l.forceShowSave=!1,l.webhook=n.webhook.attributes,l.LupHelper=o,l.Helper=o,l.webhook&&l.webhook.json_string&&(l.webhook.json_string=JSON.parse(l.webhook.json_string)),l.lu_prettify_json=function(e){var r=20,a="",t=",",i=Object.keys(e).length,s=0;return $.each(e,function(e,n){e='"'+e+'"';var o;++s==i&&(t=""),r*=2,"[object Object]"==n||n instanceof Array?n instanceof Array?(o=",",a+="<div style='margin-left: "+r+"px'>"+e+": [",$.each(n,function(e,t){e+1==n.length&&(o=""),"[object Object]"==t?a+="<div style='margin-left: "+r+"px'>{"+l.lu_prettify_json(t)+"}"+o+"</div>":("string"==typeof t&&(t='"'+t+'"'),a+="<div style='margin-left: "+r+"px'>"+t+o+"</div>")}),a+="]"+t+"</div>"):a+="<div style='margin-left: "+r+"px'>"+e+": {"+l.lu_prettify_json(n)+"}"+t+"</div>":("string"==typeof n&&(n='"'+n+'"'),a+="<div style='margin-left: "+r+"px'>"+e+": "+n+t+"</div>"),r/=2}),a}}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsSecurityHeadersGeneralController",["$scope","$http","$q","$rootScope","StorageFactory","LupHelper","$window","spinnerService",function(e,n,o,t,r,a,i,s){r=r.get();e.portal_setting=r.portal_setting.attributes,e.LupHelper=a,e.csp_enabled=r.csp.attributes.csp_enabled,e.showLoading=l,e.save=function(e){l();var t=o.defer();{e.$dirty&&(e={portal_setting:{csp_enabled:e.csp_enabled.$viewValue}},n.post("/settings/security/headers.json",e).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}))}},e.cancel=function(){l(),i.location="/settings/security/headers"};a=[{title:a.showMessage("lup.tabs.settings"),url:"/settings"},{title:a.showMessage("lup.security.headers"),url:"/settings/security/headers"}];function l(){s.showGroup("luSpinnerGlobal"),s.hideGroup("luSpinnerGlobal",3e3)}t.breadcrumbs=a}])}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;function s(e){return{enabled:e.enabled,enabled_slide_type:e.enabled_slide_type}}function l(t){return _.select(i.dashboardBanner.slides,function(e){return e.type===t})}function c(e){window.location="/settings/dashboard-banners/:slide_id/edit/".replace(/:slide_id/,e.id)}i.helper=e,i.dashboardBanner=t.getKey("dashboard_banner").attributes,i.form=s(t.getKey("dashboard_banner").attributes),o.ariaLabel=e.showMessage("lup.a11y.settings.dashboard_banner_main"),o.ariaLabelSide=e.showMessage("lup.a11y.settings.dashboard_banner_aside"),o.breadcrumbs=[{title:e.showMessage("lup.breadcrumbs.settings.index"),url:"/settings"},{title:e.showMessage("lup.settings.my_portal")+" / "+e.showMessage("pages.dashboard"),url:"/settings/dashboard"},{title:e.showMessage("lup.settings.promo_banners_settings.dashboard_banners"),url:"/settings/dashboard-banners"}],i.slides=l,i.save=function(t){var e=_.map(function(e){return _.select(l(e),function(e){return!!e.touched})}(i.form.enabled_slide_type),function(e){return{id:e.id,enabled:e.enabled}});t.$setPristine(),n.updateDashboardBanner(i.form,e).then(function(e){i.form,i.dashboardBanner&&i.dashboardBanner.slides&&_.each(i.dashboardBanner.slides,function(e){e.touched=!1})}).catch(function(e){t.$setDirty()})},i.cancel=function(e){i.form=s(t.getKey("dashboard_banner").attributes),e.$setPristine()},i.editSlide=c,i.touchSlide=function(t){var n=t.enabled;t.touched=!t.touched,r(function(){var e;n!==t.enabled&&!0===t.enabled&&"ImageSlide"===(e=t).type&&i.dashboardBanner.show_image_size_warning&&a.confirm(i.helper.showMessage("lup.settings.promo_banners_settings.image_resize_warning_title"),i.helper.showMessage("lup.settings.promo_banners_settings.image_resize_warning_body")).then(function(e){c(l(i.helper.portalBannerSlideTypes.image_slide)[0])},function(){e.enabled=!1})})},i.selectSlideType=function(e){i.form.enabled_slide_type=e,i.form.slides=l(e)},i.selectedType=function(e){return i.form.enabled_slide_type==e},i.selectedTypeHeading=function(){switch(i.form.enabled_slide_type){case i.helper.portalBannerSlideTypes.multimedia_slide:return i.helper.showMessage("lup.settings.promo_banners_settings.multimedia_banners");case i.helper.portalBannerSlideTypes.image_slide:return i.helper.showMessage("lup.settings.promo_banners_settings.image_banners");case i.helper.portalBannerSlideTypes.content_slide:return i.helper.showMessage("lup.settings.promo_banners_settings.centered_content")}},i.getSlideName=function(e,t){switch(t){case i.helper.portalBannerSlideTypes.multimedia_slide:return i.helper.showMessage("lup.settings.promo_banners_settings.multimedia_banner_counter",{counter:e+1});case i.helper.portalBannerSlideTypes.image_slide:return i.helper.showMessage("lup.settings.promo_banners_settings.image_banners_counter",{counter:e+1});case i.helper.portalBannerSlideTypes.content_slide:return i.helper.showMessage("lup.settings.promo_banners_settings.centered_content")}}}angular.module("lu").controller("DashboardBannersController",e),e.$inject=["LupHelper","StorageFactory","PortalBannerFactory","$rootScope","$timeout","$luPopover"]}(),function(){"use strict";function e(t,n,e,o,r,a,i,s){var l=new a;t.portal_image=e,t.promoBannerImage=null,t.LupHelper=o,t.save=function(){if(!t.portal_image||!t.portal_image.image_url)return;var e={portal_image:{promo_banner_image:{href:t.displayPortalImageHrefField?t.portal_image.href:null}}};l.updateSettings(e,"dashboard").then(function(e){n.close()})},t.cancel=function(){n.dismiss()},t.promoBannerImageUrl=t.portal_image.image_url,t.displayPortalImageHrefField=!!t.portal_image.href,t.requiresSave=function(){t.forceShowSave=!0},t.maxFileSize=function(){return"5MB"},t.acceptedFiles=function(){return".jpg,.jpeg,.png"},t.$watch("promoBannerImage",function(e){null!==e&&(t.uploadingImage=!0,s.show("promoBannerModalSpinner"),e.upload=i.upload({url:"/settings/dashboard.json",method:"POST",data:{portal_image:{promo_banner_image:t.promoBannerImage},filename:t.promoBannerImage.name,"Content-Type":""!==t.promoBannerImage.type?t.promoBannerImage.type:"application/octet-stream"}}),e.upload.then(function(e){r.get("/settings/dashboard.json").then(function(e){t.portal_image.image_url=e.data.promo_banner_image.image_url,t.uploadingImage=!1,s.hide("promoBannerModalSpinner")})},function(e){t.uploadingImage=!1}))})}angular.module("lu").controller("EditPromoBannerController",e),e.$inject=["$scope","$modalInstance","portal_image","LupHelper","$http","PortalSettingFactory","Upload","spinnerService"]}(),function(){"use strict";function e(t,n,e,o,r,a,i){var s=new i;t.welcome_message=o,t.LupHelper=r,t.save=function(){t.welcome_message.wysi_text=r.getHTMLFromCKEditor("wysi_text");var e={welcome_message:t.welcome_message};s.updateSettings(e,"dashboard").then(function(e){n.close()})},t.cancel=function(){n.close()},setTimeout(function(){r.renderCKEditor({clear_all_previous_instances:!0,id:"wysi_text",add_image_upload:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",show_source:!0})},0)}window.angular.module("lu").controller("EditWelcomeMessageController",e),e.$inject=["$scope","$modalInstance","$http","welcome_message","LupHelper","$filter","PortalSettingFactory"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsBrandingController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","Upload","s3HelperFactory","$timeout","$modal",function(r,t,e,n,o,a,i,s,l,c,u,d){var p=n.get(),_=new s;function m(t,n,o){t&&(r.errorMsg=null,c.uploadFiles(t,n,function(e){switch(u(function(){t.result=e.data}),_.uuid=n.guid,_.image_file_name=t.name,_.output_url=n.folder_path+t.name,_.portal_id=r.portal_setting.portal_id,_.alt_tag=r.alt_tag,o){case"mobile_logo":_.mobile_branding_id=r.mobile_branding.id;break;case"squared_logo":_.logo_squared=!0;break;case"header_logo":_.logo=!0}return _.uploadImage(o).then(function(e){try{return r.branding_image_reference=_.data.branding_image_reference,void f()}catch(e){return r.uploadingMobileLogo=!1,void(r.branding_image_reference=null)}})},function(e){0<e.status&&(r.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))}function f(){var e="/download_jobs/"+r.branding_image_reference+"/status.json";return t.get(e,{}).then(function(e){e.data.job.status_id!==r.LupHelper.lupJobStatuses.completed?r.timeoutPromise=u(function(){f()},2e3):(r.processingJobReference=null,a.location.reload())})}function g(e){if(!e)return!1;e=e.replace(/#/,"");return"string"==typeof e&&6===e.length&&!isNaN(parseInt(e,16))}r.forceShowSave=!1,r.portal_setting=p.portal_setting.attributes,r.portal_theme=p.portal_theme.attributes,r.mobile_branding=p.mobile_branding,r.LupHelper=o,r.Helper=o,r.save=function(e){e["portal_theme[header_color]"].$setValidity("validColors",g(r.portal_theme.header_color)),e["portal_theme[link_color]"].$setValidity("validColors",g(r.portal_theme.link_color)),e["portal_theme[bg_color]"].$setValidity("validColors",g(r.portal_theme.bg_color)),r.portal_setting.tc_link&&e["portal_setting[tc_title]"].$setValidity("missingTitle",!!r.portal_setting.tc_title);{e.$valid&&(setup_data_filters.collectData(),r.forceShowSave=!1,e={portal_setting:{tc_link:r.portal_setting.tc_link,tc_title:r.portal_setting.tc_title},portal_theme:{header_color:r.portal_theme.header_color,link_color:r.portal_theme.link_color,bg_color:r.portal_theme.bg_color,bg_overlay:r.portal_theme.bg_overlay}},_.updateSettings(e,"branding").then(function(e){r.portal_setting_form.$setPristine(),a.location.reload()}))}},r.cancel=function(){a.location.reload()},r.headerLogoImage=null,r.squaredLogoImage=null,r.mobileLogoImage=null,a.portalSettingFormDirty=!1,r.uploadingMobileLogo=!1,r.openCropper=function(e,n){{e&&d.open({templateUrl:"/tc/image-cropper.html",controller:"ImageCropController",controllerAs:"vm",windowClass:"lu-modal type-1",backdrop:"static",resolve:{image:function(){return e},cropperAspectRatio:function(){return null},cropperImageSize:function(){return o.uiCropperConfig.imageSize}}}).result.then(function(e){if(e&&e.image_for_upload)switch(r.alt_tag=e.alt_tag,n){case"headerLogoImage":null!==(t=e.image_for_upload)&&(r.uploadingMobileLogo=!0,r.headerLogoImage=t,r.branding_image_reference="1",c.getData(r.LupHelper.fileUploads.types.logo_branding,function(t){u(function(){var e=t.data.signature_data.attributes;r.errorMsg=null,m(r.headerLogoImage,e,"header_logo")})},function(e){}));break;case"squaredLogoImage":null!==(t=e.image_for_upload)&&(r.uploadingMobileLogo=!0,r.squaredLogoImage=t,r.branding_image_reference="1",c.getData(r.LupHelper.fileUploads.types.logo_branding,function(t){u(function(){var e=t.data.signature_data.attributes;r.errorMsg=null,m(r.squaredLogoImage,e,"squared_logo")})},function(e){}));break;case"mobileLogoImage":null!==(e=e.image_for_upload)&&(r.uploadingMobileLogo=!0,r.mobileLogoImage=e,r.branding_image_reference="1",c.getData(r.LupHelper.fileUploads.types.mobile_branding,function(t){u(function(){var e=t.data.signature_data.attributes;r.errorMsg=null,m(r.mobileLogoImage,e,"mobile_logo")})},function(e){}));break;default:return}var t})}},r.alt_tag=null,r.branding_image_reference=n.getKey("branding_image_reference"),r.ariaLabel=o.showMessage("lup.a11y.settings.general_portal_settings"),r.ariaLabelSide=o.showMessage("lup.a11y.settings.general_aside"),r.branding_image_reference&&f(),r.requiresSave=function(){r.portal_setting_form.$valid=!0,r.forceShowSave=!0},r.maxFileSize=function(){return"5MB"},r.acceptedFiles=function(){return".jpg,.jpeg,.png"},r.$watch("portal_setting.ssl_enabled",function(e,t){e!=t&&r.portal_setting_form.$setDirty()}),r.$watch("portal_setting.disable_login_services",function(e,t){e!=t&&r.portal_setting_form.$setDirty()}),r.$watch("portal_setting.disable_login_services_in_store",function(e,t){e!=t&&r.portal_setting_form.$setDirty()}),r.$watch(function(){return a.portalSettingFormDirty},function(e,t){e&&(r.portal_setting_form.$setDirty(),a.portalSettingFormDirty=!1)})}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsDashboardController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal",function(n,e,t,o,r,a,i,s,l){var o=o.get(),c=new s;n.portal_setting=o.portal_setting.attributes,n.manager_dashboard_enabled=o.manager_dashboard_enabled,n.time_zones=o.time_zones,n.LupHelper=r,n.save=function(e){setup_data_filters.collectData();var t={portal_setting:n.portal_setting,manager_dashboard_enabled:n.manager_dashboard_enabled};e.$dirty&&c.updateSettings(t,"dashboard").then(function(e){n.portal_setting_form.$setPristine(),a.location.reload()})},n.cancel=function(){a.location="/settings/dashboard"},a.portalSettingFormDirty=!1,n.ariaLabel=r.showMessage("lup.a11y.settings.general_portal_settings"),n.ariaLabelSide=r.showMessage("lup.a11y.settings.general_aside"),n.$watch("portal_setting.show_activity_panel_on_dash",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch("portal_setting.dashboard_pagination_size",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch("portal_setting.dashboard_coures_order",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch("portal_setting.show_calendar_on_dash",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch(function(){return a.portalSettingFormDirty},function(e,t){e&&(n.portal_setting_form.$setDirty(),a.portalSettingFormDirty=!1)})}])}(),function(){"use strict";function e(e,t,n,o){var r=this;r.LupHelper=t,r.cancel=function(e){e.$setPristine(),r.gamification_configuration=n.getKey("gamification_configuration").attributes},r.gamification_configuration=n.getKey("gamification_configuration").attributes,e.ariaLabel=t.showMessage("lup.a11y.settings.general_portal_settings"),e.ariaLabelSide=t.showMessage("portalsettings.extra_details")}angular.module("lu").controller("SettingsGamificationController",e),e.$inject=["$scope","LupHelper","StorageFactory","$window"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$timeout",function(n,e,t,o,r,a,i,s,l){var o=o.get(),c=new s;function u(){a.location="/settings/general"}n.portal_setting_original=angular.copy(o.portal_setting.attributes),n.portal_setting=o.portal_setting.attributes,n.forum_notifications_settings=o.forum_notifications.attributes,n.time_zones=o.time_zones,n.show_ssl_warning=o.show_ssl_warning,n.white_label_enabled=o.white_label_enabled,n.has_elb_ssl=o.has_elb_ssl,n.forums_allowed=o.forums_allowed,n.forum_setting=o.forum_setting.attributes,n.LupHelper=r,n.save=function(e){setup_data_filters.collectData();var t={portal_setting:n.portal_setting,forum_setting:n.forum_setting,forum_notifications_settings:n.forum_notifications_settings};e.$dirty&&c.updateSettings(t,"general").then(function(e){l(function(){u()})})},n.cancel=u,a.portalSettingFormDirty=!1,n.ariaLabel=r.showMessage("lup.a11y.settings.general_portal_settings"),n.ariaLabelSide=r.showMessage("lup.a11y.settings.general_aside"),n.portal_setting.locale_id||(n.portal_setting.locale_id=1),n.$watch("portal_setting.ssl_enabled",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch("portal_setting.disable_login_services",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch("portal_setting.disable_login_services_in_store",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch(function(){return a.portalSettingFormDirty},function(e,t){e&&(n.portal_setting_form.$setDirty(),a.portalSettingFormDirty=!1)})}])}(),function(){"use strict";angular.module("lu").controller("SettingsLoginlayoutController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","toastr","$modal",function(n,e,t,o,r,a,i,s,l,c){var o=o.get(),u=new s;n.portal_setting=o.portal_setting.attributes,n.LupHelper=r,n.save=function(e){setup_data_filters.collectData(),n.portal_setting.login_welcome_message=r.getHTMLFromCKEditor("login_welcome_message");var t=r.getByteLength(n.portal_setting.login_welcome_message);if(1499<t)return l.error(r.showMessage("activerecord.errors.field_length_error")+t,null,{closeButton:!0});t={portal_setting:n.portal_setting};u.updateSettings(t,"loginlayout").then(function(e){n.portal_setting_form.$setPristine(),n.forceShowSave=!1})},n.cancel=function(){a.location="/settings/loginlayout"},n.forceShowSave=!1,a.portalSettingFormDirty=!1,n.ariaLabel=r.showMessage("lup.a11y.settings.general_portal_settings"),n.ariaLabelSide=r.showMessage("lup.a11y.settings.general_aside"),n.$watch("portal_setting.login_show_sign_into_message",function(e,t){e!=t&&(n.forceShowSave=!0)}),setTimeout(function(){n.ckeditorInstance="login_welcome_message",n.imageType=n.LupHelper.fileUploads.types.login_welcome_message_image,r.renderCKEditor({clear_all_previous_instances:!0,id:n.ckeditorInstance,add_image_upload_via_dj:!0,save_button_action:"save_text_button",add_embedded_media:!0,width:"100%",editorTextChangeEvent:function(){n.forceShowSave=!0,n.$apply()}})},0),a.executeDjImageUpload=function(){c.open({templateUrl:"/tc/forums/open-image-upload.html",controller:"CKEditorUploadImageController",controllerAs:"vm",windowClass:"modal-box modal-box--lg",resolve:{resource_id:function(){return n.portal_setting.id},ckeditorInstance:function(){return n.ckeditorInstance},imageType:function(){return n.imageType}}}).result.then(function(e){e&&"save"===e.action&&e.ckeditorInstance&&e.ckeditorInstance&&CKEDITOR.instances[e.ckeditorInstance].insertHtml('<img src="'+e.image_url+'">')})},n.$watch(function(){return a.portalSettingFormDirty},function(e,t){e&&(n.portal_setting_form.$setDirty(),a.portalSettingFormDirty=!1)})}])}(),function(){"use strict";function e(t,e,n,o){t.LupHelper=e,t.cancel=function(e){e.$setPristine(),t.progress_report_settings_enabled=!1},t.progress_report_jrima_allowed=n.get("progress_report_jrima_allowed").progress_report_jrima_allowed,t.progress_report_settings_enabled=n.get("progress_report_settings_enabled").progress_report_settings_enabled,t.ilt_report_jrima_allowed=n.get("ilt_report_jrima_allowed").ilt_report_jrima_allowed,t.ilt_reports_settings_enabled=n.get("ilt_report_settings_enabled").ilt_report_settings_enabled,t.ariaLabel=e.showMessage("lup.a11y.reports_builder.main_label"),t.ariaLabelSide=e.showMessage("lup.a11y.reports_builder.aside_label")}angular.module("lu").controller("SettingsReportsBuilderController",e),e.$inject=["$scope","LupHelper","StorageFactory","$window"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsWhitelabelController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","SesIdentityFactory","$modal",function(n,e,t,o,r,a,i,s,l,c){var o=o.get(),u=new s,d=new l;n.portal_setting=o.portal_setting.attributes,n.ses_identitie=o.identitie.attributes,n.show_ses_panel=o.show_ses_panel,n.LupHelper=r,n.save=function(e){var t={portal_setting:n.portal_setting};return void u.updateSettings(t,"whitelabel").then(function(e){a.location.reload()})},n.cancel=function(){return void a.location.reload()},n.forceShowSave=!1,n.displayStep1=!0,n.displayStep2=!1,n.displayStep3=!1,n.addReplyToAddress=!1,n.showSesRecord=!1,n.set_reply_to_address=function(){var e=new l,t=n.ses_identitie.email;!t&&n.portal_setting.white_label_reply_to_address&&(t=n.portal_setting.white_label_reply_to_address);return void e.create(t).then(function(e){a.location.reload()})},n.cancelVerification=function(){return void d.cancel().then(function(e){a.location.reload()})},n.retryVerification=function(){return void d.retry().then(function(e){a.location.reload()})},n.portal_ssl_enabled=o.portal_ssl_enabled,n.displayStep=function(e){n.displayStep1=1==e,n.displayStep2=2==e,n.displayStep3=3==e},n.$watch("portal_setting.white_label_enabled",function(e,t){e!=t&&n.portal_setting_form.$setDirty()}),n.$watch(function(){return a.portalSettingFormDirty},function(e,t){e&&(n.portal_setting_form.$setDirty(),a.portalSettingFormDirty=!1)}),n.show_ses_panel&&n.displayStep(3),n.openSslModal=function(){c.open({templateUrl:"/tc/portal_certificate/add_ssl_modal.html",controller:"PortalCertificatesNewController",size:"md",resolve:{resource:function(){return"Success"}}})}}])}(),function(){"use strict";function e(e,t,n,o,r){var a=this;function i(e){return r.mapNameByPortalBannerType(e)}a.helper=e,a.portalBanner=t.getKey("banner").attributes,a.slideType=t.getKey("slide_type"),a.bannerType=t.getKey("banner_type"),a.portalBannerSlide=t.getKey("portal_banner_slide"),n.ariaLabel=e.showMessage("lup.a11y.internal_course_banner_settings_main"),n.ariaLabelSide=e.showMessage("lup.a11y.internal_course_banner_settings_aside"),o.breadcrumbs=function(e){{if("CatalogBanner"===e)return[{title:I18n.t("lup.breadcrumbs.settings.index"),url:"/settings"},{title:I18n.t("lup.breadcrumbs.settings.catalog_banners"),url:"/settings/catalog/banners"},{title:i(a.slideType),url:"/settings/catalog/banners/:id/edit".replace(/:id/,a.portalBannerSlide.id)}];if("DashboardBanner"===e)return[{title:I18n.t("lup.breadcrumbs.settings.index"),url:"/settings"},{title:I18n.t("lup.breadcrumbs.settings.dashboard_banners"),url:"/settings/dashboard-banners"},{title:i(a.slideType),url:"/settings/dashboard-banners/:id/edit".replace(/:id/,a.portalBannerSlide.id)}]}}(a.bannerType),o.$on("reset-form",function(){a.portalBannerSlide=t.getKey("portal_banner_slide")}),o.$on("portal-banner-slide:updated",function(){r.promptToEnableSlideType(a.portalBanner,a.slideType,a.portalBannerSlide.id).then(function(e){a.portalBanner.enabled_slide_type=a.slideType})})}angular.module("lu").controller("EditPortalBannerSlideController",e),e.$inject=["LupHelper","StorageFactory","$scope","$rootScope","PortalBannerFactory"]}(),function(){"use strict";window.angular.module("lu").controller("SettingsTwoFactorAuthenticationGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","spinnerService",function(e,t,n,o,r,a,i){o=o.get();e.portal_setting=o.portal_setting.attributes,e.LupHelper=r,e.enabled_for_portal=o.two_factor_authentication_data.attributes.current_enable_status,e.mandatory_for_portal=o.two_factor_authentication_data.attributes.current_mandatory_status,e.showLoading=s,e.save=function(e){{s(),e.$dirty&&(e={enabled:e.enabled_for_portal.$viewValue,mandatory:e.mandatory_for_portal.$viewValue},t.post("/settings/two_factor_authentication/enable.json",e).success(function(e){a.location="/settings/two_factor_authentication/general"}).error(function(e){a.location="/settings/two_factor_authentication/general"}))}},e.cancel=function(){s(),a.location="/settings/two_factor_authentication/general"};r=[{title:r.showMessage("lup.tabs.settings"),url:"/settings"},{title:r.showMessage("lup.breadcrumbs.settings.two_factor_authentication_general"),url:"/settings/two_factor_authentication/general"}];function s(){i.showGroup("luSpinnerGlobal"),i.hideGroup("luSpinnerGlobal",3e3)}n.breadcrumbs=r}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsUsersCustomdataController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","CourseFactory","toastr","$modal","CustomUserDataFactory",function(o,e,t,n,r,a,i,s,l,c,u,d){var n=n.get(),p=(new s,new d);o.portal_setting=n.portal_setting.attributes,o.custom_user_data_definitions=n.custom_user_data_definitions,o.cudd_group_hash=n.cudd_group_hash,o.forceShowSave=!1,o.LupHelper=r,o.CourseFactory=l,o.cancel=function(){a.location="/settings/users/customdata"},a.portalSettingFormDirty=!1,o.ariaLabel=r.showMessage("lup.saml.custom_data"),o.ariaLabelSide=r.showMessage("lup.a11y.settings.general_aside"),o.onSpaceRearrange=function(e,n,t){if(!t)return;if("space"===r.keyboard_keys[e.which]){if(e.preventDefault(),null!==o.rememberReorderIndex&&n!==o.rememberReorderIndex){e=t[n];return t[n]=t[o.rememberReorderIndex],t[o.rememberReorderIndex]=e,t=t.map(function(e){return e.id}),p.reorderContent(t),o.rememberReorderIndex=null,void o.$$postDigest(function(){var e,t;e=n,(t=document.querySelectorAll(".reorder-list")).length&&t[e].querySelector(".as-sortable-item-handle").focus()})}o.rememberReorderIndex=n}},o.rememberReorderIndex=null,o.ariaLabelForContentSegments=function(e,t){return null!==o.rememberReorderIndex?o.rememberReorderIndex===e?r.showMessage("a11y.exam_order_list.selected",{answer_option:t}):r.showMessage("a11y.exam_order_list.swap",{answer_option:t}):r.showMessage("a11y.exam_order_list.select",{answer_option:t})},t.$on("addNewField",function(){a.location="/custom_user_datas/new"}),o.activeCustomDataDDM={},o.toggled=function(e,t){o.activeCustomDataDDM[t]=e},o.dragControlListeners={orderChanged:function(e){for(var t=[],n=0;n<o.custom_user_data_definitions.data.length;n++)t.push(o.custom_user_data_definitions.data[n].id);p.reorderContent(t)},allowDuplicates:!1},o.deleteCUD=function(t){var n=new l;n.getRelatedLearningJourneys(t,3,!1).then(function(){var e;if(n.referenceFound&&!n.referenceWorkflows.every(function(e){return e.status===r.learningJourneyStatuses.version_archived}))return Promise.reject(new Error("Cannot delete CUD that is a part of learning journey"));o.cudd_group_hash[t]?u.open({controller:"DeleteCustomuserDatasContainRuleController",templateUrl:"/tc/custom_user_data/delete-cud-containing-rule.html",windowClass:"modal-box",resolve:{options:function(){return{title:r.showMessage("lup.customdata.contain_rule.delete.title"),intro:r.showMessage("lup.customdata.contain_rule.delete.intro",{rules_number:o.cudd_group_hash[t].length}),content:r.showMessage("lup.customdata.contain_rule.delete.content"),listTitle:r.showMessage("lup.customdata.contain_rule.delete.list_title"),cuddGroupIdsHash:o.cudd_group_hash[t]}}}}):(e=I18n.t("lup.customdata.sure_to_delete"),i.confirm(I18n.t("lup.confirm"),e).then(function(e){p.destroy(t).then(function(){a.location="/settings/users/customdata"})}))}).catch(function(e){var t;n.referenceFound&&(t=r.showMessage("lup.ljw.cud.block_delete_single"),0<n.referenceWorkflows.length&&(t=r.showMessage("lup.ljw.cud.block_delete_multi")+" "+n.referenceWorkflows.map(function(e){return e.name}).join(", ")),c.error(t))})},setTimeout(function(){r.renderCKEditor({clear_all_previous_instances:!0,id:"custom_data_message",save_button_action:"save_text_button",width:"100%",editorTextChangeEvent:function(){o.forceShowSave=!0,o.$apply()}})},0)}])}(),function(){"use strict";window.angular.module("lu").controller("SettingsUsersGeneralController",["$scope","$http","$rootScope","StorageFactory","LupHelper","$window","$luPopover","PortalSettingFactory","$modal","$q","GroupUserVM",function(n,o,e,t,r,a,i,s,l,c,u){t=t.get(),new s;function d(){var e=angular.isArray(n.adminsForNotification)?n.adminsForNotification:[];n.selectedAdminsForNotification=e.map(function(e){return e.id})}n.portal_setting=t.portal_setting.attributes,n.portal_details=t.portal_details.attributes,n.adminsForNotification=t.admins_for_notification.data,n.selectedAdminsForNotification=[],n.LupHelper=r,n.cancel=function(){a.location="/settings/users/general"},n.loadPortalAdmins=function(e){var t=c.defer(),n="";try{n=angular.isArray(e.$selected)?e.$selected.join(","):""}catch(e){$log.debug("loadPortalAdmins: Unable to convert selected admins to string!"),n=""}return o.get("/all_users.json",{params:{search:e.$query,include_pending:!1,exclude_disabled:!0,include_top_admins:!0,by_membership_type:r.groupMembershipTypes.admin,page:e.$page,except:n}}).success(function(e){e=e.users.data,e=_.map(e,function(e){return(e=new u(e)).user_id=e.user_id,e.firstLineDisplay=angular.isDefined(e.display_name)?e.display_name:"",e.secondLineDisplay=angular.isDefined(e.email)?e.email:"",e});t.resolve(e)}).error(function(){t.reject("Failed to get admins")}),t.promise},n.compareAdminsById=function(e,t){return!!(angular.isDefined(e)&&angular.isDefined(e.user_id)&&angular.isDefined(t)&&angular.isDefined(t.user_id))&&e.user_id==t.user_id},n.adminForNotificationChanged=function(){d(),n.portal_setting_form.$setDirty()},a.portalSettingFormDirty=!1,n.selected_group=null,n.login_with_usernames=t.login_with_usernames,n.isParentPortal=t.is_parent_portal,n.proxyUserEnabled=t.proxy_user_enabled,d(),n.showConfirmationWithUsernamesWarning=function(){return n.login_with_usernames&&n.portal_setting.allow_users_to_self_register&&n.portal_setting.self_registered_users_require_account_confirmation},n.$watch("portal_details['enable_trust']",function(e,t){e!==t&&!1!==e&&i.confirm(I18n.t("lup.sqsso.confirm_api_key_generation.content.confirm"),I18n.t("portal_details.enable_portal_trust_warning_improved")).then().catch(function(e){n.portal_details.enable_trust=!1})})}])}(),function(){"use strict";function e(e,t,n,p,o){var m=this;function r(){m.formData={is_enabled:m.passwordPolicy.is_enabled,enable_password_expiration:m.passwordPolicy.enable_password_expiration,password_expiration_days:m.passwordPolicy.password_expiration_days,enable_password_retention:m.passwordPolicy.enable_password_retention,num_historical_passwords_stored:m.passwordPolicy.num_historical_passwords_stored,minimum_lowercase_characters:m.passwordPolicy.minimum_lowercase_characters,minimum_uppercase_characters:m.passwordPolicy.minimum_uppercase_characters,minimum_special_characters:m.passwordPolicy.minimum_special_characters,minimum_numerical_characters:m.passwordPolicy.minimum_numerical_characters,minimum_password_length:m.passwordPolicy.minimum_password_length,update_all_users:!1}}function a(e){m.theForm.$setPristine(),n.put("/settings/users/update_password_policy.json",e).then(function(e){e.data&&e.data.password_policy_configuration&&(t.setKey("password_policy_configuration",e.data.password_policy_configuration),angular.copy(e.data.password_policy_configuration.attributes,m.passwordPolicy),angular.copy(e.data.password_policy_configuration.attributes,m.formData))},function(e){i()})}function i(){m.passwordPolicy=t.getKey("password_policy_configuration").attributes,r(),m.theForm.$setPristine()}function s(e){var t,n,o,r,a,i,s,l,c,u,d;!0===m.passwordPolicy.is_enabled&&!1===m.formData.is_enabled?f(e):(f(e),t=parseInt(m.formData.minimum_lowercase_characters),n=angular.isNumber(t)&&t>=p.password_policy_form_validations.minimum_lowercase_characters_min,e.$setValidity("validMinimumLowercaseCharacters",n),o=parseInt(m.formData.minimum_uppercase_characters),r=angular.isNumber(o)&&o>=p.password_policy_form_validations.minimum_uppercase_characters_min,e.$setValidity("validMinimumUppercaseCharacters",r),a=parseInt(m.formData.minimum_special_characters),i=angular.isNumber(a)&&a>=p.password_policy_form_validations.minimum_special_characters_min,e.$setValidity("validMinimumSpecialCharacters",i),u=parseInt(m.formData.minimum_numerical_characters),s=angular.isNumber(u)&&u>=p.password_policy_form_validations.minimum_numerical_characters_min,e.$setValidity("validMinimumNumericalCharacters",s),l=parseInt(m.formData.minimum_password_length),c=angular.isNumber(l)&&l>=p.password_policy_form_validations.minimum_password_length_min&&l<=p.password_policy_form_validations.minimum_password_length_max,e.$setValidity("validMinimumPasswordLength",c),m.lengthSum=0,angular.isNumber(t)&&(m.lengthSum+=t),angular.isNumber(o)&&(m.lengthSum+=o),angular.isNumber(a)&&(m.lengthSum+=a),angular.isNumber(u)&&(m.lengthSum+=u),u=m.lengthSum<=l,m.validMplByRequirementShow=n&&r&&i&&s&&c&&m.lengthSum>l,e.$setValidity("validMinimumPasswordLengthByReq",u),!0===m.formData.enable_password_retention&&(d=parseInt(m.formData.num_historical_passwords_stored),d=angular.isNumber(d)&&d>=p.password_policy_form_validations.num_historical_passwords_stored_min&&d<=p.password_policy_form_validations.num_historical_passwords_stored_max,e.$setValidity("validNumHistoricalPasswordsStored",d)),!0===m.formData.enable_password_expiration&&(d=parseInt(m.formData.password_expiration_days),d=angular.isNumber(d)&&d>=p.password_policy_form_validations.password_expiration_days_min,e.$setValidity("validPasswordExpirationDays",d)))}function f(e){if(angular.isObject(e)){for(var t in e.$error)e.$error.hasOwnProperty(t)&&e.$setValidity(t,!0);e.$setPristine(!0)}}m.helper=p,m.requirements=m.helper.password_policy_form_validations,m.passwordPolicy=t.getKey("password_policy_configuration").attributes,m.formData={},m.lengthSum=0,m.save=function(){{var e,t;s(m.theForm),m.theForm.$valid&&(!(e=[])===m.formData.enable_password_expiration&&e.push("password_expiration_days"),!1===m.formData.enable_password_retention&&e.push("num_historical_passwords_stored"),!(t={password_policy_form:!0===m.passwordPolicy.is_enabled&&!1===m.formData.is_enabled?_.pick(m.formData,"is_enabled"):_.omit(m.formData,e)})===m.passwordPolicy.is_enabled&&!0===m.formData.is_enabled&&!0===m.formData.enable_password_expiration?o.confirm(I18n.t("lup.confirm"),I18n.t("lup.settings.password_complexity.are_you_sure_you_want_to_expire_all_users_passwords_now")).then(function(e){t.password_policy_form.update_all_users=!0,a(t)},function(e){a(t)}):a(t))}},m.cancel=i,m.setForm=function(e){m.theForm=e},m.setLengthTo=function(e){angular.isNumber(e)&&(m.formData.minimum_password_length=e,s(m.theForm),m.theForm.$setDirty(!0))},r()}angular.module("lu").controller("SettingsPasswordPolicyController",e),e.$inject=["$scope","StorageFactory","$http","LupHelper","$luPopover"]}(),function(){"use strict";function e(t,e,n,o,r,a,i,s,l){var c=this,u=new r(e);function d(e){c.enrollButtonDisabled=!0;e={portal_membership_ids:e.map(function(e){return e.id}),admin_confirmed:c.adminConfirmed};u.enrollUser(e).then(function(e){c.enrollButtonDisabled=!1,e.data.prevent_success_message?c.confirmEnrollmentRequired=!0:t.close(e.data.delayed)}).catch(function(e){c.enrollButtonDisabled=!1})}c.lupHelper=o,c.course=n,c.component=e,c.confirmEnrollmentRequired=!1,c.enrollButtonDisabled=!1,c.fetchUsers=function(e){var t=i.defer();return a.get("/all_users.json",{params:{search:e.$query,component_id:c.component.id,include_pending:!1,exclude_disabled:!0,page:e.$page,except:[l]}}).success(function(e){t.resolve(e.users.data)}).error(function(){t.reject("Failed to get users")}),t.promise},c.enroll=function(){c.users&&((c.course.enable_waitlist||c.component.enable_waitlist)&&c.component.max_capacity<=c.component.number_enrolled_on_session?s.confirm(I18n.t("lup.confirm"),I18n.t("ilts.waitlist_confirmation")).then(function(e){d(c.users)}):d(c.users))},c.cancel=function(){t.dismiss()},c.users=[]}angular.module("lu").controller("SessionEnrollUserController",e),e.$inject=["$modalInstance","component","course","LupHelper","SessionFactory","$http","$q","$luPopover","alreadyEnrolledUsers"]}(),function(){"use strict";function e(e,t,n,o,r,a){var i=this;function s(e,t){return{value:e,label:t}}i.helper=t,i.course=r,i.component=a,i.cancelOptions=function(){var e=[],t=i.helper.ilt_sessions.mark_attended;i.course.must_choose_session!=i.helper.ilt_sessions.enroll_in_all&&e.push(s(t.allow_to_choose_again,i.helper.showMessage("ilts.allow_choose_again")));e.push(s(t.dont_do_anything,i.helper.showMessage("ilts.leave_on_course_cancel"))),i.course.only_contains_sessions?e.push(s(t.unenroll_from_course,i.helper.showMessage("ilts.unenroll_from_course_and_all_sessions"))):e.push(s(t.unenroll_from_course,i.helper.showMessage("ilts.unenroll_from_course_and_all_sessions_and_modules")));return i.selectedCancelOption=e[0].value,e}(),i.proceed=function(){var e;e=1<i.course.course_components_count?i.selectedCancelOption:i.helper.ilt_sessions.mark_attended.unenroll_from_course;o.close(e)},i.close=function(){o.dismiss()}}angular.module("lu").controller("CoursesComponentsSessionsCancelController",e),e.$inject=["StorageFactory","LupHelper","paramsService","$modalInstance","course","component"]}(),function(){"use strict";function e(e,n,t,o,r,a,i,s,l,c,u,d,p,m,f){var g=this,h=e.getKey("component").attributes,b=new o,v=new s(h),w=new m,m=e.getKey("ui_flags");g.clearOnPagination=!1,g.helper=n,g.component=h,g.course=e.getKey("course").attributes,g.attendees=e.getKey("attendees"),g.all_enrolled_pm_ids=e.getKey("all_enrolled_pm_ids"),g.rosters=e.getKey("rosters"),g.has_webinar=e.getKey("has_webinar"),g.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),g.loadData=y,g.applyFilter=function(){var e={filter:g.selectedFilterOption};t.merge(e),y()},g.downloadRoster=function(){var e="/components/sessions/:component_id/download_roster.pdf".replace(/:component_id/,g.component.id);r.location=e},g.removeRoster=function(t){u.confirm(I18n.t("lup.confirm"),I18n.t("components.are_you_sure_you_want_to_delete_this_roster")).then(function(e){v.removeRoster(t.id).then(function(e){g.rosters=e.data.rosters})})},g.attendanceSet=function(e,t){if((t.enrollment_component_status_id==n.enrollmentStatuses.no_show||t.enrollment_component_status_id==n.enrollmentStatuses.cancelled)&&(e==n.enrollmentStatuses.completed||e==n.enrollmentStatuses.partially_attended)&&g.component.max_capacity<=g.component.number_enrolled_on_session)return void n.showTip("ilts.capacity_already_reached");c.open({templateUrl:"/tc/components/sessions/set_attendance.html",controller:"SessionsSetAttendanceController as vm",size:"lg",resolve:{course:function(){return g.course},component:function(){return g.component},attendance:function(){return e},attendee:function(){return t}}}).result.then(function(){y()})},g.showWebinarURL=function(e,t){return void n.showTip("webinar.share_webinar_url",{id:e,domain_for_url:t})},g.importWebinarAttendance=function(){u.confirm(n.showMessage("lup.confirm"),n.showMessage("ilts.webinars.attendance_import.are_you_sure_you_want_to_import_attendances")).then(function(e){var t="/webinar/trigger_attendance_import.json?cmp_id=:component_id".replace(/:component_id/,g.component.id);d.post(t,{})})},g.selection=[],g.toggleSelection=function(t){var n=_.find(g.selection,function(e){return e==t});n?g.selection=_.reject(g.selection,function(e){return e==n}):g.selection.push(t)},g.view=function(e){e&&e.profile_url&&(window.location=e.profile_url)},g.processingProgress=0,g.sortOptions=[{label:n.showMessage("lup.filters.name_az"),value:"user_display_name.ASC",default:!0},{label:n.showMessage("lup.filters.name_za"),value:"user_display_name.DESC"}],a.displayWaitlistTab=g.component.enable_waitlist,a.$on("sendMessageToAttendees",function(){c.open({templateUrl:"/tc/components/sessions/send_message_to_ilt_session_attendees_modal.html",controller:"SessionsSendMessageToAttendeesController",size:"lg",resolve:{course_id:function(){return g.course.id},session_id:function(){return g.component.id},session_name:function(){return g.component.title}}})}),a.$on("cancelSession",function(){b.cancelSession(g.component,g.course,function(e){r.location="/courses/:course_id/content".replace(/:course_id/,g.course.id)},function(e){})}),a.$on("enrollUser",function(){c.open({templateUrl:"/tc/components/sessions/enroll_user.html",controller:"SessionEnrollUserController as vm",size:"lg",resolve:{course:function(){return g.course},component:function(){return g.component},alreadyEnrolledUsers:function(){return g.all_enrolled_pm_ids}}}).result.then(function(e){g.jobTitle="",g.jobErrors=[],g.jobResponse=null,e&&(e=e.job_reference,g.processingProgress=0,g.processingEnrollments=!0,w.pingForProgress(e,function(e){g.processingProgress=e},function(e){g.processingEnrollments=!1,g.jobTitle=e.flash_msg,g.jobErrors=JSON.parse(e.job_errors),(g.jobResponse=e).has_errors||f.onSuccess({success:e.flash_msg}),y()})),y()})}),a.$on("publishCourse",function(){p.publishCourse(g)}),a.$on("createNewCourseVersion",function(){p.createNewCourseVersion(g)}),a.$on("deleteCourse",function(){p.deleteCourse(g)}),a.$on("cloneCourse",function(){p.createCourseCopy(g.course.id)}),a.$on("exportSignedEsignatureModules",function(){p.exportSignedEsignatureModules(g.course.id)}),g.doSelectionBy=function(e){return e.enrollment_component_id},g.markEveryone=function(){var e=_.find(g.attendees.data,function(e){return!!e.percentage&&_.contains(g.selection,e.enrollment_component_id)&&_.contains([n.enrollmentStatuses.completed,n.enrollmentStatuses.passed],e.status_id)});c.open({templateUrl:"/tc/components/sessions/set_multi_attendance.html",controller:"SessionsSetMultiAttendanceController as vm",size:"lg",resolve:{course:function(){return g.course},component:function(){return g.component},attendees:function(){return g.selection},haveCompletedWithScore:function(){return!!e}}}).result.then(function(){g.selection=[],y()})};m=m.can_edit_content?{title:g.component.title,url:"/courses/:course_id/content/:component_id/edit".replace(/:course_id/,g.course.id).replace(/:component_id/,g.component.id)}:{title:g.component.title};function y(){var e={};e.params=t.get(),b.getAttendees(g.course.id,g.component.id,e.params).then(function(e){g.attendees=e.data.attendees,g.component=e.data.component.attributes,a.$broadcast("selectAll:deSelectAll")})}a.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:g.course.name,url:"/courses/:course_id".replace(/:course_id/,g.course.id)},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/:course_id/content".replace(/:course_id/,g.course.id)},m,{title:I18n.t("lup.breadcrumbs.courses.manage_attendees"),url:"/courses/:course_id/content/:component_id/manage-attendees".replace(/:course_id/,g.course.id).replace(/:component_id/,g.component.id)}],l.$watch("vm.rosterUpload",function(e){e&&(g.processingUpload=!0,v.uploadRoster(e,function(e){g.rosters=e.data.rosters},function(e){g.uploadProgress=e.progress},function(e){}))})}angular.module("lu").controller("CoursesComponentsSessionsManageAttendeesController",e),e.$inject=["StorageFactory","LupHelper","paramsService","ComponentFactory","$window","$rootScope","$timeout","SessionFactory","$scope","$modal","$luPopover","$http","CourseActionFactory","LupJobFactory","notifyFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=e.getKey("course"),c=e.getKey("waitlist_enrollments"),u=new o;function d(){var e=n.get();u.getWaitlistEnrollments(s.course.id,e).then(function(e){s.waitlist_enrollments=e.data.waitlist_enrollments})}s.course=l.attributes,s.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),s.waitlist_enrollments=c,s.promoteFromWaitlist=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("ilts.are_you_sure_that_you_want_to_move_to_session")).then(function(e){u.promoteFromWaitlist(s.course.id,t).then(function(e){d()})})},s.removeFromWaitlist=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("ilts.are_you_sure_that_you_want_to_remove_from_waitlist")).then(function(e){u.removeFromWaitlist(s.course.id,t).then(function(e){d()})})},s.helper=t,s.loadData=d,r.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:s.course.name,url:"/courses/:course_id".replace(/:course_id/,s.course.id)},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/:course_id/content".replace(/:course_id/,s.course.id)},{title:I18n.t("lup.components.sessions.manage_waitlist"),url:"/courses/:course_id/content/manage-waitlist".replace(/:course_id/,s.course.id)}],s.sortOptions=[{label:s.helper.showMessage("lup.filters.waitlist_position_asc"),value:"id.asc"},{label:s.helper.showMessage("lup.filters.name_az"),value:"display_name.asc"},{label:s.helper.showMessage("lup.filters.name_za"),value:"display_name.desc"}],r.$on("publishCourse",function(){i.publishCourse(s)}),r.$on("createNewCourseVersion",function(){i.createNewCourseVersion(s)}),r.$on("deleteCourse",function(){i.deleteCourse(s)}),r.$on("cloneCourse",function(){i.createCourseCopy(s.course.id)}),r.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(s.course.id)})}angular.module("lu").controller("CoursesManageCourseLevelWaitlistController",e),e.$inject=["StorageFactory","LupHelper","paramsService","CourseFactory","$rootScope","$luPopover","CourseActionFactory"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){var s=this,l=e.getKey("course"),c=e.getKey("component"),u=e.getKey("waitlist_enrollments"),d=new o({id:c.attributes.id,course_id:l.attributes.id});function p(){var e=n.get();d.getWaitlistEnrollments(e).then(function(e){s.waitlist_enrollments=e.data.waitlist_enrollments})}s.session=c.attributes,s.course=l.attributes,s.enrollment_approvals_enabled=e.getKey("enrollment_approvals_enabled"),s.waitlist_enrollments=u,s.promoteFromWaitlist=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("ilts.are_you_sure_that_you_want_to_move_to_session")).then(function(e){d.promoteFromWaitlist(t).then(function(e){p()})})},s.removeFromWaitlist=function(t){a.confirm(I18n.t("lup.confirm"),I18n.t("ilts.are_you_sure_that_you_want_to_remove_from_waitlist")).then(function(e){d.removeFromWaitlist(t).then(function(e){p()})})},s.helper=t,s.loadData=p,r.displayWaitlistTab=!0,r.breadcrumbs=[{title:I18n.t("lup.breadcrumbs.courses.index"),url:"/courses"},{title:s.course.name,url:"/courses/:course_id".replace(/:course_id/,s.course.id)},{title:I18n.t("lup.breadcrumbs.courses.content"),url:"/courses/:course_id/content".replace(/:course_id/,s.course.id)},{title:s.session.title,url:"/courses/:course_id/content/:component_id/edit".replace(/:course_id/,s.course.id).replace(/:component_id/,s.session.id)},{title:I18n.t("lup.components.sessions.manage_waitlist"),url:"/courses/:course_id/content/:component_id/manage-waitlist".replace(/:course_id/,s.course.id).replace(/:component_id/,s.session.id)}],r.$on("publishCourse",function(){i.publishCourse(s)}),r.$on("createNewCourseVersion",function(){i.createNewCourseVersion(s)}),r.$on("deleteCourse",function(){i.deleteCourse(s)}),r.$on("cloneCourse",function(){i.createCourseCopy(s.course.id)}),r.$on("exportSignedEsignatureModules",function(){i.exportSignedEsignatureModules(s.course.id)})}angular.module("lu").controller("CoursesManageSessionLevelWaitlistController",e),e.$inject=["StorageFactory","LupHelper","paramsService","SessionFactory","$rootScope","$luPopover","CourseActionFactory"]}(),function(){"use strict";function e(e,t,n){this.helper=e,this.close=function(){t.dismiss()},this.courses=n}angular.module("lu").controller("SessionsCoursesController",e),e.$inject=["LupHelper","$modalInstance","courses"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s){var l,c=this,u=new i(e),d=r.percentage,p=r.status_id;function m(e,t){return{value:e,label:t}}c.helper=a,c.course=t,c.component=e,c.attendance=o,c.attendee=r,c.attendanceForm={minutes_attended:r.minutes_attended,percentage:r.percentage},c.attendance===a.enrollmentStatuses.no_show&&(c.attendanceForm.status=c.helper.enrollmentStatuses.no_show),c.cancelOptions=function(){var e=[],t=c.helper.ilt_sessions.mark_attended;c.course.must_choose_session!=c.helper.ilt_sessions.enroll_in_all&&e.push(m(t.allow_to_choose_again,c.helper.showMessage("ilts.allow_choose_again")));c.course.enable_sequencing?(e.push(m(t.dont_do_anything,c.helper.showMessage("ilts.leave_on_course_but_cannot_continue_modules"))),e.push(m(t.dont_do_anything_but_allow_sequence_override,c.helper.showMessage("ilts.leave_on_course_seq_modules")))):e.push(m(t.dont_do_anything,c.helper.showMessage("ilts.leave_on_course")));c.course.only_contains_sessions?e.push(m(t.unenroll_from_course,c.helper.showMessage("ilts.unenroll_from_course_and_all_sessions"))):e.push(m(t.unenroll_from_course,c.helper.showMessage("ilts.unenroll_from_course_and_all_sessions_and_modules")));return c.selectedCancelOption=e[0].value,e}(),c.noShowStatuses=((l=[]).push(m(a.enrollmentStatuses.no_show,c.helper.showMessage("ilts.no_show"))),l.push(m(a.enrollmentStatuses.cancelled,c.helper.showMessage("ilts.cancelled"))),l),c.setAttendance=function(e){var t;if(c.attendance==a.enrollmentStatuses.completed)(t={enrollment_component_id:c.attendee.enrollment_component_id,percentage:c.attendanceForm.percentage,status_id:c.helper.enrollmentStatuses.completed}).percentage&&""!==t.percentage&&e.$setValidity("validScore",0<=parseInt(t.percentage)&&parseInt(t.percentage)<=100);else if(c.attendance==a.enrollmentStatuses.no_show)t=function(){var e;e=1<c.course.course_components_count?c.selectedCancelOption:c.helper.ilt_sessions.mark_attended.unenroll_from_course;return{enrollment_component_id:c.attendee.enrollment_component_id,status_id:c.attendanceForm.status,cancel_option_id:e}}();else{if(c.attendance!=a.enrollmentStatuses.partially_attended)return;t={enrollment_component_id:c.attendee.enrollment_component_id,minutes_attended:c.attendanceForm.minutes_attended,status_id:c.helper.enrollmentStatuses.partially_attended}}{if(!t.enrollment_component_id&&!t.status_id)return;t.course_id=c.course.id}e.$valid&&(c.attendance==a.enrollmentStatuses.completed&&_.contains([a.enrollmentStatuses.completed,a.enrollmentStatuses.passed],p)&&(!t.percentage&&d||t.percentage&&d&&d!==t.percentage)?s.confirm(a.showMessage("lup.confirm"),a.showMessage("lup.components.sessions.single_score_change_warning")).then(function(e){u.setAttendance(t,!1).then(function(e){n.close()})}):u.setAttendance(t,!1).then(function(e){n.close()}))},c.cancel=function(){n.dismiss()}}angular.module("lu").controller("SessionsSetAttendanceController",e),e.$inject=["$modalInstance","component","course","attendance","attendee","LupHelper","SessionFactory","$luPopover"]}(),function(){"use strict";function e(n,e,t,o,r,a,i,s){var l,c=this,u=new i(e);function d(e,t){return{value:e,label:t}}c.helper=a,c.course=t,c.component=e,c.attendees=o,c.attendanceForm={status_id:c.helper.enrollmentStatuses.completed},c.cancelOptions=function(){var e=[],t=c.helper.ilt_sessions.mark_attended;c.course.must_choose_session!=c.helper.ilt_sessions.enroll_in_all&&e.push(d(t.allow_to_choose_again,c.helper.showMessage("ilts.allow_choose_again")));c.course.enable_sequencing?(e.push(d(t.dont_do_anything,c.helper.showMessage("ilts.leave_on_course_but_cannot_continue_modules"))),e.push(d(t.dont_do_anything_but_allow_sequence_override,c.helper.showMessage("ilts.leave_on_course_seq_modules")))):e.push(d(t.dont_do_anything,c.helper.showMessage("ilts.leave_on_course")));c.course.only_contains_sessions?e.push(d(t.unenroll_from_course,c.helper.showMessage("ilts.unenroll_from_course_and_all_sessions"))):e.push(d(t.unenroll_from_course,c.helper.showMessage("ilts.unenroll_from_course_and_all_sessions_and_modules")));return c.selectedCancelOption=e[0].value,e}(),c.showStatuses=((l=[]).push(d(a.enrollmentStatuses.completed,c.helper.showMessage("ilts.attended"))),l.push(d(a.enrollmentStatuses.partially_attended,c.helper.showMessage("ilts.partially_attended"))),l.push(d(a.enrollmentStatuses.no_show,c.helper.showMessage("ilts.no_show"))),l.push(d(a.enrollmentStatuses.cancelled,c.helper.showMessage("ilts.cancelled"))),l),c.setAttendance=function(e){c.attendanceForm.status_id!=c.helper.enrollmentStatuses.cancelled&&c.attendanceForm.status_id!=c.helper.enrollmentStatuses.no_show||1==c.course.course_components_count&&(c.selectedCancelOption=c.helper.ilt_sessions.mark_attended.unenroll_from_course);var t={scores:"",ids:c.attendees,bulk_set:!0,status_id_to_set:c.attendanceForm.status_id,minutes_attended:c.attendanceForm.minutes_attended,bulk_score:c.attendanceForm.percentage,course_id:c.course.id,what_to_do_if_cancelled:c.selectedCancelOption};c.attendanceForm.status_id==c.helper.enrollmentStatuses.completed&&t.bulk_score&&""!==t.bulk_score&&e.$setValidity("validScore",0<=parseInt(t.bulk_score)&&parseInt(t.bulk_score)<=100);e.$valid&&(c.attendanceForm.status_id==c.helper.enrollmentStatuses.completed&&r?s.confirm(a.showMessage("lup.confirm"),a.showMessage("lup.components.sessions.multiple_score_change_warning")).then(function(e){u.setAttendance(t,!0).then(function(e){n.close()})}):u.setAttendance(t,!0).then(function(e){n.close()}))},c.cancel=function(){n.dismiss()}}angular.module("lu").controller("SessionsSetMultiAttendanceController",e),e.$inject=["$modalInstance","component","course","attendees","haveCompletedWithScore","LupHelper","SessionFactory","$luPopover"]}();